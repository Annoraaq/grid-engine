{"hash":"fc4d3534bc7e0003bf0d805b0bf2f78e1db5cb06","data":{"example":{"id":"dfa8575f4c23873bdd94e7b5ec748ab9","title":"Char Layers - Flying Chars with shadows","path":"/example/char-layers-flying-chars-with-shadows/","content":"<h1 id=\"character-layers---flying-chars-with-shadows\"><a href=\"#character-layers---flying-chars-with-shadows\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Character Layers - Flying Chars with Shadows</h1>\n<p><strong>Press the arrow keys to move.</strong> This demonstrates the usage of <a href=\"../../p/character-layers\">character layers</a> to create flying characters with separated shadows. The shadows are represented as <em>characters</em> in GridEngine, are non-colliding and live on the same character layer as the player.</p>\n<iframe src=\"../../x/char-layers-flying-chars-shadows\"></iframe>\n<h2 id=\"example-code\"><a href=\"#example-code\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Example Code</h2>\n<p><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> game <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Phaser<span class=\"token punctuation\">.</span>Game</span><span class=\"token punctuation\">(</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span>preload<span class=\"token punctuation\">,</span> create<span class=\"token punctuation\">,</span> update<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">preload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">load</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">image</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"tiles\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/assets/tf_jungle_tileset.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">load</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">tilemapTiledJSON</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jungle\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/assets/jungle-char-layers.json\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">load</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">spritesheet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"player\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/assets/characters.png\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">frameWidth</span><span class=\"token operator\">:</span> <span class=\"token number\">52</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">frameHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">72</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">load</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">spritesheet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"monster_bird\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/assets/monster_bird1_with_shadow.png\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">frameWidth</span><span class=\"token operator\">:</span> <span class=\"token number\">61</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">frameHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">57</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> tilemap <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">make</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">tilemap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jungle\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  tilemap<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addTilesetImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jungle\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"tiles\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> tilemap<span class=\"token punctuation\">.</span><span class=\"token property-access\">layers</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> layer <span class=\"token operator\">=</span> tilemap<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createLayer</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token string\">\"jungle\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    layer<span class=\"token punctuation\">.</span><span class=\"token property-access\">scale</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> playerSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">add</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"player\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  playerSprite<span class=\"token punctuation\">.</span><span class=\"token property-access\">scale</span> <span class=\"token operator\">=</span> <span class=\"token number\">1.5</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">cameras</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">main</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">startFollow</span><span class=\"token punctuation\">(</span>playerSprite<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">cameras</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">main</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setFollowOffset</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>playerSprite<span class=\"token punctuation\">.</span><span class=\"token property-access\">width</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>playerSprite<span class=\"token punctuation\">.</span><span class=\"token property-access\">height</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> monsterBirdSprites <span class=\"token operator\">=</span> createBirdSprites<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> monsterBirdShadows <span class=\"token operator\">=</span> createShadowSprites<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  createBirdAnimation<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">anims</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">staggerPlay</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bird\"</span><span class=\"token punctuation\">,</span> monsterBirdSprites<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> gridEngineConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">characters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"player\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">sprite</span><span class=\"token operator\">:</span> playerSprite<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">walkingAnimationMapping</span><span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">charLayer</span><span class=\"token operator\">:</span> <span class=\"token string\">'ground'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token spread operator\">...</span>monsterBirdSprites<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">sprite<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"monster_bird_\"</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">,</span>\n        sprite<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">7</span> <span class=\"token operator\">+</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">speed</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">charLayer</span><span class=\"token operator\">:</span> <span class=\"token string\">'sky'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token spread operator\">...</span>monsterBirdShadows<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">sprite<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"monster_bird_shadow_\"</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">,</span>\n        sprite<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">startPosition</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">7</span> <span class=\"token operator\">+</span> i <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">speed</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">charLayer</span><span class=\"token operator\">:</span> <span class=\"token string\">'ground'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">collides</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">create</span><span class=\"token punctuation\">(</span>tilemap<span class=\"token punctuation\">,</span> gridEngineConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">moveRandomly</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"monster_bird_\"</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">positionChangeStarted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> charId<span class=\"token punctuation\">,</span> exitTile<span class=\"token punctuation\">,</span> enterTile <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isBird</span><span class=\"token punctuation\">(</span>charId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">moveTo</span><span class=\"token punctuation\">(</span><span class=\"token string\">'monster_bird_shadow_'</span> <span class=\"token operator\">+</span> <span class=\"token function\">getBirdNum</span><span class=\"token punctuation\">(</span>charId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> enterTile<span class=\"token punctuation\">.</span><span class=\"token property-access\">x</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> enterTile<span class=\"token punctuation\">.</span><span class=\"token property-access\">y</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> cursors <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">input</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">keyboard</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createCursorKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span><span class=\"token property-access\">left</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">isDown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"player\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"left\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span><span class=\"token property-access\">right</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">isDown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"player\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"right\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span><span class=\"token property-access\">up</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">isDown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"player\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"up\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>cursors<span class=\"token punctuation\">.</span><span class=\"token property-access\">down</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">isDown</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">move</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"player\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"down\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getBirdNum</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">charId</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token operator\">+</span>charId<span class=\"token punctuation\">[</span>charId<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">isBird</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">charId</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> charId<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'monster_bird_'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>charId<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'monster_bird_shadow'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createCroppedSprites</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> croppedSprites <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> monsterBirdSprite <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">add</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">sprite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"monster_bird\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    monsterBirdSprite<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setCrop</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    monsterBirdSprite<span class=\"token punctuation\">.</span><span class=\"token property-access\">scale</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n    croppedSprites<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">push</span><span class=\"token punctuation\">(</span>monsterBirdSprite<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword control-flow\">return</span> croppedSprites<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">createBirdSprites</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> createCroppedSprites<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">61</span><span class=\"token punctuation\">,</span> <span class=\"token number\">47</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createShadowSprites</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> createCroppedSprites<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">call</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span> <span class=\"token number\">47</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createBirdAnimation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">anims</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bird\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">frames</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">anims</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">generateFrameNumbers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"monster_bird\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">start</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">end</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">frameRate</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">repeat</span><span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">yoyo</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></p>\n<h2 id=\"example-phaser-config\"><a href=\"#example-phaser-config\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Example Phaser Config</h2>\n<p><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">preload<span class=\"token punctuation\">,</span> create<span class=\"token punctuation\">,</span> update</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"GridEngineExample\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">render</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">antialias</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Phaser</span><span class=\"token punctuation\">.</span><span class=\"token constant\">AUTO</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gridEngine\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">plugin</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">GridEngine</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">mapping</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gridEngine\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">scale</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">700</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">528</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">scene</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">preload</span><span class=\"token operator\">:</span> preload<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">create</span><span class=\"token operator\">:</span> create<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">update</span><span class=\"token operator\">:</span> update<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#48C4F8\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></p>\n","fileInfo":{"name":"4-char-layers-flying-chars-shadows"}}},"context":{}}