{"hash":"8169a85486f5b06ba31702e173b899c70f1375d2","data":{"page":{"id":"3e93c9fd39f04e82cb6f0ee927c45c9d","title":"Migrate to Version 2","path":"/p/migrate-to-version-2/","parent":"migrations","beta":null,"content":"<h1 id=\"migrate-to-version-2\"><a href=\"#migrate-to-version-2\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Migrate to Version 2</h1>\n<h2 id=\"why-migrate\"><a href=\"#why-migrate\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Why Migrate?</h2>\n<p>Version 1 will not be maintained anymore. Version 2 gets rid of old deprecated methods and properties. This speeds up development.\nAs a bonus, version 2 uses the version of Phaser you are using for your game instead of bringing its own copy. This means that the file size of GridEngine 2 is &#x3C; 100kb instead of ~1mb as in GridEngine 1.</p>\n<p>This guide helps you to migrate from version 1.x to version 2.x.</p>\n<h2 id=\"replace-moveleft-moveright-moveup-movedown\"><a href=\"#replace-moveleft-moveright-moveup-movedown\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Replace <code>moveLeft</code>, <code>moveRight</code>, <code>moveUp</code>, <code>moveDown</code></h2>\n<p>These methods were removed because there is a generic method <code>move</code>, that supports all 8 directions.\nFor instance, replace <code>moveLeft(\"player\")</code> with <code>move(\"player\", \"left\")</code>;</p>\n<h2 id=\"replace-phasermathvector2\"><a href=\"#replace-phasermathvector2\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Replace <code>Phaser.Math.Vector2</code></h2>\n<p>This dependency to phaser was removed. In version 2, all the public methods of GridEngine will take and return <a href=\"../../typedoc/interfaces/Position.html\">Position</a> objects instead of <code>Phaser.Math.Vector2</code>. <a href=\"../../typedoc/interfaces/Position.html\">Position</a> objects are simpler and only take x and y coordinates. Please note that a <code>Phaser.Math.Vector2</code> is also a <code>Position</code> because it has properties <code>x</code> and <code>y</code>. So you can keep passing these as input if you like.</p>\n<h2 id=\"rename-positionchanged-to-positionchangestarted\"><a href=\"#rename-positionchanged-to-positionchangestarted\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Rename <code>positionChanged()</code> to <code>positionChangeStarted()</code></h2>\n<p>To keep the observable names consistent, <code>positionChanged()</code> has been renamed to <code>positionChangeStarted()</code>. This is consistent to <code>positionChangeFinished()</code>.</p>\n<h2 id=\"change-observable-return-types\"><a href=\"#change-observable-return-types\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Change Observable Return Types</h2>\n<p>In order to be consistent through all observables, the return types of <code>movementStarted()</code>, <code>movementStopped()</code> and <code>directionChanged()</code> have been changed from an array [string, <a href=\"../../typedoc/enums/Direction.html\">Direction</a>] to an object: {charId: string, direction: <a href=\"../../typedoc/enums/Direction.html\">Direction</a>}.</p>\n<p>The following example code needs to be transformed as follows:</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">movementStarted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>charId<span class=\"token punctuation\">,</span> direction<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>becomes</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">gridEngine</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">movementStarted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> charId<span class=\"token punctuation\">,</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"rename-tile-and-tile-layer-properties\"><a href=\"#rename-tile-and-tile-layer-properties\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Rename Tile and Tile Layer Properties</h2>\n<p>All tile and tile layer properties that previously started with <code>gm_</code> have been renamed and now start with <code>ge_</code>.</p>\n<p>Further, the tile property <code>collides</code> is not a default property anymore. You can either rename it in your tilemap to <code>ge_collide</code> or you can set it as <code>collisionTilePropertyName</code> in the <a href=\"../../typedoc/interfaces/GridEngineConfig.html#collisionTilePropertyName\">config</a>.</p>\n<h2 id=\"remove-firstlayerabovechar-config-property\"><a href=\"#remove-firstlayerabovechar-config-property\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Remove <code>firstLayerAboveChar</code> Config Property</h2>\n<p>The deprecated <code>firstLayerAboveChar</code> config property has been removed. Use <code>ge_alwaysTop</code> tilemap layer property instead.</p>\n<h2 id=\"remove-characterindex-character-config-property\"><a href=\"#remove-characterindex-character-config-property\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Remove <code>characterIndex</code> Character Config Property</h2>\n<p>The deprecated <code>characterIndex</code> character config property has been removed. Use <code>walkingAnimationMapping</code> instead.</p>\n<h2 id=\"remove-walkinganimationenabled\"><a href=\"#remove-walkinganimationenabled\" aria-hidden=\"true\"><span class=\"autolink fa-solid fa-link\"></span></a>Remove <code>walkingAnimationEnabled</code></h2>\n<p>The character config property <code>walkingAnimationEnabled</code> has been removed. Simply don't provide a <code>walkingAnimationMapping</code> to disable walking animations.</p>\n"}},"context":{}}