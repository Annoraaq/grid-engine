var NM=Object.create;var ks=Object.defineProperty;var VM=Object.getOwnPropertyDescriptor;var WM=Object.getOwnPropertyNames;var UM=Object.getPrototypeOf,GM=Object.prototype.hasOwnProperty;var _=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),BM=(r,e)=>{for(var t in e)ks(r,t,{get:e[t],enumerable:!0})},rb=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of WM(e))!GM.call(r,n)&&n!==t&&ks(r,n,{get:()=>e[n],enumerable:!(i=VM(e,n))||i.enumerable});return r};var bt=(r,e,t)=>(t=r!=null?NM(UM(r)):{},rb(e||!r||!r.__esModule?ks(t,"default",{value:r,enumerable:!0}):t,r)),HM=r=>rb(ks({},"__esModule",{value:!0}),r);var le=_(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.isFunction=void 0;function KM(r){return typeof r=="function"}Fs.isFunction=KM});var si=_(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.createErrorClass=void 0;function XM(r){var e=function(i){Error.call(i),i.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Ds.createErrorClass=XM});var fp=_(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.UnsubscriptionError=void 0;var JM=si();Rs.UnsubscriptionError=JM.createErrorClass(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(i,n){return n+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}})});var Nr=_(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.arrRemove=void 0;function ZM(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}zs.arrRemove=ZM});var Lt=_(_t=>{"use strict";var ab=_t&&_t.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sb=_t&&_t.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},ub=_t&&_t.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(_t,"__esModule",{value:!0});_t.isSubscription=_t.EMPTY_SUBSCRIPTION=_t.Subscription=void 0;var da=le(),hp=fp(),cb=Nr(),pp=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,i,n,s;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var l=ab(u),h=l.next();!h.done;h=l.next()){var p=h.value;p.remove(this)}}catch(M){e={error:M}}finally{try{h&&!h.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else u.remove(this);var v=this.initialTeardown;if(da.isFunction(v))try{v()}catch(M){s=M instanceof hp.UnsubscriptionError?M.errors:[M]}var b=this._finalizers;if(b){this._finalizers=null;try{for(var T=ab(b),S=T.next();!S.done;S=T.next()){var E=S.value;try{lb(E)}catch(M){s=s??[],M instanceof hp.UnsubscriptionError?s=ub(ub([],sb(s)),sb(M.errors)):s.push(M)}}}catch(M){i={error:M}}finally{try{S&&!S.done&&(n=T.return)&&n.call(T)}finally{if(i)throw i.error}}}if(s)throw new hp.UnsubscriptionError(s)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)lb(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&cb.arrRemove(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&cb.arrRemove(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}();_t.Subscription=pp;_t.EMPTY_SUBSCRIPTION=pp.EMPTY;function eL(r){return r instanceof pp||r&&"closed"in r&&da.isFunction(r.remove)&&da.isFunction(r.add)&&da.isFunction(r.unsubscribe)}_t.isSubscription=eL;function lb(r){da.isFunction(r)?r():r.unsubscribe()}});var Ln=_(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.config=void 0;Ns.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}});var dp=_(lr=>{"use strict";var fb=lr&&lr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},hb=lr&&lr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(lr,"__esModule",{value:!0});lr.timeoutProvider=void 0;lr.timeoutProvider={setTimeout:function(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];var n=lr.timeoutProvider.delegate;return n?.setTimeout?n.setTimeout.apply(n,hb([r,e],fb(t))):setTimeout.apply(void 0,hb([r,e],fb(t)))},clearTimeout:function(r){var e=lr.timeoutProvider.delegate;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0}});var vp=_(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.reportUnhandledError=void 0;var tL=Ln(),rL=dp();function iL(r){rL.timeoutProvider.setTimeout(function(){var e=tL.config.onUnhandledError;if(e)e(r);else throw r})}Vs.reportUnhandledError=iL});var Ke=_(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.noop=void 0;function nL(){}Ws.noop=nL});var pb=_(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.createNotification=fr.nextNotification=fr.errorNotification=fr.COMPLETE_NOTIFICATION=void 0;fr.COMPLETE_NOTIFICATION=function(){return Us("C",void 0,void 0)}();function oL(r){return Us("E",void 0,r)}fr.errorNotification=oL;function aL(r){return Us("N",r,void 0)}fr.nextNotification=aL;function Us(r,e,t){return{kind:r,value:e,error:t}}fr.createNotification=Us});var Gs=_(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.captureError=xn.errorContext=void 0;var db=Ln(),Ki=null;function sL(r){if(db.config.useDeprecatedSynchronousErrorHandling){var e=!Ki;if(e&&(Ki={errorThrown:!1,error:null}),r(),e){var t=Ki,i=t.errorThrown,n=t.error;if(Ki=null,i)throw n}}else r()}xn.errorContext=sL;function uL(r){db.config.useDeprecatedSynchronousErrorHandling&&Ki&&(Ki.errorThrown=!0,Ki.error=r)}xn.captureError=uL});var jn=_(Jt=>{"use strict";var yb=Jt&&Jt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Jt,"__esModule",{value:!0});Jt.EMPTY_OBSERVER=Jt.SafeSubscriber=Jt.Subscriber=void 0;var cL=le(),vb=Lt(),bp=Ln(),lL=vp(),mb=Ke(),mp=pb(),fL=dp(),hL=Gs(),gb=function(r){yb(e,r);function e(t){var i=r.call(this)||this;return i.isStopped=!1,t?(i.destination=t,vb.isSubscription(t)&&t.add(i)):i.destination=Jt.EMPTY_OBSERVER,i}return e.create=function(t,i,n){return new bb(t,i,n)},e.prototype.next=function(t){this.isStopped?gp(mp.nextNotification(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?gp(mp.errorNotification(t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?gp(mp.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(vb.Subscription);Jt.Subscriber=gb;var pL=Function.prototype.bind;function yp(r,e){return pL.call(r,e)}var dL=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(i){Bs(i)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(i){Bs(i)}else Bs(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Bs(t)}},r}(),bb=function(r){yb(e,r);function e(t,i,n){var s=r.call(this)||this,u;if(cL.isFunction(t)||!t)u={next:t??void 0,error:i??void 0,complete:n??void 0};else{var l;s&&bp.config.useDeprecatedNextContext?(l=Object.create(t),l.unsubscribe=function(){return s.unsubscribe()},u={next:t.next&&yp(t.next,l),error:t.error&&yp(t.error,l),complete:t.complete&&yp(t.complete,l)}):u=t}return s.destination=new dL(u),s}return e}(gb);Jt.SafeSubscriber=bb;function Bs(r){bp.config.useDeprecatedSynchronousErrorHandling?hL.captureError(r):lL.reportUnhandledError(r)}function vL(r){throw r}function gp(r,e){var t=bp.config.onStoppedNotification;t&&fL.timeoutProvider.setTimeout(function(){return t(r,e)})}Jt.EMPTY_OBSERVER={closed:!0,next:mb.noop,error:vL,complete:mb.noop}});var va=_(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.observable=void 0;Hs.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var Xe=_($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.identity=void 0;function mL(r){return r}$s.identity=mL});var ma=_(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.pipeFromArray=In.pipe=void 0;var yL=Xe();function gL(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return _b(r)}In.pipe=gL;function _b(r){return r.length===0?yL.identity:r.length===1?r[0]:function(t){return r.reduce(function(i,n){return n(i)},t)}}In.pipeFromArray=_b});var he=_(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Observable=void 0;var Pp=jn(),bL=Lt(),_L=va(),PL=ma(),wL=Ln(),_p=le(),OL=Gs(),TL=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,i){var n=this,s=AL(e)?e:new Pp.SafeSubscriber(e,t,i);return OL.errorContext(function(){var u=n,l=u.operator,h=u.source;s.add(l?l.call(s,h):h?n._subscribe(s):n._trySubscribe(s))}),s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var i=this;return t=Pb(t),new t(function(n,s){var u=new Pp.SafeSubscriber({next:function(l){try{e(l)}catch(h){s(h),u.unsubscribe()}},error:s,complete:n});i.subscribe(u)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[_L.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return PL.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=Pb(e),new e(function(i,n){var s;t.subscribe(function(u){return s=u},function(u){return n(u)},function(){return i(s)})})},r.create=function(e){return new r(e)},r}();Ys.Observable=TL;function Pb(r){var e;return(e=r??wL.config.Promise)!==null&&e!==void 0?e:Promise}function SL(r){return r&&_p.isFunction(r.next)&&_p.isFunction(r.error)&&_p.isFunction(r.complete)}function AL(r){return r&&r instanceof Pp.Subscriber||SL(r)&&bL.isSubscription(r)}});var z=_(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.operate=kn.hasLift=void 0;var CL=le();function wb(r){return CL.isFunction(r?.lift)}kn.hasLift=wb;function EL(r){return function(e){if(wb(e))return e.lift(function(t){try{return r(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}kn.operate=EL});var U=_(ui=>{"use strict";var qL=ui&&ui.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(ui,"__esModule",{value:!0});ui.OperatorSubscriber=ui.createOperatorSubscriber=void 0;var ML=jn();function LL(r,e,t,i,n){return new Ob(r,e,t,i,n)}ui.createOperatorSubscriber=LL;var Ob=function(r){qL(e,r);function e(t,i,n,s,u,l){var h=r.call(this,t)||this;return h.onFinalize=u,h.shouldUnsubscribe=l,h._next=i?function(p){try{i(p)}catch(v){t.error(v)}}:r.prototype._next,h._error=s?function(p){try{s(p)}catch(v){t.error(v)}finally{this.unsubscribe()}}:r.prototype._error,h._complete=n?function(){try{n()}catch(p){t.error(p)}finally{this.unsubscribe()}}:r.prototype._complete,h}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;r.prototype.unsubscribe.call(this),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(ML.Subscriber);ui.OperatorSubscriber=Ob});var Ks=_(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.refCount=void 0;var xL=z(),jL=U();function IL(){return xL.operate(function(r,e){var t=null;r._refCount++;var i=jL.createOperatorSubscriber(e,void 0,void 0,void 0,function(){if(!r||r._refCount<=0||0<--r._refCount){t=null;return}var n=r._connection,s=t;t=null,n&&(!s||n===s)&&n.unsubscribe(),e.unsubscribe()});r.subscribe(i),i.closed||(t=r.connect())})}Qs.refCount=IL});var ya=_(Fn=>{"use strict";var kL=Fn&&Fn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Fn,"__esModule",{value:!0});Fn.ConnectableObservable=void 0;var FL=he(),Tb=Lt(),DL=Ks(),RL=U(),zL=z(),NL=function(r){kL(e,r);function e(t,i){var n=r.call(this)||this;return n.source=t,n.subjectFactory=i,n._subject=null,n._refCount=0,n._connection=null,zL.hasLift(t)&&(n.lift=t.lift),n}return e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t?.unsubscribe()},e.prototype.connect=function(){var t=this,i=this._connection;if(!i){i=this._connection=new Tb.Subscription;var n=this.getSubject();i.add(this.source.subscribe(RL.createOperatorSubscriber(n,void 0,function(){t._teardown(),n.complete()},function(s){t._teardown(),n.error(s)},function(){return t._teardown()}))),i.closed&&(this._connection=null,i=Tb.Subscription.EMPTY)}return i},e.prototype.refCount=function(){return DL.refCount()(this)},e}(FL.Observable);Fn.ConnectableObservable=NL});var Sb=_(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.performanceTimestampProvider=void 0;ga.performanceTimestampProvider={now:function(){return(ga.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}});var wp=_(Zt=>{"use strict";var Ab=Zt&&Zt.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},Cb=Zt&&Zt.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.animationFrameProvider=void 0;var VL=Lt();Zt.animationFrameProvider={schedule:function(r){var e=requestAnimationFrame,t=cancelAnimationFrame,i=Zt.animationFrameProvider.delegate;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);var n=e(function(s){t=void 0,r(s)});return new VL.Subscription(function(){return t?.(n)})},requestAnimationFrame:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Zt.animationFrameProvider.delegate;return(t?.requestAnimationFrame||requestAnimationFrame).apply(void 0,Cb([],Ab(r)))},cancelAnimationFrame:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Zt.animationFrameProvider.delegate;return(t?.cancelAnimationFrame||cancelAnimationFrame).apply(void 0,Cb([],Ab(r)))},delegate:void 0}});var Mb=_(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.animationFrames=void 0;var WL=he(),UL=Sb(),Eb=wp();function GL(r){return r?qb(r):BL}Xs.animationFrames=GL;function qb(r){return new WL.Observable(function(e){var t=r||UL.performanceTimestampProvider,i=t.now(),n=0,s=function(){e.closed||(n=Eb.animationFrameProvider.requestAnimationFrame(function(u){n=0;var l=t.now();e.next({timestamp:r?l:u,elapsed:l-i}),s()}))};return s(),function(){n&&Eb.animationFrameProvider.cancelAnimationFrame(n)}})}var BL=qb()});var Op=_(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.ObjectUnsubscribedError=void 0;var HL=si();Js.ObjectUnsubscribedError=HL.createErrorClass(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})});var Je=_(hr=>{"use strict";var xb=hr&&hr.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$L=hr&&hr.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(hr,"__esModule",{value:!0});hr.AnonymousSubject=hr.Subject=void 0;var Lb=he(),Sp=Lt(),YL=Op(),QL=Nr(),Tp=Gs(),jb=function(r){xb(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var i=new Ap(this,this);return i.operator=t,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new YL.ObjectUnsubscribedError},e.prototype.next=function(t){var i=this;Tp.errorContext(function(){var n,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var u=$L(i.currentObservers),l=u.next();!l.done;l=u.next()){var h=l.value;h.next(t)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}}})},e.prototype.error=function(t){var i=this;Tp.errorContext(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=t;for(var n=i.observers;n.length;)n.shift().error(t)}})},e.prototype.complete=function(){var t=this;Tp.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var i=t.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var i=this,n=this,s=n.hasError,u=n.isStopped,l=n.observers;return s||u?Sp.EMPTY_SUBSCRIPTION:(this.currentObservers=null,l.push(t),new Sp.Subscription(function(){i.currentObservers=null,QL.arrRemove(l,t)}))},e.prototype._checkFinalizedStatuses=function(t){var i=this,n=i.hasError,s=i.thrownError,u=i.isStopped;n?t.error(s):u&&t.complete()},e.prototype.asObservable=function(){var t=new Lb.Observable;return t.source=this,t},e.create=function(t,i){return new Ap(t,i)},e}(Lb.Observable);hr.Subject=jb;var Ap=function(r){xb(e,r);function e(t,i){var n=r.call(this)||this;return n.destination=t,n.source=i,n}return e.prototype.next=function(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.next)===null||n===void 0||n.call(i,t)},e.prototype.error=function(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.error)===null||n===void 0||n.call(i,t)},e.prototype.complete=function(){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||i===void 0||i.call(t)},e.prototype._subscribe=function(t){var i,n;return(n=(i=this.source)===null||i===void 0?void 0:i.subscribe(t))!==null&&n!==void 0?n:Sp.EMPTY_SUBSCRIPTION},e}(jb);hr.AnonymousSubject=Ap});var Cp=_(Dn=>{"use strict";var KL=Dn&&Dn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.BehaviorSubject=void 0;var XL=Je(),JL=function(r){KL(e,r);function e(t){var i=r.call(this)||this;return i._value=t,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var i=r.prototype._subscribe.call(this,t);return!i.closed&&t.next(this._value),i},e.prototype.getValue=function(){var t=this,i=t.hasError,n=t.thrownError,s=t._value;if(i)throw n;return this._throwIfClosed(),s},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(XL.Subject);Dn.BehaviorSubject=JL});var Zs=_(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.dateTimestampProvider=void 0;ba.dateTimestampProvider={now:function(){return(ba.dateTimestampProvider.delegate||Date).now()},delegate:void 0}});var eu=_(Rn=>{"use strict";var ZL=Rn&&Rn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Rn,"__esModule",{value:!0});Rn.ReplaySubject=void 0;var ex=Je(),tx=Zs(),rx=function(r){ZL(e,r);function e(t,i,n){t===void 0&&(t=1/0),i===void 0&&(i=1/0),n===void 0&&(n=tx.dateTimestampProvider);var s=r.call(this)||this;return s._bufferSize=t,s._windowTime=i,s._timestampProvider=n,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=i===1/0,s._bufferSize=Math.max(1,t),s._windowTime=Math.max(1,i),s}return e.prototype.next=function(t){var i=this,n=i.isStopped,s=i._buffer,u=i._infiniteTimeWindow,l=i._timestampProvider,h=i._windowTime;n||(s.push(t),!u&&s.push(l.now()+h)),this._trimBuffer(),r.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var i=this._innerSubscribe(t),n=this,s=n._infiniteTimeWindow,u=n._buffer,l=u.slice(),h=0;h<l.length&&!t.closed;h+=s?1:2)t.next(l[h]);return this._checkFinalizedStatuses(t),i},e.prototype._trimBuffer=function(){var t=this,i=t._bufferSize,n=t._timestampProvider,s=t._buffer,u=t._infiniteTimeWindow,l=(u?1:2)*i;if(i<1/0&&l<s.length&&s.splice(0,s.length-l),!u){for(var h=n.now(),p=0,v=1;v<s.length&&s[v]<=h;v+=2)p=v;p&&s.splice(0,p+1)}},e}(ex.Subject);Rn.ReplaySubject=rx});var tu=_(zn=>{"use strict";var ix=zn&&zn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(zn,"__esModule",{value:!0});zn.AsyncSubject=void 0;var nx=Je(),ox=function(r){ix(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return e.prototype._checkFinalizedStatuses=function(t){var i=this,n=i.hasError,s=i._hasValue,u=i._value,l=i.thrownError,h=i.isStopped,p=i._isComplete;n?t.error(l):(h||p)&&(s&&t.next(u),t.complete())},e.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},e.prototype.complete=function(){var t=this,i=t._hasValue,n=t._value,s=t._isComplete;s||(this._isComplete=!0,i&&r.prototype.next.call(this,n),r.prototype.complete.call(this))},e}(nx.Subject);zn.AsyncSubject=ox});var Ib=_(Nn=>{"use strict";var ax=Nn&&Nn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Nn,"__esModule",{value:!0});Nn.Action=void 0;var sx=Lt(),ux=function(r){ax(e,r);function e(t,i){return r.call(this)||this}return e.prototype.schedule=function(t,i){return i===void 0&&(i=0),this},e}(sx.Subscription);Nn.Action=ux});var Db=_(pr=>{"use strict";var kb=pr&&pr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},Fb=pr&&pr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(pr,"__esModule",{value:!0});pr.intervalProvider=void 0;pr.intervalProvider={setInterval:function(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];var n=pr.intervalProvider.delegate;return n?.setInterval?n.setInterval.apply(n,Fb([r,e],kb(t))):setInterval.apply(void 0,Fb([r,e],kb(t)))},clearInterval:function(r){var e=pr.intervalProvider.delegate;return(e?.clearInterval||clearInterval)(r)},delegate:void 0}});var Wn=_(Vn=>{"use strict";var cx=Vn&&Vn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Vn,"__esModule",{value:!0});Vn.AsyncAction=void 0;var lx=Ib(),Rb=Db(),fx=Nr(),hx=function(r){cx(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n.pending=!1,n}return e.prototype.schedule=function(t,i){var n;if(i===void 0&&(i=0),this.closed)return this;this.state=t;var s=this.id,u=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(u,s,i)),this.pending=!0,this.delay=i,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(u,this.id,i),this},e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),Rb.intervalProvider.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,i,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return i;i!=null&&Rb.intervalProvider.clearInterval(i)},e.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,i);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,i){var n=!1,s;try{this.work(t)}catch(u){n=!0,s=u||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,i=t.id,n=t.scheduler,s=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,fx.arrRemove(s,this),i!=null&&(this.id=this.recycleAsyncId(n,i,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},e}(lx.Action);Vn.AsyncAction=hx});var Nb=_(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.TestTools=Un.Immediate=void 0;var px=1,Ep,ru={};function zb(r){return r in ru?(delete ru[r],!0):!1}Un.Immediate={setImmediate:function(r){var e=px++;return ru[e]=!0,Ep||(Ep=Promise.resolve()),Ep.then(function(){return zb(e)&&r()}),e},clearImmediate:function(r){zb(r)}};Un.TestTools={pending:function(){return Object.keys(ru).length}}});var Wb=_(dr=>{"use strict";var dx=dr&&dr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},vx=dr&&dr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(dr,"__esModule",{value:!0});dr.immediateProvider=void 0;var Vb=Nb(),mx=Vb.Immediate.setImmediate,yx=Vb.Immediate.clearImmediate;dr.immediateProvider={setImmediate:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=dr.immediateProvider.delegate;return(t?.setImmediate||mx).apply(void 0,vx([],dx(r)))},clearImmediate:function(r){var e=dr.immediateProvider.delegate;return(e?.clearImmediate||yx)(r)},delegate:void 0}});var Gb=_(Gn=>{"use strict";var gx=Gn&&Gn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Gn,"__esModule",{value:!0});Gn.AsapAction=void 0;var bx=Wn(),Ub=Wb(),_x=function(r){gx(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,t,i,n):(t.actions.push(this),t._scheduled||(t._scheduled=Ub.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},e.prototype.recycleAsyncId=function(t,i,n){var s;if(n===void 0&&(n=0),n!=null?n>0:this.delay>0)return r.prototype.recycleAsyncId.call(this,t,i,n);var u=t.actions;i!=null&&((s=u[u.length-1])===null||s===void 0?void 0:s.id)!==i&&(Ub.immediateProvider.clearImmediate(i),t._scheduled===i&&(t._scheduled=void 0))},e}(bx.AsyncAction);Gn.AsapAction=_x});var qp=_(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.Scheduler=void 0;var Px=Zs(),wx=function(){function r(e,t){t===void 0&&(t=r.now),this.schedulerActionCtor=e,this.now=t}return r.prototype.schedule=function(e,t,i){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(i,t)},r.now=Px.dateTimestampProvider.now,r}();iu.Scheduler=wx});var Hn=_(Bn=>{"use strict";var Ox=Bn&&Bn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Bn,"__esModule",{value:!0});Bn.AsyncScheduler=void 0;var Bb=qp(),Tx=function(r){Ox(e,r);function e(t,i){i===void 0&&(i=Bb.Scheduler.now);var n=r.call(this,t,i)||this;return n.actions=[],n._active=!1,n}return e.prototype.flush=function(t){var i=this.actions;if(this._active){i.push(t);return}var n;this._active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=i.shift());if(this._active=!1,n){for(;t=i.shift();)t.unsubscribe();throw n}},e}(Bb.Scheduler);Bn.AsyncScheduler=Tx});var Hb=_($n=>{"use strict";var Sx=$n&&$n.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty($n,"__esModule",{value:!0});$n.AsapScheduler=void 0;var Ax=Hn(),Cx=function(r){Sx(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(t){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var n=this.actions,s;t=t||n.shift();do if(s=t.execute(t.state,t.delay))break;while((t=n[0])&&t.id===i&&n.shift());if(this._active=!1,s){for(;(t=n[0])&&t.id===i&&n.shift();)t.unsubscribe();throw s}},e}(Ax.AsyncScheduler);$n.AsapScheduler=Cx});var $b=_(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.asap=Xi.asapScheduler=void 0;var Ex=Gb(),qx=Hb();Xi.asapScheduler=new qx.AsapScheduler(Ex.AsapAction);Xi.asap=Xi.asapScheduler});var Pt=_(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.async=Ji.asyncScheduler=void 0;var Mx=Wn(),Lx=Hn();Ji.asyncScheduler=new Lx.AsyncScheduler(Mx.AsyncAction);Ji.async=Ji.asyncScheduler});var Yb=_(Yn=>{"use strict";var xx=Yn&&Yn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.QueueAction=void 0;var jx=Wn(),Ix=function(r){xx(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return e.prototype.schedule=function(t,i){return i===void 0&&(i=0),i>0?r.prototype.schedule.call(this,t,i):(this.delay=i,this.state=t,this.scheduler.flush(this),this)},e.prototype.execute=function(t,i){return i>0||this.closed?r.prototype.execute.call(this,t,i):this._execute(t,i)},e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),n!=null&&n>0||n==null&&this.delay>0?r.prototype.requestAsyncId.call(this,t,i,n):(t.flush(this),0)},e}(jx.AsyncAction);Yn.QueueAction=Ix});var Qb=_(Qn=>{"use strict";var kx=Qn&&Qn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.QueueScheduler=void 0;var Fx=Hn(),Dx=function(r){kx(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Fx.AsyncScheduler);Qn.QueueScheduler=Dx});var Kb=_(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.queue=Zi.queueScheduler=void 0;var Rx=Yb(),zx=Qb();Zi.queueScheduler=new zx.QueueScheduler(Rx.QueueAction);Zi.queue=Zi.queueScheduler});var Jb=_(Kn=>{"use strict";var Nx=Kn&&Kn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Kn,"__esModule",{value:!0});Kn.AnimationFrameAction=void 0;var Vx=Wn(),Xb=wp(),Wx=function(r){Nx(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,t,i,n):(t.actions.push(this),t._scheduled||(t._scheduled=Xb.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},e.prototype.recycleAsyncId=function(t,i,n){var s;if(n===void 0&&(n=0),n!=null?n>0:this.delay>0)return r.prototype.recycleAsyncId.call(this,t,i,n);var u=t.actions;i!=null&&((s=u[u.length-1])===null||s===void 0?void 0:s.id)!==i&&(Xb.animationFrameProvider.cancelAnimationFrame(i),t._scheduled=void 0)},e}(Vx.AsyncAction);Kn.AnimationFrameAction=Wx});var Zb=_(Xn=>{"use strict";var Ux=Xn&&Xn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Xn,"__esModule",{value:!0});Xn.AnimationFrameScheduler=void 0;var Gx=Hn(),Bx=function(r){Ux(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(t){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var n=this.actions,s;t=t||n.shift();do if(s=t.execute(t.state,t.delay))break;while((t=n[0])&&t.id===i&&n.shift());if(this._active=!1,s){for(;(t=n[0])&&t.id===i&&n.shift();)t.unsubscribe();throw s}},e}(Gx.AsyncScheduler);Xn.AnimationFrameScheduler=Bx});var e_=_(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.animationFrame=en.animationFrameScheduler=void 0;var Hx=Jb(),$x=Zb();en.animationFrameScheduler=new $x.AnimationFrameScheduler(Hx.AnimationFrameAction);en.animationFrame=en.animationFrameScheduler});var i_=_(ci=>{"use strict";var t_=ci&&ci.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(ci,"__esModule",{value:!0});ci.VirtualAction=ci.VirtualTimeScheduler=void 0;var Yx=Wn(),Qx=Lt(),Kx=Hn(),Xx=function(r){t_(e,r);function e(t,i){t===void 0&&(t=r_),i===void 0&&(i=1/0);var n=r.call(this,t,function(){return n.frame})||this;return n.maxFrames=i,n.frame=0,n.index=-1,n}return e.prototype.flush=function(){for(var t=this,i=t.actions,n=t.maxFrames,s,u;(u=i[0])&&u.delay<=n&&(i.shift(),this.frame=u.delay,!(s=u.execute(u.state,u.delay))););if(s){for(;u=i.shift();)u.unsubscribe();throw s}},e.frameTimeFactor=10,e}(Kx.AsyncScheduler);ci.VirtualTimeScheduler=Xx;var r_=function(r){t_(e,r);function e(t,i,n){n===void 0&&(n=t.index+=1);var s=r.call(this,t,i)||this;return s.scheduler=t,s.work=i,s.index=n,s.active=!0,s.index=t.index=n,s}return e.prototype.schedule=function(t,i){if(i===void 0&&(i=0),Number.isFinite(i)){if(!this.id)return r.prototype.schedule.call(this,t,i);this.active=!1;var n=new e(this.scheduler,this.work);return this.add(n),n.schedule(t,i)}else return Qx.Subscription.EMPTY},e.prototype.requestAsyncId=function(t,i,n){n===void 0&&(n=0),this.delay=t.frame+n;var s=t.actions;return s.push(this),s.sort(e.sortActions),1},e.prototype.recycleAsyncId=function(t,i,n){n===void 0&&(n=0)},e.prototype._execute=function(t,i){if(this.active===!0)return r.prototype._execute.call(this,t,i)},e.sortActions=function(t,i){return t.delay===i.delay?t.index===i.index?0:t.index>i.index?1:-1:t.delay>i.delay?1:-1},e}(Yx.AsyncAction);ci.VirtualAction=r_});var er=_(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.empty=tn.EMPTY=void 0;var n_=he();tn.EMPTY=new n_.Observable(function(r){return r.complete()});function Jx(r){return r?Zx(r):tn.EMPTY}tn.empty=Jx;function Zx(r){return new n_.Observable(function(e){return r.schedule(function(){return e.complete()})})}});var _a=_(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.isScheduler=void 0;var ej=le();function tj(r){return r&&ej.isFunction(r.schedule)}nu.isScheduler=tj});var wt=_(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.popNumber=li.popScheduler=li.popResultSelector=void 0;var rj=le(),ij=_a();function Mp(r){return r[r.length-1]}function nj(r){return rj.isFunction(Mp(r))?r.pop():void 0}li.popResultSelector=nj;function oj(r){return ij.isScheduler(Mp(r))?r.pop():void 0}li.popScheduler=oj;function aj(r,e){return typeof Mp(r)=="number"?r.pop():e}li.popNumber=aj});var au=_(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.isArrayLike=void 0;ou.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var Lp=_(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.isPromise=void 0;var sj=le();function uj(r){return sj.isFunction(r?.then)}su.isPromise=uj});var xp=_(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.isInteropObservable=void 0;var cj=va(),lj=le();function fj(r){return lj.isFunction(r[cj.observable])}uu.isInteropObservable=fj});var jp=_(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.isAsyncIterable=void 0;var hj=le();function pj(r){return Symbol.asyncIterator&&hj.isFunction(r?.[Symbol.asyncIterator])}cu.isAsyncIterable=pj});var Ip=_(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.createInvalidObservableTypeError=void 0;function dj(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}lu.createInvalidObservableTypeError=dj});var kp=_(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.iterator=Jn.getSymbolIterator=void 0;function o_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Jn.getSymbolIterator=o_;Jn.iterator=o_()});var Fp=_(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.isIterable=void 0;var vj=kp(),mj=le();function yj(r){return mj.isFunction(r?.[vj.iterator])}fu.isIterable=yj});var hu=_(Ut=>{"use strict";var gj=Ut&&Ut.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(p){return function(v){return h([p,v])}}function h(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(v){p=[6,v],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Zn=Ut&&Ut.__await||function(r){return this instanceof Zn?(this.v=r,this):new Zn(r)},bj=Ut&&Ut.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,s=[];return n={},u("next"),u("throw"),u("return"),n[Symbol.asyncIterator]=function(){return this},n;function u(T){i[T]&&(n[T]=function(S){return new Promise(function(E,M){s.push([T,S,E,M])>1||l(T,S)})})}function l(T,S){try{h(i[T](S))}catch(E){b(s[0][3],E)}}function h(T){T.value instanceof Zn?Promise.resolve(T.value.v).then(p,v):b(s[0][2],T)}function p(T){l("next",T)}function v(T){l("throw",T)}function b(T,S){T(S),s.shift(),s.length&&l(s[0][0],s[0][1])}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.isReadableStreamLike=Ut.readableStreamLikeToAsyncGenerator=void 0;var _j=le();function Pj(r){return bj(this,arguments,function(){var t,i,n,s;return gj(this,function(u){switch(u.label){case 0:t=r.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,Zn(t.read())];case 3:return i=u.sent(),n=i.value,s=i.done,s?[4,Zn(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,Zn(n)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Ut.readableStreamLikeToAsyncGenerator=Pj;function wj(r){return _j.isFunction(r?.getReader)}Ut.isReadableStreamLike=wj});var X=_(be=>{"use strict";var Oj=be&&be.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(u){u(s)})}return new(t||(t=Promise))(function(s,u){function l(v){try{p(i.next(v))}catch(b){u(b)}}function h(v){try{p(i.throw(v))}catch(b){u(b)}}function p(v){v.done?s(v.value):n(v.value).then(l,h)}p((i=i.apply(r,e||[])).next())})},Tj=be&&be.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(p){return function(v){return h([p,v])}}function h(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(v){p=[6,v],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Sj=be&&be.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Dp=="function"?Dp(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=r[s]&&function(u){return new Promise(function(l,h){u=r[s](u),n(l,h,u.done,u.value)})}}function n(s,u,l,h){Promise.resolve(h).then(function(p){s({value:p,done:l})},u)}},Dp=be&&be.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(be,"__esModule",{value:!0});be.fromReadableStreamLike=be.fromAsyncIterable=be.fromIterable=be.fromPromise=be.fromArrayLike=be.fromInteropObservable=be.innerFrom=void 0;var Aj=au(),Cj=Lp(),eo=he(),Ej=xp(),qj=jp(),Mj=Ip(),Lj=Fp(),a_=hu(),xj=le(),jj=vp(),Ij=va();function kj(r){if(r instanceof eo.Observable)return r;if(r!=null){if(Ej.isInteropObservable(r))return s_(r);if(Aj.isArrayLike(r))return u_(r);if(Cj.isPromise(r))return c_(r);if(qj.isAsyncIterable(r))return Rp(r);if(Lj.isIterable(r))return l_(r);if(a_.isReadableStreamLike(r))return f_(r)}throw Mj.createInvalidObservableTypeError(r)}be.innerFrom=kj;function s_(r){return new eo.Observable(function(e){var t=r[Ij.observable]();if(xj.isFunction(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}be.fromInteropObservable=s_;function u_(r){return new eo.Observable(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}be.fromArrayLike=u_;function c_(r){return new eo.Observable(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,jj.reportUnhandledError)})}be.fromPromise=c_;function l_(r){return new eo.Observable(function(e){var t,i;try{for(var n=Dp(r),s=n.next();!s.done;s=n.next()){var u=s.value;if(e.next(u),e.closed)return}}catch(l){t={error:l}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}e.complete()})}be.fromIterable=l_;function Rp(r){return new eo.Observable(function(e){Fj(r,e).catch(function(t){return e.error(t)})})}be.fromAsyncIterable=Rp;function f_(r){return Rp(a_.readableStreamLikeToAsyncGenerator(r))}be.fromReadableStreamLike=f_;function Fj(r,e){var t,i,n,s;return Oj(this,void 0,void 0,function(){var u,l;return Tj(this,function(h){switch(h.label){case 0:h.trys.push([0,5,6,11]),t=Sj(r),h.label=1;case 1:return[4,t.next()];case 2:if(i=h.sent(),!!i.done)return[3,4];if(u=i.value,e.next(u),e.closed)return[2];h.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=h.sent(),n={error:l},[3,11];case 6:return h.trys.push([6,,9,10]),i&&!i.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:h.sent(),h.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}});var Vr=_(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.executeSchedule=void 0;function Dj(r,e,t,i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var s=e.schedule(function(){t(),n?r.add(this.schedule(null,i)):this.unsubscribe()},i);if(r.add(s),!n)return s}pu.executeSchedule=Dj});var to=_(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.observeOn=void 0;var zp=Vr(),Rj=z(),zj=U();function Nj(r,e){return e===void 0&&(e=0),Rj.operate(function(t,i){t.subscribe(zj.createOperatorSubscriber(i,function(n){return zp.executeSchedule(i,r,function(){return i.next(n)},e)},function(){return zp.executeSchedule(i,r,function(){return i.complete()},e)},function(n){return zp.executeSchedule(i,r,function(){return i.error(n)},e)}))})}du.observeOn=Nj});var ro=_(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.subscribeOn=void 0;var Vj=z();function Wj(r,e){return e===void 0&&(e=0),Vj.operate(function(t,i){i.add(r.schedule(function(){return t.subscribe(i)},e))})}vu.subscribeOn=Wj});var h_=_(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.scheduleObservable=void 0;var Uj=X(),Gj=to(),Bj=ro();function Hj(r,e){return Uj.innerFrom(r).pipe(Bj.subscribeOn(e),Gj.observeOn(e))}mu.scheduleObservable=Hj});var p_=_(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.schedulePromise=void 0;var $j=X(),Yj=to(),Qj=ro();function Kj(r,e){return $j.innerFrom(r).pipe(Qj.subscribeOn(e),Yj.observeOn(e))}yu.schedulePromise=Kj});var d_=_(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.scheduleArray=void 0;var Xj=he();function Jj(r,e){return new Xj.Observable(function(t){var i=0;return e.schedule(function(){i===r.length?t.complete():(t.next(r[i++]),t.closed||this.schedule())})})}gu.scheduleArray=Jj});var Np=_(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.scheduleIterable=void 0;var Zj=he(),eI=kp(),tI=le(),v_=Vr();function rI(r,e){return new Zj.Observable(function(t){var i;return v_.executeSchedule(t,e,function(){i=r[eI.iterator](),v_.executeSchedule(t,e,function(){var n,s,u;try{n=i.next(),s=n.value,u=n.done}catch(l){t.error(l);return}u?t.complete():t.next(s)},0,!0)}),function(){return tI.isFunction(i?.return)&&i.return()}})}bu.scheduleIterable=rI});var Vp=_(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.scheduleAsyncIterable=void 0;var iI=he(),m_=Vr();function nI(r,e){if(!r)throw new Error("Iterable cannot be null");return new iI.Observable(function(t){m_.executeSchedule(t,e,function(){var i=r[Symbol.asyncIterator]();m_.executeSchedule(t,e,function(){i.next().then(function(n){n.done?t.complete():t.next(n.value)})},0,!0)})})}_u.scheduleAsyncIterable=nI});var y_=_(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.scheduleReadableStreamLike=void 0;var oI=Vp(),aI=hu();function sI(r,e){return oI.scheduleAsyncIterable(aI.readableStreamLikeToAsyncGenerator(r),e)}Pu.scheduleReadableStreamLike=sI});var Wp=_(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.scheduled=void 0;var uI=h_(),cI=p_(),lI=d_(),fI=Np(),hI=Vp(),pI=xp(),dI=Lp(),vI=au(),mI=Fp(),yI=jp(),gI=Ip(),bI=hu(),_I=y_();function PI(r,e){if(r!=null){if(pI.isInteropObservable(r))return uI.scheduleObservable(r,e);if(vI.isArrayLike(r))return lI.scheduleArray(r,e);if(dI.isPromise(r))return cI.schedulePromise(r,e);if(yI.isAsyncIterable(r))return hI.scheduleAsyncIterable(r,e);if(mI.isIterable(r))return fI.scheduleIterable(r,e);if(bI.isReadableStreamLike(r))return _I.scheduleReadableStreamLike(r,e)}throw gI.createInvalidObservableTypeError(r)}wu.scheduled=PI});var Wr=_(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.from=void 0;var wI=Wp(),OI=X();function TI(r,e){return e?wI.scheduled(r,e):OI.innerFrom(r)}Ou.from=TI});var Su=_(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.of=void 0;var SI=wt(),AI=Wr();function CI(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=SI.popScheduler(r);return AI.from(r,t)}Tu.of=CI});var Up=_(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.throwError=void 0;var EI=he(),qI=le();function MI(r,e){var t=qI.isFunction(r)?r:function(){return r},i=function(n){return n.error(t())};return new EI.Observable(e?function(n){return e.schedule(i,0,n)}:i)}Au.throwError=MI});var Cu=_(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.observeNotification=Ur.Notification=Ur.NotificationKind=void 0;var LI=er(),xI=Su(),jI=Up(),II=le(),kI;(function(r){r.NEXT="N",r.ERROR="E",r.COMPLETE="C"})(kI=Ur.NotificationKind||(Ur.NotificationKind={}));var FI=function(){function r(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue=e==="N"}return r.prototype.observe=function(e){return g_(this,e)},r.prototype.do=function(e,t,i){var n=this,s=n.kind,u=n.value,l=n.error;return s==="N"?e?.(u):s==="E"?t?.(l):i?.()},r.prototype.accept=function(e,t,i){var n;return II.isFunction((n=e)===null||n===void 0?void 0:n.next)?this.observe(e):this.do(e,t,i)},r.prototype.toObservable=function(){var e=this,t=e.kind,i=e.value,n=e.error,s=t==="N"?xI.of(i):t==="E"?jI.throwError(function(){return n}):t==="C"?LI.EMPTY:0;if(!s)throw new TypeError("Unexpected notification kind "+t);return s},r.createNext=function(e){return new r("N",e)},r.createError=function(e){return new r("E",void 0,e)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r}();Ur.Notification=FI;function g_(r,e){var t,i,n,s=r,u=s.kind,l=s.value,h=s.error;if(typeof u!="string")throw new TypeError('Invalid notification, missing "kind"');u==="N"?(t=e.next)===null||t===void 0||t.call(e,l):u==="E"?(i=e.error)===null||i===void 0||i.call(e,h):(n=e.complete)===null||n===void 0||n.call(e)}Ur.observeNotification=g_});var __=_(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.isObservable=void 0;var DI=he(),b_=le();function RI(r){return!!r&&(r instanceof DI.Observable||b_.isFunction(r.lift)&&b_.isFunction(r.subscribe))}Eu.isObservable=RI});var fi=_(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.EmptyError=void 0;var zI=si();qu.EmptyError=zI.createErrorClass(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}})});var P_=_(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.lastValueFrom=void 0;var NI=fi();function VI(r,e){var t=typeof e=="object";return new Promise(function(i,n){var s=!1,u;r.subscribe({next:function(l){u=l,s=!0},error:n,complete:function(){s?i(u):t?i(e.defaultValue):n(new NI.EmptyError)}})})}Mu.lastValueFrom=VI});var w_=_(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.firstValueFrom=void 0;var WI=fi(),UI=jn();function GI(r,e){var t=typeof e=="object";return new Promise(function(i,n){var s=new UI.SafeSubscriber({next:function(u){i(u),s.unsubscribe()},error:n,complete:function(){t?i(e.defaultValue):n(new WI.EmptyError)}});r.subscribe(s)})}Lu.firstValueFrom=GI});var Gp=_(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.ArgumentOutOfRangeError=void 0;var BI=si();xu.ArgumentOutOfRangeError=BI.createErrorClass(function(r){return function(){r(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})});var Bp=_(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.NotFoundError=void 0;var HI=si();ju.NotFoundError=HI.createErrorClass(function(r){return function(t){r(this),this.name="NotFoundError",this.message=t}})});var Hp=_(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.SequenceError=void 0;var $I=si();Iu.SequenceError=$I.createErrorClass(function(r){return function(t){r(this),this.name="SequenceError",this.message=t}})});var Fu=_(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.isValidDate=void 0;function YI(r){return r instanceof Date&&!isNaN(r)}ku.isValidDate=YI});var Pa=_(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.timeout=rn.TimeoutError=void 0;var QI=Pt(),KI=Fu(),XI=z(),JI=X(),ZI=si(),ek=U(),tk=Vr();rn.TimeoutError=ZI.createErrorClass(function(r){return function(t){t===void 0&&(t=null),r(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function rk(r,e){var t=KI.isValidDate(r)?{first:r}:typeof r=="number"?{each:r}:r,i=t.first,n=t.each,s=t.with,u=s===void 0?ik:s,l=t.scheduler,h=l===void 0?e??QI.asyncScheduler:l,p=t.meta,v=p===void 0?null:p;if(i==null&&n==null)throw new TypeError("No timeout provided.");return XI.operate(function(b,T){var S,E,M=null,x=0,D=function(N){E=tk.executeSchedule(T,h,function(){try{S.unsubscribe(),JI.innerFrom(u({meta:v,lastValue:M,seen:x})).subscribe(T)}catch(Y){T.error(Y)}},N)};S=b.subscribe(ek.createOperatorSubscriber(T,function(N){E?.unsubscribe(),x++,T.next(M=N),n>0&&D(n)},void 0,void 0,function(){E?.closed||E?.unsubscribe(),M=null})),!x&&D(i!=null?typeof i=="number"?i:+i-h.now():n)})}rn.timeout=rk;function ik(r){throw new rn.TimeoutError(r)}});var Gr=_(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.map=void 0;var nk=z(),ok=U();function ak(r,e){return nk.operate(function(t,i){var n=0;t.subscribe(ok.createOperatorSubscriber(i,function(s){i.next(r.call(e,s,n++))}))})}Du.map=ak});var pi=_(hi=>{"use strict";var sk=hi&&hi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},uk=hi&&hi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(hi,"__esModule",{value:!0});hi.mapOneOrManyArgs=void 0;var ck=Gr(),lk=Array.isArray;function fk(r,e){return lk(e)?r.apply(void 0,uk([],sk(e))):r(e)}function hk(r){return ck.map(function(e){return fk(r,e)})}hi.mapOneOrManyArgs=hk});var Yp=_(di=>{"use strict";var pk=di&&di.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},O_=di&&di.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(di,"__esModule",{value:!0});di.bindCallbackInternals=void 0;var dk=_a(),vk=he(),mk=ro(),yk=pi(),gk=to(),bk=tu();function $p(r,e,t,i){if(t)if(dk.isScheduler(t))i=t;else return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return $p(r,e,i).apply(this,n).pipe(yk.mapOneOrManyArgs(t))};return i?function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return $p(r,e).apply(this,n).pipe(mk.subscribeOn(i),gk.observeOn(i))}:function(){for(var n=this,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=new bk.AsyncSubject,h=!0;return new vk.Observable(function(p){var v=l.subscribe(p);if(h){h=!1;var b=!1,T=!1;e.apply(n,O_(O_([],pk(s)),[function(){for(var S=[],E=0;E<arguments.length;E++)S[E]=arguments[E];if(r){var M=S.shift();if(M!=null){l.error(M);return}}l.next(1<S.length?S:S[0]),T=!0,b&&l.complete()}])),T&&l.complete(),b=!0}return v})}}di.bindCallbackInternals=$p});var T_=_(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.bindCallback=void 0;var _k=Yp();function Pk(r,e,t){return _k.bindCallbackInternals(!1,r,e,t)}Ru.bindCallback=Pk});var S_=_(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.bindNodeCallback=void 0;var wk=Yp();function Ok(r,e,t){return wk.bindCallbackInternals(!0,r,e,t)}zu.bindNodeCallback=Ok});var Qp=_(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.argsArgArrayOrObject=void 0;var Tk=Array.isArray,Sk=Object.getPrototypeOf,Ak=Object.prototype,Ck=Object.keys;function Ek(r){if(r.length===1){var e=r[0];if(Tk(e))return{args:e,keys:null};if(qk(e)){var t=Ck(e);return{args:t.map(function(i){return e[i]}),keys:t}}}return{args:r,keys:null}}Nu.argsArgArrayOrObject=Ek;function qk(r){return r&&typeof r=="object"&&Sk(r)===Ak}});var Kp=_(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.createObject=void 0;function Mk(r,e){return r.reduce(function(t,i,n){return t[i]=e[n],t},{})}Vu.createObject=Mk});var Wu=_(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.combineLatestInit=io.combineLatest=void 0;var Lk=he(),xk=Qp(),E_=Wr(),q_=Xe(),jk=pi(),A_=wt(),Ik=Kp(),kk=U(),Fk=Vr();function Dk(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=A_.popScheduler(r),i=A_.popResultSelector(r),n=xk.argsArgArrayOrObject(r),s=n.args,u=n.keys;if(s.length===0)return E_.from([],t);var l=new Lk.Observable(M_(s,t,u?function(h){return Ik.createObject(u,h)}:q_.identity));return i?l.pipe(jk.mapOneOrManyArgs(i)):l}io.combineLatest=Dk;function M_(r,e,t){return t===void 0&&(t=q_.identity),function(i){C_(e,function(){for(var n=r.length,s=new Array(n),u=n,l=n,h=function(v){C_(e,function(){var b=E_.from(r[v],e),T=!1;b.subscribe(kk.createOperatorSubscriber(i,function(S){s[v]=S,T||(T=!0,l--),l||i.next(t(s.slice()))},function(){--u||i.complete()}))},i)},p=0;p<n;p++)h(p)},i)}}io.combineLatestInit=M_;function C_(r,e,t){r?Fk.executeSchedule(t,r,e):e()}});var Gu=_(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.mergeInternals=void 0;var Rk=X(),zk=Vr(),L_=U();function Nk(r,e,t,i,n,s,u,l){var h=[],p=0,v=0,b=!1,T=function(){b&&!h.length&&!p&&e.complete()},S=function(M){return p<i?E(M):h.push(M)},E=function(M){s&&e.next(M),p++;var x=!1;Rk.innerFrom(t(M,v++)).subscribe(L_.createOperatorSubscriber(e,function(D){n?.(D),s?S(D):e.next(D)},function(){x=!0},void 0,function(){if(x)try{p--;for(var D=function(){var N=h.shift();u?zk.executeSchedule(e,u,function(){return E(N)}):E(N)};h.length&&p<i;)D();T()}catch(N){e.error(N)}}))};return r.subscribe(L_.createOperatorSubscriber(e,S,function(){b=!0,T()})),function(){l?.()}}Uu.mergeInternals=Nk});var vr=_(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.mergeMap=void 0;var Vk=Gr(),Wk=X(),Uk=z(),Gk=Gu(),Bk=le();function x_(r,e,t){return t===void 0&&(t=1/0),Bk.isFunction(e)?x_(function(i,n){return Vk.map(function(s,u){return e(i,s,n,u)})(Wk.innerFrom(r(i,n)))},t):(typeof e=="number"&&(t=e),Uk.operate(function(i,n){return Gk.mergeInternals(i,n,r,t)}))}Bu.mergeMap=x_});var no=_(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.mergeAll=void 0;var Hk=vr(),$k=Xe();function Yk(r){return r===void 0&&(r=1/0),Hk.mergeMap($k.identity,r)}Hu.mergeAll=Yk});var wa=_($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.concatAll=void 0;var Qk=no();function Kk(){return Qk.mergeAll(1)}$u.concatAll=Kk});var Oa=_(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.concat=void 0;var Xk=wa(),Jk=wt(),Zk=Wr();function eF(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Xk.concatAll()(Zk.from(r,Jk.popScheduler(r)))}Yu.concat=eF});var Ta=_(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.defer=void 0;var tF=he(),rF=X();function iF(r){return new tF.Observable(function(e){rF.innerFrom(r()).subscribe(e)})}Qu.defer=iF});var j_=_(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.connectable=void 0;var nF=Je(),oF=he(),aF=Ta(),sF={connector:function(){return new nF.Subject},resetOnDisconnect:!0};function uF(r,e){e===void 0&&(e=sF);var t=null,i=e.connector,n=e.resetOnDisconnect,s=n===void 0?!0:n,u=i(),l=new oF.Observable(function(h){return u.subscribe(h)});return l.connect=function(){return(!t||t.closed)&&(t=aF.defer(function(){return r}).subscribe(u),s&&t.add(function(){return u=i()})),t},l}Ku.connectable=uF});var I_=_(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.forkJoin=void 0;var cF=he(),lF=Qp(),fF=X(),hF=wt(),pF=U(),dF=pi(),vF=Kp();function mF(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=hF.popResultSelector(r),i=lF.argsArgArrayOrObject(r),n=i.args,s=i.keys,u=new cF.Observable(function(l){var h=n.length;if(!h){l.complete();return}for(var p=new Array(h),v=h,b=h,T=function(E){var M=!1;fF.innerFrom(n[E]).subscribe(pF.createOperatorSubscriber(l,function(x){M||(M=!0,b--),p[E]=x},function(){return v--},void 0,function(){(!v||!M)&&(b||l.next(s?vF.createObject(s,p):p),l.complete())}))},S=0;S<h;S++)T(S)});return t?u.pipe(dF.mapOneOrManyArgs(t)):u}Xu.forkJoin=mF});var F_=_(oo=>{"use strict";var yF=oo&&oo.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s};Object.defineProperty(oo,"__esModule",{value:!0});oo.fromEvent=void 0;var gF=X(),bF=he(),_F=vr(),PF=au(),nn=le(),wF=pi(),OF=["addListener","removeListener"],TF=["addEventListener","removeEventListener"],SF=["on","off"];function Xp(r,e,t,i){if(nn.isFunction(t)&&(i=t,t=void 0),i)return Xp(r,e,t).pipe(wF.mapOneOrManyArgs(i));var n=yF(EF(r)?TF.map(function(l){return function(h){return r[l](e,h,t)}}):AF(r)?OF.map(k_(r,e)):CF(r)?SF.map(k_(r,e)):[],2),s=n[0],u=n[1];if(!s&&PF.isArrayLike(r))return _F.mergeMap(function(l){return Xp(l,e,t)})(gF.innerFrom(r));if(!s)throw new TypeError("Invalid event target");return new bF.Observable(function(l){var h=function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return l.next(1<p.length?p:p[0])};return s(h),function(){return u(h)}})}oo.fromEvent=Xp;function k_(r,e){return function(t){return function(i){return r[t](e,i)}}}function AF(r){return nn.isFunction(r.addListener)&&nn.isFunction(r.removeListener)}function CF(r){return nn.isFunction(r.on)&&nn.isFunction(r.off)}function EF(r){return nn.isFunction(r.addEventListener)&&nn.isFunction(r.removeEventListener)}});var R_=_(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.fromEventPattern=void 0;var qF=he(),MF=le(),LF=pi();function D_(r,e,t){return t?D_(r,e).pipe(LF.mapOneOrManyArgs(t)):new qF.Observable(function(i){var n=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return i.next(u.length===1?u[0]:u)},s=r(n);return MF.isFunction(e)?function(){return e(n,s)}:void 0})}Ju.fromEventPattern=D_});var N_=_(ao=>{"use strict";var xF=ao&&ao.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(p){return function(v){return h([p,v])}}function h(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(v){p=[6,v],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}};Object.defineProperty(ao,"__esModule",{value:!0});ao.generate=void 0;var z_=Xe(),jF=_a(),IF=Ta(),kF=Np();function FF(r,e,t,i,n){var s,u,l,h;arguments.length===1?(s=r,h=s.initialState,e=s.condition,t=s.iterate,u=s.resultSelector,l=u===void 0?z_.identity:u,n=s.scheduler):(h=r,!i||jF.isScheduler(i)?(l=z_.identity,n=i):l=i);function p(){var v;return xF(this,function(b){switch(b.label){case 0:v=h,b.label=1;case 1:return!e||e(v)?[4,l(v)]:[3,4];case 2:b.sent(),b.label=3;case 3:return v=t(v),[3,1];case 4:return[2]}})}return IF.defer(n?function(){return kF.scheduleIterable(p(),n)}:p)}ao.generate=FF});var V_=_(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.iif=void 0;var DF=Ta();function RF(r,e,t){return DF.defer(function(){return r()?e:t})}Zu.iif=RF});var vi=_(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.timer=void 0;var zF=he(),NF=Pt(),VF=_a(),WF=Fu();function UF(r,e,t){r===void 0&&(r=0),t===void 0&&(t=NF.async);var i=-1;return e!=null&&(VF.isScheduler(e)?t=e:i=e),new zF.Observable(function(n){var s=WF.isValidDate(r)?+r-t.now():r;s<0&&(s=0);var u=0;return t.schedule(function(){n.closed||(n.next(u++),0<=i?this.schedule(void 0,i):n.complete())},s)})}ec.timer=UF});var Jp=_(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.interval=void 0;var GF=Pt(),BF=vi();function HF(r,e){return r===void 0&&(r=0),e===void 0&&(e=GF.asyncScheduler),r<0&&(r=0),BF.timer(r,r,e)}tc.interval=HF});var U_=_(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.merge=void 0;var $F=no(),YF=X(),QF=er(),W_=wt(),KF=Wr();function XF(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=W_.popScheduler(r),i=W_.popNumber(r,1/0),n=r;return n.length?n.length===1?YF.innerFrom(n[0]):$F.mergeAll(i)(KF.from(n,t)):QF.EMPTY}rc.merge=XF});var Zp=_(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.never=on.NEVER=void 0;var JF=he(),ZF=Ke();on.NEVER=new JF.Observable(ZF.noop);function eD(){return on.NEVER}on.never=eD});var mi=_(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.argsOrArgArray=void 0;var tD=Array.isArray;function rD(r){return r.length===1&&tD(r[0])?r[0]:r}ic.argsOrArgArray=rD});var ed=_(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.onErrorResumeNext=void 0;var iD=he(),nD=mi(),oD=U(),G_=Ke(),aD=X();function sD(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=nD.argsOrArgArray(r);return new iD.Observable(function(i){var n=0,s=function(){if(n<t.length){var u=void 0;try{u=aD.innerFrom(t[n++])}catch{s();return}var l=new oD.OperatorSubscriber(i,void 0,G_.noop,G_.noop);u.subscribe(l),l.add(s)}else i.complete()};s()})}nc.onErrorResumeNext=sD});var B_=_(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.pairs=void 0;var uD=Wr();function cD(r,e){return uD.from(Object.entries(r),e)}oc.pairs=cD});var td=_(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.not=void 0;function lD(r,e){return function(t,i){return!r.call(e,t,i)}}ac.not=lD});var Br=_(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.filter=void 0;var fD=z(),hD=U();function pD(r,e){return fD.operate(function(t,i){var n=0;t.subscribe(hD.createOperatorSubscriber(i,function(s){return r.call(e,s,n++)&&i.next(s)}))})}sc.filter=pD});var Y_=_(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.partition=void 0;var dD=td(),H_=Br(),$_=X();function vD(r,e,t){return[H_.filter(e,t)($_.innerFrom(r)),H_.filter(dD.not(e,t))($_.innerFrom(r))]}uc.partition=vD});var rd=_(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.raceInit=so.race=void 0;var mD=he(),Q_=X(),yD=mi(),gD=U();function bD(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r=yD.argsOrArgArray(r),r.length===1?Q_.innerFrom(r[0]):new mD.Observable(K_(r))}so.race=bD;function K_(r){return function(e){for(var t=[],i=function(s){t.push(Q_.innerFrom(r[s]).subscribe(gD.createOperatorSubscriber(e,function(u){if(t){for(var l=0;l<t.length;l++)l!==s&&t[l].unsubscribe();t=null}e.next(u)})))},n=0;t&&!e.closed&&n<r.length;n++)i(n)}}so.raceInit=K_});var X_=_(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.range=void 0;var _D=he(),PD=er();function wD(r,e,t){if(e==null&&(e=r,r=0),e<=0)return PD.EMPTY;var i=e+r;return new _D.Observable(t?function(n){var s=r;return t.schedule(function(){s<i?(n.next(s++),this.schedule()):n.complete()})}:function(n){for(var s=r;s<i&&!n.closed;)n.next(s++);n.complete()})}cc.range=wD});var J_=_(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.using=void 0;var OD=he(),TD=X(),SD=er();function AD(r,e){return new OD.Observable(function(t){var i=r(),n=e(i),s=n?TD.innerFrom(n):SD.EMPTY;return s.subscribe(t),function(){i&&i.unsubscribe()}})}lc.using=AD});var fc=_(yi=>{"use strict";var CD=yi&&yi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},ED=yi&&yi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(yi,"__esModule",{value:!0});yi.zip=void 0;var qD=he(),MD=X(),LD=mi(),xD=er(),jD=U(),ID=wt();function kD(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=ID.popResultSelector(r),i=LD.argsOrArgArray(r);return i.length?new qD.Observable(function(n){var s=i.map(function(){return[]}),u=i.map(function(){return!1});n.add(function(){s=u=null});for(var l=function(p){MD.innerFrom(i[p]).subscribe(jD.createOperatorSubscriber(n,function(v){if(s[p].push(v),s.every(function(T){return T.length})){var b=s.map(function(T){return T.shift()});n.next(t?t.apply(void 0,ED([],CD(b))):b),s.some(function(T,S){return!T.length&&u[S]})&&n.complete()}},function(){u[p]=!0,!s[p].length&&n.complete()}))},h=0;!n.closed&&h<i.length;h++)l(h);return function(){s=u=null}}):xD.EMPTY}yi.zip=kD});var e0=_(Z_=>{"use strict";Object.defineProperty(Z_,"__esModule",{value:!0})});var pc=_(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.audit=void 0;var FD=z(),DD=X(),t0=U();function RD(r){return FD.operate(function(e,t){var i=!1,n=null,s=null,u=!1,l=function(){if(s?.unsubscribe(),s=null,i){i=!1;var p=n;n=null,t.next(p)}u&&t.complete()},h=function(){s=null,u&&t.complete()};e.subscribe(t0.createOperatorSubscriber(t,function(p){i=!0,n=p,s||DD.innerFrom(r(p)).subscribe(s=t0.createOperatorSubscriber(t,l,h))},function(){u=!0,(!i||!s||s.closed)&&t.complete()}))})}hc.audit=RD});var id=_(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.auditTime=void 0;var zD=Pt(),ND=pc(),VD=vi();function WD(r,e){return e===void 0&&(e=zD.asyncScheduler),ND.audit(function(){return VD.timer(r,e)})}dc.auditTime=WD});var nd=_(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.buffer=void 0;var UD=z(),GD=Ke(),r0=U(),BD=X();function HD(r){return UD.operate(function(e,t){var i=[];return e.subscribe(r0.createOperatorSubscriber(t,function(n){return i.push(n)},function(){t.next(i),t.complete()})),BD.innerFrom(r).subscribe(r0.createOperatorSubscriber(t,function(){var n=i;i=[],t.next(n)},GD.noop)),function(){i=null}})}vc.buffer=HD});var ad=_(uo=>{"use strict";var od=uo&&uo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(uo,"__esModule",{value:!0});uo.bufferCount=void 0;var $D=z(),YD=U(),QD=Nr();function KD(r,e){return e===void 0&&(e=null),e=e??r,$D.operate(function(t,i){var n=[],s=0;t.subscribe(YD.createOperatorSubscriber(i,function(u){var l,h,p,v,b=null;s++%e===0&&n.push([]);try{for(var T=od(n),S=T.next();!S.done;S=T.next()){var E=S.value;E.push(u),r<=E.length&&(b=b??[],b.push(E))}}catch(D){l={error:D}}finally{try{S&&!S.done&&(h=T.return)&&h.call(T)}finally{if(l)throw l.error}}if(b)try{for(var M=od(b),x=M.next();!x.done;x=M.next()){var E=x.value;QD.arrRemove(n,E),i.next(E)}}catch(D){p={error:D}}finally{try{x&&!x.done&&(v=M.return)&&v.call(M)}finally{if(p)throw p.error}}},function(){var u,l;try{for(var h=od(n),p=h.next();!p.done;p=h.next()){var v=p.value;i.next(v)}}catch(b){u={error:b}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(u)throw u.error}}i.complete()},void 0,function(){n=null}))})}uo.bufferCount=KD});var sd=_(co=>{"use strict";var XD=co&&co.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(co,"__esModule",{value:!0});co.bufferTime=void 0;var JD=Lt(),ZD=z(),eR=U(),tR=Nr(),rR=Pt(),iR=wt(),i0=Vr();function nR(r){for(var e,t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=(e=iR.popScheduler(i))!==null&&e!==void 0?e:rR.asyncScheduler,u=(t=i[0])!==null&&t!==void 0?t:null,l=i[1]||1/0;return ZD.operate(function(h,p){var v=[],b=!1,T=function(M){var x=M.buffer,D=M.subs;D.unsubscribe(),tR.arrRemove(v,M),p.next(x),b&&S()},S=function(){if(v){var M=new JD.Subscription;p.add(M);var x=[],D={buffer:x,subs:M};v.push(D),i0.executeSchedule(M,s,function(){return T(D)},r)}};u!==null&&u>=0?i0.executeSchedule(p,s,S,u,!0):b=!0,S();var E=eR.createOperatorSubscriber(p,function(M){var x,D,N=v.slice();try{for(var Y=XD(N),ie=Y.next();!ie.done;ie=Y.next()){var pe=ie.value,ke=pe.buffer;ke.push(M),l<=ke.length&&T(pe)}}catch(dt){x={error:dt}}finally{try{ie&&!ie.done&&(D=Y.return)&&D.call(Y)}finally{if(x)throw x.error}}},function(){for(;v?.length;)p.next(v.shift().buffer);E?.unsubscribe(),p.complete(),p.unsubscribe()},void 0,function(){return v=null});h.subscribe(E)})}co.bufferTime=nR});var cd=_(lo=>{"use strict";var oR=lo&&lo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(lo,"__esModule",{value:!0});lo.bufferToggle=void 0;var aR=Lt(),sR=z(),n0=X(),ud=U(),o0=Ke(),uR=Nr();function cR(r,e){return sR.operate(function(t,i){var n=[];n0.innerFrom(r).subscribe(ud.createOperatorSubscriber(i,function(s){var u=[];n.push(u);var l=new aR.Subscription,h=function(){uR.arrRemove(n,u),i.next(u),l.unsubscribe()};l.add(n0.innerFrom(e(s)).subscribe(ud.createOperatorSubscriber(i,h,o0.noop)))},o0.noop)),t.subscribe(ud.createOperatorSubscriber(i,function(s){var u,l;try{for(var h=oR(n),p=h.next();!p.done;p=h.next()){var v=p.value;v.push(s)}}catch(b){u={error:b}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(u)throw u.error}}},function(){for(;n.length>0;)i.next(n.shift());i.complete()}))})}lo.bufferToggle=cR});var ld=_(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.bufferWhen=void 0;var lR=z(),fR=Ke(),a0=U(),hR=X();function pR(r){return lR.operate(function(e,t){var i=null,n=null,s=function(){n?.unsubscribe();var u=i;i=[],u&&t.next(u),hR.innerFrom(r()).subscribe(n=a0.createOperatorSubscriber(t,s,fR.noop))};s(),e.subscribe(a0.createOperatorSubscriber(t,function(u){return i?.push(u)},function(){i&&t.next(i),t.complete()},void 0,function(){return i=n=null}))})}mc.bufferWhen=pR});var fd=_(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.catchError=void 0;var dR=X(),vR=U(),mR=z();function s0(r){return mR.operate(function(e,t){var i=null,n=!1,s;i=e.subscribe(vR.createOperatorSubscriber(t,void 0,void 0,function(u){s=dR.innerFrom(r(u,s0(r)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):n=!0})),n&&(i.unsubscribe(),i=null,s.subscribe(t))})}yc.catchError=s0});var hd=_(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.scanInternals=void 0;var yR=U();function gR(r,e,t,i,n){return function(s,u){var l=t,h=e,p=0;s.subscribe(yR.createOperatorSubscriber(u,function(v){var b=p++;h=l?r(h,v,b):(l=!0,v),i&&u.next(h)},n&&function(){l&&u.next(h),u.complete()}))}}gc.scanInternals=gR});var an=_(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.reduce=void 0;var bR=hd(),_R=z();function PR(r,e){return _R.operate(bR.scanInternals(r,e,arguments.length>=2,!1,!0))}bc.reduce=PR});var Pc=_(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.toArray=void 0;var wR=an(),OR=z(),TR=function(r,e){return r.push(e),r};function SR(){return OR.operate(function(r,e){wR.reduce(TR,[])(r).subscribe(e)})}_c.toArray=SR});var pd=_(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.joinAllInternals=void 0;var AR=Xe(),CR=pi(),ER=ma(),qR=vr(),MR=Pc();function LR(r,e){return ER.pipe(MR.toArray(),qR.mergeMap(function(t){return r(t)}),e?CR.mapOneOrManyArgs(e):AR.identity)}wc.joinAllInternals=LR});var Tc=_(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.combineLatestAll=void 0;var xR=Wu(),jR=pd();function IR(r){return jR.joinAllInternals(xR.combineLatest,r)}Oc.combineLatestAll=IR});var dd=_(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.combineAll=void 0;var kR=Tc();Sc.combineAll=kR.combineLatestAll});var vd=_(gi=>{"use strict";var u0=gi&&gi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},c0=gi&&gi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(gi,"__esModule",{value:!0});gi.combineLatest=void 0;var FR=Wu(),DR=z(),RR=mi(),zR=pi(),NR=ma(),VR=wt();function l0(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=VR.popResultSelector(r);return t?NR.pipe(l0.apply(void 0,c0([],u0(r))),zR.mapOneOrManyArgs(t)):DR.operate(function(i,n){FR.combineLatestInit(c0([i],u0(RR.argsOrArgArray(r))))(n)})}gi.combineLatest=l0});var md=_(bi=>{"use strict";var WR=bi&&bi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},UR=bi&&bi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(bi,"__esModule",{value:!0});bi.combineLatestWith=void 0;var GR=vd();function BR(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return GR.combineLatest.apply(void 0,UR([],WR(r)))}bi.combineLatestWith=BR});var Cc=_(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.concatMap=void 0;var f0=vr(),HR=le();function $R(r,e){return HR.isFunction(e)?f0.mergeMap(r,e,1):f0.mergeMap(r,1)}Ac.concatMap=$R});var yd=_(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.concatMapTo=void 0;var h0=Cc(),YR=le();function QR(r,e){return YR.isFunction(e)?h0.concatMap(function(){return r},e):h0.concatMap(function(){return r})}Ec.concatMapTo=QR});var gd=_(_i=>{"use strict";var KR=_i&&_i.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},XR=_i&&_i.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(_i,"__esModule",{value:!0});_i.concat=void 0;var JR=z(),ZR=wa(),ez=wt(),tz=Wr();function rz(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=ez.popScheduler(r);return JR.operate(function(i,n){ZR.concatAll()(tz.from(XR([i],KR(r)),t)).subscribe(n)})}_i.concat=rz});var bd=_(Pi=>{"use strict";var iz=Pi&&Pi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},nz=Pi&&Pi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.concatWith=void 0;var oz=gd();function az(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return oz.concat.apply(void 0,nz([],iz(r)))}Pi.concatWith=az});var p0=_(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.fromSubscribable=void 0;var sz=he();function uz(r){return new sz.Observable(function(e){return r.subscribe(e)})}qc.fromSubscribable=uz});var Sa=_(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.connect=void 0;var cz=Je(),lz=X(),fz=z(),hz=p0(),pz={connector:function(){return new cz.Subject}};function dz(r,e){e===void 0&&(e=pz);var t=e.connector;return fz.operate(function(i,n){var s=t();lz.innerFrom(r(hz.fromSubscribable(s))).subscribe(n),n.add(i.subscribe(s))})}Mc.connect=dz});var _d=_(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.count=void 0;var vz=an();function mz(r){return vz.reduce(function(e,t,i){return!r||r(t,i)?e+1:e},0)}Lc.count=mz});var Pd=_(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.debounce=void 0;var yz=z(),gz=Ke(),d0=U(),bz=X();function _z(r){return yz.operate(function(e,t){var i=!1,n=null,s=null,u=function(){if(s?.unsubscribe(),s=null,i){i=!1;var l=n;n=null,t.next(l)}};e.subscribe(d0.createOperatorSubscriber(t,function(l){s?.unsubscribe(),i=!0,n=l,s=d0.createOperatorSubscriber(t,u,gz.noop),bz.innerFrom(r(l)).subscribe(s)},function(){u(),t.complete()},void 0,function(){n=s=null}))})}xc.debounce=_z});var wd=_(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.debounceTime=void 0;var Pz=Pt(),wz=z(),Oz=U();function Tz(r,e){return e===void 0&&(e=Pz.asyncScheduler),wz.operate(function(t,i){var n=null,s=null,u=null,l=function(){if(n){n.unsubscribe(),n=null;var p=s;s=null,i.next(p)}};function h(){var p=u+r,v=e.now();if(v<p){n=this.schedule(void 0,p-v),i.add(n);return}l()}t.subscribe(Oz.createOperatorSubscriber(i,function(p){s=p,u=e.now(),n||(n=e.schedule(h,r),i.add(n))},function(){l(),i.complete()},void 0,function(){s=n=null}))})}jc.debounceTime=Tz});var fo=_(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.defaultIfEmpty=void 0;var Sz=z(),Az=U();function Cz(r){return Sz.operate(function(e,t){var i=!1;e.subscribe(Az.createOperatorSubscriber(t,function(n){i=!0,t.next(n)},function(){i||t.next(r),t.complete()}))})}Ic.defaultIfEmpty=Cz});var ho=_(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.take=void 0;var Ez=er(),qz=z(),Mz=U();function Lz(r){return r<=0?function(){return Ez.EMPTY}:qz.operate(function(e,t){var i=0;e.subscribe(Mz.createOperatorSubscriber(t,function(n){++i<=r&&(t.next(n),r<=i&&t.complete())}))})}kc.take=Lz});var Dc=_(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.ignoreElements=void 0;var xz=z(),jz=U(),Iz=Ke();function kz(){return xz.operate(function(r,e){r.subscribe(jz.createOperatorSubscriber(e,Iz.noop))})}Fc.ignoreElements=kz});var zc=_(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.mapTo=void 0;var Fz=Gr();function Dz(r){return Fz.map(function(){return r})}Rc.mapTo=Dz});var Vc=_(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.delayWhen=void 0;var Rz=Oa(),v0=ho(),zz=Dc(),Nz=zc(),Vz=vr(),Wz=X();function m0(r,e){return e?function(t){return Rz.concat(e.pipe(v0.take(1),zz.ignoreElements()),t.pipe(m0(r)))}:Vz.mergeMap(function(t,i){return Wz.innerFrom(r(t,i)).pipe(v0.take(1),Nz.mapTo(t))})}Nc.delayWhen=m0});var Od=_(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.delay=void 0;var Uz=Pt(),Gz=Vc(),Bz=vi();function Hz(r,e){e===void 0&&(e=Uz.asyncScheduler);var t=Bz.timer(r,e);return Gz.delayWhen(function(){return t})}Wc.delay=Hz});var Td=_(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.dematerialize=void 0;var $z=Cu(),Yz=z(),Qz=U();function Kz(){return Yz.operate(function(r,e){r.subscribe(Qz.createOperatorSubscriber(e,function(t){return $z.observeNotification(t,e)}))})}Uc.dematerialize=Kz});var Sd=_(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.distinct=void 0;var Xz=z(),y0=U(),Jz=Ke(),Zz=X();function eN(r,e){return Xz.operate(function(t,i){var n=new Set;t.subscribe(y0.createOperatorSubscriber(i,function(s){var u=r?r(s):s;n.has(u)||(n.add(u),i.next(s))})),e&&Zz.innerFrom(e).subscribe(y0.createOperatorSubscriber(i,function(){return n.clear()},Jz.noop))})}Gc.distinct=eN});var Hc=_(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.distinctUntilChanged=void 0;var tN=Xe(),rN=z(),iN=U();function nN(r,e){return e===void 0&&(e=tN.identity),r=r??oN,rN.operate(function(t,i){var n,s=!0;t.subscribe(iN.createOperatorSubscriber(i,function(u){var l=e(u);(s||!r(n,l))&&(s=!1,n=l,i.next(u))}))})}Bc.distinctUntilChanged=nN;function oN(r,e){return r===e}});var Ad=_($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.distinctUntilKeyChanged=void 0;var aN=Hc();function sN(r,e){return aN.distinctUntilChanged(function(t,i){return e?e(t[r],i[r]):t[r]===i[r]})}$c.distinctUntilKeyChanged=sN});var po=_(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.throwIfEmpty=void 0;var uN=fi(),cN=z(),lN=U();function fN(r){return r===void 0&&(r=hN),cN.operate(function(e,t){var i=!1;e.subscribe(lN.createOperatorSubscriber(t,function(n){i=!0,t.next(n)},function(){return i?t.complete():t.error(r())}))})}Yc.throwIfEmpty=fN;function hN(){return new uN.EmptyError}});var Cd=_(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.elementAt=void 0;var g0=Gp(),pN=Br(),dN=po(),vN=fo(),mN=ho();function yN(r,e){if(r<0)throw new g0.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(i){return i.pipe(pN.filter(function(n,s){return s===r}),mN.take(1),t?vN.defaultIfEmpty(e):dN.throwIfEmpty(function(){return new g0.ArgumentOutOfRangeError}))}}Qc.elementAt=yN});var Ed=_(wi=>{"use strict";var gN=wi&&wi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},bN=wi&&wi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(wi,"__esModule",{value:!0});wi.endWith=void 0;var _N=Oa(),PN=Su();function wN(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return _N.concat(t,PN.of.apply(void 0,bN([],gN(r))))}}wi.endWith=wN});var qd=_(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.every=void 0;var ON=z(),TN=U();function SN(r,e){return ON.operate(function(t,i){var n=0;t.subscribe(TN.createOperatorSubscriber(i,function(s){r.call(e,s,n++,t)||(i.next(!1),i.complete())},function(){i.next(!0),i.complete()}))})}Kc.every=SN});var Jc=_(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.exhaustMap=void 0;var AN=Gr(),b0=X(),CN=z(),_0=U();function P0(r,e){return e?function(t){return t.pipe(P0(function(i,n){return b0.innerFrom(r(i,n)).pipe(AN.map(function(s,u){return e(i,s,n,u)}))}))}:CN.operate(function(t,i){var n=0,s=null,u=!1;t.subscribe(_0.createOperatorSubscriber(i,function(l){s||(s=_0.createOperatorSubscriber(i,void 0,function(){s=null,u&&i.complete()}),b0.innerFrom(r(l,n++)).subscribe(s))},function(){u=!0,!s&&i.complete()}))})}Xc.exhaustMap=P0});var el=_(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.exhaustAll=void 0;var EN=Jc(),qN=Xe();function MN(){return EN.exhaustMap(qN.identity)}Zc.exhaustAll=MN});var Md=_(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.exhaust=void 0;var LN=el();tl.exhaust=LN.exhaustAll});var Ld=_(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.expand=void 0;var xN=z(),jN=Gu();function IN(r,e,t){return e===void 0&&(e=1/0),e=(e||0)<1?1/0:e,xN.operate(function(i,n){return jN.mergeInternals(i,n,r,e,void 0,!0,t)})}rl.expand=IN});var xd=_(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.finalize=void 0;var kN=z();function FN(r){return kN.operate(function(e,t){try{e.subscribe(t)}finally{t.add(r)}})}il.finalize=FN});var nl=_(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.createFind=vo.find=void 0;var DN=z(),RN=U();function zN(r,e){return DN.operate(w0(r,e,"value"))}vo.find=zN;function w0(r,e,t){var i=t==="index";return function(n,s){var u=0;n.subscribe(RN.createOperatorSubscriber(s,function(l){var h=u++;r.call(e,l,h,n)&&(s.next(i?h:l),s.complete())},function(){s.next(i?-1:void 0),s.complete()}))}}vo.createFind=w0});var jd=_(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.findIndex=void 0;var NN=z(),VN=nl();function WN(r,e){return NN.operate(VN.createFind(r,e,"index"))}ol.findIndex=WN});var Id=_(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.first=void 0;var UN=fi(),GN=Br(),BN=ho(),HN=fo(),$N=po(),YN=Xe();function QN(r,e){var t=arguments.length>=2;return function(i){return i.pipe(r?GN.filter(function(n,s){return r(n,s,i)}):YN.identity,BN.take(1),t?HN.defaultIfEmpty(e):$N.throwIfEmpty(function(){return new UN.EmptyError}))}}al.first=QN});var kd=_(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.groupBy=void 0;var KN=he(),XN=X(),JN=Je(),ZN=z(),O0=U();function eV(r,e,t,i){return ZN.operate(function(n,s){var u;!e||typeof e=="function"?u=e:(t=e.duration,u=e.element,i=e.connector);var l=new Map,h=function(E){l.forEach(E),E(s)},p=function(E){return h(function(M){return M.error(E)})},v=0,b=!1,T=new O0.OperatorSubscriber(s,function(E){try{var M=r(E),x=l.get(M);if(!x){l.set(M,x=i?i():new JN.Subject);var D=S(M,x);if(s.next(D),t){var N=O0.createOperatorSubscriber(x,function(){x.complete(),N?.unsubscribe()},void 0,void 0,function(){return l.delete(M)});T.add(XN.innerFrom(t(D)).subscribe(N))}}x.next(u?u(E):E)}catch(Y){p(Y)}},function(){return h(function(E){return E.complete()})},p,function(){return l.clear()},function(){return b=!0,v===0});n.subscribe(T);function S(E,M){var x=new KN.Observable(function(D){v++;var N=M.subscribe(D);return function(){N.unsubscribe(),--v===0&&b&&T.unsubscribe()}});return x.key=E,x}})}sl.groupBy=eV});var Fd=_(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.isEmpty=void 0;var tV=z(),rV=U();function iV(){return tV.operate(function(r,e){r.subscribe(rV.createOperatorSubscriber(e,function(){e.next(!1),e.complete()},function(){e.next(!0),e.complete()}))})}ul.isEmpty=iV});var cl=_(mo=>{"use strict";var nV=mo&&mo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mo,"__esModule",{value:!0});mo.takeLast=void 0;var oV=er(),aV=z(),sV=U();function uV(r){return r<=0?function(){return oV.EMPTY}:aV.operate(function(e,t){var i=[];e.subscribe(sV.createOperatorSubscriber(t,function(n){i.push(n),r<i.length&&i.shift()},function(){var n,s;try{for(var u=nV(i),l=u.next();!l.done;l=u.next()){var h=l.value;t.next(h)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}t.complete()},void 0,function(){i=null}))})}mo.takeLast=uV});var Dd=_(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.last=void 0;var cV=fi(),lV=Br(),fV=cl(),hV=po(),pV=fo(),dV=Xe();function vV(r,e){var t=arguments.length>=2;return function(i){return i.pipe(r?lV.filter(function(n,s){return r(n,s,i)}):dV.identity,fV.takeLast(1),t?pV.defaultIfEmpty(e):hV.throwIfEmpty(function(){return new cV.EmptyError}))}}ll.last=vV});var zd=_(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.materialize=void 0;var Rd=Cu(),mV=z(),yV=U();function gV(){return mV.operate(function(r,e){r.subscribe(yV.createOperatorSubscriber(e,function(t){e.next(Rd.Notification.createNext(t))},function(){e.next(Rd.Notification.createComplete()),e.complete()},function(t){e.next(Rd.Notification.createError(t)),e.complete()}))})}fl.materialize=gV});var Nd=_(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.max=void 0;var bV=an(),_V=le();function PV(r){return bV.reduce(_V.isFunction(r)?function(e,t){return r(e,t)>0?e:t}:function(e,t){return e>t?e:t})}hl.max=PV});var Vd=_(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.flatMap=void 0;var wV=vr();pl.flatMap=wV.mergeMap});var Wd=_(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.mergeMapTo=void 0;var T0=vr(),OV=le();function TV(r,e,t){return t===void 0&&(t=1/0),OV.isFunction(e)?T0.mergeMap(function(){return r},e,t):(typeof e=="number"&&(t=e),T0.mergeMap(function(){return r},t))}dl.mergeMapTo=TV});var Ud=_(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.mergeScan=void 0;var SV=z(),AV=Gu();function CV(r,e,t){return t===void 0&&(t=1/0),SV.operate(function(i,n){var s=e;return AV.mergeInternals(i,n,function(u,l){return r(s,u,l)},t,function(u){s=u},!1,void 0,function(){return s=null})})}vl.mergeScan=CV});var Gd=_(Oi=>{"use strict";var EV=Oi&&Oi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},qV=Oi&&Oi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.merge=void 0;var MV=z(),LV=mi(),xV=no(),S0=wt(),jV=Wr();function IV(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=S0.popScheduler(r),i=S0.popNumber(r,1/0);return r=LV.argsOrArgArray(r),MV.operate(function(n,s){xV.mergeAll(i)(jV.from(qV([n],EV(r)),t)).subscribe(s)})}Oi.merge=IV});var Bd=_(Ti=>{"use strict";var kV=Ti&&Ti.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},FV=Ti&&Ti.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.mergeWith=void 0;var DV=Gd();function RV(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return DV.merge.apply(void 0,FV([],kV(r)))}Ti.mergeWith=RV});var Hd=_(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.min=void 0;var zV=an(),NV=le();function VV(r){return zV.reduce(NV.isFunction(r)?function(e,t){return r(e,t)<0?e:t}:function(e,t){return e<t?e:t})}ml.min=VV});var Aa=_(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.multicast=void 0;var WV=ya(),A0=le(),UV=Sa();function GV(r,e){var t=A0.isFunction(r)?r:function(){return r};return A0.isFunction(e)?UV.connect(e,{connector:t}):function(i){return new WV.ConnectableObservable(i,t)}}yl.multicast=GV});var $d=_(mr=>{"use strict";var BV=mr&&mr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},HV=mr&&mr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(mr,"__esModule",{value:!0});mr.onErrorResumeNext=mr.onErrorResumeNextWith=void 0;var $V=mi(),YV=ed();function C0(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=$V.argsOrArgArray(r);return function(i){return YV.onErrorResumeNext.apply(void 0,HV([i],BV(t)))}}mr.onErrorResumeNextWith=C0;mr.onErrorResumeNext=C0});var Yd=_(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.pairwise=void 0;var QV=z(),KV=U();function XV(){return QV.operate(function(r,e){var t,i=!1;r.subscribe(KV.createOperatorSubscriber(e,function(n){var s=t;t=n,i&&e.next([s,n]),i=!0}))})}gl.pairwise=XV});var Qd=_(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.pluck=void 0;var JV=Gr();function ZV(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.length;if(t===0)throw new Error("list of properties cannot be empty.");return JV.map(function(i){for(var n=i,s=0;s<t;s++){var u=n?.[r[s]];if(typeof u<"u")n=u;else return}return n})}bl.pluck=ZV});var Kd=_(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.publish=void 0;var e2=Je(),t2=Aa(),r2=Sa();function i2(r){return r?function(e){return r2.connect(r)(e)}:function(e){return t2.multicast(new e2.Subject)(e)}}_l.publish=i2});var Xd=_(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.publishBehavior=void 0;var n2=Cp(),o2=ya();function a2(r){return function(e){var t=new n2.BehaviorSubject(r);return new o2.ConnectableObservable(e,function(){return t})}}Pl.publishBehavior=a2});var Jd=_(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.publishLast=void 0;var s2=tu(),u2=ya();function c2(){return function(r){var e=new s2.AsyncSubject;return new u2.ConnectableObservable(r,function(){return e})}}wl.publishLast=c2});var Zd=_(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.publishReplay=void 0;var l2=eu(),f2=Aa(),E0=le();function h2(r,e,t,i){t&&!E0.isFunction(t)&&(i=t);var n=E0.isFunction(t)?t:void 0;return function(s){return f2.multicast(new l2.ReplaySubject(r,e,i),n)(s)}}Ol.publishReplay=h2});var Tl=_(Si=>{"use strict";var p2=Si&&Si.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},d2=Si&&Si.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Si,"__esModule",{value:!0});Si.raceWith=void 0;var v2=rd(),m2=z(),y2=Xe();function g2(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length?m2.operate(function(t,i){v2.raceInit(d2([t],p2(r)))(i)}):y2.identity}Si.raceWith=g2});var ev=_(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.repeat=void 0;var b2=er(),_2=z(),q0=U(),P2=X(),w2=vi();function O2(r){var e,t=1/0,i;return r!=null&&(typeof r=="object"?(e=r.count,t=e===void 0?1/0:e,i=r.delay):t=r),t<=0?function(){return b2.EMPTY}:_2.operate(function(n,s){var u=0,l,h=function(){if(l?.unsubscribe(),l=null,i!=null){var v=typeof i=="number"?w2.timer(i):P2.innerFrom(i(u)),b=q0.createOperatorSubscriber(s,function(){b.unsubscribe(),p()});v.subscribe(b)}else p()},p=function(){var v=!1;l=n.subscribe(q0.createOperatorSubscriber(s,void 0,function(){++u<t?l?h():v=!0:s.complete()})),v&&h()};p()})}Sl.repeat=O2});var tv=_(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.repeatWhen=void 0;var T2=X(),S2=Je(),A2=z(),M0=U();function C2(r){return A2.operate(function(e,t){var i,n=!1,s,u=!1,l=!1,h=function(){return l&&u&&(t.complete(),!0)},p=function(){return s||(s=new S2.Subject,T2.innerFrom(r(s)).subscribe(M0.createOperatorSubscriber(t,function(){i?v():n=!0},function(){u=!0,h()}))),s},v=function(){l=!1,i=e.subscribe(M0.createOperatorSubscriber(t,void 0,function(){l=!0,!h()&&p().next()})),n&&(i.unsubscribe(),i=null,n=!1,v())};v()})}Al.repeatWhen=C2});var rv=_(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.retry=void 0;var E2=z(),L0=U(),q2=Xe(),M2=vi(),L2=X();function x2(r){r===void 0&&(r=1/0);var e;r&&typeof r=="object"?e=r:e={count:r};var t=e.count,i=t===void 0?1/0:t,n=e.delay,s=e.resetOnSuccess,u=s===void 0?!1:s;return i<=0?q2.identity:E2.operate(function(l,h){var p=0,v,b=function(){var T=!1;v=l.subscribe(L0.createOperatorSubscriber(h,function(S){u&&(p=0),h.next(S)},void 0,function(S){if(p++<i){var E=function(){v?(v.unsubscribe(),v=null,b()):T=!0};if(n!=null){var M=typeof n=="number"?M2.timer(n):L2.innerFrom(n(S,p)),x=L0.createOperatorSubscriber(h,function(){x.unsubscribe(),E()},function(){h.complete()});M.subscribe(x)}else E()}else h.error(S)})),T&&(v.unsubscribe(),v=null,b())};b()})}Cl.retry=x2});var iv=_(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.retryWhen=void 0;var j2=X(),I2=Je(),k2=z(),x0=U();function F2(r){return k2.operate(function(e,t){var i,n=!1,s,u=function(){i=e.subscribe(x0.createOperatorSubscriber(t,void 0,void 0,function(l){s||(s=new I2.Subject,j2.innerFrom(r(s)).subscribe(x0.createOperatorSubscriber(t,function(){return i?u():n=!0}))),s&&s.next(l)})),n&&(i.unsubscribe(),i=null,n=!1,u())};u()})}El.retryWhen=F2});var Ml=_(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.sample=void 0;var D2=X(),R2=z(),z2=Ke(),j0=U();function N2(r){return R2.operate(function(e,t){var i=!1,n=null;e.subscribe(j0.createOperatorSubscriber(t,function(s){i=!0,n=s})),D2.innerFrom(r).subscribe(j0.createOperatorSubscriber(t,function(){if(i){i=!1;var s=n;n=null,t.next(s)}},z2.noop))})}ql.sample=N2});var nv=_(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.sampleTime=void 0;var V2=Pt(),W2=Ml(),U2=Jp();function G2(r,e){return e===void 0&&(e=V2.asyncScheduler),W2.sample(U2.interval(r,e))}Ll.sampleTime=G2});var ov=_(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.scan=void 0;var B2=z(),H2=hd();function $2(r,e){return B2.operate(H2.scanInternals(r,e,arguments.length>=2,!0))}xl.scan=$2});var av=_(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.sequenceEqual=void 0;var Y2=z(),Q2=U(),K2=X();function X2(r,e){return e===void 0&&(e=function(t,i){return t===i}),Y2.operate(function(t,i){var n=I0(),s=I0(),u=function(h){i.next(h),i.complete()},l=function(h,p){var v=Q2.createOperatorSubscriber(i,function(b){var T=p.buffer,S=p.complete;T.length===0?S?u(!1):h.buffer.push(b):!e(b,T.shift())&&u(!1)},function(){h.complete=!0;var b=p.complete,T=p.buffer;b&&u(T.length===0),v?.unsubscribe()});return v};t.subscribe(l(n,s)),K2.innerFrom(r).subscribe(l(s,n))})}jl.sequenceEqual=X2;function I0(){return{buffer:[],complete:!1}}});var Il=_(Ai=>{"use strict";var J2=Ai&&Ai.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},Z2=Ai&&Ai.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.share=void 0;var k0=X(),eW=Je(),F0=jn(),tW=z();function rW(r){r===void 0&&(r={});var e=r.connector,t=e===void 0?function(){return new eW.Subject}:e,i=r.resetOnError,n=i===void 0?!0:i,s=r.resetOnComplete,u=s===void 0?!0:s,l=r.resetOnRefCountZero,h=l===void 0?!0:l;return function(p){var v,b,T,S=0,E=!1,M=!1,x=function(){b?.unsubscribe(),b=void 0},D=function(){x(),v=T=void 0,E=M=!1},N=function(){var Y=v;D(),Y?.unsubscribe()};return tW.operate(function(Y,ie){S++,!M&&!E&&x();var pe=T=T??t();ie.add(function(){S--,S===0&&!M&&!E&&(b=sv(N,h))}),pe.subscribe(ie),!v&&S>0&&(v=new F0.SafeSubscriber({next:function(ke){return pe.next(ke)},error:function(ke){M=!0,x(),b=sv(D,n,ke),pe.error(ke)},complete:function(){E=!0,x(),b=sv(D,u),pe.complete()}}),k0.innerFrom(Y).subscribe(v))})(p)}}Ai.share=rW;function sv(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];if(e===!0){r();return}if(e!==!1){var n=new F0.SafeSubscriber({next:function(){n.unsubscribe(),r()}});return k0.innerFrom(e.apply(void 0,Z2([],J2(t)))).subscribe(n)}}});var uv=_(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.shareReplay=void 0;var iW=eu(),nW=Il();function oW(r,e,t){var i,n,s,u,l=!1;return r&&typeof r=="object"?(i=r.bufferSize,u=i===void 0?1/0:i,n=r.windowTime,e=n===void 0?1/0:n,s=r.refCount,l=s===void 0?!1:s,t=r.scheduler):u=r??1/0,nW.share({connector:function(){return new iW.ReplaySubject(u,e,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}kl.shareReplay=oW});var cv=_(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.single=void 0;var aW=fi(),sW=Hp(),uW=Bp(),cW=z(),lW=U();function fW(r){return cW.operate(function(e,t){var i=!1,n,s=!1,u=0;e.subscribe(lW.createOperatorSubscriber(t,function(l){s=!0,(!r||r(l,u++,e))&&(i&&t.error(new sW.SequenceError("Too many matching values")),i=!0,n=l)},function(){i?(t.next(n),t.complete()):t.error(s?new uW.NotFoundError("No matching values"):new aW.EmptyError)}))})}Fl.single=fW});var lv=_(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.skip=void 0;var hW=Br();function pW(r){return hW.filter(function(e,t){return r<=t})}Dl.skip=pW});var fv=_(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.skipLast=void 0;var dW=Xe(),vW=z(),mW=U();function yW(r){return r<=0?dW.identity:vW.operate(function(e,t){var i=new Array(r),n=0;return e.subscribe(mW.createOperatorSubscriber(t,function(s){var u=n++;if(u<r)i[u]=s;else{var l=u%r,h=i[l];i[l]=s,t.next(h)}})),function(){i=null}})}Rl.skipLast=yW});var hv=_(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.skipUntil=void 0;var gW=z(),D0=U(),bW=X(),_W=Ke();function PW(r){return gW.operate(function(e,t){var i=!1,n=D0.createOperatorSubscriber(t,function(){n?.unsubscribe(),i=!0},_W.noop);bW.innerFrom(r).subscribe(n),e.subscribe(D0.createOperatorSubscriber(t,function(s){return i&&t.next(s)}))})}zl.skipUntil=PW});var pv=_(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.skipWhile=void 0;var wW=z(),OW=U();function TW(r){return wW.operate(function(e,t){var i=!1,n=0;e.subscribe(OW.createOperatorSubscriber(t,function(s){return(i||(i=!r(s,n++)))&&t.next(s)}))})}Nl.skipWhile=TW});var dv=_(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.startWith=void 0;var R0=Oa(),SW=wt(),AW=z();function CW(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=SW.popScheduler(r);return AW.operate(function(i,n){(t?R0.concat(r,i,t):R0.concat(r,i)).subscribe(n)})}Vl.startWith=CW});var yo=_(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.switchMap=void 0;var EW=X(),qW=z(),z0=U();function MW(r,e){return qW.operate(function(t,i){var n=null,s=0,u=!1,l=function(){return u&&!n&&i.complete()};t.subscribe(z0.createOperatorSubscriber(i,function(h){n?.unsubscribe();var p=0,v=s++;EW.innerFrom(r(h,v)).subscribe(n=z0.createOperatorSubscriber(i,function(b){return i.next(e?e(h,b,v,p++):b)},function(){n=null,l()}))},function(){u=!0,l()}))})}Wl.switchMap=MW});var vv=_(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.switchAll=void 0;var LW=yo(),xW=Xe();function jW(){return LW.switchMap(xW.identity)}Ul.switchAll=jW});var mv=_(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.switchMapTo=void 0;var N0=yo(),IW=le();function kW(r,e){return IW.isFunction(e)?N0.switchMap(function(){return r},e):N0.switchMap(function(){return r})}Gl.switchMapTo=kW});var yv=_(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.switchScan=void 0;var FW=yo(),DW=z();function RW(r,e){return DW.operate(function(t,i){var n=e;return FW.switchMap(function(s,u){return r(n,s,u)},function(s,u){return n=u,u})(t).subscribe(i),function(){n=null}})}Bl.switchScan=RW});var gv=_(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.takeUntil=void 0;var zW=z(),NW=U(),VW=X(),WW=Ke();function UW(r){return zW.operate(function(e,t){VW.innerFrom(r).subscribe(NW.createOperatorSubscriber(t,function(){return t.complete()},WW.noop)),!t.closed&&e.subscribe(t)})}Hl.takeUntil=UW});var bv=_($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.takeWhile=void 0;var GW=z(),BW=U();function HW(r,e){return e===void 0&&(e=!1),GW.operate(function(t,i){var n=0;t.subscribe(BW.createOperatorSubscriber(i,function(s){var u=r(s,n++);(u||e)&&i.next(s),!u&&i.complete()}))})}$l.takeWhile=HW});var _v=_(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.tap=void 0;var $W=le(),YW=z(),QW=U(),KW=Xe();function XW(r,e,t){var i=$W.isFunction(r)||e||t?{next:r,error:e,complete:t}:r;return i?YW.operate(function(n,s){var u;(u=i.subscribe)===null||u===void 0||u.call(i);var l=!0;n.subscribe(QW.createOperatorSubscriber(s,function(h){var p;(p=i.next)===null||p===void 0||p.call(i,h),s.next(h)},function(){var h;l=!1,(h=i.complete)===null||h===void 0||h.call(i),s.complete()},function(h){var p;l=!1,(p=i.error)===null||p===void 0||p.call(i,h),s.error(h)},function(){var h,p;l&&((h=i.unsubscribe)===null||h===void 0||h.call(i)),(p=i.finalize)===null||p===void 0||p.call(i)}))}):KW.identity}Yl.tap=XW});var Kl=_(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.throttle=void 0;var JW=z(),V0=U(),ZW=X();function eU(r,e){return JW.operate(function(t,i){var n=e??{},s=n.leading,u=s===void 0?!0:s,l=n.trailing,h=l===void 0?!1:l,p=!1,v=null,b=null,T=!1,S=function(){b?.unsubscribe(),b=null,h&&(x(),T&&i.complete())},E=function(){b=null,T&&i.complete()},M=function(D){return b=ZW.innerFrom(r(D)).subscribe(V0.createOperatorSubscriber(i,S,E))},x=function(){if(p){p=!1;var D=v;v=null,i.next(D),!T&&M(D)}};t.subscribe(V0.createOperatorSubscriber(i,function(D){p=!0,v=D,!(b&&!b.closed)&&(u?x():M(D))},function(){T=!0,!(h&&p&&b&&!b.closed)&&i.complete()}))})}Ql.throttle=eU});var Pv=_(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.throttleTime=void 0;var tU=Pt(),rU=Kl(),iU=vi();function nU(r,e,t){e===void 0&&(e=tU.asyncScheduler);var i=iU.timer(r,e);return rU.throttle(function(){return i},t)}Xl.throttleTime=nU});var wv=_(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.TimeInterval=go.timeInterval=void 0;var oU=Pt(),aU=z(),sU=U();function uU(r){return r===void 0&&(r=oU.asyncScheduler),aU.operate(function(e,t){var i=r.now();e.subscribe(sU.createOperatorSubscriber(t,function(n){var s=r.now(),u=s-i;i=s,t.next(new W0(n,u))}))})}go.timeInterval=uU;var W0=function(){function r(e,t){this.value=e,this.interval=t}return r}();go.TimeInterval=W0});var Ov=_(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.timeoutWith=void 0;var cU=Pt(),lU=Fu(),fU=Pa();function hU(r,e,t){var i,n,s;if(t=t??cU.async,lU.isValidDate(r)?i=r:typeof r=="number"&&(n=r),e)s=function(){return e};else throw new TypeError("No observable provided to switch to");if(i==null&&n==null)throw new TypeError("No timeout provided.");return fU.timeout({first:i,each:n,scheduler:t,with:s})}Jl.timeoutWith=hU});var Tv=_(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.timestamp=void 0;var pU=Zs(),dU=Gr();function vU(r){return r===void 0&&(r=pU.dateTimestampProvider),dU.map(function(e){return{value:e,timestamp:r.now()}})}Zl.timestamp=vU});var Sv=_(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.window=void 0;var U0=Je(),mU=z(),G0=U(),yU=Ke(),gU=X();function bU(r){return mU.operate(function(e,t){var i=new U0.Subject;t.next(i.asObservable());var n=function(s){i.error(s),t.error(s)};return e.subscribe(G0.createOperatorSubscriber(t,function(s){return i?.next(s)},function(){i.complete(),t.complete()},n)),gU.innerFrom(r).subscribe(G0.createOperatorSubscriber(t,function(){i.complete(),t.next(i=new U0.Subject)},yU.noop,n)),function(){i?.unsubscribe(),i=null}})}ef.window=bU});var Av=_(bo=>{"use strict";var _U=bo&&bo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bo,"__esModule",{value:!0});bo.windowCount=void 0;var B0=Je(),PU=z(),wU=U();function OU(r,e){e===void 0&&(e=0);var t=e>0?e:r;return PU.operate(function(i,n){var s=[new B0.Subject],u=[],l=0;n.next(s[0].asObservable()),i.subscribe(wU.createOperatorSubscriber(n,function(h){var p,v;try{for(var b=_U(s),T=b.next();!T.done;T=b.next()){var S=T.value;S.next(h)}}catch(x){p={error:x}}finally{try{T&&!T.done&&(v=b.return)&&v.call(b)}finally{if(p)throw p.error}}var E=l-r+1;if(E>=0&&E%t===0&&s.shift().complete(),++l%t===0){var M=new B0.Subject;s.push(M),n.next(M.asObservable())}},function(){for(;s.length>0;)s.shift().complete();n.complete()},function(h){for(;s.length>0;)s.shift().error(h);n.error(h)},function(){u=null,s=null}))})}bo.windowCount=OU});var Cv=_(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.windowTime=void 0;var TU=Je(),SU=Pt(),AU=Lt(),CU=z(),EU=U(),qU=Nr(),MU=wt(),H0=Vr();function LU(r){for(var e,t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=(e=MU.popScheduler(i))!==null&&e!==void 0?e:SU.asyncScheduler,u=(t=i[0])!==null&&t!==void 0?t:null,l=i[1]||1/0;return CU.operate(function(h,p){var v=[],b=!1,T=function(x){var D=x.window,N=x.subs;D.complete(),N.unsubscribe(),qU.arrRemove(v,x),b&&S()},S=function(){if(v){var x=new AU.Subscription;p.add(x);var D=new TU.Subject,N={window:D,subs:x,seen:0};v.push(N),p.next(D.asObservable()),H0.executeSchedule(x,s,function(){return T(N)},r)}};u!==null&&u>=0?H0.executeSchedule(p,s,S,u,!0):b=!0,S();var E=function(x){return v.slice().forEach(x)},M=function(x){E(function(D){var N=D.window;return x(N)}),x(p),p.unsubscribe()};return h.subscribe(EU.createOperatorSubscriber(p,function(x){E(function(D){D.window.next(x),l<=++D.seen&&T(D)})},function(){return M(function(x){return x.complete()})},function(x){return M(function(D){return D.error(x)})})),function(){v=null}})}tf.windowTime=LU});var qv=_(_o=>{"use strict";var xU=_o&&_o.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(_o,"__esModule",{value:!0});_o.windowToggle=void 0;var jU=Je(),IU=Lt(),kU=z(),$0=X(),Ev=U(),Y0=Ke(),FU=Nr();function DU(r,e){return kU.operate(function(t,i){var n=[],s=function(u){for(;0<n.length;)n.shift().error(u);i.error(u)};$0.innerFrom(r).subscribe(Ev.createOperatorSubscriber(i,function(u){var l=new jU.Subject;n.push(l);var h=new IU.Subscription,p=function(){FU.arrRemove(n,l),l.complete(),h.unsubscribe()},v;try{v=$0.innerFrom(e(u))}catch(b){s(b);return}i.next(l.asObservable()),h.add(v.subscribe(Ev.createOperatorSubscriber(i,p,Y0.noop,s)))},Y0.noop)),t.subscribe(Ev.createOperatorSubscriber(i,function(u){var l,h,p=n.slice();try{for(var v=xU(p),b=v.next();!b.done;b=v.next()){var T=b.value;T.next(u)}}catch(S){l={error:S}}finally{try{b&&!b.done&&(h=v.return)&&h.call(v)}finally{if(l)throw l.error}}},function(){for(;0<n.length;)n.shift().complete();i.complete()},s,function(){for(;0<n.length;)n.shift().unsubscribe()}))})}_o.windowToggle=DU});var Mv=_(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.windowWhen=void 0;var RU=Je(),zU=z(),Q0=U(),NU=X();function VU(r){return zU.operate(function(e,t){var i,n,s=function(l){i.error(l),t.error(l)},u=function(){n?.unsubscribe(),i?.complete(),i=new RU.Subject,t.next(i.asObservable());var l;try{l=NU.innerFrom(r())}catch(h){s(h);return}l.subscribe(n=Q0.createOperatorSubscriber(t,u,u,s))};u(),e.subscribe(Q0.createOperatorSubscriber(t,function(l){return i.next(l)},function(){i.complete(),t.complete()},s,function(){n?.unsubscribe(),i=null}))})}rf.windowWhen=VU});var Lv=_(Ci=>{"use strict";var K0=Ci&&Ci.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},X0=Ci&&Ci.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.withLatestFrom=void 0;var WU=z(),J0=U(),UU=X(),GU=Xe(),BU=Ke(),HU=wt();function $U(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=HU.popResultSelector(r);return WU.operate(function(i,n){for(var s=r.length,u=new Array(s),l=r.map(function(){return!1}),h=!1,p=function(b){UU.innerFrom(r[b]).subscribe(J0.createOperatorSubscriber(n,function(T){u[b]=T,!h&&!l[b]&&(l[b]=!0,(h=l.every(GU.identity))&&(l=null))},BU.noop))},v=0;v<s;v++)p(v);i.subscribe(J0.createOperatorSubscriber(n,function(b){if(h){var T=X0([b],K0(u));n.next(t?t.apply(void 0,X0([],K0(T))):T)}}))})}Ci.withLatestFrom=$U});var xv=_(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.zipAll=void 0;var YU=fc(),QU=pd();function KU(r){return QU.joinAllInternals(YU.zip,r)}nf.zipAll=KU});var jv=_(Ei=>{"use strict";var XU=Ei&&Ei.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},JU=Ei&&Ei.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.zip=void 0;var ZU=fc(),eG=z();function tG(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return eG.operate(function(t,i){ZU.zip.apply(void 0,JU([t],XU(r))).subscribe(i)})}Ei.zip=tG});var Iv=_(qi=>{"use strict";var rG=qi&&qi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},iG=qi&&qi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(qi,"__esModule",{value:!0});qi.zipWith=void 0;var nG=jv();function oG(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return nG.zip.apply(void 0,iG([],rG(r)))}qi.zipWith=oG});var Mi=_(m=>{"use strict";var aG=m&&m.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),sG=m&&m.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&aG(e,r,t)};Object.defineProperty(m,"__esModule",{value:!0});m.interval=m.iif=m.generate=m.fromEventPattern=m.fromEvent=m.from=m.forkJoin=m.empty=m.defer=m.connectable=m.concat=m.combineLatest=m.bindNodeCallback=m.bindCallback=m.UnsubscriptionError=m.TimeoutError=m.SequenceError=m.ObjectUnsubscribedError=m.NotFoundError=m.EmptyError=m.ArgumentOutOfRangeError=m.firstValueFrom=m.lastValueFrom=m.isObservable=m.identity=m.noop=m.pipe=m.NotificationKind=m.Notification=m.Subscriber=m.Subscription=m.Scheduler=m.VirtualAction=m.VirtualTimeScheduler=m.animationFrameScheduler=m.animationFrame=m.queueScheduler=m.queue=m.asyncScheduler=m.async=m.asapScheduler=m.asap=m.AsyncSubject=m.ReplaySubject=m.BehaviorSubject=m.Subject=m.animationFrames=m.observable=m.ConnectableObservable=m.Observable=void 0;m.filter=m.expand=m.exhaustMap=m.exhaustAll=m.exhaust=m.every=m.endWith=m.elementAt=m.distinctUntilKeyChanged=m.distinctUntilChanged=m.distinct=m.dematerialize=m.delayWhen=m.delay=m.defaultIfEmpty=m.debounceTime=m.debounce=m.count=m.connect=m.concatWith=m.concatMapTo=m.concatMap=m.concatAll=m.combineLatestWith=m.combineLatestAll=m.combineAll=m.catchError=m.bufferWhen=m.bufferToggle=m.bufferTime=m.bufferCount=m.buffer=m.auditTime=m.audit=m.config=m.NEVER=m.EMPTY=m.scheduled=m.zip=m.using=m.timer=m.throwError=m.range=m.race=m.partition=m.pairs=m.onErrorResumeNext=m.of=m.never=m.merge=void 0;m.switchMap=m.switchAll=m.subscribeOn=m.startWith=m.skipWhile=m.skipUntil=m.skipLast=m.skip=m.single=m.shareReplay=m.share=m.sequenceEqual=m.scan=m.sampleTime=m.sample=m.refCount=m.retryWhen=m.retry=m.repeatWhen=m.repeat=m.reduce=m.raceWith=m.publishReplay=m.publishLast=m.publishBehavior=m.publish=m.pluck=m.pairwise=m.onErrorResumeNextWith=m.observeOn=m.multicast=m.min=m.mergeWith=m.mergeScan=m.mergeMapTo=m.mergeMap=m.flatMap=m.mergeAll=m.max=m.materialize=m.mapTo=m.map=m.last=m.isEmpty=m.ignoreElements=m.groupBy=m.first=m.findIndex=m.find=m.finalize=void 0;m.zipWith=m.zipAll=m.withLatestFrom=m.windowWhen=m.windowToggle=m.windowTime=m.windowCount=m.window=m.toArray=m.timestamp=m.timeoutWith=m.timeout=m.timeInterval=m.throwIfEmpty=m.throttleTime=m.throttle=m.tap=m.takeWhile=m.takeUntil=m.takeLast=m.take=m.switchScan=m.switchMapTo=void 0;var uG=he();Object.defineProperty(m,"Observable",{enumerable:!0,get:function(){return uG.Observable}});var cG=ya();Object.defineProperty(m,"ConnectableObservable",{enumerable:!0,get:function(){return cG.ConnectableObservable}});var lG=va();Object.defineProperty(m,"observable",{enumerable:!0,get:function(){return lG.observable}});var fG=Mb();Object.defineProperty(m,"animationFrames",{enumerable:!0,get:function(){return fG.animationFrames}});var hG=Je();Object.defineProperty(m,"Subject",{enumerable:!0,get:function(){return hG.Subject}});var pG=Cp();Object.defineProperty(m,"BehaviorSubject",{enumerable:!0,get:function(){return pG.BehaviorSubject}});var dG=eu();Object.defineProperty(m,"ReplaySubject",{enumerable:!0,get:function(){return dG.ReplaySubject}});var vG=tu();Object.defineProperty(m,"AsyncSubject",{enumerable:!0,get:function(){return vG.AsyncSubject}});var Z0=$b();Object.defineProperty(m,"asap",{enumerable:!0,get:function(){return Z0.asap}});Object.defineProperty(m,"asapScheduler",{enumerable:!0,get:function(){return Z0.asapScheduler}});var eP=Pt();Object.defineProperty(m,"async",{enumerable:!0,get:function(){return eP.async}});Object.defineProperty(m,"asyncScheduler",{enumerable:!0,get:function(){return eP.asyncScheduler}});var tP=Kb();Object.defineProperty(m,"queue",{enumerable:!0,get:function(){return tP.queue}});Object.defineProperty(m,"queueScheduler",{enumerable:!0,get:function(){return tP.queueScheduler}});var rP=e_();Object.defineProperty(m,"animationFrame",{enumerable:!0,get:function(){return rP.animationFrame}});Object.defineProperty(m,"animationFrameScheduler",{enumerable:!0,get:function(){return rP.animationFrameScheduler}});var iP=i_();Object.defineProperty(m,"VirtualTimeScheduler",{enumerable:!0,get:function(){return iP.VirtualTimeScheduler}});Object.defineProperty(m,"VirtualAction",{enumerable:!0,get:function(){return iP.VirtualAction}});var mG=qp();Object.defineProperty(m,"Scheduler",{enumerable:!0,get:function(){return mG.Scheduler}});var yG=Lt();Object.defineProperty(m,"Subscription",{enumerable:!0,get:function(){return yG.Subscription}});var gG=jn();Object.defineProperty(m,"Subscriber",{enumerable:!0,get:function(){return gG.Subscriber}});var nP=Cu();Object.defineProperty(m,"Notification",{enumerable:!0,get:function(){return nP.Notification}});Object.defineProperty(m,"NotificationKind",{enumerable:!0,get:function(){return nP.NotificationKind}});var bG=ma();Object.defineProperty(m,"pipe",{enumerable:!0,get:function(){return bG.pipe}});var _G=Ke();Object.defineProperty(m,"noop",{enumerable:!0,get:function(){return _G.noop}});var PG=Xe();Object.defineProperty(m,"identity",{enumerable:!0,get:function(){return PG.identity}});var wG=__();Object.defineProperty(m,"isObservable",{enumerable:!0,get:function(){return wG.isObservable}});var OG=P_();Object.defineProperty(m,"lastValueFrom",{enumerable:!0,get:function(){return OG.lastValueFrom}});var TG=w_();Object.defineProperty(m,"firstValueFrom",{enumerable:!0,get:function(){return TG.firstValueFrom}});var SG=Gp();Object.defineProperty(m,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return SG.ArgumentOutOfRangeError}});var AG=fi();Object.defineProperty(m,"EmptyError",{enumerable:!0,get:function(){return AG.EmptyError}});var CG=Bp();Object.defineProperty(m,"NotFoundError",{enumerable:!0,get:function(){return CG.NotFoundError}});var EG=Op();Object.defineProperty(m,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return EG.ObjectUnsubscribedError}});var qG=Hp();Object.defineProperty(m,"SequenceError",{enumerable:!0,get:function(){return qG.SequenceError}});var MG=Pa();Object.defineProperty(m,"TimeoutError",{enumerable:!0,get:function(){return MG.TimeoutError}});var LG=fp();Object.defineProperty(m,"UnsubscriptionError",{enumerable:!0,get:function(){return LG.UnsubscriptionError}});var xG=T_();Object.defineProperty(m,"bindCallback",{enumerable:!0,get:function(){return xG.bindCallback}});var jG=S_();Object.defineProperty(m,"bindNodeCallback",{enumerable:!0,get:function(){return jG.bindNodeCallback}});var IG=Wu();Object.defineProperty(m,"combineLatest",{enumerable:!0,get:function(){return IG.combineLatest}});var kG=Oa();Object.defineProperty(m,"concat",{enumerable:!0,get:function(){return kG.concat}});var FG=j_();Object.defineProperty(m,"connectable",{enumerable:!0,get:function(){return FG.connectable}});var DG=Ta();Object.defineProperty(m,"defer",{enumerable:!0,get:function(){return DG.defer}});var RG=er();Object.defineProperty(m,"empty",{enumerable:!0,get:function(){return RG.empty}});var zG=I_();Object.defineProperty(m,"forkJoin",{enumerable:!0,get:function(){return zG.forkJoin}});var NG=Wr();Object.defineProperty(m,"from",{enumerable:!0,get:function(){return NG.from}});var VG=F_();Object.defineProperty(m,"fromEvent",{enumerable:!0,get:function(){return VG.fromEvent}});var WG=R_();Object.defineProperty(m,"fromEventPattern",{enumerable:!0,get:function(){return WG.fromEventPattern}});var UG=N_();Object.defineProperty(m,"generate",{enumerable:!0,get:function(){return UG.generate}});var GG=V_();Object.defineProperty(m,"iif",{enumerable:!0,get:function(){return GG.iif}});var BG=Jp();Object.defineProperty(m,"interval",{enumerable:!0,get:function(){return BG.interval}});var HG=U_();Object.defineProperty(m,"merge",{enumerable:!0,get:function(){return HG.merge}});var $G=Zp();Object.defineProperty(m,"never",{enumerable:!0,get:function(){return $G.never}});var YG=Su();Object.defineProperty(m,"of",{enumerable:!0,get:function(){return YG.of}});var QG=ed();Object.defineProperty(m,"onErrorResumeNext",{enumerable:!0,get:function(){return QG.onErrorResumeNext}});var KG=B_();Object.defineProperty(m,"pairs",{enumerable:!0,get:function(){return KG.pairs}});var XG=Y_();Object.defineProperty(m,"partition",{enumerable:!0,get:function(){return XG.partition}});var JG=rd();Object.defineProperty(m,"race",{enumerable:!0,get:function(){return JG.race}});var ZG=X_();Object.defineProperty(m,"range",{enumerable:!0,get:function(){return ZG.range}});var eB=Up();Object.defineProperty(m,"throwError",{enumerable:!0,get:function(){return eB.throwError}});var tB=vi();Object.defineProperty(m,"timer",{enumerable:!0,get:function(){return tB.timer}});var rB=J_();Object.defineProperty(m,"using",{enumerable:!0,get:function(){return rB.using}});var iB=fc();Object.defineProperty(m,"zip",{enumerable:!0,get:function(){return iB.zip}});var nB=Wp();Object.defineProperty(m,"scheduled",{enumerable:!0,get:function(){return nB.scheduled}});var oB=er();Object.defineProperty(m,"EMPTY",{enumerable:!0,get:function(){return oB.EMPTY}});var aB=Zp();Object.defineProperty(m,"NEVER",{enumerable:!0,get:function(){return aB.NEVER}});sG(e0(),m);var sB=Ln();Object.defineProperty(m,"config",{enumerable:!0,get:function(){return sB.config}});var uB=pc();Object.defineProperty(m,"audit",{enumerable:!0,get:function(){return uB.audit}});var cB=id();Object.defineProperty(m,"auditTime",{enumerable:!0,get:function(){return cB.auditTime}});var lB=nd();Object.defineProperty(m,"buffer",{enumerable:!0,get:function(){return lB.buffer}});var fB=ad();Object.defineProperty(m,"bufferCount",{enumerable:!0,get:function(){return fB.bufferCount}});var hB=sd();Object.defineProperty(m,"bufferTime",{enumerable:!0,get:function(){return hB.bufferTime}});var pB=cd();Object.defineProperty(m,"bufferToggle",{enumerable:!0,get:function(){return pB.bufferToggle}});var dB=ld();Object.defineProperty(m,"bufferWhen",{enumerable:!0,get:function(){return dB.bufferWhen}});var vB=fd();Object.defineProperty(m,"catchError",{enumerable:!0,get:function(){return vB.catchError}});var mB=dd();Object.defineProperty(m,"combineAll",{enumerable:!0,get:function(){return mB.combineAll}});var yB=Tc();Object.defineProperty(m,"combineLatestAll",{enumerable:!0,get:function(){return yB.combineLatestAll}});var gB=md();Object.defineProperty(m,"combineLatestWith",{enumerable:!0,get:function(){return gB.combineLatestWith}});var bB=wa();Object.defineProperty(m,"concatAll",{enumerable:!0,get:function(){return bB.concatAll}});var _B=Cc();Object.defineProperty(m,"concatMap",{enumerable:!0,get:function(){return _B.concatMap}});var PB=yd();Object.defineProperty(m,"concatMapTo",{enumerable:!0,get:function(){return PB.concatMapTo}});var wB=bd();Object.defineProperty(m,"concatWith",{enumerable:!0,get:function(){return wB.concatWith}});var OB=Sa();Object.defineProperty(m,"connect",{enumerable:!0,get:function(){return OB.connect}});var TB=_d();Object.defineProperty(m,"count",{enumerable:!0,get:function(){return TB.count}});var SB=Pd();Object.defineProperty(m,"debounce",{enumerable:!0,get:function(){return SB.debounce}});var AB=wd();Object.defineProperty(m,"debounceTime",{enumerable:!0,get:function(){return AB.debounceTime}});var CB=fo();Object.defineProperty(m,"defaultIfEmpty",{enumerable:!0,get:function(){return CB.defaultIfEmpty}});var EB=Od();Object.defineProperty(m,"delay",{enumerable:!0,get:function(){return EB.delay}});var qB=Vc();Object.defineProperty(m,"delayWhen",{enumerable:!0,get:function(){return qB.delayWhen}});var MB=Td();Object.defineProperty(m,"dematerialize",{enumerable:!0,get:function(){return MB.dematerialize}});var LB=Sd();Object.defineProperty(m,"distinct",{enumerable:!0,get:function(){return LB.distinct}});var xB=Hc();Object.defineProperty(m,"distinctUntilChanged",{enumerable:!0,get:function(){return xB.distinctUntilChanged}});var jB=Ad();Object.defineProperty(m,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return jB.distinctUntilKeyChanged}});var IB=Cd();Object.defineProperty(m,"elementAt",{enumerable:!0,get:function(){return IB.elementAt}});var kB=Ed();Object.defineProperty(m,"endWith",{enumerable:!0,get:function(){return kB.endWith}});var FB=qd();Object.defineProperty(m,"every",{enumerable:!0,get:function(){return FB.every}});var DB=Md();Object.defineProperty(m,"exhaust",{enumerable:!0,get:function(){return DB.exhaust}});var RB=el();Object.defineProperty(m,"exhaustAll",{enumerable:!0,get:function(){return RB.exhaustAll}});var zB=Jc();Object.defineProperty(m,"exhaustMap",{enumerable:!0,get:function(){return zB.exhaustMap}});var NB=Ld();Object.defineProperty(m,"expand",{enumerable:!0,get:function(){return NB.expand}});var VB=Br();Object.defineProperty(m,"filter",{enumerable:!0,get:function(){return VB.filter}});var WB=xd();Object.defineProperty(m,"finalize",{enumerable:!0,get:function(){return WB.finalize}});var UB=nl();Object.defineProperty(m,"find",{enumerable:!0,get:function(){return UB.find}});var GB=jd();Object.defineProperty(m,"findIndex",{enumerable:!0,get:function(){return GB.findIndex}});var BB=Id();Object.defineProperty(m,"first",{enumerable:!0,get:function(){return BB.first}});var HB=kd();Object.defineProperty(m,"groupBy",{enumerable:!0,get:function(){return HB.groupBy}});var $B=Dc();Object.defineProperty(m,"ignoreElements",{enumerable:!0,get:function(){return $B.ignoreElements}});var YB=Fd();Object.defineProperty(m,"isEmpty",{enumerable:!0,get:function(){return YB.isEmpty}});var QB=Dd();Object.defineProperty(m,"last",{enumerable:!0,get:function(){return QB.last}});var KB=Gr();Object.defineProperty(m,"map",{enumerable:!0,get:function(){return KB.map}});var XB=zc();Object.defineProperty(m,"mapTo",{enumerable:!0,get:function(){return XB.mapTo}});var JB=zd();Object.defineProperty(m,"materialize",{enumerable:!0,get:function(){return JB.materialize}});var ZB=Nd();Object.defineProperty(m,"max",{enumerable:!0,get:function(){return ZB.max}});var eH=no();Object.defineProperty(m,"mergeAll",{enumerable:!0,get:function(){return eH.mergeAll}});var tH=Vd();Object.defineProperty(m,"flatMap",{enumerable:!0,get:function(){return tH.flatMap}});var rH=vr();Object.defineProperty(m,"mergeMap",{enumerable:!0,get:function(){return rH.mergeMap}});var iH=Wd();Object.defineProperty(m,"mergeMapTo",{enumerable:!0,get:function(){return iH.mergeMapTo}});var nH=Ud();Object.defineProperty(m,"mergeScan",{enumerable:!0,get:function(){return nH.mergeScan}});var oH=Bd();Object.defineProperty(m,"mergeWith",{enumerable:!0,get:function(){return oH.mergeWith}});var aH=Hd();Object.defineProperty(m,"min",{enumerable:!0,get:function(){return aH.min}});var sH=Aa();Object.defineProperty(m,"multicast",{enumerable:!0,get:function(){return sH.multicast}});var uH=to();Object.defineProperty(m,"observeOn",{enumerable:!0,get:function(){return uH.observeOn}});var cH=$d();Object.defineProperty(m,"onErrorResumeNextWith",{enumerable:!0,get:function(){return cH.onErrorResumeNextWith}});var lH=Yd();Object.defineProperty(m,"pairwise",{enumerable:!0,get:function(){return lH.pairwise}});var fH=Qd();Object.defineProperty(m,"pluck",{enumerable:!0,get:function(){return fH.pluck}});var hH=Kd();Object.defineProperty(m,"publish",{enumerable:!0,get:function(){return hH.publish}});var pH=Xd();Object.defineProperty(m,"publishBehavior",{enumerable:!0,get:function(){return pH.publishBehavior}});var dH=Jd();Object.defineProperty(m,"publishLast",{enumerable:!0,get:function(){return dH.publishLast}});var vH=Zd();Object.defineProperty(m,"publishReplay",{enumerable:!0,get:function(){return vH.publishReplay}});var mH=Tl();Object.defineProperty(m,"raceWith",{enumerable:!0,get:function(){return mH.raceWith}});var yH=an();Object.defineProperty(m,"reduce",{enumerable:!0,get:function(){return yH.reduce}});var gH=ev();Object.defineProperty(m,"repeat",{enumerable:!0,get:function(){return gH.repeat}});var bH=tv();Object.defineProperty(m,"repeatWhen",{enumerable:!0,get:function(){return bH.repeatWhen}});var _H=rv();Object.defineProperty(m,"retry",{enumerable:!0,get:function(){return _H.retry}});var PH=iv();Object.defineProperty(m,"retryWhen",{enumerable:!0,get:function(){return PH.retryWhen}});var wH=Ks();Object.defineProperty(m,"refCount",{enumerable:!0,get:function(){return wH.refCount}});var OH=Ml();Object.defineProperty(m,"sample",{enumerable:!0,get:function(){return OH.sample}});var TH=nv();Object.defineProperty(m,"sampleTime",{enumerable:!0,get:function(){return TH.sampleTime}});var SH=ov();Object.defineProperty(m,"scan",{enumerable:!0,get:function(){return SH.scan}});var AH=av();Object.defineProperty(m,"sequenceEqual",{enumerable:!0,get:function(){return AH.sequenceEqual}});var CH=Il();Object.defineProperty(m,"share",{enumerable:!0,get:function(){return CH.share}});var EH=uv();Object.defineProperty(m,"shareReplay",{enumerable:!0,get:function(){return EH.shareReplay}});var qH=cv();Object.defineProperty(m,"single",{enumerable:!0,get:function(){return qH.single}});var MH=lv();Object.defineProperty(m,"skip",{enumerable:!0,get:function(){return MH.skip}});var LH=fv();Object.defineProperty(m,"skipLast",{enumerable:!0,get:function(){return LH.skipLast}});var xH=hv();Object.defineProperty(m,"skipUntil",{enumerable:!0,get:function(){return xH.skipUntil}});var jH=pv();Object.defineProperty(m,"skipWhile",{enumerable:!0,get:function(){return jH.skipWhile}});var IH=dv();Object.defineProperty(m,"startWith",{enumerable:!0,get:function(){return IH.startWith}});var kH=ro();Object.defineProperty(m,"subscribeOn",{enumerable:!0,get:function(){return kH.subscribeOn}});var FH=vv();Object.defineProperty(m,"switchAll",{enumerable:!0,get:function(){return FH.switchAll}});var DH=yo();Object.defineProperty(m,"switchMap",{enumerable:!0,get:function(){return DH.switchMap}});var RH=mv();Object.defineProperty(m,"switchMapTo",{enumerable:!0,get:function(){return RH.switchMapTo}});var zH=yv();Object.defineProperty(m,"switchScan",{enumerable:!0,get:function(){return zH.switchScan}});var NH=ho();Object.defineProperty(m,"take",{enumerable:!0,get:function(){return NH.take}});var VH=cl();Object.defineProperty(m,"takeLast",{enumerable:!0,get:function(){return VH.takeLast}});var WH=gv();Object.defineProperty(m,"takeUntil",{enumerable:!0,get:function(){return WH.takeUntil}});var UH=bv();Object.defineProperty(m,"takeWhile",{enumerable:!0,get:function(){return UH.takeWhile}});var GH=_v();Object.defineProperty(m,"tap",{enumerable:!0,get:function(){return GH.tap}});var BH=Kl();Object.defineProperty(m,"throttle",{enumerable:!0,get:function(){return BH.throttle}});var HH=Pv();Object.defineProperty(m,"throttleTime",{enumerable:!0,get:function(){return HH.throttleTime}});var $H=po();Object.defineProperty(m,"throwIfEmpty",{enumerable:!0,get:function(){return $H.throwIfEmpty}});var YH=wv();Object.defineProperty(m,"timeInterval",{enumerable:!0,get:function(){return YH.timeInterval}});var QH=Pa();Object.defineProperty(m,"timeout",{enumerable:!0,get:function(){return QH.timeout}});var KH=Ov();Object.defineProperty(m,"timeoutWith",{enumerable:!0,get:function(){return KH.timeoutWith}});var XH=Tv();Object.defineProperty(m,"timestamp",{enumerable:!0,get:function(){return XH.timestamp}});var JH=Pc();Object.defineProperty(m,"toArray",{enumerable:!0,get:function(){return JH.toArray}});var ZH=Sv();Object.defineProperty(m,"window",{enumerable:!0,get:function(){return ZH.window}});var e3=Av();Object.defineProperty(m,"windowCount",{enumerable:!0,get:function(){return e3.windowCount}});var t3=Cv();Object.defineProperty(m,"windowTime",{enumerable:!0,get:function(){return t3.windowTime}});var r3=qv();Object.defineProperty(m,"windowToggle",{enumerable:!0,get:function(){return r3.windowToggle}});var i3=Mv();Object.defineProperty(m,"windowWhen",{enumerable:!0,get:function(){return i3.windowWhen}});var n3=Lv();Object.defineProperty(m,"withLatestFrom",{enumerable:!0,get:function(){return n3.withLatestFrom}});var o3=xv();Object.defineProperty(m,"zipAll",{enumerable:!0,get:function(){return o3.zipAll}});var a3=Iv();Object.defineProperty(m,"zipWith",{enumerable:!0,get:function(){return a3.zipWith}})});var sP=_(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.partition=void 0;var s3=td(),aP=Br();function u3(r,e){return function(t){return[aP.filter(r,e)(t),aP.filter(s3.not(r,e))(t)]}}af.partition=u3});var uP=_(xi=>{"use strict";var c3=xi&&xi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},l3=xi&&xi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(xi,"__esModule",{value:!0});xi.race=void 0;var f3=mi(),h3=Tl();function p3(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return h3.raceWith.apply(void 0,l3([],c3(f3.argsOrArgArray(r))))}xi.race=p3});var Po=_(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.mergeAll=w.merge=w.max=w.materialize=w.mapTo=w.map=w.last=w.isEmpty=w.ignoreElements=w.groupBy=w.first=w.findIndex=w.find=w.finalize=w.filter=w.expand=w.exhaustMap=w.exhaustAll=w.exhaust=w.every=w.endWith=w.elementAt=w.distinctUntilKeyChanged=w.distinctUntilChanged=w.distinct=w.dematerialize=w.delayWhen=w.delay=w.defaultIfEmpty=w.debounceTime=w.debounce=w.count=w.connect=w.concatWith=w.concatMapTo=w.concatMap=w.concatAll=w.concat=w.combineLatestWith=w.combineLatest=w.combineLatestAll=w.combineAll=w.catchError=w.bufferWhen=w.bufferToggle=w.bufferTime=w.bufferCount=w.buffer=w.auditTime=w.audit=void 0;w.timeInterval=w.throwIfEmpty=w.throttleTime=w.throttle=w.tap=w.takeWhile=w.takeUntil=w.takeLast=w.take=w.switchScan=w.switchMapTo=w.switchMap=w.switchAll=w.subscribeOn=w.startWith=w.skipWhile=w.skipUntil=w.skipLast=w.skip=w.single=w.shareReplay=w.share=w.sequenceEqual=w.scan=w.sampleTime=w.sample=w.refCount=w.retryWhen=w.retry=w.repeatWhen=w.repeat=w.reduce=w.raceWith=w.race=w.publishReplay=w.publishLast=w.publishBehavior=w.publish=w.pluck=w.partition=w.pairwise=w.onErrorResumeNext=w.observeOn=w.multicast=w.min=w.mergeWith=w.mergeScan=w.mergeMapTo=w.mergeMap=w.flatMap=void 0;w.zipWith=w.zipAll=w.zip=w.withLatestFrom=w.windowWhen=w.windowToggle=w.windowTime=w.windowCount=w.window=w.toArray=w.timestamp=w.timeoutWith=w.timeout=void 0;var d3=pc();Object.defineProperty(w,"audit",{enumerable:!0,get:function(){return d3.audit}});var v3=id();Object.defineProperty(w,"auditTime",{enumerable:!0,get:function(){return v3.auditTime}});var m3=nd();Object.defineProperty(w,"buffer",{enumerable:!0,get:function(){return m3.buffer}});var y3=ad();Object.defineProperty(w,"bufferCount",{enumerable:!0,get:function(){return y3.bufferCount}});var g3=sd();Object.defineProperty(w,"bufferTime",{enumerable:!0,get:function(){return g3.bufferTime}});var b3=cd();Object.defineProperty(w,"bufferToggle",{enumerable:!0,get:function(){return b3.bufferToggle}});var _3=ld();Object.defineProperty(w,"bufferWhen",{enumerable:!0,get:function(){return _3.bufferWhen}});var P3=fd();Object.defineProperty(w,"catchError",{enumerable:!0,get:function(){return P3.catchError}});var w3=dd();Object.defineProperty(w,"combineAll",{enumerable:!0,get:function(){return w3.combineAll}});var O3=Tc();Object.defineProperty(w,"combineLatestAll",{enumerable:!0,get:function(){return O3.combineLatestAll}});var T3=vd();Object.defineProperty(w,"combineLatest",{enumerable:!0,get:function(){return T3.combineLatest}});var S3=md();Object.defineProperty(w,"combineLatestWith",{enumerable:!0,get:function(){return S3.combineLatestWith}});var A3=gd();Object.defineProperty(w,"concat",{enumerable:!0,get:function(){return A3.concat}});var C3=wa();Object.defineProperty(w,"concatAll",{enumerable:!0,get:function(){return C3.concatAll}});var E3=Cc();Object.defineProperty(w,"concatMap",{enumerable:!0,get:function(){return E3.concatMap}});var q3=yd();Object.defineProperty(w,"concatMapTo",{enumerable:!0,get:function(){return q3.concatMapTo}});var M3=bd();Object.defineProperty(w,"concatWith",{enumerable:!0,get:function(){return M3.concatWith}});var L3=Sa();Object.defineProperty(w,"connect",{enumerable:!0,get:function(){return L3.connect}});var x3=_d();Object.defineProperty(w,"count",{enumerable:!0,get:function(){return x3.count}});var j3=Pd();Object.defineProperty(w,"debounce",{enumerable:!0,get:function(){return j3.debounce}});var I3=wd();Object.defineProperty(w,"debounceTime",{enumerable:!0,get:function(){return I3.debounceTime}});var k3=fo();Object.defineProperty(w,"defaultIfEmpty",{enumerable:!0,get:function(){return k3.defaultIfEmpty}});var F3=Od();Object.defineProperty(w,"delay",{enumerable:!0,get:function(){return F3.delay}});var D3=Vc();Object.defineProperty(w,"delayWhen",{enumerable:!0,get:function(){return D3.delayWhen}});var R3=Td();Object.defineProperty(w,"dematerialize",{enumerable:!0,get:function(){return R3.dematerialize}});var z3=Sd();Object.defineProperty(w,"distinct",{enumerable:!0,get:function(){return z3.distinct}});var N3=Hc();Object.defineProperty(w,"distinctUntilChanged",{enumerable:!0,get:function(){return N3.distinctUntilChanged}});var V3=Ad();Object.defineProperty(w,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return V3.distinctUntilKeyChanged}});var W3=Cd();Object.defineProperty(w,"elementAt",{enumerable:!0,get:function(){return W3.elementAt}});var U3=Ed();Object.defineProperty(w,"endWith",{enumerable:!0,get:function(){return U3.endWith}});var G3=qd();Object.defineProperty(w,"every",{enumerable:!0,get:function(){return G3.every}});var B3=Md();Object.defineProperty(w,"exhaust",{enumerable:!0,get:function(){return B3.exhaust}});var H3=el();Object.defineProperty(w,"exhaustAll",{enumerable:!0,get:function(){return H3.exhaustAll}});var $3=Jc();Object.defineProperty(w,"exhaustMap",{enumerable:!0,get:function(){return $3.exhaustMap}});var Y3=Ld();Object.defineProperty(w,"expand",{enumerable:!0,get:function(){return Y3.expand}});var Q3=Br();Object.defineProperty(w,"filter",{enumerable:!0,get:function(){return Q3.filter}});var K3=xd();Object.defineProperty(w,"finalize",{enumerable:!0,get:function(){return K3.finalize}});var X3=nl();Object.defineProperty(w,"find",{enumerable:!0,get:function(){return X3.find}});var J3=jd();Object.defineProperty(w,"findIndex",{enumerable:!0,get:function(){return J3.findIndex}});var Z3=Id();Object.defineProperty(w,"first",{enumerable:!0,get:function(){return Z3.first}});var e$=kd();Object.defineProperty(w,"groupBy",{enumerable:!0,get:function(){return e$.groupBy}});var t$=Dc();Object.defineProperty(w,"ignoreElements",{enumerable:!0,get:function(){return t$.ignoreElements}});var r$=Fd();Object.defineProperty(w,"isEmpty",{enumerable:!0,get:function(){return r$.isEmpty}});var i$=Dd();Object.defineProperty(w,"last",{enumerable:!0,get:function(){return i$.last}});var n$=Gr();Object.defineProperty(w,"map",{enumerable:!0,get:function(){return n$.map}});var o$=zc();Object.defineProperty(w,"mapTo",{enumerable:!0,get:function(){return o$.mapTo}});var a$=zd();Object.defineProperty(w,"materialize",{enumerable:!0,get:function(){return a$.materialize}});var s$=Nd();Object.defineProperty(w,"max",{enumerable:!0,get:function(){return s$.max}});var u$=Gd();Object.defineProperty(w,"merge",{enumerable:!0,get:function(){return u$.merge}});var c$=no();Object.defineProperty(w,"mergeAll",{enumerable:!0,get:function(){return c$.mergeAll}});var l$=Vd();Object.defineProperty(w,"flatMap",{enumerable:!0,get:function(){return l$.flatMap}});var f$=vr();Object.defineProperty(w,"mergeMap",{enumerable:!0,get:function(){return f$.mergeMap}});var h$=Wd();Object.defineProperty(w,"mergeMapTo",{enumerable:!0,get:function(){return h$.mergeMapTo}});var p$=Ud();Object.defineProperty(w,"mergeScan",{enumerable:!0,get:function(){return p$.mergeScan}});var d$=Bd();Object.defineProperty(w,"mergeWith",{enumerable:!0,get:function(){return d$.mergeWith}});var v$=Hd();Object.defineProperty(w,"min",{enumerable:!0,get:function(){return v$.min}});var m$=Aa();Object.defineProperty(w,"multicast",{enumerable:!0,get:function(){return m$.multicast}});var y$=to();Object.defineProperty(w,"observeOn",{enumerable:!0,get:function(){return y$.observeOn}});var g$=$d();Object.defineProperty(w,"onErrorResumeNext",{enumerable:!0,get:function(){return g$.onErrorResumeNext}});var b$=Yd();Object.defineProperty(w,"pairwise",{enumerable:!0,get:function(){return b$.pairwise}});var _$=sP();Object.defineProperty(w,"partition",{enumerable:!0,get:function(){return _$.partition}});var P$=Qd();Object.defineProperty(w,"pluck",{enumerable:!0,get:function(){return P$.pluck}});var w$=Kd();Object.defineProperty(w,"publish",{enumerable:!0,get:function(){return w$.publish}});var O$=Xd();Object.defineProperty(w,"publishBehavior",{enumerable:!0,get:function(){return O$.publishBehavior}});var T$=Jd();Object.defineProperty(w,"publishLast",{enumerable:!0,get:function(){return T$.publishLast}});var S$=Zd();Object.defineProperty(w,"publishReplay",{enumerable:!0,get:function(){return S$.publishReplay}});var A$=uP();Object.defineProperty(w,"race",{enumerable:!0,get:function(){return A$.race}});var C$=Tl();Object.defineProperty(w,"raceWith",{enumerable:!0,get:function(){return C$.raceWith}});var E$=an();Object.defineProperty(w,"reduce",{enumerable:!0,get:function(){return E$.reduce}});var q$=ev();Object.defineProperty(w,"repeat",{enumerable:!0,get:function(){return q$.repeat}});var M$=tv();Object.defineProperty(w,"repeatWhen",{enumerable:!0,get:function(){return M$.repeatWhen}});var L$=rv();Object.defineProperty(w,"retry",{enumerable:!0,get:function(){return L$.retry}});var x$=iv();Object.defineProperty(w,"retryWhen",{enumerable:!0,get:function(){return x$.retryWhen}});var j$=Ks();Object.defineProperty(w,"refCount",{enumerable:!0,get:function(){return j$.refCount}});var I$=Ml();Object.defineProperty(w,"sample",{enumerable:!0,get:function(){return I$.sample}});var k$=nv();Object.defineProperty(w,"sampleTime",{enumerable:!0,get:function(){return k$.sampleTime}});var F$=ov();Object.defineProperty(w,"scan",{enumerable:!0,get:function(){return F$.scan}});var D$=av();Object.defineProperty(w,"sequenceEqual",{enumerable:!0,get:function(){return D$.sequenceEqual}});var R$=Il();Object.defineProperty(w,"share",{enumerable:!0,get:function(){return R$.share}});var z$=uv();Object.defineProperty(w,"shareReplay",{enumerable:!0,get:function(){return z$.shareReplay}});var N$=cv();Object.defineProperty(w,"single",{enumerable:!0,get:function(){return N$.single}});var V$=lv();Object.defineProperty(w,"skip",{enumerable:!0,get:function(){return V$.skip}});var W$=fv();Object.defineProperty(w,"skipLast",{enumerable:!0,get:function(){return W$.skipLast}});var U$=hv();Object.defineProperty(w,"skipUntil",{enumerable:!0,get:function(){return U$.skipUntil}});var G$=pv();Object.defineProperty(w,"skipWhile",{enumerable:!0,get:function(){return G$.skipWhile}});var B$=dv();Object.defineProperty(w,"startWith",{enumerable:!0,get:function(){return B$.startWith}});var H$=ro();Object.defineProperty(w,"subscribeOn",{enumerable:!0,get:function(){return H$.subscribeOn}});var $$=vv();Object.defineProperty(w,"switchAll",{enumerable:!0,get:function(){return $$.switchAll}});var Y$=yo();Object.defineProperty(w,"switchMap",{enumerable:!0,get:function(){return Y$.switchMap}});var Q$=mv();Object.defineProperty(w,"switchMapTo",{enumerable:!0,get:function(){return Q$.switchMapTo}});var K$=yv();Object.defineProperty(w,"switchScan",{enumerable:!0,get:function(){return K$.switchScan}});var X$=ho();Object.defineProperty(w,"take",{enumerable:!0,get:function(){return X$.take}});var J$=cl();Object.defineProperty(w,"takeLast",{enumerable:!0,get:function(){return J$.takeLast}});var Z$=gv();Object.defineProperty(w,"takeUntil",{enumerable:!0,get:function(){return Z$.takeUntil}});var e6=bv();Object.defineProperty(w,"takeWhile",{enumerable:!0,get:function(){return e6.takeWhile}});var t6=_v();Object.defineProperty(w,"tap",{enumerable:!0,get:function(){return t6.tap}});var r6=Kl();Object.defineProperty(w,"throttle",{enumerable:!0,get:function(){return r6.throttle}});var i6=Pv();Object.defineProperty(w,"throttleTime",{enumerable:!0,get:function(){return i6.throttleTime}});var n6=po();Object.defineProperty(w,"throwIfEmpty",{enumerable:!0,get:function(){return n6.throwIfEmpty}});var o6=wv();Object.defineProperty(w,"timeInterval",{enumerable:!0,get:function(){return o6.timeInterval}});var a6=Pa();Object.defineProperty(w,"timeout",{enumerable:!0,get:function(){return a6.timeout}});var s6=Ov();Object.defineProperty(w,"timeoutWith",{enumerable:!0,get:function(){return s6.timeoutWith}});var u6=Tv();Object.defineProperty(w,"timestamp",{enumerable:!0,get:function(){return u6.timestamp}});var c6=Pc();Object.defineProperty(w,"toArray",{enumerable:!0,get:function(){return c6.toArray}});var l6=Sv();Object.defineProperty(w,"window",{enumerable:!0,get:function(){return l6.window}});var f6=Av();Object.defineProperty(w,"windowCount",{enumerable:!0,get:function(){return f6.windowCount}});var h6=Cv();Object.defineProperty(w,"windowTime",{enumerable:!0,get:function(){return h6.windowTime}});var p6=qv();Object.defineProperty(w,"windowToggle",{enumerable:!0,get:function(){return p6.windowToggle}});var d6=Mv();Object.defineProperty(w,"windowWhen",{enumerable:!0,get:function(){return d6.windowWhen}});var v6=Lv();Object.defineProperty(w,"withLatestFrom",{enumerable:!0,get:function(){return v6.withLatestFrom}});var m6=jv();Object.defineProperty(w,"zip",{enumerable:!0,get:function(){return m6.zip}});var y6=xv();Object.defineProperty(w,"zipAll",{enumerable:!0,get:function(){return y6.zipAll}});var g6=Iv();Object.defineProperty(w,"zipWith",{enumerable:!0,get:function(){return g6.zipWith}})});var La=_(Ma=>{var b6=function(r,e){return r<e?-1:r>e?1:0},_6=function(r,e){return r<e?1:r>e?-1:0};function P6(r){return function(e,t){return r(t,e)}}function w6(r){return r===2?function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:e[1]<t[1]?-1:e[1]>t[1]?1:0}:function(e,t){for(var i=0;i<r;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i++}return 0}}Ma.DEFAULT_COMPARATOR=b6;Ma.DEFAULT_REVERSE_COMPARATOR=_6;Ma.reverseComparator=P6;Ma.createTupleComparator=w6});var cP=_(Fv=>{Fv.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Fv.SYMBOL_SUPPORT=typeof Symbol<"u"});var _e=_((J7,fP)=>{var lP=cP(),O6=lP.ARRAY_BUFFER_SUPPORT,T6=lP.SYMBOL_SUPPORT;fP.exports=function(e,t){var i,n,s,u,l;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||O6&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,u=e.length;s<u;s++)t(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(t);return}if(T6&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;l=i.next(),l.done!==!0;)t(l.value,s),s++;return}for(n in e)e.hasOwnProperty(n)&&t(e[n],n)}});var hf=_((Z7,gP)=>{var hP=La(),pP=_e(),dP=hP.DEFAULT_COMPARATOR,S6=hP.reverseComparator;function ft(r){if(this.clear(),this.comparator=r||dP,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.")}ft.prototype.clear=function(){this.root=null,this.min=null,this.size=0};function A6(r){return{item:r,degree:0}}function vP(r,e){r.root?(e.right=r.root.right,e.left=r.root,r.root.right.left=e,r.root.right=e):r.root=e}ft.prototype.push=function(r){var e=A6(r);return e.left=e,e.right=e,vP(this,e),(!this.min||this.comparator(e.item,this.min.item)<=0)&&(this.min=e),++this.size};ft.prototype.peek=function(){return this.min?this.min.item:void 0};function mP(r){for(var e=[],t=r,i=!1;!(t===r&&i);)t===r&&(i=!0),e.push(t),t=t.right;return e}function yP(r,e){r.root===e&&(r.root=e.right),e.left.right=e.right,e.right.left=e.left}function C6(r,e){r.child?(e.right=r.child.right,e.left=r.child,r.child.right.left=e,r.child.right=e):r.child=e}function E6(r,e,t){yP(r,e),e.left=e,e.right=e,C6(t,e),t.degree++,e.parent=t}function q6(r){var e=new Array(r.size),t=mP(r.root),i,n,s,u,l,h;for(i=0,n=t.length;i<n;i++){for(s=t[i],l=s.degree;e[l];)u=e[l],r.comparator(s.item,u.item)>0&&(h=s,s=u,u=h),E6(r,u,s),e[l]=null,l++;e[l]=s}for(i=0;i<r.size;i++)e[i]&&r.comparator(e[i].item,r.min.item)<=0&&(r.min=e[i])}ft.prototype.pop=function(){if(this.size){var r=this.min;if(r.child){var e=mP(r.child),t,i,n;for(i=0,n=e.length;i<n;i++)t=e[i],vP(this,t),delete t.parent}return yP(this,r),r===r.right?(this.min=null,this.root=null):(this.min=r.right,q6(this)),this.size--,r.item}};ft.prototype.inspect=function(){var r={size:this.size};return this.min&&"item"in this.min&&(r.top=this.min.item),Object.defineProperty(r,"constructor",{value:ft,enumerable:!1}),r};typeof Symbol<"u"&&(ft.prototype[Symbol.for("nodejs.util.inspect.custom")]=ft.prototype.inspect);function ff(r){if(this.clear(),this.comparator=r||dP,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.");this.comparator=S6(this.comparator)}ff.prototype=ft.prototype;ft.from=function(r,e){var t=new ft(e);return pP(r,function(i){t.push(i)}),t};ff.from=function(r,e){var t=new ff(e);return pP(r,function(i){t.push(i)}),t};ft.MinFibonacciHeap=ft;ft.MaxFibonacciHeap=ff;gP.exports=ft});var ht=_(gr=>{var M6=Math.pow(2,8)-1,L6=Math.pow(2,16)-1,x6=Math.pow(2,32)-1,j6=Math.pow(2,7)-1,I6=Math.pow(2,15)-1,k6=Math.pow(2,31)-1;gr.getPointerArray=function(r){var e=r-1;if(e<=M6)return Uint8Array;if(e<=L6)return Uint16Array;if(e<=x6)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};gr.getSignedPointerArray=function(r){var e=r-1;return e<=j6?Int8Array:e<=I6?Int16Array:e<=k6?Int32Array:Float64Array};gr.getNumberType=function(r){return r===(r|0)?Math.sign(r)===-1?r<=127&&r>=-128?Int8Array:r<=32767&&r>=-32768?Int16Array:Int32Array:r<=255?Uint8Array:r<=65535?Uint16Array:Uint32Array:Float64Array};var F6={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};gr.getMinimalRepresentation=function(r,e){var t=null,i=0,n,s,u,l,h;for(l=0,h=r.length;l<h;l++)u=e?e(r[l]):r[l],s=gr.getNumberType(u),n=F6[s.name],n>i&&(i=n,t=s);return t};gr.isTypedArray=function(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(r)};gr.concat=function(){var r=0,e,t,i;for(e=0,i=arguments.length;e<i;e++)r+=arguments[e].length;var n=new arguments[0].constructor(r);for(e=0,t=0;e<i;e++)n.set(arguments[e],t),t+=arguments[e].length;return n};gr.indices=function(r){for(var e=gr.getPointerArray(r),t=new e(r),i=0;i<r;i++)t[i]=i;return t}});var Ot=_(ja=>{var PP=_e(),wP=ht();function D6(r){return Array.isArray(r)||wP.isTypedArray(r)}function Dv(r){if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size}function R6(r){var e=Dv(r),t=typeof e=="number"?new Array(e):[],i=0;return PP(r,function(n){t[i++]=n}),t}function z6(r){var e=Dv(r),t=typeof e=="number"?wP.getPointerArray(e):Array,i=typeof e=="number"?new Array(e):[],n=typeof e=="number"?new t(e):[],s=0;return PP(r,function(u){i[s]=u,n[s]=s++}),[i,n]}ja.isArrayLike=D6;ja.guessLength=Dv;ja.toArray=R6;ja.toArrayWithIndices=z6});var _f=_((OX,AP)=>{var yf=_e(),OP=La(),br=Ot(),bf=OP.DEFAULT_COMPARATOR,Rv=OP.reverseComparator;function zv(r,e,t,i){for(var n=e[i],s,u;i>t;){if(s=i-1>>1,u=e[s],r(n,u)<0){e[i]=u,i=s;continue}break}e[i]=n}function Ia(r,e,t){for(var i=e.length,n=t,s=e[t],u=2*t+1,l;u<i;)l=u+1,l<i&&r(e[u],e[l])>=0&&(u=l),e[t]=e[u],t=u,u=2*t+1;e[t]=s,zv(r,e,n,t)}function TP(r,e,t){e.push(t),zv(r,e,0,e.length-1)}function Nv(r,e){var t=e.pop();if(e.length!==0){var i=e[0];return e[0]=t,Ia(r,e,0),i}return t}function To(r,e,t){if(e.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var i=e[0];return e[0]=t,Ia(r,e,0),i}function SP(r,e,t){var i;return e.length!==0&&r(e[0],t)<0&&(i=e[0],e[0]=t,t=i,Ia(r,e,0)),t}function ln(r,e){for(var t=e.length,i=t>>1,n=i;--n>=0;)Ia(r,e,n)}function Vv(r,e){for(var t=e.length,i=0,n=new Array(t);i<t;)n[i++]=Nv(r,e);return n}function N6(r,e,t){arguments.length===2&&(t=e,e=r,r=bf);var i=Rv(r),n,s,u,l=1/0,h;if(e===1){if(br.isArrayLike(t)){for(n=0,s=t.length;n<s;n++)u=t[n],(l===1/0||r(u,l)<0)&&(l=u);return h=new t.constructor(1),h[0]=l,h}return yf(t,function(v){(l===1/0||r(v,l)<0)&&(l=v)}),[l]}if(br.isArrayLike(t)){if(e>=t.length)return t.slice().sort(r);for(h=t.slice(0,e),ln(i,h),n=e,s=t.length;n<s;n++)i(t[n],h[0])>0&&To(i,h,t[n]);return h.sort(r)}var p=br.guessLength(t);return p!==null&&p<e&&(e=p),h=new Array(e),n=0,yf(t,function(v){n<e?h[n]=v:(n===e&&ln(i,h),i(v,h[0])>0&&To(i,h,v)),n++}),h.length>n&&(h.length=n),h.sort(r)}function V6(r,e,t){arguments.length===2&&(t=e,e=r,r=bf);var i=Rv(r),n,s,u,l=-1/0,h;if(e===1){if(br.isArrayLike(t)){for(n=0,s=t.length;n<s;n++)u=t[n],(l===-1/0||r(u,l)>0)&&(l=u);return h=new t.constructor(1),h[0]=l,h}return yf(t,function(v){(l===-1/0||r(v,l)>0)&&(l=v)}),[l]}if(br.isArrayLike(t)){if(e>=t.length)return t.slice().sort(i);for(h=t.slice(0,e),ln(r,h),n=e,s=t.length;n<s;n++)r(t[n],h[0])>0&&To(r,h,t[n]);return h.sort(i)}var p=br.guessLength(t);return p!==null&&p<e&&(e=p),h=new Array(e),n=0,yf(t,function(v){n<e?h[n]=v:(n===e&&ln(r,h),r(v,h[0])>0&&To(r,h,v)),n++}),h.length>n&&(h.length=n),h.sort(i)}function fe(r){if(this.clear(),this.comparator=r||bf,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}fe.prototype.clear=function(){this.items=[],this.size=0};fe.prototype.push=function(r){return TP(this.comparator,this.items,r),++this.size};fe.prototype.peek=function(){return this.items[0]};fe.prototype.pop=function(){return this.size!==0&&this.size--,Nv(this.comparator,this.items)};fe.prototype.replace=function(r){return To(this.comparator,this.items,r)};fe.prototype.pushpop=function(r){return SP(this.comparator,this.items,r)};fe.prototype.consume=function(){return this.size=0,Vv(this.comparator,this.items)};fe.prototype.toArray=function(){return Vv(this.comparator,this.items.slice())};fe.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:fe,enumerable:!1}),r};typeof Symbol<"u"&&(fe.prototype[Symbol.for("nodejs.util.inspect.custom")]=fe.prototype.inspect);function gf(r){if(this.clear(),this.comparator=r||bf,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=Rv(this.comparator)}gf.prototype=fe.prototype;fe.from=function(r,e){var t=new fe(e),i;return br.isArrayLike(r)?i=r.slice():i=br.toArray(r),ln(t.comparator,i),t.items=i,t.size=i.length,t};gf.from=function(r,e){var t=new gf(e),i;return br.isArrayLike(r)?i=r.slice():i=br.toArray(r),ln(t.comparator,i),t.items=i,t.size=i.length,t};fe.siftUp=Ia;fe.siftDown=zv;fe.push=TP;fe.pop=Nv;fe.replace=To;fe.pushpop=SP;fe.heapify=ln;fe.consume=Vv;fe.nsmallest=N6;fe.nlargest=V6;fe.MinHeap=fe;fe.MaxHeap=gf;AP.exports=fe});var LP=_((TX,MP)=>{var CP="";function EP(r,e,t){for(var i=e.length,n=[],s=i,u=-1,l,h=0,p;s--;)u=Math.max(r[e[s]+t],u);for(p=u>>24&&32||u>>16&&24||u>>8&&16||8;h<p;h+=4){for(s=16;s--;)n[s]=[];for(s=i;s--;)n[r[e[s]+t]>>h&15].push(e[s]);for(l=0;l<16;l++)for(u=n[l].length;u--;)e[++s]=n[l][u]}}function W6(r,e,t,i){return r[t]-r[i]||(t%3===2?r[t+1]-r[i+1]||e[t+2]-e[i+2]:e[t+1]-e[i+1])}function Wv(r,e){var t=[],i=[],n=2*e/3|0,s=e-n,u=n+1>>1,l=n,h=0,p,v=[],b=[];if(e===1)return[0];for(;l--;)t[l]=(l*3>>1)+1;for(l=3;l--;)EP(r,t,l);for(h=i[(t[0]/3|0)+(t[0]%3===1?0:u)]=1,l=1;l<n;l++)(r[t[l]]!==r[t[l-1]]||r[t[l]+1]!==r[t[l-1]+1]||r[t[l]+2]!==r[t[l-1]+2])&&h++,i[(t[l]/3|0)+(t[l]%3===1?0:u)]=h;if(h<n)for(i=Wv(i,n),l=n;l--;)t[l]=i[l]<u?i[l]*3+1:(i[l]-u)*3+2;for(l=n;l--;)v[t[l]]=l;for(v[e]=-1,v[e+1]=-2,i=e%3===1?[e-1]:[],l=0;l<n;l++)t[l]%3===1&&i.push(t[l]-1);for(EP(r,i,0),l=0,h=0,p=0;l<n&&h<s;)b[p++]=W6(r,v,t[l],i[h])<0?t[l++]:i[h++];for(;l<n;)b[p++]=t[l++];for(;h<s;)b[p++]=i[h++];return b}function qP(r){var e=r.length,t=e%3,i=new Array(e+t),n,s;if(typeof r!="string"){var u=Object.create(null);for(s=0;s<e;s++)u[r[s]]||(u[r[s]]=!0);var l=Object.create(null),h=Object.keys(u).sort();for(s=0,n=h.length;s<n;s++)l[h[s]]=s+1;for(s=0;s<e;s++)i[s]=l[r[s]]}else for(s=0;s<e;s++)i[s]=r.charCodeAt(s);for(s=e;s<e+t;s++)i[s]=0;return i}function ji(r){this.hasArbitrarySequence=typeof r!="string",this.string=r,this.length=r.length,this.array=Wv(qP(r),this.length)}ji.prototype.toString=function(){return this.array.join(",")};ji.prototype.toJSON=function(){return this.array};ji.prototype.inspect=function(){for(var r=new Array(this.length),e=0;e<this.length;e++)r[e]=this.string.slice(this.array[e]);return Object.defineProperty(r,"constructor",{value:ji,enumerable:!1}),r};typeof Symbol<"u"&&(ji.prototype[Symbol.for("nodejs.util.inspect.custom")]=ji.prototype.inspect);function Ii(r){if(this.hasArbitrarySequence=typeof r[0]!="string",this.size=r.length,this.hasArbitrarySequence){this.text=[];for(var e=0,t=this.size;e<t;e++)this.text.push.apply(this.text,r[e]),e<t-1&&this.text.push(CP)}else this.text=r.join(CP);this.firstLength=r[0].length,this.length=this.text.length,this.array=Wv(qP(this.text),this.length)}Ii.prototype.longestCommonSubsequence=function(){var r=this.hasArbitrarySequence?[]:"",e,t,i,n,s;for(t=1;t<this.length;t++)if(n=this.array[t],s=this.array[t-1],!(n<this.firstLength&&s<this.firstLength)&&!(n>this.firstLength&&s>this.firstLength)){for(e=Math.min(this.length-n,this.length-s),i=0;i<e;i++)if(this.text[n+i]!==this.text[s+i]){e=i;break}e>r.length&&(r=this.text.slice(n,n+e))}return r};Ii.prototype.toString=function(){return this.array.join(",")};Ii.prototype.toJSON=function(){return this.array};Ii.prototype.inspect=function(){for(var r=new Array(this.length),e=0;e<this.length;e++)r[e]=this.text.slice(this.array[e]);return Object.defineProperty(r,"constructor",{value:Ii,enumerable:!1}),r};typeof Symbol<"u"&&(Ii.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ii.prototype.inspect);ji.GeneralizedSuffixArray=Ii;MP.exports=ji});var FP=_((SX,kP)=>{var U6=_e();function tr(r){this.size=0,this.items=new Map,this.inverse=r}function xt(){this.size=0,this.items=new Map,this.inverse=new tr(this)}function xP(){this.size=0,this.items.clear(),this.inverse.items.clear()}xt.prototype.clear=xP;tr.prototype.clear=xP;function jP(r,e){if(this.items.has(r)){var t=this.items.get(r);if(t===e)return this;this.inverse.items.delete(t)}if(this.inverse.items.has(e)){var i=this.inverse.items.get(e);if(i===r)return this;this.items.delete(i)}return this.items.set(r,e),this.inverse.items.set(e,r),this.size=this.items.size,this.inverse.size=this.inverse.items.size,this}xt.prototype.set=jP;tr.prototype.set=jP;function IP(r){if(this.items.has(r)){var e=this.items.get(r);return this.items.delete(r),this.inverse.items.delete(e),this.size=this.items.size,this.inverse.size=this.inverse.items.size,!0}return!1}xt.prototype.delete=IP;tr.prototype.delete=IP;var G6=["has","get","forEach","keys","values","entries"];G6.forEach(function(r){xt.prototype[r]=tr.prototype[r]=function(){return Map.prototype[r].apply(this.items,arguments)}});typeof Symbol<"u"&&(xt.prototype[Symbol.iterator]=xt.prototype.entries,tr.prototype[Symbol.iterator]=tr.prototype.entries);xt.prototype.inspect=function(){var r={left:this.items,right:this.inverse.items};return Object.defineProperty(r,"constructor",{value:xt,enumerable:!1}),r};typeof Symbol<"u"&&(xt.prototype[Symbol.for("nodejs.util.inspect.custom")]=xt.prototype.inspect);tr.prototype.inspect=function(){var r={left:this.inverse.items,right:this.items};return Object.defineProperty(r,"constructor",{value:tr,enumerable:!1}),r};typeof Symbol<"u"&&(tr.prototype[Symbol.for("nodejs.util.inspect.custom")]=tr.prototype.inspect);xt.from=function(r){var e=new xt;return U6(r,function(t,i){e.set(i,t)}),e};kP.exports=xt});var Ge=_((AX,DP)=>{function _r(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol<"u"&&(_r.prototype[Symbol.iterator]=function(){return this});_r.of=function(){var r=arguments,e=r.length,t=0;return new _r(function(){return t>=e?{done:!0}:{done:!1,value:r[t++]}})};_r.empty=function(){var r=new _r(function(){return{done:!0}});return r};_r.fromSequence=function(r){var e=0,t=r.length;return new _r(function(){return e>=t?{done:!0}:{done:!1,value:r[e++]}})};_r.is=function(r){return r instanceof _r?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};DP.exports=_r});var Gv=_(rr=>{function zP(r){return r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r&~(r>>1)}rr.msb32=zP;function Uv(r){return r|=r>>1,r|=r>>2,r|=r>>4,r&~(r>>1)}rr.msb8=Uv;rr.test=function(r,e){return r>>e&1};rr.criticalBit8=function(r,e){return Uv(r^e)};rr.criticalBit8Mask=function(r,e){return~Uv(r^e)>>>0&255};rr.testCriticalBit8=function(r,e){return 1+(r|e)>>8};rr.criticalBit32Mask=function(r,e){return~zP(r^e)>>>0&4294967295};rr.popcount=function(r){return r-=r>>1&1431655765,r=(r&858993459)+(r>>2&858993459),r=r+(r>>4)&252645135,r+=r>>8,r+=r>>16,r&127};var So=new Uint8Array(Math.pow(2,8));for(ka=0,RP=So.length;ka<RP;ka++)So[ka]=rr.popcount(ka);var ka,RP;rr.table8Popcount=function(r){return So[r&255]+So[r>>8&255]+So[r>>16&255]+So[r>>24&255]}});var UP=_((EX,WP)=>{var VP=Ge(),NP=Gv();function Re(r){this.length=r,this.clear()}Re.prototype.clear=function(){this.size=0,this.array=new Uint32Array(Math.ceil(this.length/32))};Re.prototype.set=function(r,e){var t=r>>5,i=r&31,n=this.array[t],s;return e===0||e===!1?s=this.array[t]&=~(1<<i):s=this.array[t]|=1<<i,s=s>>>0,s>n?this.size++:s<n&&this.size--,this};Re.prototype.reset=function(r){var e=r>>5,t=r&31,i=this.array[e],n;return n=this.array[e]&=~(1<<t),n<i&&this.size--,this};Re.prototype.flip=function(r){var e=r>>5,t=r&31,i=this.array[e],n=this.array[e]^=1<<t;return n=n>>>0,n>i?this.size++:n<i&&this.size--,this};Re.prototype.get=function(r){var e=r>>5,t=r&31;return this.array[e]>>t&1};Re.prototype.test=function(r){return!!this.get(r)};Re.prototype.rank=function(r){if(this.size===0)return 0;for(var e=r>>5,t=r&31,i=0,n=0;n<e;n++)i+=NP.table8Popcount(this.array[n]);var s=this.array[e]&(1<<t)-1;return i+=NP.table8Popcount(s),i};Re.prototype.select=function(r){if(this.size===0||r>=this.length)return-1;for(var e,t=32,i=0,n=0,s=0,u=this.array.length;s<u;s++)if(e=this.array[s],e!==0){s===u-1&&(t=this.length%32||32);for(var l=0;l<t;l++,i++)if(n+=e>>l&1,n===r)return i}};Re.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.length,i,n,s=32,u=0,l=this.array.length;u<l;u++){i=this.array[u],u===l-1&&(s=t%32||32);for(var h=0;h<s;h++)n=i>>h&1,r.call(e,n,u*32+h)}};Re.prototype.values=function(){var r=this.length,e=!1,t,i,n=this.array,s=n.length,u=0,l=-1,h=32;return new VP(function p(){if(!e){if(u>=s)return{done:!0};u===s-1&&(h=r%32||32),t=n[u++],e=!0,l=-1}return l++,l>=h?(e=!1,p()):(i=t>>l&1,{value:i})})};Re.prototype.entries=function(){var r=this.length,e=!1,t,i,n=this.array,s,u=n.length,l=0,h=-1,p=32;return new VP(function v(){if(!e){if(l>=u)return{done:!0};l===u-1&&(p=r%32||32),t=n[l++],e=!0,h=-1}return h++,s=~-l*32+h,h>=p?(e=!1,v()):(i=t>>h&1,{value:[s,i]})})};typeof Symbol<"u"&&(Re.prototype[Symbol.iterator]=Re.prototype.values);Re.prototype.inspect=function(){var r=new Uint8Array(this.length);return this.forEach(function(e,t){r[t]=e}),Object.defineProperty(r,"constructor",{value:Re,enumerable:!1}),r};typeof Symbol<"u"&&(Re.prototype[Symbol.for("nodejs.util.inspect.custom")]=Re.prototype.inspect);Re.prototype.toJSON=function(){return Array.from(this.array)};WP.exports=Re});var $P=_((qX,HP)=>{var BP=Ge(),GP=Gv(),B6=function(r){return Math.max(1,Math.ceil(r*1.5))};function H6(r){return new Uint32Array(Math.ceil(r/32))}function Pe(r){var e=r||0,t=B6;typeof r=="object"&&(e=r.initialLength||r.initialCapacity||0,t=r.policy||t),this.size=0,this.length=e,this.capacity=Math.ceil(this.length/32)*32,this.policy=t,this.array=H6(this.capacity)}Pe.prototype.set=function(r,e){if(this.length<r)throw new Error("BitVector.set: index out of bounds.");var t=r>>5,i=r&31,n=this.array[t],s;return e===0||e===!1?s=this.array[t]&=~(1<<i):s=this.array[t]|=1<<i,s=s>>>0,s>n?this.size++:s<n&&this.size--,this};Pe.prototype.reset=function(r){var e=r>>5,t=r&31,i=this.array[e],n;return n=this.array[e]&=~(1<<t),n<i&&this.size--,this};Pe.prototype.flip=function(r){var e=r>>5,t=r&31,i=this.array[e],n=this.array[e]^=1<<t;return n=n>>>0,n>i?this.size++:n<i&&this.size--,this};Pe.prototype.applyPolicy=function(r){var e=this.policy(r||this.capacity);if(typeof e!="number"||e<0)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(e<=this.capacity)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned a less or equal capacity to allocate.");return Math.ceil(e/32)*32};Pe.prototype.reallocate=function(r){var e=r;if(r=Math.ceil(r/32)*32,e<this.length&&(this.length=e),r===this.capacity)return this;var t=this.array,i=r/32;return i===this.array.length?this:(i>this.array.length?(this.array=new Uint32Array(i),this.array.set(t,0)):this.array=t.slice(0,i),this.capacity=r,this)};Pe.prototype.grow=function(r){var e;if(typeof r=="number"){if(this.capacity>=r)return this;for(e=this.capacity;e<r;)e=this.applyPolicy(e);return this.reallocate(e),this}return e=this.applyPolicy(),this.reallocate(e),this};Pe.prototype.resize=function(r){return r===this.length?this:r<this.length?(this.length=r,this):(this.length=r,this.reallocate(r),this)};Pe.prototype.push=function(r){if(this.capacity===this.length&&this.grow(),r===0||r===!1)return++this.length;this.size++;var e=this.length++,t=e>>5,i=e&31;return this.array[t]|=1<<i,this.length};Pe.prototype.pop=function(){if(this.length!==0){var r=--this.length,e=r>>5,t=r&31;return this.array[e]>>t&1}};Pe.prototype.get=function(r){if(!(this.length<r)){var e=r>>5,t=r&31;return this.array[e]>>t&1}};Pe.prototype.test=function(r){return this.length<r?!1:!!this.get(r)};Pe.prototype.rank=function(r){if(this.size===0)return 0;for(var e=r>>5,t=r&31,i=0,n=0;n<e;n++)i+=GP.table8Popcount(this.array[n]);var s=this.array[e]&(1<<t)-1;return i+=GP.table8Popcount(s),i};Pe.prototype.select=function(r){if(this.size===0||r>=this.length)return-1;for(var e,t=32,i=0,n=0,s=0,u=this.array.length;s<u;s++)if(e=this.array[s],e!==0){s===u-1&&(t=this.length%32||32);for(var l=0;l<t;l++,i++)if(n+=e>>l&1,n===r)return i}};Pe.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.length,i,n,s=32,u=0,l=this.array.length;u<l;u++){i=this.array[u],u===l-1&&(s=t%32||32);for(var h=0;h<s;h++)n=i>>h&1,r.call(e,n,u*32+h)}};Pe.prototype.values=function(){var r=this.length,e=!1,t,i,n=this.array,s=n.length,u=0,l=-1,h=32;return new BP(function p(){if(!e){if(u>=s)return{done:!0};u===s-1&&(h=r%32||32),t=n[u++],e=!0,l=-1}return l++,l>=h?(e=!1,p()):(i=t>>l&1,{value:i})})};Pe.prototype.entries=function(){var r=this.length,e=!1,t,i,n=this.array,s,u=n.length,l=0,h=-1,p=32;return new BP(function v(){if(!e){if(l>=u)return{done:!0};l===u-1&&(p=r%32||32),t=n[l++],e=!0,h=-1}return h++,s=~-l*32+h,h>=p?(e=!1,v()):(i=t>>h&1,{value:[s,i]})})};typeof Symbol<"u"&&(Pe.prototype[Symbol.iterator]=Pe.prototype.values);Pe.prototype.inspect=function(){var r=new Uint8Array(this.length);return this.forEach(function(e,t){r[t]=e}),Object.defineProperty(r,"constructor",{value:Pe,enumerable:!1}),r};typeof Symbol<"u"&&(Pe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pe.prototype.inspect);Pe.prototype.toJSON=function(){return Array.from(this.array.slice(0,(this.length>>5)+1))};HP.exports=Pe});var QP=_((MX,YP)=>{function fn(r,e){return(r&65535)*e+(((r>>>16)*e&65535)<<16)&4294967295}function $6(r,e){return(r&65535)+(e>>>16)+(((r>>>16)+e&65535)<<16)&4294967295}function Bv(r,e){return r<<e|r>>>32-e}YP.exports=function(e,t){var i=3432918353,n=461845907,s=15,u=13,l=5,h=1801774676,p=e,v,b,T;for(b=0,T=t.length-4;b<=T;b+=4)v=t[b]|t[b+1]<<8|t[b+2]<<16|t[b+3]<<24,v=fn(v,i),v=Bv(v,s),v=fn(v,n),p^=v,p=Bv(p,u),p=fn(p,l),p=$6(p,h);switch(v=0,t.length&3){case 3:v^=t[b+2]<<16;case 2:v^=t[b+1]<<8;case 1:v^=t[b],v=fn(v,i),v=Bv(v,s),v=fn(v,n),p^=v;default:}return p^=t.length,p^=p>>>16,p=fn(p,2246822507),p^=p>>>13,p=fn(p,3266489909),p^=p>>>16,p>>>0}});var ZP=_((LX,JP)=>{var Y6=QP(),Q6=_e(),K6=Math.LN2*Math.LN2,X6={errorRate:.005};function KP(r){var e=new Uint16Array(r.length),t,i;for(t=0,i=r.length;t<i;t++)e[t]=r.charCodeAt(t);return e}function XP(r,e,t){var i=Y6(e*4221880213&4294967295,t);return i%(r*8)}function hn(r){var e={};if(!r)throw new Error("mnemonist/BloomFilter.constructor: a BloomFilter must be created with a capacity.");if(typeof r=="object"?e=r:e.capacity=r,typeof e.capacity!="number"||e.capacity<=0)throw new Error("mnemonist/BloomFilter.constructor: `capacity` option should be a positive integer.");if(this.capacity=e.capacity,this.errorRate=e.errorRate||X6.errorRate,typeof this.errorRate!="number"||e.errorRate<=0)throw new Error("mnemonist/BloomFilter.constructor: `errorRate` option should be a positive float.");this.clear()}hn.prototype.clear=function(){var r=-1/K6*this.capacity*Math.log(this.errorRate),e=r/8|0;this.hashFunctions=e*8/this.capacity*Math.LN2|0,this.data=new Uint8Array(e)};hn.prototype.add=function(r){for(var e=KP(r),t=0,i=this.hashFunctions;t<i;t++){var n=XP(this.data.length,t,e),s=1<<(7&n);this.data[n>>3]|=s}return this};hn.prototype.test=function(r){for(var e=KP(r),t=0,i=this.hashFunctions;t<i;t++){var n=XP(this.data.length,t,e);if(!(this.data[n>>3]&1<<(7&n)))return!1}return!0};hn.prototype.toJSON=function(){return this.data};hn.from=function(r,e){if(!e&&(e=r.length||r.size,typeof e!="number"))throw new Error("BloomFilter.from: could not infer the filter's capacity. Try passing it as second argument.");var t=new hn(e);return Q6(r,function(i){t.add(i)}),t};JP.exports=hn});var t1=_((xX,e1)=>{var J6=_e();function ir(r){if(typeof r!="function")throw new Error("mnemonist/BKTree.constructor: given `distance` should be a function.");this.distance=r,this.clear()}ir.prototype.add=function(r){if(!this.root)return this.root={item:r,children:{}},this.size++,this;for(var e=this.root,t;t=this.distance(r,e.item),!!e.children[t];)e=e.children[t];return e.children[t]={item:r,children:{}},this.size++,this};ir.prototype.search=function(r,e){if(!this.root)return[];for(var t=[],i=[this.root],n,s,u,l,h;i.length;)for(n=i.pop(),u=this.distance(e,n.item),u<=r&&t.push({item:n.item,distance:u}),l=u-r,h=u+r+1;l<h;l++)s=n.children[l],s&&i.push(s);return t};ir.prototype.clear=function(){this.size=0,this.root=null};ir.prototype.toJSON=function(){return this.root};ir.prototype.inspect=function(){for(var r=[],e=[this.root],t,i;e.length;)if(t=e.pop(),!!t){r.push(t.item);for(i in t.children)e.push(t.children[i])}return Object.defineProperty(r,"constructor",{value:ir,enumerable:!1}),r};typeof Symbol<"u"&&(ir.prototype[Symbol.for("nodejs.util.inspect.custom")]=ir.prototype.inspect);ir.from=function(r,e){var t=new ir(e);return J6(r,function(i){t.add(i)}),t};e1.exports=ir});var $v=_((jX,i1)=>{var Hv=Ot(),r1=Ge();function Me(r,e){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=e,this.items=new r(this.capacity),this.clear()}Me.prototype.clear=function(){this.start=0,this.size=0};Me.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var e=(this.start+this.size)%this.capacity;return this.items[e]=r,++this.size};Me.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var e=this.start-1;return this.start===0&&(e=this.capacity-1),this.items[e]=r,this.start=e,++this.size};Me.prototype.pop=function(){if(this.size===0)return;let r=(this.start+this.size-1)%this.capacity;return this.size--,this.items[r]};Me.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}};Me.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]};Me.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>this.capacity&&(r-=this.capacity),this.items[r]}};Me.prototype.get=function(r){if(this.size!==0)return r=this.start+r,r>this.capacity&&(r-=this.capacity),this.items[r]};Me.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.capacity,i=this.size,n=this.start,s=0;s<i;)r.call(e,this.items[n],s,this),n++,s++,n===t&&(n=0)};Me.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var e=new this.ArrayClass(this.size),t=this.capacity,i=this.size,n=this.start,s=0;s<i;)e[s]=this.items[n],n++,s++,n===t&&(n=0);return e};Me.prototype.values=function(){var r=this.items,e=this.capacity,t=this.size,i=this.start,n=0;return new r1(function(){if(n>=t)return{done:!0};var s=r[i];return i++,n++,i===e&&(i=0),{value:s,done:!1}})};Me.prototype.entries=function(){var r=this.items,e=this.capacity,t=this.size,i=this.start,n=0;return new r1(function(){if(n>=t)return{done:!0};var s=r[i];return i++,i===e&&(i=0),{value:[n++,s],done:!1}})};typeof Symbol<"u"&&(Me.prototype[Symbol.iterator]=Me.prototype.values);Me.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:Me,enumerable:!1}),r};typeof Symbol<"u"&&(Me.prototype[Symbol.for("nodejs.util.inspect.custom")]=Me.prototype.inspect);Me.from=function(r,e,t){if(arguments.length<3&&(t=Hv.guessLength(r),typeof t!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new Me(e,t);if(Hv.isArrayLike(r)){var n,s;for(n=0,s=r.length;n<s;n++)i.items[n]=r[n];return i.size=s,i}return Hv.forEach(r,function(u){i.push(u)}),i};i1.exports=Me});var a1=_((IX,o1)=>{var Yv=Ot(),Qv=$v();function Ao(r,e){if(arguments.length<2)throw new Error("mnemonist/circular-buffer: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/circular-buffer: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=e,this.items=new r(this.capacity),this.clear()}function n1(r){Ao.prototype[r]=Qv.prototype[r]}Object.keys(Qv.prototype).forEach(n1);typeof Symbol<"u"&&Object.getOwnPropertySymbols(Qv.prototype).forEach(n1);Ao.prototype.push=function(r){var e=(this.start+this.size)%this.capacity;return this.items[e]=r,this.size===this.capacity?(this.start=(e+1)%this.capacity,this.size):++this.size};Ao.prototype.unshift=function(r){var e=this.start-1;return this.start===0&&(e=this.capacity-1),this.items[e]=r,this.size===this.capacity?(this.start=e,this.size):(this.start=e,++this.size)};Ao.from=function(r,e,t){if(arguments.length<3&&(t=Yv.guessLength(r),typeof t!="number"))throw new Error("mnemonist/circular-buffer.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new Ao(e,t);if(Yv.isArrayLike(r)){var n,s;for(n=0,s=r.length;n<s;n++)i.items[n]=r[n];return i.size=s,i}return Yv.forEach(r,function(u){i.push(u)}),i};o1.exports=Ao});var u1=_((kX,s1)=>{function Ze(r){if(typeof r!="function")throw new Error("mnemonist/DefaultMap.constructor: expecting a function.");this.items=new Map,this.factory=r,this.size=0}Ze.prototype.clear=function(){this.items.clear(),this.size=0};Ze.prototype.get=function(r){var e=this.items.get(r);return typeof e>"u"&&(e=this.factory(r,this.size),this.items.set(r,e),this.size++),e};Ze.prototype.peek=function(r){return this.items.get(r)};Ze.prototype.set=function(r,e){return this.items.set(r,e),this.size=this.items.size,this};Ze.prototype.has=function(r){return this.items.has(r)};Ze.prototype.delete=function(r){var e=this.items.delete(r);return this.size=this.items.size,e};Ze.prototype.forEach=function(r,e){e=arguments.length>1?e:this,this.items.forEach(r,e)};Ze.prototype.entries=function(){return this.items.entries()};Ze.prototype.keys=function(){return this.items.keys()};Ze.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=Ze.prototype.entries);Ze.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Ze.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ze.prototype.inspect);Ze.autoIncrement=function(){var r=0;return function(){return r++}};s1.exports=Ze});var l1=_((FX,c1)=>{function Pr(r){if(typeof r!="function")throw new Error("mnemonist/DefaultWeakMap.constructor: expecting a function.");this.items=new WeakMap,this.factory=r}Pr.prototype.clear=function(){this.items=new WeakMap};Pr.prototype.get=function(r){var e=this.items.get(r);return typeof e>"u"&&(e=this.factory(r),this.items.set(r,e)),e};Pr.prototype.peek=function(r){return this.items.get(r)};Pr.prototype.set=function(r,e){return this.items.set(r,e),this};Pr.prototype.has=function(r){return this.items.has(r)};Pr.prototype.delete=function(r){return this.items.delete(r)};Pr.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Pr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pr.prototype.inspect);c1.exports=Pr});var h1=_((DX,f1)=>{var Kv=ht();function wr(r){var e=Kv.getPointerArray(r),t=Kv.getPointerArray(Math.log2(r));this.size=r,this.dimension=r,this.parents=new e(r),this.ranks=new t(r);for(var i=0;i<r;i++)this.parents[i]=i}wr.prototype.find=function(r){for(var e=r,t,i;t=this.parents[e],e!==t;)e=t;for(;i=this.parents[r],i!==e;)this.parents[r]=e,r=i;return e};wr.prototype.union=function(r,e){var t=this.find(r),i=this.find(e);if(t===i)return this;this.dimension--;var n=this.ranks[r],s=this.ranks[e];return n<s?this.parents[t]=i:n>s?this.parents[i]=t:(this.parents[i]=t,this.ranks[t]++),this};wr.prototype.connected=function(r,e){var t=this.find(r);return t===this.find(e)};wr.prototype.mapping=function(){for(var r=Kv.getPointerArray(this.dimension),e={},t=new r(this.size),i=0,n,s=0,u=this.parents.length;s<u;s++)n=this.find(s),typeof e[n]>"u"?(t[s]=i,e[n]=i++):t[s]=e[n];return t};wr.prototype.compile=function(){for(var r={},e=new Array(this.dimension),t=0,i,n=0,s=this.parents.length;n<s;n++)i=this.find(n),typeof r[i]>"u"?(e[t]=[n],r[i]=t++):e[r[i]].push(n);return e};wr.prototype.inspect=function(){var r=this.compile();return Object.defineProperty(r,"constructor",{value:wr,enumerable:!1}),r};typeof Symbol<"u"&&(wr.prototype[Symbol.for("nodejs.util.inspect.custom")]=wr.prototype.inspect);f1.exports=wr});var Pf=_((RX,v1)=>{var p1=La(),Xv=_f(),Z6=p1.DEFAULT_COMPARATOR,e4=p1.reverseComparator;function t4(r,e,t,i){for(var n=t,s=i,u=e[i],l=2*i+1,h;l<n;)h=l+1,h<n&&r(e[l],e[h])>=0&&(l=h),e[i]=e[l],i=l,l=2*i+1;e[i]=u,Xv.siftDown(r,e,s,i)}function d1(r,e,t,i){for(var n=i,s=n,u=new r(i),l,h;s>0;)l=t[--s],s!==0&&(h=t[0],t[0]=l,t4(e,t,--i,0),l=h),u[s]=l;return u}function Or(r,e,t){if(arguments.length===2&&(t=e,e=null),this.ArrayClass=r,this.capacity=t,this.items=new r(t),this.clear(),this.comparator=e||Z6,typeof t!="number"&&t<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=e4(this.comparator)}Or.prototype.clear=function(){this.size=0};Or.prototype.push=function(r){return this.size<this.capacity?(this.items[this.size]=r,Xv.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(r,this.items[0])>0&&Xv.replace(this.comparator,this.items,r),this.size};Or.prototype.peek=function(){return this.items[0]};Or.prototype.consume=function(){var r=d1(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,r};Or.prototype.toArray=function(){return d1(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)};Or.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:Or,enumerable:!1}),r};typeof Symbol<"u"&&(Or.prototype[Symbol.for("nodejs.util.inspect.custom")]=Or.prototype.inspect);v1.exports=Or});var g1=_((zX,y1)=>{var r4=_e(),m1=function(r){return r};function nt(r){if(this.items=new Map,this.clear(),Array.isArray(r)?(this.writeHashFunction=r[0],this.readHashFunction=r[1]):(this.writeHashFunction=r,this.readHashFunction=r),this.writeHashFunction||(this.writeHashFunction=m1),this.readHashFunction||(this.readHashFunction=m1),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.")}nt.prototype.clear=function(){this.items.clear(),this.size=0};nt.prototype.add=function(r){var e=this.writeHashFunction(r);return this.items.set(e,r),this.size=this.items.size,this};nt.prototype.set=function(r,e){return r=this.writeHashFunction(r),this.items.set(r,e),this.size=this.items.size,this};nt.prototype.get=function(r){return r=this.readHashFunction(r),this.items.get(r)};nt.prototype.has=function(r){return r=this.readHashFunction(r),this.items.has(r)};nt.prototype.forEach=function(r,e){e=arguments.length>1?e:this,this.items.forEach(function(t){r.call(e,t,t)})};nt.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(nt.prototype[Symbol.iterator]=nt.prototype.values);nt.prototype.inspect=function(){var r=Array.from(this.items.values());return Object.defineProperty(r,"constructor",{value:nt,enumerable:!1}),r};typeof Symbol<"u"&&(nt.prototype[Symbol.for("nodejs.util.inspect.custom")]=nt.prototype.inspect);nt.from=function(r,e,t){var i=new nt(e);return r4(r,function(n,s){t?i.set(s,n):i.add(n)}),i};y1.exports=nt});var Jv=_((NX,b1)=>{var wf=Ge(),i4=_e();function me(r){this.Container=r||Array,this.items=new Map,this.clear(),Object.defineProperty(this.items,"constructor",{value:me,enumerable:!1})}me.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};me.prototype.set=function(r,e){var t=this.items.get(r),i;return t||(this.dimension++,t=new this.Container,this.items.set(r,t)),this.Container===Set?(i=t.size,t.add(e),i<t.size&&this.size++):(t.push(e),this.size++),this};me.prototype.delete=function(r){var e=this.items.get(r);return e?(this.size-=this.Container===Set?e.size:e.length,this.dimension--,this.items.delete(r),!0):!1};me.prototype.remove=function(r,e){var t=this.items.get(r),i,n;return t?this.Container===Set?(i=t.delete(e),i&&this.size--,t.size===0&&(this.items.delete(r),this.dimension--),i):(n=t.indexOf(e),n===-1?!1:(this.size--,t.length===1?(this.items.delete(r),this.dimension--,!0):(t.splice(n,1),!0))):!1};me.prototype.has=function(r){return this.items.has(r)};me.prototype.get=function(r){return this.items.get(r)};me.prototype.multiplicity=function(r){var e=this.items.get(r);return typeof e>"u"?0:this.Container===Set?e.size:e.length};me.prototype.count=me.prototype.multiplicity;me.prototype.forEach=function(r,e){e=arguments.length>1?e:this;var t;function i(n){r.call(e,n,t)}this.items.forEach(function(n,s){t=s,n.forEach(i)})};me.prototype.forEachAssociation=function(r,e){e=arguments.length>1?e:this,this.items.forEach(r,e)};me.prototype.keys=function(){return this.items.keys()};me.prototype.values=function(){var r=this.items.values(),e=!1,t,i,n,s;return this.Container===Set?new wf(function u(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,t=i.value.values()}return i=t.next(),i.done?(e=!1,u()):{done:!1,value:i.value}}):new wf(function u(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,t=i.value,n=0,s=t.length}return n>=s?(e=!1,u()):{done:!1,value:t[n++]}})};me.prototype.entries=function(){var r=this.items.entries(),e=!1,t,i,n,s,u;return this.Container===Set?new wf(function l(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,n=i.value[0],t=i.value[1].values()}return i=t.next(),i.done?(e=!1,l()):{done:!1,value:[n,i.value]}}):new wf(function l(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,n=i.value[0],t=i.value[1],s=0,u=t.length}return s>=u?(e=!1,l()):{done:!1,value:[n,t[s++]]}})};me.prototype.containers=function(){return this.items.values()};me.prototype.associations=function(){return this.items.entries()};typeof Symbol<"u"&&(me.prototype[Symbol.iterator]=me.prototype.entries);me.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(me.prototype[Symbol.for("nodejs.util.inspect.custom")]=me.prototype.inspect);me.prototype.toJSON=function(){return this.items};me.from=function(r,e){var t=new me(e);return i4(r,function(i,n){t.set(n,i)}),t};b1.exports=me});var w1=_((VX,P1)=>{var n4=Jv(),o4=_e(),_1=function(r){return r};function ot(r,e){if(this.items=new n4(e),this.clear(),Array.isArray(r)?(this.writeHashFunction=r[0],this.readHashFunction=r[1]):(this.writeHashFunction=r,this.readHashFunction=r),this.writeHashFunction||(this.writeHashFunction=_1),this.readHashFunction||(this.readHashFunction=_1),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.")}ot.prototype.clear=function(){this.items.clear(),this.size=0,this.dimension=0};ot.prototype.add=function(r){var e=this.writeHashFunction(r);return this.items.set(e,r),this.size=this.items.size,this.dimension=this.items.dimension,this};ot.prototype.set=function(r,e){return r=this.writeHashFunction(r),this.items.set(r,e),this.size=this.items.size,this.dimension=this.items.dimension,this};ot.prototype.get=function(r){return r=this.readHashFunction(r),this.items.get(r)};ot.prototype.has=function(r){return r=this.readHashFunction(r),this.items.has(r)};ot.prototype.forEach=function(r,e){e=arguments.length>1?e:this,this.items.forEach(function(t){r.call(e,t,t)})};ot.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(ot.prototype[Symbol.iterator]=ot.prototype.values);ot.prototype.inspect=function(){var r=Array.from(this);return Object.defineProperty(r,"constructor",{value:ot,enumerable:!1}),r};typeof Symbol<"u"&&(ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=ot.prototype.inspect);ot.from=function(r,e,t,i){arguments.length===3&&typeof t=="boolean"&&(i=t,t=Array);var n=new ot(e,t);return o4(r,function(s,u){i?n.set(u,s):n.add(s)}),n};P1.exports=ot});var S1=_((WX,T1)=>{var O1=1024;function a4(r){return(r&r-1)===0}function nr(r,e){if(arguments.length<1)throw new Error("mnemonist/hashed-array-tree: expecting at least a byte array constructor.");var t=e||0,i=O1,n=0;if(typeof e=="object"&&(t=e.initialCapacity||0,n=e.initialLength||0,i=e.blockSize||O1),!i||!a4(i))throw new Error("mnemonist/hashed-array-tree: block size should be a power of two.");var s=Math.max(n,t),u=Math.ceil(s/i);this.ArrayClass=r,this.length=n,this.capacity=u*i,this.blockSize=i,this.offsetMask=i-1,this.blockMask=Math.log2(i),this.blocks=new Array(u);for(var l=0;l<u;l++)this.blocks[l]=new this.ArrayClass(this.blockSize)}nr.prototype.set=function(r,e){if(this.length<r)throw new Error("HashedArrayTree("+this.ArrayClass.name+").set: index out of bounds.");var t=r>>this.blockMask,i=r&this.offsetMask;return this.blocks[t][i]=e,this};nr.prototype.get=function(r){if(!(this.length<r)){var e=r>>this.blockMask,t=r&this.offsetMask;return this.blocks[e][t]}};nr.prototype.grow=function(r){if(typeof r!="number"&&(r=this.capacity+this.blockSize),this.capacity>=r)return this;for(;this.capacity<r;)this.blocks.push(new this.ArrayClass(this.blockSize)),this.capacity+=this.blockSize;return this};nr.prototype.resize=function(r){return r===this.length?this:r<this.length?(this.length=r,this):(this.length=r,this.grow(r),this)};nr.prototype.push=function(r){this.capacity===this.length&&this.grow();var e=this.length,t=e>>this.blockMask,i=e&this.offsetMask;return this.blocks[t][i]=r,++this.length};nr.prototype.pop=function(){if(this.length!==0){var r=this.blocks[this.blocks.length-1],e=--this.length&this.offsetMask;return r[e]}};nr.prototype.inspect=function(){for(var r=new this.ArrayClass(this.length),e,t=0,i=this.length;t<i;t++)e=t>>this.blockMask,r[t]=this.blocks[e][t&this.offsetMask];return r.type=this.ArrayClass.name,r.items=this.length,r.capacity=this.capacity,r.blockSize=this.blockSize,Object.defineProperty(r,"constructor",{value:nr,enumerable:!1}),r};typeof Symbol<"u"&&(nr.prototype[Symbol.for("nodejs.util.inspect.custom")]=nr.prototype.inspect);T1.exports=nr});var em=_((UX,C1)=>{var A1=Ge(),Zv=Ot();function ze(r,e){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=e,this.ArrayClass=r,this.items=new this.ArrayClass(this.capacity),this.clear()}ze.prototype.clear=function(){this.size=0};ze.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=r,this.size};ze.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]};ze.prototype.peek=function(){return this.items[this.size-1]};ze.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.items.length;t<i;t++)r.call(e,this.items[i-t-1],t,this)};ze.prototype.toArray=function(){for(var r=new this.ArrayClass(this.size),e=this.size-1,t=this.size;t--;)r[t]=this.items[e-t];return r};ze.prototype.values=function(){var r=this.items,e=this.size,t=0;return new A1(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return t++,{value:i,done:!1}})};ze.prototype.entries=function(){var r=this.items,e=this.size,t=0;return new A1(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(ze.prototype[Symbol.iterator]=ze.prototype.values);ze.prototype.toString=function(){return this.toArray().join(",")};ze.prototype.toJSON=function(){return this.toArray()};ze.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:ze,enumerable:!1}),r};typeof Symbol<"u"&&(ze.prototype[Symbol.for("nodejs.util.inspect.custom")]=ze.prototype.inspect);ze.from=function(r,e,t){if(arguments.length<3&&(t=Zv.guessLength(r),typeof t!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new ze(e,t);if(Zv.isArrayLike(r)){var n,s;for(n=0,s=r.length;n<s;n++)i.items[n]=r[n];return i.size=s,i}return Zv.forEach(r,function(u){i.push(u)}),i};C1.exports=ze});var q1=_((GX,E1)=>{var s4=Ot(),u4=ht(),c4=em();function tm(r,e,t,i,n,s,u,l){var h=u+(l-u)/2|0,p=~-h,v=-~h,b=t[h];i[s]=b+1;var T=e?e(r[b]):r[b][1],S=s*2+1,E=s*2+2,M=-1/0,x=-1/0;u<=p&&(M=tm(r,e,t,i,n,S,u,p)),v<=l&&(x=tm(r,e,t,i,n,E,v,l));var D=Math.max(T,M,x),N=b;return D===M?N=n[i[S]-1]:D===x&&(N=n[i[E]-1]),n[b]=N,D}function Tr(r,e){this.size=r.length,this.intervals=r;var t=null,i=null;Array.isArray(e)&&(t=e[0],i=e[1]);var n=r.length,s=u4.getPointerArray(n+1),u=new s(n),l;for(l=1;l<n;l++)u[l]=l;u.sort(function(T,S){return T=r[T],S=r[S],t?(T=t(T),S=t(S)):(T=T[0],S=S[0]),T<S?-1:T>S?1:0});var h=Math.ceil(Math.log2(n+1)),p=Math.pow(2,h)-1,v=new s(p),b=new s(n);tm(r,i,u,v,b,0,0,n-1),u=null,this.height=h,this.tree=v,this.augmentations=b,this.startGetter=t,this.endGetter=i,this.stack=new c4(s,this.height)}Tr.prototype.intervalsContainingPoint=function(r){var e=[],t=this.stack;t.clear(),t.push(0);for(var i=this.tree.length,n,s,u,l,h,p,v,b,T;t.size;)n=t.pop(),s=this.tree[n]-1,u=this.intervals[s],l=this.intervals[this.augmentations[s]],v=this.endGetter?this.endGetter(l):l[1],!(r>v)&&(b=n*2+1,b<i&&this.tree[b]!==0&&t.push(b),h=this.startGetter?this.startGetter(u):u[0],p=this.endGetter?this.endGetter(u):u[1],r>=h&&r<=p&&e.push(u),!(r<h)&&(T=n*2+2,T<i&&this.tree[T]!==0&&t.push(T)));return e};Tr.prototype.intervalsOverlappingInterval=function(r){var e=this.startGetter?this.startGetter(r):r[0],t=this.endGetter?this.endGetter(r):r[1],i=[],n=this.stack;n.clear(),n.push(0);for(var s=this.tree.length,u,l,h,p,v,b,T,S,E;n.size;)u=n.pop(),l=this.tree[u]-1,h=this.intervals[l],p=this.intervals[this.augmentations[l]],T=this.endGetter?this.endGetter(p):p[1],!(e>T)&&(S=u*2+1,S<s&&this.tree[S]!==0&&n.push(S),v=this.startGetter?this.startGetter(h):h[0],b=this.endGetter?this.endGetter(h):h[1],t>=v&&e<=b&&i.push(h),!(t<v)&&(E=u*2+2,E<s&&this.tree[E]!==0&&n.push(E)));return i};Tr.prototype.inspect=function(){var r=this.intervals.slice();return Object.defineProperty(r,"constructor",{value:Tr,enumerable:!1}),r};typeof Symbol<"u"&&(Tr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Tr.prototype.inspect);Tr.from=function(r,e){return s4.isArrayLike(r)?new Tr(r,e):new Tr(Array.from(r),e)};E1.exports=Tr});var rm=_(ki=>{ki.search=function(r,e,t,i){var n=0;t=typeof t<"u"?t:0,i=typeof i<"u"?i:r.length,i--;for(var s;t<=i;)if(n=t+i>>>1,s=r[n],s>e)i=~-n;else if(s<e)t=-~n;else return n;return-1};ki.searchWithComparator=function(r,e,t){for(var i=0,n=0,s=~-e.length,u;n<=s;)if(i=n+s>>>1,u=r(e[i],t),u>0)s=~-i;else if(u<0)n=-~i;else return i;return-1};ki.lowerBound=function(r,e,t,i){var n=0;for(t=typeof t<"u"?t:0,i=typeof i<"u"?i:r.length;t<i;)n=t+i>>>1,e<=r[n]?i=n:t=-~n;return t};ki.lowerBoundWithComparator=function(r,e,t){for(var i=0,n=0,s=e.length;n<s;)i=n+s>>>1,r(t,e[i])<=0?s=i:n=-~i;return n};ki.lowerBoundIndices=function(r,e,t,i,n){var s=0;for(i=typeof i<"u"?i:0,n=typeof n<"u"?n:r.length;i<n;)s=i+n>>>1,t<=r[e[s]]?n=s:i=-~s;return i};ki.upperBound=function(r,e,t,i){var n=0;for(t=typeof t<"u"?t:0,i=typeof i<"u"?i:r.length;t<i;)n=t+i>>>1,e>=r[n]?t=-~n:i=n;return t};ki.upperBoundWithComparator=function(r,e,t){for(var i=0,n=0,s=e.length;n<s;)i=n+s>>>1,r(t,e[i])>=0?n=-~i:s=i;return n}});var j1=_(Fi=>{var Co=ht(),Eo=Ot().isArrayLike,pn=rm(),M1=hf();function L1(r,e){if(r.length===0)return e.slice();if(e.length===0)return r.slice();var t;r[0]>e[0]&&(t=r,r=e,e=t);var i=r[r.length-1],n=e[0];if(i<=n)return Co.isTypedArray(r)?Co.concat(r,e):r.concat(e);var s=new r.constructor(r.length+e.length),u,l,h;for(u=0,l=r.length;u<l&&(h=r[u],h<=n);u++)s[u]=h;for(var p=u,v=r.length,b=0,T=e.length,S,E;p<v&&b<T;)S=r[p],E=e[b],S<=E?(s[u++]=S,p++):(s[u++]=E,b++);for(;p<v;)s[u++]=r[p++];for(;b<T;)s[u++]=e[b++];return s}function x1(r,e){if(r.length===0)return e.slice();if(e.length===0)return r.slice();var t;r[0]>e[0]&&(t=r,r=e,e=t);var i=r[r.length-1],n=e[0];if(i<n)return Co.isTypedArray(r)?Co.concat(r,e):r.concat(e);var s=new r.constructor,u,l,h;for(u=0,l=r.length;u<l&&(h=r[u],h<n);u++)s.push(h);for(var p=u,v=r.length,b=0,T=e.length,S,E;p<v&&b<T;)S=r[p],E=e[b],S<=E?((s.length===0||s[s.length-1]!==S)&&s.push(S),p++):((s.length===0||s[s.length-1]!==E)&&s.push(E),b++);for(;p<v;)S=r[p++],(s.length===0||s[s.length-1]!==S)&&s.push(S);for(;b<T;)E=e[b++],(s.length===0||s[s.length-1]!==E)&&s.push(E);return s}Fi.intersectionUniqueArrays=function(r,e){if(r.length===0||e.length===0)return new r.constructor(0);var t;r[0]>e[0]&&(t=r,r=e,e=t);var i=r[r.length-1],n=e[0];if(i<n)return new r.constructor(0);for(var s=new r.constructor,u=pn.lowerBound(r,n),l=r.length,h=0,p=pn.upperBound(e,i),v,b;u<l&&h<p;)v=r[u],b=e[h],v<b?u=pn.lowerBound(r,b,u+1):v>b?h=pn.lowerBound(e,v,h+1):(s.push(v),u++,h++);return s};function l4(r){var e=0,t=-1/0,i,n,s,u=[];for(n=0,s=r.length;n<s;n++)i=r[n].length,i!==0&&(u.push(r[n]),e+=i,i>t&&(t=i));if(u.length===0)return new r[0].constructor(0);if(u.length===1)return u[0].slice();if(u.length===2)return L1(u[0],u[1]);r=u;var l=new r[0].constructor(e),h=Co.getPointerArray(t),p=new h(r.length),v=new M1(function(S,E){return S=r[S][p[S]],E=r[E][p[E]],S<E?-1:S>E?1:0});for(n=0;n<s;n++)v.push(n);n=0;for(var b,T;v.size;)b=v.pop(),T=r[b][p[b]++],l[n++]=T,p[b]<r[b].length&&v.push(b);return l}function f4(r){var e=-1/0,t,i,n,s=[];for(i=0,n=r.length;i<n;i++)t=r[i].length,t!==0&&(s.push(r[i]),t>e&&(e=t));if(s.length===0)return new r[0].constructor(0);if(s.length===1)return s[0].slice();if(s.length===2)return x1(s[0],s[1]);r=s;var u=new r[0].constructor,l=Co.getPointerArray(e),h=new l(r.length),p=new M1(function(T,S){return T=r[T][h[T]],S=r[S][h[S]],T<S?-1:T>S?1:0});for(i=0;i<n;i++)p.push(i);for(var v,b;p.size;)v=p.pop(),b=r[v][h[v]++],(u.length===0||u[u.length-1]!==b)&&u.push(b),h[v]<r[v].length&&p.push(v);return u}Fi.kWayIntersectionUniqueArrays=function(r){var e=-1/0,t=-1/0,i=1/0,n,s,u,l,h;for(l=0,h=r.length;l<h;l++){if(u=r[l].length,u===0)return[];u>e&&(e=u),n=r[l][0],s=r[l][u-1],n>t&&(t=n),s<i&&(i=s)}if(t>i)return[];if(t===i)return[t];var p,v,b=r[0],T,S,E,M,x,D,N=t;for(l=1;l<h;l++){for(p=b,v=r[l],b=new Array,T=0,S=pn.lowerBound(v,N),E=p.length,M=v.length;T<E&&S<M;)x=p[T],D=v[S],x<D?T=pn.lowerBound(p,D,T+1):x>D?S=pn.lowerBound(v,x,S+1):(b.push(x),T++,S++);if(b.length===0)return b;N=b[0]}return b};Fi.merge=function(){if(arguments.length===2){if(Eo(arguments[0]))return L1(arguments[0],arguments[1])}else if(Eo(arguments[0]))return l4(arguments);return null};Fi.unionUnique=function(){if(arguments.length===2){if(Eo(arguments[0]))return x1(arguments[0],arguments[1])}else if(Eo(arguments[0]))return f4(arguments);return null};Fi.intersectionUnique=function(){if(arguments.length===2){if(Eo(arguments[0]))return Fi.intersectionUniqueArrays(arguments[0],arguments[1])}else if(Eo(arguments[0]))return Fi.kWayIntersectionUniqueArrays(arguments);return null}});var F1=_(($X,k1)=>{var h4=Ge(),p4=_e(),d4=j1();function I1(r){return r}function pt(r){if(this.clear(),Array.isArray(r)?(this.documentTokenizer=r[0],this.queryTokenizer=r[1]):(this.documentTokenizer=r,this.queryTokenizer=r),this.documentTokenizer||(this.documentTokenizer=I1),this.queryTokenizer||(this.queryTokenizer=I1),typeof this.documentTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: document tokenizer is not a function.");if(typeof this.queryTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: query tokenizer is not a function.")}pt.prototype.clear=function(){this.items=[],this.mapping=new Map,this.size=0,this.dimension=0};pt.prototype.add=function(r){this.size++;var e=this.items.length;this.items.push(r);var t=this.documentTokenizer(r);if(!Array.isArray(t))throw new Error("mnemonist/InvertedIndex.add: tokenizer function should return an array of tokens.");for(var i=new Set,n,s,u=0,l=t.length;u<l;u++)n=t[u],!i.has(n)&&(i.add(n),s=this.mapping.get(n),s||(s=[],this.mapping.set(n,s)),s.push(e));return this.dimension=this.mapping.size,this};pt.prototype.get=function(r){if(!this.size)return[];var e=this.queryTokenizer(r);if(!Array.isArray(e))throw new Error("mnemonist/InvertedIndex.query: tokenizer function should return an array of tokens.");if(!e.length)return[];var t=this.mapping.get(e[0]),i,n,s;if(typeof t>"u"||t.length===0)return[];if(e.length>1)for(n=1,s=e.length;n<s;n++){if(i=this.mapping.get(e[n]),typeof i>"u"||i.length===0)return[];t=d4.intersectionUniqueArrays(t,i)}var u=new Array(t.length);for(n=0,s=u.length;n<s;n++)u[n]=this.items[t[n]];return u};pt.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.documents.length;t<i;t++)r.call(e,this.documents[t],t,this)};pt.prototype.documents=function(){var r=this.items,e=r.length,t=0;return new h4(function(){if(t>=e)return{done:!0};var i=r[t++];return{value:i,done:!1}})};pt.prototype.tokens=function(){return this.mapping.keys()};typeof Symbol<"u"&&(pt.prototype[Symbol.iterator]=pt.prototype.documents);pt.prototype.inspect=function(){var r=this.items.slice();return Object.defineProperty(r,"constructor",{value:pt,enumerable:!1}),r};typeof Symbol<"u"&&(pt.prototype[Symbol.for("nodejs.util.inspect.custom")]=pt.prototype.inspect);pt.from=function(r,e){var t=new pt(e);return p4(r,function(i){t.add(i)}),t};k1.exports=pt});var nm=_(im=>{var Be=new Float64Array(64),Ae=new Float64Array(64);function v4(r,e,t){var i,n,s,u,l;for(Be[0]=e,Ae[0]=t,n=0;n>=0;)if(s=Be[n],u=Ae[n]-1,s<u){for(i=r[s];s<u;){for(;r[u]>=i&&s<u;)u--;for(s<u&&(r[s++]=r[u]);r[s]<=i&&s<u;)s++;s<u&&(r[u--]=r[s])}r[s]=i,Be[n+1]=s+1,Ae[n+1]=Ae[n],Ae[n++]=s,Ae[n]-Be[n]>Ae[n-1]-Be[n-1]&&(l=Be[n],Be[n]=Be[n-1],Be[n-1]=l,l=Ae[n],Ae[n]=Ae[n-1],Ae[n-1]=l)}else n--;return r}im.inplaceQuickSort=v4;function m4(r,e,t,i){var n,s,u,l,h,p;for(Be[0]=t,Ae[0]=i,s=0;s>=0;)if(u=Be[s],l=Ae[s]-1,u<l){for(h=e[u],n=r[h];u<l;){for(;r[e[l]]>=n&&u<l;)l--;for(u<l&&(e[u++]=e[l]);r[e[u]]<=n&&u<l;)u++;u<l&&(e[l--]=e[u])}e[u]=h,Be[s+1]=u+1,Ae[s+1]=Ae[s],Ae[s++]=u,Ae[s]-Be[s]>Ae[s-1]-Be[s-1]&&(p=Be[s],Be[s]=Be[s-1],Be[s-1]=p,p=Ae[s],Ae[s]=Ae[s-1],Ae[s-1]=p)}else s--;return e}im.inplaceQuickSortIndices=m4});var V1=_((QX,N1)=>{var y4=Ot(),Of=ht(),D1=La().createTupleComparator,R1=Pf(),g4=nm().inplaceQuickSortIndices;function om(r,e,t,i){var n,s=0,u;for(n=0;n<r;n++)u=e[n][t]-i[n],s+=u*u;return s}function b4(r,e){var t=e.length,i=new Array(r),n=new Array(t),s,u=Of.getPointerArray(t),l=new u(t),h,p,v,b=!0;for(h=0;h<r;h++){for(s=new Float64Array(t),p=0;p<t;p++)v=e[p],s[p]=v[1][h],b&&(n[p]=v[0],l[p]=p);b=!1,i[h]=s}return{axes:i,ids:l,labels:n}}function z1(r,e,t,i){for(var n=i.length,s=Of.getPointerArray(n+1),u=new s(n),l=new s(n),h=new s(n),p=[[0,0,t.length,-1,0]],v,b,T,S,E,M,x,D,N=0;p.length!==0;)v=p.pop(),D=v[0],M=v[1],x=v[2],b=v[3],T=v[4],g4(e[D],t,M,x),n=x-M,S=M+(n>>>1),E=t[S],u[N]=E,b>-1&&(T===0?l[b]=N+1:h[b]=N+1),D=(D+1)%r,S!==M&&S!==x-1&&p.push([D,S+1,x,N,1]),S!==M&&p.push([D,M,S,N,0]),N++;return{axes:e,labels:i,pivots:u,lefts:l,rights:h}}function Gt(r,e){this.dimensions=r,this.visited=0,this.axes=e.axes,this.labels=e.labels,this.pivots=e.pivots,this.lefts=e.lefts,this.rights=e.rights,this.size=this.labels.length}Gt.prototype.nearestNeighbor=function(r){var e=1/0,t=null,i=this.dimensions,n=this.axes,s=this.pivots,u=this.lefts,l=this.rights,h=0;function p(v,b){h++;var T=u[b],S=l[b],E=s[b],M=om(i,n,E,r);if(!(M<e&&(t=E,e=M,M===0))){var x=n[v][E]-r[v];v=(v+1)%i,x>0?T!==0&&p(v,T-1):S!==0&&p(v,S-1),x*x<e&&(x>0?S!==0&&p(v,S-1):T!==0&&p(v,T-1))}}return p(0,0),this.visited=h,this.labels[t]};var _4=D1(3),P4=D1(2);Gt.prototype.kNearestNeighbors=function(r,e){if(r<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(r=Math.min(r,this.size),r===1)return[this.nearestNeighbor(e)];var t=new R1(Array,_4,r),i=this.dimensions,n=this.axes,s=this.pivots,u=this.lefts,l=this.rights,h=0;function p(T,S){var E=u[S],M=l[S],x=s[S],D=om(i,n,x,e);t.push([D,h++,x]);var N=e[T],Y=n[T][x],ie=N-Y;T=(T+1)%i,N<Y?E!==0&&p(T,E-1):M!==0&&p(T,M-1),(ie*ie<t.peek()[0]||t.size<r)&&(N<Y?M!==0&&p(T,M-1):E!==0&&p(T,E-1))}p(0,0),this.visited=h;for(var v=t.consume(),b=0;b<v.length;b++)v[b]=this.labels[v[b][2]];return v};Gt.prototype.linearKNearestNeighbors=function(r,e){if(r<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");r=Math.min(r,this.size);var t=new R1(Array,P4,r),i,n,s;for(i=0,n=this.size;i<n;i++)s=om(this.dimensions,this.axes,this.pivots[i],e),t.push([s,i]);var u=t.consume();for(i=0;i<u.length;i++)u[i]=this.labels[this.pivots[u[i][1]]];return u};Gt.prototype.inspect=function(){var r=new Map;r.dimensions=this.dimensions,Object.defineProperty(r,"constructor",{value:Gt,enumerable:!1});var e,t,i;for(e=0;e<this.size;e++){for(i=new Array(this.dimensions),t=0;t<this.dimensions;t++)i[t]=this.axes[t][e];r.set(this.labels[e],i)}return r};typeof Symbol<"u"&&(Gt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Gt.prototype.inspect);Gt.from=function(r,e){var t=y4.toArray(r),i=b4(e,t),n=z1(e,i.axes,i.ids,i.labels);return new Gt(e,n)};Gt.fromAxes=function(r,e){e||(e=Of.indices(r[0].length));var t=r.length,i=z1(r.length,r,Of.indices(e.length),e);return new Gt(t,i)};N1.exports=Gt});var G1=_((KX,U1)=>{var W1=Ge(),w4=_e();function Oe(){this.clear()}Oe.prototype.clear=function(){this.head=null,this.tail=null,this.size=0};Oe.prototype.first=function(){return this.head?this.head.item:void 0};Oe.prototype.peek=Oe.prototype.first;Oe.prototype.last=function(){return this.tail?this.tail.item:void 0};Oe.prototype.push=function(r){var e={item:r,next:null};return this.head?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),this.size++,this.size};Oe.prototype.unshift=function(r){var e={item:r,next:null};return this.head?(this.head.next||(this.tail=this.head),e.next=this.head,this.head=e):(this.head=e,this.tail=e),this.size++,this.size};Oe.prototype.shift=function(){if(this.size){var r=this.head;return this.head=r.next,this.size--,r.item}};Oe.prototype.forEach=function(r,e){if(this.size){e=arguments.length>1?e:this;for(var t=this.head,i=0;t;)r.call(e,t.item,i,this),t=t.next,i++}};Oe.prototype.toArray=function(){if(!this.size)return[];for(var r=new Array(this.size),e=0,t=this.size,i=this.head;e<t;e++)r[e]=i.item,i=i.next;return r};Oe.prototype.values=function(){var r=this.head;return new W1(function(){if(!r)return{done:!0};var e=r.item;return r=r.next,{value:e,done:!1}})};Oe.prototype.entries=function(){var r=this.head,e=0;return new W1(function(){if(!r)return{done:!0};var t=r.item;return r=r.next,e++,{value:[e-1,t],done:!1}})};typeof Symbol<"u"&&(Oe.prototype[Symbol.iterator]=Oe.prototype.values);Oe.prototype.toString=function(){return this.toArray().join(",")};Oe.prototype.toJSON=function(){return this.toArray()};Oe.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:Oe,enumerable:!1}),r};typeof Symbol<"u"&&(Oe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Oe.prototype.inspect);Oe.from=function(r){var e=new Oe;return w4(r,function(t){e.push(t)}),e};U1.exports=Oe});var Tf=_((XX,B1)=>{var am=Ge(),O4=_e(),T4=ht(),S4=Ot();function Ie(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var i=T4.getPointerArray(t);this.forward=new i(t),this.backward=new i(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items={}}Ie.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};Ie.prototype.splayOnTop=function(r){var e=this.head;if(this.head===r)return this;var t=this.backward[r],i=this.forward[r];return this.tail===r?this.tail=t:this.backward[i]=t,this.forward[t]=i,this.backward[e]=r,this.head=r,this.forward[r]=e,this};Ie.prototype.set=function(r,e){var t=this.items[r];if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],delete this.items[this.K[t]]),this.items[r]=t,this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Ie.prototype.setpop=function(r,e){var t=null,i=null,n=this.items[r];return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],delete this.items[this.K[n]]),this.items[r]=n,this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Ie.prototype.has=function(r){return r in this.items};Ie.prototype.get=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};Ie.prototype.peek=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.V[e]};Ie.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.size,n=this.head,s=this.K,u=this.V,l=this.forward;t<i;)r.call(e,u[n],s[n],this),n=l[n],t++};Ie.prototype.keys=function(){var r=0,e=this.size,t=this.head,i=this.K,n=this.forward;return new am(function(){if(r>=e)return{done:!0};var s=i[t];return r++,r<e&&(t=n[t]),{done:!1,value:s}})};Ie.prototype.values=function(){var r=0,e=this.size,t=this.head,i=this.V,n=this.forward;return new am(function(){if(r>=e)return{done:!0};var s=i[t];return r++,r<e&&(t=n[t]),{done:!1,value:s}})};Ie.prototype.entries=function(){var r=0,e=this.size,t=this.head,i=this.K,n=this.V,s=this.forward;return new am(function(){if(r>=e)return{done:!0};var u=i[t],l=n[t];return r++,r<e&&(t=s[t]),{done:!1,value:[u,l]}})};typeof Symbol<"u"&&(Ie.prototype[Symbol.iterator]=Ie.prototype.entries);Ie.prototype.inspect=function(){for(var r=new Map,e=this.entries(),t;t=e.next(),!t.done;)r.set(t.value[0],t.value[1]);return Object.defineProperty(r,"constructor",{value:Ie,enumerable:!1}),r};typeof Symbol<"u"&&(Ie.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ie.prototype.inspect);Ie.from=function(r,e,t,i){if(arguments.length<2){if(i=S4.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Ie(e,t,i);return O4(r,function(s,u){n.set(u,s)}),n};B1.exports=Ie});var $1=_((JX,H1)=>{var qo=Tf(),A4=_e(),C4=ht(),E4=Ot();function Sr(r,e,t){arguments.length<2?qo.call(this,r):qo.call(this,r,e,t);var i=C4.getPointerArray(this.capacity);this.deleted=new i(this.capacity),this.deletedSize=0}for(sm in qo.prototype)Sr.prototype[sm]=qo.prototype[sm];var sm;typeof Symbol<"u"&&(Sr.prototype[Symbol.iterator]=qo.prototype[Symbol.iterator]);Sr.prototype.clear=function(){qo.prototype.clear.call(this),this.deletedSize=0};Sr.prototype.set=function(r,e){var t=this.items[r];if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?(this.deletedSize>0?t=this.deleted[--this.deletedSize]:t=this.size,this.size++):(t=this.tail,this.tail=this.backward[t],delete this.items[this.K[t]]),this.items[r]=t,this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Sr.prototype.setpop=function(r,e){var t=null,i=null,n=this.items[r];return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?(this.deletedSize>0?n=this.deleted[--this.deletedSize]:n=this.size,this.size++):(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],delete this.items[this.K[n]]),this.items[r]=n,this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Sr.prototype.delete=function(r){var e=this.items[r];if(typeof e>"u")return!1;if(delete this.items[r],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var t=this.backward[e],i=this.forward[e];return this.head===e&&(this.head=i),this.tail===e&&(this.tail=t),this.forward[t]=i,this.backward[i]=t,this.size--,this.deleted[this.deletedSize++]=e,!0};Sr.prototype.remove=function(r,e=void 0){var t=this.items[r];if(typeof t>"u")return e;var i=this.V[t];if(delete this.items[r],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,i;var n=this.backward[t],s=this.forward[t];return this.head===t&&(this.head=s),this.tail===t&&(this.tail=n),this.forward[n]=s,this.backward[s]=n,this.size--,this.deleted[this.deletedSize++]=t,i};Sr.from=function(r,e,t,i){if(arguments.length<2){if(i=E4.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Sr(e,t,i);return A4(r,function(s,u){n.set(u,s)}),n};H1.exports=Sr});var um=_((ZX,Y1)=>{var Mo=Tf(),q4=_e(),M4=ht(),L4=Ot();function et(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-map: capacity should be a finite positive integer.");var i=M4.getPointerArray(t);this.forward=new i(t),this.backward=new i(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items=new Map}et.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()};et.prototype.set=function(r,e){var t=this.items.get(r);if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],this.items.delete(this.K[t])),this.items.set(r,t),this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};et.prototype.setpop=function(r,e){var t=null,i=null,n=this.items.get(r);return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],this.items.delete(this.K[n])),this.items.set(r,n),this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};et.prototype.has=function(r){return this.items.has(r)};et.prototype.get=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};et.prototype.peek=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.V[e]};et.prototype.splayOnTop=Mo.prototype.splayOnTop;et.prototype.forEach=Mo.prototype.forEach;et.prototype.keys=Mo.prototype.keys;et.prototype.values=Mo.prototype.values;et.prototype.entries=Mo.prototype.entries;typeof Symbol<"u"&&(et.prototype[Symbol.iterator]=et.prototype.entries);et.prototype.inspect=Mo.prototype.inspect;et.from=function(r,e,t,i){if(arguments.length<2){if(i=L4.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new et(e,t,i);return q4(r,function(s,u){n.set(u,s)}),n};Y1.exports=et});var K1=_((eJ,Q1)=>{var Lo=um(),x4=_e(),j4=ht(),I4=Ot();function Ar(r,e,t){arguments.length<2?Lo.call(this,r):Lo.call(this,r,e,t);var i=j4.getPointerArray(this.capacity);this.deleted=new i(this.capacity),this.deletedSize=0}for(cm in Lo.prototype)Ar.prototype[cm]=Lo.prototype[cm];var cm;typeof Symbol<"u"&&(Ar.prototype[Symbol.iterator]=Lo.prototype[Symbol.iterator]);Ar.prototype.clear=function(){Lo.prototype.clear.call(this),this.deletedSize=0};Ar.prototype.set=function(r,e){var t=this.items.get(r);if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?(this.deletedSize>0?t=this.deleted[--this.deletedSize]:t=this.size,this.size++):(t=this.tail,this.tail=this.backward[t],this.items.delete(this.K[t])),this.items.set(r,t),this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Ar.prototype.setpop=function(r,e){var t=null,i=null,n=this.items.get(r);return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?(this.deletedSize>0?n=this.deleted[--this.deletedSize]:n=this.size,this.size++):(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],this.items.delete(this.K[n])),this.items.set(r,n),this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Ar.prototype.delete=function(r){var e=this.items.get(r);if(typeof e>"u")return!1;if(this.items.delete(r),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var t=this.backward[e],i=this.forward[e];return this.head===e&&(this.head=i),this.tail===e&&(this.tail=t),this.forward[t]=i,this.backward[i]=t,this.size--,this.deleted[this.deletedSize++]=e,!0};Ar.prototype.remove=function(r,e=void 0){var t=this.items.get(r);if(typeof t>"u")return e;var i=this.V[t];if(this.items.delete(r),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,i;var n=this.backward[t],s=this.forward[t];return this.head===t&&(this.head=s),this.tail===t&&(this.tail=n),this.forward[n]=s,this.backward[s]=n,this.size--,this.deleted[this.deletedSize++]=t,i};Ar.from=function(r,e,t,i){if(arguments.length<2){if(i=I4.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-map.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Ar(e,t,i);return x4(r,function(s,u){n.set(u,s)}),n};Q1.exports=Ar});var J1=_((tJ,X1)=>{var k4=Ge(),F4=_e(),D4=Pf(),R4=function(r,e){return r[1]>e[1]?-1:r[1]<e[1]?1:0};function ae(){this.items=new Map,Object.defineProperty(this.items,"constructor",{value:ae,enumerable:!1}),this.clear()}ae.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};ae.prototype.add=function(r,e){if(e===0)return this;if(e<0)return this.remove(r,-e);if(e=e||1,typeof e!="number")throw new Error("mnemonist/multi-set.add: given count should be a number.");this.size+=e;let t=this.items.get(r);return t===void 0?this.dimension++:e+=t,this.items.set(r,e),this};ae.prototype.set=function(r,e){var t;if(typeof e!="number")throw new Error("mnemonist/multi-set.set: given count should be a number.");return e<=0?(t=this.items.get(r),typeof t<"u"&&(this.size-=t,this.dimension--),this.items.delete(r),this):(e=e||1,t=this.items.get(r),typeof t=="number"?this.items.set(r,t+e):(this.dimension++,this.items.set(r,e)),this.size+=e,this)};ae.prototype.has=function(r){return this.items.has(r)};ae.prototype.delete=function(r){var e=this.items.get(r);return e===0?!1:(this.size-=e,this.dimension--,this.items.delete(r),!0)};ae.prototype.remove=function(r,e){if(e!==0){if(e<0)return this.add(r,-e);if(e=e||1,typeof e!="number")throw new Error("mnemonist/multi-set.remove: given count should be a number.");var t=this.items.get(r);if(!(typeof t>"u")){var i=Math.max(0,t-e);i===0?(this.items.delete(r),this.size-=t,this.dimension--):(this.items.set(r,i),this.size-=e)}}};ae.prototype.edit=function(r,e){var t=this.multiplicity(r);if(t!==0){var i=this.multiplicity(e);return this.items.set(e,t+i),this.items.delete(r),this}};ae.prototype.multiplicity=function(r){var e=this.items.get(r);return typeof e>"u"?0:e};ae.prototype.get=ae.prototype.multiplicity;ae.prototype.count=ae.prototype.multiplicity;ae.prototype.frequency=function(r){if(this.size===0)return 0;var e=this.multiplicity(r);return e/this.size};ae.prototype.top=function(r){if(typeof r!="number"||r<=0)throw new Error("mnemonist/multi-set.top: n must be a number > 0.");for(var e=new D4(Array,R4,r),t=this.items.entries(),i;i=t.next(),!i.done;)e.push(i.value);return e.consume()};ae.prototype.forEach=function(r,e){e=arguments.length>1?e:this;var t;this.items.forEach(function(i,n){for(t=0;t<i;t++)r.call(e,n,n)})};ae.prototype.forEachMultiplicity=function(r,e){e=arguments.length>1?e:this,this.items.forEach(r,e)};ae.prototype.keys=function(){return this.items.keys()};ae.prototype.values=function(){var r=this.items.entries(),e=!1,t,i,n,s;return new k4(function u(){if(!e){if(t=r.next(),t.done)return{done:!0};e=!0,i=t.value[0],n=t.value[1],s=0}return s>=n?(e=!1,u()):(s++,{done:!1,value:i})})};ae.prototype.multiplicities=function(){return this.items.entries()};typeof Symbol<"u"&&(ae.prototype[Symbol.iterator]=ae.prototype.values);ae.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(ae.prototype[Symbol.for("nodejs.util.inspect.custom")]=ae.prototype.inspect);ae.prototype.toJSON=function(){return this.items};ae.from=function(r){var e=new ae;return F4(r,function(t){e.add(t)}),e};ae.isSubset=function(r,e){var t=r.multiplicities(),i,n,s;if(r===e)return!0;if(r.dimension>e.dimension)return!1;for(;i=t.next(),!i.done;)if(n=i.value[0],s=i.value[1],e.multiplicity(n)<s)return!1;return!0};ae.isSuperset=function(r,e){return ae.isSubset(e,r)};X1.exports=ae});var nw=_((rJ,iw)=>{var z4=Ge(),N4=_e();function V4(r,e,t){return((Math.pow(r,2)-Math.pow(Math.abs(e-t),2))/2|0)+r+1}function W4(r,e){for(var t=0,i=0,n=e+1;i<n;i++)t+=V4(r,e,i);return t}function U4(r,e){return r.length>e.length?-1:r.length<e.length?1:r<e?-1:r>e?1:0}function Z1(r,e){var t=r+1,i=e/t|0,n=i+1,s,u,l=e-i*t,h=t-l,p=new Array(r+1);for(s=0;s<h;s++)p[s]=[s*i,i];var v=(s-1)*i+i;for(u=0;u<l;u++)p[s+u]=[v+u*n,n];return p}function ew(r,e){var t=e.length,i=r+1,n=t/i|0,s=n+1,u,l,h,p=t-n*i,v=i-p,b=new Array(r+1);for(l=0;l<v;l++)u=l*n,b[l]=e.slice(u,u+n);var T=(l-1)*n+n;for(h=0;h<p;h++)u=T+h*s,b[l+h]=e.slice(u,u+s);return b}function G4(r,e,t){if(e===0)return 0;var i=t.length,n=r+1,s=i/n|0,u=s+1,l=i-s*n,h=n-l;if(e<=h-1)return e*s;var p=e-h;return h*s+p*u}function tw(r,e,t,i,n,s){var u=n-t,l=n+t,h=r-t,p=n+e-h,v=n+e+h,b=i-s;return[Math.max(0,u,p),Math.min(l,v,b)]}function rw(r,e,t,i,n,s){var u=e.length,l=u-t,h=tw(r,l,i,u,n,s),p=h[0],v=h[1],b="",T=[],S,E,M;for(E=p,M=v+1;E<M;E++)S=e.slice(E,E+s),S!==b&&(T.push(S),b=S);return T}function Le(r,e){if(typeof r!="function")throw new Error("mnemonist/passjoin-index: `levenshtein` should be a function returning edit distance between two strings.");if(typeof e!="number"||e<1)throw new Error("mnemonist/passjoin-index: `k` should be a number > 0");this.levenshtein=r,this.k=e,this.clear()}Le.prototype.clear=function(){this.size=0,this.strings=[],this.invertedIndices={}};Le.prototype.add=function(r){var e=r.length,t=this.size;this.strings.push(r),this.size++;var i=ew(this.k,r),n=this.invertedIndices[e];typeof n>"u"&&(n={},this.invertedIndices[e]=n);var s,u,l,h,p;for(h=0,p=i.length;h<p;h++)s=i[h],l=s+h,u=n[l],typeof u>"u"?(u=[t],n[l]=u):u.push(t);return this};Le.prototype.search=function(r){var e=r.length,t=this.k,i=new Set,n,s,u,l,h,p,v,b,T,S,E,M,x,D,N;for(b=Math.max(0,e-t),T=e+t+1;b<T;b++){var Y=this.invertedIndices[b];if(!(typeof Y>"u")){for(v=Z1(t,b),S=0,E=v.length;S<E;S++)for(u=v[S][0],l=v[S][1],p=rw(t,r,b,S,u,l),p.length||(p=[""]),M=0,x=p.length;M<x;M++)if(h=p[M]+S,n=Y[h],!(typeof n>"u"))for(D=0,N=n.length;D<N;D++)s=this.strings[n[D]],(e<=t&&b<=t||!i.has(s)&&this.levenshtein(r,s)<=t)&&i.add(s)}}return i};Le.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.strings.length;t<i;t++)r.call(e,this.strings[t],t,this)};Le.prototype.values=function(){var r=this.strings,e=r.length,t=0;return new z4(function(){if(t>=e)return{done:!0};var i=r[t];return t++,{value:i,done:!1}})};typeof Symbol<"u"&&(Le.prototype[Symbol.iterator]=Le.prototype.values);Le.prototype.inspect=function(){var r=this.strings.slice();return Object.defineProperty(r,"constructor",{value:Le,enumerable:!1}),r};typeof Symbol<"u"&&(Le.prototype[Symbol.for("nodejs.util.inspect.custom")]=Le.prototype.inspect);Le.from=function(r,e,t){var i=new Le(e,t);return N4(r,function(n){i.add(n)}),i};Le.countKeys=W4;Le.comparator=U4;Le.partition=Z1;Le.segments=ew;Le.segmentPos=G4;Le.multiMatchAwareInterval=tw;Le.multiMatchAwareSubstrings=rw;iw.exports=Le});var sw=_((iJ,aw)=>{var ow=Ge(),B4=_e();function xe(){this.clear()}xe.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};xe.prototype.enqueue=function(r){return this.items.push(r),++this.size};xe.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}};xe.prototype.peek=function(){if(this.size)return this.items[this.offset]};xe.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.offset,i=0,n=this.items.length;t<n;t++,i++)r.call(e,this.items[t],i,this)};xe.prototype.toArray=function(){return this.items.slice(this.offset)};xe.prototype.values=function(){var r=this.items,e=this.offset;return new ow(function(){if(e>=r.length)return{done:!0};var t=r[e];return e++,{value:t,done:!1}})};xe.prototype.entries=function(){var r=this.items,e=this.offset,t=0;return new ow(function(){if(e>=r.length)return{done:!0};var i=r[e];return e++,{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(xe.prototype[Symbol.iterator]=xe.prototype.values);xe.prototype.toString=function(){return this.toArray().join(",")};xe.prototype.toJSON=function(){return this.toArray()};xe.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:xe,enumerable:!1}),r};typeof Symbol<"u"&&(xe.prototype[Symbol.for("nodejs.util.inspect.custom")]=xe.prototype.inspect);xe.from=function(r){var e=new xe;return B4(r,function(t){e.enqueue(t)}),e};xe.of=function(){return xe.from(arguments)};aw.exports=xe});var lw=_((nJ,cw)=>{var uw=Ge(),H4=_e();function je(){this.clear()}je.prototype.clear=function(){this.items=[],this.size=0};je.prototype.push=function(r){return this.items.push(r),++this.size};je.prototype.pop=function(){if(this.size!==0)return this.size--,this.items.pop()};je.prototype.peek=function(){return this.items[this.size-1]};je.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.items.length;t<i;t++)r.call(e,this.items[i-t-1],t,this)};je.prototype.toArray=function(){for(var r=new Array(this.size),e=this.size-1,t=this.size;t--;)r[t]=this.items[e-t];return r};je.prototype.values=function(){var r=this.items,e=r.length,t=0;return new uw(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return t++,{value:i,done:!1}})};je.prototype.entries=function(){var r=this.items,e=r.length,t=0;return new uw(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(je.prototype[Symbol.iterator]=je.prototype.values);je.prototype.toString=function(){return this.toArray().join(",")};je.prototype.toJSON=function(){return this.toArray()};je.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:je,enumerable:!1}),r};typeof Symbol<"u"&&(je.prototype[Symbol.for("nodejs.util.inspect.custom")]=je.prototype.inspect);je.from=function(r){var e=new je;return H4(r,function(t){e.push(t)}),e};je.of=function(){return je.from(arguments)};cw.exports=je});var fw=_(Ne=>{Ne.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var r=new Set,e=1/0,t=null,i,n,s=arguments.length;for(n=0;n<s;n++){if(i=arguments[n],i.size===0)return r;i.size<e&&(e=i.size,t=i)}for(var u=t.values(),l,h,p,v;l=u.next(),!l.done;){for(h=l.value,p=!0,n=0;n<s;n++)if(v=arguments[n],v!==t&&!v.has(h)){p=!1;break}p&&r.add(h)}return r};Ne.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var r=new Set,e,t=arguments.length,i,n;for(e=0;e<t;e++)for(i=arguments[e].values();n=i.next(),!n.done;)r.add(n.value);return r};Ne.difference=function(r,e){if(!r.size)return new Set;if(!e.size)return new Set(r);for(var t=new Set,i=r.values(),n;n=i.next(),!n.done;)e.has(n.value)||t.add(n.value);return t};Ne.symmetricDifference=function(r,e){for(var t=new Set,i=r.values(),n;n=i.next(),!n.done;)e.has(n.value)||t.add(n.value);for(i=e.values();n=i.next(),!n.done;)r.has(n.value)||t.add(n.value);return t};Ne.isSubset=function(r,e){var t=r.values(),i;if(r===e)return!0;if(r.size>e.size)return!1;for(;i=t.next(),!i.done;)if(!e.has(i.value))return!1;return!0};Ne.isSuperset=function(r,e){return Ne.isSubset(e,r)};Ne.add=function(r,e){for(var t=e.values(),i;i=t.next(),!i.done;)r.add(i.value)};Ne.subtract=function(r,e){for(var t=e.values(),i;i=t.next(),!i.done;)r.delete(i.value)};Ne.intersect=function(r,e){for(var t=r.values(),i;i=t.next(),!i.done;)e.has(i.value)||r.delete(i.value)};Ne.disjunct=function(r,e){for(var t=r.values(),i,n=[];i=t.next(),!i.done;)e.has(i.value)&&n.push(i.value);for(t=e.values();i=t.next(),!i.done;)r.has(i.value)||r.add(i.value);for(var s=0,u=n.length;s<u;s++)r.delete(n[s])};Ne.intersectionSize=function(r,e){var t;if(r.size>e.size&&(t=r,r=e,e=t),r.size===0)return 0;if(r===e)return r.size;for(var i=r.values(),n,s=0;n=i.next(),!n.done;)e.has(n.value)&&s++;return s};Ne.unionSize=function(r,e){var t=Ne.intersectionSize(r,e);return r.size+e.size-t};Ne.jaccard=function(r,e){var t=Ne.intersectionSize(r,e);if(t===0)return 0;var i=r.size+e.size-t;return t/i};Ne.overlap=function(r,e){var t=Ne.intersectionSize(r,e);return t===0?0:t/Math.min(r.size,e.size)}});var pw=_((aJ,hw)=>{var $4=Ge(),Y4=ht().getPointerArray;function jt(r){var e=Y4(r);this.start=0,this.size=0,this.capacity=r,this.dense=new e(r),this.sparse=new e(r)}jt.prototype.clear=function(){this.start=0,this.size=0};jt.prototype.has=function(r){if(this.size===0)return!1;var e=this.sparse[r],t=e<this.capacity&&e>=this.start&&e<this.start+this.size||e<(this.start+this.size)%this.capacity;return t&&this.dense[e]===r};jt.prototype.enqueue=function(r){var e=this.sparse[r];if(this.size!==0){var t=e<this.capacity&&e>=this.start&&e<this.start+this.size||e<(this.start+this.size)%this.capacity;if(t&&this.dense[e]===r)return this}return e=(this.start+this.size)%this.capacity,this.dense[e]=r,this.sparse[r]=e,this.size++,this};jt.prototype.dequeue=function(){if(this.size!==0){var r=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var e=this.dense[r];return this.sparse[e]=this.capacity,e}};jt.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.capacity,i=this.size,n=this.start,s=0;s<i;)r.call(e,this.dense[n],s,this),n++,s++,n===t&&(n=0)};jt.prototype.values=function(){var r=this.dense,e=this.capacity,t=this.size,i=this.start,n=0;return new $4(function(){if(n>=t)return{done:!0};var s=r[i];return i++,n++,i===e&&(i=0),{value:s,done:!1}})};typeof Symbol<"u"&&(jt.prototype[Symbol.iterator]=jt.prototype.values);jt.prototype.inspect=function(){var r=[];return this.forEach(function(e){r.push(e)}),Object.defineProperty(r,"constructor",{value:jt,enumerable:!1}),r.capacity=this.capacity,r};typeof Symbol<"u"&&(jt.prototype[Symbol.for("nodejs.util.inspect.custom")]=jt.prototype.inspect);hw.exports=jt});var vw=_((sJ,dw)=>{var lm=Ge(),Q4=ht().getPointerArray;function at(r,e){arguments.length<2&&(e=r,r=Array);var t=Q4(e);this.size=0,this.length=e,this.dense=new t(e),this.sparse=new t(e),this.vals=new r(e)}at.prototype.clear=function(){this.size=0};at.prototype.has=function(r){var e=this.sparse[r];return e<this.size&&this.dense[e]===r};at.prototype.get=function(r){var e=this.sparse[r];if(e<this.size&&this.dense[e]===r)return this.vals[e]};at.prototype.set=function(r,e){var t=this.sparse[r];return t<this.size&&this.dense[t]===r?(this.vals[t]=e,this):(this.dense[this.size]=r,this.sparse[r]=this.size,this.vals[this.size]=e,this.size++,this)};at.prototype.delete=function(r){var e=this.sparse[r];return e>=this.size||this.dense[e]!==r?!1:(e=this.dense[this.size-1],this.dense[this.sparse[r]]=e,this.sparse[e]=this.sparse[r],this.size--,!0)};at.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0;t<this.size;t++)r.call(e,this.vals[t],this.dense[t])};at.prototype.keys=function(){var r=this.size,e=this.dense,t=0;return new lm(function(){if(t<r){var i=e[t];return t++,{value:i}}return{done:!0}})};at.prototype.values=function(){var r=this.size,e=this.vals,t=0;return new lm(function(){if(t<r){var i=e[t];return t++,{value:i}}return{done:!0}})};at.prototype.entries=function(){var r=this.size,e=this.dense,t=this.vals,i=0;return new lm(function(){if(i<r){var n=[e[i],t[i]];return i++,{value:n}}return{done:!0}})};typeof Symbol<"u"&&(at.prototype[Symbol.iterator]=at.prototype.entries);at.prototype.inspect=function(){for(var r=new Map,e=0;e<this.size;e++)r.set(this.dense[e],this.vals[e]);return Object.defineProperty(r,"constructor",{value:at,enumerable:!1}),r.length=this.length,this.vals.constructor!==Array&&(r.type=this.vals.constructor.name),r};typeof Symbol<"u"&&(at.prototype[Symbol.for("nodejs.util.inspect.custom")]=at.prototype.inspect);dw.exports=at});var yw=_((uJ,mw)=>{var K4=Ge(),X4=ht().getPointerArray;function It(r){var e=X4(r);this.size=0,this.length=r,this.dense=new e(r),this.sparse=new e(r)}It.prototype.clear=function(){this.size=0};It.prototype.has=function(r){var e=this.sparse[r];return e<this.size&&this.dense[e]===r};It.prototype.add=function(r){var e=this.sparse[r];return e<this.size&&this.dense[e]===r?this:(this.dense[this.size]=r,this.sparse[r]=this.size,this.size++,this)};It.prototype.delete=function(r){var e=this.sparse[r];return e>=this.size||this.dense[e]!==r?!1:(e=this.dense[this.size-1],this.dense[this.sparse[r]]=e,this.sparse[e]=this.sparse[r],this.size--,!0)};It.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t,i=0;i<this.size;i++)t=this.dense[i],r.call(e,t,t)};It.prototype.values=function(){var r=this.size,e=this.dense,t=0;return new K4(function(){if(t<r){var i=e[t];return t++,{value:i}}return{done:!0}})};typeof Symbol<"u"&&(It.prototype[Symbol.iterator]=It.prototype.values);It.prototype.inspect=function(){for(var r=new Set,e=0;e<this.size;e++)r.add(this.dense[e]);return Object.defineProperty(r,"constructor",{value:It,enumerable:!1}),r.length=this.length,r};typeof Symbol<"u"&&(It.prototype[Symbol.for("nodejs.util.inspect.custom")]=It.prototype.inspect);mw.exports=It});var ww=_((cJ,Pw)=>{var J4=_e(),Z4=2,e5=2,t5=new Set([0,1,2]),r5={0:"Returns only the top suggestion",1:"Returns suggestions with the smallest edit distance",2:"Returns every suggestion (no early termination)"};function Sf(r){var e=new Set;return typeof r=="number"&&e.add(r),{suggestions:e,count:0}}function gw(r,e,t){return{term:r||"",distance:e||0,count:t||0}}function _w(r,e,t,i){i=i||new Set,e++;var n,s=r.length,u;if(s>1)for(u=0;u<s;u++)n=r.substring(0,u)+r.substring(u+1),i.has(n)||(i.add(n),e<t&&_w(n,e,t,i));return i}function i5(r,e,t,i,n,s){var u=t.suggestions.values().next().value;e<2&&t.suggestions.size>0&&r[u].length-s.length>i.length-s.length&&(t.suggestions=new Set,t.count=0),(e===2||!t.suggestions.size||r[u].length-s.length>=i.length-s.length)&&t.suggestions.add(n)}function bw(r,e){var t=r.length,i=e.length,n=[[]],s=t+i,u=new Map,l,h,p;for(n[0][0]=s,l=0;l<=t;l++)n[l+1]||(n[l+1]=[]),n[l+1][1]=l,n[l+1][0]=s;for(p=0;p<=i;p++)n[1][p+1]=p,n[0][p+1]=s;var v=r+e,b;for(l=0,h=v.length;l<h;l++)b=v[l],u.has(b)||u.set(b,0);for(l=1;l<=t;l++){var T=0;for(p=1;p<=i;p++){var S=u.get(e[p-1]),E=T;r[l-1]===e[p-1]?(n[l+1][p+1]=n[l][p],T=p):n[l+1][p+1]=Math.min(n[l][p],n[l+1][p],n[l][p+1])+1,n[l+1][p+1]=Math.min(n[l+1][p+1],n[S][E]+(l-S-1)+1+(p-E-1))}u.set(r[l-1],l)}return n[t+1][i+1]}function n5(r,e,t,i,n,s){var u=s.length;if(u-i>n)return[];for(var l=[s],h=new Set,p=new Set,v=[],b,T;l.length>0&&(b=l.shift(),!(t<2&&v.length>0&&u-b.length>v[0].distance));){if(T=r[b],T!==void 0){if(typeof T=="number"&&(T=Sf(T)),T.count>0&&!p.has(b)){p.add(b);var S=gw(b,u-b.length,T.count);if(v.push(S),t<2&&u-b.length===0)break}T.suggestions.forEach(D=>{var N=e[D];if(!p.has(N)){p.add(N);var Y=0;if(s!==N)if(N.length===b.length)Y=u-b.length;else if(u===b.length)Y=N.length-b.length;else{for(var ie=0,pe=0,ke=N.length;ie<ke&&ie<u&&N[ie]===s[ie];)ie++;for(;pe<ke-ie&&pe<u&&N[ke-pe-1]===s[u-pe-1];)pe++;ie>0||pe>0?Y=bw(N.substr(ie,ke-ie-pe),s.substr(ie,u-ie-pe)):Y=bw(N,s)}if(t<2&&v.length>0&&v[0].distance>Y&&(v=[]),!(t<2&&v.length>0&&Y>v[0].distance)&&Y<=i){var dt=r[N];dt!==void 0&&v.push(gw(N,Y,dt.count))}}})}if(u-b.length<i){if(t<2&&v.length>0&&u-b.length>=v[0].distance)continue;for(var E=0,M=b.length;E<M;E++){var x=b.substring(0,E)+b.substring(E+1);h.has(x)||(h.add(x),l.push(x))}}}return t===0?v.slice(0,1):v}function Cr(r){if(r=r||{},this.clear(),this.maxDistance=typeof r.maxDistance=="number"?r.maxDistance:Z4,this.verbosity=typeof r.verbosity=="number"?r.verbosity:e5,typeof this.maxDistance!="number"||this.maxDistance<=0)throw Error("mnemonist/SymSpell.constructor: invalid `maxDistance` option. Should be a integer greater than 0.");if(!t5.has(this.verbosity))throw Error("mnemonist/SymSpell.constructor: invalid `verbosity` option. Should be either 0, 1 or 2.")}Cr.prototype.clear=function(){this.size=0,this.dictionary=Object.create(null),this.maxLength=0,this.words=[]};Cr.prototype.add=function(r){var e=this.dictionary[r];if(e!==void 0?(typeof e=="number"&&(e=Sf(e),this.dictionary[r]=e),e.count++):(e=Sf(),e.count++,this.dictionary[r]=e,r.length>this.maxLength&&(this.maxLength=r.length)),e.count===1){var t=this.words.length;this.words.push(r);var i=_w(r,0,this.maxDistance);i.forEach(n=>{var s=this.dictionary[n];s!==void 0?(typeof s=="number"&&(s=Sf(s),this.dictionary[n]=s),s.suggestions.has(t)||i5(this.words,this.verbosity,s,r,t,n)):this.dictionary[n]=t})}return this.size++,this};Cr.prototype.search=function(r){return n5(this.dictionary,this.words,this.verbosity,this.maxDistance,this.maxLength,r)};Cr.prototype.inspect=function(){var r=[];r.size=this.size,r.maxDistance=this.maxDistance,r.verbosity=this.verbosity,r.behavior=r5[this.verbosity];for(var e in this.dictionary)typeof this.dictionary[e]=="object"&&this.dictionary[e].count&&r.push([e,this.dictionary[e].count]);return Object.defineProperty(r,"constructor",{value:Cr,enumerable:!1}),r};typeof Symbol<"u"&&(Cr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Cr.prototype.inspect);Cr.from=function(r,e){var t=new Cr(e);return J4(r,function(i){t.add(i)}),t};Pw.exports=Cr});var fm=_((lJ,Ow)=>{var o5=_e(),xo=Ge(),He=String.fromCharCode(0);function Te(r){this.mode=r===Array?"array":"string",this.clear()}Te.prototype.clear=function(){this.root={},this.size=0};Te.prototype.set=function(r,e){for(var t=this.root,i,n=0,s=r.length;n<s;n++)i=r[n],t=t[i]||(t[i]={});return He in t||this.size++,t[He]=e,this};Te.prototype.update=function(r,e){for(var t=this.root,i,n=0,s=r.length;n<s;n++)i=r[n],t=t[i]||(t[i]={});return He in t||this.size++,t[He]=e(t[He]),this};Te.prototype.get=function(r){var e=this.root,t,i,n;for(i=0,n=r.length;i<n;i++)if(t=r[i],e=e[t],typeof e>"u")return;if(He in e)return e[He]};Te.prototype.delete=function(r){var e=this.root,t=null,i=null,n,s,u,l;for(u=0,l=r.length;u<l;u++){if(s=r[u],n=e,e=e[s],typeof e>"u")return!1;t!==null?Object.keys(e).length>1&&(t=null,i=null):Object.keys(e).length<2&&(t=n,i=s)}return He in e?(this.size--,t?delete t[i]:delete e[He],!0):!1};Te.prototype.has=function(r){for(var e=this.root,t,i=0,n=r.length;i<n;i++)if(t=r[i],e=e[t],typeof e>"u")return!1;return He in e};Te.prototype.find=function(r){var e=typeof r=="string",t=this.root,i=[],n,s,u;for(s=0,u=r.length;s<u;s++)if(n=r[s],t=t[n],typeof t>"u")return i;for(var l=[t],h=[r],p;l.length;){r=h.pop(),t=l.pop();for(p in t){if(p===He){i.push([r,t[He]]);continue}l.push(t[p]),h.push(e?r+p:r.concat(p))}}return i};Te.prototype.values=function(r){var e=this.root,t=[],i,n,s;if(r){for(n=0,s=r.length;n<s;n++)if(i=r[n],e=e[i],typeof e>"u")return xo.empty()}return t.push(e),new xo(function(){for(var u,l=!1,h;t.length;){u=t.pop();for(h in u){if(h===He){l=!0;continue}t.push(u[h])}if(l)return{done:!1,value:u[He]}}return{done:!0}})};Te.prototype.prefixes=function(r){var e=this.root,t=[],i=[],n,s,u,l=this.mode==="string";if(r){for(s=0,u=r.length;s<u;s++)if(n=r[s],e=e[n],typeof e>"u")return xo.empty()}else r=l?"":[];return t.push(e),i.push(r),new xo(function(){for(var h,p,v=!1,b;t.length;){h=t.pop(),p=i.pop();for(b in h){if(b===He){v=!0;continue}t.push(h[b]),i.push(l?p+b:p.concat(b))}if(v)return{done:!1,value:p}}return{done:!0}})};Te.prototype.keys=Te.prototype.prefixes;Te.prototype.entries=function(r){var e=this.root,t=[],i=[],n,s,u,l=this.mode==="string";if(r){for(s=0,u=r.length;s<u;s++)if(n=r[s],e=e[n],typeof e>"u")return xo.empty()}else r=l?"":[];return t.push(e),i.push(r),new xo(function(){for(var h,p,v=!1,b;t.length;){h=t.pop(),p=i.pop();for(b in h){if(b===He){v=!0;continue}t.push(h[b]),i.push(l?p+b:p.concat(b))}if(v)return{done:!1,value:[p,h[He]]}}return{done:!0}})};typeof Symbol<"u"&&(Te.prototype[Symbol.iterator]=Te.prototype.entries);Te.prototype.inspect=function(){for(var r=new Array(this.size),e=this.entries(),t,i=0;t=e.next(),!t.done;)r[i++]=t.value;return Object.defineProperty(r,"constructor",{value:Te,enumerable:!1}),r};typeof Symbol<"u"&&(Te.prototype[Symbol.for("nodejs.util.inspect.custom")]=Te.prototype.inspect);Te.prototype.toJSON=function(){return this.root};Te.from=function(r){var e=new Te;return o5(r,function(t,i){e.set(i,t)}),e};Te.SENTINEL=He;Ow.exports=Te});var Aw=_((fJ,Sw)=>{var a5=_e(),Tw=fm(),Af=String.fromCharCode(0);function $e(r){this.mode=r===Array?"array":"string",this.clear()}for(hm in Tw.prototype)$e.prototype[hm]=Tw.prototype[hm];var hm;delete $e.prototype.set;delete $e.prototype.get;delete $e.prototype.values;delete $e.prototype.entries;$e.prototype.add=function(r){for(var e=this.root,t,i=0,n=r.length;i<n;i++)t=r[i],e=e[t]||(e[t]={});return Af in e||this.size++,e[Af]=!0,this};$e.prototype.find=function(r){var e=typeof r=="string",t=this.root,i=[],n,s,u;for(s=0,u=r.length;s<u;s++)if(n=r[s],t=t[n],typeof t>"u")return i;for(var l=[t],h=[r],p;l.length;){r=h.pop(),t=l.pop();for(p in t){if(p===Af){i.push(r);continue}l.push(t[p]),h.push(e?r+p:r.concat(p))}}return i};typeof Symbol<"u"&&($e.prototype[Symbol.iterator]=$e.prototype.keys);$e.prototype.inspect=function(){for(var r=new Set,e=this.keys(),t;t=e.next(),!t.done;)r.add(t.value);return Object.defineProperty(r,"constructor",{value:$e,enumerable:!1}),r};typeof Symbol<"u"&&($e.prototype[Symbol.for("nodejs.util.inspect.custom")]=$e.prototype.inspect);$e.prototype.toJSON=function(){return this.root};$e.from=function(r){var e=new $e;return a5(r,function(t){e.add(t)}),e};$e.SENTINEL=Af;Sw.exports=$e});var Mw=_((hJ,qw)=>{var Cw=Ge(),s5=_e(),u5=Ot(),Ew=ht(),c5=function(r){return Math.max(1,Math.ceil(r*1.5))},l5=function(r){var e=Ew.getPointerArray(r);return new e(r)};function oe(r,e){if(arguments.length<1)throw new Error("mnemonist/vector: expecting at least a byte array constructor.");var t=e||0,i=c5,n=0,s=!1;typeof e=="object"&&(t=e.initialCapacity||0,n=e.initialLength||0,i=e.policy||i,s=e.factory===!0),this.factory=s?r:null,this.ArrayClass=r,this.length=n,this.capacity=Math.max(n,t),this.policy=i,this.array=new r(this.capacity)}oe.prototype.set=function(r,e){if(this.length<r)throw new Error("Vector("+this.ArrayClass.name+").set: index out of bounds.");return this.array[r]=e,this};oe.prototype.get=function(r){if(!(this.length<r))return this.array[r]};oe.prototype.applyPolicy=function(r){var e=this.policy(r||this.capacity);if(typeof e!="number"||e<0)throw new Error("mnemonist/vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(e<=this.capacity)throw new Error("mnemonist/vector.applyPolicy: policy returned a less or equal capacity to allocate.");return e};oe.prototype.reallocate=function(r){if(r===this.capacity)return this;var e=this.array;if(r<this.length&&(this.length=r),r>this.capacity)if(this.factory===null?this.array=new this.ArrayClass(r):this.array=this.factory(r),Ew.isTypedArray(this.array))this.array.set(e,0);else for(var t=0,i=this.length;t<i;t++)this.array[t]=e[t];else this.array=e.slice(0,r);return this.capacity=r,this};oe.prototype.grow=function(r){var e;if(typeof r=="number"){if(this.capacity>=r)return this;for(e=this.capacity;e<r;)e=this.applyPolicy(e);return this.reallocate(e),this}return e=this.applyPolicy(),this.reallocate(e),this};oe.prototype.resize=function(r){return r===this.length?this:r<this.length?(this.length=r,this):(this.length=r,this.reallocate(r),this)};oe.prototype.push=function(r){return this.capacity===this.length&&this.grow(),this.array[this.length++]=r,this.length};oe.prototype.pop=function(){if(this.length!==0)return this.array[--this.length]};oe.prototype.values=function(){var r=this.array,e=this.length,t=0;return new Cw(function(){if(t>=e)return{done:!0};var i=r[t];return t++,{value:i,done:!1}})};oe.prototype.entries=function(){var r=this.array,e=this.length,t=0;return new Cw(function(){if(t>=e)return{done:!0};var i=r[t];return{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(oe.prototype[Symbol.iterator]=oe.prototype.values);oe.prototype.inspect=function(){var r=this.array.slice(0,this.length);return r.type=this.array.constructor.name,r.items=this.length,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:oe,enumerable:!1}),r};typeof Symbol<"u"&&(oe.prototype[Symbol.for("nodejs.util.inspect.custom")]=oe.prototype.inspect);oe.from=function(r,e,t){if(arguments.length<3&&(t=u5.guessLength(r),typeof t!="number"))throw new Error("mnemonist/vector.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new oe(e,t);return s5(r,function(n){i.push(n)}),i};function Er(r){var e=function(i){oe.call(this,r,i)};for(var t in oe.prototype)oe.prototype.hasOwnProperty(t)&&(e.prototype[t]=oe.prototype[t]);return e.from=function(i,n){return oe.from(i,r,n)},typeof Symbol<"u"&&(e.prototype[Symbol.iterator]=e.prototype.values),e}oe.Int8Vector=Er(Int8Array);oe.Uint8Vector=Er(Uint8Array);oe.Uint8ClampedVector=Er(Uint8ClampedArray);oe.Int16Vector=Er(Int16Array);oe.Uint16Vector=Er(Uint16Array);oe.Int32Vector=Er(Int32Array);oe.Uint32Vector=Er(Uint32Array);oe.Float32Vector=Er(Float32Array);oe.Float64Vector=Er(Float64Array);oe.PointerVector=Er(l5);qw.exports=oe});var xw=_((pJ,Lw)=>{var f5=Ot(),h5=ht(),p5=nm().inplaceQuickSortIndices,d5=rm().lowerBoundIndices,v5=_f(),m5=h5.getPointerArray;function y5(r,e){return r.distance<e.distance?1:r.distance>e.distance?-1:0}function g5(r,e,t){for(var i=t.length,n=m5(i),s=0,u=new n(i),l=new n(i),h=new n(i),p=new Float64Array(i),v=[0,0,i],b=new Float64Array(i),T,S,E,M,x,D,N,Y,ie;v.length;)if(x=v.pop(),M=v.pop(),T=v.pop(),S=t[x-1],x--,ie=x-M,u[T]=S,ie!==0){if(ie===1){N=r(e[S],e[t[M]]),p[T]=N,s++,h[T]=s,u[s]=t[M];continue}for(Y=M;Y<x;Y++)b[t[Y]]=r(e[S],e[t[Y]]);p5(b,t,M,x),E=M+ie/2-1,E===(E|0)?N=(b[t[E]]+b[t[E+1]])/2:N=b[t[Math.ceil(E)]],p[T]=N,D=d5(b,t,N,M,x),x-D>0&&(s++,h[T]=s,v.push(s,D,x)),D-M>0&&(s++,l[T]=s,v.push(s,M,D))}return{nodes:u,lefts:l,rights:h,mus:p}}function Yr(r,e){if(typeof r!="function")throw new Error("mnemonist/VPTree.constructor: given `distance` must be a function.");if(!e)throw new Error("mnemonist/VPTree.constructor: you must provide items to the tree. A VPTree cannot be updated after its creation.");this.distance=r,this.heap=new v5(y5),this.D=0;var t=f5.toArrayWithIndices(e);this.items=t[0];var i=t[1];this.size=i.length;var n=g5(r,this.items,i);this.nodes=n.nodes,this.lefts=n.lefts,this.rights=n.rights,this.mus=n.mus}Yr.prototype.nearestNeighbors=function(r,e){var t=this.heap,i=[0],n=1/0,s,u,l,h,p,v,b;for(this.D=0;i.length;)s=i.pop(),u=this.nodes[s],l=this.items[u],b=this.distance(l,e),this.D++,b<n&&(t.push({distance:b,item:l}),t.size>r&&t.pop(),t.size>=r&&(n=t.peek().distance)),h=this.lefts[s],p=this.rights[s],!(!h&&!p)&&(v=this.mus[s],b<v?(h&&b<v+n&&i.push(h),p&&b>=v-n&&i.push(p)):(p&&b>=v-n&&i.push(p),h&&b<v+n&&i.push(h)));for(var T=new Array(t.size),S=t.size-1;S>=0;S--)T[S]=t.pop();return T};Yr.prototype.neighbors=function(r,e){var t=[],i=[0],n,s,u,l,h,p,v;for(this.D=0;i.length;)n=i.pop(),s=this.nodes[n],u=this.items[s],v=this.distance(u,e),this.D++,v<=r&&t.push({distance:v,item:u}),l=this.lefts[n],h=this.rights[n],!(!l&&!h)&&(p=this.mus[n],v<p?(l&&v<p+r&&i.push(l),h&&v>=p-r&&i.push(h)):(h&&v>=p-r&&i.push(h),l&&v<p+r&&i.push(l)));return t};Yr.prototype.inspect=function(){var r=this.items.slice();return Object.defineProperty(r,"constructor",{value:Yr,enumerable:!1}),r};typeof Symbol<"u"&&(Yr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Yr.prototype.inspect);Yr.from=function(r,e){return new Yr(e,r)};Lw.exports=Yr});var kw=_((dJ,Iw)=>{var pm=_f(),dm=hf(),jw=LP();Iw.exports={BiMap:FP(),BitSet:UP(),BitVector:$P(),BloomFilter:ZP(),BKTree:t1(),CircularBuffer:a1(),DefaultMap:u1(),DefaultWeakMap:l1(),FixedDeque:$v(),StaticDisjointSet:h1(),FibonacciHeap:dm,MinFibonacciHeap:dm.MinFibonacciHeap,MaxFibonacciHeap:dm.MaxFibonacciHeap,FixedReverseHeap:Pf(),FuzzyMap:g1(),FuzzyMultiMap:w1(),HashedArrayTree:S1(),Heap:pm,MinHeap:pm.MinHeap,MaxHeap:pm.MaxHeap,StaticIntervalTree:q1(),InvertedIndex:F1(),KDTree:V1(),LinkedList:G1(),LRUCache:Tf(),LRUCacheWithDelete:$1(),LRUMap:um(),LRUMapWithDelete:K1(),MultiMap:Jv(),MultiSet:J1(),PassjoinIndex:nw(),Queue:sw(),FixedStack:em(),Stack:lw(),SuffixArray:jw,GeneralizedSuffixArray:jw.GeneralizedSuffixArray,Set:fw(),SparseQueueSet:pw(),SparseMap:vw(),SparseSet:yw(),SymSpell:ww(),Trie:Aw(),TrieMap:fm(),Vector:Mw(),VPTree:xw()}});var D5={};BM(D5,{ArrayTilemap:()=>zf,CharacterShiftAction:()=>If,CollisionStrategy:()=>Ea,Direction:()=>it,GridEngine:()=>Va,GridEngineHeadless:()=>Ra,MoveToResult:()=>Df,NoPathFoundStrategy:()=>cn,NumberOfDirections:()=>zr,PathBlockedStrategy:()=>wo,PhaserTile:()=>Ri,PhaserTileLayer:()=>No,PhaserTilemap:()=>Na,QueuedPathBlockedStrategy:()=>gm,TiledLayer:()=>Wo,TiledTile:()=>Vo,TiledTilemap:()=>Nf,default:()=>F5,directionFromPos:()=>Ue});module.exports=HM(D5);var F=class r{static get ZERO(){return new r(0,0)}static get ONE(){return new r(1,1)}static get UP(){return new r(0,-1)}static get DOWN(){return new r(0,1)}static get LEFT(){return new r(-1,0)}static get RIGHT(){return new r(1,0)}static get UP_LEFT(){return new r(-1,-1)}static get UP_RIGHT(){return new r(1,-1)}static get DOWN_RIGHT(){return new r(1,1)}static get DOWN_LEFT(){return new r(-1,1)}constructor(e,t){typeof e=="number"?(this.x=e,this.y=t||0):(this.x=e.x,this.y=e.y)}clone(){return new r(this.x,this.y)}add(e){return new r(this.x+e.x,this.y+e.y)}multiply(e){return new r(this.x*e.x,this.y*e.y)}divide(e){return new r(this.x/e.x,this.y/e.y)}subtract(e){return new r(this.x-e.x,this.y-e.y)}equals(e){return this.x===e.x&&this.y===e.y}abs(){return new r(Math.abs(this.x),Math.abs(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}modulo(e){return new r(this.x%e.x,this.y%e.y)}scalarModulo(e){return new r(this.x%e,this.y%e)}scalarMult(e){return new r(this.x*e,this.y*e)}toPosition(){return{x:this.x,y:this.y}}toString(){return`${this.x}#${this.y}`}};var G=class{static equal(e,t){return e.position.x===t.position.x&&e.position.y===t.position.y&&e.layer===t.layer}static copyOver(e,t){t.position.x=e.position.x,t.position.y=e.position.y,t.layer=e.layer}static clone(e){return{position:e.position.clone(),layer:e.layer}}static toString(e){return`${e.position.toString()}#${e.layer}`}static toInternal(e){return{position:new F(e.position.x,e.position.y),layer:e.charLayer}}static fromInternal(e){return{position:e.position.toPosition(),charLayer:e.layer}}};var it=(p=>(p.NONE="none",p.LEFT="left",p.UP_LEFT="up-left",p.UP="up",p.UP_RIGHT="up-right",p.RIGHT="right",p.DOWN_RIGHT="down-right",p.DOWN="down",p.DOWN_LEFT="down-left",p))(it||{}),$M={up:"down",down:"up",left:"right",right:"left",none:"none","up-left":"down-right","up-right":"down-left","down-right":"up-left","down-left":"up-right"},YM={up:F.UP,down:F.DOWN,left:F.LEFT,right:F.RIGHT,none:F.ZERO,"up-left":F.UP_LEFT,"up-right":F.UP_RIGHT,"down-right":F.DOWN_RIGHT,"down-left":F.DOWN_LEFT},ha={up:0,"up-right":1,right:2,"down-right":3,down:4,"down-left":5,left:6,"up-left":7,none:NaN},ib=["up","up-right","right","down-right","down","down-left","left","up-left"],QM=["down-left","down-right","up-right","up-left"];function pa(){return["up","down","left","right","none","up-left","up-right","down-right","down-left"]}function Qi(r){return QM.includes(r)}function cp(r){return["left","right"].includes(r)}function lp(r){return["up","down"].includes(r)}function nb(r,e=1){return r==="none"?"none":ib[(ha[r]+8-Math.abs(e)%8)%8]}function Mn(r,e=1){return r==="none"?"none":ib[(ha[r]+e)%8]}function Xt(r){return YM[r]}function ob(r){return $M[r]}function Ue(r,e){if(r.x===e.x){if(r.y>e.y)return"up";if(r.y<e.y)return"down"}else if(r.y===e.y){if(r.x>e.x)return"left";if(r.x<e.x)return"right"}else if(r.x>e.x){if(r.y<e.y)return"down-left";if(r.y>e.y)return"up-left"}else if(r.x<e.x){if(r.y<e.y)return"down-right";if(r.y>e.y)return"up-right"}return"none"}var zr=(t=>(t[t.FOUR=4]="FOUR",t[t.EIGHT=8]="EIGHT",t))(zr||{});function ai(r){return typeof r=="string"&&pa().includes(r)}var Hr=bt(Mi(),1);var Li=1e3,of=class{constructor(e,t){this.id=e;this.movementDirection="none";this._tilePos={position:new F(0,0),layer:void 0};this.movementStarted$=new Hr.Subject;this.movementStopped$=new Hr.Subject;this.directionChanged$=new Hr.Subject;this.positionChangeStarted$=new Hr.Subject;this.positionChangeFinished$=new Hr.Subject;this.tilePositionSet$=new Hr.Subject;this.autoMovementSet$=new Hr.Subject;this.lastMovementImpulse="none";this.facingDirection="down";this.depthChanged$=new Hr.Subject;this.movementProgress=0;this.tilemap=t.tilemap,this.speed=t.speed,this.collidesWithTilesInternal=t.collidesWithTiles,this._tilePos.layer=t.charLayer,this.ignoreMissingTiles=t.ignoreMissingTiles??!1,this.collisionGroups=new Set(t.collisionGroups||[]),this.ignoreCollisionGroups=new Set(t.ignoreCollisionGroups||[]),this.labels=new Set(t.labels||[]),this.numberOfDirections=t.numberOfDirections,t.facingDirection&&this.turnTowards(t.facingDirection),this.tileWidth=t.tileWidth??1,this.tileHeight=t.tileHeight??1}getId(){return this.id}getSpeed(){return this.speed}setSpeed(e){this.speed=e}setMovement(e){this.autoMovementSet$.next(e),this.movement=e}getMovement(){return this.movement}collidesWithTiles(){return this.collidesWithTilesInternal}setCollidesWithTiles(e){this.collidesWithTilesInternal=e}getIgnoreMissingTiles(){return this.ignoreMissingTiles}setIgnoreMissingTiles(e){this.ignoreMissingTiles=e}setTilePosition(e){this.isMoving()&&this.movementStopped$.next(this.movementDirection),this.tilePositionSet$.next({...e}),this.fire(this.positionChangeStarted$,this.tilePos,e),this.fire(this.positionChangeFinished$,this.tilePos,e),this.movementDirection="none",this.lastMovementImpulse="none",this.tilePos=e,this.movementProgress=0}getTilePos(){return this.tilePos}getNextTilePos(){if(!this.isMoving())return this.tilePos;let e=this.tilePos.layer,t=this.tilePosInDirection(this.tilePos.position,this.movementDirection),i=this.tilemap.getTransition(t,this.tilePos.layer);return i&&(e=i),{position:this.tilePosInDirection(this.tilePos.position,this.movementDirection),layer:e}}getTileWidth(){return this.tileWidth}getTileHeight(){return this.tileHeight}move(e){this.lastMovementImpulse=e,e!="none"&&(this.isMoving()||(this.isBlockingDirection(e)?this.changeFacingDirection(e):this.startMoving(e)))}update(e){this.movement?.update(e),this.isMoving()&&this.updateCharacterPosition(e),this.lastMovementImpulse="none"}getMovementDirection(){return this.movementDirection}isBlockingDirection(e){if(e=="none")return!1;let t=this.tilePosInDirection(this.getNextTilePos().position,e),i=this.tilemap.getTransition(t,this.getNextTilePos().layer)||this.getNextTilePos().layer;return this.collidesWithTilesInternal&&this.isTileBlocking(e,i)?!0:this.isCharBlocking(e,i)}isTileBlocking(e,t){return this.someCharTile((i,n)=>{let s=this.tilePosInDirection(new F(i,n),e);return this.tilemap.hasBlockingTile(s,t,ob(e),this.ignoreMissingTiles)})}isCharBlocking(e,t){return this.someCharTile((i,n)=>{let s=this.tilePosInDirection(new F(i,n),e);return this.tilemap.hasBlockingChar(s,t,this.getCollisionGroups(),new Set([this.getId()]),this.ignoreCollisionGroups)})}isMoving(){return this.movementDirection!="none"}turnTowards(e){this.isMoving()||e!="none"&&this.changeFacingDirection(e)}changeFacingDirection(e){this.facingDirection!==e&&(this.facingDirection=e,this.directionChanged$.next(e))}getFacingDirection(){return this.facingDirection}getFacingPosition(){return this._tilePos.position.add(Xt(this.facingDirection))}addCollisionGroup(e){this.collisionGroups.add(e)}setCollisionGroups(e){this.collisionGroups=new Set(e)}setIgnoreCollisionGroups(e){this.ignoreCollisionGroups=new Set(e)}getCollisionGroups(){return Array.from(this.collisionGroups)}getIgnoreCollisionGroups(){return Array.from(this.ignoreCollisionGroups)}hasCollisionGroup(e){return this.collisionGroups.has(e)}removeCollisionGroup(e){this.collisionGroups.delete(e)}removeAllCollisionGroups(){this.collisionGroups.clear()}addLabels(e){for(let t of e)this.labels.add(t)}getLabels(){return[...this.labels.values()]}hasLabel(e){return this.labels.has(e)}clearLabels(){this.labels.clear()}removeLabels(e){for(let t of e)this.labels.delete(t)}getNumberOfDirections(){return this.numberOfDirections}movementStarted(){return this.movementStarted$}movementStopped(){return this.movementStopped$}directionChanged(){return this.directionChanged$}tilePositionSet(){return this.tilePositionSet$}positionChangeStarted(){return this.positionChangeStarted$}positionChangeFinished(){return this.positionChangeFinished$}autoMovementSet(){return this.autoMovementSet$}depthChanged(){return this.depthChanged$}getMovementProgress(){return this.movementProgress}setMovementProgress(e){let t=Math.max(0,Math.min(Li,e));this.movementProgress=t}hasWalkedHalfATile(){return this.movementProgress>Li/2}willCrossTileBorderThisUpdate(e){return this.movementProgress+this.maxProgressForDelta(e)>=Li}updateCharacterPosition(e){let t=this.willCrossTileBorderThisUpdate(e),n=1-(t?Li-this.movementProgress:this.maxProgressForDelta(e))/this.maxProgressForDelta(e);this.movementProgress=Math.min(this.movementProgress+this.maxProgressForDelta(e),Li),t&&(this.movementProgress=0,this.shouldContinueMoving()?(this.fire(this.positionChangeFinished$,this.tilePos,this.getNextTilePos()),this.tilePos=this.getNextTilePos(),this.startMoving(this.lastMovementImpulse),n>0&&this.updateCharacterPosition(e*n)):this.stopMoving())}maxProgressForDelta(e){let i=e/1e3;return Math.floor(i*this.speed*Li)}get tilePos(){return G.clone(this._tilePos)}set tilePos(e){G.copyOver(e,this._tilePos)}startMoving(e){e!=="none"&&(e!=this.movementDirection&&this.movementStarted$.next(e),this.movementDirection=e,this.facingDirection=e,this.fire(this.positionChangeStarted$,this.tilePos,this.getNextTilePos()))}tilePosInDirection(e,t){return e.add(Xt(this.tilemap.toMapDirection(t)))}shouldContinueMoving(){return this.lastMovementImpulse!=="none"&&!this.isBlockingDirection(this.lastMovementImpulse)}stopMoving(){if(this.movementDirection==="none")return;let e=this.tilePos,t=this.getNextTilePos(),i=this.movementDirection;this.tilePos=this.getNextTilePos(),this.movementDirection="none",this.movementStopped$.next(i),this.fire(this.positionChangeFinished$,e,t)}fire(e,{position:t,layer:i},{position:n,layer:s}){e.next({exitTile:t,enterTile:n,exitLayer:i,enterLayer:s})}someCharTile(e){let t=this.getNextTilePos().position;for(let i=t.x;i<t.x+this.getTileWidth();i++)for(let n=t.y;n<t.y+this.getTileHeight();n++)if(e(i,n))return!0;return!1}};var oP=bt(Mi(),1),Ca=class r{constructor(e,t){this.walkingAnimationMapping=e;this.charsInRow=t;this.lastFootLeft=!1;this.directionToFrameRow={down:0,"down-left":1,"down-right":2,left:1,right:2,up:3,"up-left":1,"up-right":2};this._isEnabled=!0;this.frameChange$=new oP.Subject;this.setWalkingAnimationMapping(e)}static{this.FRAMES_CHAR_ROW=3}static{this.FRAMES_CHAR_COL=4}frameChange(){return this.frameChange$}setIsEnabled(e){this._isEnabled=e}isEnabled(){return this._isEnabled}updateCharacterFrame(e,t,i){this._isEnabled&&(t?this.setStandingFrameDuringWalk(e,i):this.setWalkingFrame(e))}setStandingFrame(e){this._isEnabled&&this._setStandingFrame(e)}setWalkingAnimationMapping(e){this.walkingAnimationMapping=e,this._isEnabled=this.walkingAnimationMapping!==void 0}getWalkingAnimationMapping(){return this.walkingAnimationMapping}getCharsInRow(){return this.charsInRow}setStandingFrameDuringWalk(e,t){this.isCurrentFrameStanding(e,t)||(this.lastFootLeft=!this.lastFootLeft),this._setStandingFrame(e)}setWalkingFrame(e){let t=this.framesOfDirection(e);t&&this.frameChange$.next(this.lastFootLeft?t.rightFoot:t.leftFoot)}_setStandingFrame(e){let t=this.framesOfDirection(e);t&&this.frameChange$.next(t.standing)}isCurrentFrameStanding(e,t){return t===this.framesOfDirection(e)?.standing}framesOfDirection(e){return typeof this.walkingAnimationMapping=="number"?this.getFramesForCharIndex(e,this.walkingAnimationMapping):this.getFramesForAnimationMapping(e)}getFramesForAnimationMapping(e){if(this.walkingAnimationMapping)return this.walkingAnimationMapping[e]||this.walkingAnimationMapping[this.fallbackDirection(e)]}fallbackDirection(e){switch(e){case"down-left":return"left";case"down-right":return"right";case"up-left":return"left";case"up-right":return"right"}return e}getFramesForCharIndex(e,t){let i=Math.floor(t/this.charsInRow),n=t%this.charsInRow,s=this.charsInRow*r.FRAMES_CHAR_ROW,u=r.FRAMES_CHAR_ROW*n,l=(this.directionToFrameRow[e]??0)+i*r.FRAMES_CHAR_COL,h=u+l*s;return{rightFoot:h,standing:h+1,leftFoot:h+2}}};var sn=class{static shiftPad(e,t){let i=Math.floor(e),s=`${i}`.padStart(t,"0").length;return i/Math.pow(10,s)}};var kv=bt(Mi(),1),uf=bt(Po(),1);var qe=class r{static vec2str(e){return`${e.x}#${e.y}`}static equal(e,t){return r.vec2str(e)==r.vec2str(t)}static manhattanDistance(e,t){let i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return i+n}static chebyshevDistance(e,t){let i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.max(i,n)}static scalarMult(e,t){return e.clone().multiply(new F(t,t))}};var un=class r{constructor(e){this.tilemap=e;this.charLayerDepths=new Map;this.setLayerDepths()}static{this.ALWAYS_TOP_PROP_NAME="ge_alwaysTop"}static{this.CHAR_LAYER_PROP_NAME="ge_charLayer"}static{this.HEIGHT_SHIFT_PROP_NAME="ge_heightShift"}static{this.Z_INDEX_PADDING=7}getTileWidth(){let e=this.tilemap.layers[0]?.tilemapLayer.scale??1;return this.tilemap.tileWidth*e}getTileHeight(){let e=this.tilemap.layers[0]?.tilemapLayer.scale??1;return this.tilemap.tileHeight*e}getDepthOfCharLayer(e){return this.charLayerDepths.get(e)??0}tilePosToPixelPos(e){return this.isIsometric()?qe.scalarMult(this.getTileSize(),.5).multiply(new F(e.x-e.y,e.x+e.y)):e.clone().multiply(this.getTileSize())}getTileDistance(e){if(this.isIsometric())switch(e){case"down-left":case"down-right":case"up-left":case"up-right":return qe.scalarMult(this.getTileSize(),.5);default:return this.getTileSize()}return this.getTileSize()}getTileSize(){return new F(this.getTileWidth(),this.getTileHeight())}isIsometric(){return this.tilemap.orientation==Phaser.Tilemaps.Orientation.ISOMETRIC.toString()}isLayerAlwaysOnTop(e){return this.hasLayerProp(e,r.ALWAYS_TOP_PROP_NAME)}isCharLayer(e){return this.hasLayerProp(e,r.CHAR_LAYER_PROP_NAME)}setLayerDepths(){let e=[],t=-1,i=this.tilemap.layers.filter(s=>this.isLayerAlwaysOnTop(s));this.tilemap.layers.filter(s=>!this.isLayerAlwaysOnTop(s)).forEach(s=>{this.hasLayerProp(s,r.HEIGHT_SHIFT_PROP_NAME)?(this.createHeightShiftLayers(s,t),e.push(s.tilemapLayer)):this.setDepth(s,++t)}),this.charLayerDepths.set(void 0,t),i.forEach((s,u)=>{s.tilemapLayer.setDepth(u+1+t)}),e.forEach(s=>s.destroy())}setDepth(e,t){e.tilemapLayer.setDepth(t),this.isCharLayer(e)&&this.charLayerDepths.set(this.getLayerProp(e,r.CHAR_LAYER_PROP_NAME),t)}createHeightShiftLayers(e,t){let i=this.getLayerProp(e,r.HEIGHT_SHIFT_PROP_NAME);isNaN(i)&&(i=0);let n=1;for(let s=0;s<e.height;s++){let u=this.copyLayer(e,s);if(u){u.scale=e.tilemapLayer.scale;let l=this.isIsometric()?this.getTileHeight()/2:this.getTileHeight();u.setDepth(t+sn.shiftPad((s+i)*l+n,r.Z_INDEX_PADDING))}}}getLayerProp(e,t){return e.properties.find(s=>s.name==t)?.value}hasLayerProp(e,t){return this.getLayerProp(e,t)!=null}copyLayer(e,t){let i=`${e.name}#${t}`,n=this.tilemap.createBlankLayer(i,e.tilemapLayer.tileset);if(n){if(n.name=i,this.isIsometric())for(let s=t;s>=0;s--){let u=t-s;n.putTileAt(e.data[s][u],u,s)}else for(let s=0;s<e.width;s++)n.putTileAt(e.data[t][s],s,t);return n}}};var sf=class{constructor(e,t,i,n,s){this.charData=e;this.scene=t;this.tilemap=i;this.geHeadless=s;this.customOffset=new F(0,0);this.cachedContainerHeight=0;this.newSpriteSet$=new kv.Subject;this.destroy$=new kv.Subject;this.layerOverlaySprite=n&&e.sprite?this.scene.add.sprite(0,0,e.sprite.texture):void 0,this.walkingAnimationMapping=e.walkingAnimationMapping,this.customOffset=new F(e.offsetX||0,e.offsetY||0),this.sprite=e.sprite,this.container=e.container,this.cachedContainerHeight=e.container?.getBounds().height??0,this.geHeadless.directionChanged().pipe((0,uf.filter)(({charId:u})=>u===this.charData.id)).subscribe(({direction:u})=>{this.animation?.setStandingFrame(u)}),this.sprite&&(this.sprite.setOrigin(0,0),this.resetAnimation(this.sprite),this.updateOverlaySprite(),this.updateGridChar())}destroy(){this.destroy$.next(),this.destroy$.complete(),this.newSpriteSet$.complete()}setSprite(e){e?(this.sprite&&(e.x=this.sprite.x,e.y=this.sprite.y),this.sprite=e,this.newSpriteSet$.next(),this.layerOverlaySprite=this.layerOverlaySprite?this.scene.add.sprite(0,0,this.sprite.texture):void 0,this.updateOverlaySprite(),this.resetAnimation(this.sprite),this.updateDepth()):(this.layerOverlaySprite=void 0,this.sprite=void 0)}getSprite(){return this.sprite}getLayerOverlaySprite(){return this.layerOverlaySprite}setContainer(e){this.container=e,this.cachedContainerHeight=e?.getBounds().height??0}getContainer(){return this.container}getOffsetX(){return this.customOffset.x}setOffsetX(e){this.customOffset.x=e}getOffsetY(){return this.customOffset.y}setOffsetY(e){this.customOffset.y=e}getWalkingAnimationMapping(){return this.walkingAnimationMapping}turnTowards(e){this.geHeadless.isMoving(this.charData.id)||e!="none"&&(this.geHeadless.turnTowards(this.charData.id,e),this.animation?.setStandingFrame(e))}getAnimation(){return this.animation}setAnimation(e){this.animation=e}update(e){this.updateGridChar()}getEngineOffset(){if(!this.sprite)return F.ZERO;let e=this.tilemap.getTileWidth()/2-Math.floor((this.sprite?.displayWidth??0)/2),t=-(this.sprite?.displayHeight??0)+this.tilemap.getTileHeight();return new F(e,t)}updatePixelPos(){let e=new F(this.geHeadless.getPosition(this.charData.id)),t=this.geHeadless.getMovementProgress(this.charData.id)/1e3,n=this.tilemap.tilePosToPixelPos(e).add(this.getEngineOffset()).add(this.customOffset).add(Xt(this.geHeadless.getFacingDirection(this.charData.id)).multiply(this.tilemap.getTileDistance(this.geHeadless.getFacingDirection(this.charData.id)).scalarMult(t))),s=this.getGameObj();s&&(s.x=Math.floor(n.x),s.y=Math.floor(n.y))}getGameObj(){return this.container||this.sprite}updateGridChar(){if(this.updatePixelPos(),this.sprite&&this.geHeadless.isMoving(this.charData.id)){let e=this.geHeadless.getMovementProgress(this.charData.id)>Li/2;this.getAnimation()?.updateCharacterFrame(this.geHeadless.getFacingDirection(this.charData.id),e,Number(this.sprite.frame.name))}this.updateDepth()}resetAnimation(e){let t=new Ca(this.walkingAnimationMapping,e.texture.source[0].width/e.width/Ca.FRAMES_CHAR_ROW);this.setAnimation(t),t.frameChange().pipe((0,uf.takeUntil)(this.newSpriteSet$)).subscribe(i=>{e?.setFrame(i)}),t.setIsEnabled(this.walkingAnimationMapping!==void 0),t.setStandingFrame(this.geHeadless.getFacingDirection(this.charData.id))}updateOverlaySprite(){if(!this.layerOverlaySprite||!this.sprite)return;this.layerOverlaySprite.scale=this.sprite.scale;let e=this.tilemap.getTileHeight()/this.layerOverlaySprite.scale;this.layerOverlaySprite.setCrop(0,0,this.layerOverlaySprite.displayWidth,this.sprite.height-e),this.layerOverlaySprite.setOrigin(0,0)}updateDepth(){if(!this.getGameObj())return;let t=new F(this.geHeadless.getPosition(this.charData.id)),i=this.geHeadless.getCharLayer(this.charData.id);this.container?this.setContainerDepth(this.container,{position:t,layer:i}):this.sprite&&this.setSpriteDepth(this.sprite,{position:t,layer:i});let n=this.getLayerOverlaySprite();if(n){let s=new F({...t,y:t.y-1});this.setSpriteDepth(n,{position:s,layer:i})}}setSpriteDepth(e,t){e.setDepth(this.tilemap.getDepthOfCharLayer(this.getTransitionLayer(t))+this.getPaddedPixelDepthSprite(e))}setContainerDepth(e,t){e.setDepth(this.tilemap.getDepthOfCharLayer(this.getTransitionLayer(t))+this.getPaddedPixelDepthContainer(e))}getPaddedPixelDepthContainer(e){return sn.shiftPad(e.y+this.cachedContainerHeight,un.Z_INDEX_PADDING)}getPaddedPixelDepthSprite(e){return sn.shiftPad(e.y+e.displayHeight,un.Z_INDEX_PADDING)}getTransitionLayer(e){if(e.layer)return this.geHeadless.getTransition(e.position,e.layer)||e.layer}};var Ea=(n=>(n.DONT_BLOCK="DONT_BLOCK",n.BLOCK_TWO_TILES="BLOCK_TWO_TILES",n.BLOCK_ONE_TILE_AHEAD="BLOCK_ONE_TILE_AHEAD",n.BLOCK_ONE_TILE_BEHIND="BLOCK_ONE_TILE_BEHIND",n))(Ea||{});var cn=(n=>(n.STOP="STOP",n.CLOSEST_REACHABLE="CLOSEST_REACHABLE",n.RETRY="RETRY",n.ALTERNATIVE_TARGETS="ALTERNATIVE_TARGETS",n))(cn||{});var cf=class{distance(e,t){return qe.manhattanDistance(e,t)}direction(e,t){if(qe.equal(e,t))return"none";let i=e.clone().subtract(t);return Math.abs(i.x)>Math.abs(i.y)?i.x>0?"left":"right":i.y>0?"up":"down"}neighbors(e){return[new F(e.x,e.y+1),new F(e.x+1,e.y),new F(e.x-1,e.y),new F(e.x,e.y-1)]}getDirections(){return["up","right","down","left"]}};var lf=class{distance(e,t){return qe.chebyshevDistance(e,t)}neighbors(e){let t=[new F(e.x,e.y+1),new F(e.x+1,e.y),new F(e.x-1,e.y),new F(e.x,e.y-1)],i=[new F(e.x+1,e.y+1),new F(e.x+1,e.y-1),new F(e.x-1,e.y+1),new F(e.x-1,e.y-1)];return[...t,...i]}direction(e,t){return t.x>e.x?t.y>e.y?"down-right":t.y<e.y?"up-right":"right":t.x<e.x?t.y>e.y?"down-left":t.y<e.y?"up-left":"left":t.y<e.y?"up":t.y>e.y?"down":"none"}getDirections(){return["up","right","down","left","down-left","down-right","up-right","up-left"]}};var lt=class{static create(e){switch(e){case 4:return new cf;case 8:return new lf}}};var qa=class{constructor(e,t,i){this.backoffMs=e;this.maxRetries=t;this.onFinished=i;this.retries=0;this.elapsed=0}retry(e,t){this.shouldRetry()?(this.elapsed+=e,this.elapsed>=this.backoffMs&&(this.elapsed=0,this.retries++,t())):this.onFinished()}reset(){this.retries=0,this.elapsed=0}getMaxRetries(){return this.maxRetries}getBackoffMs(){return this.backoffMs}shouldRetry(){return this.maxRetries===-1||this.retries<this.maxRetries}};var wo=(i=>(i.WAIT="WAIT",i.RETRY="RETRY",i.STOP="STOP",i))(wo||{});var zo=bt(Mi(),1);var yr=class{constructor(e,{shortestPathAlgorithm:t="BFS",pathWidth:i=1,pathHeight:n=1,numberOfDirections:s=4,isPositionAllowed:u=(x,D)=>!0,collisionGroups:l=[],ignoredChars:h=[],ignoreTiles:p=!1,ignoreMapBounds:v=!1,ignoreBlockedTarget:b=!1,maxPathLength:T=1/0,ignoreLayers:S=!1,considerCosts:E=!1,calculateClosestToTarget:M=!0}={}){this.gridTilemap=e;this.options={shortestPathAlgorithm:t,pathWidth:i,pathHeight:n,numberOfDirections:s,isPositionAllowed:u,collisionGroups:l,ignoredChars:h,ignoreTiles:p,ignoreMapBounds:v,ignoreBlockedTarget:b,maxPathLength:T,ignoreLayers:S,considerCosts:E,calculateClosestToTarget:M}}findShortestPath(e,t){this.options.ignoreLayers&&(this.gridTilemap.fixCacheLayer(e.layer),t.layer=e.layer);let i=this.findShortestPathImpl(e,t);return this.gridTilemap.unfixCacheLayers(),i}getNeighbors(e,t){return lt.create(this.options.numberOfDirections??4).neighbors(e.position).map(u=>{let l=e.layer;return this.options.ignoreLayers||(l=this.gridTilemap.getTransition(u,e.layer)),{position:u,layer:l||e.layer}}).filter(u=>!this.isBlocking(e,u)||this.options.ignoreBlockedTarget&&G.equal(u,t))}getTransition(e,t){if(!this.options.ignoreLayers)return this.gridTilemap.getTransition(e,t)}getCosts(e,t){if(!this.options.considerCosts)return 1;let i=Ue(t.position,e);return this.gridTilemap.getTileCosts(t,i)}isBlocking(e,t){return!(this.options.ignoreMapBounds||this.gridTilemap.isInRange(t.position))||!this.options.isPositionAllowed(t.position,t.layer)||!this.options.ignoreTiles&&this.hasBlockingTileFrom(e,t,this.options.pathWidth,this.options.pathHeight,this.options.ignoreMapBounds,this.gridTilemap)?!0:this.hasBlockingCharFrom(e,t,this.options.pathWidth,this.options.pathHeight,this.options.collisionGroups,this.options.ignoredChars,this.gridTilemap)}distance(e,t){return(this.options.numberOfDirections===4?qe.manhattanDistance:qe.chebyshevDistance)(e,t)}getTilePosInDir(e,t){return this.gridTilemap.getTilePosInDirection(e,t)}getReverseNeighbors(e,t){let n=lt.create(this.options.numberOfDirections??4).neighbors(e.position),s;if(!this.options.ignoreLayers){let l=this.gridTilemap.getReverseTransitions(e.position,e.layer);s=l?[...l]:void 0}return n.map(l=>s?s.map(h=>({position:l,layer:h||e.layer})):[{position:l,layer:e.layer}]).flat().filter(l=>!this.isBlocking(l,e)||this.options.ignoreBlockedTarget&&G.equal(e,t))}hasBlockingCharFrom(e,t,i,n,s,u,l){let h=v=>l.hasBlockingChar(v,t.layer,s,new Set(u));if(i===1&&n===1)return h(t.position);let p=Ue(e.position,t.position);return this.isBlockingMultiTile(e,p,i,n,h)}hasBlockingTileFrom(e,t,i,n,s,u){if(i===1&&n===1)return u.hasBlockingTile(t.position,t.layer,Ue(t.position,e.position),s);let l=Ue(e.position,t.position),h=p=>u.hasBlockingTile(p,t.layer,l,s);return this.isBlockingMultiTile(e,l,i,n,h)}isBlockingMultiTile(e,t,i,n,s){let u={src:new F(e.position.x+i,e.position.y),dest:new F(e.position.x+i,e.position.y+n-1)},l={src:new F(e.position.x-1,e.position.y),dest:new F(e.position.x-1,e.position.y+n-1)},h={src:new F(e.position.x,e.position.y-1),dest:new F(e.position.x+i-1,e.position.y-1)},p={src:new F(e.position.x,e.position.y+n),dest:new F(e.position.x+i-1,e.position.y+n)};switch(t){case"right":return this.checkLine(u,s);case"left":return this.checkLine(l,s);case"up":return this.checkLine(h,s);case"down":return this.checkLine(p,s);case"up-left":return this.checkLine({src:h.src,dest:new F(h.dest.x-1,h.dest.y)},s)||this.checkLine({src:new F(l.src.x,l.src.y-1),dest:new F(l.dest.x,l.dest.y-1)},s);case"up-right":return this.checkLine({src:new F(h.src.x+1,h.src.y),dest:h.dest},s)||this.checkLine({src:new F(u.src.x,u.src.y-1),dest:new F(u.dest.x,u.dest.y-1)},s);case"down-left":return this.checkLine({src:new F(l.src.x,l.src.y+1),dest:new F(l.dest.x,l.dest.y+1)},s)||this.checkLine({src:p.src,dest:new F(p.dest.x-1,p.dest.y)},s);case"down-right":return this.checkLine({src:new F(p.src.x+1,p.src.y),dest:p.dest},s)||this.checkLine({src:new F(u.src.x,u.src.y+1),dest:new F(u.dest.x,u.dest.y+1)},s)}return!1}checkLine(e,t){for(let i=e.src.x;i<=e.dest.x;i++)for(let n=e.src.y;n<=e.dest.y;n++)if(t(new F(i,n)))return!0;return!1}};var _P=bt(hf(),1);var pf=class extends yr{findShortestPathImpl(e,t){let i=this.shortestPathBfs(e,t);return{path:this.returnPath(i.previous,e,t),closestToTarget:i.closestToTarget,steps:i.steps,maxPathLengthReached:i.maxPathLengthReached,algorithmUsed:"A_STAR"}}shortestPathBfs(e,t){let i=new Map,n=new Map,s=new Map,u=new _P.MinFibonacciHeap((v,b)=>xa(s,v)-xa(s,b)),l=e,h=this.distance(e.position,t.position),p=0;for(u.push(e),n.set(G.toString(e),0),s.set(G.toString(e),this.distance(e.position,t.position));u.size>0;){let v=u.pop();if(!v)break;p++;let b=this.distance(v.position,t.position);if(b<h&&(h=b,l=v),bP(v,t))return{previous:i,closestToTarget:l,steps:p,maxPathLengthReached:!1};if(xa(n,v)+1>this.options.maxPathLength)return{previous:new Map,closestToTarget:l,steps:p,maxPathLengthReached:!0};for(let T of this.getNeighbors(v,t)){let S=xa(n,v)+this.getCosts(v.position,T),E=G.toString(T);(!n.has(E)||S<xa(n,T))&&(i.set(E,v),n.set(E,S),s.set(E,S+this.distance(T.position,t.position)),u.push(T))}}return{previous:i,closestToTarget:l,steps:p,maxPathLengthReached:!1}}returnPath(e,t,i){let n=[],s=i;for(n.push(s);!bP(s,t);){if(s=e.get(G.toString(s)),!s)return[];n.push(s)}return n.reverse()}};function xa(r,e){return r.get(G.toString(e))??Number.MAX_VALUE}function bP(r,e){return qe.equal(r.position,e.position)?r.layer===e.layer:!1}var df=class{constructor(e){this.data=e}},$r=class{constructor(){this.sizeInternal=0}dequeue(){if(this.tail===void 0)return;this.sizeInternal--;let e=this.tail.data;return this.tail.prev===void 0?(this.tail=void 0,this.head=void 0,e):(this.tail.prev.next=void 0,this.tail=this.tail.prev,e)}enqueue(e){if(this.sizeInternal++,this.head===void 0){this.head=new df(e),this.tail=this.head;return}let t=new df(e);t.next=this.head,this.head.prev=t,this.head=t}peek(){return this.tail?this.tail.data:void 0}peekAll(){let e=[],t=this.tail;for(;t;)e.push(t.data),t=t.prev;return e}clear(){this.head=void 0,this.tail=void 0,this.sizeInternal=0}peekEnd(){return this.head?.data}size(){return this.sizeInternal}};var Oo=class extends yr{findShortestPathImpl(e,t){let i=this.shortestPathBfs(e,t);return{path:this.returnPath(i.previous,e,t),closestToTarget:i.closestToTarget,steps:i.steps,maxPathLengthReached:i.maxPathLengthReached,algorithmUsed:"BFS"}}equal(e,t){return qe.equal(e.position,t.position)?e.layer===t.layer:!1}shortestPathBfs(e,t){let i=new Map,n=new Set,s=new $r,u=e,l=this.distance(e.position,t.position),h=0;for(s.enqueue({node:e,dist:0}),n.add(G.toString(e));s.size()>0;){let p=s.dequeue();if(h++,!p)break;let{node:v,dist:b}=p;if(b>this.options.maxPathLength)return{previous:new Map,closestToTarget:u,steps:h,maxPathLengthReached:!0};let T=this.distance(v.position,t.position);if(T<l&&(l=T,u=v),this.equal(v,t))return{previous:i,closestToTarget:u,steps:h,maxPathLengthReached:!1};for(let S of this.getNeighbors(v,t))n.has(G.toString(S))||(i.set(G.toString(S),v),s.enqueue({node:S,dist:b+1}),n.add(G.toString(S)))}return{previous:i,closestToTarget:u,steps:h,maxPathLengthReached:!1}}returnPath(e,t,i){let n=[],s=i;for(n.push(s);!this.equal(s,t);){if(s=e.get(G.toString(s)),!s)return[];n.push(s)}return n.reverse()}};var vf=class{constructor(){this.previous=new Map;this.visited=new Map;this.queue=new $r;this.minMatching=1/0;this.lastDist=0}isNewFrontier(){let e=this.queue.peek();return!!(e&&e.dist>this.lastDist)}step(e,t,i){this.lastDist=i;for(let n of e){let s=G.toString(n);if(!this.visited.has(s)){this.previous.set(s,t),this.queue.enqueue({node:n,dist:i+1}),this.visited.set(s,i+1);let u=this.otherBfs?.visited.get(s);u!==void 0&&u<this.minMatching&&(this.minMatching=u,this.minMatchingNode=n)}}}},mf=class extends yr{findShortestPathImpl(e,t){let i=this.shortestPathBfs(e,t);return{path:this.returnPath(i.previous,i.previous2,i.matchingPos,e,t),closestToTarget:i.closestToTarget,steps:i.steps,maxPathLengthReached:i.maxPathLengthReached,algorithmUsed:"BIDIRECTIONAL_SEARCH"}}equal(e,t){return qe.equal(e.position,t.position)?e.layer===t.layer:!1}shortestPathBfs(e,t){if(G.equal(e,t))return{previous:new Map,previous2:new Map,closestToTarget:e,steps:0,maxPathLengthReached:!1};let i=new vf,n=new vf,s=0;i.otherBfs=n,n.otherBfs=i;let u=e,l=this.distance(e.position,t.position);for(i.queue.enqueue({node:e,dist:0}),n.queue.enqueue({node:t,dist:0}),i.visited.set(G.toString(e),0),n.visited.set(G.toString(t),0);this.shouldStop(i.queue.size()>0,n.queue.size()>0);){let h=i.queue.dequeue();if(!h)break;let{node:p,dist:v}=h;if(v+1+(n.queue.peek()?.dist||0)>this.options.maxPathLength)return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(u),steps:s,maxPathLengthReached:!0};let b=this.distance(p.position,t.position);if(b<l&&(l=b,u=p),s++,i.step(this.getNeighbors(p,t),p,v),i.isNewFrontier()&&i.minMatchingNode)return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(t),matchingPos:i.minMatchingNode,steps:s,maxPathLengthReached:!1};let T=n.queue.dequeue();if(!T)continue;let{node:S,dist:E}=T;if(s++,n.step(this.getReverseNeighbors(S,t),S,E),n.isNewFrontier()&&n.minMatchingNode)return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(t),matchingPos:n.minMatchingNode,steps:s,maxPathLengthReached:!1}}return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(u),steps:s,maxPathLengthReached:!1}}shouldStop(e,t){return this.options.calculateClosestToTarget?e||t:e&&t}maybeClosestToTarget(e){return this.options.calculateClosestToTarget?e:void 0}returnPath(e,t,i,n,s){if(i){let u=this.getPathFromPrev(e,n,i).reverse(),l=this.getPathFromPrev(t,s,i);return u.pop(),[...u,...l]}else return this.getPathFromPrev(e,n,s).reverse()}getPathFromPrev(e,t,i){let n=[],s=i;for(n.push(s);!this.equal(s,t);){if(s=e.get(G.toString(s)),!s)return[];n.push(s)}return n}};var vm=bt(kw(),1);var jo=class extends yr{constructor(t,i={}){super(t,i);this.openSet=new vm.MinFibonacciHeap;this.g=new Map;this.f=new Map;this.closestToTarget={position:new F(0,0),layer:void 0};this.smallestDistToTarget=0;this.steps=0;this.maxFrontierSize=0;this.maxJumpSize=0;this.turnOrder={right:0,"down-right":1,down:2,"down-left":3,left:4,"up-left":5,up:6,"up-right":7};this.turnTimes=b5();this.distanceUtils=lt.create(4)}findShortestPathImpl(t,i){this.maxJumpSize=this.distance(t.position,i.position);let n=this.shortestPath(t,i);return{path:this.returnPath(n.previous,t,i),closestToTarget:n.closestToTarget,steps:n.steps,maxPathLengthReached:n.maxPathLengthReached,algorithmUsed:"JPS"}}shortestPath(t,i){this.steps=0;let n=new Map;this.g=new Map,this.f=new Map,this.closestToTarget=t,this.smallestDistToTarget=this.distance(t.position,i.position),this.openSet=new vm.MinFibonacciHeap((u,l)=>Fa(this.f,u)-Fa(this.f,l)),this.openSet.push(t);let s=G.toString(t);for(this.g.set(s,0),this.f.set(s,this.distance(t.position,i.position)),this.maxFrontierSize=Math.max(this.maxFrontierSize,this.openSet.size);this.openSet.size>0;){let u=this.openSet.pop();if(!u)break;if(this.steps++,G.equal(u,i))return{previous:n,closestToTarget:i,steps:this.steps,maxPathLengthReached:!1};if(Fa(this.g,u)+1>this.options.maxPathLength)return{previous:new Map,closestToTarget:this.closestToTarget,steps:this.steps,maxPathLengthReached:!0};this.updateClosestToTarget(u,i);for(let l of this.getNeighborsInternal(u,n.get(G.toString(u)),i)){let h=G.toString(l.p),p=Fa(this.g,u)+l.dist;(!this.g.has(h)||p<Fa(this.g,l.p))&&(n.set(h,u),this.g.set(h,p),this.f.set(h,p+this.distance(l.p.position,i.position)),this.openSet.push(l.p))}}return{previous:n,closestToTarget:this.closestToTarget,steps:this.steps,maxPathLengthReached:!1}}updateClosestToTarget(t,i){let n=this.distance(t.position,i.position);n<this.smallestDistToTarget&&(this.smallestDistToTarget=n,this.closestToTarget=t)}addIfNotBlocked(t,i,n){this.blockOrTrans(i,n)||t.add(n)}blockOrTrans(t,i){return this.isBlocking(t,i)||this.getTransition(i.position,i.layer)!==void 0}getNeighborsInternal(t,i,n){if(!i||t.layer!==i.layer)return this.getNeighbors(t,n).map(l=>({p:l,dist:1}));let s=this.prune(i,t).map(l=>{let h=this.getTransition(l.position,t.layer);return{position:l.position,layer:h||t.layer}}),u=[];for(let l of s){let h=this.jump(t,l,n,1);h&&u.push(h)}return u}jump(t,i,n,s){let u=this.distanceUtils.direction(t.position,i.position);if(!(this.isBlocking(t,i)&&!(G.equal(i,n)&&this.options.ignoreBlockedTarget)))return G.equal(i,n)?{p:i,dist:s}:s>=this.maxJumpSize?{p:i,dist:s}:this.getTransition(i.position,t.layer)!==void 0?{p:i,dist:s}:cp(u)?{p:i,dist:s}:this.hasForced(t,i)?{p:i,dist:s}:(this.updateClosestToTarget(i,n),this.jump(i,this.getTilePosInDir(i,Ue(t.position,i.position)),n,s+1))}getForced(t,i){let n=new Set,s=this.posInDir(i,this.distanceUtils.direction(i.position,t.position)),{topLeft:u,downLeft:l,top:h,bottom:p}=this.normalizedPositions(s,i),v=this.distanceUtils.direction(t.position,i.position);return lp(v)&&((this.blockOrTrans(s,l)||this.blockOrTrans(l,p))&&this.addIfNotBlocked(n,i,p),(this.blockOrTrans(s,u)||this.blockOrTrans(u,h))&&this.addIfNotBlocked(n,i,h)),n}hasForced(t,i){let n=this.posInDir(i,this.distanceUtils.direction(i.position,t.position)),{topLeft:s,downLeft:u,top:l,bottom:h}=this.normalizedPositions(n,i),p=this.distanceUtils.direction(t.position,i.position);return!!(lp(p)&&((this.blockOrTrans(n,u)||this.blockOrTrans(u,h))&&!this.blockOrTrans(i,h)||(this.blockOrTrans(n,s)||this.blockOrTrans(s,l))&&!this.blockOrTrans(i,l)))}prune(t,i){let{right:n,top:s,bottom:u}=this.normalizedPositions(t,i),l=this.getForced(t,i),h=Ue(t.position,i.position);return cp(h)?[n,s,u]:[n,...l]}normalizedPositions(t,i){let n=Ue(t.position,i.position);return{topLeft:this.posInDir(i,this.turnTimes.get("up-left")?.get(this.turnOrder[n])||"up-left"),downLeft:this.posInDir(i,this.turnTimes.get("down-left")?.get(this.turnOrder[n])||"down-left"),downRight:this.posInDir(i,this.turnTimes.get("down-right")?.get(this.turnOrder[n])||"down-right"),topRight:this.posInDir(i,this.turnTimes.get("up-right")?.get(this.turnOrder[n])||"up-right"),top:this.posInDir(i,this.turnTimes.get("up")?.get(this.turnOrder[n])||"up"),bottom:this.posInDir(i,this.turnTimes.get("down")?.get(this.turnOrder[n])||"down"),right:this.posInDir(i,this.turnTimes.get("right")?.get(this.turnOrder[n])||"right")}}posInDir(t,i){return{position:t.position.add(Xt(i)),layer:t.layer}}returnPath(t,i,n){let s=[],u=n;for(s.push(u);!G.equal(u,i);){let l=t.get(G.toString(u));if(!l)return[];this.distance(l.position,u.position)>1?this.fillPath(u,l,s):s.push(l),u=l}return s.reverse()}fillPath(t,i,n){let s=t;do{let u=Ue(s.position,i.position);s=this.getTilePosInDir(s,u),n.push(s)}while(!qe.equal(s.position,i.position))}};function Fa(r,e){return r.get(G.toString(e))??Number.MAX_VALUE}function b5(){let r=["right","down-right","down","down-left","left","up-left","up","up-right"],e=new Map;for(let t=0;t<r.length;t++){let i=new Map,n=r[t];i.set(0,n);for(let s=1;s<=7;s++)n=Mn(n),i.set(s,n);e.set(r[t],i)}return e}var Io=bt(Po(),1);var Cf=class{constructor(e,t,i,n={}){this.character=e;this.gridTilemap=t;this.charToFollow=i;let s={distance:0,noPathFoundStrategy:"STOP",maxPathLength:1/0,shortestPathAlgorithm:"BIDIRECTIONAL_SEARCH",ignoreLayers:!1,considerCosts:n.considerCosts||!1,facingDirection:"none"};this.options={...s,...n},this.options.considerCosts&&this.options.shortestPathAlgorithm!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${this.options.shortestPathAlgorithm}'. It can only be used with A* algorithm.`),(e.getTileWidth()>1||e.getTileHeight()>1&&this.options.shortestPathAlgorithm==="JPS")&&console.warn("GridEngine: Pathfinding algorithm 'JPS' can only be used for characters with 'tileWidth' and 'tileHeight' of 1"),this.character=e,this.updateTarget(this.charToFollow.getTilePos().position,this.charToFollow.getTilePos().layer),this.charToFollow.positionChangeStarted().pipe((0,Io.takeUntil)(this.character.autoMovementSet().pipe((0,Io.filter)(u=>u!==this),(0,Io.take)(1)))).subscribe(({enterTile:u,enterLayer:l})=>{this.updateTarget(u,l)})}update(e){this.targetMovement?.update(e)}getInfo(){return{type:"Follow",config:{charToFollow:this.charToFollow.getId(),distance:this.options.distance,noPathFoundStrategy:this.options.noPathFoundStrategy,maxPathLength:this.options.maxPathLength,ignoreLayers:this.options.ignoreLayers,facingDirection:this.options.facingDirection,shortestPathAlgorithm:this.options.shortestPathAlgorithm}}}updateTarget(e,t){let i=this.options.facingDirection!=="none"&&this.options.distance===0;if(i){let n=ha[this.options.facingDirection]+ha[this.charToFollow.getFacingDirection()],s=Mn("up",n);e=this.gridTilemap.getTilePosInDirection({position:new F(e),layer:t},s).position}this.targetMovement=new ko(this.character,this.gridTilemap,{position:new F(e),layer:t},{distance:i?0:this.options.distance+1,config:{algorithm:this.options.shortestPathAlgorithm,noPathFoundStrategy:this.options.noPathFoundStrategy,maxPathLength:this.options.maxPathLength,ignoreLayers:this.options.ignoreLayers,considerCosts:this.options.considerCosts},ignoreBlockedTarget:!0})}};var Da=class{static getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}};var Fo=bt(Po(),1);var Ef=class{constructor(e,t=0,i=-1){this.character=e;this.delay=t;this.radius=i;this.stepSize=0;this.delayLeft=this.delay,this.initialRow=e.getNextTilePos().position.y,this.initialCol=e.getNextTilePos().position.x,this.randomizeStepSize(),this.stepsWalked=0,this.currentMovementDirection="none",this.character.positionChangeStarted().pipe((0,Fo.takeUntil)(this.character.autoMovementSet().pipe((0,Fo.filter)(n=>n!==this),(0,Fo.take)(1)))).subscribe(()=>{this.stepsWalked++}),this.distanceUtils=lt.create(e.getNumberOfDirections())}update(e){if(this.shouldContinueWalkingCurrentDirection())this.character.move(this.currentMovementDirection);else if(this.delayLeft-=e,this.delayLeft<=0){this.delayLeft=this.delay;let t=this.getFreeRandomDirection();this.stepsWalked=0,this.character.move(t),this.currentMovementDirection=t,this.randomizeStepSize()}}getInfo(){return{type:"Random",config:{delay:this.delay,radius:this.radius}}}shouldContinueWalkingCurrentDirection(){return this.stepsWalked<this.stepSize&&this.currentMovementDirection!=="none"&&!this.character.isBlockingDirection(this.currentMovementDirection)&&this.isWithinRadius(this.currentMovementDirection)}getFreeDirections(){return this.distanceUtils.getDirections().filter(t=>!this.character.isBlockingDirection(t)).filter(t=>this.isWithinRadius(t))}isWithinRadius(e){return this.radius==-1?!0:this.getDist(e)<=this.radius}getDist(e){return this.distanceUtils.distance(this.character.getNextTilePos().position.add(Xt(e)),new F(this.initialCol,this.initialRow))}getFreeRandomDirection(){let e=this.getFreeDirections();return e.length==0?"none":e[Da.getRandomInt(e.length)]}randomizeStepSize(){this.stepSize=Da.getRandomInt(this.radius)+1}};var or=bt(Mi(),1),Ye=bt(Po(),1);function Fw(r,e){return r.filter(t=>e.labels?.withAllLabels?e.labels?.withAllLabels.every(i=>t.hasLabel(i)):e.labels?.withOneOfLabels?e.labels?.withOneOfLabels.some(i=>t.hasLabel(i)):e.labels?.withNoneLabels?!e.labels?.withNoneLabels.some(i=>t.hasLabel(i)):!0)}var qf="2.44.2";var Tt=bt(Mi(),1);var Mf=class{constructor(e,t){this.collistionStrategy=e;this.collisionGroupRelation=t;this.tilePosToCharacters=new Map;this.charRemoved$=new Tt.Subject}isCharBlockingAt(e,t,i,n=new Set,s=new Set){if(i.length===0)return!1;let u=this.posToString(e,t),l=this.tilePosToCharacters.get(u);return!!(l&&l.size>0&&[...l].filter(h=>!n.has(h.getId())).filter(h=>!this.doIntersect(h.getCollisionGroups(),s)).some(h=>i.some(p=>h.getCollisionGroups().some(v=>this.collidesWith(p,v)))))}doIntersect(e,t){for(let i of e)if(t.has(i))return!0;return!1}collidesWith(e,t){return this.collisionGroupRelation?(this.collisionGroupRelation.get(e)||new Set).has(t):e===t}getCharactersAt(e,t){let i=this.posToString(e,t),n=this.tilePosToCharacters.get(i);return new Set(n)}addCharacter(e){this.addTilePositions(e.getTilePos(),e),this.addTilePositions(e.getNextTilePos(),e),this.addPositionChangeSub(e),this.addPositionChangeFinishedSub(e),this.addTilePosSetSub(e)}removeCharacter(e){let t=e.getId();this.charRemoved$.next(t),this.deleteTilePositions(e.getTilePos(),e),this.deleteTilePositions(e.getNextTilePos(),e)}add(e,t){this.tilePosToCharacters.has(e)||this.tilePosToCharacters.set(e,new Set),this.tilePosToCharacters.get(e)?.add(t)}addTilePosSetSub(e){e.tilePositionSet().pipe((0,Tt.takeUntil)(this.charRemoved(e.getId()))).subscribe(t=>{this.deleteTilePositions(e.getNextTilePos(),e),this.addTilePositions(t,e)})}charRemoved(e){return this.charRemoved$?.pipe((0,Tt.take)(1),(0,Tt.filter)(t=>t==e))}addPositionChangeSub(e){e.positionChangeStarted().pipe((0,Tt.takeUntil)(this.charRemoved(e.getId())),this.posChangeToLayerPos()).subscribe(t=>{this.collistionStrategy==="BLOCK_ONE_TILE_AHEAD"&&this.deleteTilePositions(t.exit,e),this.addTilePositions(t.enter,e)})}addPositionChangeFinishedSub(e){e.positionChangeFinished().pipe((0,Tt.takeUntil)(this.charRemoved(e.getId())),this.posChangeToLayerPos()).subscribe(t=>{this.deleteTilePositions(t.exit,e),this.addTilePositions(t.enter,e)})}addTilePositions(e,t){this.forEachCharTile(e,t,(i,n)=>{this.add(this.posToString(new F(i,n),e.layer),t)})}deleteTilePositions(e,t){this.forEachCharTile(e,t,(i,n)=>{this.tilePosToCharacters.get(this.posToString(new F(i,n),e.layer))?.delete(t)})}forEachCharTile(e,t,i){let n=e.position;for(let s=n.x;s<n.x+t.getTileWidth();s++)for(let u=n.y;u<n.y+t.getTileHeight();u++)i(s,u)}posChangeToLayerPos(){return(0,Tt.pipe)((0,Tt.map)(e=>({enter:{position:new F(e.enterTile),layer:e.enterLayer},exit:{position:new F(e.exitTile),layer:e.exitLayer}})))}posToString(e,t){return`${e.x}#${e.y}#${t}`}};var Di=class{constructor(e,t,i,n){this.x=e;this.y=t;this.width=i;this.height=n}getX(){return this.x}getY(){return this.y}getWidth(){return this.width}getHeight(){return this.height}isInRange(e){return e.x>=this.x&&e.x<this.x+this.width&&e.y>=this.y&&e.y<this.y+this.height}};var Do="ge_charLayer";var Dw=0,P5=1,mm={none:1,left:2,"up-left":3,up:4,"up-right":5,right:6,"down-right":7,down:8,"down-left":9},xf=class{constructor(e,t){this.tilemap=e;this.gridTilemap=t;this.tileCollisionCache=new Map}fixLayer(e){this.fixedLayer=this.tileCollisionCache.get(e)}unfixLayers(){this.fixedLayer=void 0}rebuild(e){e||(e=new Di(0,0,this.tilemap.getWidth(),this.tilemap.getHeight()));let t=this.tilemap.getLayers().filter(i=>i.isCharLayer());for(let i of[...t,void 0]){let n=this.tileCollisionCache.get(i?.getName());if(n===void 0){n=new Array(this.tilemap.getWidth());for(let s=0;s<this.tilemap.getWidth();s++)n[s]=new Array(this.tilemap.getHeight());this.tileCollisionCache.set(i?.getName(),n)}for(let s=e.getY();s<e.getY()+e.getHeight();s++)for(let u=e.getX();u<e.getX()+e.getWidth();u++){let l=0;!this.gridTilemap.hasNoTileUncached(new F(u,s),i?.getName())&&(l=ym(l,0));for(let v of pa())this.gridTilemap.hasBlockingTileUncached(new F(u,s),i?.getName(),v,!0)&&(l=ym(l,mm[v]));this.gridTilemap.hasBlockingTileUncached(new F(u,s),i?.getName(),void 0,!0)&&(l=ym(l,mm[1])),n[u][s]=l}}}hasTileAt(e,t,i){let s=(this.fixedLayer||this.tileCollisionCache.get(i))?.[e]?.[t];if(s!==void 0)return Lf(s,Dw)}isBlockingFrom(e,t,i,n,s){let l=(this.fixedLayer||this.tileCollisionCache.get(i))?.[e]?.[t];if(l!==void 0)return!s&&!Lf(l,Dw)?!0:n===void 0?Lf(l,P5):Lf(l,mm[n])}};function ym(r,e){return r|1<<e}function Lf(r,e){return(r>>e&1)==1}var Rw="ge_cost",jf=class r{constructor(e,t,i,n=void 0,s=!1){this.tilemap=e;this.collisionTilePropertyName=t;this.useTileCollisionCache=s;this.characters=new Map;this.transitions=new Map;this.reverseTransitions=new Map;this.collidesPropNames=new Map;this.tileCostPropNames=new Map;this.collisionRelevantLayersFrameCache=new Map;this.charBlockCache=new Mf(i,n);for(let u of pa())this.collidesPropNames.set(u,r.ONE_WAY_COLLIDE_PROP_PREFIX+u),this.tileCostPropNames.set(u,`${Rw}_${u}`);this.useTileCollisionCache&&(this.tileCollisionCache=new xf(e,this),this.tileCollisionCache.rebuild())}static{this.ONE_WAY_COLLIDE_PROP_PREFIX="ge_collide_"}fixCacheLayer(e){this.tileCollisionCache?.fixLayer(e)}unfixCacheLayers(){this.tileCollisionCache?.unfixLayers()}addCharacter(e){this.characters.set(e.getId(),e);let t=e.getNextTilePos().layer;t===void 0?e.setTilePosition({...e.getNextTilePos(),layer:this.getLowestCharLayer()}):this.getCharLayerNames().includes(t)||console.warn(`Char layer '${t}' of character '${e.getId()}' is unknown.`),this.charBlockCache.addCharacter(e)}removeCharacter(e){let t=this.characters.get(e);t&&(this.charBlockCache.removeCharacter(t),this.characters.delete(e))}getCharacters(){return[...this.characters.values()]}getCharactersAt(e,t){return this.charBlockCache.getCharactersAt(e,t)}rebuildTileCollisionCache(e){this.tileCollisionCache?.rebuild(e)}hasBlockingTileUncached(e,t,i,n){if(!n&&this.hasNoTileUncached(e,t))return!0;let s=this.getCollisionRelevantLayers(t);for(let u of s)if(this.isLayerBlockingAt(u.getName(),e,i))return!0;return!1}hasBlockingTile(e,t,i,n){let s=this.tileCollisionCache?.isBlockingFrom(e.x,e.y,t,i,n);return s!==void 0?s:this.hasBlockingTileUncached(e,t,i,n)}getTransition(e,t){let i=this.transitions.get(e.toString());if(i)return i.get(t)}getReverseTransitions(e,t){let i=this.reverseTransitions.get(e.toString());if(i)return i.get(t)}setTransition(e,t,i){this.transitions.has(e.toString())||this.transitions.set(e.toString(),new Map),this.reverseTransitions.has(e.toString())||this.reverseTransitions.set(e.toString(),new Map),this.transitions.get(e.toString())?.set(t,i),this.reverseTransitions.get(e.toString())?.has(i)||this.reverseTransitions.get(e.toString())?.set(i,new Set),this.reverseTransitions.get(e.toString())?.get(i)?.add(t)}getTransitions(){return new Map([...this.transitions].map(([e,t])=>[e,new Map(t)]))}getTileCosts(e,t){let i=this.getCollisionRelevantLayers(e.layer),n=1;for(let s of i)n=Math.max(n,this.getTileCostsForLayer({...e,layer:s.getName()},t));return n}getTileCostsForLayer(e,t){let i=this.tilemap.getTileAt(e.position.x,e.position.y,e.layer);return t&&i?.getProperty(this.tileCostPropNames.get(t)||"")||i?.getProperty(Rw)||1}hasNoTileUncached(e,t){return!this.getCollisionRelevantLayers(t).some(n=>this.tilemap.hasTileAt(e.x,e.y,n.getName()))}hasNoTile(e,t){let i=this.tileCollisionCache?.hasTileAt(e.x,e.y,t);return i!==void 0?i:this.hasNoTileUncached(e,t)}hasBlockingChar(e,t,i,n=new Set,s=new Set){return this.charBlockCache.isCharBlockingAt(e,t,i,n,s)}isInRange(e){return new Di(0,0,this.tilemap.getWidth(),this.tilemap.getHeight()).isInRange(e)}toMapDirection(e){return this.isIsometric()?nb(e):e}fromMapDirection(e){return this.isIsometric()?Mn(e):e}isIsometric(){return this.tilemap.getOrientation()==="isometric"}getTilePosInDirection(e,t){let i=e.position.add(Xt(this.toMapDirection(t))),n=this.getTransition(i,e.layer)||e.layer;return{position:i,layer:n}}invalidateFrameCache(){this.collisionRelevantLayersFrameCache.clear()}isLayerBlockingAt(e,t,i){let n=this.tilemap.getTileAt(t.x,t.y,e);return n?!!(n.getProperty(this.collisionTilePropertyName)||i&&n.getProperty(this.collidesPropNames.get(i)||"")):!1}getCharLayerIndexes(){return this.tilemap.getLayers().map((e,t)=>({layer:e,index:t})).filter(({layer:e})=>e.isCharLayer()).map(({index:e})=>e)}findPrevAndCharLayer(e){let t=this.getCharLayerIndexes(),i=this.tilemap.getLayers(),n=t.findIndex(s=>i[s].getProperty(Do)==e);return n==0?{prevIndex:-1,charLayerIndex:t[n]}:{prevIndex:t[n-1],charLayerIndex:t[n]}}getCollisionRelevantLayers(e){if(!e)return this.tilemap.getLayers();let t=this.collisionRelevantLayersFrameCache.get(e);if(t)return t;let{prevIndex:i,charLayerIndex:n}=this.findPrevAndCharLayer(e),s=this.tilemap.getLayers().slice(i+1,n+1);return this.collisionRelevantLayersFrameCache.set(e,s),s}getLowestCharLayer(){for(let e of this.tilemap.getLayers())if(e.isCharLayer())return e.getProperty(Do)}getCharLayerNames(){return this.tilemap.getLayers().filter(e=>e.isCharLayer()).map(e=>e.getProperty(Do)).filter(w5)}};function w5(r){return r!=null}var If=(t=>(t.REMOVED="REMOVED",t.ADDED="ADDED",t))(If||{});var zw=bt(Mi(),1),Ff=bt(Po(),1);var gm=(i=>(i.WAIT="WAIT",i.SKIP="SKIP",i.STOP="STOP",i))(gm||{}),kf=class{constructor(e,t){this.character=e;this.tilemap=t;this.queue=new $r;this.finished$=new zw.Subject;this.pathBlockedWaitElapsed=0;this.distanceUtils=lt.create(e.getNumberOfDirections()),this.character.autoMovementSet().pipe((0,Ff.filter)(i=>i!==this),(0,Ff.take)(1)).subscribe(()=>{this.queue.size()>0&&this.finishMovementTerminated(),this.finished$.complete()})}update(e){(!this.character.isMoving()||this.character.willCrossTileBorderThisUpdate(e))&&this.queue.size()>0&&this.moveCharOnPath(e)}getInfo(){return{type:"Queue"}}enqueue(e,t={}){let i={pathBlockedStrategy:t.pathBlockedStrategy??"STOP",pathBlockedWaitTimeoutMs:t?.pathBlockedWaitTimeoutMs||-1,ignoreInvalidPositions:t.ignoreInvalidPositions??!1,skipInvalidPositions:t.skipInvalidPositions??!1};for(let n of e){let s={command:n,config:i};if(ai(n)){this.queue.enqueue(s);continue}let l=this.queue.peekEnd()?.command;if(l||(l=this.character.getNextTilePos()),ai(l)){this.queue.enqueue(s);continue}let h=this.distanceUtils.distance(l.position,n.position)===1;(!t.ignoreInvalidPositions||h)&&this.queue.enqueue(s)}}peekAll(){return this.queue.peekAll()}size(){return this.queue.size()}finished(){return this.finished$}clear(){this.queue.clear()}moveCharOnPath(e){let t=this.queue.peek();if(!t)return;let i=t.command,n=t.config;if(ai(i)&&(i=this.tilemap.getTilePosInDirection(this.character.getNextTilePos(),i)),n.skipInvalidPositions){if(i=this.getNextValidPosition(),!i){this.finishInvalidNextPos(i);return}}else if(!this.isNeighborPos(i)){this.finishInvalidNextPos(i);return}if(this.character.isBlockingDirection(Ue(this.character.getNextTilePos().position,i.position))){if(n.pathBlockedStrategy==="STOP")this.finishPathBlocked(i);else if(n.pathBlockedStrategy==="SKIP"){this.queue.dequeue(),this.moveCharOnPath(e);return}else n.pathBlockedStrategy==="WAIT"&&n.pathBlockedWaitTimeoutMs>-1&&(this.pathBlockedWaitElapsed+=e,this.pathBlockedWaitElapsed>=n.pathBlockedWaitTimeoutMs&&this.finishBlockedWaitTimeout(i,n.pathBlockedWaitTimeoutMs));return}this.pathBlockedWaitElapsed=0,this.queue.dequeue(),this.character.move(this.getDir(this.character.getNextTilePos().position,i.position)),this.isLastMovement()&&this.finish("SUCCESS","",i)}getNextValidPosition(){for(;this.queue.size()>0;){let e=this.queue.peek()?.command;if(ai(e)&&(e=this.tilemap.getTilePosInDirection(this.character.getNextTilePos(),e)),e&&this.isNeighborPos(e))return e;this.queue.dequeue()}}isLastMovement(){return this.queue.size()===0}isNeighborPos(e){let t=this.distanceUtils.distance(this.character.getNextTilePos().position,e.position)===1,i=this.tilemap.getTransition(e.position,this.character.getNextTilePos().layer);if(this.character.getNextTilePos().layer!==e.layer)return t&&i===e.layer;let n=i!==void 0&&i!==e.layer;return t&&!n}finishMovementTerminated(){this.finish("MOVEMENT_TERMINATED","New automatic movement has been set to character.")}finishInvalidNextPos(e){e?this.finish("INVALID_NEXT_POS",`Position ${this.posToStr(e)} is not reachable from ${this.posToStr(this.character.getNextTilePos())}.`):this.finish("INVALID_NEXT_POS",`No enqueued position is reachable from ${this.posToStr(this.character.getNextTilePos())}.`)}finishPathBlocked(e){this.finish("PATH_BLOCKED",`Position ${this.posToStr(e)} is blocked.`)}finishBlockedWaitTimeout(e,t){this.finish("PATH_BLOCKED_WAIT_TIMEOUT",`Position ${this.posToStr(e)} is blocked and the wait timeout of ${t} ms has been exceeded.`)}finish(e,t="",i=this.character.getNextTilePos()){this.queue=new $r,this.finished$.next({position:i.position,result:e,description:t,layer:i.layer})}getDir(e,t){return this.tilemap.fromMapDirection(Ue(e,t))}posToStr(e){return`(${e.position.x}, ${e.position.y}, ${e.layer})`}};var Ra=class{constructor(e=!0){this.isCreatedInternal=!1;e&&console.log(`Using GridEngine v${qf}`)}getCharLayer(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getTilePos().layer}getTransition(e,t){return this.initGuard(),this.gridTilemap?.getTransition(new F(e),t)}setTransition(e,t,i){return this.initGuard(),this.gridTilemap?.setTransition(new F(e),t,i)}create(e,t){this.isCreatedInternal=!0,this.gridCharacters=new Map;let i=this.setConfigDefaults(t);this.config=i,this.movementStopped$=new or.Subject,this.movementStarted$=new or.Subject,this.directionChanged$=new or.Subject,this.positionChangeStarted$=new or.Subject,this.positionChangeFinished$=new or.Subject,this.queueMovementFinished$=new or.Subject,this.charRemoved$=new or.Subject,this.charAdded$=new or.Subject,this.gridTilemap=new jf(e,this.config.collisionTilePropertyName,this.config.characterCollisionStrategy,this.recordToMap(this.config.collisionGroupRelation),this.config.cacheTileCollisions),this.addCharacters()}recordToMap(e){return e?new Map(Object.entries(e).map(([i,n])=>[i,new Set(n)])):void 0}getPosition(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getTilePos().position}move(e,t){this.moveChar(e,t)}moveRandomly(e,t=0,i=-1){this.initGuard();let n=this.gridCharacters?.get(e);if(!n)throw this.createCharUnknownErr(e);let s=new Ef(n,t,i);n.setMovement(s)}getMovement(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);let i=t.getMovement();return i?i.getInfo():{type:"None"}}moveTo(e,t,i){let n=this.assembleMoveToConfig(i);this.initGuard();let s=this.gridCharacters?.get(e);if(!s)throw this.createCharUnknownErr(e);if(!this.gridTilemap)throw this.createUninitializedErr();let u=new ko(s,this.gridTilemap,{position:new F(t),layer:i?.targetLayer||s.getNextTilePos().layer},{distance:0,config:n});return s.setMovement(u),u.finishedObs().pipe((0,Ye.map)(l=>({charId:e,position:l.position,result:l.result,description:l.description,layer:l.layer})))}stopMovement(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.setMovement(void 0)}setSpeed(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setSpeed(t)}getSpeed(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getSpeed()}collidesWithTiles(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.collidesWithTiles()}update(e,t){if(this.isCreatedInternal&&this.gridCharacters)for(let[i,n]of this.gridCharacters)n.update(t);this.gridTilemap?.invalidateFrameCache()}addCharacter(e){if(!this.gridTilemap)throw this.createUninitializedErr();if(!this.config)throw this.createUninitializedErr();let t={speed:e.speed||4,tilemap:this.gridTilemap,collidesWithTiles:!0,collisionGroups:["geDefault"],ignoreCollisionGroups:[],charLayer:e.charLayer,facingDirection:e.facingDirection,labels:e.labels,numberOfDirections:e.numberOfDirections??this.config.numberOfDirections,tileWidth:e.tileWidth,tileHeight:e.tileHeight};typeof e.collides=="boolean"?e.collides===!1&&(t.collidesWithTiles=!1,t.collisionGroups=[]):e.collides!==void 0&&(e.collides.collidesWithTiles===!1&&(t.collidesWithTiles=!1),e.collides.collisionGroups&&(t.collisionGroups=e.collides.collisionGroups),e.collides.ignoreCollisionGroups&&(t.ignoreCollisionGroups=e.collides.ignoreCollisionGroups),t.ignoreMissingTiles=e.collides?.ignoreMissingTiles??!1);let i=new of(e.id,t);e.startPosition&&i.setTilePosition({position:new F(e.startPosition),layer:i.getTilePos().layer}),this.gridCharacters?.set(e.id,i),this.gridTilemap.addCharacter(i);let n=i.getId();i.movementStopped().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.movementStopped$?.next({charId:n,direction:s})}),i.movementStarted().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.movementStarted$?.next({charId:n,direction:s})}),i.directionChanged().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.directionChanged$?.next({charId:n,direction:s})}),i.positionChangeStarted().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.positionChangeStarted$?.next({charId:n,...s})}),i.positionChangeFinished().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.positionChangeFinished$?.next({charId:n,...s})}),this.charAdded$?.next(n)}hasCharacter(e){return this.initGuard(),!!this.gridCharacters?.has(e)}removeCharacter(e){if(this.initGuard(),!this.gridCharacters?.get(e))throw this.createCharUnknownErr(e);this.gridTilemap?.removeCharacter(e),this.gridCharacters?.delete(e),this.charRemoved$?.next(e)}removeAllCharacters(){if(this.initGuard(),!!this.gridCharacters)for(let e of this.gridCharacters.keys())this.removeCharacter(e)}getAllCharacters(e){if(this.initGuard(),!this.gridCharacters)return[];let t=[...this.gridCharacters.values()];return(e?Fw(t,e):t).map(n=>n.getId())}getLabels(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getLabels()}addLabels(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.addLabels(t)}removeLabels(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.removeLabels(t)}clearLabels(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.clearLabels()}follow(e,t,i,n){let s;i===void 0?s={distance:0,closestPointIfBlocked:!1}:typeof i=="number"?(s={distance:i,closestPointIfBlocked:!1},n&&(s.closestPointIfBlocked=!0)):s=i,this.initGuard();let u=this.gridCharacters?.get(e),l=this.gridCharacters?.get(t);if(!u)throw this.createCharUnknownErr(e);if(!l)throw this.createCharUnknownErr(t);if(!this.gridTilemap)throw this.createUninitializedErr();let h=new Cf(u,this.gridTilemap,l,{distance:s.distance??0,noPathFoundStrategy:s.closestPointIfBlocked?"CLOSEST_REACHABLE":"STOP",maxPathLength:s.maxPathLength??1/0,shortestPathAlgorithm:s.algorithm??"BIDIRECTIONAL_SEARCH",ignoreLayers:!!s.ignoreLayers,facingDirection:s.facingDirection??"none"});u.setMovement(h)}isMoving(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.isMoving()}getFacingDirection(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getFacingDirection()}getFacingPosition(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);let i=t.getFacingPosition();return{x:i.x,y:i.y}}turnTowards(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);return i.turnTowards(t)}getCharactersAt(e,t){if(this.initGuard(),!this.gridTilemap)return[];let i=this.gridTilemap.getCharactersAt(new F(e),t);return Array.from(i).map(n=>n.getId())}setPosition(e,t,i){this.initGuard();let n=this.gridCharacters?.get(e);if(!n)throw this.createCharUnknownErr(e);i||n.setTilePosition({position:new F(t),layer:n.getTilePos().layer}),n.setTilePosition({position:new F(t),layer:i})}isBlocked(e,t,i=["geDefault"]){this.initGuard();let n=new F(e);return!!(this.gridTilemap?.hasBlockingTile(n,t)||this.gridTilemap?.hasBlockingChar(n,t,i))}isTileBlocked(e,t){return this.initGuard(),!!this.gridTilemap?.hasBlockingTile(new F(e),t)}getCollisionGroups(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getCollisionGroups()||[]}setCollisionGroups(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setCollisionGroups(t)}getIgnoreCollisionGroups(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getIgnoreCollisionGroups()||[]}setIgnoreCollisionGroups(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setIgnoreCollisionGroups(t)}getTilePosInDirection(e,t,i){if(!this.gridTilemap)throw this.createUninitializedErr();let n=this.gridTilemap.getTilePosInDirection({position:new F(e),layer:t},i);return{position:n.position.toPosition(),charLayer:n.layer}}findShortestPath(e,t,i={}){if(!this.gridTilemap)throw this.createUninitializedErr();let n=i.shortestPathAlgorithm||"BFS";i.considerCosts&&n!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${n}'. It can only be used with A* algorithm.`);let s=i.pathWidth!==void 0&&i.pathWidth!==1,u=i.pathHeight!==void 0&&i.pathHeight!==1;(s||u)&&n==="JPS"&&console.warn("GridEngine: Pathfinding options 'pathWidth' and 'pathHeight' > 1 cannot be used with algorithm 'JPS'.");let h=new Ro(this.gridTilemap).findShortestPath(G.toInternal(e),G.toInternal(t),{...i,shortestPathAlgorithm:n});return{path:h.path.map(G.fromInternal),closestToTarget:h.closestToTarget?G.fromInternal(h.closestToTarget):void 0,reachedMaxPathLength:!1,steps:h.steps}}steppedOn(e,t,i){return this.positionChangeFinished().pipe((0,Ye.filter)(n=>e.includes(n.charId)&&t.some(s=>s.x===n.enterTile.x&&s.y===n.enterTile.y)&&(i===void 0||i.includes(n.enterLayer))))}characterShifted(){if(!this.charAdded$||!this.charRemoved$)throw this.createUninitializedErr();return this.charAdded$.pipe((0,Ye.map)(e=>({charId:e,action:"ADDED"})),(0,Ye.mergeWith)(this.charRemoved$.pipe((0,Ye.map)(e=>({charId:e,action:"REMOVED"})))))}movementStarted(){if(!this.movementStarted$)throw this.createUninitializedErr();return this.movementStarted$}movementStopped(){if(!this.movementStopped$)throw this.createUninitializedErr();return this.movementStopped$}directionChanged(){if(!this.directionChanged$)throw this.createUninitializedErr();return this.directionChanged$}positionChangeStarted(){if(!this.positionChangeStarted$)throw this.createUninitializedErr();return this.positionChangeStarted$}positionChangeFinished(){if(!this.positionChangeFinished$)throw this.createUninitializedErr();return this.positionChangeFinished$}getMovementProgress(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getMovementProgress()}rebuildTileCollisionCache(e,t,i,n){this.gridTilemap?.rebuildTileCollisionCache(new Di(e,t,i,n))}addQueueMovements(e,t,i){this.initGuard();let n=this.gridCharacters?.get(e);if(!n)throw this.createCharUnknownErr(e);if(!this.gridTilemap)throw this.createUninitializedErr();let s;n?.getMovement()?.getInfo().type==="Queue"?s=n.getMovement():(s=new kf(n,this.gridTilemap),n.setMovement(s),s.finished().pipe((0,Ye.takeUntil)((0,or.merge)(this.charRemoved(e),n.autoMovementSet()))).subscribe(u=>{this.queueMovementFinished$?.next({charId:e,...u})})),s.enqueue(t.map(u=>ai(u)?u:{position:new F(u.position),layer:u.charLayer}),i)}queueMovementFinished(){if(!this.queueMovementFinished$)throw this.createUninitializedErr();return this.queueMovementFinished$}getEnqueuedMovements(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getMovement()?.getInfo().type==="Queue"?t.getMovement().peekAll().map(n=>({command:ai(n.command)?n.command:G.fromInternal(n.command),config:n.config})):[]}clearEnqueuedMovements(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.getMovement()?.getInfo().type==="Queue"&&t.getMovement().clear()}getTileCost(e,t,i){return this.initGuard(),this.gridTilemap?.getTileCosts({position:new F(e),layer:t},i)??1}getState(){let e=[];if(this.gridCharacters)for(let[t,i]of this.gridCharacters.entries())e.push({id:t,position:G.fromInternal(i.getTilePos()),facingDirection:i.getFacingDirection(),speed:i.getSpeed(),labels:i.getLabels(),movementProgress:i.getMovementProgress(),collisionConfig:{collisionGroups:i.getCollisionGroups(),ignoreCollisionGroups:i.getIgnoreCollisionGroups(),collidesWithTiles:i.collidesWithTiles(),ignoreMissingTiles:i.getIgnoreMissingTiles()}});return{characters:e}}setState(e){if(this.gridCharacters)for(let t of e.characters){let i=this.gridCharacters.get(t.id);if(i){let n=i.getTilePos();G.equal(n,G.toInternal(t.position))||i.setTilePosition(G.toInternal(t.position)),i.setSpeed(t.speed),i.turnTowards(t.facingDirection),t.collisionConfig.collisionGroups&&i.setCollisionGroups(t.collisionConfig.collisionGroups),t.collisionConfig.collidesWithTiles!==void 0&&i.setCollidesWithTiles(t.collisionConfig.collidesWithTiles),t.collisionConfig.ignoreMissingTiles!==void 0&&i.setIgnoreMissingTiles(t.collisionConfig.ignoreMissingTiles),i.setMovementProgress(t.movementProgress),i.clearLabels(),i.addLabels(t.labels)}}}charRemoved(e){if(!this.charRemoved$)throw this.createUninitializedErr();return this.charRemoved$?.pipe((0,Ye.take)(1),(0,Ye.filter)(t=>t==e))}initGuard(){if(!this.isCreatedInternal)throw this.createUninitializedErr()}createUninitializedErr(){throw new Error("GridEngine not initialized. You need to call create() first.")}addCharacters(){this.config?.characters.forEach(e=>this.addCharacter(e))}moveChar(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);if(i.getNumberOfDirections()===4){if(!this.gridTilemap?.isIsometric()&&Qi(t)){console.warn(`GridEngine: Character '${e}' can't be moved '${t}' in 4 direction mode.`);return}else if(this.gridTilemap?.isIsometric()&&!Qi(t)){console.warn(`GridEngine: Character '${e}' can't be moved '${t}' in 4 direction isometric mode.`);return}}i.move(t)}createCharUnknownErr(e){return new Error(`Character unknown: ${e}`)}assembleMoveToConfig(e={}){let t={...e,noPathFoundStrategy:"STOP",pathBlockedStrategy:"WAIT"};return e?.noPathFoundStrategy&&(Object.values(cn).includes(e.noPathFoundStrategy)?t.noPathFoundStrategy=e.noPathFoundStrategy:console.warn(`GridEngine: Unknown NoPathFoundStrategy '${e.noPathFoundStrategy}'. Falling back to 'STOP'`)),e?.pathBlockedStrategy&&(Object.values(wo).includes(e.pathBlockedStrategy)?t.pathBlockedStrategy=e.pathBlockedStrategy:console.warn(`GridEngine: Unknown PathBlockedStrategy '${e.pathBlockedStrategy}'. Falling back to 'WAIT'`)),t}setConfigDefaults(e){return{collisionTilePropertyName:"ge_collide",numberOfDirections:4,characterCollisionStrategy:"BLOCK_TWO_TILES",cacheTileCollisions:!1,...e}}};var Rf=class extends jo{constructor(e,t={}){super(e,t),this.distanceUtils=lt.create(8)}getForced(e,t){let i=new Set,n=this.posInDir(t,this.distanceUtils.direction(t.position,e.position)),{topLeft:s,downLeft:u,top:l,bottom:h,topRight:p,downRight:v}=this.normalizedPositions(n,t),b=this.distanceUtils.direction(e.position,t.position);return Qi(b)?(this.blockOrTrans(n,s)&&(this.addIfNotBlocked(i,t,l),this.addIfNotBlocked(i,t,p),this.blockOrTrans(u,s)&&this.addIfNotBlocked(i,t,s)),this.blockOrTrans(n,u)&&(this.addIfNotBlocked(i,t,h),this.addIfNotBlocked(i,t,v),this.blockOrTrans(s,u)&&this.addIfNotBlocked(i,t,u)),this.blockOrTrans(s,l)&&this.addIfNotBlocked(i,t,l),this.blockOrTrans(u,h)&&this.addIfNotBlocked(i,t,h),this.blockOrTrans(s,p)&&this.addIfNotBlocked(i,t,p),this.blockOrTrans(u,v)&&this.addIfNotBlocked(i,t,v)):((this.blockOrTrans(n,l)||this.blockOrTrans(l,p))&&this.addIfNotBlocked(i,t,p),(this.blockOrTrans(n,h)||this.blockOrTrans(h,v))&&this.addIfNotBlocked(i,t,v),this.blockOrTrans(n,s)&&this.blockOrTrans(n,l)&&(this.addIfNotBlocked(i,t,l),this.addIfNotBlocked(i,t,s)),this.blockOrTrans(n,u)&&this.blockOrTrans(n,h)&&(this.addIfNotBlocked(i,t,h),this.addIfNotBlocked(i,t,u)),this.blockOrTrans(s,l)&&this.blockOrTrans(n,l)&&this.addIfNotBlocked(i,t,l),this.blockOrTrans(u,h)&&this.blockOrTrans(n,h)&&this.addIfNotBlocked(i,t,h)),i}hasForced(e,t){let i=this.posInDir(t,this.distanceUtils.direction(t.position,e.position)),{topLeft:n,downLeft:s,top:u,bottom:l,topRight:h,downRight:p}=this.normalizedPositions(i,t),v=this.distanceUtils.direction(e.position,t.position);if(Qi(v)){if(this.blockOrTrans(i,n)&&(!this.blockOrTrans(t,u)||!this.blockOrTrans(t,h)||this.blockOrTrans(s,n)&&!this.blockOrTrans(t,n))||this.blockOrTrans(i,s)&&(!this.blockOrTrans(t,l)||!this.blockOrTrans(t,p)||this.blockOrTrans(n,s)&&!this.blockOrTrans(t,s))||this.blockOrTrans(n,u)&&!this.blockOrTrans(t,u)||this.blockOrTrans(s,l)&&!this.blockOrTrans(t,l)||this.blockOrTrans(n,h)&&!this.blockOrTrans(t,h)||this.blockOrTrans(s,p)&&!this.blockOrTrans(t,p))return!0}else if((this.blockOrTrans(i,u)||this.blockOrTrans(u,h))&&!this.blockOrTrans(t,h)||(this.blockOrTrans(i,l)||this.blockOrTrans(l,p))&&!this.blockOrTrans(t,p)||this.blockOrTrans(i,n)&&this.blockOrTrans(i,u)&&(!this.blockOrTrans(t,u)||!this.blockOrTrans(t,n))||this.blockOrTrans(i,s)&&this.blockOrTrans(i,l)&&(!this.blockOrTrans(t,l)||!this.blockOrTrans(t,s))||this.blockOrTrans(n,u)&&this.blockOrTrans(i,u)&&!this.blockOrTrans(t,u)||this.blockOrTrans(s,l)&&this.blockOrTrans(i,l)&&!this.blockOrTrans(t,l))return!0;return!1}prune(e,t){let{top:i,right:n,topRight:s,downRight:u,bottom:l}=this.normalizedPositions(e,t),h=this.getForced(e,t),p=Ue(e.position,t.position);return Qi(p)?[i,n,s,u,l,...h]:[n,...h]}jump(e,t,i,n){let s=this.distanceUtils.direction(e.position,t.position),u=this.getTilePosInDir(t,this.distanceUtils.direction(t.position,e.position));if(!(this.isBlocking(u,t)&&!(G.equal(t,i)&&this.options.ignoreBlockedTarget))){if(G.equal(t,i))return{p:t,dist:n};if(n>=this.maxJumpSize)return{p:t,dist:n};if(this.getTransition(t.position,e.layer)!==void 0)return{p:t,dist:n};if(this.hasForced(e,t))return{p:t,dist:n};if(this.updateClosestToTarget(t,i),s==="up-left"){if(this.jump(t,this.getTilePosInDir(t,"up"),i,n+1)!==void 0)return{p:t,dist:n};if(this.jump(t,this.getTilePosInDir(t,"left"),i,n+1)!==void 0)return{p:t,dist:n}}else if(s==="down-left"){if(this.jump(t,this.getTilePosInDir(t,"down"),i,n+1)!==void 0)return{p:t,dist:n};if(this.jump(t,this.getTilePosInDir(t,"left"),i,n+1)!==void 0)return{p:t,dist:n}}else if(s==="up-right"){if(this.jump(t,this.getTilePosInDir(t,"up"),i,n+1)!==void 0)return{p:t,dist:n};if(this.jump(t,this.getTilePosInDir(t,"right"),i,n+1)!==void 0)return{p:t,dist:n}}else if(s==="down-right"){if(this.jump(t,this.getTilePosInDir(t,"down"),i,n+1)!==void 0)return{p:t,dist:n};if(this.jump(t,this.getTilePosInDir(t,"right"),i,n+1)!==void 0)return{p:t,dist:n}}return this.jump(t,this.getTilePosInDir(t,Ue(e.position,t.position)),i,n+1)}}};var Ro=class{constructor(e){this.gridTilemap=e}findShortestPath(e,t,i={}){return O5(i.shortestPathAlgorithm||"BIDIRECTIONAL_SEARCH",this.gridTilemap,i).findShortestPath(e,t)}};function O5(r,e,t){switch(r){case"BIDIRECTIONAL_SEARCH":return new mf(e,t);case"A_STAR":return new pf(e,t);case"JPS":return t.numberOfDirections===8?new Rf(e,t):new jo(e,t)}return new Oo(e,t)}var Df=(h=>(h.SUCCESS="SUCCESS",h.NO_PATH_FOUND_MAX_RETRIES_EXCEEDED="NO_PATH_FOUND_MAX_RETRIES_EXCEEDED",h.PATH_BLOCKED_MAX_RETRIES_EXCEEDED="PATH_BLOCKED_MAX_RETRIES_EXCEEDED",h.PATH_BLOCKED="PATH_BLOCKED",h.NO_PATH_FOUND="NO_PATH_FOUND",h.PATH_BLOCKED_WAIT_TIMEOUT="PATH_BLOCKED_WAIT_TIMEOUT",h.MOVEMENT_TERMINATED="MOVEMENT_TERMINATED",h.MAX_PATH_LENGTH_REACHED="MAX_PATH_LENGTH_REACHED",h))(Df||{}),ko=class{constructor(e,t,i,{config:n,ignoreBlockedTarget:s=!1,distance:u=0}={}){this.character=e;this.tilemap=t;this.targetPos=i;this.shortestPath=[];this.distOffset=0;this.posOnPath=0;this.stopped=!1;this.pathBlockedWaitElapsed=0;this.isPositionAllowed=()=>!0;this.shortestPathAlgorithm="BIDIRECTIONAL_SEARCH";this.maxPathLength=1/0;this.considerCosts=!1;this.isBlocking=(e,t)=>e?new Oo(this.tilemap,this.getPathfindingOptions()).isBlocking(this.character.getTilePos(),{position:e,layer:t}):!0;this.shortestPathAlgorithm=n?.algorithm??this.shortestPathAlgorithm,this.ignoreBlockedTarget=s,this.distance=u,this.noPathFoundStrategy=n?.noPathFoundStrategy||"STOP",this.pathBlockedStrategy=n?.pathBlockedStrategy||"WAIT",this.noPathFoundRetryable=new qa(n?.noPathFoundRetryBackoffMs||200,n?.noPathFoundMaxRetries||-1,()=>{this.stop("NO_PATH_FOUND_MAX_RETRIES_EXCEEDED")}),this.pathBlockedRetryable=new qa(n?.pathBlockedRetryBackoffMs||200,n?.pathBlockedMaxRetries||-1,()=>{this.stop("PATH_BLOCKED_MAX_RETRIES_EXCEEDED")}),n?.isPositionAllowedFn&&(this.isPositionAllowed=n.isPositionAllowedFn),n?.maxPathLength&&(this.maxPathLength=n.maxPathLength),this.alternativeTargets=n?.alternativeTargets,this.noPathFoundAlternativeTargetsFallbackStrategy=n?.noPathFoundAlternativeTargetsFallbackStrategy,n?.considerCosts&&this.shortestPathAlgorithm!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${this.shortestPathAlgorithm}'. It can only be used with A* algorithm.`),(this.character.getTileWidth()>1||this.character.getTileHeight()>1&&this.shortestPathAlgorithm==="JPS")&&console.warn("GridEngine: Pathfinding algorithm 'JPS' can only be used for characters with 'tileWidth' and 'tileHeight' of 1"),this.considerCosts=n?.considerCosts||!1,this.ignoreLayers=!!n?.ignoreLayers,this.distanceUtils=lt.create(e.getNumberOfDirections()),this.pathBlockedWaitTimeoutMs=n?.pathBlockedWaitTimeoutMs||-1,this.finished$=new zo.Subject,this.setCharacter(e)}setPathBlockedStrategy(e){this.pathBlockedStrategy=e}getPathBlockedStrategy(){return this.pathBlockedStrategy}setCharacter(e){this.character=e,this.noPathFoundRetryable.reset(),this.pathBlockedRetryable.reset(),this.pathBlockedWaitElapsed=0,this.calcShortestPath(),this.character.autoMovementSet().pipe((0,zo.filter)(t=>t!==this),(0,zo.take)(1)).subscribe(()=>{this.stop("MOVEMENT_TERMINATED")})}getPathfindingOptions(){return{shortestPathAlgorithm:this.shortestPathAlgorithm,pathWidth:this.character.getTileWidth(),pathHeight:this.character.getTileHeight(),numberOfDirections:this.character.getNumberOfDirections(),isPositionAllowed:this.isPositionAllowed,collisionGroups:this.character.getCollisionGroups(),ignoredChars:[this.character.getId()],ignoreTiles:!this.character.collidesWithTiles(),ignoreMapBounds:this.character.getIgnoreMissingTiles(),ignoreBlockedTarget:this.ignoreBlockedTarget,maxPathLength:this.maxPathLength,ignoreLayers:this.ignoreLayers,considerCosts:this.considerCosts,calculateClosestToTarget:!0}}update(e){this.stopped||(this.noPathFound()&&(this.noPathFoundStrategy==="RETRY"?this.noPathFoundRetryable.retry(e,()=>this.calcShortestPath()):this.noPathFoundStrategy==="STOP"&&this.stop("NO_PATH_FOUND")),this.updatePosOnPath(),this.isBlocking(this.nextTileOnPath()?.position,this.character?.getNextTilePos().layer)?this.applyPathBlockedStrategy(e):this.pathBlockedWaitElapsed=0,this.hasArrived()?(this.stop("SUCCESS"),this.existsDistToTarget()&&this.turnTowardsTarget()):this.isBlocking(this.nextTileOnPath()?.position,this.character?.getNextTilePos().layer)||this.moveCharOnPath())}finishedObs(){return this.finished$}getInfo(){return{type:"Target",state:{pathAhead:this.shortestPath.slice(this.posOnPath).map(e=>G.fromInternal(e))},config:{algorithm:this.shortestPathAlgorithm,ignoreBlockedTarget:this.ignoreBlockedTarget,distance:this.distance,targetPos:G.fromInternal(this.targetPos),noPathFoundStrategy:this.noPathFoundStrategy,pathBlockedStrategy:this.pathBlockedStrategy,noPathFoundRetryBackoffMs:this.noPathFoundRetryable.getBackoffMs(),noPathFoundMaxRetries:this.noPathFoundRetryable.getMaxRetries()}}}resultToReason(e){switch(e){case"SUCCESS":return"Successfully arrived.";case"MOVEMENT_TERMINATED":return"Movement of character has been replaced before destination was reached.";case"PATH_BLOCKED":return"PathBlockedStrategy STOP: Path blocked.";case"NO_PATH_FOUND_MAX_RETRIES_EXCEEDED":return`NoPathFoundStrategy RETRY: Maximum retries of ${this.noPathFoundRetryable.getMaxRetries()} exceeded.`;case"NO_PATH_FOUND":return"NoPathFoundStrategy STOP: No path found.";case"PATH_BLOCKED_MAX_RETRIES_EXCEEDED":return`PathBlockedStrategy RETRY: Maximum retries of ${this.pathBlockedRetryable.getMaxRetries()} exceeded.`;case"PATH_BLOCKED_WAIT_TIMEOUT":return`PathBlockedStrategy WAIT: Wait timeout of ${this.pathBlockedWaitTimeoutMs}ms exceeded.`}}applyPathBlockedStrategy(e){this.pathBlockedStrategy==="RETRY"?this.pathBlockedRetryable.retry(e,()=>{let t=this.getShortestPath();t.path.length>0&&this.calcShortestPath(t)}):this.pathBlockedStrategy==="STOP"?this.stop("PATH_BLOCKED"):this.pathBlockedStrategy==="WAIT"&&this.pathBlockedWaitTimeoutMs>-1&&(this.pathBlockedWaitElapsed+=e,this.pathBlockedWaitElapsed>=this.pathBlockedWaitTimeoutMs&&this.stop("PATH_BLOCKED_WAIT_TIMEOUT"))}moveCharOnPath(){let e=this.nextTileOnPath();if(!e)return;let t=this.getDir(this.character.getNextTilePos().position,e.position);this.character.move(t)}nextTileOnPath(){return this.shortestPath[this.posOnPath+1]}stop(e){this.finished$.next({position:this.character.getTilePos().position,result:e,description:this.resultToReason(e),layer:this.character.getTilePos().layer}),this.finished$.complete(),this.stopped=!0}turnTowardsTarget(){let e=this.shortestPath[this.posOnPath+1],t=this.getDir(this.character.getNextTilePos().position,e.position);this.character.turnTowards(t)}existsDistToTarget(){return this.posOnPath<this.shortestPath.length-1}hasArrived(){return!this.noPathFound()&&this.posOnPath+Math.max(0,this.distance-this.distOffset)>=this.shortestPath.length-1}updatePosOnPath(){let e=this.shortestPath[this.posOnPath];for(;this.posOnPath<this.shortestPath.length-1&&(this.character.getNextTilePos().position.x!=e.position.x||this.character.getNextTilePos().position.y!=e.position.y);)this.posOnPath++,e=this.shortestPath[this.posOnPath]}noPathFound(){return this.shortestPath.length===0}calcShortestPath(e){e=e??this.getShortestPath(),this.posOnPath=0,this.shortestPath=e.path,this.distOffset=e.distOffset}getShortestPath(){let e=new Ro(this.tilemap),{path:t,closestToTarget:i}=e.findShortestPath(this.character.getNextTilePos(),this.targetPos,this.getPathfindingOptions());if(t.length==0){if(this.noPathFoundStrategy==="CLOSEST_REACHABLE"){if(!i)throw Error("ClosestToTarget should never be undefined in TargetMovement.");return this.pathToAlternativeTarget(i,e)}else if(this.noPathFoundStrategy==="ALTERNATIVE_TARGETS"){for(let s of this.alternativeTargets??[]){let{path:u,distOffset:l}=this.pathToAlternativeTarget(G.toInternal(s),e);if(u.length>0)return{path:u,distOffset:l}}return this.noPathFoundStrategy=this.noPathFoundAlternativeTargetsFallbackStrategy||"STOP",this.getShortestPath()}}return{path:t,distOffset:0}}pathToAlternativeTarget(e,t){let i=t.findShortestPath(this.character.getNextTilePos(),e,this.getPathfindingOptions()).path,n=this.distanceUtils.distance(e.position,this.targetPos.position);return{path:i,distOffset:n}}getDir(e,t){return this.tilemap.fromMapDirection(this.distanceUtils.direction(e,t))}};var T5=Object.create,Vw=Object.defineProperty,S5=Object.getOwnPropertyDescriptor,A5=Object.getOwnPropertyNames,C5=Object.getPrototypeOf,E5=Object.prototype.hasOwnProperty,q5=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),M5=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of A5(e))!E5.call(r,n)&&n!==t&&Vw(r,n,{get:()=>e[n],enumerable:!(i=S5(e,n))||i.enumerable});return r},_m=(r,e,t)=>(t=r!=null?T5(C5(r)):{},M5(e||!r||!r.__esModule?Vw(t,"default",{value:r,enumerable:!0}):t,r)),Pm=q5((r,e)=>{(function(){var t,i="4.17.21",n=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,v="__lodash_placeholder__",b=1,T=2,S=4,E=1,M=2,x=1,D=2,N=4,Y=8,ie=16,pe=32,ke=64,dt=128,Uo=256,Vf=512,Bw=30,Hw="...",$w=800,Yw=16,Tm=1,Qw=2,Kw=3,zi=1/0,Qr=9007199254740991,Xw=17976931348623157e292,Wa=0/0,ar=4294967295,Jw=ar-1,Zw=ar>>>1,eO=[["ary",dt],["bind",x],["bindKey",D],["curry",Y],["curryRight",ie],["flip",Vf],["partial",pe],["partialRight",ke],["rearg",Uo]],vn="[object Arguments]",Ua="[object Array]",tO="[object AsyncFunction]",Go="[object Boolean]",Bo="[object Date]",rO="[object DOMException]",Ga="[object Error]",Ba="[object Function]",Sm="[object GeneratorFunction]",Bt="[object Map]",Ho="[object Number]",iO="[object Null]",qr="[object Object]",Am="[object Promise]",nO="[object Proxy]",$o="[object RegExp]",Ht="[object Set]",Yo="[object String]",Ha="[object Symbol]",oO="[object Undefined]",Qo="[object WeakMap]",aO="[object WeakSet]",Ko="[object ArrayBuffer]",mn="[object DataView]",Wf="[object Float32Array]",Uf="[object Float64Array]",Gf="[object Int8Array]",Bf="[object Int16Array]",Hf="[object Int32Array]",$f="[object Uint8Array]",Yf="[object Uint8ClampedArray]",Qf="[object Uint16Array]",Kf="[object Uint32Array]",sO=/\b__p \+= '';/g,uO=/\b(__p \+=) '' \+/g,cO=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Cm=/&(?:amp|lt|gt|quot|#39);/g,Em=/[&<>"']/g,lO=RegExp(Cm.source),fO=RegExp(Em.source),hO=/<%-([\s\S]+?)%>/g,pO=/<%([\s\S]+?)%>/g,qm=/<%=([\s\S]+?)%>/g,dO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vO=/^\w*$/,mO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xf=/[\\^$.*+?()[\]{}|]/g,yO=RegExp(Xf.source),Jf=/^\s+/,gO=/\s/,bO=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_O=/\{\n\/\* \[wrapped with (.+)\] \*/,PO=/,? & /,wO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,OO=/[()=,{}\[\]\/\s]/,TO=/\\(\\)?/g,SO=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Mm=/\w*$/,AO=/^[-+]0x[0-9a-f]+$/i,CO=/^0b[01]+$/i,EO=/^\[object .+?Constructor\]$/,qO=/^0o[0-7]+$/i,MO=/^(?:0|[1-9]\d*)$/,LO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$a=/($^)/,xO=/['\n\r\u2028\u2029\\]/g,Ya="\\ud800-\\udfff",jO="\\u0300-\\u036f",IO="\\ufe20-\\ufe2f",kO="\\u20d0-\\u20ff",Lm=jO+IO+kO,xm="\\u2700-\\u27bf",jm="a-z\\xdf-\\xf6\\xf8-\\xff",FO="\\xac\\xb1\\xd7\\xf7",DO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",RO="\\u2000-\\u206f",zO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Im="A-Z\\xc0-\\xd6\\xd8-\\xde",km="\\ufe0e\\ufe0f",Fm=FO+DO+RO+zO,Zf="['\u2019]",NO="["+Ya+"]",Dm="["+Fm+"]",Qa="["+Lm+"]",Rm="\\d+",VO="["+xm+"]",zm="["+jm+"]",Nm="[^"+Ya+Fm+Rm+xm+jm+Im+"]",eh="\\ud83c[\\udffb-\\udfff]",WO="(?:"+Qa+"|"+eh+")",Vm="[^"+Ya+"]",th="(?:\\ud83c[\\udde6-\\uddff]){2}",rh="[\\ud800-\\udbff][\\udc00-\\udfff]",yn="["+Im+"]",Wm="\\u200d",Um="(?:"+zm+"|"+Nm+")",UO="(?:"+yn+"|"+Nm+")",Gm="(?:"+Zf+"(?:d|ll|m|re|s|t|ve))?",Bm="(?:"+Zf+"(?:D|LL|M|RE|S|T|VE))?",Hm=WO+"?",$m="["+km+"]?",GO="(?:"+Wm+"(?:"+[Vm,th,rh].join("|")+")"+$m+Hm+")*",BO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",HO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ym=$m+Hm+GO,$O="(?:"+[VO,th,rh].join("|")+")"+Ym,YO="(?:"+[Vm+Qa+"?",Qa,th,rh,NO].join("|")+")",QO=RegExp(Zf,"g"),KO=RegExp(Qa,"g"),ih=RegExp(eh+"(?="+eh+")|"+YO+Ym,"g"),XO=RegExp([yn+"?"+zm+"+"+Gm+"(?="+[Dm,yn,"$"].join("|")+")",UO+"+"+Bm+"(?="+[Dm,yn+Um,"$"].join("|")+")",yn+"?"+Um+"+"+Gm,yn+"+"+Bm,HO,BO,Rm,$O].join("|"),"g"),JO=RegExp("["+Wm+Ya+Lm+km+"]"),ZO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eT=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tT=-1,ye={};ye[Wf]=ye[Uf]=ye[Gf]=ye[Bf]=ye[Hf]=ye[$f]=ye[Yf]=ye[Qf]=ye[Kf]=!0,ye[vn]=ye[Ua]=ye[Ko]=ye[Go]=ye[mn]=ye[Bo]=ye[Ga]=ye[Ba]=ye[Bt]=ye[Ho]=ye[qr]=ye[$o]=ye[Ht]=ye[Yo]=ye[Qo]=!1;var ve={};ve[vn]=ve[Ua]=ve[Ko]=ve[mn]=ve[Go]=ve[Bo]=ve[Wf]=ve[Uf]=ve[Gf]=ve[Bf]=ve[Hf]=ve[Bt]=ve[Ho]=ve[qr]=ve[$o]=ve[Ht]=ve[Yo]=ve[Ha]=ve[$f]=ve[Yf]=ve[Qf]=ve[Kf]=!0,ve[Ga]=ve[Ba]=ve[Qo]=!1;var rT={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},iT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nT={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},oT={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aT=parseFloat,sT=parseInt,Qm=typeof global=="object"&&global&&global.Object===Object&&global,uT=typeof self=="object"&&self&&self.Object===Object&&self,Ve=Qm||uT||Function("return this")(),nh=typeof r=="object"&&r&&!r.nodeType&&r,Ni=nh&&typeof e=="object"&&e&&!e.nodeType&&e,Km=Ni&&Ni.exports===nh,oh=Km&&Qm.process,kt=function(){try{var A=Ni&&Ni.require&&Ni.require("util").types;return A||oh&&oh.binding&&oh.binding("util")}catch{}}(),Xm=kt&&kt.isArrayBuffer,Jm=kt&&kt.isDate,Zm=kt&&kt.isMap,ey=kt&&kt.isRegExp,ty=kt&&kt.isSet,ry=kt&&kt.isTypedArray;function St(A,L,q){switch(q.length){case 0:return A.call(L);case 1:return A.call(L,q[0]);case 2:return A.call(L,q[0],q[1]);case 3:return A.call(L,q[0],q[1],q[2])}return A.apply(L,q)}function cT(A,L,q,V){for(var Q=-1,se=A==null?0:A.length;++Q<se;){var Fe=A[Q];L(V,Fe,q(Fe),A)}return V}function Ft(A,L){for(var q=-1,V=A==null?0:A.length;++q<V&&L(A[q],q,A)!==!1;);return A}function lT(A,L){for(var q=A==null?0:A.length;q--&&L(A[q],q,A)!==!1;);return A}function iy(A,L){for(var q=-1,V=A==null?0:A.length;++q<V;)if(!L(A[q],q,A))return!1;return!0}function Kr(A,L){for(var q=-1,V=A==null?0:A.length,Q=0,se=[];++q<V;){var Fe=A[q];L(Fe,q,A)&&(se[Q++]=Fe)}return se}function Ka(A,L){var q=A==null?0:A.length;return!!q&&gn(A,L,0)>-1}function ah(A,L,q){for(var V=-1,Q=A==null?0:A.length;++V<Q;)if(q(L,A[V]))return!0;return!1}function ge(A,L){for(var q=-1,V=A==null?0:A.length,Q=Array(V);++q<V;)Q[q]=L(A[q],q,A);return Q}function Xr(A,L){for(var q=-1,V=L.length,Q=A.length;++q<V;)A[Q+q]=L[q];return A}function sh(A,L,q,V){var Q=-1,se=A==null?0:A.length;for(V&&se&&(q=A[++Q]);++Q<se;)q=L(q,A[Q],Q,A);return q}function fT(A,L,q,V){var Q=A==null?0:A.length;for(V&&Q&&(q=A[--Q]);Q--;)q=L(q,A[Q],Q,A);return q}function uh(A,L){for(var q=-1,V=A==null?0:A.length;++q<V;)if(L(A[q],q,A))return!0;return!1}var hT=ch("length");function pT(A){return A.split("")}function dT(A){return A.match(wO)||[]}function ny(A,L,q){var V;return q(A,function(Q,se,Fe){if(L(Q,se,Fe))return V=se,!1}),V}function Xa(A,L,q,V){for(var Q=A.length,se=q+(V?1:-1);V?se--:++se<Q;)if(L(A[se],se,A))return se;return-1}function gn(A,L,q){return L===L?AT(A,L,q):Xa(A,oy,q)}function vT(A,L,q,V){for(var Q=q-1,se=A.length;++Q<se;)if(V(A[Q],L))return Q;return-1}function oy(A){return A!==A}function ay(A,L){var q=A==null?0:A.length;return q?fh(A,L)/q:Wa}function ch(A){return function(L){return L==null?t:L[A]}}function lh(A){return function(L){return A==null?t:A[L]}}function sy(A,L,q,V,Q){return Q(A,function(se,Fe,de){q=V?(V=!1,se):L(q,se,Fe,de)}),q}function mT(A,L){var q=A.length;for(A.sort(L);q--;)A[q]=A[q].value;return A}function fh(A,L){for(var q,V=-1,Q=A.length;++V<Q;){var se=L(A[V]);se!==t&&(q=q===t?se:q+se)}return q}function hh(A,L){for(var q=-1,V=Array(A);++q<A;)V[q]=L(q);return V}function yT(A,L){return ge(L,function(q){return[q,A[q]]})}function uy(A){return A&&A.slice(0,hy(A)+1).replace(Jf,"")}function At(A){return function(L){return A(L)}}function ph(A,L){return ge(L,function(q){return A[q]})}function Xo(A,L){return A.has(L)}function cy(A,L){for(var q=-1,V=A.length;++q<V&&gn(L,A[q],0)>-1;);return q}function ly(A,L){for(var q=A.length;q--&&gn(L,A[q],0)>-1;);return q}function gT(A,L){for(var q=A.length,V=0;q--;)A[q]===L&&++V;return V}var bT=lh(rT),_T=lh(iT);function PT(A){return"\\"+oT[A]}function wT(A,L){return A==null?t:A[L]}function bn(A){return JO.test(A)}function OT(A){return ZO.test(A)}function TT(A){for(var L,q=[];!(L=A.next()).done;)q.push(L.value);return q}function dh(A){var L=-1,q=Array(A.size);return A.forEach(function(V,Q){q[++L]=[Q,V]}),q}function fy(A,L){return function(q){return A(L(q))}}function Jr(A,L){for(var q=-1,V=A.length,Q=0,se=[];++q<V;){var Fe=A[q];(Fe===L||Fe===v)&&(A[q]=v,se[Q++]=q)}return se}function Ja(A){var L=-1,q=Array(A.size);return A.forEach(function(V){q[++L]=V}),q}function ST(A){var L=-1,q=Array(A.size);return A.forEach(function(V){q[++L]=[V,V]}),q}function AT(A,L,q){for(var V=q-1,Q=A.length;++V<Q;)if(A[V]===L)return V;return-1}function CT(A,L,q){for(var V=q+1;V--;)if(A[V]===L)return V;return V}function _n(A){return bn(A)?qT(A):hT(A)}function $t(A){return bn(A)?MT(A):pT(A)}function hy(A){for(var L=A.length;L--&&gO.test(A.charAt(L)););return L}var ET=lh(nT);function qT(A){for(var L=ih.lastIndex=0;ih.test(A);)++L;return L}function MT(A){return A.match(ih)||[]}function LT(A){return A.match(XO)||[]}var xT=function A(L){L=L==null?Ve:Zr.defaults(Ve.Object(),L,Zr.pick(Ve,eT));var q=L.Array,V=L.Date,Q=L.Error,se=L.Function,Fe=L.Math,de=L.Object,vh=L.RegExp,jT=L.String,Dt=L.TypeError,Za=q.prototype,IT=se.prototype,Pn=de.prototype,es=L["__core-js_shared__"],ts=IT.toString,ce=Pn.hasOwnProperty,kT=0,py=function(){var o=/[^.]+$/.exec(es&&es.keys&&es.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),rs=Pn.toString,FT=ts.call(de),DT=Ve._,RT=vh("^"+ts.call(ce).replace(Xf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),is=Km?L.Buffer:t,ei=L.Symbol,ns=L.Uint8Array,dy=is?is.allocUnsafe:t,os=fy(de.getPrototypeOf,de),vy=de.create,my=Pn.propertyIsEnumerable,as=Za.splice,yy=ei?ei.isConcatSpreadable:t,Jo=ei?ei.iterator:t,Vi=ei?ei.toStringTag:t,ss=function(){try{var o=Hi(de,"defineProperty");return o({},"",{}),o}catch{}}(),zT=L.clearTimeout!==Ve.clearTimeout&&L.clearTimeout,NT=V&&V.now!==Ve.Date.now&&V.now,VT=L.setTimeout!==Ve.setTimeout&&L.setTimeout,us=Fe.ceil,cs=Fe.floor,mh=de.getOwnPropertySymbols,WT=is?is.isBuffer:t,gy=L.isFinite,UT=Za.join,GT=fy(de.keys,de),De=Fe.max,tt=Fe.min,BT=V.now,HT=L.parseInt,by=Fe.random,$T=Za.reverse,yh=Hi(L,"DataView"),Zo=Hi(L,"Map"),gh=Hi(L,"Promise"),wn=Hi(L,"Set"),ea=Hi(L,"WeakMap"),ta=Hi(de,"create"),ls=ea&&new ea,On={},YT=$i(yh),QT=$i(Zo),KT=$i(gh),XT=$i(wn),JT=$i(ea),fs=ei?ei.prototype:t,ra=fs?fs.valueOf:t,_y=fs?fs.toString:t;function y(o){if(Se(o)&&!K(o)&&!(o instanceof re)){if(o instanceof Rt)return o;if(ce.call(o,"__wrapped__"))return Pg(o)}return new Rt(o)}var Tn=function(){function o(){}return function(a){if(!we(a))return{};if(vy)return vy(a);o.prototype=a;var c=new o;return o.prototype=t,c}}();function hs(){}function Rt(o,a){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=t}y.templateSettings={escape:hO,evaluate:pO,interpolate:qm,variable:"",imports:{_:y}},y.prototype=hs.prototype,y.prototype.constructor=y,Rt.prototype=Tn(hs.prototype),Rt.prototype.constructor=Rt;function re(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ar,this.__views__=[]}function ZT(){var o=new re(this.__wrapped__);return o.__actions__=vt(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=vt(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=vt(this.__views__),o}function eS(){if(this.__filtered__){var o=new re(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function tS(){var o=this.__wrapped__.value(),a=this.__dir__,c=K(o),f=a<0,d=c?o.length:0,g=pA(0,d,this.__views__),P=g.start,O=g.end,C=O-P,j=f?O:P-1,I=this.__iteratees__,k=I.length,R=0,W=tt(C,this.__takeCount__);if(!c||!f&&d==C&&W==C)return Gy(o,this.__actions__);var H=[];e:for(;C--&&R<W;){j+=a;for(var Z=-1,$=o[j];++Z<k;){var te=I[Z],ne=te.iteratee,qt=te.type,ct=ne($);if(qt==Qw)$=ct;else if(!ct){if(qt==Tm)continue e;break e}}H[R++]=$}return H}re.prototype=Tn(hs.prototype),re.prototype.constructor=re;function Wi(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var f=o[a];this.set(f[0],f[1])}}function rS(){this.__data__=ta?ta(null):{},this.size=0}function iS(o){var a=this.has(o)&&delete this.__data__[o];return this.size-=a?1:0,a}function nS(o){var a=this.__data__;if(ta){var c=a[o];return c===h?t:c}return ce.call(a,o)?a[o]:t}function oS(o){var a=this.__data__;return ta?a[o]!==t:ce.call(a,o)}function aS(o,a){var c=this.__data__;return this.size+=this.has(o)?0:1,c[o]=ta&&a===t?h:a,this}Wi.prototype.clear=rS,Wi.prototype.delete=iS,Wi.prototype.get=nS,Wi.prototype.has=oS,Wi.prototype.set=aS;function Mr(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var f=o[a];this.set(f[0],f[1])}}function sS(){this.__data__=[],this.size=0}function uS(o){var a=this.__data__,c=ps(a,o);if(c<0)return!1;var f=a.length-1;return c==f?a.pop():as.call(a,c,1),--this.size,!0}function cS(o){var a=this.__data__,c=ps(a,o);return c<0?t:a[c][1]}function lS(o){return ps(this.__data__,o)>-1}function fS(o,a){var c=this.__data__,f=ps(c,o);return f<0?(++this.size,c.push([o,a])):c[f][1]=a,this}Mr.prototype.clear=sS,Mr.prototype.delete=uS,Mr.prototype.get=cS,Mr.prototype.has=lS,Mr.prototype.set=fS;function Lr(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var f=o[a];this.set(f[0],f[1])}}function hS(){this.size=0,this.__data__={hash:new Wi,map:new(Zo||Mr),string:new Wi}}function pS(o){var a=Ss(this,o).delete(o);return this.size-=a?1:0,a}function dS(o){return Ss(this,o).get(o)}function vS(o){return Ss(this,o).has(o)}function mS(o,a){var c=Ss(this,o),f=c.size;return c.set(o,a),this.size+=c.size==f?0:1,this}Lr.prototype.clear=hS,Lr.prototype.delete=pS,Lr.prototype.get=dS,Lr.prototype.has=vS,Lr.prototype.set=mS;function Ui(o){var a=-1,c=o==null?0:o.length;for(this.__data__=new Lr;++a<c;)this.add(o[a])}function yS(o){return this.__data__.set(o,h),this}function gS(o){return this.__data__.has(o)}Ui.prototype.add=Ui.prototype.push=yS,Ui.prototype.has=gS;function Yt(o){var a=this.__data__=new Mr(o);this.size=a.size}function bS(){this.__data__=new Mr,this.size=0}function _S(o){var a=this.__data__,c=a.delete(o);return this.size=a.size,c}function PS(o){return this.__data__.get(o)}function wS(o){return this.__data__.has(o)}function OS(o,a){var c=this.__data__;if(c instanceof Mr){var f=c.__data__;if(!Zo||f.length<n-1)return f.push([o,a]),this.size=++c.size,this;c=this.__data__=new Lr(f)}return c.set(o,a),this.size=c.size,this}Yt.prototype.clear=bS,Yt.prototype.delete=_S,Yt.prototype.get=PS,Yt.prototype.has=wS,Yt.prototype.set=OS;function Py(o,a){var c=K(o),f=!c&&Yi(o),d=!c&&!f&&oi(o),g=!c&&!f&&!d&&En(o),P=c||f||d||g,O=P?hh(o.length,jT):[],C=O.length;for(var j in o)(a||ce.call(o,j))&&!(P&&(j=="length"||d&&(j=="offset"||j=="parent")||g&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||kr(j,C)))&&O.push(j);return O}function wy(o){var a=o.length;return a?o[qh(0,a-1)]:t}function TS(o,a){return As(vt(o),Gi(a,0,o.length))}function SS(o){return As(vt(o))}function bh(o,a,c){(c!==t&&!Qt(o[a],c)||c===t&&!(a in o))&&xr(o,a,c)}function ia(o,a,c){var f=o[a];(!(ce.call(o,a)&&Qt(f,c))||c===t&&!(a in o))&&xr(o,a,c)}function ps(o,a){for(var c=o.length;c--;)if(Qt(o[c][0],a))return c;return-1}function AS(o,a,c,f){return ti(o,function(d,g,P){a(f,d,c(d),P)}),f}function Oy(o,a){return o&&ur(a,We(a),o)}function CS(o,a){return o&&ur(a,yt(a),o)}function xr(o,a,c){a=="__proto__"&&ss?ss(o,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):o[a]=c}function _h(o,a){for(var c=-1,f=a.length,d=q(f),g=o==null;++c<f;)d[c]=g?t:ep(o,a[c]);return d}function Gi(o,a,c){return o===o&&(c!==t&&(o=o<=c?o:c),a!==t&&(o=o>=a?o:a)),o}function zt(o,a,c,f,d,g){var P,O=a&b,C=a&T,j=a&S;if(c&&(P=d?c(o,f,d,g):c(o)),P!==t)return P;if(!we(o))return o;var I=K(o);if(I){if(P=vA(o),!O)return vt(o,P)}else{var k=rt(o),R=k==Ba||k==Sm;if(oi(o))return $y(o,O);if(k==qr||k==vn||R&&!d){if(P=C||R?{}:hg(o),!O)return C?nA(o,CS(P,o)):iA(o,Oy(P,o))}else{if(!ve[k])return d?o:{};P=mA(o,k,O)}}g||(g=new Yt);var W=g.get(o);if(W)return W;g.set(o,P),Vg(o)?o.forEach(function($){P.add(zt($,a,c,$,o,g))}):zg(o)&&o.forEach(function($,te){P.set(te,zt($,a,c,te,o,g))});var H=j?C?Nh:zh:C?yt:We,Z=I?t:H(o);return Ft(Z||o,function($,te){Z&&(te=$,$=o[te]),ia(P,te,zt($,a,c,te,o,g))}),P}function ES(o){var a=We(o);return function(c){return Ty(c,o,a)}}function Ty(o,a,c){var f=c.length;if(o==null)return!f;for(o=de(o);f--;){var d=c[f],g=a[d],P=o[d];if(P===t&&!(d in o)||!g(P))return!1}return!0}function Sy(o,a,c){if(typeof o!="function")throw new Dt(u);return la(function(){o.apply(t,c)},a)}function na(o,a,c,f){var d=-1,g=Ka,P=!0,O=o.length,C=[],j=a.length;if(!O)return C;c&&(a=ge(a,At(c))),f?(g=ah,P=!1):a.length>=n&&(g=Xo,P=!1,a=new Ui(a));e:for(;++d<O;){var I=o[d],k=c==null?I:c(I);if(I=f||I!==0?I:0,P&&k===k){for(var R=j;R--;)if(a[R]===k)continue e;C.push(I)}else g(a,k,f)||C.push(I)}return C}var ti=Jy(sr),Ay=Jy(wh,!0);function qS(o,a){var c=!0;return ti(o,function(f,d,g){return c=!!a(f,d,g),c}),c}function ds(o,a,c){for(var f=-1,d=o.length;++f<d;){var g=o[f],P=a(g);if(P!=null&&(O===t?P===P&&!Et(P):c(P,O)))var O=P,C=g}return C}function MS(o,a,c,f){var d=o.length;for(c=J(c),c<0&&(c=-c>d?0:d+c),f=f===t||f>d?d:J(f),f<0&&(f+=d),f=c>f?0:Ug(f);c<f;)o[c++]=a;return o}function Cy(o,a){var c=[];return ti(o,function(f,d,g){a(f,d,g)&&c.push(f)}),c}function Qe(o,a,c,f,d){var g=-1,P=o.length;for(c||(c=gA),d||(d=[]);++g<P;){var O=o[g];a>0&&c(O)?a>1?Qe(O,a-1,c,f,d):Xr(d,O):f||(d[d.length]=O)}return d}var Ph=Zy(),Ey=Zy(!0);function sr(o,a){return o&&Ph(o,a,We)}function wh(o,a){return o&&Ey(o,a,We)}function vs(o,a){return Kr(a,function(c){return Fr(o[c])})}function Bi(o,a){a=ii(a,o);for(var c=0,f=a.length;o!=null&&c<f;)o=o[cr(a[c++])];return c&&c==f?o:t}function qy(o,a,c){var f=a(o);return K(o)?f:Xr(f,c(o))}function st(o){return o==null?o===t?oO:iO:Vi&&Vi in de(o)?hA(o):SA(o)}function Oh(o,a){return o>a}function LS(o,a){return o!=null&&ce.call(o,a)}function xS(o,a){return o!=null&&a in de(o)}function jS(o,a,c){return o>=tt(a,c)&&o<De(a,c)}function Th(o,a,c){for(var f=c?ah:Ka,d=o[0].length,g=o.length,P=g,O=q(g),C=1/0,j=[];P--;){var I=o[P];P&&a&&(I=ge(I,At(a))),C=tt(I.length,C),O[P]=!c&&(a||d>=120&&I.length>=120)?new Ui(P&&I):t}I=o[0];var k=-1,R=O[0];e:for(;++k<d&&j.length<C;){var W=I[k],H=a?a(W):W;if(W=c||W!==0?W:0,!(R?Xo(R,H):f(j,H,c))){for(P=g;--P;){var Z=O[P];if(!(Z?Xo(Z,H):f(o[P],H,c)))continue e}R&&R.push(H),j.push(W)}}return j}function IS(o,a,c,f){return sr(o,function(d,g,P){a(f,c(d),g,P)}),f}function oa(o,a,c){a=ii(a,o),o=mg(o,a);var f=o==null?o:o[cr(Vt(a))];return f==null?t:St(f,o,c)}function My(o){return Se(o)&&st(o)==vn}function kS(o){return Se(o)&&st(o)==Ko}function FS(o){return Se(o)&&st(o)==Bo}function aa(o,a,c,f,d){return o===a?!0:o==null||a==null||!Se(o)&&!Se(a)?o!==o&&a!==a:DS(o,a,c,f,aa,d)}function DS(o,a,c,f,d,g){var P=K(o),O=K(a),C=P?Ua:rt(o),j=O?Ua:rt(a);C=C==vn?qr:C,j=j==vn?qr:j;var I=C==qr,k=j==qr,R=C==j;if(R&&oi(o)){if(!oi(a))return!1;P=!0,I=!1}if(R&&!I)return g||(g=new Yt),P||En(o)?cg(o,a,c,f,d,g):lA(o,a,C,c,f,d,g);if(!(c&E)){var W=I&&ce.call(o,"__wrapped__"),H=k&&ce.call(a,"__wrapped__");if(W||H){var Z=W?o.value():o,$=H?a.value():a;return g||(g=new Yt),d(Z,$,c,f,g)}}return R?(g||(g=new Yt),fA(o,a,c,f,d,g)):!1}function RS(o){return Se(o)&&rt(o)==Bt}function Sh(o,a,c,f){var d=c.length,g=d,P=!f;if(o==null)return!g;for(o=de(o);d--;){var O=c[d];if(P&&O[2]?O[1]!==o[O[0]]:!(O[0]in o))return!1}for(;++d<g;){O=c[d];var C=O[0],j=o[C],I=O[1];if(P&&O[2]){if(j===t&&!(C in o))return!1}else{var k=new Yt;if(f)var R=f(j,I,C,o,a,k);if(!(R===t?aa(I,j,E|M,f,k):R))return!1}}return!0}function Ly(o){if(!we(o)||_A(o))return!1;var a=Fr(o)?RT:EO;return a.test($i(o))}function zS(o){return Se(o)&&st(o)==$o}function NS(o){return Se(o)&&rt(o)==Ht}function VS(o){return Se(o)&&xs(o.length)&&!!ye[st(o)]}function xy(o){return typeof o=="function"?o:o==null?gt:typeof o=="object"?K(o)?ky(o[0],o[1]):Iy(o):eb(o)}function Ah(o){if(!ca(o))return GT(o);var a=[];for(var c in de(o))ce.call(o,c)&&c!="constructor"&&a.push(c);return a}function WS(o){if(!we(o))return TA(o);var a=ca(o),c=[];for(var f in o)f=="constructor"&&(a||!ce.call(o,f))||c.push(f);return c}function Ch(o,a){return o<a}function jy(o,a){var c=-1,f=mt(o)?q(o.length):[];return ti(o,function(d,g,P){f[++c]=a(d,g,P)}),f}function Iy(o){var a=Wh(o);return a.length==1&&a[0][2]?dg(a[0][0],a[0][1]):function(c){return c===o||Sh(c,o,a)}}function ky(o,a){return Gh(o)&&pg(a)?dg(cr(o),a):function(c){var f=ep(c,o);return f===t&&f===a?tp(c,o):aa(a,f,E|M)}}function ms(o,a,c,f,d){o!==a&&Ph(a,function(g,P){if(d||(d=new Yt),we(g))US(o,a,P,c,ms,f,d);else{var O=f?f(Hh(o,P),g,P+"",o,a,d):t;O===t&&(O=g),bh(o,P,O)}},yt)}function US(o,a,c,f,d,g,P){var O=Hh(o,c),C=Hh(a,c),j=P.get(C);if(j){bh(o,c,j);return}var I=g?g(O,C,c+"",o,a,P):t,k=I===t;if(k){var R=K(C),W=!R&&oi(C),H=!R&&!W&&En(C);I=C,R||W||H?K(O)?I=O:Ce(O)?I=vt(O):W?(k=!1,I=$y(C,!0)):H?(k=!1,I=Yy(C,!0)):I=[]:fa(C)||Yi(C)?(I=O,Yi(O)?I=Gg(O):(!we(O)||Fr(O))&&(I=hg(C))):k=!1}k&&(P.set(C,I),d(I,C,f,g,P),P.delete(C)),bh(o,c,I)}function Fy(o,a){var c=o.length;if(c)return a+=a<0?c:0,kr(a,c)?o[a]:t}function Dy(o,a,c){a.length?a=ge(a,function(g){return K(g)?function(P){return Bi(P,g.length===1?g[0]:g)}:g}):a=[gt];var f=-1;a=ge(a,At(B()));var d=jy(o,function(g,P,O){var C=ge(a,function(j){return j(g)});return{criteria:C,index:++f,value:g}});return mT(d,function(g,P){return rA(g,P,c)})}function GS(o,a){return Ry(o,a,function(c,f){return tp(o,f)})}function Ry(o,a,c){for(var f=-1,d=a.length,g={};++f<d;){var P=a[f],O=Bi(o,P);c(O,P)&&sa(g,ii(P,o),O)}return g}function BS(o){return function(a){return Bi(a,o)}}function Eh(o,a,c,f){var d=f?vT:gn,g=-1,P=a.length,O=o;for(o===a&&(a=vt(a)),c&&(O=ge(o,At(c)));++g<P;)for(var C=0,j=a[g],I=c?c(j):j;(C=d(O,I,C,f))>-1;)O!==o&&as.call(O,C,1),as.call(o,C,1);return o}function zy(o,a){for(var c=o?a.length:0,f=c-1;c--;){var d=a[c];if(c==f||d!==g){var g=d;kr(d)?as.call(o,d,1):xh(o,d)}}return o}function qh(o,a){return o+cs(by()*(a-o+1))}function HS(o,a,c,f){for(var d=-1,g=De(us((a-o)/(c||1)),0),P=q(g);g--;)P[f?g:++d]=o,o+=c;return P}function Mh(o,a){var c="";if(!o||a<1||a>Qr)return c;do a%2&&(c+=o),a=cs(a/2),a&&(o+=o);while(a);return c}function ee(o,a){return $h(vg(o,a,gt),o+"")}function $S(o){return wy(qn(o))}function YS(o,a){var c=qn(o);return As(c,Gi(a,0,c.length))}function sa(o,a,c,f){if(!we(o))return o;a=ii(a,o);for(var d=-1,g=a.length,P=g-1,O=o;O!=null&&++d<g;){var C=cr(a[d]),j=c;if(C==="__proto__"||C==="constructor"||C==="prototype")return o;if(d!=P){var I=O[C];j=f?f(I,C,O):t,j===t&&(j=we(I)?I:kr(a[d+1])?[]:{})}ia(O,C,j),O=O[C]}return o}var Ny=ls?function(o,a){return ls.set(o,a),o}:gt,QS=ss?function(o,a){return ss(o,"toString",{configurable:!0,enumerable:!1,value:ip(a),writable:!0})}:gt;function KS(o){return As(qn(o))}function Nt(o,a,c){var f=-1,d=o.length;a<0&&(a=-a>d?0:d+a),c=c>d?d:c,c<0&&(c+=d),d=a>c?0:c-a>>>0,a>>>=0;for(var g=q(d);++f<d;)g[f]=o[f+a];return g}function XS(o,a){var c;return ti(o,function(f,d,g){return c=a(f,d,g),!c}),!!c}function ys(o,a,c){var f=0,d=o==null?f:o.length;if(typeof a=="number"&&a===a&&d<=Zw){for(;f<d;){var g=f+d>>>1,P=o[g];P!==null&&!Et(P)&&(c?P<=a:P<a)?f=g+1:d=g}return d}return Lh(o,a,gt,c)}function Lh(o,a,c,f){var d=0,g=o==null?0:o.length;if(g===0)return 0;a=c(a);for(var P=a!==a,O=a===null,C=Et(a),j=a===t;d<g;){var I=cs((d+g)/2),k=c(o[I]),R=k!==t,W=k===null,H=k===k,Z=Et(k);if(P)var $=f||H;else j?$=H&&(f||R):O?$=H&&R&&(f||!W):C?$=H&&R&&!W&&(f||!Z):W||Z?$=!1:$=f?k<=a:k<a;$?d=I+1:g=I}return tt(g,Jw)}function Vy(o,a){for(var c=-1,f=o.length,d=0,g=[];++c<f;){var P=o[c],O=a?a(P):P;if(!c||!Qt(O,C)){var C=O;g[d++]=P===0?0:P}}return g}function Wy(o){return typeof o=="number"?o:Et(o)?Wa:+o}function Ct(o){if(typeof o=="string")return o;if(K(o))return ge(o,Ct)+"";if(Et(o))return _y?_y.call(o):"";var a=o+"";return a=="0"&&1/o==-zi?"-0":a}function ri(o,a,c){var f=-1,d=Ka,g=o.length,P=!0,O=[],C=O;if(c)P=!1,d=ah;else if(g>=n){var j=a?null:uA(o);if(j)return Ja(j);P=!1,d=Xo,C=new Ui}else C=a?[]:O;e:for(;++f<g;){var I=o[f],k=a?a(I):I;if(I=c||I!==0?I:0,P&&k===k){for(var R=C.length;R--;)if(C[R]===k)continue e;a&&C.push(k),O.push(I)}else d(C,k,c)||(C!==O&&C.push(k),O.push(I))}return O}function xh(o,a){return a=ii(a,o),o=mg(o,a),o==null||delete o[cr(Vt(a))]}function Uy(o,a,c,f){return sa(o,a,c(Bi(o,a)),f)}function gs(o,a,c,f){for(var d=o.length,g=f?d:-1;(f?g--:++g<d)&&a(o[g],g,o););return c?Nt(o,f?0:g,f?g+1:d):Nt(o,f?g+1:0,f?d:g)}function Gy(o,a){var c=o;return c instanceof re&&(c=c.value()),sh(a,function(f,d){return d.func.apply(d.thisArg,Xr([f],d.args))},c)}function jh(o,a,c){var f=o.length;if(f<2)return f?ri(o[0]):[];for(var d=-1,g=q(f);++d<f;)for(var P=o[d],O=-1;++O<f;)O!=d&&(g[d]=na(g[d]||P,o[O],a,c));return ri(Qe(g,1),a,c)}function By(o,a,c){for(var f=-1,d=o.length,g=a.length,P={};++f<d;){var O=f<g?a[f]:t;c(P,o[f],O)}return P}function Ih(o){return Ce(o)?o:[]}function kh(o){return typeof o=="function"?o:gt}function ii(o,a){return K(o)?o:Gh(o,a)?[o]:_g(ue(o))}var JS=ee;function ni(o,a,c){var f=o.length;return c=c===t?f:c,!a&&c>=f?o:Nt(o,a,c)}var Hy=zT||function(o){return Ve.clearTimeout(o)};function $y(o,a){if(a)return o.slice();var c=o.length,f=dy?dy(c):new o.constructor(c);return o.copy(f),f}function Fh(o){var a=new o.constructor(o.byteLength);return new ns(a).set(new ns(o)),a}function ZS(o,a){var c=a?Fh(o.buffer):o.buffer;return new o.constructor(c,o.byteOffset,o.byteLength)}function eA(o){var a=new o.constructor(o.source,Mm.exec(o));return a.lastIndex=o.lastIndex,a}function tA(o){return ra?de(ra.call(o)):{}}function Yy(o,a){var c=a?Fh(o.buffer):o.buffer;return new o.constructor(c,o.byteOffset,o.length)}function Qy(o,a){if(o!==a){var c=o!==t,f=o===null,d=o===o,g=Et(o),P=a!==t,O=a===null,C=a===a,j=Et(a);if(!O&&!j&&!g&&o>a||g&&P&&C&&!O&&!j||f&&P&&C||!c&&C||!d)return 1;if(!f&&!g&&!j&&o<a||j&&c&&d&&!f&&!g||O&&c&&d||!P&&d||!C)return-1}return 0}function rA(o,a,c){for(var f=-1,d=o.criteria,g=a.criteria,P=d.length,O=c.length;++f<P;){var C=Qy(d[f],g[f]);if(C){if(f>=O)return C;var j=c[f];return C*(j=="desc"?-1:1)}}return o.index-a.index}function Ky(o,a,c,f){for(var d=-1,g=o.length,P=c.length,O=-1,C=a.length,j=De(g-P,0),I=q(C+j),k=!f;++O<C;)I[O]=a[O];for(;++d<P;)(k||d<g)&&(I[c[d]]=o[d]);for(;j--;)I[O++]=o[d++];return I}function Xy(o,a,c,f){for(var d=-1,g=o.length,P=-1,O=c.length,C=-1,j=a.length,I=De(g-O,0),k=q(I+j),R=!f;++d<I;)k[d]=o[d];for(var W=d;++C<j;)k[W+C]=a[C];for(;++P<O;)(R||d<g)&&(k[W+c[P]]=o[d++]);return k}function vt(o,a){var c=-1,f=o.length;for(a||(a=q(f));++c<f;)a[c]=o[c];return a}function ur(o,a,c,f){var d=!c;c||(c={});for(var g=-1,P=a.length;++g<P;){var O=a[g],C=f?f(c[O],o[O],O,c,o):t;C===t&&(C=o[O]),d?xr(c,O,C):ia(c,O,C)}return c}function iA(o,a){return ur(o,Uh(o),a)}function nA(o,a){return ur(o,lg(o),a)}function bs(o,a){return function(c,f){var d=K(c)?cT:AS,g=a?a():{};return d(c,o,B(f,2),g)}}function Sn(o){return ee(function(a,c){var f=-1,d=c.length,g=d>1?c[d-1]:t,P=d>2?c[2]:t;for(g=o.length>3&&typeof g=="function"?(d--,g):t,P&&ut(c[0],c[1],P)&&(g=d<3?t:g,d=1),a=de(a);++f<d;){var O=c[f];O&&o(a,O,f,g)}return a})}function Jy(o,a){return function(c,f){if(c==null)return c;if(!mt(c))return o(c,f);for(var d=c.length,g=a?d:-1,P=de(c);(a?g--:++g<d)&&f(P[g],g,P)!==!1;);return c}}function Zy(o){return function(a,c,f){for(var d=-1,g=de(a),P=f(a),O=P.length;O--;){var C=P[o?O:++d];if(c(g[C],C,g)===!1)break}return a}}function oA(o,a,c){var f=a&x,d=ua(o);function g(){var P=this&&this!==Ve&&this instanceof g?d:o;return P.apply(f?c:this,arguments)}return g}function eg(o){return function(a){a=ue(a);var c=bn(a)?$t(a):t,f=c?c[0]:a.charAt(0),d=c?ni(c,1).join(""):a.slice(1);return f[o]()+d}}function An(o){return function(a){return sh(Jg(Xg(a).replace(QO,"")),o,"")}}function ua(o){return function(){var a=arguments;switch(a.length){case 0:return new o;case 1:return new o(a[0]);case 2:return new o(a[0],a[1]);case 3:return new o(a[0],a[1],a[2]);case 4:return new o(a[0],a[1],a[2],a[3]);case 5:return new o(a[0],a[1],a[2],a[3],a[4]);case 6:return new o(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new o(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var c=Tn(o.prototype),f=o.apply(c,a);return we(f)?f:c}}function aA(o,a,c){var f=ua(o);function d(){for(var g=arguments.length,P=q(g),O=g,C=Cn(d);O--;)P[O]=arguments[O];var j=g<3&&P[0]!==C&&P[g-1]!==C?[]:Jr(P,C);if(g-=j.length,g<c)return og(o,a,_s,d.placeholder,t,P,j,t,t,c-g);var I=this&&this!==Ve&&this instanceof d?f:o;return St(I,this,P)}return d}function tg(o){return function(a,c,f){var d=de(a);if(!mt(a)){var g=B(c,3);a=We(a),c=function(O){return g(d[O],O,d)}}var P=o(a,c,f);return P>-1?d[g?a[P]:P]:t}}function rg(o){return Ir(function(a){var c=a.length,f=c,d=Rt.prototype.thru;for(o&&a.reverse();f--;){var g=a[f];if(typeof g!="function")throw new Dt(u);if(d&&!P&&Ts(g)=="wrapper")var P=new Rt([],!0)}for(f=P?f:c;++f<c;){g=a[f];var O=Ts(g),C=O=="wrapper"?Vh(g):t;C&&Bh(C[0])&&C[1]==(dt|Y|pe|Uo)&&!C[4].length&&C[9]==1?P=P[Ts(C[0])].apply(P,C[3]):P=g.length==1&&Bh(g)?P[O]():P.thru(g)}return function(){var j=arguments,I=j[0];if(P&&j.length==1&&K(I))return P.plant(I).value();for(var k=0,R=c?a[k].apply(this,j):I;++k<c;)R=a[k].call(this,R);return R}})}function _s(o,a,c,f,d,g,P,O,C,j){var I=a&dt,k=a&x,R=a&D,W=a&(Y|ie),H=a&Vf,Z=R?t:ua(o);function $(){for(var te=arguments.length,ne=q(te),qt=te;qt--;)ne[qt]=arguments[qt];if(W)var ct=Cn($),Mt=gT(ne,ct);if(f&&(ne=Ky(ne,f,d,W)),g&&(ne=Xy(ne,g,P,W)),te-=Mt,W&&te<j){var Ee=Jr(ne,ct);return og(o,a,_s,$.placeholder,c,ne,Ee,O,C,j-te)}var Kt=k?c:this,Rr=R?Kt[o]:o;return te=ne.length,O?ne=AA(ne,O):H&&te>1&&ne.reverse(),I&&C<te&&(ne.length=C),this&&this!==Ve&&this instanceof $&&(Rr=Z||ua(Rr)),Rr.apply(Kt,ne)}return $}function ig(o,a){return function(c,f){return IS(c,o,a(f),{})}}function Ps(o,a){return function(c,f){var d;if(c===t&&f===t)return a;if(c!==t&&(d=c),f!==t){if(d===t)return f;typeof c=="string"||typeof f=="string"?(c=Ct(c),f=Ct(f)):(c=Wy(c),f=Wy(f)),d=o(c,f)}return d}}function Dh(o){return Ir(function(a){return a=ge(a,At(B())),ee(function(c){var f=this;return o(a,function(d){return St(d,f,c)})})})}function ws(o,a){a=a===t?" ":Ct(a);var c=a.length;if(c<2)return c?Mh(a,o):a;var f=Mh(a,us(o/_n(a)));return bn(a)?ni($t(f),0,o).join(""):f.slice(0,o)}function sA(o,a,c,f){var d=a&x,g=ua(o);function P(){for(var O=-1,C=arguments.length,j=-1,I=f.length,k=q(I+C),R=this&&this!==Ve&&this instanceof P?g:o;++j<I;)k[j]=f[j];for(;C--;)k[j++]=arguments[++O];return St(R,d?c:this,k)}return P}function ng(o){return function(a,c,f){return f&&typeof f!="number"&&ut(a,c,f)&&(c=f=t),a=Dr(a),c===t?(c=a,a=0):c=Dr(c),f=f===t?a<c?1:-1:Dr(f),HS(a,c,f,o)}}function Os(o){return function(a,c){return typeof a=="string"&&typeof c=="string"||(a=Wt(a),c=Wt(c)),o(a,c)}}function og(o,a,c,f,d,g,P,O,C,j){var I=a&Y,k=I?P:t,R=I?t:P,W=I?g:t,H=I?t:g;a|=I?pe:ke,a&=~(I?ke:pe),a&N||(a&=~(x|D));var Z=[o,a,d,W,k,H,R,O,C,j],$=c.apply(t,Z);return Bh(o)&&yg($,Z),$.placeholder=f,gg($,o,a)}function Rh(o){var a=Fe[o];return function(c,f){if(c=Wt(c),f=f==null?0:tt(J(f),292),f&&gy(c)){var d=(ue(c)+"e").split("e"),g=a(d[0]+"e"+(+d[1]+f));return d=(ue(g)+"e").split("e"),+(d[0]+"e"+(+d[1]-f))}return a(c)}}var uA=wn&&1/Ja(new wn([,-0]))[1]==zi?function(o){return new wn(o)}:ap;function ag(o){return function(a){var c=rt(a);return c==Bt?dh(a):c==Ht?ST(a):yT(a,o(a))}}function jr(o,a,c,f,d,g,P,O){var C=a&D;if(!C&&typeof o!="function")throw new Dt(u);var j=f?f.length:0;if(j||(a&=~(pe|ke),f=d=t),P=P===t?P:De(J(P),0),O=O===t?O:J(O),j-=d?d.length:0,a&ke){var I=f,k=d;f=d=t}var R=C?t:Vh(o),W=[o,a,c,f,d,I,k,g,P,O];if(R&&OA(W,R),o=W[0],a=W[1],c=W[2],f=W[3],d=W[4],O=W[9]=W[9]===t?C?0:o.length:De(W[9]-j,0),!O&&a&(Y|ie)&&(a&=~(Y|ie)),!a||a==x)var H=oA(o,a,c);else a==Y||a==ie?H=aA(o,a,O):(a==pe||a==(x|pe))&&!d.length?H=sA(o,a,c,f):H=_s.apply(t,W);var Z=R?Ny:yg;return gg(Z(H,W),o,a)}function sg(o,a,c,f){return o===t||Qt(o,Pn[c])&&!ce.call(f,c)?a:o}function ug(o,a,c,f,d,g){return we(o)&&we(a)&&(g.set(a,o),ms(o,a,t,ug,g),g.delete(a)),o}function cA(o){return fa(o)?t:o}function cg(o,a,c,f,d,g){var P=c&E,O=o.length,C=a.length;if(O!=C&&!(P&&C>O))return!1;var j=g.get(o),I=g.get(a);if(j&&I)return j==a&&I==o;var k=-1,R=!0,W=c&M?new Ui:t;for(g.set(o,a),g.set(a,o);++k<O;){var H=o[k],Z=a[k];if(f)var $=P?f(Z,H,k,a,o,g):f(H,Z,k,o,a,g);if($!==t){if($)continue;R=!1;break}if(W){if(!uh(a,function(te,ne){if(!Xo(W,ne)&&(H===te||d(H,te,c,f,g)))return W.push(ne)})){R=!1;break}}else if(!(H===Z||d(H,Z,c,f,g))){R=!1;break}}return g.delete(o),g.delete(a),R}function lA(o,a,c,f,d,g,P){switch(c){case mn:if(o.byteLength!=a.byteLength||o.byteOffset!=a.byteOffset)return!1;o=o.buffer,a=a.buffer;case Ko:return!(o.byteLength!=a.byteLength||!g(new ns(o),new ns(a)));case Go:case Bo:case Ho:return Qt(+o,+a);case Ga:return o.name==a.name&&o.message==a.message;case $o:case Yo:return o==a+"";case Bt:var O=dh;case Ht:var C=f&E;if(O||(O=Ja),o.size!=a.size&&!C)return!1;var j=P.get(o);if(j)return j==a;f|=M,P.set(o,a);var I=cg(O(o),O(a),f,d,g,P);return P.delete(o),I;case Ha:if(ra)return ra.call(o)==ra.call(a)}return!1}function fA(o,a,c,f,d,g){var P=c&E,O=zh(o),C=O.length,j=zh(a),I=j.length;if(C!=I&&!P)return!1;for(var k=C;k--;){var R=O[k];if(!(P?R in a:ce.call(a,R)))return!1}var W=g.get(o),H=g.get(a);if(W&&H)return W==a&&H==o;var Z=!0;g.set(o,a),g.set(a,o);for(var $=P;++k<C;){R=O[k];var te=o[R],ne=a[R];if(f)var qt=P?f(ne,te,R,a,o,g):f(te,ne,R,o,a,g);if(!(qt===t?te===ne||d(te,ne,c,f,g):qt)){Z=!1;break}$||($=R=="constructor")}if(Z&&!$){var ct=o.constructor,Mt=a.constructor;ct!=Mt&&"constructor"in o&&"constructor"in a&&!(typeof ct=="function"&&ct instanceof ct&&typeof Mt=="function"&&Mt instanceof Mt)&&(Z=!1)}return g.delete(o),g.delete(a),Z}function Ir(o){return $h(vg(o,t,Tg),o+"")}function zh(o){return qy(o,We,Uh)}function Nh(o){return qy(o,yt,lg)}var Vh=ls?function(o){return ls.get(o)}:ap;function Ts(o){for(var a=o.name+"",c=On[a],f=ce.call(On,a)?c.length:0;f--;){var d=c[f],g=d.func;if(g==null||g==o)return d.name}return a}function Cn(o){var a=ce.call(y,"placeholder")?y:o;return a.placeholder}function B(){var o=y.iteratee||np;return o=o===np?xy:o,arguments.length?o(arguments[0],arguments[1]):o}function Ss(o,a){var c=o.__data__;return bA(a)?c[typeof a=="string"?"string":"hash"]:c.map}function Wh(o){for(var a=We(o),c=a.length;c--;){var f=a[c],d=o[f];a[c]=[f,d,pg(d)]}return a}function Hi(o,a){var c=wT(o,a);return Ly(c)?c:t}function hA(o){var a=ce.call(o,Vi),c=o[Vi];try{o[Vi]=t;var f=!0}catch{}var d=rs.call(o);return f&&(a?o[Vi]=c:delete o[Vi]),d}var Uh=mh?function(o){return o==null?[]:(o=de(o),Kr(mh(o),function(a){return my.call(o,a)}))}:sp,lg=mh?function(o){for(var a=[];o;)Xr(a,Uh(o)),o=os(o);return a}:sp,rt=st;(yh&&rt(new yh(new ArrayBuffer(1)))!=mn||Zo&&rt(new Zo)!=Bt||gh&&rt(gh.resolve())!=Am||wn&&rt(new wn)!=Ht||ea&&rt(new ea)!=Qo)&&(rt=function(o){var a=st(o),c=a==qr?o.constructor:t,f=c?$i(c):"";if(f)switch(f){case YT:return mn;case QT:return Bt;case KT:return Am;case XT:return Ht;case JT:return Qo}return a});function pA(o,a,c){for(var f=-1,d=c.length;++f<d;){var g=c[f],P=g.size;switch(g.type){case"drop":o+=P;break;case"dropRight":a-=P;break;case"take":a=tt(a,o+P);break;case"takeRight":o=De(o,a-P);break}}return{start:o,end:a}}function dA(o){var a=o.match(_O);return a?a[1].split(PO):[]}function fg(o,a,c){a=ii(a,o);for(var f=-1,d=a.length,g=!1;++f<d;){var P=cr(a[f]);if(!(g=o!=null&&c(o,P)))break;o=o[P]}return g||++f!=d?g:(d=o==null?0:o.length,!!d&&xs(d)&&kr(P,d)&&(K(o)||Yi(o)))}function vA(o){var a=o.length,c=new o.constructor(a);return a&&typeof o[0]=="string"&&ce.call(o,"index")&&(c.index=o.index,c.input=o.input),c}function hg(o){return typeof o.constructor=="function"&&!ca(o)?Tn(os(o)):{}}function mA(o,a,c){var f=o.constructor;switch(a){case Ko:return Fh(o);case Go:case Bo:return new f(+o);case mn:return ZS(o,c);case Wf:case Uf:case Gf:case Bf:case Hf:case $f:case Yf:case Qf:case Kf:return Yy(o,c);case Bt:return new f;case Ho:case Yo:return new f(o);case $o:return eA(o);case Ht:return new f;case Ha:return tA(o)}}function yA(o,a){var c=a.length;if(!c)return o;var f=c-1;return a[f]=(c>1?"& ":"")+a[f],a=a.join(c>2?", ":" "),o.replace(bO,`{
/* [wrapped with `+a+`] */
`)}function gA(o){return K(o)||Yi(o)||!!(yy&&o&&o[yy])}function kr(o,a){var c=typeof o;return a=a??Qr,!!a&&(c=="number"||c!="symbol"&&MO.test(o))&&o>-1&&o%1==0&&o<a}function ut(o,a,c){if(!we(c))return!1;var f=typeof a;return(f=="number"?mt(c)&&kr(a,c.length):f=="string"&&a in c)?Qt(c[a],o):!1}function Gh(o,a){if(K(o))return!1;var c=typeof o;return c=="number"||c=="symbol"||c=="boolean"||o==null||Et(o)?!0:vO.test(o)||!dO.test(o)||a!=null&&o in de(a)}function bA(o){var a=typeof o;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?o!=="__proto__":o===null}function Bh(o){var a=Ts(o),c=y[a];if(typeof c!="function"||!(a in re.prototype))return!1;if(o===c)return!0;var f=Vh(c);return!!f&&o===f[0]}function _A(o){return!!py&&py in o}var PA=es?Fr:up;function ca(o){var a=o&&o.constructor,c=typeof a=="function"&&a.prototype||Pn;return o===c}function pg(o){return o===o&&!we(o)}function dg(o,a){return function(c){return c==null?!1:c[o]===a&&(a!==t||o in de(c))}}function wA(o){var a=Ms(o,function(f){return c.size===p&&c.clear(),f}),c=a.cache;return a}function OA(o,a){var c=o[1],f=a[1],d=c|f,g=d<(x|D|dt),P=f==dt&&c==Y||f==dt&&c==Uo&&o[7].length<=a[8]||f==(dt|Uo)&&a[7].length<=a[8]&&c==Y;if(!(g||P))return o;f&x&&(o[2]=a[2],d|=c&x?0:N);var O=a[3];if(O){var C=o[3];o[3]=C?Ky(C,O,a[4]):O,o[4]=C?Jr(o[3],v):a[4]}return O=a[5],O&&(C=o[5],o[5]=C?Xy(C,O,a[6]):O,o[6]=C?Jr(o[5],v):a[6]),O=a[7],O&&(o[7]=O),f&dt&&(o[8]=o[8]==null?a[8]:tt(o[8],a[8])),o[9]==null&&(o[9]=a[9]),o[0]=a[0],o[1]=d,o}function TA(o){var a=[];if(o!=null)for(var c in de(o))a.push(c);return a}function SA(o){return rs.call(o)}function vg(o,a,c){return a=De(a===t?o.length-1:a,0),function(){for(var f=arguments,d=-1,g=De(f.length-a,0),P=q(g);++d<g;)P[d]=f[a+d];d=-1;for(var O=q(a+1);++d<a;)O[d]=f[d];return O[a]=c(P),St(o,this,O)}}function mg(o,a){return a.length<2?o:Bi(o,Nt(a,0,-1))}function AA(o,a){for(var c=o.length,f=tt(a.length,c),d=vt(o);f--;){var g=a[f];o[f]=kr(g,c)?d[g]:t}return o}function Hh(o,a){if(!(a==="constructor"&&typeof o[a]=="function")&&a!="__proto__")return o[a]}var yg=bg(Ny),la=VT||function(o,a){return Ve.setTimeout(o,a)},$h=bg(QS);function gg(o,a,c){var f=a+"";return $h(o,yA(f,CA(dA(f),c)))}function bg(o){var a=0,c=0;return function(){var f=BT(),d=Yw-(f-c);if(c=f,d>0){if(++a>=$w)return arguments[0]}else a=0;return o.apply(t,arguments)}}function As(o,a){var c=-1,f=o.length,d=f-1;for(a=a===t?f:a;++c<a;){var g=qh(c,d),P=o[g];o[g]=o[c],o[c]=P}return o.length=a,o}var _g=wA(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(mO,function(c,f,d,g){a.push(d?g.replace(TO,"$1"):f||c)}),a});function cr(o){if(typeof o=="string"||Et(o))return o;var a=o+"";return a=="0"&&1/o==-zi?"-0":a}function $i(o){if(o!=null){try{return ts.call(o)}catch{}try{return o+""}catch{}}return""}function CA(o,a){return Ft(eO,function(c){var f="_."+c[0];a&c[1]&&!Ka(o,f)&&o.push(f)}),o.sort()}function Pg(o){if(o instanceof re)return o.clone();var a=new Rt(o.__wrapped__,o.__chain__);return a.__actions__=vt(o.__actions__),a.__index__=o.__index__,a.__values__=o.__values__,a}function EA(o,a,c){(c?ut(o,a,c):a===t)?a=1:a=De(J(a),0);var f=o==null?0:o.length;if(!f||a<1)return[];for(var d=0,g=0,P=q(us(f/a));d<f;)P[g++]=Nt(o,d,d+=a);return P}function qA(o){for(var a=-1,c=o==null?0:o.length,f=0,d=[];++a<c;){var g=o[a];g&&(d[f++]=g)}return d}function MA(){var o=arguments.length;if(!o)return[];for(var a=q(o-1),c=arguments[0],f=o;f--;)a[f-1]=arguments[f];return Xr(K(c)?vt(c):[c],Qe(a,1))}var LA=ee(function(o,a){return Ce(o)?na(o,Qe(a,1,Ce,!0)):[]}),xA=ee(function(o,a){var c=Vt(a);return Ce(c)&&(c=t),Ce(o)?na(o,Qe(a,1,Ce,!0),B(c,2)):[]}),jA=ee(function(o,a){var c=Vt(a);return Ce(c)&&(c=t),Ce(o)?na(o,Qe(a,1,Ce,!0),t,c):[]});function IA(o,a,c){var f=o==null?0:o.length;return f?(a=c||a===t?1:J(a),Nt(o,a<0?0:a,f)):[]}function kA(o,a,c){var f=o==null?0:o.length;return f?(a=c||a===t?1:J(a),a=f-a,Nt(o,0,a<0?0:a)):[]}function FA(o,a){return o&&o.length?gs(o,B(a,3),!0,!0):[]}function DA(o,a){return o&&o.length?gs(o,B(a,3),!0):[]}function RA(o,a,c,f){var d=o==null?0:o.length;return d?(c&&typeof c!="number"&&ut(o,a,c)&&(c=0,f=d),MS(o,a,c,f)):[]}function wg(o,a,c){var f=o==null?0:o.length;if(!f)return-1;var d=c==null?0:J(c);return d<0&&(d=De(f+d,0)),Xa(o,B(a,3),d)}function Og(o,a,c){var f=o==null?0:o.length;if(!f)return-1;var d=f-1;return c!==t&&(d=J(c),d=c<0?De(f+d,0):tt(d,f-1)),Xa(o,B(a,3),d,!0)}function Tg(o){var a=o==null?0:o.length;return a?Qe(o,1):[]}function zA(o){var a=o==null?0:o.length;return a?Qe(o,zi):[]}function NA(o,a){var c=o==null?0:o.length;return c?(a=a===t?1:J(a),Qe(o,a)):[]}function VA(o){for(var a=-1,c=o==null?0:o.length,f={};++a<c;){var d=o[a];f[d[0]]=d[1]}return f}function Sg(o){return o&&o.length?o[0]:t}function WA(o,a,c){var f=o==null?0:o.length;if(!f)return-1;var d=c==null?0:J(c);return d<0&&(d=De(f+d,0)),gn(o,a,d)}function UA(o){var a=o==null?0:o.length;return a?Nt(o,0,-1):[]}var GA=ee(function(o){var a=ge(o,Ih);return a.length&&a[0]===o[0]?Th(a):[]}),BA=ee(function(o){var a=Vt(o),c=ge(o,Ih);return a===Vt(c)?a=t:c.pop(),c.length&&c[0]===o[0]?Th(c,B(a,2)):[]}),HA=ee(function(o){var a=Vt(o),c=ge(o,Ih);return a=typeof a=="function"?a:t,a&&c.pop(),c.length&&c[0]===o[0]?Th(c,t,a):[]});function $A(o,a){return o==null?"":UT.call(o,a)}function Vt(o){var a=o==null?0:o.length;return a?o[a-1]:t}function YA(o,a,c){var f=o==null?0:o.length;if(!f)return-1;var d=f;return c!==t&&(d=J(c),d=d<0?De(f+d,0):tt(d,f-1)),a===a?CT(o,a,d):Xa(o,oy,d,!0)}function QA(o,a){return o&&o.length?Fy(o,J(a)):t}var KA=ee(Ag);function Ag(o,a){return o&&o.length&&a&&a.length?Eh(o,a):o}function XA(o,a,c){return o&&o.length&&a&&a.length?Eh(o,a,B(c,2)):o}function JA(o,a,c){return o&&o.length&&a&&a.length?Eh(o,a,t,c):o}var ZA=Ir(function(o,a){var c=o==null?0:o.length,f=_h(o,a);return zy(o,ge(a,function(d){return kr(d,c)?+d:d}).sort(Qy)),f});function eC(o,a){var c=[];if(!(o&&o.length))return c;var f=-1,d=[],g=o.length;for(a=B(a,3);++f<g;){var P=o[f];a(P,f,o)&&(c.push(P),d.push(f))}return zy(o,d),c}function Yh(o){return o==null?o:$T.call(o)}function tC(o,a,c){var f=o==null?0:o.length;return f?(c&&typeof c!="number"&&ut(o,a,c)?(a=0,c=f):(a=a==null?0:J(a),c=c===t?f:J(c)),Nt(o,a,c)):[]}function rC(o,a){return ys(o,a)}function iC(o,a,c){return Lh(o,a,B(c,2))}function nC(o,a){var c=o==null?0:o.length;if(c){var f=ys(o,a);if(f<c&&Qt(o[f],a))return f}return-1}function oC(o,a){return ys(o,a,!0)}function aC(o,a,c){return Lh(o,a,B(c,2),!0)}function sC(o,a){var c=o==null?0:o.length;if(c){var f=ys(o,a,!0)-1;if(Qt(o[f],a))return f}return-1}function uC(o){return o&&o.length?Vy(o):[]}function cC(o,a){return o&&o.length?Vy(o,B(a,2)):[]}function lC(o){var a=o==null?0:o.length;return a?Nt(o,1,a):[]}function fC(o,a,c){return o&&o.length?(a=c||a===t?1:J(a),Nt(o,0,a<0?0:a)):[]}function hC(o,a,c){var f=o==null?0:o.length;return f?(a=c||a===t?1:J(a),a=f-a,Nt(o,a<0?0:a,f)):[]}function pC(o,a){return o&&o.length?gs(o,B(a,3),!1,!0):[]}function dC(o,a){return o&&o.length?gs(o,B(a,3)):[]}var vC=ee(function(o){return ri(Qe(o,1,Ce,!0))}),mC=ee(function(o){var a=Vt(o);return Ce(a)&&(a=t),ri(Qe(o,1,Ce,!0),B(a,2))}),yC=ee(function(o){var a=Vt(o);return a=typeof a=="function"?a:t,ri(Qe(o,1,Ce,!0),t,a)});function gC(o){return o&&o.length?ri(o):[]}function bC(o,a){return o&&o.length?ri(o,B(a,2)):[]}function _C(o,a){return a=typeof a=="function"?a:t,o&&o.length?ri(o,t,a):[]}function Qh(o){if(!(o&&o.length))return[];var a=0;return o=Kr(o,function(c){if(Ce(c))return a=De(c.length,a),!0}),hh(a,function(c){return ge(o,ch(c))})}function Cg(o,a){if(!(o&&o.length))return[];var c=Qh(o);return a==null?c:ge(c,function(f){return St(a,t,f)})}var PC=ee(function(o,a){return Ce(o)?na(o,a):[]}),wC=ee(function(o){return jh(Kr(o,Ce))}),OC=ee(function(o){var a=Vt(o);return Ce(a)&&(a=t),jh(Kr(o,Ce),B(a,2))}),TC=ee(function(o){var a=Vt(o);return a=typeof a=="function"?a:t,jh(Kr(o,Ce),t,a)}),SC=ee(Qh);function AC(o,a){return By(o||[],a||[],ia)}function CC(o,a){return By(o||[],a||[],sa)}var EC=ee(function(o){var a=o.length,c=a>1?o[a-1]:t;return c=typeof c=="function"?(o.pop(),c):t,Cg(o,c)});function Eg(o){var a=y(o);return a.__chain__=!0,a}function qC(o,a){return a(o),o}function Cs(o,a){return a(o)}var MC=Ir(function(o){var a=o.length,c=a?o[0]:0,f=this.__wrapped__,d=function(g){return _h(g,o)};return a>1||this.__actions__.length||!(f instanceof re)||!kr(c)?this.thru(d):(f=f.slice(c,+c+(a?1:0)),f.__actions__.push({func:Cs,args:[d],thisArg:t}),new Rt(f,this.__chain__).thru(function(g){return a&&!g.length&&g.push(t),g}))});function LC(){return Eg(this)}function xC(){return new Rt(this.value(),this.__chain__)}function jC(){this.__values__===t&&(this.__values__=Wg(this.value()));var o=this.__index__>=this.__values__.length,a=o?t:this.__values__[this.__index__++];return{done:o,value:a}}function IC(){return this}function kC(o){for(var a,c=this;c instanceof hs;){var f=Pg(c);f.__index__=0,f.__values__=t,a?d.__wrapped__=f:a=f;var d=f;c=c.__wrapped__}return d.__wrapped__=o,a}function FC(){var o=this.__wrapped__;if(o instanceof re){var a=o;return this.__actions__.length&&(a=new re(this)),a=a.reverse(),a.__actions__.push({func:Cs,args:[Yh],thisArg:t}),new Rt(a,this.__chain__)}return this.thru(Yh)}function DC(){return Gy(this.__wrapped__,this.__actions__)}var RC=bs(function(o,a,c){ce.call(o,c)?++o[c]:xr(o,c,1)});function zC(o,a,c){var f=K(o)?iy:qS;return c&&ut(o,a,c)&&(a=t),f(o,B(a,3))}function NC(o,a){var c=K(o)?Kr:Cy;return c(o,B(a,3))}var VC=tg(wg),WC=tg(Og);function UC(o,a){return Qe(Es(o,a),1)}function GC(o,a){return Qe(Es(o,a),zi)}function BC(o,a,c){return c=c===t?1:J(c),Qe(Es(o,a),c)}function qg(o,a){var c=K(o)?Ft:ti;return c(o,B(a,3))}function Mg(o,a){var c=K(o)?lT:Ay;return c(o,B(a,3))}var HC=bs(function(o,a,c){ce.call(o,c)?o[c].push(a):xr(o,c,[a])});function $C(o,a,c,f){o=mt(o)?o:qn(o),c=c&&!f?J(c):0;var d=o.length;return c<0&&(c=De(d+c,0)),js(o)?c<=d&&o.indexOf(a,c)>-1:!!d&&gn(o,a,c)>-1}var YC=ee(function(o,a,c){var f=-1,d=typeof a=="function",g=mt(o)?q(o.length):[];return ti(o,function(P){g[++f]=d?St(a,P,c):oa(P,a,c)}),g}),QC=bs(function(o,a,c){xr(o,c,a)});function Es(o,a){var c=K(o)?ge:jy;return c(o,B(a,3))}function KC(o,a,c,f){return o==null?[]:(K(a)||(a=a==null?[]:[a]),c=f?t:c,K(c)||(c=c==null?[]:[c]),Dy(o,a,c))}var XC=bs(function(o,a,c){o[c?0:1].push(a)},function(){return[[],[]]});function JC(o,a,c){var f=K(o)?sh:sy,d=arguments.length<3;return f(o,B(a,4),c,d,ti)}function ZC(o,a,c){var f=K(o)?fT:sy,d=arguments.length<3;return f(o,B(a,4),c,d,Ay)}function eE(o,a){var c=K(o)?Kr:Cy;return c(o,Ls(B(a,3)))}function tE(o){var a=K(o)?wy:$S;return a(o)}function rE(o,a,c){(c?ut(o,a,c):a===t)?a=1:a=J(a);var f=K(o)?TS:YS;return f(o,a)}function iE(o){var a=K(o)?SS:KS;return a(o)}function nE(o){if(o==null)return 0;if(mt(o))return js(o)?_n(o):o.length;var a=rt(o);return a==Bt||a==Ht?o.size:Ah(o).length}function oE(o,a,c){var f=K(o)?uh:XS;return c&&ut(o,a,c)&&(a=t),f(o,B(a,3))}var aE=ee(function(o,a){if(o==null)return[];var c=a.length;return c>1&&ut(o,a[0],a[1])?a=[]:c>2&&ut(a[0],a[1],a[2])&&(a=[a[0]]),Dy(o,Qe(a,1),[])}),qs=NT||function(){return Ve.Date.now()};function sE(o,a){if(typeof a!="function")throw new Dt(u);return o=J(o),function(){if(--o<1)return a.apply(this,arguments)}}function Lg(o,a,c){return a=c?t:a,a=o&&a==null?o.length:a,jr(o,dt,t,t,t,t,a)}function xg(o,a){var c;if(typeof a!="function")throw new Dt(u);return o=J(o),function(){return--o>0&&(c=a.apply(this,arguments)),o<=1&&(a=t),c}}var Kh=ee(function(o,a,c){var f=x;if(c.length){var d=Jr(c,Cn(Kh));f|=pe}return jr(o,f,a,c,d)}),jg=ee(function(o,a,c){var f=x|D;if(c.length){var d=Jr(c,Cn(jg));f|=pe}return jr(a,f,o,c,d)});function Ig(o,a,c){a=c?t:a;var f=jr(o,Y,t,t,t,t,t,a);return f.placeholder=Ig.placeholder,f}function kg(o,a,c){a=c?t:a;var f=jr(o,ie,t,t,t,t,t,a);return f.placeholder=kg.placeholder,f}function Fg(o,a,c){var f,d,g,P,O,C,j=0,I=!1,k=!1,R=!0;if(typeof o!="function")throw new Dt(u);a=Wt(a)||0,we(c)&&(I=!!c.leading,k="maxWait"in c,g=k?De(Wt(c.maxWait)||0,a):g,R="trailing"in c?!!c.trailing:R);function W(Ee){var Kt=f,Rr=d;return f=d=t,j=Ee,P=o.apply(Rr,Kt),P}function H(Ee){return j=Ee,O=la(te,a),I?W(Ee):P}function Z(Ee){var Kt=Ee-C,Rr=Ee-j,tb=a-Kt;return k?tt(tb,g-Rr):tb}function $(Ee){var Kt=Ee-C,Rr=Ee-j;return C===t||Kt>=a||Kt<0||k&&Rr>=g}function te(){var Ee=qs();if($(Ee))return ne(Ee);O=la(te,Z(Ee))}function ne(Ee){return O=t,R&&f?W(Ee):(f=d=t,P)}function qt(){O!==t&&Hy(O),j=0,f=C=d=O=t}function ct(){return O===t?P:ne(qs())}function Mt(){var Ee=qs(),Kt=$(Ee);if(f=arguments,d=this,C=Ee,Kt){if(O===t)return H(C);if(k)return Hy(O),O=la(te,a),W(C)}return O===t&&(O=la(te,a)),P}return Mt.cancel=qt,Mt.flush=ct,Mt}var uE=ee(function(o,a){return Sy(o,1,a)}),cE=ee(function(o,a,c){return Sy(o,Wt(a)||0,c)});function lE(o){return jr(o,Vf)}function Ms(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new Dt(u);var c=function(){var f=arguments,d=a?a.apply(this,f):f[0],g=c.cache;if(g.has(d))return g.get(d);var P=o.apply(this,f);return c.cache=g.set(d,P)||g,P};return c.cache=new(Ms.Cache||Lr),c}Ms.Cache=Lr;function Ls(o){if(typeof o!="function")throw new Dt(u);return function(){var a=arguments;switch(a.length){case 0:return!o.call(this);case 1:return!o.call(this,a[0]);case 2:return!o.call(this,a[0],a[1]);case 3:return!o.call(this,a[0],a[1],a[2])}return!o.apply(this,a)}}function fE(o){return xg(2,o)}var hE=JS(function(o,a){a=a.length==1&&K(a[0])?ge(a[0],At(B())):ge(Qe(a,1),At(B()));var c=a.length;return ee(function(f){for(var d=-1,g=tt(f.length,c);++d<g;)f[d]=a[d].call(this,f[d]);return St(o,this,f)})}),Xh=ee(function(o,a){var c=Jr(a,Cn(Xh));return jr(o,pe,t,a,c)}),Dg=ee(function(o,a){var c=Jr(a,Cn(Dg));return jr(o,ke,t,a,c)}),pE=Ir(function(o,a){return jr(o,Uo,t,t,t,a)});function dE(o,a){if(typeof o!="function")throw new Dt(u);return a=a===t?a:J(a),ee(o,a)}function vE(o,a){if(typeof o!="function")throw new Dt(u);return a=a==null?0:De(J(a),0),ee(function(c){var f=c[a],d=ni(c,0,a);return f&&Xr(d,f),St(o,this,d)})}function mE(o,a,c){var f=!0,d=!0;if(typeof o!="function")throw new Dt(u);return we(c)&&(f="leading"in c?!!c.leading:f,d="trailing"in c?!!c.trailing:d),Fg(o,a,{leading:f,maxWait:a,trailing:d})}function yE(o){return Lg(o,1)}function gE(o,a){return Xh(kh(a),o)}function bE(){if(!arguments.length)return[];var o=arguments[0];return K(o)?o:[o]}function _E(o){return zt(o,S)}function PE(o,a){return a=typeof a=="function"?a:t,zt(o,S,a)}function wE(o){return zt(o,b|S)}function OE(o,a){return a=typeof a=="function"?a:t,zt(o,b|S,a)}function TE(o,a){return a==null||Ty(o,a,We(a))}function Qt(o,a){return o===a||o!==o&&a!==a}var SE=Os(Oh),AE=Os(function(o,a){return o>=a}),Yi=My(function(){return arguments}())?My:function(o){return Se(o)&&ce.call(o,"callee")&&!my.call(o,"callee")},K=q.isArray,CE=Xm?At(Xm):kS;function mt(o){return o!=null&&xs(o.length)&&!Fr(o)}function Ce(o){return Se(o)&&mt(o)}function EE(o){return o===!0||o===!1||Se(o)&&st(o)==Go}var oi=WT||up,qE=Jm?At(Jm):FS;function ME(o){return Se(o)&&o.nodeType===1&&!fa(o)}function LE(o){if(o==null)return!0;if(mt(o)&&(K(o)||typeof o=="string"||typeof o.splice=="function"||oi(o)||En(o)||Yi(o)))return!o.length;var a=rt(o);if(a==Bt||a==Ht)return!o.size;if(ca(o))return!Ah(o).length;for(var c in o)if(ce.call(o,c))return!1;return!0}function xE(o,a){return aa(o,a)}function jE(o,a,c){c=typeof c=="function"?c:t;var f=c?c(o,a):t;return f===t?aa(o,a,t,c):!!f}function Jh(o){if(!Se(o))return!1;var a=st(o);return a==Ga||a==rO||typeof o.message=="string"&&typeof o.name=="string"&&!fa(o)}function IE(o){return typeof o=="number"&&gy(o)}function Fr(o){if(!we(o))return!1;var a=st(o);return a==Ba||a==Sm||a==tO||a==nO}function Rg(o){return typeof o=="number"&&o==J(o)}function xs(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Qr}function we(o){var a=typeof o;return o!=null&&(a=="object"||a=="function")}function Se(o){return o!=null&&typeof o=="object"}var zg=Zm?At(Zm):RS;function kE(o,a){return o===a||Sh(o,a,Wh(a))}function FE(o,a,c){return c=typeof c=="function"?c:t,Sh(o,a,Wh(a),c)}function DE(o){return Ng(o)&&o!=+o}function RE(o){if(PA(o))throw new Q(s);return Ly(o)}function zE(o){return o===null}function NE(o){return o==null}function Ng(o){return typeof o=="number"||Se(o)&&st(o)==Ho}function fa(o){if(!Se(o)||st(o)!=qr)return!1;var a=os(o);if(a===null)return!0;var c=ce.call(a,"constructor")&&a.constructor;return typeof c=="function"&&c instanceof c&&ts.call(c)==FT}var Zh=ey?At(ey):zS;function VE(o){return Rg(o)&&o>=-Qr&&o<=Qr}var Vg=ty?At(ty):NS;function js(o){return typeof o=="string"||!K(o)&&Se(o)&&st(o)==Yo}function Et(o){return typeof o=="symbol"||Se(o)&&st(o)==Ha}var En=ry?At(ry):VS;function WE(o){return o===t}function UE(o){return Se(o)&&rt(o)==Qo}function GE(o){return Se(o)&&st(o)==aO}var BE=Os(Ch),HE=Os(function(o,a){return o<=a});function Wg(o){if(!o)return[];if(mt(o))return js(o)?$t(o):vt(o);if(Jo&&o[Jo])return TT(o[Jo]());var a=rt(o),c=a==Bt?dh:a==Ht?Ja:qn;return c(o)}function Dr(o){if(!o)return o===0?o:0;if(o=Wt(o),o===zi||o===-zi){var a=o<0?-1:1;return a*Xw}return o===o?o:0}function J(o){var a=Dr(o),c=a%1;return a===a?c?a-c:a:0}function Ug(o){return o?Gi(J(o),0,ar):0}function Wt(o){if(typeof o=="number")return o;if(Et(o))return Wa;if(we(o)){var a=typeof o.valueOf=="function"?o.valueOf():o;o=we(a)?a+"":a}if(typeof o!="string")return o===0?o:+o;o=uy(o);var c=CO.test(o);return c||qO.test(o)?sT(o.slice(2),c?2:8):AO.test(o)?Wa:+o}function Gg(o){return ur(o,yt(o))}function $E(o){return o?Gi(J(o),-Qr,Qr):o===0?o:0}function ue(o){return o==null?"":Ct(o)}var YE=Sn(function(o,a){if(ca(a)||mt(a)){ur(a,We(a),o);return}for(var c in a)ce.call(a,c)&&ia(o,c,a[c])}),Bg=Sn(function(o,a){ur(a,yt(a),o)}),Is=Sn(function(o,a,c,f){ur(a,yt(a),o,f)}),QE=Sn(function(o,a,c,f){ur(a,We(a),o,f)}),KE=Ir(_h);function XE(o,a){var c=Tn(o);return a==null?c:Oy(c,a)}var JE=ee(function(o,a){o=de(o);var c=-1,f=a.length,d=f>2?a[2]:t;for(d&&ut(a[0],a[1],d)&&(f=1);++c<f;)for(var g=a[c],P=yt(g),O=-1,C=P.length;++O<C;){var j=P[O],I=o[j];(I===t||Qt(I,Pn[j])&&!ce.call(o,j))&&(o[j]=g[j])}return o}),ZE=ee(function(o){return o.push(t,ug),St(Hg,t,o)});function eq(o,a){return ny(o,B(a,3),sr)}function tq(o,a){return ny(o,B(a,3),wh)}function rq(o,a){return o==null?o:Ph(o,B(a,3),yt)}function iq(o,a){return o==null?o:Ey(o,B(a,3),yt)}function nq(o,a){return o&&sr(o,B(a,3))}function oq(o,a){return o&&wh(o,B(a,3))}function aq(o){return o==null?[]:vs(o,We(o))}function sq(o){return o==null?[]:vs(o,yt(o))}function ep(o,a,c){var f=o==null?t:Bi(o,a);return f===t?c:f}function uq(o,a){return o!=null&&fg(o,a,LS)}function tp(o,a){return o!=null&&fg(o,a,xS)}var cq=ig(function(o,a,c){a!=null&&typeof a.toString!="function"&&(a=rs.call(a)),o[a]=c},ip(gt)),lq=ig(function(o,a,c){a!=null&&typeof a.toString!="function"&&(a=rs.call(a)),ce.call(o,a)?o[a].push(c):o[a]=[c]},B),fq=ee(oa);function We(o){return mt(o)?Py(o):Ah(o)}function yt(o){return mt(o)?Py(o,!0):WS(o)}function hq(o,a){var c={};return a=B(a,3),sr(o,function(f,d,g){xr(c,a(f,d,g),f)}),c}function pq(o,a){var c={};return a=B(a,3),sr(o,function(f,d,g){xr(c,d,a(f,d,g))}),c}var dq=Sn(function(o,a,c){ms(o,a,c)}),Hg=Sn(function(o,a,c,f){ms(o,a,c,f)}),vq=Ir(function(o,a){var c={};if(o==null)return c;var f=!1;a=ge(a,function(g){return g=ii(g,o),f||(f=g.length>1),g}),ur(o,Nh(o),c),f&&(c=zt(c,b|T|S,cA));for(var d=a.length;d--;)xh(c,a[d]);return c});function mq(o,a){return $g(o,Ls(B(a)))}var yq=Ir(function(o,a){return o==null?{}:GS(o,a)});function $g(o,a){if(o==null)return{};var c=ge(Nh(o),function(f){return[f]});return a=B(a),Ry(o,c,function(f,d){return a(f,d[0])})}function gq(o,a,c){a=ii(a,o);var f=-1,d=a.length;for(d||(d=1,o=t);++f<d;){var g=o==null?t:o[cr(a[f])];g===t&&(f=d,g=c),o=Fr(g)?g.call(o):g}return o}function bq(o,a,c){return o==null?o:sa(o,a,c)}function _q(o,a,c,f){return f=typeof f=="function"?f:t,o==null?o:sa(o,a,c,f)}var Yg=ag(We),Qg=ag(yt);function Pq(o,a,c){var f=K(o),d=f||oi(o)||En(o);if(a=B(a,4),c==null){var g=o&&o.constructor;d?c=f?new g:[]:we(o)?c=Fr(g)?Tn(os(o)):{}:c={}}return(d?Ft:sr)(o,function(P,O,C){return a(c,P,O,C)}),c}function wq(o,a){return o==null?!0:xh(o,a)}function Oq(o,a,c){return o==null?o:Uy(o,a,kh(c))}function Tq(o,a,c,f){return f=typeof f=="function"?f:t,o==null?o:Uy(o,a,kh(c),f)}function qn(o){return o==null?[]:ph(o,We(o))}function Sq(o){return o==null?[]:ph(o,yt(o))}function Aq(o,a,c){return c===t&&(c=a,a=t),c!==t&&(c=Wt(c),c=c===c?c:0),a!==t&&(a=Wt(a),a=a===a?a:0),Gi(Wt(o),a,c)}function Cq(o,a,c){return a=Dr(a),c===t?(c=a,a=0):c=Dr(c),o=Wt(o),jS(o,a,c)}function Eq(o,a,c){if(c&&typeof c!="boolean"&&ut(o,a,c)&&(a=c=t),c===t&&(typeof a=="boolean"?(c=a,a=t):typeof o=="boolean"&&(c=o,o=t)),o===t&&a===t?(o=0,a=1):(o=Dr(o),a===t?(a=o,o=0):a=Dr(a)),o>a){var f=o;o=a,a=f}if(c||o%1||a%1){var d=by();return tt(o+d*(a-o+aT("1e-"+((d+"").length-1))),a)}return qh(o,a)}var qq=An(function(o,a,c){return a=a.toLowerCase(),o+(c?Kg(a):a)});function Kg(o){return rp(ue(o).toLowerCase())}function Xg(o){return o=ue(o),o&&o.replace(LO,bT).replace(KO,"")}function Mq(o,a,c){o=ue(o),a=Ct(a);var f=o.length;c=c===t?f:Gi(J(c),0,f);var d=c;return c-=a.length,c>=0&&o.slice(c,d)==a}function Lq(o){return o=ue(o),o&&fO.test(o)?o.replace(Em,_T):o}function xq(o){return o=ue(o),o&&yO.test(o)?o.replace(Xf,"\\$&"):o}var jq=An(function(o,a,c){return o+(c?"-":"")+a.toLowerCase()}),Iq=An(function(o,a,c){return o+(c?" ":"")+a.toLowerCase()}),kq=eg("toLowerCase");function Fq(o,a,c){o=ue(o),a=J(a);var f=a?_n(o):0;if(!a||f>=a)return o;var d=(a-f)/2;return ws(cs(d),c)+o+ws(us(d),c)}function Dq(o,a,c){o=ue(o),a=J(a);var f=a?_n(o):0;return a&&f<a?o+ws(a-f,c):o}function Rq(o,a,c){o=ue(o),a=J(a);var f=a?_n(o):0;return a&&f<a?ws(a-f,c)+o:o}function zq(o,a,c){return c||a==null?a=0:a&&(a=+a),HT(ue(o).replace(Jf,""),a||0)}function Nq(o,a,c){return(c?ut(o,a,c):a===t)?a=1:a=J(a),Mh(ue(o),a)}function Vq(){var o=arguments,a=ue(o[0]);return o.length<3?a:a.replace(o[1],o[2])}var Wq=An(function(o,a,c){return o+(c?"_":"")+a.toLowerCase()});function Uq(o,a,c){return c&&typeof c!="number"&&ut(o,a,c)&&(a=c=t),c=c===t?ar:c>>>0,c?(o=ue(o),o&&(typeof a=="string"||a!=null&&!Zh(a))&&(a=Ct(a),!a&&bn(o))?ni($t(o),0,c):o.split(a,c)):[]}var Gq=An(function(o,a,c){return o+(c?" ":"")+rp(a)});function Bq(o,a,c){return o=ue(o),c=c==null?0:Gi(J(c),0,o.length),a=Ct(a),o.slice(c,c+a.length)==a}function Hq(o,a,c){var f=y.templateSettings;c&&ut(o,a,c)&&(a=t),o=ue(o),a=Is({},a,f,sg);var d=Is({},a.imports,f.imports,sg),g=We(d),P=ph(d,g),O,C,j=0,I=a.interpolate||$a,k="__p += '",R=vh((a.escape||$a).source+"|"+I.source+"|"+(I===qm?SO:$a).source+"|"+(a.evaluate||$a).source+"|$","g"),W="//# sourceURL="+(ce.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tT+"]")+`
`;o.replace(R,function($,te,ne,qt,ct,Mt){return ne||(ne=qt),k+=o.slice(j,Mt).replace(xO,PT),te&&(O=!0,k+=`' +
__e(`+te+`) +
'`),ct&&(C=!0,k+=`';
`+ct+`;
__p += '`),ne&&(k+=`' +
((__t = (`+ne+`)) == null ? '' : __t) +
'`),j=Mt+$.length,$}),k+=`';
`;var H=ce.call(a,"variable")&&a.variable;if(!H)k=`with (obj) {
`+k+`
}
`;else if(OO.test(H))throw new Q(l);k=(C?k.replace(sO,""):k).replace(uO,"$1").replace(cO,"$1;"),k="function("+(H||"obj")+`) {
`+(H?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(O?", __e = _.escape":"")+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+k+`return __p
}`;var Z=Zg(function(){return se(g,W+"return "+k).apply(t,P)});if(Z.source=k,Jh(Z))throw Z;return Z}function $q(o){return ue(o).toLowerCase()}function Yq(o){return ue(o).toUpperCase()}function Qq(o,a,c){if(o=ue(o),o&&(c||a===t))return uy(o);if(!o||!(a=Ct(a)))return o;var f=$t(o),d=$t(a),g=cy(f,d),P=ly(f,d)+1;return ni(f,g,P).join("")}function Kq(o,a,c){if(o=ue(o),o&&(c||a===t))return o.slice(0,hy(o)+1);if(!o||!(a=Ct(a)))return o;var f=$t(o),d=ly(f,$t(a))+1;return ni(f,0,d).join("")}function Xq(o,a,c){if(o=ue(o),o&&(c||a===t))return o.replace(Jf,"");if(!o||!(a=Ct(a)))return o;var f=$t(o),d=cy(f,$t(a));return ni(f,d).join("")}function Jq(o,a){var c=Bw,f=Hw;if(we(a)){var d="separator"in a?a.separator:d;c="length"in a?J(a.length):c,f="omission"in a?Ct(a.omission):f}o=ue(o);var g=o.length;if(bn(o)){var P=$t(o);g=P.length}if(c>=g)return o;var O=c-_n(f);if(O<1)return f;var C=P?ni(P,0,O).join(""):o.slice(0,O);if(d===t)return C+f;if(P&&(O+=C.length-O),Zh(d)){if(o.slice(O).search(d)){var j,I=C;for(d.global||(d=vh(d.source,ue(Mm.exec(d))+"g")),d.lastIndex=0;j=d.exec(I);)var k=j.index;C=C.slice(0,k===t?O:k)}}else if(o.indexOf(Ct(d),O)!=O){var R=C.lastIndexOf(d);R>-1&&(C=C.slice(0,R))}return C+f}function Zq(o){return o=ue(o),o&&lO.test(o)?o.replace(Cm,ET):o}var eM=An(function(o,a,c){return o+(c?" ":"")+a.toUpperCase()}),rp=eg("toUpperCase");function Jg(o,a,c){return o=ue(o),a=c?t:a,a===t?OT(o)?LT(o):dT(o):o.match(a)||[]}var Zg=ee(function(o,a){try{return St(o,t,a)}catch(c){return Jh(c)?c:new Q(c)}}),tM=Ir(function(o,a){return Ft(a,function(c){c=cr(c),xr(o,c,Kh(o[c],o))}),o});function rM(o){var a=o==null?0:o.length,c=B();return o=a?ge(o,function(f){if(typeof f[1]!="function")throw new Dt(u);return[c(f[0]),f[1]]}):[],ee(function(f){for(var d=-1;++d<a;){var g=o[d];if(St(g[0],this,f))return St(g[1],this,f)}})}function iM(o){return ES(zt(o,b))}function ip(o){return function(){return o}}function nM(o,a){return o==null||o!==o?a:o}var oM=rg(),aM=rg(!0);function gt(o){return o}function np(o){return xy(typeof o=="function"?o:zt(o,b))}function sM(o){return Iy(zt(o,b))}function uM(o,a){return ky(o,zt(a,b))}var cM=ee(function(o,a){return function(c){return oa(c,o,a)}}),lM=ee(function(o,a){return function(c){return oa(o,c,a)}});function op(o,a,c){var f=We(a),d=vs(a,f);c==null&&!(we(a)&&(d.length||!f.length))&&(c=a,a=o,o=this,d=vs(a,We(a)));var g=!(we(c)&&"chain"in c)||!!c.chain,P=Fr(o);return Ft(d,function(O){var C=a[O];o[O]=C,P&&(o.prototype[O]=function(){var j=this.__chain__;if(g||j){var I=o(this.__wrapped__),k=I.__actions__=vt(this.__actions__);return k.push({func:C,args:arguments,thisArg:o}),I.__chain__=j,I}return C.apply(o,Xr([this.value()],arguments))})}),o}function fM(){return Ve._===this&&(Ve._=DT),this}function ap(){}function hM(o){return o=J(o),ee(function(a){return Fy(a,o)})}var pM=Dh(ge),dM=Dh(iy),vM=Dh(uh);function eb(o){return Gh(o)?ch(cr(o)):BS(o)}function mM(o){return function(a){return o==null?t:Bi(o,a)}}var yM=ng(),gM=ng(!0);function sp(){return[]}function up(){return!1}function bM(){return{}}function _M(){return""}function PM(){return!0}function wM(o,a){if(o=J(o),o<1||o>Qr)return[];var c=ar,f=tt(o,ar);a=B(a),o-=ar;for(var d=hh(f,a);++c<o;)a(c);return d}function OM(o){return K(o)?ge(o,cr):Et(o)?[o]:vt(_g(ue(o)))}function TM(o){var a=++kT;return ue(o)+a}var SM=Ps(function(o,a){return o+a},0),AM=Rh("ceil"),CM=Ps(function(o,a){return o/a},1),EM=Rh("floor");function qM(o){return o&&o.length?ds(o,gt,Oh):t}function MM(o,a){return o&&o.length?ds(o,B(a,2),Oh):t}function LM(o){return ay(o,gt)}function xM(o,a){return ay(o,B(a,2))}function jM(o){return o&&o.length?ds(o,gt,Ch):t}function IM(o,a){return o&&o.length?ds(o,B(a,2),Ch):t}var kM=Ps(function(o,a){return o*a},1),FM=Rh("round"),DM=Ps(function(o,a){return o-a},0);function RM(o){return o&&o.length?fh(o,gt):0}function zM(o,a){return o&&o.length?fh(o,B(a,2)):0}return y.after=sE,y.ary=Lg,y.assign=YE,y.assignIn=Bg,y.assignInWith=Is,y.assignWith=QE,y.at=KE,y.before=xg,y.bind=Kh,y.bindAll=tM,y.bindKey=jg,y.castArray=bE,y.chain=Eg,y.chunk=EA,y.compact=qA,y.concat=MA,y.cond=rM,y.conforms=iM,y.constant=ip,y.countBy=RC,y.create=XE,y.curry=Ig,y.curryRight=kg,y.debounce=Fg,y.defaults=JE,y.defaultsDeep=ZE,y.defer=uE,y.delay=cE,y.difference=LA,y.differenceBy=xA,y.differenceWith=jA,y.drop=IA,y.dropRight=kA,y.dropRightWhile=FA,y.dropWhile=DA,y.fill=RA,y.filter=NC,y.flatMap=UC,y.flatMapDeep=GC,y.flatMapDepth=BC,y.flatten=Tg,y.flattenDeep=zA,y.flattenDepth=NA,y.flip=lE,y.flow=oM,y.flowRight=aM,y.fromPairs=VA,y.functions=aq,y.functionsIn=sq,y.groupBy=HC,y.initial=UA,y.intersection=GA,y.intersectionBy=BA,y.intersectionWith=HA,y.invert=cq,y.invertBy=lq,y.invokeMap=YC,y.iteratee=np,y.keyBy=QC,y.keys=We,y.keysIn=yt,y.map=Es,y.mapKeys=hq,y.mapValues=pq,y.matches=sM,y.matchesProperty=uM,y.memoize=Ms,y.merge=dq,y.mergeWith=Hg,y.method=cM,y.methodOf=lM,y.mixin=op,y.negate=Ls,y.nthArg=hM,y.omit=vq,y.omitBy=mq,y.once=fE,y.orderBy=KC,y.over=pM,y.overArgs=hE,y.overEvery=dM,y.overSome=vM,y.partial=Xh,y.partialRight=Dg,y.partition=XC,y.pick=yq,y.pickBy=$g,y.property=eb,y.propertyOf=mM,y.pull=KA,y.pullAll=Ag,y.pullAllBy=XA,y.pullAllWith=JA,y.pullAt=ZA,y.range=yM,y.rangeRight=gM,y.rearg=pE,y.reject=eE,y.remove=eC,y.rest=dE,y.reverse=Yh,y.sampleSize=rE,y.set=bq,y.setWith=_q,y.shuffle=iE,y.slice=tC,y.sortBy=aE,y.sortedUniq=uC,y.sortedUniqBy=cC,y.split=Uq,y.spread=vE,y.tail=lC,y.take=fC,y.takeRight=hC,y.takeRightWhile=pC,y.takeWhile=dC,y.tap=qC,y.throttle=mE,y.thru=Cs,y.toArray=Wg,y.toPairs=Yg,y.toPairsIn=Qg,y.toPath=OM,y.toPlainObject=Gg,y.transform=Pq,y.unary=yE,y.union=vC,y.unionBy=mC,y.unionWith=yC,y.uniq=gC,y.uniqBy=bC,y.uniqWith=_C,y.unset=wq,y.unzip=Qh,y.unzipWith=Cg,y.update=Oq,y.updateWith=Tq,y.values=qn,y.valuesIn=Sq,y.without=PC,y.words=Jg,y.wrap=gE,y.xor=wC,y.xorBy=OC,y.xorWith=TC,y.zip=SC,y.zipObject=AC,y.zipObjectDeep=CC,y.zipWith=EC,y.entries=Yg,y.entriesIn=Qg,y.extend=Bg,y.extendWith=Is,op(y,y),y.add=SM,y.attempt=Zg,y.camelCase=qq,y.capitalize=Kg,y.ceil=AM,y.clamp=Aq,y.clone=_E,y.cloneDeep=wE,y.cloneDeepWith=OE,y.cloneWith=PE,y.conformsTo=TE,y.deburr=Xg,y.defaultTo=nM,y.divide=CM,y.endsWith=Mq,y.eq=Qt,y.escape=Lq,y.escapeRegExp=xq,y.every=zC,y.find=VC,y.findIndex=wg,y.findKey=eq,y.findLast=WC,y.findLastIndex=Og,y.findLastKey=tq,y.floor=EM,y.forEach=qg,y.forEachRight=Mg,y.forIn=rq,y.forInRight=iq,y.forOwn=nq,y.forOwnRight=oq,y.get=ep,y.gt=SE,y.gte=AE,y.has=uq,y.hasIn=tp,y.head=Sg,y.identity=gt,y.includes=$C,y.indexOf=WA,y.inRange=Cq,y.invoke=fq,y.isArguments=Yi,y.isArray=K,y.isArrayBuffer=CE,y.isArrayLike=mt,y.isArrayLikeObject=Ce,y.isBoolean=EE,y.isBuffer=oi,y.isDate=qE,y.isElement=ME,y.isEmpty=LE,y.isEqual=xE,y.isEqualWith=jE,y.isError=Jh,y.isFinite=IE,y.isFunction=Fr,y.isInteger=Rg,y.isLength=xs,y.isMap=zg,y.isMatch=kE,y.isMatchWith=FE,y.isNaN=DE,y.isNative=RE,y.isNil=NE,y.isNull=zE,y.isNumber=Ng,y.isObject=we,y.isObjectLike=Se,y.isPlainObject=fa,y.isRegExp=Zh,y.isSafeInteger=VE,y.isSet=Vg,y.isString=js,y.isSymbol=Et,y.isTypedArray=En,y.isUndefined=WE,y.isWeakMap=UE,y.isWeakSet=GE,y.join=$A,y.kebabCase=jq,y.last=Vt,y.lastIndexOf=YA,y.lowerCase=Iq,y.lowerFirst=kq,y.lt=BE,y.lte=HE,y.max=qM,y.maxBy=MM,y.mean=LM,y.meanBy=xM,y.min=jM,y.minBy=IM,y.stubArray=sp,y.stubFalse=up,y.stubObject=bM,y.stubString=_M,y.stubTrue=PM,y.multiply=kM,y.nth=QA,y.noConflict=fM,y.noop=ap,y.now=qs,y.pad=Fq,y.padEnd=Dq,y.padStart=Rq,y.parseInt=zq,y.random=Eq,y.reduce=JC,y.reduceRight=ZC,y.repeat=Nq,y.replace=Vq,y.result=gq,y.round=FM,y.runInContext=A,y.sample=tE,y.size=nE,y.snakeCase=Wq,y.some=oE,y.sortedIndex=rC,y.sortedIndexBy=iC,y.sortedIndexOf=nC,y.sortedLastIndex=oC,y.sortedLastIndexBy=aC,y.sortedLastIndexOf=sC,y.startCase=Gq,y.startsWith=Bq,y.subtract=DM,y.sum=RM,y.sumBy=zM,y.template=Hq,y.times=wM,y.toFinite=Dr,y.toInteger=J,y.toLength=Ug,y.toLower=$q,y.toNumber=Wt,y.toSafeInteger=$E,y.toString=ue,y.toUpper=Yq,y.trim=Qq,y.trimEnd=Kq,y.trimStart=Xq,y.truncate=Jq,y.unescape=Zq,y.uniqueId=TM,y.upperCase=eM,y.upperFirst=rp,y.each=qg,y.eachRight=Mg,y.first=Sg,op(y,function(){var o={};return sr(y,function(a,c){ce.call(y.prototype,c)||(o[c]=a)}),o}(),{chain:!1}),y.VERSION=i,Ft(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){y[o].placeholder=y}),Ft(["drop","take"],function(o,a){re.prototype[o]=function(c){c=c===t?1:De(J(c),0);var f=this.__filtered__&&!a?new re(this):this.clone();return f.__filtered__?f.__takeCount__=tt(c,f.__takeCount__):f.__views__.push({size:tt(c,ar),type:o+(f.__dir__<0?"Right":"")}),f},re.prototype[o+"Right"]=function(c){return this.reverse()[o](c).reverse()}}),Ft(["filter","map","takeWhile"],function(o,a){var c=a+1,f=c==Tm||c==Kw;re.prototype[o]=function(d){var g=this.clone();return g.__iteratees__.push({iteratee:B(d,3),type:c}),g.__filtered__=g.__filtered__||f,g}}),Ft(["head","last"],function(o,a){var c="take"+(a?"Right":"");re.prototype[o]=function(){return this[c](1).value()[0]}}),Ft(["initial","tail"],function(o,a){var c="drop"+(a?"":"Right");re.prototype[o]=function(){return this.__filtered__?new re(this):this[c](1)}}),re.prototype.compact=function(){return this.filter(gt)},re.prototype.find=function(o){return this.filter(o).head()},re.prototype.findLast=function(o){return this.reverse().find(o)},re.prototype.invokeMap=ee(function(o,a){return typeof o=="function"?new re(this):this.map(function(c){return oa(c,o,a)})}),re.prototype.reject=function(o){return this.filter(Ls(B(o)))},re.prototype.slice=function(o,a){o=J(o);var c=this;return c.__filtered__&&(o>0||a<0)?new re(c):(o<0?c=c.takeRight(-o):o&&(c=c.drop(o)),a!==t&&(a=J(a),c=a<0?c.dropRight(-a):c.take(a-o)),c)},re.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},re.prototype.toArray=function(){return this.take(ar)},sr(re.prototype,function(o,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),f=/^(?:head|last)$/.test(a),d=y[f?"take"+(a=="last"?"Right":""):a],g=f||/^find/.test(a);d&&(y.prototype[a]=function(){var P=this.__wrapped__,O=f?[1]:arguments,C=P instanceof re,j=O[0],I=C||K(P),k=function(te){var ne=d.apply(y,Xr([te],O));return f&&R?ne[0]:ne};I&&c&&typeof j=="function"&&j.length!=1&&(C=I=!1);var R=this.__chain__,W=!!this.__actions__.length,H=g&&!R,Z=C&&!W;if(!g&&I){P=Z?P:new re(this);var $=o.apply(P,O);return $.__actions__.push({func:Cs,args:[k],thisArg:t}),new Rt($,R)}return H&&Z?o.apply(this,O):($=this.thru(k),H?f?$.value()[0]:$.value():$)})}),Ft(["pop","push","shift","sort","splice","unshift"],function(o){var a=Za[o],c=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",f=/^(?:pop|shift)$/.test(o);y.prototype[o]=function(){var d=arguments;if(f&&!this.__chain__){var g=this.value();return a.apply(K(g)?g:[],d)}return this[c](function(P){return a.apply(K(P)?P:[],d)})}}),sr(re.prototype,function(o,a){var c=y[a];if(c){var f=c.name+"";ce.call(On,f)||(On[f]=[]),On[f].push({name:a,func:c})}}),On[_s(t,D).name]=[{name:"wrapper",func:t}],re.prototype.clone=ZT,re.prototype.reverse=eS,re.prototype.value=tS,y.prototype.at=MC,y.prototype.chain=LC,y.prototype.commit=xC,y.prototype.next=jC,y.prototype.plant=kC,y.prototype.reverse=FC,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=DC,y.prototype.first=y.prototype.head,Jo&&(y.prototype[Jo]=IC),y},Zr=xT();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ve._=Zr,define(function(){return Zr})):Ni?((Ni.exports=Zr)._=Zr,nh._=Zr):Ve._=Zr}).call(r)}),Ww=class extends Set{constructor(r,e=!1){super(r),this.valuesAsFlags=e}};function za(r){if(r instanceof Map)return Object.fromEntries([...r.entries()].map(([e,t])=>[e,za(t)]));if(r instanceof Set)return Array.from(r.values()).map(za);if(r instanceof Ww)return{values:[...r.values()],valuesAsFlags:r.valuesAsFlags};if(typeof r=="object"){let e={};return Object.entries(r).forEach(([t,i])=>{e[t]=za(i)}),e}else return r}var yZ=_m(Pm(),1);var L5=_m(Pm(),1);function dn(r,e){if(typeof r!="object")throw new Error(`Cannot merge into non-object objectToMergeWith. Received: ${JSON.stringify(r)}`);if(typeof e!="object")throw new Error(`Cannot merge using non-object objectToMergeWith. Received: ${JSON.stringify(e)}`);let t=(0,L5.cloneDeep)(r);for(let[i,n]of Object.entries(e))typeof n!="object"||n instanceof Set||t[i]===void 0?t[i]=n:t[i]=dn(t[i],n);return t}function Uw(r,e){if(!(r===void 0||typeof r!="object"))for(let t of Object.keys(r)){if(t===e)return r[t];let i=r[t];if(typeof i=="object"){let n=Uw(i,e);if(n!==void 0)return n}}}var bm="@composite:",x5="@inherit:",j5=class{constructor(r,e,t){this.tiledClassToMembersMap=r,this.enumNameToValuesMap=e,this.parserOptions=t,this.memoiser=new Map}flattenMembers(r,e){return this.memoiser.has(r)?{[r]:this.memoiser.get(r)}:(this.memoiser.set(r,e.reduce((t,i)=>({...t,...this.flattenMemberProperty(i)}),{})),{[r]:this.memoiser.get(r)})}flattenMemberProperty(r){let e=r.propertyType??r.propertytype;if(r.type==="class"){if(!this.memoiser.has(e)){let n=this.tiledClassToMembersMap.get(e).reduce((s,u)=>dn(this.flattenMemberProperty(u),s),{});this.memoiser.set(e,n)}let t=this.memoiser.get(e),i=dn(t,this.flattenValue(r.value,t));return this.checkIfShouldFlatten(r.name)?i:{[r.name.replace(bm,"")]:i}}else return this.enumNameToValuesMap.has(e)?this.enumNameToValuesMap.get(e).valuesAsFlags?{[r.name]:new Set(r.value.split(",").filter(t=>t!==""))}:{[r.name]:r.value}:{[r.name]:r.value}}get memoisedFlattenedProperties(){return this.memoiser}flattenValue(r,e){return Object.entries(r).reduce((t,[i,n])=>{if(typeof n!="object")return Uw(e,i)instanceof Set?dn({[i]:new Set(n.split(",").filter(s=>s!==""))},t):dn({[i]:n},t);if(this.checkIfShouldFlatten(i))return dn(this.flattenValue(n,e),t);{let s=i.replace(bm,"");return dn({[s]:this.flattenValue(n,e)},t)}},{})}checkIfShouldFlatten(r){return this.parserOptions?.defaultComposite===!0?r.startsWith(x5):!r.startsWith(bm)}},Nw=_m(Pm(),1),I5=class{constructor(r){this.flattener=r}flattenPropertiesOnObject(r){return{...this.flattener.memoisedFlattenedProperties.get(r.class??r.type),...r.properties?.reduce((e,t)=>({...e,...this.flattener.flattenMemberProperty(t)}),{}),name:r.name,id:r.id,class:r.class??r.type??null,x:r.x,y:r.y}}flattenPropertiesOnTile(r){return{...this.flattener.memoisedFlattenedProperties.get(r.class??r.type),...r.properties?.reduce((e,t)=>({...e,...this.flattener.flattenMemberProperty(t)}),{}),id:r.id,class:r.class??r.type??null}}getCustomTypesMap(){return new Map([...this.flattener.memoisedFlattenedProperties.entries()].map(([r,e])=>[r,(0,Nw.cloneDeep)(e)]))}getEnumsMap(){return new Map([...this.flattener.enumNameToValuesMap.entries()].map(([r,e])=>[r,(0,Nw.cloneDeep)(e)]))}toJSON(){return JSON.stringify({customTypes:za(this.getCustomTypesMap()),enums:za(this.getEnumsMap())},null,4)}};function k5(r,e){let t=new Map(r.propertyTypes.filter(s=>s.type==="enum").map(s=>[s.name,new Ww(s.values,s.valuesAsFlags)])),i=new Map(r.propertyTypes.filter(s=>s.type==="class").map(s=>[s.name,s.members])),n=new j5(i,t,e);return i.forEach((s,u)=>{n.flattenMembers(u,s)}),new I5(n)}var Gw={parse:k5};var Ri=class{constructor(e,t){this.phaserTile=e;this.tiledProject=t}getProperty(e){let t={};if(this.tiledProject){let n=Gw.parse(this.tiledProject),s=this.getType();if(s){let u=n.getCustomTypesMap()?.get(s);if(u)for(let[l,h]of Object.entries(u))t[l]=h}}return this.phaserTile.properties[e]??t[e]}hasProperty(e){return this.getProperty(e)!=null}getType(){return this.phaserTile.tileset?.tileData[this.phaserTile.index-1]?.type}};var No=class{constructor(e,t){this.phaserTilemapLayer=e;this.tiledProject=t}getName(){return this.phaserTilemapLayer.layer.name}getProperty(e){return this.phaserTilemapLayer.layer.properties?.find(n=>n.name==e)?.value}hasProperty(e){return this.getProperty(e)!=null}isCharLayer(){return this.hasProperty(Do)}getData(){return this.phaserTilemapLayer.layer.data.map(e=>e.map(t=>new Ri(t,this.tiledProject)))}};var Na=class{constructor(e,t){this.phaserTilemap=e;this.tiledProject=t;for(let i of this.phaserTilemap.layers)if(i.tilemapLayer==null)throw new Error(`Error initializing tilemap. Layer '${i.name}' has no 'tilemapLayer'. This can happen if you call 'createLayer' with the wrong layer ID.`)}getTileWidth(){return this.phaserTilemap.tileWidth}getTileHeight(){return this.phaserTilemap.tileHeight}getWidth(){return this.phaserTilemap.width}getHeight(){return this.phaserTilemap.height}getOrientation(){return this.phaserTilemap.orientation==Phaser.Tilemaps.Orientation.ISOMETRIC.toString()?"isometric":"orthogonal"}getLayers(){return this.phaserTilemap.layers.map(e=>new No(e.tilemapLayer,this.tiledProject))}hasTileAt(e,t,i){return!!this.phaserTilemap.hasTileAt(e,t,i)}getTileAt(e,t,i){let n=this.phaserTilemap.getTileAt(e,t,!1,i);if(n)return new Ri(n,this.tiledProject)}};var zf=class{constructor(e,t="orthogonal",i="ge_collide"){this.map=e;this.orientation=t;this.layerMap=new Map;this.layers=[];let n=-1,s=-1;Object.entries(e).map(([u,l])=>{let h=l.data[0]?.length,p=l.data.length;if(n!==-1&&n!==h||s!==-1&&s!==p)throw new Error("All tilemap layers must have the same dimensions.");n=h,s=p;let v=[];for(let T=0;T<l.data.length;T++){let S=[];for(let E=0;E<l.data[T].length;E++){let M=new Om(l.data[T][E]===1,i);S.push(M)}v.push(S)}let b=new wm(u,v,l.isCharLayer);this.layers.push(b),this.layerMap.set(u,b)})}getWidth(){return Object.values(this.map)[0]?.data[0]?.length||0}getHeight(){return Object.values(this.map)[0]?.data.length||0}getOrientation(){return this.orientation}getLayers(){return this.layers}hasTileAt(e,t,i){return!i||!this.layerMap.get(i)?!1:e>=0&&e<this.getWidth()&&t>=0&&t<this.getHeight()}getTileAt(e,t,i){if(!i)return;let n=this.layerMap.get(i);if(n)return n.getData()[t][e]}},wm=class{constructor(e,t,i=!1){this.name=e;this.tiles=t;this.isCharLayerInternal=i}getName(){return this.name}getProperty(e){if(e==="ge_charLayer"&&this.isCharLayerInternal)return this.name}hasProperty(e){return e==="ge_charLayer"&&this.isCharLayerInternal}getData(){return this.tiles}isCharLayer(){return this.isCharLayerInternal}},Om=class{constructor(e,t){this.isBlocking=e;this.collisionPropertyName=t}getProperty(e){return e===this.collisionPropertyName?this.isBlocking:!1}hasProperty(e){return e===this.collisionPropertyName}};var Vo=class{constructor(e,t){this.props={};let i=e.find(s=>{if(!s.tiles)return!1;let u=s.firstgid??0;return!!s.tiles.find(h=>h.id+u===t)});if(!i)return;let n=i.tiles?.find(s=>s.id+(i.firstgid??0)===t);if(n?.properties)for(let s of n.properties)s.name&&(this.props[s.name]=s.value)}getProperty(e){return this.props[e]}hasProperty(e){return this.props[e]!==void 0}};var Wo=class{constructor(e,t){this.layer=t;this.data=[];if(this.data=[],this.layer.data)for(let i=0;i<(this.layer.height||0);i++){let n=[];for(let s=0;s<(this.layer.width||0);s++){let u=this.layer.data[i*(this.layer.width||0)+s];u!==void 0?n.push(new Vo(e,u)):n.push(void 0)}this.data.push(n)}}getName(){return this.layer.name}getProperty(e){return this.layer.properties?.find(t=>t.name===e)?.value}hasProperty(e){return this.getProperty(e)!==void 0}getData(){return this.data}isCharLayer(){return this.hasProperty("ge_charLayer")}};var Nf=class{constructor(e){this.rawTilemap=e;this.layers=[];this.layers=this.rawTilemap.layers?.map(t=>new Wo(this.rawTilemap.tilesets,t))}hasTileAt(e,t,i){if(e<0||e>=this.rawTilemap.width||t<0||t>=this.rawTilemap.height||!this.rawTilemap.layers)return!1;let n=this.rawTilemap.layers.find(u=>u.name===i);if(!n)return!1;let s=t*this.rawTilemap.width+e;return n.data[s]>0}getTileAt(e,t,i){if(e<0||e>=this.rawTilemap.width||t<0||t>=this.rawTilemap.height||!this.rawTilemap.layers)return;let n=this.layers.find(s=>s.getName()===i);if(n)return n.getData()[t][e]}getOrientation(){return this.rawTilemap.orientation}getLayers(){return this.layers}getWidth(){return this.rawTilemap.width}getHeight(){return this.rawTilemap.height}};var Va=class r{constructor(e){this.scene=e;this.geHeadless=new Ra(!1);this.isCreatedInternal=!1;r.welcomeMessagePrinted||(console.log(`Using GridEngine Phaser Plugin v${qf}`),r.welcomeMessagePrinted=!0),this.scene.sys.events.once("boot",this.boot,this)}static{this.welcomeMessagePrinted=!1}boot(){this.scene.sys.events.on("update",this.update,this)}getCharLayer(e){return this.geHeadless.getCharLayer(e)}getTransition(e,t){return this.geHeadless.getTransition(e,t)}setTransition(e,t,i){this.geHeadless.setTransition(e,t,i)}create(e,t){this.geHeadless.create(new Na(e,t.tiledProject),t),this.isCreatedInternal=!0,this.gridCharacters=new Map;let i=this.setConfigDefaults(t);this.config=i,this.gridTilemap=new un(e),this.addCharacters()}getPosition(e){return this.geHeadless.getPosition(e)}move(e,t){this.geHeadless.move(e,t)}moveRandomly(e,t=0,i=-1){this.geHeadless.moveRandomly(e,t,i)}getMovement(e){return this.geHeadless.getMovement(e)}moveTo(e,t,i){return this.geHeadless.moveTo(e,t,i)}stopMovement(e){this.geHeadless.stopMovement(e)}setSpeed(e,t){this.geHeadless.setSpeed(e,t)}getSpeed(e){return this.geHeadless.getSpeed(e)}setContainer(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setContainer(t)}getContainer(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getContainer()}getOffsetX(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getOffsetX()}setOffsetX(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setOffsetX(t)}getOffsetY(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getOffsetY()}setOffsetY(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setOffsetY(t)}collidesWithTiles(e){return this.geHeadless.collidesWithTiles(e)}getWalkingAnimationMapping(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getAnimation()?.getWalkingAnimationMapping()}hasLayerOverlay(){return this.initGuard(),!!this.config?.layerOverlay}setWalkingAnimationMapping(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.getAnimation()?.setWalkingAnimationMapping(t)}update(e,t){if(this.isCreatedInternal&&this.gridCharacters)for(let[i,n]of this.gridCharacters)n.update(t);this.geHeadless.update(e,t)}addCharacter(e){this.geHeadless.addCharacter(e),this.addCharacterInternal(e)}hasCharacter(e){return this.geHeadless.hasCharacter(e)}removeCharacter(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.destroy(),this.gridCharacters?.delete(e),this.geHeadless.removeCharacter(e)}removeAllCharacters(){if(this.initGuard(),!!this.gridCharacters){for(let e of this.gridCharacters.keys())this.removeCharacter(e);this.geHeadless.removeAllCharacters()}}getAllCharacters(e){return this.geHeadless.getAllCharacters(e)}getLabels(e){return this.geHeadless.getLabels(e)}addLabels(e,t){this.geHeadless.addLabels(e,t)}removeLabels(e,t){this.geHeadless.removeLabels(e,t)}clearLabels(e){this.geHeadless.clearLabels(e)}follow(e,t,i,n){let s;i===void 0?s={distance:0,closestPointIfBlocked:!1}:typeof i=="number"?(s={distance:i,closestPointIfBlocked:!1},n&&(s.closestPointIfBlocked=!0)):s=i,this.geHeadless.follow(e,t,s)}isMoving(e){return this.geHeadless.isMoving(e)}getFacingDirection(e){return this.geHeadless.getFacingDirection(e)}getFacingPosition(e){return this.geHeadless.getFacingPosition(e)}turnTowards(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.turnTowards(t),this.geHeadless.turnTowards(e,t)}getCharactersAt(e,t){return this.geHeadless.getCharactersAt(e,t)}setPosition(e,t,i){this.geHeadless.setPosition(e,t,i)}getSprite(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getSprite()}setSprite(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);t.setOrigin(0,0),i.setSprite(t)}isBlocked(e,t,i=["geDefault"]){return this.geHeadless.isBlocked(e,t,i)}isTileBlocked(e,t){return this.geHeadless.isTileBlocked(e,t)}getCollisionGroups(e){return this.geHeadless.getCollisionGroups(e)}setCollisionGroups(e,t){this.geHeadless.setCollisionGroups(e,t)}getIgnoreCollisionGroups(e){return this.geHeadless.getIgnoreCollisionGroups(e)}setIgnoreCollisionGroups(e,t){this.geHeadless.setIgnoreCollisionGroups(e,t)}getTilePosInDirection(e,t,i){return this.geHeadless.getTilePosInDirection(e,t,i)}findShortestPath(e,t,i={}){return this.geHeadless.findShortestPath(e,t,i)}steppedOn(e,t,i){return this.geHeadless.steppedOn(e,t,i)}characterShifted(){return this.geHeadless.characterShifted()}movementStarted(){return this.geHeadless.movementStarted()}movementStopped(){return this.geHeadless.movementStopped()}directionChanged(){return this.geHeadless.directionChanged()}positionChangeStarted(){return this.geHeadless.positionChangeStarted()}positionChangeFinished(){return this.geHeadless.positionChangeFinished()}getMovementProgress(e){return this.geHeadless.getMovementProgress(e)}rebuildTileCollisionCache(e,t,i,n){this.geHeadless.rebuildTileCollisionCache(e,t,i,n)}addQueueMovements(e,t,i){this.geHeadless.addQueueMovements(e,t,i)}getEnqueuedMovements(e){return this.geHeadless.getEnqueuedMovements(e)}queueMovementFinished(){return this.geHeadless.queueMovementFinished()}clearEnqueuedMovements(e){return this.geHeadless.clearEnqueuedMovements(e)}getState(){return{characters:this.geHeadless.getState().characters.map(e=>({...e,offsetX:this.getOffsetX(e.id),offsetY:this.getOffsetY(e.id)}))}}setState(e){if(this.geHeadless.setState(e),this.gridCharacters)for(let t of e.characters){let i=this.gridCharacters.get(t.id);i&&(i.setOffsetX(t.offsetX),i.setOffsetY(t.offsetY))}}getTileCost(e,t,i){return this.initGuard(),this.geHeadless.getTileCost(e,t,i)}setConfigDefaults(e){return{collisionTilePropertyName:"ge_collide",numberOfDirections:4,characterCollisionStrategy:"BLOCK_TWO_TILES",layerOverlay:!1,cacheTileCollisions:!1,...e}}initGuard(){if(!this.isCreatedInternal)throw this.createUninitializedErr()}createUninitializedErr(){throw new Error("GridEngine not initialized. You need to call create() first.")}addCharacters(){this.config?.characters.forEach(e=>this.addCharacterInternal(e))}createCharUnknownErr(e){return new Error(`Character unknown: ${e}`)}addCharacterInternal(e){if(this.initGuard(),!this.gridTilemap)throw this.createUninitializedErr();if(!this.config)throw this.createUninitializedErr();let t=new sf(e,this.scene,this.gridTilemap,this.config.layerOverlay,this.geHeadless);this.gridCharacters?.set(e.id,t)}};var F5=Va;0&&(module.exports={ArrayTilemap,CharacterShiftAction,CollisionStrategy,Direction,GridEngine,GridEngineHeadless,MoveToResult,NoPathFoundStrategy,NumberOfDirections,PathBlockedStrategy,PhaserTile,PhaserTileLayer,PhaserTilemap,QueuedPathBlockedStrategy,TiledLayer,TiledTile,TiledTilemap,directionFromPos});
/*! Bundled license information:

tiled-property-flattener/dist/tiled_property_flattener.min.js:
  (*! Bundled license information:
  
  lodash/lodash.js:
    (**
     * @license
     * Lodash <https://lodash.com/>
     * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
     * Released under MIT license <https://lodash.com/license>
     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
     * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     *)
  *)
*/
