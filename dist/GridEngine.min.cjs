var NM=Object.create;var Fs=Object.defineProperty;var VM=Object.getOwnPropertyDescriptor;var WM=Object.getOwnPropertyNames;var UM=Object.getPrototypeOf,GM=Object.prototype.hasOwnProperty;var _=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),BM=(r,e)=>{for(var t in e)Fs(r,t,{get:e[t],enumerable:!0})},tb=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of WM(e))!GM.call(r,n)&&n!==t&&Fs(r,n,{get:()=>e[n],enumerable:!(i=VM(e,n))||i.enumerable});return r};var bt=(r,e,t)=>(t=r!=null?NM(UM(r)):{},tb(e||!r||!r.__esModule?Fs(t,"default",{value:r,enumerable:!0}):t,r)),HM=r=>tb(Fs({},"__esModule",{value:!0}),r);var le=_(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.isFunction=void 0;function KM(r){return typeof r=="function"}Ds.isFunction=KM});var si=_(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.createErrorClass=void 0;function XM(r){var e=function(i){Error.call(i),i.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}ks.createErrorClass=XM});var lp=_(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.UnsubscriptionError=void 0;var JM=si();Rs.UnsubscriptionError=JM.createErrorClass(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(i,n){return n+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}})});var Nr=_(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.arrRemove=void 0;function ZM(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}zs.arrRemove=ZM});var xt=_(_t=>{"use strict";var ab=_t&&_t.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sb=_t&&_t.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},ub=_t&&_t.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(_t,"__esModule",{value:!0});_t.isSubscription=_t.EMPTY_SUBSCRIPTION=_t.Subscription=void 0;var da=le(),fp=lp(),cb=Nr(),hp=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,i,n,s;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=ab(c),h=l.next();!h.done;h=l.next()){var p=h.value;p.remove(this)}}catch(M){e={error:M}}finally{try{h&&!h.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else c.remove(this);var v=this.initialTeardown;if(da.isFunction(v))try{v()}catch(M){s=M instanceof fp.UnsubscriptionError?M.errors:[M]}var b=this._finalizers;if(b){this._finalizers=null;try{for(var w=ab(b),T=w.next();!T.done;T=w.next()){var E=T.value;try{lb(E)}catch(M){s=s??[],M instanceof fp.UnsubscriptionError?s=ub(ub([],sb(s)),sb(M.errors)):s.push(M)}}}catch(M){i={error:M}}finally{try{T&&!T.done&&(n=w.return)&&n.call(w)}finally{if(i)throw i.error}}}if(s)throw new fp.UnsubscriptionError(s)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)lb(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&cb.arrRemove(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&cb.arrRemove(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}();_t.Subscription=hp;_t.EMPTY_SUBSCRIPTION=hp.EMPTY;function ex(r){return r instanceof hp||r&&"closed"in r&&da.isFunction(r.remove)&&da.isFunction(r.add)&&da.isFunction(r.unsubscribe)}_t.isSubscription=ex;function lb(r){da.isFunction(r)?r():r.unsubscribe()}});var xn=_(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.config=void 0;Ns.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}});var pp=_(lr=>{"use strict";var fb=lr&&lr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},hb=lr&&lr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(lr,"__esModule",{value:!0});lr.timeoutProvider=void 0;lr.timeoutProvider={setTimeout:function(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];var n=lr.timeoutProvider.delegate;return n?.setTimeout?n.setTimeout.apply(n,hb([r,e],fb(t))):setTimeout.apply(void 0,hb([r,e],fb(t)))},clearTimeout:function(r){var e=lr.timeoutProvider.delegate;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0}});var dp=_(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.reportUnhandledError=void 0;var tx=xn(),rx=pp();function ix(r){rx.timeoutProvider.setTimeout(function(){var e=tx.config.onUnhandledError;if(e)e(r);else throw r})}Vs.reportUnhandledError=ix});var Qe=_(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.noop=void 0;function nx(){}Ws.noop=nx});var pb=_(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.createNotification=fr.nextNotification=fr.errorNotification=fr.COMPLETE_NOTIFICATION=void 0;fr.COMPLETE_NOTIFICATION=function(){return Us("C",void 0,void 0)}();function ox(r){return Us("E",void 0,r)}fr.errorNotification=ox;function ax(r){return Us("N",r,void 0)}fr.nextNotification=ax;function Us(r,e,t){return{kind:r,value:e,error:t}}fr.createNotification=Us});var Gs=_(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.captureError=Ln.errorContext=void 0;var db=xn(),Qi=null;function sx(r){if(db.config.useDeprecatedSynchronousErrorHandling){var e=!Qi;if(e&&(Qi={errorThrown:!1,error:null}),r(),e){var t=Qi,i=t.errorThrown,n=t.error;if(Qi=null,i)throw n}}else r()}Ln.errorContext=sx;function ux(r){db.config.useDeprecatedSynchronousErrorHandling&&Qi&&(Qi.errorThrown=!0,Qi.error=r)}Ln.captureError=ux});var jn=_(Jt=>{"use strict";var yb=Jt&&Jt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Jt,"__esModule",{value:!0});Jt.EMPTY_OBSERVER=Jt.SafeSubscriber=Jt.Subscriber=void 0;var cx=le(),vb=xt(),gp=xn(),lx=dp(),mb=Qe(),vp=pb(),fx=pp(),hx=Gs(),gb=function(r){yb(e,r);function e(t){var i=r.call(this)||this;return i.isStopped=!1,t?(i.destination=t,vb.isSubscription(t)&&t.add(i)):i.destination=Jt.EMPTY_OBSERVER,i}return e.create=function(t,i,n){return new bb(t,i,n)},e.prototype.next=function(t){this.isStopped?yp(vp.nextNotification(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?yp(vp.errorNotification(t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?yp(vp.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(vb.Subscription);Jt.Subscriber=gb;var px=Function.prototype.bind;function mp(r,e){return px.call(r,e)}var dx=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(i){Bs(i)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(i){Bs(i)}else Bs(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Bs(t)}},r}(),bb=function(r){yb(e,r);function e(t,i,n){var s=r.call(this)||this,c;if(cx.isFunction(t)||!t)c={next:t??void 0,error:i??void 0,complete:n??void 0};else{var l;s&&gp.config.useDeprecatedNextContext?(l=Object.create(t),l.unsubscribe=function(){return s.unsubscribe()},c={next:t.next&&mp(t.next,l),error:t.error&&mp(t.error,l),complete:t.complete&&mp(t.complete,l)}):c=t}return s.destination=new dx(c),s}return e}(gb);Jt.SafeSubscriber=bb;function Bs(r){gp.config.useDeprecatedSynchronousErrorHandling?hx.captureError(r):lx.reportUnhandledError(r)}function vx(r){throw r}function yp(r,e){var t=gp.config.onStoppedNotification;t&&fx.timeoutProvider.setTimeout(function(){return t(r,e)})}Jt.EMPTY_OBSERVER={closed:!0,next:mb.noop,error:vx,complete:mb.noop}});var va=_(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.observable=void 0;Hs.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var Ke=_($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.identity=void 0;function mx(r){return r}$s.identity=mx});var ma=_(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.pipeFromArray=In.pipe=void 0;var yx=Ke();function gx(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return _b(r)}In.pipe=gx;function _b(r){return r.length===0?yx.identity:r.length===1?r[0]:function(t){return r.reduce(function(i,n){return n(i)},t)}}In.pipeFromArray=_b});var he=_(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Observable=void 0;var _p=jn(),bx=xt(),_x=va(),Px=ma(),wx=xn(),bp=le(),Ox=Gs(),Sx=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,i){var n=this,s=Cx(e)?e:new _p.SafeSubscriber(e,t,i);return Ox.errorContext(function(){var c=n,l=c.operator,h=c.source;s.add(l?l.call(s,h):h?n._subscribe(s):n._trySubscribe(s))}),s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var i=this;return t=Pb(t),new t(function(n,s){var c=new _p.SafeSubscriber({next:function(l){try{e(l)}catch(h){s(h),c.unsubscribe()}},error:s,complete:n});i.subscribe(c)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[_x.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Px.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=Pb(e),new e(function(i,n){var s;t.subscribe(function(c){return s=c},function(c){return n(c)},function(){return i(s)})})},r.create=function(e){return new r(e)},r}();Ys.Observable=Sx;function Pb(r){var e;return(e=r??wx.config.Promise)!==null&&e!==void 0?e:Promise}function Tx(r){return r&&bp.isFunction(r.next)&&bp.isFunction(r.error)&&bp.isFunction(r.complete)}function Cx(r){return r&&r instanceof _p.Subscriber||Tx(r)&&bx.isSubscription(r)}});var z=_(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.operate=Fn.hasLift=void 0;var Ax=le();function wb(r){return Ax.isFunction(r?.lift)}Fn.hasLift=wb;function Ex(r){return function(e){if(wb(e))return e.lift(function(t){try{return r(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}Fn.operate=Ex});var U=_(ui=>{"use strict";var qx=ui&&ui.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(ui,"__esModule",{value:!0});ui.OperatorSubscriber=ui.createOperatorSubscriber=void 0;var Mx=jn();function xx(r,e,t,i,n){return new Ob(r,e,t,i,n)}ui.createOperatorSubscriber=xx;var Ob=function(r){qx(e,r);function e(t,i,n,s,c,l){var h=r.call(this,t)||this;return h.onFinalize=c,h.shouldUnsubscribe=l,h._next=i?function(p){try{i(p)}catch(v){t.error(v)}}:r.prototype._next,h._error=s?function(p){try{s(p)}catch(v){t.error(v)}finally{this.unsubscribe()}}:r.prototype._error,h._complete=n?function(){try{n()}catch(p){t.error(p)}finally{this.unsubscribe()}}:r.prototype._complete,h}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;r.prototype.unsubscribe.call(this),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(Mx.Subscriber);ui.OperatorSubscriber=Ob});var Ks=_(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.refCount=void 0;var Lx=z(),jx=U();function Ix(){return Lx.operate(function(r,e){var t=null;r._refCount++;var i=jx.createOperatorSubscriber(e,void 0,void 0,void 0,function(){if(!r||r._refCount<=0||0<--r._refCount){t=null;return}var n=r._connection,s=t;t=null,n&&(!s||n===s)&&n.unsubscribe(),e.unsubscribe()});r.subscribe(i),i.closed||(t=r.connect())})}Qs.refCount=Ix});var ya=_(Dn=>{"use strict";var Fx=Dn&&Dn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.ConnectableObservable=void 0;var Dx=he(),Sb=xt(),kx=Ks(),Rx=U(),zx=z(),Nx=function(r){Fx(e,r);function e(t,i){var n=r.call(this)||this;return n.source=t,n.subjectFactory=i,n._subject=null,n._refCount=0,n._connection=null,zx.hasLift(t)&&(n.lift=t.lift),n}return e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t?.unsubscribe()},e.prototype.connect=function(){var t=this,i=this._connection;if(!i){i=this._connection=new Sb.Subscription;var n=this.getSubject();i.add(this.source.subscribe(Rx.createOperatorSubscriber(n,void 0,function(){t._teardown(),n.complete()},function(s){t._teardown(),n.error(s)},function(){return t._teardown()}))),i.closed&&(this._connection=null,i=Sb.Subscription.EMPTY)}return i},e.prototype.refCount=function(){return kx.refCount()(this)},e}(Dx.Observable);Dn.ConnectableObservable=Nx});var Tb=_(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.performanceTimestampProvider=void 0;ga.performanceTimestampProvider={now:function(){return(ga.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}});var Pp=_(Zt=>{"use strict";var Cb=Zt&&Zt.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},Ab=Zt&&Zt.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.animationFrameProvider=void 0;var Vx=xt();Zt.animationFrameProvider={schedule:function(r){var e=requestAnimationFrame,t=cancelAnimationFrame,i=Zt.animationFrameProvider.delegate;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);var n=e(function(s){t=void 0,r(s)});return new Vx.Subscription(function(){return t?.(n)})},requestAnimationFrame:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Zt.animationFrameProvider.delegate;return(t?.requestAnimationFrame||requestAnimationFrame).apply(void 0,Ab([],Cb(r)))},cancelAnimationFrame:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Zt.animationFrameProvider.delegate;return(t?.cancelAnimationFrame||cancelAnimationFrame).apply(void 0,Ab([],Cb(r)))},delegate:void 0}});var Mb=_(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.animationFrames=void 0;var Wx=he(),Ux=Tb(),Eb=Pp();function Gx(r){return r?qb(r):Bx}Xs.animationFrames=Gx;function qb(r){return new Wx.Observable(function(e){var t=r||Ux.performanceTimestampProvider,i=t.now(),n=0,s=function(){e.closed||(n=Eb.animationFrameProvider.requestAnimationFrame(function(c){n=0;var l=t.now();e.next({timestamp:r?l:c,elapsed:l-i}),s()}))};return s(),function(){n&&Eb.animationFrameProvider.cancelAnimationFrame(n)}})}var Bx=qb()});var wp=_(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.ObjectUnsubscribedError=void 0;var Hx=si();Js.ObjectUnsubscribedError=Hx.createErrorClass(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})});var Xe=_(hr=>{"use strict";var Lb=hr&&hr.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$x=hr&&hr.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(hr,"__esModule",{value:!0});hr.AnonymousSubject=hr.Subject=void 0;var xb=he(),Sp=xt(),Yx=wp(),Qx=Nr(),Op=Gs(),jb=function(r){Lb(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var i=new Tp(this,this);return i.operator=t,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new Yx.ObjectUnsubscribedError},e.prototype.next=function(t){var i=this;Op.errorContext(function(){var n,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var c=$x(i.currentObservers),l=c.next();!l.done;l=c.next()){var h=l.value;h.next(t)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}}})},e.prototype.error=function(t){var i=this;Op.errorContext(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=t;for(var n=i.observers;n.length;)n.shift().error(t)}})},e.prototype.complete=function(){var t=this;Op.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var i=t.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var i=this,n=this,s=n.hasError,c=n.isStopped,l=n.observers;return s||c?Sp.EMPTY_SUBSCRIPTION:(this.currentObservers=null,l.push(t),new Sp.Subscription(function(){i.currentObservers=null,Qx.arrRemove(l,t)}))},e.prototype._checkFinalizedStatuses=function(t){var i=this,n=i.hasError,s=i.thrownError,c=i.isStopped;n?t.error(s):c&&t.complete()},e.prototype.asObservable=function(){var t=new xb.Observable;return t.source=this,t},e.create=function(t,i){return new Tp(t,i)},e}(xb.Observable);hr.Subject=jb;var Tp=function(r){Lb(e,r);function e(t,i){var n=r.call(this)||this;return n.destination=t,n.source=i,n}return e.prototype.next=function(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.next)===null||n===void 0||n.call(i,t)},e.prototype.error=function(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.error)===null||n===void 0||n.call(i,t)},e.prototype.complete=function(){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||i===void 0||i.call(t)},e.prototype._subscribe=function(t){var i,n;return(n=(i=this.source)===null||i===void 0?void 0:i.subscribe(t))!==null&&n!==void 0?n:Sp.EMPTY_SUBSCRIPTION},e}(jb);hr.AnonymousSubject=Tp});var Cp=_(kn=>{"use strict";var Kx=kn&&kn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(kn,"__esModule",{value:!0});kn.BehaviorSubject=void 0;var Xx=Xe(),Jx=function(r){Kx(e,r);function e(t){var i=r.call(this)||this;return i._value=t,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var i=r.prototype._subscribe.call(this,t);return!i.closed&&t.next(this._value),i},e.prototype.getValue=function(){var t=this,i=t.hasError,n=t.thrownError,s=t._value;if(i)throw n;return this._throwIfClosed(),s},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(Xx.Subject);kn.BehaviorSubject=Jx});var Zs=_(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.dateTimestampProvider=void 0;ba.dateTimestampProvider={now:function(){return(ba.dateTimestampProvider.delegate||Date).now()},delegate:void 0}});var eu=_(Rn=>{"use strict";var Zx=Rn&&Rn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Rn,"__esModule",{value:!0});Rn.ReplaySubject=void 0;var eL=Xe(),tL=Zs(),rL=function(r){Zx(e,r);function e(t,i,n){t===void 0&&(t=1/0),i===void 0&&(i=1/0),n===void 0&&(n=tL.dateTimestampProvider);var s=r.call(this)||this;return s._bufferSize=t,s._windowTime=i,s._timestampProvider=n,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=i===1/0,s._bufferSize=Math.max(1,t),s._windowTime=Math.max(1,i),s}return e.prototype.next=function(t){var i=this,n=i.isStopped,s=i._buffer,c=i._infiniteTimeWindow,l=i._timestampProvider,h=i._windowTime;n||(s.push(t),!c&&s.push(l.now()+h)),this._trimBuffer(),r.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var i=this._innerSubscribe(t),n=this,s=n._infiniteTimeWindow,c=n._buffer,l=c.slice(),h=0;h<l.length&&!t.closed;h+=s?1:2)t.next(l[h]);return this._checkFinalizedStatuses(t),i},e.prototype._trimBuffer=function(){var t=this,i=t._bufferSize,n=t._timestampProvider,s=t._buffer,c=t._infiniteTimeWindow,l=(c?1:2)*i;if(i<1/0&&l<s.length&&s.splice(0,s.length-l),!c){for(var h=n.now(),p=0,v=1;v<s.length&&s[v]<=h;v+=2)p=v;p&&s.splice(0,p+1)}},e}(eL.Subject);Rn.ReplaySubject=rL});var tu=_(zn=>{"use strict";var iL=zn&&zn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(zn,"__esModule",{value:!0});zn.AsyncSubject=void 0;var nL=Xe(),oL=function(r){iL(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return e.prototype._checkFinalizedStatuses=function(t){var i=this,n=i.hasError,s=i._hasValue,c=i._value,l=i.thrownError,h=i.isStopped,p=i._isComplete;n?t.error(l):(h||p)&&(s&&t.next(c),t.complete())},e.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},e.prototype.complete=function(){var t=this,i=t._hasValue,n=t._value,s=t._isComplete;s||(this._isComplete=!0,i&&r.prototype.next.call(this,n),r.prototype.complete.call(this))},e}(nL.Subject);zn.AsyncSubject=oL});var Ib=_(Nn=>{"use strict";var aL=Nn&&Nn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Nn,"__esModule",{value:!0});Nn.Action=void 0;var sL=xt(),uL=function(r){aL(e,r);function e(t,i){return r.call(this)||this}return e.prototype.schedule=function(t,i){return i===void 0&&(i=0),this},e}(sL.Subscription);Nn.Action=uL});var kb=_(pr=>{"use strict";var Fb=pr&&pr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},Db=pr&&pr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(pr,"__esModule",{value:!0});pr.intervalProvider=void 0;pr.intervalProvider={setInterval:function(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];var n=pr.intervalProvider.delegate;return n?.setInterval?n.setInterval.apply(n,Db([r,e],Fb(t))):setInterval.apply(void 0,Db([r,e],Fb(t)))},clearInterval:function(r){var e=pr.intervalProvider.delegate;return(e?.clearInterval||clearInterval)(r)},delegate:void 0}});var Wn=_(Vn=>{"use strict";var cL=Vn&&Vn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Vn,"__esModule",{value:!0});Vn.AsyncAction=void 0;var lL=Ib(),Rb=kb(),fL=Nr(),hL=function(r){cL(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n.pending=!1,n}return e.prototype.schedule=function(t,i){var n;if(i===void 0&&(i=0),this.closed)return this;this.state=t;var s=this.id,c=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(c,s,i)),this.pending=!0,this.delay=i,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(c,this.id,i),this},e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),Rb.intervalProvider.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,i,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return i;i!=null&&Rb.intervalProvider.clearInterval(i)},e.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,i);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,i){var n=!1,s;try{this.work(t)}catch(c){n=!0,s=c||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,i=t.id,n=t.scheduler,s=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,fL.arrRemove(s,this),i!=null&&(this.id=this.recycleAsyncId(n,i,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},e}(lL.Action);Vn.AsyncAction=hL});var Nb=_(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.TestTools=Un.Immediate=void 0;var pL=1,Ap,ru={};function zb(r){return r in ru?(delete ru[r],!0):!1}Un.Immediate={setImmediate:function(r){var e=pL++;return ru[e]=!0,Ap||(Ap=Promise.resolve()),Ap.then(function(){return zb(e)&&r()}),e},clearImmediate:function(r){zb(r)}};Un.TestTools={pending:function(){return Object.keys(ru).length}}});var Wb=_(dr=>{"use strict";var dL=dr&&dr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},vL=dr&&dr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(dr,"__esModule",{value:!0});dr.immediateProvider=void 0;var Vb=Nb(),mL=Vb.Immediate.setImmediate,yL=Vb.Immediate.clearImmediate;dr.immediateProvider={setImmediate:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=dr.immediateProvider.delegate;return(t?.setImmediate||mL).apply(void 0,vL([],dL(r)))},clearImmediate:function(r){var e=dr.immediateProvider.delegate;return(e?.clearImmediate||yL)(r)},delegate:void 0}});var Gb=_(Gn=>{"use strict";var gL=Gn&&Gn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Gn,"__esModule",{value:!0});Gn.AsapAction=void 0;var bL=Wn(),Ub=Wb(),_L=function(r){gL(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,t,i,n):(t.actions.push(this),t._scheduled||(t._scheduled=Ub.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},e.prototype.recycleAsyncId=function(t,i,n){var s;if(n===void 0&&(n=0),n!=null?n>0:this.delay>0)return r.prototype.recycleAsyncId.call(this,t,i,n);var c=t.actions;i!=null&&((s=c[c.length-1])===null||s===void 0?void 0:s.id)!==i&&(Ub.immediateProvider.clearImmediate(i),t._scheduled===i&&(t._scheduled=void 0))},e}(bL.AsyncAction);Gn.AsapAction=_L});var Ep=_(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.Scheduler=void 0;var PL=Zs(),wL=function(){function r(e,t){t===void 0&&(t=r.now),this.schedulerActionCtor=e,this.now=t}return r.prototype.schedule=function(e,t,i){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(i,t)},r.now=PL.dateTimestampProvider.now,r}();iu.Scheduler=wL});var Hn=_(Bn=>{"use strict";var OL=Bn&&Bn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Bn,"__esModule",{value:!0});Bn.AsyncScheduler=void 0;var Bb=Ep(),SL=function(r){OL(e,r);function e(t,i){i===void 0&&(i=Bb.Scheduler.now);var n=r.call(this,t,i)||this;return n.actions=[],n._active=!1,n}return e.prototype.flush=function(t){var i=this.actions;if(this._active){i.push(t);return}var n;this._active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=i.shift());if(this._active=!1,n){for(;t=i.shift();)t.unsubscribe();throw n}},e}(Bb.Scheduler);Bn.AsyncScheduler=SL});var Hb=_($n=>{"use strict";var TL=$n&&$n.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty($n,"__esModule",{value:!0});$n.AsapScheduler=void 0;var CL=Hn(),AL=function(r){TL(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(t){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var n=this.actions,s;t=t||n.shift();do if(s=t.execute(t.state,t.delay))break;while((t=n[0])&&t.id===i&&n.shift());if(this._active=!1,s){for(;(t=n[0])&&t.id===i&&n.shift();)t.unsubscribe();throw s}},e}(CL.AsyncScheduler);$n.AsapScheduler=AL});var $b=_(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.asap=Ki.asapScheduler=void 0;var EL=Gb(),qL=Hb();Ki.asapScheduler=new qL.AsapScheduler(EL.AsapAction);Ki.asap=Ki.asapScheduler});var Pt=_(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.async=Xi.asyncScheduler=void 0;var ML=Wn(),xL=Hn();Xi.asyncScheduler=new xL.AsyncScheduler(ML.AsyncAction);Xi.async=Xi.asyncScheduler});var Yb=_(Yn=>{"use strict";var LL=Yn&&Yn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.QueueAction=void 0;var jL=Wn(),IL=function(r){LL(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return e.prototype.schedule=function(t,i){return i===void 0&&(i=0),i>0?r.prototype.schedule.call(this,t,i):(this.delay=i,this.state=t,this.scheduler.flush(this),this)},e.prototype.execute=function(t,i){return i>0||this.closed?r.prototype.execute.call(this,t,i):this._execute(t,i)},e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),n!=null&&n>0||n==null&&this.delay>0?r.prototype.requestAsyncId.call(this,t,i,n):(t.flush(this),0)},e}(jL.AsyncAction);Yn.QueueAction=IL});var Qb=_(Qn=>{"use strict";var FL=Qn&&Qn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.QueueScheduler=void 0;var DL=Hn(),kL=function(r){FL(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(DL.AsyncScheduler);Qn.QueueScheduler=kL});var Kb=_(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.queue=Ji.queueScheduler=void 0;var RL=Yb(),zL=Qb();Ji.queueScheduler=new zL.QueueScheduler(RL.QueueAction);Ji.queue=Ji.queueScheduler});var Jb=_(Kn=>{"use strict";var NL=Kn&&Kn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Kn,"__esModule",{value:!0});Kn.AnimationFrameAction=void 0;var VL=Wn(),Xb=Pp(),WL=function(r){NL(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,t,i,n):(t.actions.push(this),t._scheduled||(t._scheduled=Xb.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},e.prototype.recycleAsyncId=function(t,i,n){var s;if(n===void 0&&(n=0),n!=null?n>0:this.delay>0)return r.prototype.recycleAsyncId.call(this,t,i,n);var c=t.actions;i!=null&&((s=c[c.length-1])===null||s===void 0?void 0:s.id)!==i&&(Xb.animationFrameProvider.cancelAnimationFrame(i),t._scheduled=void 0)},e}(VL.AsyncAction);Kn.AnimationFrameAction=WL});var Zb=_(Xn=>{"use strict";var UL=Xn&&Xn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Xn,"__esModule",{value:!0});Xn.AnimationFrameScheduler=void 0;var GL=Hn(),BL=function(r){UL(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(t){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var n=this.actions,s;t=t||n.shift();do if(s=t.execute(t.state,t.delay))break;while((t=n[0])&&t.id===i&&n.shift());if(this._active=!1,s){for(;(t=n[0])&&t.id===i&&n.shift();)t.unsubscribe();throw s}},e}(GL.AsyncScheduler);Xn.AnimationFrameScheduler=BL});var e_=_(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.animationFrame=Zi.animationFrameScheduler=void 0;var HL=Jb(),$L=Zb();Zi.animationFrameScheduler=new $L.AnimationFrameScheduler(HL.AnimationFrameAction);Zi.animationFrame=Zi.animationFrameScheduler});var i_=_(ci=>{"use strict";var t_=ci&&ci.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(ci,"__esModule",{value:!0});ci.VirtualAction=ci.VirtualTimeScheduler=void 0;var YL=Wn(),QL=xt(),KL=Hn(),XL=function(r){t_(e,r);function e(t,i){t===void 0&&(t=r_),i===void 0&&(i=1/0);var n=r.call(this,t,function(){return n.frame})||this;return n.maxFrames=i,n.frame=0,n.index=-1,n}return e.prototype.flush=function(){for(var t=this,i=t.actions,n=t.maxFrames,s,c;(c=i[0])&&c.delay<=n&&(i.shift(),this.frame=c.delay,!(s=c.execute(c.state,c.delay))););if(s){for(;c=i.shift();)c.unsubscribe();throw s}},e.frameTimeFactor=10,e}(KL.AsyncScheduler);ci.VirtualTimeScheduler=XL;var r_=function(r){t_(e,r);function e(t,i,n){n===void 0&&(n=t.index+=1);var s=r.call(this,t,i)||this;return s.scheduler=t,s.work=i,s.index=n,s.active=!0,s.index=t.index=n,s}return e.prototype.schedule=function(t,i){if(i===void 0&&(i=0),Number.isFinite(i)){if(!this.id)return r.prototype.schedule.call(this,t,i);this.active=!1;var n=new e(this.scheduler,this.work);return this.add(n),n.schedule(t,i)}else return QL.Subscription.EMPTY},e.prototype.requestAsyncId=function(t,i,n){n===void 0&&(n=0),this.delay=t.frame+n;var s=t.actions;return s.push(this),s.sort(e.sortActions),1},e.prototype.recycleAsyncId=function(t,i,n){n===void 0&&(n=0)},e.prototype._execute=function(t,i){if(this.active===!0)return r.prototype._execute.call(this,t,i)},e.sortActions=function(t,i){return t.delay===i.delay?t.index===i.index?0:t.index>i.index?1:-1:t.delay>i.delay?1:-1},e}(YL.AsyncAction);ci.VirtualAction=r_});var er=_(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.empty=en.EMPTY=void 0;var n_=he();en.EMPTY=new n_.Observable(function(r){return r.complete()});function JL(r){return r?ZL(r):en.EMPTY}en.empty=JL;function ZL(r){return new n_.Observable(function(e){return r.schedule(function(){return e.complete()})})}});var _a=_(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.isScheduler=void 0;var ej=le();function tj(r){return r&&ej.isFunction(r.schedule)}nu.isScheduler=tj});var wt=_(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.popNumber=li.popScheduler=li.popResultSelector=void 0;var rj=le(),ij=_a();function qp(r){return r[r.length-1]}function nj(r){return rj.isFunction(qp(r))?r.pop():void 0}li.popResultSelector=nj;function oj(r){return ij.isScheduler(qp(r))?r.pop():void 0}li.popScheduler=oj;function aj(r,e){return typeof qp(r)=="number"?r.pop():e}li.popNumber=aj});var au=_(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.isArrayLike=void 0;ou.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var Mp=_(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.isPromise=void 0;var sj=le();function uj(r){return sj.isFunction(r?.then)}su.isPromise=uj});var xp=_(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.isInteropObservable=void 0;var cj=va(),lj=le();function fj(r){return lj.isFunction(r[cj.observable])}uu.isInteropObservable=fj});var Lp=_(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.isAsyncIterable=void 0;var hj=le();function pj(r){return Symbol.asyncIterator&&hj.isFunction(r?.[Symbol.asyncIterator])}cu.isAsyncIterable=pj});var jp=_(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.createInvalidObservableTypeError=void 0;function dj(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}lu.createInvalidObservableTypeError=dj});var Ip=_(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.iterator=Jn.getSymbolIterator=void 0;function o_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Jn.getSymbolIterator=o_;Jn.iterator=o_()});var Fp=_(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.isIterable=void 0;var vj=Ip(),mj=le();function yj(r){return mj.isFunction(r?.[vj.iterator])}fu.isIterable=yj});var hu=_(Ut=>{"use strict";var gj=Ut&&Ut.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(p){return function(v){return h([p,v])}}function h(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(v){p=[6,v],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Zn=Ut&&Ut.__await||function(r){return this instanceof Zn?(this.v=r,this):new Zn(r)},bj=Ut&&Ut.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,s=[];return n={},c("next"),c("throw"),c("return"),n[Symbol.asyncIterator]=function(){return this},n;function c(w){i[w]&&(n[w]=function(T){return new Promise(function(E,M){s.push([w,T,E,M])>1||l(w,T)})})}function l(w,T){try{h(i[w](T))}catch(E){b(s[0][3],E)}}function h(w){w.value instanceof Zn?Promise.resolve(w.value.v).then(p,v):b(s[0][2],w)}function p(w){l("next",w)}function v(w){l("throw",w)}function b(w,T){w(T),s.shift(),s.length&&l(s[0][0],s[0][1])}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.isReadableStreamLike=Ut.readableStreamLikeToAsyncGenerator=void 0;var _j=le();function Pj(r){return bj(this,arguments,function(){var t,i,n,s;return gj(this,function(c){switch(c.label){case 0:t=r.getReader(),c.label=1;case 1:c.trys.push([1,,9,10]),c.label=2;case 2:return[4,Zn(t.read())];case 3:return i=c.sent(),n=i.value,s=i.done,s?[4,Zn(void 0)]:[3,5];case 4:return[2,c.sent()];case 5:return[4,Zn(n)];case 6:return[4,c.sent()];case 7:return c.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Ut.readableStreamLikeToAsyncGenerator=Pj;function wj(r){return _j.isFunction(r?.getReader)}Ut.isReadableStreamLike=wj});var X=_(be=>{"use strict";var Oj=be&&be.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(c){c(s)})}return new(t||(t=Promise))(function(s,c){function l(v){try{p(i.next(v))}catch(b){c(b)}}function h(v){try{p(i.throw(v))}catch(b){c(b)}}function p(v){v.done?s(v.value):n(v.value).then(l,h)}p((i=i.apply(r,e||[])).next())})},Sj=be&&be.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(p){return function(v){return h([p,v])}}function h(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(v){p=[6,v],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Tj=be&&be.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Dp=="function"?Dp(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=r[s]&&function(c){return new Promise(function(l,h){c=r[s](c),n(l,h,c.done,c.value)})}}function n(s,c,l,h){Promise.resolve(h).then(function(p){s({value:p,done:l})},c)}},Dp=be&&be.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(be,"__esModule",{value:!0});be.fromReadableStreamLike=be.fromAsyncIterable=be.fromIterable=be.fromPromise=be.fromArrayLike=be.fromInteropObservable=be.innerFrom=void 0;var Cj=au(),Aj=Mp(),eo=he(),Ej=xp(),qj=Lp(),Mj=jp(),xj=Fp(),a_=hu(),Lj=le(),jj=dp(),Ij=va();function Fj(r){if(r instanceof eo.Observable)return r;if(r!=null){if(Ej.isInteropObservable(r))return s_(r);if(Cj.isArrayLike(r))return u_(r);if(Aj.isPromise(r))return c_(r);if(qj.isAsyncIterable(r))return kp(r);if(xj.isIterable(r))return l_(r);if(a_.isReadableStreamLike(r))return f_(r)}throw Mj.createInvalidObservableTypeError(r)}be.innerFrom=Fj;function s_(r){return new eo.Observable(function(e){var t=r[Ij.observable]();if(Lj.isFunction(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}be.fromInteropObservable=s_;function u_(r){return new eo.Observable(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}be.fromArrayLike=u_;function c_(r){return new eo.Observable(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,jj.reportUnhandledError)})}be.fromPromise=c_;function l_(r){return new eo.Observable(function(e){var t,i;try{for(var n=Dp(r),s=n.next();!s.done;s=n.next()){var c=s.value;if(e.next(c),e.closed)return}}catch(l){t={error:l}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}e.complete()})}be.fromIterable=l_;function kp(r){return new eo.Observable(function(e){Dj(r,e).catch(function(t){return e.error(t)})})}be.fromAsyncIterable=kp;function f_(r){return kp(a_.readableStreamLikeToAsyncGenerator(r))}be.fromReadableStreamLike=f_;function Dj(r,e){var t,i,n,s;return Oj(this,void 0,void 0,function(){var c,l;return Sj(this,function(h){switch(h.label){case 0:h.trys.push([0,5,6,11]),t=Tj(r),h.label=1;case 1:return[4,t.next()];case 2:if(i=h.sent(),!!i.done)return[3,4];if(c=i.value,e.next(c),e.closed)return[2];h.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=h.sent(),n={error:l},[3,11];case 6:return h.trys.push([6,,9,10]),i&&!i.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:h.sent(),h.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}});var Vr=_(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.executeSchedule=void 0;function kj(r,e,t,i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var s=e.schedule(function(){t(),n?r.add(this.schedule(null,i)):this.unsubscribe()},i);if(r.add(s),!n)return s}pu.executeSchedule=kj});var to=_(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.observeOn=void 0;var Rp=Vr(),Rj=z(),zj=U();function Nj(r,e){return e===void 0&&(e=0),Rj.operate(function(t,i){t.subscribe(zj.createOperatorSubscriber(i,function(n){return Rp.executeSchedule(i,r,function(){return i.next(n)},e)},function(){return Rp.executeSchedule(i,r,function(){return i.complete()},e)},function(n){return Rp.executeSchedule(i,r,function(){return i.error(n)},e)}))})}du.observeOn=Nj});var ro=_(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.subscribeOn=void 0;var Vj=z();function Wj(r,e){return e===void 0&&(e=0),Vj.operate(function(t,i){i.add(r.schedule(function(){return t.subscribe(i)},e))})}vu.subscribeOn=Wj});var h_=_(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.scheduleObservable=void 0;var Uj=X(),Gj=to(),Bj=ro();function Hj(r,e){return Uj.innerFrom(r).pipe(Bj.subscribeOn(e),Gj.observeOn(e))}mu.scheduleObservable=Hj});var p_=_(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.schedulePromise=void 0;var $j=X(),Yj=to(),Qj=ro();function Kj(r,e){return $j.innerFrom(r).pipe(Qj.subscribeOn(e),Yj.observeOn(e))}yu.schedulePromise=Kj});var d_=_(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.scheduleArray=void 0;var Xj=he();function Jj(r,e){return new Xj.Observable(function(t){var i=0;return e.schedule(function(){i===r.length?t.complete():(t.next(r[i++]),t.closed||this.schedule())})})}gu.scheduleArray=Jj});var zp=_(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.scheduleIterable=void 0;var Zj=he(),eI=Ip(),tI=le(),v_=Vr();function rI(r,e){return new Zj.Observable(function(t){var i;return v_.executeSchedule(t,e,function(){i=r[eI.iterator](),v_.executeSchedule(t,e,function(){var n,s,c;try{n=i.next(),s=n.value,c=n.done}catch(l){t.error(l);return}c?t.complete():t.next(s)},0,!0)}),function(){return tI.isFunction(i?.return)&&i.return()}})}bu.scheduleIterable=rI});var Np=_(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.scheduleAsyncIterable=void 0;var iI=he(),m_=Vr();function nI(r,e){if(!r)throw new Error("Iterable cannot be null");return new iI.Observable(function(t){m_.executeSchedule(t,e,function(){var i=r[Symbol.asyncIterator]();m_.executeSchedule(t,e,function(){i.next().then(function(n){n.done?t.complete():t.next(n.value)})},0,!0)})})}_u.scheduleAsyncIterable=nI});var y_=_(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.scheduleReadableStreamLike=void 0;var oI=Np(),aI=hu();function sI(r,e){return oI.scheduleAsyncIterable(aI.readableStreamLikeToAsyncGenerator(r),e)}Pu.scheduleReadableStreamLike=sI});var Vp=_(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.scheduled=void 0;var uI=h_(),cI=p_(),lI=d_(),fI=zp(),hI=Np(),pI=xp(),dI=Mp(),vI=au(),mI=Fp(),yI=Lp(),gI=jp(),bI=hu(),_I=y_();function PI(r,e){if(r!=null){if(pI.isInteropObservable(r))return uI.scheduleObservable(r,e);if(vI.isArrayLike(r))return lI.scheduleArray(r,e);if(dI.isPromise(r))return cI.schedulePromise(r,e);if(yI.isAsyncIterable(r))return hI.scheduleAsyncIterable(r,e);if(mI.isIterable(r))return fI.scheduleIterable(r,e);if(bI.isReadableStreamLike(r))return _I.scheduleReadableStreamLike(r,e)}throw gI.createInvalidObservableTypeError(r)}wu.scheduled=PI});var Wr=_(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.from=void 0;var wI=Vp(),OI=X();function SI(r,e){return e?wI.scheduled(r,e):OI.innerFrom(r)}Ou.from=SI});var Tu=_(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.of=void 0;var TI=wt(),CI=Wr();function AI(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=TI.popScheduler(r);return CI.from(r,t)}Su.of=AI});var Wp=_(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.throwError=void 0;var EI=he(),qI=le();function MI(r,e){var t=qI.isFunction(r)?r:function(){return r},i=function(n){return n.error(t())};return new EI.Observable(e?function(n){return e.schedule(i,0,n)}:i)}Cu.throwError=MI});var Au=_(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.observeNotification=Ur.Notification=Ur.NotificationKind=void 0;var xI=er(),LI=Tu(),jI=Wp(),II=le(),FI;(function(r){r.NEXT="N",r.ERROR="E",r.COMPLETE="C"})(FI=Ur.NotificationKind||(Ur.NotificationKind={}));var DI=function(){function r(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue=e==="N"}return r.prototype.observe=function(e){return g_(this,e)},r.prototype.do=function(e,t,i){var n=this,s=n.kind,c=n.value,l=n.error;return s==="N"?e?.(c):s==="E"?t?.(l):i?.()},r.prototype.accept=function(e,t,i){var n;return II.isFunction((n=e)===null||n===void 0?void 0:n.next)?this.observe(e):this.do(e,t,i)},r.prototype.toObservable=function(){var e=this,t=e.kind,i=e.value,n=e.error,s=t==="N"?LI.of(i):t==="E"?jI.throwError(function(){return n}):t==="C"?xI.EMPTY:0;if(!s)throw new TypeError("Unexpected notification kind "+t);return s},r.createNext=function(e){return new r("N",e)},r.createError=function(e){return new r("E",void 0,e)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r}();Ur.Notification=DI;function g_(r,e){var t,i,n,s=r,c=s.kind,l=s.value,h=s.error;if(typeof c!="string")throw new TypeError('Invalid notification, missing "kind"');c==="N"?(t=e.next)===null||t===void 0||t.call(e,l):c==="E"?(i=e.error)===null||i===void 0||i.call(e,h):(n=e.complete)===null||n===void 0||n.call(e)}Ur.observeNotification=g_});var __=_(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.isObservable=void 0;var kI=he(),b_=le();function RI(r){return!!r&&(r instanceof kI.Observable||b_.isFunction(r.lift)&&b_.isFunction(r.subscribe))}Eu.isObservable=RI});var fi=_(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.EmptyError=void 0;var zI=si();qu.EmptyError=zI.createErrorClass(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}})});var P_=_(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.lastValueFrom=void 0;var NI=fi();function VI(r,e){var t=typeof e=="object";return new Promise(function(i,n){var s=!1,c;r.subscribe({next:function(l){c=l,s=!0},error:n,complete:function(){s?i(c):t?i(e.defaultValue):n(new NI.EmptyError)}})})}Mu.lastValueFrom=VI});var w_=_(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.firstValueFrom=void 0;var WI=fi(),UI=jn();function GI(r,e){var t=typeof e=="object";return new Promise(function(i,n){var s=new UI.SafeSubscriber({next:function(c){i(c),s.unsubscribe()},error:n,complete:function(){t?i(e.defaultValue):n(new WI.EmptyError)}});r.subscribe(s)})}xu.firstValueFrom=GI});var Up=_(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.ArgumentOutOfRangeError=void 0;var BI=si();Lu.ArgumentOutOfRangeError=BI.createErrorClass(function(r){return function(){r(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})});var Gp=_(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.NotFoundError=void 0;var HI=si();ju.NotFoundError=HI.createErrorClass(function(r){return function(t){r(this),this.name="NotFoundError",this.message=t}})});var Bp=_(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.SequenceError=void 0;var $I=si();Iu.SequenceError=$I.createErrorClass(function(r){return function(t){r(this),this.name="SequenceError",this.message=t}})});var Du=_(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.isValidDate=void 0;function YI(r){return r instanceof Date&&!isNaN(r)}Fu.isValidDate=YI});var Pa=_(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.timeout=tn.TimeoutError=void 0;var QI=Pt(),KI=Du(),XI=z(),JI=X(),ZI=si(),eF=U(),tF=Vr();tn.TimeoutError=ZI.createErrorClass(function(r){return function(t){t===void 0&&(t=null),r(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function rF(r,e){var t=KI.isValidDate(r)?{first:r}:typeof r=="number"?{each:r}:r,i=t.first,n=t.each,s=t.with,c=s===void 0?iF:s,l=t.scheduler,h=l===void 0?e??QI.asyncScheduler:l,p=t.meta,v=p===void 0?null:p;if(i==null&&n==null)throw new TypeError("No timeout provided.");return XI.operate(function(b,w){var T,E,M=null,L=0,D=function(N){E=tF.executeSchedule(w,h,function(){try{T.unsubscribe(),JI.innerFrom(c({meta:v,lastValue:M,seen:L})).subscribe(w)}catch(Y){w.error(Y)}},N)};T=b.subscribe(eF.createOperatorSubscriber(w,function(N){E?.unsubscribe(),L++,w.next(M=N),n>0&&D(n)},void 0,void 0,function(){E?.closed||E?.unsubscribe(),M=null})),!L&&D(i!=null?typeof i=="number"?i:+i-h.now():n)})}tn.timeout=rF;function iF(r){throw new tn.TimeoutError(r)}});var Gr=_(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.map=void 0;var nF=z(),oF=U();function aF(r,e){return nF.operate(function(t,i){var n=0;t.subscribe(oF.createOperatorSubscriber(i,function(s){i.next(r.call(e,s,n++))}))})}ku.map=aF});var pi=_(hi=>{"use strict";var sF=hi&&hi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},uF=hi&&hi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(hi,"__esModule",{value:!0});hi.mapOneOrManyArgs=void 0;var cF=Gr(),lF=Array.isArray;function fF(r,e){return lF(e)?r.apply(void 0,uF([],sF(e))):r(e)}function hF(r){return cF.map(function(e){return fF(r,e)})}hi.mapOneOrManyArgs=hF});var $p=_(di=>{"use strict";var pF=di&&di.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},O_=di&&di.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(di,"__esModule",{value:!0});di.bindCallbackInternals=void 0;var dF=_a(),vF=he(),mF=ro(),yF=pi(),gF=to(),bF=tu();function Hp(r,e,t,i){if(t)if(dF.isScheduler(t))i=t;else return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return Hp(r,e,i).apply(this,n).pipe(yF.mapOneOrManyArgs(t))};return i?function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return Hp(r,e).apply(this,n).pipe(mF.subscribeOn(i),gF.observeOn(i))}:function(){for(var n=this,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var l=new bF.AsyncSubject,h=!0;return new vF.Observable(function(p){var v=l.subscribe(p);if(h){h=!1;var b=!1,w=!1;e.apply(n,O_(O_([],pF(s)),[function(){for(var T=[],E=0;E<arguments.length;E++)T[E]=arguments[E];if(r){var M=T.shift();if(M!=null){l.error(M);return}}l.next(1<T.length?T:T[0]),w=!0,b&&l.complete()}])),w&&l.complete(),b=!0}return v})}}di.bindCallbackInternals=Hp});var S_=_(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.bindCallback=void 0;var _F=$p();function PF(r,e,t){return _F.bindCallbackInternals(!1,r,e,t)}Ru.bindCallback=PF});var T_=_(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.bindNodeCallback=void 0;var wF=$p();function OF(r,e,t){return wF.bindCallbackInternals(!0,r,e,t)}zu.bindNodeCallback=OF});var Yp=_(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.argsArgArrayOrObject=void 0;var SF=Array.isArray,TF=Object.getPrototypeOf,CF=Object.prototype,AF=Object.keys;function EF(r){if(r.length===1){var e=r[0];if(SF(e))return{args:e,keys:null};if(qF(e)){var t=AF(e);return{args:t.map(function(i){return e[i]}),keys:t}}}return{args:r,keys:null}}Nu.argsArgArrayOrObject=EF;function qF(r){return r&&typeof r=="object"&&TF(r)===CF}});var Qp=_(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.createObject=void 0;function MF(r,e){return r.reduce(function(t,i,n){return t[i]=e[n],t},{})}Vu.createObject=MF});var Wu=_(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.combineLatestInit=io.combineLatest=void 0;var xF=he(),LF=Yp(),E_=Wr(),q_=Ke(),jF=pi(),C_=wt(),IF=Qp(),FF=U(),DF=Vr();function kF(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=C_.popScheduler(r),i=C_.popResultSelector(r),n=LF.argsArgArrayOrObject(r),s=n.args,c=n.keys;if(s.length===0)return E_.from([],t);var l=new xF.Observable(M_(s,t,c?function(h){return IF.createObject(c,h)}:q_.identity));return i?l.pipe(jF.mapOneOrManyArgs(i)):l}io.combineLatest=kF;function M_(r,e,t){return t===void 0&&(t=q_.identity),function(i){A_(e,function(){for(var n=r.length,s=new Array(n),c=n,l=n,h=function(v){A_(e,function(){var b=E_.from(r[v],e),w=!1;b.subscribe(FF.createOperatorSubscriber(i,function(T){s[v]=T,w||(w=!0,l--),l||i.next(t(s.slice()))},function(){--c||i.complete()}))},i)},p=0;p<n;p++)h(p)},i)}}io.combineLatestInit=M_;function A_(r,e,t){r?DF.executeSchedule(t,r,e):e()}});var Gu=_(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.mergeInternals=void 0;var RF=X(),zF=Vr(),x_=U();function NF(r,e,t,i,n,s,c,l){var h=[],p=0,v=0,b=!1,w=function(){b&&!h.length&&!p&&e.complete()},T=function(M){return p<i?E(M):h.push(M)},E=function(M){s&&e.next(M),p++;var L=!1;RF.innerFrom(t(M,v++)).subscribe(x_.createOperatorSubscriber(e,function(D){n?.(D),s?T(D):e.next(D)},function(){L=!0},void 0,function(){if(L)try{p--;for(var D=function(){var N=h.shift();c?zF.executeSchedule(e,c,function(){return E(N)}):E(N)};h.length&&p<i;)D();w()}catch(N){e.error(N)}}))};return r.subscribe(x_.createOperatorSubscriber(e,T,function(){b=!0,w()})),function(){l?.()}}Uu.mergeInternals=NF});var vr=_(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.mergeMap=void 0;var VF=Gr(),WF=X(),UF=z(),GF=Gu(),BF=le();function L_(r,e,t){return t===void 0&&(t=1/0),BF.isFunction(e)?L_(function(i,n){return VF.map(function(s,c){return e(i,s,n,c)})(WF.innerFrom(r(i,n)))},t):(typeof e=="number"&&(t=e),UF.operate(function(i,n){return GF.mergeInternals(i,n,r,t)}))}Bu.mergeMap=L_});var no=_(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.mergeAll=void 0;var HF=vr(),$F=Ke();function YF(r){return r===void 0&&(r=1/0),HF.mergeMap($F.identity,r)}Hu.mergeAll=YF});var wa=_($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.concatAll=void 0;var QF=no();function KF(){return QF.mergeAll(1)}$u.concatAll=KF});var Oa=_(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.concat=void 0;var XF=wa(),JF=wt(),ZF=Wr();function eD(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return XF.concatAll()(ZF.from(r,JF.popScheduler(r)))}Yu.concat=eD});var Sa=_(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.defer=void 0;var tD=he(),rD=X();function iD(r){return new tD.Observable(function(e){rD.innerFrom(r()).subscribe(e)})}Qu.defer=iD});var j_=_(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.connectable=void 0;var nD=Xe(),oD=he(),aD=Sa(),sD={connector:function(){return new nD.Subject},resetOnDisconnect:!0};function uD(r,e){e===void 0&&(e=sD);var t=null,i=e.connector,n=e.resetOnDisconnect,s=n===void 0?!0:n,c=i(),l=new oD.Observable(function(h){return c.subscribe(h)});return l.connect=function(){return(!t||t.closed)&&(t=aD.defer(function(){return r}).subscribe(c),s&&t.add(function(){return c=i()})),t},l}Ku.connectable=uD});var I_=_(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.forkJoin=void 0;var cD=he(),lD=Yp(),fD=X(),hD=wt(),pD=U(),dD=pi(),vD=Qp();function mD(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=hD.popResultSelector(r),i=lD.argsArgArrayOrObject(r),n=i.args,s=i.keys,c=new cD.Observable(function(l){var h=n.length;if(!h){l.complete();return}for(var p=new Array(h),v=h,b=h,w=function(E){var M=!1;fD.innerFrom(n[E]).subscribe(pD.createOperatorSubscriber(l,function(L){M||(M=!0,b--),p[E]=L},function(){return v--},void 0,function(){(!v||!M)&&(b||l.next(s?vD.createObject(s,p):p),l.complete())}))},T=0;T<h;T++)w(T)});return t?c.pipe(dD.mapOneOrManyArgs(t)):c}Xu.forkJoin=mD});var D_=_(oo=>{"use strict";var yD=oo&&oo.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s};Object.defineProperty(oo,"__esModule",{value:!0});oo.fromEvent=void 0;var gD=X(),bD=he(),_D=vr(),PD=au(),rn=le(),wD=pi(),OD=["addListener","removeListener"],SD=["addEventListener","removeEventListener"],TD=["on","off"];function Kp(r,e,t,i){if(rn.isFunction(t)&&(i=t,t=void 0),i)return Kp(r,e,t).pipe(wD.mapOneOrManyArgs(i));var n=yD(ED(r)?SD.map(function(l){return function(h){return r[l](e,h,t)}}):CD(r)?OD.map(F_(r,e)):AD(r)?TD.map(F_(r,e)):[],2),s=n[0],c=n[1];if(!s&&PD.isArrayLike(r))return _D.mergeMap(function(l){return Kp(l,e,t)})(gD.innerFrom(r));if(!s)throw new TypeError("Invalid event target");return new bD.Observable(function(l){var h=function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return l.next(1<p.length?p:p[0])};return s(h),function(){return c(h)}})}oo.fromEvent=Kp;function F_(r,e){return function(t){return function(i){return r[t](e,i)}}}function CD(r){return rn.isFunction(r.addListener)&&rn.isFunction(r.removeListener)}function AD(r){return rn.isFunction(r.on)&&rn.isFunction(r.off)}function ED(r){return rn.isFunction(r.addEventListener)&&rn.isFunction(r.removeEventListener)}});var R_=_(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.fromEventPattern=void 0;var qD=he(),MD=le(),xD=pi();function k_(r,e,t){return t?k_(r,e).pipe(xD.mapOneOrManyArgs(t)):new qD.Observable(function(i){var n=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return i.next(c.length===1?c[0]:c)},s=r(n);return MD.isFunction(e)?function(){return e(n,s)}:void 0})}Ju.fromEventPattern=k_});var N_=_(ao=>{"use strict";var LD=ao&&ao.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(p){return function(v){return h([p,v])}}function h(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(v){p=[6,v],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}};Object.defineProperty(ao,"__esModule",{value:!0});ao.generate=void 0;var z_=Ke(),jD=_a(),ID=Sa(),FD=zp();function DD(r,e,t,i,n){var s,c,l,h;arguments.length===1?(s=r,h=s.initialState,e=s.condition,t=s.iterate,c=s.resultSelector,l=c===void 0?z_.identity:c,n=s.scheduler):(h=r,!i||jD.isScheduler(i)?(l=z_.identity,n=i):l=i);function p(){var v;return LD(this,function(b){switch(b.label){case 0:v=h,b.label=1;case 1:return!e||e(v)?[4,l(v)]:[3,4];case 2:b.sent(),b.label=3;case 3:return v=t(v),[3,1];case 4:return[2]}})}return ID.defer(n?function(){return FD.scheduleIterable(p(),n)}:p)}ao.generate=DD});var V_=_(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.iif=void 0;var kD=Sa();function RD(r,e,t){return kD.defer(function(){return r()?e:t})}Zu.iif=RD});var vi=_(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.timer=void 0;var zD=he(),ND=Pt(),VD=_a(),WD=Du();function UD(r,e,t){r===void 0&&(r=0),t===void 0&&(t=ND.async);var i=-1;return e!=null&&(VD.isScheduler(e)?t=e:i=e),new zD.Observable(function(n){var s=WD.isValidDate(r)?+r-t.now():r;s<0&&(s=0);var c=0;return t.schedule(function(){n.closed||(n.next(c++),0<=i?this.schedule(void 0,i):n.complete())},s)})}ec.timer=UD});var Xp=_(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.interval=void 0;var GD=Pt(),BD=vi();function HD(r,e){return r===void 0&&(r=0),e===void 0&&(e=GD.asyncScheduler),r<0&&(r=0),BD.timer(r,r,e)}tc.interval=HD});var U_=_(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.merge=void 0;var $D=no(),YD=X(),QD=er(),W_=wt(),KD=Wr();function XD(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=W_.popScheduler(r),i=W_.popNumber(r,1/0),n=r;return n.length?n.length===1?YD.innerFrom(n[0]):$D.mergeAll(i)(KD.from(n,t)):QD.EMPTY}rc.merge=XD});var Jp=_(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.never=nn.NEVER=void 0;var JD=he(),ZD=Qe();nn.NEVER=new JD.Observable(ZD.noop);function ek(){return nn.NEVER}nn.never=ek});var mi=_(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.argsOrArgArray=void 0;var tk=Array.isArray;function rk(r){return r.length===1&&tk(r[0])?r[0]:r}ic.argsOrArgArray=rk});var Zp=_(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.onErrorResumeNext=void 0;var ik=he(),nk=mi(),ok=U(),G_=Qe(),ak=X();function sk(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=nk.argsOrArgArray(r);return new ik.Observable(function(i){var n=0,s=function(){if(n<t.length){var c=void 0;try{c=ak.innerFrom(t[n++])}catch{s();return}var l=new ok.OperatorSubscriber(i,void 0,G_.noop,G_.noop);c.subscribe(l),l.add(s)}else i.complete()};s()})}nc.onErrorResumeNext=sk});var B_=_(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.pairs=void 0;var uk=Wr();function ck(r,e){return uk.from(Object.entries(r),e)}oc.pairs=ck});var ed=_(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.not=void 0;function lk(r,e){return function(t,i){return!r.call(e,t,i)}}ac.not=lk});var Br=_(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.filter=void 0;var fk=z(),hk=U();function pk(r,e){return fk.operate(function(t,i){var n=0;t.subscribe(hk.createOperatorSubscriber(i,function(s){return r.call(e,s,n++)&&i.next(s)}))})}sc.filter=pk});var Y_=_(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.partition=void 0;var dk=ed(),H_=Br(),$_=X();function vk(r,e,t){return[H_.filter(e,t)($_.innerFrom(r)),H_.filter(dk.not(e,t))($_.innerFrom(r))]}uc.partition=vk});var td=_(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.raceInit=so.race=void 0;var mk=he(),Q_=X(),yk=mi(),gk=U();function bk(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r=yk.argsOrArgArray(r),r.length===1?Q_.innerFrom(r[0]):new mk.Observable(K_(r))}so.race=bk;function K_(r){return function(e){for(var t=[],i=function(s){t.push(Q_.innerFrom(r[s]).subscribe(gk.createOperatorSubscriber(e,function(c){if(t){for(var l=0;l<t.length;l++)l!==s&&t[l].unsubscribe();t=null}e.next(c)})))},n=0;t&&!e.closed&&n<r.length;n++)i(n)}}so.raceInit=K_});var X_=_(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.range=void 0;var _k=he(),Pk=er();function wk(r,e,t){if(e==null&&(e=r,r=0),e<=0)return Pk.EMPTY;var i=e+r;return new _k.Observable(t?function(n){var s=r;return t.schedule(function(){s<i?(n.next(s++),this.schedule()):n.complete()})}:function(n){for(var s=r;s<i&&!n.closed;)n.next(s++);n.complete()})}cc.range=wk});var J_=_(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.using=void 0;var Ok=he(),Sk=X(),Tk=er();function Ck(r,e){return new Ok.Observable(function(t){var i=r(),n=e(i),s=n?Sk.innerFrom(n):Tk.EMPTY;return s.subscribe(t),function(){i&&i.unsubscribe()}})}lc.using=Ck});var fc=_(yi=>{"use strict";var Ak=yi&&yi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},Ek=yi&&yi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(yi,"__esModule",{value:!0});yi.zip=void 0;var qk=he(),Mk=X(),xk=mi(),Lk=er(),jk=U(),Ik=wt();function Fk(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Ik.popResultSelector(r),i=xk.argsOrArgArray(r);return i.length?new qk.Observable(function(n){var s=i.map(function(){return[]}),c=i.map(function(){return!1});n.add(function(){s=c=null});for(var l=function(p){Mk.innerFrom(i[p]).subscribe(jk.createOperatorSubscriber(n,function(v){if(s[p].push(v),s.every(function(w){return w.length})){var b=s.map(function(w){return w.shift()});n.next(t?t.apply(void 0,Ek([],Ak(b))):b),s.some(function(w,T){return!w.length&&c[T]})&&n.complete()}},function(){c[p]=!0,!s[p].length&&n.complete()}))},h=0;!n.closed&&h<i.length;h++)l(h);return function(){s=c=null}}):Lk.EMPTY}yi.zip=Fk});var e0=_(Z_=>{"use strict";Object.defineProperty(Z_,"__esModule",{value:!0})});var pc=_(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.audit=void 0;var Dk=z(),kk=X(),t0=U();function Rk(r){return Dk.operate(function(e,t){var i=!1,n=null,s=null,c=!1,l=function(){if(s?.unsubscribe(),s=null,i){i=!1;var p=n;n=null,t.next(p)}c&&t.complete()},h=function(){s=null,c&&t.complete()};e.subscribe(t0.createOperatorSubscriber(t,function(p){i=!0,n=p,s||kk.innerFrom(r(p)).subscribe(s=t0.createOperatorSubscriber(t,l,h))},function(){c=!0,(!i||!s||s.closed)&&t.complete()}))})}hc.audit=Rk});var rd=_(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.auditTime=void 0;var zk=Pt(),Nk=pc(),Vk=vi();function Wk(r,e){return e===void 0&&(e=zk.asyncScheduler),Nk.audit(function(){return Vk.timer(r,e)})}dc.auditTime=Wk});var id=_(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.buffer=void 0;var Uk=z(),Gk=Qe(),r0=U(),Bk=X();function Hk(r){return Uk.operate(function(e,t){var i=[];return e.subscribe(r0.createOperatorSubscriber(t,function(n){return i.push(n)},function(){t.next(i),t.complete()})),Bk.innerFrom(r).subscribe(r0.createOperatorSubscriber(t,function(){var n=i;i=[],t.next(n)},Gk.noop)),function(){i=null}})}vc.buffer=Hk});var od=_(uo=>{"use strict";var nd=uo&&uo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(uo,"__esModule",{value:!0});uo.bufferCount=void 0;var $k=z(),Yk=U(),Qk=Nr();function Kk(r,e){return e===void 0&&(e=null),e=e??r,$k.operate(function(t,i){var n=[],s=0;t.subscribe(Yk.createOperatorSubscriber(i,function(c){var l,h,p,v,b=null;s++%e===0&&n.push([]);try{for(var w=nd(n),T=w.next();!T.done;T=w.next()){var E=T.value;E.push(c),r<=E.length&&(b=b??[],b.push(E))}}catch(D){l={error:D}}finally{try{T&&!T.done&&(h=w.return)&&h.call(w)}finally{if(l)throw l.error}}if(b)try{for(var M=nd(b),L=M.next();!L.done;L=M.next()){var E=L.value;Qk.arrRemove(n,E),i.next(E)}}catch(D){p={error:D}}finally{try{L&&!L.done&&(v=M.return)&&v.call(M)}finally{if(p)throw p.error}}},function(){var c,l;try{for(var h=nd(n),p=h.next();!p.done;p=h.next()){var v=p.value;i.next(v)}}catch(b){c={error:b}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(c)throw c.error}}i.complete()},void 0,function(){n=null}))})}uo.bufferCount=Kk});var ad=_(co=>{"use strict";var Xk=co&&co.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(co,"__esModule",{value:!0});co.bufferTime=void 0;var Jk=xt(),Zk=z(),eR=U(),tR=Nr(),rR=Pt(),iR=wt(),i0=Vr();function nR(r){for(var e,t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=(e=iR.popScheduler(i))!==null&&e!==void 0?e:rR.asyncScheduler,c=(t=i[0])!==null&&t!==void 0?t:null,l=i[1]||1/0;return Zk.operate(function(h,p){var v=[],b=!1,w=function(M){var L=M.buffer,D=M.subs;D.unsubscribe(),tR.arrRemove(v,M),p.next(L),b&&T()},T=function(){if(v){var M=new Jk.Subscription;p.add(M);var L=[],D={buffer:L,subs:M};v.push(D),i0.executeSchedule(M,s,function(){return w(D)},r)}};c!==null&&c>=0?i0.executeSchedule(p,s,T,c,!0):b=!0,T();var E=eR.createOperatorSubscriber(p,function(M){var L,D,N=v.slice();try{for(var Y=Xk(N),ie=Y.next();!ie.done;ie=Y.next()){var pe=ie.value,Fe=pe.buffer;Fe.push(M),l<=Fe.length&&w(pe)}}catch(dt){L={error:dt}}finally{try{ie&&!ie.done&&(D=Y.return)&&D.call(Y)}finally{if(L)throw L.error}}},function(){for(;v?.length;)p.next(v.shift().buffer);E?.unsubscribe(),p.complete(),p.unsubscribe()},void 0,function(){return v=null});h.subscribe(E)})}co.bufferTime=nR});var ud=_(lo=>{"use strict";var oR=lo&&lo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(lo,"__esModule",{value:!0});lo.bufferToggle=void 0;var aR=xt(),sR=z(),n0=X(),sd=U(),o0=Qe(),uR=Nr();function cR(r,e){return sR.operate(function(t,i){var n=[];n0.innerFrom(r).subscribe(sd.createOperatorSubscriber(i,function(s){var c=[];n.push(c);var l=new aR.Subscription,h=function(){uR.arrRemove(n,c),i.next(c),l.unsubscribe()};l.add(n0.innerFrom(e(s)).subscribe(sd.createOperatorSubscriber(i,h,o0.noop)))},o0.noop)),t.subscribe(sd.createOperatorSubscriber(i,function(s){var c,l;try{for(var h=oR(n),p=h.next();!p.done;p=h.next()){var v=p.value;v.push(s)}}catch(b){c={error:b}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(c)throw c.error}}},function(){for(;n.length>0;)i.next(n.shift());i.complete()}))})}lo.bufferToggle=cR});var cd=_(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.bufferWhen=void 0;var lR=z(),fR=Qe(),a0=U(),hR=X();function pR(r){return lR.operate(function(e,t){var i=null,n=null,s=function(){n?.unsubscribe();var c=i;i=[],c&&t.next(c),hR.innerFrom(r()).subscribe(n=a0.createOperatorSubscriber(t,s,fR.noop))};s(),e.subscribe(a0.createOperatorSubscriber(t,function(c){return i?.push(c)},function(){i&&t.next(i),t.complete()},void 0,function(){return i=n=null}))})}mc.bufferWhen=pR});var ld=_(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.catchError=void 0;var dR=X(),vR=U(),mR=z();function s0(r){return mR.operate(function(e,t){var i=null,n=!1,s;i=e.subscribe(vR.createOperatorSubscriber(t,void 0,void 0,function(c){s=dR.innerFrom(r(c,s0(r)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):n=!0})),n&&(i.unsubscribe(),i=null,s.subscribe(t))})}yc.catchError=s0});var fd=_(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.scanInternals=void 0;var yR=U();function gR(r,e,t,i,n){return function(s,c){var l=t,h=e,p=0;s.subscribe(yR.createOperatorSubscriber(c,function(v){var b=p++;h=l?r(h,v,b):(l=!0,v),i&&c.next(h)},n&&function(){l&&c.next(h),c.complete()}))}}gc.scanInternals=gR});var on=_(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.reduce=void 0;var bR=fd(),_R=z();function PR(r,e){return _R.operate(bR.scanInternals(r,e,arguments.length>=2,!1,!0))}bc.reduce=PR});var Pc=_(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.toArray=void 0;var wR=on(),OR=z(),SR=function(r,e){return r.push(e),r};function TR(){return OR.operate(function(r,e){wR.reduce(SR,[])(r).subscribe(e)})}_c.toArray=TR});var hd=_(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.joinAllInternals=void 0;var CR=Ke(),AR=pi(),ER=ma(),qR=vr(),MR=Pc();function xR(r,e){return ER.pipe(MR.toArray(),qR.mergeMap(function(t){return r(t)}),e?AR.mapOneOrManyArgs(e):CR.identity)}wc.joinAllInternals=xR});var Sc=_(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.combineLatestAll=void 0;var LR=Wu(),jR=hd();function IR(r){return jR.joinAllInternals(LR.combineLatest,r)}Oc.combineLatestAll=IR});var pd=_(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.combineAll=void 0;var FR=Sc();Tc.combineAll=FR.combineLatestAll});var dd=_(gi=>{"use strict";var u0=gi&&gi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},c0=gi&&gi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(gi,"__esModule",{value:!0});gi.combineLatest=void 0;var DR=Wu(),kR=z(),RR=mi(),zR=pi(),NR=ma(),VR=wt();function l0(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=VR.popResultSelector(r);return t?NR.pipe(l0.apply(void 0,c0([],u0(r))),zR.mapOneOrManyArgs(t)):kR.operate(function(i,n){DR.combineLatestInit(c0([i],u0(RR.argsOrArgArray(r))))(n)})}gi.combineLatest=l0});var vd=_(bi=>{"use strict";var WR=bi&&bi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},UR=bi&&bi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(bi,"__esModule",{value:!0});bi.combineLatestWith=void 0;var GR=dd();function BR(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return GR.combineLatest.apply(void 0,UR([],WR(r)))}bi.combineLatestWith=BR});var Ac=_(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.concatMap=void 0;var f0=vr(),HR=le();function $R(r,e){return HR.isFunction(e)?f0.mergeMap(r,e,1):f0.mergeMap(r,1)}Cc.concatMap=$R});var md=_(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.concatMapTo=void 0;var h0=Ac(),YR=le();function QR(r,e){return YR.isFunction(e)?h0.concatMap(function(){return r},e):h0.concatMap(function(){return r})}Ec.concatMapTo=QR});var yd=_(_i=>{"use strict";var KR=_i&&_i.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},XR=_i&&_i.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(_i,"__esModule",{value:!0});_i.concat=void 0;var JR=z(),ZR=wa(),ez=wt(),tz=Wr();function rz(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=ez.popScheduler(r);return JR.operate(function(i,n){ZR.concatAll()(tz.from(XR([i],KR(r)),t)).subscribe(n)})}_i.concat=rz});var gd=_(Pi=>{"use strict";var iz=Pi&&Pi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},nz=Pi&&Pi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.concatWith=void 0;var oz=yd();function az(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return oz.concat.apply(void 0,nz([],iz(r)))}Pi.concatWith=az});var p0=_(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.fromSubscribable=void 0;var sz=he();function uz(r){return new sz.Observable(function(e){return r.subscribe(e)})}qc.fromSubscribable=uz});var Ta=_(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.connect=void 0;var cz=Xe(),lz=X(),fz=z(),hz=p0(),pz={connector:function(){return new cz.Subject}};function dz(r,e){e===void 0&&(e=pz);var t=e.connector;return fz.operate(function(i,n){var s=t();lz.innerFrom(r(hz.fromSubscribable(s))).subscribe(n),n.add(i.subscribe(s))})}Mc.connect=dz});var bd=_(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.count=void 0;var vz=on();function mz(r){return vz.reduce(function(e,t,i){return!r||r(t,i)?e+1:e},0)}xc.count=mz});var _d=_(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.debounce=void 0;var yz=z(),gz=Qe(),d0=U(),bz=X();function _z(r){return yz.operate(function(e,t){var i=!1,n=null,s=null,c=function(){if(s?.unsubscribe(),s=null,i){i=!1;var l=n;n=null,t.next(l)}};e.subscribe(d0.createOperatorSubscriber(t,function(l){s?.unsubscribe(),i=!0,n=l,s=d0.createOperatorSubscriber(t,c,gz.noop),bz.innerFrom(r(l)).subscribe(s)},function(){c(),t.complete()},void 0,function(){n=s=null}))})}Lc.debounce=_z});var Pd=_(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.debounceTime=void 0;var Pz=Pt(),wz=z(),Oz=U();function Sz(r,e){return e===void 0&&(e=Pz.asyncScheduler),wz.operate(function(t,i){var n=null,s=null,c=null,l=function(){if(n){n.unsubscribe(),n=null;var p=s;s=null,i.next(p)}};function h(){var p=c+r,v=e.now();if(v<p){n=this.schedule(void 0,p-v),i.add(n);return}l()}t.subscribe(Oz.createOperatorSubscriber(i,function(p){s=p,c=e.now(),n||(n=e.schedule(h,r),i.add(n))},function(){l(),i.complete()},void 0,function(){s=n=null}))})}jc.debounceTime=Sz});var fo=_(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.defaultIfEmpty=void 0;var Tz=z(),Cz=U();function Az(r){return Tz.operate(function(e,t){var i=!1;e.subscribe(Cz.createOperatorSubscriber(t,function(n){i=!0,t.next(n)},function(){i||t.next(r),t.complete()}))})}Ic.defaultIfEmpty=Az});var ho=_(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.take=void 0;var Ez=er(),qz=z(),Mz=U();function xz(r){return r<=0?function(){return Ez.EMPTY}:qz.operate(function(e,t){var i=0;e.subscribe(Mz.createOperatorSubscriber(t,function(n){++i<=r&&(t.next(n),r<=i&&t.complete())}))})}Fc.take=xz});var kc=_(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.ignoreElements=void 0;var Lz=z(),jz=U(),Iz=Qe();function Fz(){return Lz.operate(function(r,e){r.subscribe(jz.createOperatorSubscriber(e,Iz.noop))})}Dc.ignoreElements=Fz});var zc=_(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.mapTo=void 0;var Dz=Gr();function kz(r){return Dz.map(function(){return r})}Rc.mapTo=kz});var Vc=_(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.delayWhen=void 0;var Rz=Oa(),v0=ho(),zz=kc(),Nz=zc(),Vz=vr(),Wz=X();function m0(r,e){return e?function(t){return Rz.concat(e.pipe(v0.take(1),zz.ignoreElements()),t.pipe(m0(r)))}:Vz.mergeMap(function(t,i){return Wz.innerFrom(r(t,i)).pipe(v0.take(1),Nz.mapTo(t))})}Nc.delayWhen=m0});var wd=_(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.delay=void 0;var Uz=Pt(),Gz=Vc(),Bz=vi();function Hz(r,e){e===void 0&&(e=Uz.asyncScheduler);var t=Bz.timer(r,e);return Gz.delayWhen(function(){return t})}Wc.delay=Hz});var Od=_(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.dematerialize=void 0;var $z=Au(),Yz=z(),Qz=U();function Kz(){return Yz.operate(function(r,e){r.subscribe(Qz.createOperatorSubscriber(e,function(t){return $z.observeNotification(t,e)}))})}Uc.dematerialize=Kz});var Sd=_(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.distinct=void 0;var Xz=z(),y0=U(),Jz=Qe(),Zz=X();function eN(r,e){return Xz.operate(function(t,i){var n=new Set;t.subscribe(y0.createOperatorSubscriber(i,function(s){var c=r?r(s):s;n.has(c)||(n.add(c),i.next(s))})),e&&Zz.innerFrom(e).subscribe(y0.createOperatorSubscriber(i,function(){return n.clear()},Jz.noop))})}Gc.distinct=eN});var Hc=_(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.distinctUntilChanged=void 0;var tN=Ke(),rN=z(),iN=U();function nN(r,e){return e===void 0&&(e=tN.identity),r=r??oN,rN.operate(function(t,i){var n,s=!0;t.subscribe(iN.createOperatorSubscriber(i,function(c){var l=e(c);(s||!r(n,l))&&(s=!1,n=l,i.next(c))}))})}Bc.distinctUntilChanged=nN;function oN(r,e){return r===e}});var Td=_($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.distinctUntilKeyChanged=void 0;var aN=Hc();function sN(r,e){return aN.distinctUntilChanged(function(t,i){return e?e(t[r],i[r]):t[r]===i[r]})}$c.distinctUntilKeyChanged=sN});var po=_(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.throwIfEmpty=void 0;var uN=fi(),cN=z(),lN=U();function fN(r){return r===void 0&&(r=hN),cN.operate(function(e,t){var i=!1;e.subscribe(lN.createOperatorSubscriber(t,function(n){i=!0,t.next(n)},function(){return i?t.complete():t.error(r())}))})}Yc.throwIfEmpty=fN;function hN(){return new uN.EmptyError}});var Cd=_(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.elementAt=void 0;var g0=Up(),pN=Br(),dN=po(),vN=fo(),mN=ho();function yN(r,e){if(r<0)throw new g0.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(i){return i.pipe(pN.filter(function(n,s){return s===r}),mN.take(1),t?vN.defaultIfEmpty(e):dN.throwIfEmpty(function(){return new g0.ArgumentOutOfRangeError}))}}Qc.elementAt=yN});var Ad=_(wi=>{"use strict";var gN=wi&&wi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},bN=wi&&wi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(wi,"__esModule",{value:!0});wi.endWith=void 0;var _N=Oa(),PN=Tu();function wN(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return _N.concat(t,PN.of.apply(void 0,bN([],gN(r))))}}wi.endWith=wN});var Ed=_(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.every=void 0;var ON=z(),SN=U();function TN(r,e){return ON.operate(function(t,i){var n=0;t.subscribe(SN.createOperatorSubscriber(i,function(s){r.call(e,s,n++,t)||(i.next(!1),i.complete())},function(){i.next(!0),i.complete()}))})}Kc.every=TN});var Jc=_(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.exhaustMap=void 0;var CN=Gr(),b0=X(),AN=z(),_0=U();function P0(r,e){return e?function(t){return t.pipe(P0(function(i,n){return b0.innerFrom(r(i,n)).pipe(CN.map(function(s,c){return e(i,s,n,c)}))}))}:AN.operate(function(t,i){var n=0,s=null,c=!1;t.subscribe(_0.createOperatorSubscriber(i,function(l){s||(s=_0.createOperatorSubscriber(i,void 0,function(){s=null,c&&i.complete()}),b0.innerFrom(r(l,n++)).subscribe(s))},function(){c=!0,!s&&i.complete()}))})}Xc.exhaustMap=P0});var el=_(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.exhaustAll=void 0;var EN=Jc(),qN=Ke();function MN(){return EN.exhaustMap(qN.identity)}Zc.exhaustAll=MN});var qd=_(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.exhaust=void 0;var xN=el();tl.exhaust=xN.exhaustAll});var Md=_(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.expand=void 0;var LN=z(),jN=Gu();function IN(r,e,t){return e===void 0&&(e=1/0),e=(e||0)<1?1/0:e,LN.operate(function(i,n){return jN.mergeInternals(i,n,r,e,void 0,!0,t)})}rl.expand=IN});var xd=_(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.finalize=void 0;var FN=z();function DN(r){return FN.operate(function(e,t){try{e.subscribe(t)}finally{t.add(r)}})}il.finalize=DN});var nl=_(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.createFind=vo.find=void 0;var kN=z(),RN=U();function zN(r,e){return kN.operate(w0(r,e,"value"))}vo.find=zN;function w0(r,e,t){var i=t==="index";return function(n,s){var c=0;n.subscribe(RN.createOperatorSubscriber(s,function(l){var h=c++;r.call(e,l,h,n)&&(s.next(i?h:l),s.complete())},function(){s.next(i?-1:void 0),s.complete()}))}}vo.createFind=w0});var Ld=_(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.findIndex=void 0;var NN=z(),VN=nl();function WN(r,e){return NN.operate(VN.createFind(r,e,"index"))}ol.findIndex=WN});var jd=_(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.first=void 0;var UN=fi(),GN=Br(),BN=ho(),HN=fo(),$N=po(),YN=Ke();function QN(r,e){var t=arguments.length>=2;return function(i){return i.pipe(r?GN.filter(function(n,s){return r(n,s,i)}):YN.identity,BN.take(1),t?HN.defaultIfEmpty(e):$N.throwIfEmpty(function(){return new UN.EmptyError}))}}al.first=QN});var Id=_(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.groupBy=void 0;var KN=he(),XN=X(),JN=Xe(),ZN=z(),O0=U();function e2(r,e,t,i){return ZN.operate(function(n,s){var c;!e||typeof e=="function"?c=e:(t=e.duration,c=e.element,i=e.connector);var l=new Map,h=function(E){l.forEach(E),E(s)},p=function(E){return h(function(M){return M.error(E)})},v=0,b=!1,w=new O0.OperatorSubscriber(s,function(E){try{var M=r(E),L=l.get(M);if(!L){l.set(M,L=i?i():new JN.Subject);var D=T(M,L);if(s.next(D),t){var N=O0.createOperatorSubscriber(L,function(){L.complete(),N?.unsubscribe()},void 0,void 0,function(){return l.delete(M)});w.add(XN.innerFrom(t(D)).subscribe(N))}}L.next(c?c(E):E)}catch(Y){p(Y)}},function(){return h(function(E){return E.complete()})},p,function(){return l.clear()},function(){return b=!0,v===0});n.subscribe(w);function T(E,M){var L=new KN.Observable(function(D){v++;var N=M.subscribe(D);return function(){N.unsubscribe(),--v===0&&b&&w.unsubscribe()}});return L.key=E,L}})}sl.groupBy=e2});var Fd=_(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.isEmpty=void 0;var t2=z(),r2=U();function i2(){return t2.operate(function(r,e){r.subscribe(r2.createOperatorSubscriber(e,function(){e.next(!1),e.complete()},function(){e.next(!0),e.complete()}))})}ul.isEmpty=i2});var cl=_(mo=>{"use strict";var n2=mo&&mo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mo,"__esModule",{value:!0});mo.takeLast=void 0;var o2=er(),a2=z(),s2=U();function u2(r){return r<=0?function(){return o2.EMPTY}:a2.operate(function(e,t){var i=[];e.subscribe(s2.createOperatorSubscriber(t,function(n){i.push(n),r<i.length&&i.shift()},function(){var n,s;try{for(var c=n2(i),l=c.next();!l.done;l=c.next()){var h=l.value;t.next(h)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(n)throw n.error}}t.complete()},void 0,function(){i=null}))})}mo.takeLast=u2});var Dd=_(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.last=void 0;var c2=fi(),l2=Br(),f2=cl(),h2=po(),p2=fo(),d2=Ke();function v2(r,e){var t=arguments.length>=2;return function(i){return i.pipe(r?l2.filter(function(n,s){return r(n,s,i)}):d2.identity,f2.takeLast(1),t?p2.defaultIfEmpty(e):h2.throwIfEmpty(function(){return new c2.EmptyError}))}}ll.last=v2});var Rd=_(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.materialize=void 0;var kd=Au(),m2=z(),y2=U();function g2(){return m2.operate(function(r,e){r.subscribe(y2.createOperatorSubscriber(e,function(t){e.next(kd.Notification.createNext(t))},function(){e.next(kd.Notification.createComplete()),e.complete()},function(t){e.next(kd.Notification.createError(t)),e.complete()}))})}fl.materialize=g2});var zd=_(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.max=void 0;var b2=on(),_2=le();function P2(r){return b2.reduce(_2.isFunction(r)?function(e,t){return r(e,t)>0?e:t}:function(e,t){return e>t?e:t})}hl.max=P2});var Nd=_(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.flatMap=void 0;var w2=vr();pl.flatMap=w2.mergeMap});var Vd=_(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.mergeMapTo=void 0;var S0=vr(),O2=le();function S2(r,e,t){return t===void 0&&(t=1/0),O2.isFunction(e)?S0.mergeMap(function(){return r},e,t):(typeof e=="number"&&(t=e),S0.mergeMap(function(){return r},t))}dl.mergeMapTo=S2});var Wd=_(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.mergeScan=void 0;var T2=z(),C2=Gu();function A2(r,e,t){return t===void 0&&(t=1/0),T2.operate(function(i,n){var s=e;return C2.mergeInternals(i,n,function(c,l){return r(s,c,l)},t,function(c){s=c},!1,void 0,function(){return s=null})})}vl.mergeScan=A2});var Ud=_(Oi=>{"use strict";var E2=Oi&&Oi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},q2=Oi&&Oi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.merge=void 0;var M2=z(),x2=mi(),L2=no(),T0=wt(),j2=Wr();function I2(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=T0.popScheduler(r),i=T0.popNumber(r,1/0);return r=x2.argsOrArgArray(r),M2.operate(function(n,s){L2.mergeAll(i)(j2.from(q2([n],E2(r)),t)).subscribe(s)})}Oi.merge=I2});var Gd=_(Si=>{"use strict";var F2=Si&&Si.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},D2=Si&&Si.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Si,"__esModule",{value:!0});Si.mergeWith=void 0;var k2=Ud();function R2(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return k2.merge.apply(void 0,D2([],F2(r)))}Si.mergeWith=R2});var Bd=_(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.min=void 0;var z2=on(),N2=le();function V2(r){return z2.reduce(N2.isFunction(r)?function(e,t){return r(e,t)<0?e:t}:function(e,t){return e<t?e:t})}ml.min=V2});var Ca=_(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.multicast=void 0;var W2=ya(),C0=le(),U2=Ta();function G2(r,e){var t=C0.isFunction(r)?r:function(){return r};return C0.isFunction(e)?U2.connect(e,{connector:t}):function(i){return new W2.ConnectableObservable(i,t)}}yl.multicast=G2});var Hd=_(mr=>{"use strict";var B2=mr&&mr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},H2=mr&&mr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(mr,"__esModule",{value:!0});mr.onErrorResumeNext=mr.onErrorResumeNextWith=void 0;var $2=mi(),Y2=Zp();function A0(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=$2.argsOrArgArray(r);return function(i){return Y2.onErrorResumeNext.apply(void 0,H2([i],B2(t)))}}mr.onErrorResumeNextWith=A0;mr.onErrorResumeNext=A0});var $d=_(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.pairwise=void 0;var Q2=z(),K2=U();function X2(){return Q2.operate(function(r,e){var t,i=!1;r.subscribe(K2.createOperatorSubscriber(e,function(n){var s=t;t=n,i&&e.next([s,n]),i=!0}))})}gl.pairwise=X2});var Yd=_(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.pluck=void 0;var J2=Gr();function Z2(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.length;if(t===0)throw new Error("list of properties cannot be empty.");return J2.map(function(i){for(var n=i,s=0;s<t;s++){var c=n?.[r[s]];if(typeof c<"u")n=c;else return}return n})}bl.pluck=Z2});var Qd=_(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.publish=void 0;var eV=Xe(),tV=Ca(),rV=Ta();function iV(r){return r?function(e){return rV.connect(r)(e)}:function(e){return tV.multicast(new eV.Subject)(e)}}_l.publish=iV});var Kd=_(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.publishBehavior=void 0;var nV=Cp(),oV=ya();function aV(r){return function(e){var t=new nV.BehaviorSubject(r);return new oV.ConnectableObservable(e,function(){return t})}}Pl.publishBehavior=aV});var Xd=_(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.publishLast=void 0;var sV=tu(),uV=ya();function cV(){return function(r){var e=new sV.AsyncSubject;return new uV.ConnectableObservable(r,function(){return e})}}wl.publishLast=cV});var Jd=_(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.publishReplay=void 0;var lV=eu(),fV=Ca(),E0=le();function hV(r,e,t,i){t&&!E0.isFunction(t)&&(i=t);var n=E0.isFunction(t)?t:void 0;return function(s){return fV.multicast(new lV.ReplaySubject(r,e,i),n)(s)}}Ol.publishReplay=hV});var Sl=_(Ti=>{"use strict";var pV=Ti&&Ti.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},dV=Ti&&Ti.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.raceWith=void 0;var vV=td(),mV=z(),yV=Ke();function gV(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length?mV.operate(function(t,i){vV.raceInit(dV([t],pV(r)))(i)}):yV.identity}Ti.raceWith=gV});var Zd=_(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.repeat=void 0;var bV=er(),_V=z(),q0=U(),PV=X(),wV=vi();function OV(r){var e,t=1/0,i;return r!=null&&(typeof r=="object"?(e=r.count,t=e===void 0?1/0:e,i=r.delay):t=r),t<=0?function(){return bV.EMPTY}:_V.operate(function(n,s){var c=0,l,h=function(){if(l?.unsubscribe(),l=null,i!=null){var v=typeof i=="number"?wV.timer(i):PV.innerFrom(i(c)),b=q0.createOperatorSubscriber(s,function(){b.unsubscribe(),p()});v.subscribe(b)}else p()},p=function(){var v=!1;l=n.subscribe(q0.createOperatorSubscriber(s,void 0,function(){++c<t?l?h():v=!0:s.complete()})),v&&h()};p()})}Tl.repeat=OV});var ev=_(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.repeatWhen=void 0;var SV=X(),TV=Xe(),CV=z(),M0=U();function AV(r){return CV.operate(function(e,t){var i,n=!1,s,c=!1,l=!1,h=function(){return l&&c&&(t.complete(),!0)},p=function(){return s||(s=new TV.Subject,SV.innerFrom(r(s)).subscribe(M0.createOperatorSubscriber(t,function(){i?v():n=!0},function(){c=!0,h()}))),s},v=function(){l=!1,i=e.subscribe(M0.createOperatorSubscriber(t,void 0,function(){l=!0,!h()&&p().next()})),n&&(i.unsubscribe(),i=null,n=!1,v())};v()})}Cl.repeatWhen=AV});var tv=_(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.retry=void 0;var EV=z(),x0=U(),qV=Ke(),MV=vi(),xV=X();function LV(r){r===void 0&&(r=1/0);var e;r&&typeof r=="object"?e=r:e={count:r};var t=e.count,i=t===void 0?1/0:t,n=e.delay,s=e.resetOnSuccess,c=s===void 0?!1:s;return i<=0?qV.identity:EV.operate(function(l,h){var p=0,v,b=function(){var w=!1;v=l.subscribe(x0.createOperatorSubscriber(h,function(T){c&&(p=0),h.next(T)},void 0,function(T){if(p++<i){var E=function(){v?(v.unsubscribe(),v=null,b()):w=!0};if(n!=null){var M=typeof n=="number"?MV.timer(n):xV.innerFrom(n(T,p)),L=x0.createOperatorSubscriber(h,function(){L.unsubscribe(),E()},function(){h.complete()});M.subscribe(L)}else E()}else h.error(T)})),w&&(v.unsubscribe(),v=null,b())};b()})}Al.retry=LV});var rv=_(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.retryWhen=void 0;var jV=X(),IV=Xe(),FV=z(),L0=U();function DV(r){return FV.operate(function(e,t){var i,n=!1,s,c=function(){i=e.subscribe(L0.createOperatorSubscriber(t,void 0,void 0,function(l){s||(s=new IV.Subject,jV.innerFrom(r(s)).subscribe(L0.createOperatorSubscriber(t,function(){return i?c():n=!0}))),s&&s.next(l)})),n&&(i.unsubscribe(),i=null,n=!1,c())};c()})}El.retryWhen=DV});var Ml=_(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.sample=void 0;var kV=X(),RV=z(),zV=Qe(),j0=U();function NV(r){return RV.operate(function(e,t){var i=!1,n=null;e.subscribe(j0.createOperatorSubscriber(t,function(s){i=!0,n=s})),kV.innerFrom(r).subscribe(j0.createOperatorSubscriber(t,function(){if(i){i=!1;var s=n;n=null,t.next(s)}},zV.noop))})}ql.sample=NV});var iv=_(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.sampleTime=void 0;var VV=Pt(),WV=Ml(),UV=Xp();function GV(r,e){return e===void 0&&(e=VV.asyncScheduler),WV.sample(UV.interval(r,e))}xl.sampleTime=GV});var nv=_(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.scan=void 0;var BV=z(),HV=fd();function $V(r,e){return BV.operate(HV.scanInternals(r,e,arguments.length>=2,!0))}Ll.scan=$V});var ov=_(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.sequenceEqual=void 0;var YV=z(),QV=U(),KV=X();function XV(r,e){return e===void 0&&(e=function(t,i){return t===i}),YV.operate(function(t,i){var n=I0(),s=I0(),c=function(h){i.next(h),i.complete()},l=function(h,p){var v=QV.createOperatorSubscriber(i,function(b){var w=p.buffer,T=p.complete;w.length===0?T?c(!1):h.buffer.push(b):!e(b,w.shift())&&c(!1)},function(){h.complete=!0;var b=p.complete,w=p.buffer;b&&c(w.length===0),v?.unsubscribe()});return v};t.subscribe(l(n,s)),KV.innerFrom(r).subscribe(l(s,n))})}jl.sequenceEqual=XV;function I0(){return{buffer:[],complete:!1}}});var Il=_(Ci=>{"use strict";var JV=Ci&&Ci.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},ZV=Ci&&Ci.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.share=void 0;var F0=X(),eW=Xe(),D0=jn(),tW=z();function rW(r){r===void 0&&(r={});var e=r.connector,t=e===void 0?function(){return new eW.Subject}:e,i=r.resetOnError,n=i===void 0?!0:i,s=r.resetOnComplete,c=s===void 0?!0:s,l=r.resetOnRefCountZero,h=l===void 0?!0:l;return function(p){var v,b,w,T=0,E=!1,M=!1,L=function(){b?.unsubscribe(),b=void 0},D=function(){L(),v=w=void 0,E=M=!1},N=function(){var Y=v;D(),Y?.unsubscribe()};return tW.operate(function(Y,ie){T++,!M&&!E&&L();var pe=w=w??t();ie.add(function(){T--,T===0&&!M&&!E&&(b=av(N,h))}),pe.subscribe(ie),!v&&T>0&&(v=new D0.SafeSubscriber({next:function(Fe){return pe.next(Fe)},error:function(Fe){M=!0,L(),b=av(D,n,Fe),pe.error(Fe)},complete:function(){E=!0,L(),b=av(D,c),pe.complete()}}),F0.innerFrom(Y).subscribe(v))})(p)}}Ci.share=rW;function av(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];if(e===!0){r();return}if(e!==!1){var n=new D0.SafeSubscriber({next:function(){n.unsubscribe(),r()}});return F0.innerFrom(e.apply(void 0,ZV([],JV(t)))).subscribe(n)}}});var sv=_(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.shareReplay=void 0;var iW=eu(),nW=Il();function oW(r,e,t){var i,n,s,c,l=!1;return r&&typeof r=="object"?(i=r.bufferSize,c=i===void 0?1/0:i,n=r.windowTime,e=n===void 0?1/0:n,s=r.refCount,l=s===void 0?!1:s,t=r.scheduler):c=r??1/0,nW.share({connector:function(){return new iW.ReplaySubject(c,e,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}Fl.shareReplay=oW});var uv=_(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.single=void 0;var aW=fi(),sW=Bp(),uW=Gp(),cW=z(),lW=U();function fW(r){return cW.operate(function(e,t){var i=!1,n,s=!1,c=0;e.subscribe(lW.createOperatorSubscriber(t,function(l){s=!0,(!r||r(l,c++,e))&&(i&&t.error(new sW.SequenceError("Too many matching values")),i=!0,n=l)},function(){i?(t.next(n),t.complete()):t.error(s?new uW.NotFoundError("No matching values"):new aW.EmptyError)}))})}Dl.single=fW});var cv=_(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.skip=void 0;var hW=Br();function pW(r){return hW.filter(function(e,t){return r<=t})}kl.skip=pW});var lv=_(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.skipLast=void 0;var dW=Ke(),vW=z(),mW=U();function yW(r){return r<=0?dW.identity:vW.operate(function(e,t){var i=new Array(r),n=0;return e.subscribe(mW.createOperatorSubscriber(t,function(s){var c=n++;if(c<r)i[c]=s;else{var l=c%r,h=i[l];i[l]=s,t.next(h)}})),function(){i=null}})}Rl.skipLast=yW});var fv=_(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.skipUntil=void 0;var gW=z(),k0=U(),bW=X(),_W=Qe();function PW(r){return gW.operate(function(e,t){var i=!1,n=k0.createOperatorSubscriber(t,function(){n?.unsubscribe(),i=!0},_W.noop);bW.innerFrom(r).subscribe(n),e.subscribe(k0.createOperatorSubscriber(t,function(s){return i&&t.next(s)}))})}zl.skipUntil=PW});var hv=_(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.skipWhile=void 0;var wW=z(),OW=U();function SW(r){return wW.operate(function(e,t){var i=!1,n=0;e.subscribe(OW.createOperatorSubscriber(t,function(s){return(i||(i=!r(s,n++)))&&t.next(s)}))})}Nl.skipWhile=SW});var pv=_(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.startWith=void 0;var R0=Oa(),TW=wt(),CW=z();function AW(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=TW.popScheduler(r);return CW.operate(function(i,n){(t?R0.concat(r,i,t):R0.concat(r,i)).subscribe(n)})}Vl.startWith=AW});var yo=_(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.switchMap=void 0;var EW=X(),qW=z(),z0=U();function MW(r,e){return qW.operate(function(t,i){var n=null,s=0,c=!1,l=function(){return c&&!n&&i.complete()};t.subscribe(z0.createOperatorSubscriber(i,function(h){n?.unsubscribe();var p=0,v=s++;EW.innerFrom(r(h,v)).subscribe(n=z0.createOperatorSubscriber(i,function(b){return i.next(e?e(h,b,v,p++):b)},function(){n=null,l()}))},function(){c=!0,l()}))})}Wl.switchMap=MW});var dv=_(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.switchAll=void 0;var xW=yo(),LW=Ke();function jW(){return xW.switchMap(LW.identity)}Ul.switchAll=jW});var vv=_(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.switchMapTo=void 0;var N0=yo(),IW=le();function FW(r,e){return IW.isFunction(e)?N0.switchMap(function(){return r},e):N0.switchMap(function(){return r})}Gl.switchMapTo=FW});var mv=_(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.switchScan=void 0;var DW=yo(),kW=z();function RW(r,e){return kW.operate(function(t,i){var n=e;return DW.switchMap(function(s,c){return r(n,s,c)},function(s,c){return n=c,c})(t).subscribe(i),function(){n=null}})}Bl.switchScan=RW});var yv=_(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.takeUntil=void 0;var zW=z(),NW=U(),VW=X(),WW=Qe();function UW(r){return zW.operate(function(e,t){VW.innerFrom(r).subscribe(NW.createOperatorSubscriber(t,function(){return t.complete()},WW.noop)),!t.closed&&e.subscribe(t)})}Hl.takeUntil=UW});var gv=_($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.takeWhile=void 0;var GW=z(),BW=U();function HW(r,e){return e===void 0&&(e=!1),GW.operate(function(t,i){var n=0;t.subscribe(BW.createOperatorSubscriber(i,function(s){var c=r(s,n++);(c||e)&&i.next(s),!c&&i.complete()}))})}$l.takeWhile=HW});var bv=_(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.tap=void 0;var $W=le(),YW=z(),QW=U(),KW=Ke();function XW(r,e,t){var i=$W.isFunction(r)||e||t?{next:r,error:e,complete:t}:r;return i?YW.operate(function(n,s){var c;(c=i.subscribe)===null||c===void 0||c.call(i);var l=!0;n.subscribe(QW.createOperatorSubscriber(s,function(h){var p;(p=i.next)===null||p===void 0||p.call(i,h),s.next(h)},function(){var h;l=!1,(h=i.complete)===null||h===void 0||h.call(i),s.complete()},function(h){var p;l=!1,(p=i.error)===null||p===void 0||p.call(i,h),s.error(h)},function(){var h,p;l&&((h=i.unsubscribe)===null||h===void 0||h.call(i)),(p=i.finalize)===null||p===void 0||p.call(i)}))}):KW.identity}Yl.tap=XW});var Kl=_(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.throttle=void 0;var JW=z(),V0=U(),ZW=X();function eU(r,e){return JW.operate(function(t,i){var n=e??{},s=n.leading,c=s===void 0?!0:s,l=n.trailing,h=l===void 0?!1:l,p=!1,v=null,b=null,w=!1,T=function(){b?.unsubscribe(),b=null,h&&(L(),w&&i.complete())},E=function(){b=null,w&&i.complete()},M=function(D){return b=ZW.innerFrom(r(D)).subscribe(V0.createOperatorSubscriber(i,T,E))},L=function(){if(p){p=!1;var D=v;v=null,i.next(D),!w&&M(D)}};t.subscribe(V0.createOperatorSubscriber(i,function(D){p=!0,v=D,!(b&&!b.closed)&&(c?L():M(D))},function(){w=!0,!(h&&p&&b&&!b.closed)&&i.complete()}))})}Ql.throttle=eU});var _v=_(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.throttleTime=void 0;var tU=Pt(),rU=Kl(),iU=vi();function nU(r,e,t){e===void 0&&(e=tU.asyncScheduler);var i=iU.timer(r,e);return rU.throttle(function(){return i},t)}Xl.throttleTime=nU});var Pv=_(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.TimeInterval=go.timeInterval=void 0;var oU=Pt(),aU=z(),sU=U();function uU(r){return r===void 0&&(r=oU.asyncScheduler),aU.operate(function(e,t){var i=r.now();e.subscribe(sU.createOperatorSubscriber(t,function(n){var s=r.now(),c=s-i;i=s,t.next(new W0(n,c))}))})}go.timeInterval=uU;var W0=function(){function r(e,t){this.value=e,this.interval=t}return r}();go.TimeInterval=W0});var wv=_(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.timeoutWith=void 0;var cU=Pt(),lU=Du(),fU=Pa();function hU(r,e,t){var i,n,s;if(t=t??cU.async,lU.isValidDate(r)?i=r:typeof r=="number"&&(n=r),e)s=function(){return e};else throw new TypeError("No observable provided to switch to");if(i==null&&n==null)throw new TypeError("No timeout provided.");return fU.timeout({first:i,each:n,scheduler:t,with:s})}Jl.timeoutWith=hU});var Ov=_(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.timestamp=void 0;var pU=Zs(),dU=Gr();function vU(r){return r===void 0&&(r=pU.dateTimestampProvider),dU.map(function(e){return{value:e,timestamp:r.now()}})}Zl.timestamp=vU});var Sv=_(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.window=void 0;var U0=Xe(),mU=z(),G0=U(),yU=Qe(),gU=X();function bU(r){return mU.operate(function(e,t){var i=new U0.Subject;t.next(i.asObservable());var n=function(s){i.error(s),t.error(s)};return e.subscribe(G0.createOperatorSubscriber(t,function(s){return i?.next(s)},function(){i.complete(),t.complete()},n)),gU.innerFrom(r).subscribe(G0.createOperatorSubscriber(t,function(){i.complete(),t.next(i=new U0.Subject)},yU.noop,n)),function(){i?.unsubscribe(),i=null}})}ef.window=bU});var Tv=_(bo=>{"use strict";var _U=bo&&bo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bo,"__esModule",{value:!0});bo.windowCount=void 0;var B0=Xe(),PU=z(),wU=U();function OU(r,e){e===void 0&&(e=0);var t=e>0?e:r;return PU.operate(function(i,n){var s=[new B0.Subject],c=[],l=0;n.next(s[0].asObservable()),i.subscribe(wU.createOperatorSubscriber(n,function(h){var p,v;try{for(var b=_U(s),w=b.next();!w.done;w=b.next()){var T=w.value;T.next(h)}}catch(L){p={error:L}}finally{try{w&&!w.done&&(v=b.return)&&v.call(b)}finally{if(p)throw p.error}}var E=l-r+1;if(E>=0&&E%t===0&&s.shift().complete(),++l%t===0){var M=new B0.Subject;s.push(M),n.next(M.asObservable())}},function(){for(;s.length>0;)s.shift().complete();n.complete()},function(h){for(;s.length>0;)s.shift().error(h);n.error(h)},function(){c=null,s=null}))})}bo.windowCount=OU});var Cv=_(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.windowTime=void 0;var SU=Xe(),TU=Pt(),CU=xt(),AU=z(),EU=U(),qU=Nr(),MU=wt(),H0=Vr();function xU(r){for(var e,t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=(e=MU.popScheduler(i))!==null&&e!==void 0?e:TU.asyncScheduler,c=(t=i[0])!==null&&t!==void 0?t:null,l=i[1]||1/0;return AU.operate(function(h,p){var v=[],b=!1,w=function(L){var D=L.window,N=L.subs;D.complete(),N.unsubscribe(),qU.arrRemove(v,L),b&&T()},T=function(){if(v){var L=new CU.Subscription;p.add(L);var D=new SU.Subject,N={window:D,subs:L,seen:0};v.push(N),p.next(D.asObservable()),H0.executeSchedule(L,s,function(){return w(N)},r)}};c!==null&&c>=0?H0.executeSchedule(p,s,T,c,!0):b=!0,T();var E=function(L){return v.slice().forEach(L)},M=function(L){E(function(D){var N=D.window;return L(N)}),L(p),p.unsubscribe()};return h.subscribe(EU.createOperatorSubscriber(p,function(L){E(function(D){D.window.next(L),l<=++D.seen&&w(D)})},function(){return M(function(L){return L.complete()})},function(L){return M(function(D){return D.error(L)})})),function(){v=null}})}tf.windowTime=xU});var Ev=_(_o=>{"use strict";var LU=_o&&_o.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(_o,"__esModule",{value:!0});_o.windowToggle=void 0;var jU=Xe(),IU=xt(),FU=z(),$0=X(),Av=U(),Y0=Qe(),DU=Nr();function kU(r,e){return FU.operate(function(t,i){var n=[],s=function(c){for(;0<n.length;)n.shift().error(c);i.error(c)};$0.innerFrom(r).subscribe(Av.createOperatorSubscriber(i,function(c){var l=new jU.Subject;n.push(l);var h=new IU.Subscription,p=function(){DU.arrRemove(n,l),l.complete(),h.unsubscribe()},v;try{v=$0.innerFrom(e(c))}catch(b){s(b);return}i.next(l.asObservable()),h.add(v.subscribe(Av.createOperatorSubscriber(i,p,Y0.noop,s)))},Y0.noop)),t.subscribe(Av.createOperatorSubscriber(i,function(c){var l,h,p=n.slice();try{for(var v=LU(p),b=v.next();!b.done;b=v.next()){var w=b.value;w.next(c)}}catch(T){l={error:T}}finally{try{b&&!b.done&&(h=v.return)&&h.call(v)}finally{if(l)throw l.error}}},function(){for(;0<n.length;)n.shift().complete();i.complete()},s,function(){for(;0<n.length;)n.shift().unsubscribe()}))})}_o.windowToggle=kU});var qv=_(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.windowWhen=void 0;var RU=Xe(),zU=z(),Q0=U(),NU=X();function VU(r){return zU.operate(function(e,t){var i,n,s=function(l){i.error(l),t.error(l)},c=function(){n?.unsubscribe(),i?.complete(),i=new RU.Subject,t.next(i.asObservable());var l;try{l=NU.innerFrom(r())}catch(h){s(h);return}l.subscribe(n=Q0.createOperatorSubscriber(t,c,c,s))};c(),e.subscribe(Q0.createOperatorSubscriber(t,function(l){return i.next(l)},function(){i.complete(),t.complete()},s,function(){n?.unsubscribe(),i=null}))})}rf.windowWhen=VU});var Mv=_(Ai=>{"use strict";var K0=Ai&&Ai.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},X0=Ai&&Ai.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.withLatestFrom=void 0;var WU=z(),J0=U(),UU=X(),GU=Ke(),BU=Qe(),HU=wt();function $U(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=HU.popResultSelector(r);return WU.operate(function(i,n){for(var s=r.length,c=new Array(s),l=r.map(function(){return!1}),h=!1,p=function(b){UU.innerFrom(r[b]).subscribe(J0.createOperatorSubscriber(n,function(w){c[b]=w,!h&&!l[b]&&(l[b]=!0,(h=l.every(GU.identity))&&(l=null))},BU.noop))},v=0;v<s;v++)p(v);i.subscribe(J0.createOperatorSubscriber(n,function(b){if(h){var w=X0([b],K0(c));n.next(t?t.apply(void 0,X0([],K0(w))):w)}}))})}Ai.withLatestFrom=$U});var xv=_(nf=>{"use strict";Object.defineProperty(nf,"__esModule",{value:!0});nf.zipAll=void 0;var YU=fc(),QU=hd();function KU(r){return QU.joinAllInternals(YU.zip,r)}nf.zipAll=KU});var Lv=_(Ei=>{"use strict";var XU=Ei&&Ei.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},JU=Ei&&Ei.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.zip=void 0;var ZU=fc(),eG=z();function tG(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return eG.operate(function(t,i){ZU.zip.apply(void 0,JU([t],XU(r))).subscribe(i)})}Ei.zip=tG});var jv=_(qi=>{"use strict";var rG=qi&&qi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},iG=qi&&qi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(qi,"__esModule",{value:!0});qi.zipWith=void 0;var nG=Lv();function oG(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return nG.zip.apply(void 0,iG([],rG(r)))}qi.zipWith=oG});var Mi=_(m=>{"use strict";var aG=m&&m.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),sG=m&&m.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&aG(e,r,t)};Object.defineProperty(m,"__esModule",{value:!0});m.interval=m.iif=m.generate=m.fromEventPattern=m.fromEvent=m.from=m.forkJoin=m.empty=m.defer=m.connectable=m.concat=m.combineLatest=m.bindNodeCallback=m.bindCallback=m.UnsubscriptionError=m.TimeoutError=m.SequenceError=m.ObjectUnsubscribedError=m.NotFoundError=m.EmptyError=m.ArgumentOutOfRangeError=m.firstValueFrom=m.lastValueFrom=m.isObservable=m.identity=m.noop=m.pipe=m.NotificationKind=m.Notification=m.Subscriber=m.Subscription=m.Scheduler=m.VirtualAction=m.VirtualTimeScheduler=m.animationFrameScheduler=m.animationFrame=m.queueScheduler=m.queue=m.asyncScheduler=m.async=m.asapScheduler=m.asap=m.AsyncSubject=m.ReplaySubject=m.BehaviorSubject=m.Subject=m.animationFrames=m.observable=m.ConnectableObservable=m.Observable=void 0;m.filter=m.expand=m.exhaustMap=m.exhaustAll=m.exhaust=m.every=m.endWith=m.elementAt=m.distinctUntilKeyChanged=m.distinctUntilChanged=m.distinct=m.dematerialize=m.delayWhen=m.delay=m.defaultIfEmpty=m.debounceTime=m.debounce=m.count=m.connect=m.concatWith=m.concatMapTo=m.concatMap=m.concatAll=m.combineLatestWith=m.combineLatestAll=m.combineAll=m.catchError=m.bufferWhen=m.bufferToggle=m.bufferTime=m.bufferCount=m.buffer=m.auditTime=m.audit=m.config=m.NEVER=m.EMPTY=m.scheduled=m.zip=m.using=m.timer=m.throwError=m.range=m.race=m.partition=m.pairs=m.onErrorResumeNext=m.of=m.never=m.merge=void 0;m.switchMap=m.switchAll=m.subscribeOn=m.startWith=m.skipWhile=m.skipUntil=m.skipLast=m.skip=m.single=m.shareReplay=m.share=m.sequenceEqual=m.scan=m.sampleTime=m.sample=m.refCount=m.retryWhen=m.retry=m.repeatWhen=m.repeat=m.reduce=m.raceWith=m.publishReplay=m.publishLast=m.publishBehavior=m.publish=m.pluck=m.pairwise=m.onErrorResumeNextWith=m.observeOn=m.multicast=m.min=m.mergeWith=m.mergeScan=m.mergeMapTo=m.mergeMap=m.flatMap=m.mergeAll=m.max=m.materialize=m.mapTo=m.map=m.last=m.isEmpty=m.ignoreElements=m.groupBy=m.first=m.findIndex=m.find=m.finalize=void 0;m.zipWith=m.zipAll=m.withLatestFrom=m.windowWhen=m.windowToggle=m.windowTime=m.windowCount=m.window=m.toArray=m.timestamp=m.timeoutWith=m.timeout=m.timeInterval=m.throwIfEmpty=m.throttleTime=m.throttle=m.tap=m.takeWhile=m.takeUntil=m.takeLast=m.take=m.switchScan=m.switchMapTo=void 0;var uG=he();Object.defineProperty(m,"Observable",{enumerable:!0,get:function(){return uG.Observable}});var cG=ya();Object.defineProperty(m,"ConnectableObservable",{enumerable:!0,get:function(){return cG.ConnectableObservable}});var lG=va();Object.defineProperty(m,"observable",{enumerable:!0,get:function(){return lG.observable}});var fG=Mb();Object.defineProperty(m,"animationFrames",{enumerable:!0,get:function(){return fG.animationFrames}});var hG=Xe();Object.defineProperty(m,"Subject",{enumerable:!0,get:function(){return hG.Subject}});var pG=Cp();Object.defineProperty(m,"BehaviorSubject",{enumerable:!0,get:function(){return pG.BehaviorSubject}});var dG=eu();Object.defineProperty(m,"ReplaySubject",{enumerable:!0,get:function(){return dG.ReplaySubject}});var vG=tu();Object.defineProperty(m,"AsyncSubject",{enumerable:!0,get:function(){return vG.AsyncSubject}});var Z0=$b();Object.defineProperty(m,"asap",{enumerable:!0,get:function(){return Z0.asap}});Object.defineProperty(m,"asapScheduler",{enumerable:!0,get:function(){return Z0.asapScheduler}});var eP=Pt();Object.defineProperty(m,"async",{enumerable:!0,get:function(){return eP.async}});Object.defineProperty(m,"asyncScheduler",{enumerable:!0,get:function(){return eP.asyncScheduler}});var tP=Kb();Object.defineProperty(m,"queue",{enumerable:!0,get:function(){return tP.queue}});Object.defineProperty(m,"queueScheduler",{enumerable:!0,get:function(){return tP.queueScheduler}});var rP=e_();Object.defineProperty(m,"animationFrame",{enumerable:!0,get:function(){return rP.animationFrame}});Object.defineProperty(m,"animationFrameScheduler",{enumerable:!0,get:function(){return rP.animationFrameScheduler}});var iP=i_();Object.defineProperty(m,"VirtualTimeScheduler",{enumerable:!0,get:function(){return iP.VirtualTimeScheduler}});Object.defineProperty(m,"VirtualAction",{enumerable:!0,get:function(){return iP.VirtualAction}});var mG=Ep();Object.defineProperty(m,"Scheduler",{enumerable:!0,get:function(){return mG.Scheduler}});var yG=xt();Object.defineProperty(m,"Subscription",{enumerable:!0,get:function(){return yG.Subscription}});var gG=jn();Object.defineProperty(m,"Subscriber",{enumerable:!0,get:function(){return gG.Subscriber}});var nP=Au();Object.defineProperty(m,"Notification",{enumerable:!0,get:function(){return nP.Notification}});Object.defineProperty(m,"NotificationKind",{enumerable:!0,get:function(){return nP.NotificationKind}});var bG=ma();Object.defineProperty(m,"pipe",{enumerable:!0,get:function(){return bG.pipe}});var _G=Qe();Object.defineProperty(m,"noop",{enumerable:!0,get:function(){return _G.noop}});var PG=Ke();Object.defineProperty(m,"identity",{enumerable:!0,get:function(){return PG.identity}});var wG=__();Object.defineProperty(m,"isObservable",{enumerable:!0,get:function(){return wG.isObservable}});var OG=P_();Object.defineProperty(m,"lastValueFrom",{enumerable:!0,get:function(){return OG.lastValueFrom}});var SG=w_();Object.defineProperty(m,"firstValueFrom",{enumerable:!0,get:function(){return SG.firstValueFrom}});var TG=Up();Object.defineProperty(m,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return TG.ArgumentOutOfRangeError}});var CG=fi();Object.defineProperty(m,"EmptyError",{enumerable:!0,get:function(){return CG.EmptyError}});var AG=Gp();Object.defineProperty(m,"NotFoundError",{enumerable:!0,get:function(){return AG.NotFoundError}});var EG=wp();Object.defineProperty(m,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return EG.ObjectUnsubscribedError}});var qG=Bp();Object.defineProperty(m,"SequenceError",{enumerable:!0,get:function(){return qG.SequenceError}});var MG=Pa();Object.defineProperty(m,"TimeoutError",{enumerable:!0,get:function(){return MG.TimeoutError}});var xG=lp();Object.defineProperty(m,"UnsubscriptionError",{enumerable:!0,get:function(){return xG.UnsubscriptionError}});var LG=S_();Object.defineProperty(m,"bindCallback",{enumerable:!0,get:function(){return LG.bindCallback}});var jG=T_();Object.defineProperty(m,"bindNodeCallback",{enumerable:!0,get:function(){return jG.bindNodeCallback}});var IG=Wu();Object.defineProperty(m,"combineLatest",{enumerable:!0,get:function(){return IG.combineLatest}});var FG=Oa();Object.defineProperty(m,"concat",{enumerable:!0,get:function(){return FG.concat}});var DG=j_();Object.defineProperty(m,"connectable",{enumerable:!0,get:function(){return DG.connectable}});var kG=Sa();Object.defineProperty(m,"defer",{enumerable:!0,get:function(){return kG.defer}});var RG=er();Object.defineProperty(m,"empty",{enumerable:!0,get:function(){return RG.empty}});var zG=I_();Object.defineProperty(m,"forkJoin",{enumerable:!0,get:function(){return zG.forkJoin}});var NG=Wr();Object.defineProperty(m,"from",{enumerable:!0,get:function(){return NG.from}});var VG=D_();Object.defineProperty(m,"fromEvent",{enumerable:!0,get:function(){return VG.fromEvent}});var WG=R_();Object.defineProperty(m,"fromEventPattern",{enumerable:!0,get:function(){return WG.fromEventPattern}});var UG=N_();Object.defineProperty(m,"generate",{enumerable:!0,get:function(){return UG.generate}});var GG=V_();Object.defineProperty(m,"iif",{enumerable:!0,get:function(){return GG.iif}});var BG=Xp();Object.defineProperty(m,"interval",{enumerable:!0,get:function(){return BG.interval}});var HG=U_();Object.defineProperty(m,"merge",{enumerable:!0,get:function(){return HG.merge}});var $G=Jp();Object.defineProperty(m,"never",{enumerable:!0,get:function(){return $G.never}});var YG=Tu();Object.defineProperty(m,"of",{enumerable:!0,get:function(){return YG.of}});var QG=Zp();Object.defineProperty(m,"onErrorResumeNext",{enumerable:!0,get:function(){return QG.onErrorResumeNext}});var KG=B_();Object.defineProperty(m,"pairs",{enumerable:!0,get:function(){return KG.pairs}});var XG=Y_();Object.defineProperty(m,"partition",{enumerable:!0,get:function(){return XG.partition}});var JG=td();Object.defineProperty(m,"race",{enumerable:!0,get:function(){return JG.race}});var ZG=X_();Object.defineProperty(m,"range",{enumerable:!0,get:function(){return ZG.range}});var eB=Wp();Object.defineProperty(m,"throwError",{enumerable:!0,get:function(){return eB.throwError}});var tB=vi();Object.defineProperty(m,"timer",{enumerable:!0,get:function(){return tB.timer}});var rB=J_();Object.defineProperty(m,"using",{enumerable:!0,get:function(){return rB.using}});var iB=fc();Object.defineProperty(m,"zip",{enumerable:!0,get:function(){return iB.zip}});var nB=Vp();Object.defineProperty(m,"scheduled",{enumerable:!0,get:function(){return nB.scheduled}});var oB=er();Object.defineProperty(m,"EMPTY",{enumerable:!0,get:function(){return oB.EMPTY}});var aB=Jp();Object.defineProperty(m,"NEVER",{enumerable:!0,get:function(){return aB.NEVER}});sG(e0(),m);var sB=xn();Object.defineProperty(m,"config",{enumerable:!0,get:function(){return sB.config}});var uB=pc();Object.defineProperty(m,"audit",{enumerable:!0,get:function(){return uB.audit}});var cB=rd();Object.defineProperty(m,"auditTime",{enumerable:!0,get:function(){return cB.auditTime}});var lB=id();Object.defineProperty(m,"buffer",{enumerable:!0,get:function(){return lB.buffer}});var fB=od();Object.defineProperty(m,"bufferCount",{enumerable:!0,get:function(){return fB.bufferCount}});var hB=ad();Object.defineProperty(m,"bufferTime",{enumerable:!0,get:function(){return hB.bufferTime}});var pB=ud();Object.defineProperty(m,"bufferToggle",{enumerable:!0,get:function(){return pB.bufferToggle}});var dB=cd();Object.defineProperty(m,"bufferWhen",{enumerable:!0,get:function(){return dB.bufferWhen}});var vB=ld();Object.defineProperty(m,"catchError",{enumerable:!0,get:function(){return vB.catchError}});var mB=pd();Object.defineProperty(m,"combineAll",{enumerable:!0,get:function(){return mB.combineAll}});var yB=Sc();Object.defineProperty(m,"combineLatestAll",{enumerable:!0,get:function(){return yB.combineLatestAll}});var gB=vd();Object.defineProperty(m,"combineLatestWith",{enumerable:!0,get:function(){return gB.combineLatestWith}});var bB=wa();Object.defineProperty(m,"concatAll",{enumerable:!0,get:function(){return bB.concatAll}});var _B=Ac();Object.defineProperty(m,"concatMap",{enumerable:!0,get:function(){return _B.concatMap}});var PB=md();Object.defineProperty(m,"concatMapTo",{enumerable:!0,get:function(){return PB.concatMapTo}});var wB=gd();Object.defineProperty(m,"concatWith",{enumerable:!0,get:function(){return wB.concatWith}});var OB=Ta();Object.defineProperty(m,"connect",{enumerable:!0,get:function(){return OB.connect}});var SB=bd();Object.defineProperty(m,"count",{enumerable:!0,get:function(){return SB.count}});var TB=_d();Object.defineProperty(m,"debounce",{enumerable:!0,get:function(){return TB.debounce}});var CB=Pd();Object.defineProperty(m,"debounceTime",{enumerable:!0,get:function(){return CB.debounceTime}});var AB=fo();Object.defineProperty(m,"defaultIfEmpty",{enumerable:!0,get:function(){return AB.defaultIfEmpty}});var EB=wd();Object.defineProperty(m,"delay",{enumerable:!0,get:function(){return EB.delay}});var qB=Vc();Object.defineProperty(m,"delayWhen",{enumerable:!0,get:function(){return qB.delayWhen}});var MB=Od();Object.defineProperty(m,"dematerialize",{enumerable:!0,get:function(){return MB.dematerialize}});var xB=Sd();Object.defineProperty(m,"distinct",{enumerable:!0,get:function(){return xB.distinct}});var LB=Hc();Object.defineProperty(m,"distinctUntilChanged",{enumerable:!0,get:function(){return LB.distinctUntilChanged}});var jB=Td();Object.defineProperty(m,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return jB.distinctUntilKeyChanged}});var IB=Cd();Object.defineProperty(m,"elementAt",{enumerable:!0,get:function(){return IB.elementAt}});var FB=Ad();Object.defineProperty(m,"endWith",{enumerable:!0,get:function(){return FB.endWith}});var DB=Ed();Object.defineProperty(m,"every",{enumerable:!0,get:function(){return DB.every}});var kB=qd();Object.defineProperty(m,"exhaust",{enumerable:!0,get:function(){return kB.exhaust}});var RB=el();Object.defineProperty(m,"exhaustAll",{enumerable:!0,get:function(){return RB.exhaustAll}});var zB=Jc();Object.defineProperty(m,"exhaustMap",{enumerable:!0,get:function(){return zB.exhaustMap}});var NB=Md();Object.defineProperty(m,"expand",{enumerable:!0,get:function(){return NB.expand}});var VB=Br();Object.defineProperty(m,"filter",{enumerable:!0,get:function(){return VB.filter}});var WB=xd();Object.defineProperty(m,"finalize",{enumerable:!0,get:function(){return WB.finalize}});var UB=nl();Object.defineProperty(m,"find",{enumerable:!0,get:function(){return UB.find}});var GB=Ld();Object.defineProperty(m,"findIndex",{enumerable:!0,get:function(){return GB.findIndex}});var BB=jd();Object.defineProperty(m,"first",{enumerable:!0,get:function(){return BB.first}});var HB=Id();Object.defineProperty(m,"groupBy",{enumerable:!0,get:function(){return HB.groupBy}});var $B=kc();Object.defineProperty(m,"ignoreElements",{enumerable:!0,get:function(){return $B.ignoreElements}});var YB=Fd();Object.defineProperty(m,"isEmpty",{enumerable:!0,get:function(){return YB.isEmpty}});var QB=Dd();Object.defineProperty(m,"last",{enumerable:!0,get:function(){return QB.last}});var KB=Gr();Object.defineProperty(m,"map",{enumerable:!0,get:function(){return KB.map}});var XB=zc();Object.defineProperty(m,"mapTo",{enumerable:!0,get:function(){return XB.mapTo}});var JB=Rd();Object.defineProperty(m,"materialize",{enumerable:!0,get:function(){return JB.materialize}});var ZB=zd();Object.defineProperty(m,"max",{enumerable:!0,get:function(){return ZB.max}});var eH=no();Object.defineProperty(m,"mergeAll",{enumerable:!0,get:function(){return eH.mergeAll}});var tH=Nd();Object.defineProperty(m,"flatMap",{enumerable:!0,get:function(){return tH.flatMap}});var rH=vr();Object.defineProperty(m,"mergeMap",{enumerable:!0,get:function(){return rH.mergeMap}});var iH=Vd();Object.defineProperty(m,"mergeMapTo",{enumerable:!0,get:function(){return iH.mergeMapTo}});var nH=Wd();Object.defineProperty(m,"mergeScan",{enumerable:!0,get:function(){return nH.mergeScan}});var oH=Gd();Object.defineProperty(m,"mergeWith",{enumerable:!0,get:function(){return oH.mergeWith}});var aH=Bd();Object.defineProperty(m,"min",{enumerable:!0,get:function(){return aH.min}});var sH=Ca();Object.defineProperty(m,"multicast",{enumerable:!0,get:function(){return sH.multicast}});var uH=to();Object.defineProperty(m,"observeOn",{enumerable:!0,get:function(){return uH.observeOn}});var cH=Hd();Object.defineProperty(m,"onErrorResumeNextWith",{enumerable:!0,get:function(){return cH.onErrorResumeNextWith}});var lH=$d();Object.defineProperty(m,"pairwise",{enumerable:!0,get:function(){return lH.pairwise}});var fH=Yd();Object.defineProperty(m,"pluck",{enumerable:!0,get:function(){return fH.pluck}});var hH=Qd();Object.defineProperty(m,"publish",{enumerable:!0,get:function(){return hH.publish}});var pH=Kd();Object.defineProperty(m,"publishBehavior",{enumerable:!0,get:function(){return pH.publishBehavior}});var dH=Xd();Object.defineProperty(m,"publishLast",{enumerable:!0,get:function(){return dH.publishLast}});var vH=Jd();Object.defineProperty(m,"publishReplay",{enumerable:!0,get:function(){return vH.publishReplay}});var mH=Sl();Object.defineProperty(m,"raceWith",{enumerable:!0,get:function(){return mH.raceWith}});var yH=on();Object.defineProperty(m,"reduce",{enumerable:!0,get:function(){return yH.reduce}});var gH=Zd();Object.defineProperty(m,"repeat",{enumerable:!0,get:function(){return gH.repeat}});var bH=ev();Object.defineProperty(m,"repeatWhen",{enumerable:!0,get:function(){return bH.repeatWhen}});var _H=tv();Object.defineProperty(m,"retry",{enumerable:!0,get:function(){return _H.retry}});var PH=rv();Object.defineProperty(m,"retryWhen",{enumerable:!0,get:function(){return PH.retryWhen}});var wH=Ks();Object.defineProperty(m,"refCount",{enumerable:!0,get:function(){return wH.refCount}});var OH=Ml();Object.defineProperty(m,"sample",{enumerable:!0,get:function(){return OH.sample}});var SH=iv();Object.defineProperty(m,"sampleTime",{enumerable:!0,get:function(){return SH.sampleTime}});var TH=nv();Object.defineProperty(m,"scan",{enumerable:!0,get:function(){return TH.scan}});var CH=ov();Object.defineProperty(m,"sequenceEqual",{enumerable:!0,get:function(){return CH.sequenceEqual}});var AH=Il();Object.defineProperty(m,"share",{enumerable:!0,get:function(){return AH.share}});var EH=sv();Object.defineProperty(m,"shareReplay",{enumerable:!0,get:function(){return EH.shareReplay}});var qH=uv();Object.defineProperty(m,"single",{enumerable:!0,get:function(){return qH.single}});var MH=cv();Object.defineProperty(m,"skip",{enumerable:!0,get:function(){return MH.skip}});var xH=lv();Object.defineProperty(m,"skipLast",{enumerable:!0,get:function(){return xH.skipLast}});var LH=fv();Object.defineProperty(m,"skipUntil",{enumerable:!0,get:function(){return LH.skipUntil}});var jH=hv();Object.defineProperty(m,"skipWhile",{enumerable:!0,get:function(){return jH.skipWhile}});var IH=pv();Object.defineProperty(m,"startWith",{enumerable:!0,get:function(){return IH.startWith}});var FH=ro();Object.defineProperty(m,"subscribeOn",{enumerable:!0,get:function(){return FH.subscribeOn}});var DH=dv();Object.defineProperty(m,"switchAll",{enumerable:!0,get:function(){return DH.switchAll}});var kH=yo();Object.defineProperty(m,"switchMap",{enumerable:!0,get:function(){return kH.switchMap}});var RH=vv();Object.defineProperty(m,"switchMapTo",{enumerable:!0,get:function(){return RH.switchMapTo}});var zH=mv();Object.defineProperty(m,"switchScan",{enumerable:!0,get:function(){return zH.switchScan}});var NH=ho();Object.defineProperty(m,"take",{enumerable:!0,get:function(){return NH.take}});var VH=cl();Object.defineProperty(m,"takeLast",{enumerable:!0,get:function(){return VH.takeLast}});var WH=yv();Object.defineProperty(m,"takeUntil",{enumerable:!0,get:function(){return WH.takeUntil}});var UH=gv();Object.defineProperty(m,"takeWhile",{enumerable:!0,get:function(){return UH.takeWhile}});var GH=bv();Object.defineProperty(m,"tap",{enumerable:!0,get:function(){return GH.tap}});var BH=Kl();Object.defineProperty(m,"throttle",{enumerable:!0,get:function(){return BH.throttle}});var HH=_v();Object.defineProperty(m,"throttleTime",{enumerable:!0,get:function(){return HH.throttleTime}});var $H=po();Object.defineProperty(m,"throwIfEmpty",{enumerable:!0,get:function(){return $H.throwIfEmpty}});var YH=Pv();Object.defineProperty(m,"timeInterval",{enumerable:!0,get:function(){return YH.timeInterval}});var QH=Pa();Object.defineProperty(m,"timeout",{enumerable:!0,get:function(){return QH.timeout}});var KH=wv();Object.defineProperty(m,"timeoutWith",{enumerable:!0,get:function(){return KH.timeoutWith}});var XH=Ov();Object.defineProperty(m,"timestamp",{enumerable:!0,get:function(){return XH.timestamp}});var JH=Pc();Object.defineProperty(m,"toArray",{enumerable:!0,get:function(){return JH.toArray}});var ZH=Sv();Object.defineProperty(m,"window",{enumerable:!0,get:function(){return ZH.window}});var e3=Tv();Object.defineProperty(m,"windowCount",{enumerable:!0,get:function(){return e3.windowCount}});var t3=Cv();Object.defineProperty(m,"windowTime",{enumerable:!0,get:function(){return t3.windowTime}});var r3=Ev();Object.defineProperty(m,"windowToggle",{enumerable:!0,get:function(){return r3.windowToggle}});var i3=qv();Object.defineProperty(m,"windowWhen",{enumerable:!0,get:function(){return i3.windowWhen}});var n3=Mv();Object.defineProperty(m,"withLatestFrom",{enumerable:!0,get:function(){return n3.withLatestFrom}});var o3=xv();Object.defineProperty(m,"zipAll",{enumerable:!0,get:function(){return o3.zipAll}});var a3=jv();Object.defineProperty(m,"zipWith",{enumerable:!0,get:function(){return a3.zipWith}})});var sP=_(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.partition=void 0;var s3=ed(),aP=Br();function u3(r,e){return function(t){return[aP.filter(r,e)(t),aP.filter(s3.not(r,e))(t)]}}af.partition=u3});var uP=_(Li=>{"use strict";var c3=Li&&Li.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){c={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return s},l3=Li&&Li.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Li,"__esModule",{value:!0});Li.race=void 0;var f3=mi(),h3=Sl();function p3(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return h3.raceWith.apply(void 0,l3([],c3(f3.argsOrArgArray(r))))}Li.race=p3});var Po=_(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.mergeAll=O.merge=O.max=O.materialize=O.mapTo=O.map=O.last=O.isEmpty=O.ignoreElements=O.groupBy=O.first=O.findIndex=O.find=O.finalize=O.filter=O.expand=O.exhaustMap=O.exhaustAll=O.exhaust=O.every=O.endWith=O.elementAt=O.distinctUntilKeyChanged=O.distinctUntilChanged=O.distinct=O.dematerialize=O.delayWhen=O.delay=O.defaultIfEmpty=O.debounceTime=O.debounce=O.count=O.connect=O.concatWith=O.concatMapTo=O.concatMap=O.concatAll=O.concat=O.combineLatestWith=O.combineLatest=O.combineLatestAll=O.combineAll=O.catchError=O.bufferWhen=O.bufferToggle=O.bufferTime=O.bufferCount=O.buffer=O.auditTime=O.audit=void 0;O.timeInterval=O.throwIfEmpty=O.throttleTime=O.throttle=O.tap=O.takeWhile=O.takeUntil=O.takeLast=O.take=O.switchScan=O.switchMapTo=O.switchMap=O.switchAll=O.subscribeOn=O.startWith=O.skipWhile=O.skipUntil=O.skipLast=O.skip=O.single=O.shareReplay=O.share=O.sequenceEqual=O.scan=O.sampleTime=O.sample=O.refCount=O.retryWhen=O.retry=O.repeatWhen=O.repeat=O.reduce=O.raceWith=O.race=O.publishReplay=O.publishLast=O.publishBehavior=O.publish=O.pluck=O.partition=O.pairwise=O.onErrorResumeNext=O.observeOn=O.multicast=O.min=O.mergeWith=O.mergeScan=O.mergeMapTo=O.mergeMap=O.flatMap=void 0;O.zipWith=O.zipAll=O.zip=O.withLatestFrom=O.windowWhen=O.windowToggle=O.windowTime=O.windowCount=O.window=O.toArray=O.timestamp=O.timeoutWith=O.timeout=void 0;var d3=pc();Object.defineProperty(O,"audit",{enumerable:!0,get:function(){return d3.audit}});var v3=rd();Object.defineProperty(O,"auditTime",{enumerable:!0,get:function(){return v3.auditTime}});var m3=id();Object.defineProperty(O,"buffer",{enumerable:!0,get:function(){return m3.buffer}});var y3=od();Object.defineProperty(O,"bufferCount",{enumerable:!0,get:function(){return y3.bufferCount}});var g3=ad();Object.defineProperty(O,"bufferTime",{enumerable:!0,get:function(){return g3.bufferTime}});var b3=ud();Object.defineProperty(O,"bufferToggle",{enumerable:!0,get:function(){return b3.bufferToggle}});var _3=cd();Object.defineProperty(O,"bufferWhen",{enumerable:!0,get:function(){return _3.bufferWhen}});var P3=ld();Object.defineProperty(O,"catchError",{enumerable:!0,get:function(){return P3.catchError}});var w3=pd();Object.defineProperty(O,"combineAll",{enumerable:!0,get:function(){return w3.combineAll}});var O3=Sc();Object.defineProperty(O,"combineLatestAll",{enumerable:!0,get:function(){return O3.combineLatestAll}});var S3=dd();Object.defineProperty(O,"combineLatest",{enumerable:!0,get:function(){return S3.combineLatest}});var T3=vd();Object.defineProperty(O,"combineLatestWith",{enumerable:!0,get:function(){return T3.combineLatestWith}});var C3=yd();Object.defineProperty(O,"concat",{enumerable:!0,get:function(){return C3.concat}});var A3=wa();Object.defineProperty(O,"concatAll",{enumerable:!0,get:function(){return A3.concatAll}});var E3=Ac();Object.defineProperty(O,"concatMap",{enumerable:!0,get:function(){return E3.concatMap}});var q3=md();Object.defineProperty(O,"concatMapTo",{enumerable:!0,get:function(){return q3.concatMapTo}});var M3=gd();Object.defineProperty(O,"concatWith",{enumerable:!0,get:function(){return M3.concatWith}});var x3=Ta();Object.defineProperty(O,"connect",{enumerable:!0,get:function(){return x3.connect}});var L3=bd();Object.defineProperty(O,"count",{enumerable:!0,get:function(){return L3.count}});var j3=_d();Object.defineProperty(O,"debounce",{enumerable:!0,get:function(){return j3.debounce}});var I3=Pd();Object.defineProperty(O,"debounceTime",{enumerable:!0,get:function(){return I3.debounceTime}});var F3=fo();Object.defineProperty(O,"defaultIfEmpty",{enumerable:!0,get:function(){return F3.defaultIfEmpty}});var D3=wd();Object.defineProperty(O,"delay",{enumerable:!0,get:function(){return D3.delay}});var k3=Vc();Object.defineProperty(O,"delayWhen",{enumerable:!0,get:function(){return k3.delayWhen}});var R3=Od();Object.defineProperty(O,"dematerialize",{enumerable:!0,get:function(){return R3.dematerialize}});var z3=Sd();Object.defineProperty(O,"distinct",{enumerable:!0,get:function(){return z3.distinct}});var N3=Hc();Object.defineProperty(O,"distinctUntilChanged",{enumerable:!0,get:function(){return N3.distinctUntilChanged}});var V3=Td();Object.defineProperty(O,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return V3.distinctUntilKeyChanged}});var W3=Cd();Object.defineProperty(O,"elementAt",{enumerable:!0,get:function(){return W3.elementAt}});var U3=Ad();Object.defineProperty(O,"endWith",{enumerable:!0,get:function(){return U3.endWith}});var G3=Ed();Object.defineProperty(O,"every",{enumerable:!0,get:function(){return G3.every}});var B3=qd();Object.defineProperty(O,"exhaust",{enumerable:!0,get:function(){return B3.exhaust}});var H3=el();Object.defineProperty(O,"exhaustAll",{enumerable:!0,get:function(){return H3.exhaustAll}});var $3=Jc();Object.defineProperty(O,"exhaustMap",{enumerable:!0,get:function(){return $3.exhaustMap}});var Y3=Md();Object.defineProperty(O,"expand",{enumerable:!0,get:function(){return Y3.expand}});var Q3=Br();Object.defineProperty(O,"filter",{enumerable:!0,get:function(){return Q3.filter}});var K3=xd();Object.defineProperty(O,"finalize",{enumerable:!0,get:function(){return K3.finalize}});var X3=nl();Object.defineProperty(O,"find",{enumerable:!0,get:function(){return X3.find}});var J3=Ld();Object.defineProperty(O,"findIndex",{enumerable:!0,get:function(){return J3.findIndex}});var Z3=jd();Object.defineProperty(O,"first",{enumerable:!0,get:function(){return Z3.first}});var e$=Id();Object.defineProperty(O,"groupBy",{enumerable:!0,get:function(){return e$.groupBy}});var t$=kc();Object.defineProperty(O,"ignoreElements",{enumerable:!0,get:function(){return t$.ignoreElements}});var r$=Fd();Object.defineProperty(O,"isEmpty",{enumerable:!0,get:function(){return r$.isEmpty}});var i$=Dd();Object.defineProperty(O,"last",{enumerable:!0,get:function(){return i$.last}});var n$=Gr();Object.defineProperty(O,"map",{enumerable:!0,get:function(){return n$.map}});var o$=zc();Object.defineProperty(O,"mapTo",{enumerable:!0,get:function(){return o$.mapTo}});var a$=Rd();Object.defineProperty(O,"materialize",{enumerable:!0,get:function(){return a$.materialize}});var s$=zd();Object.defineProperty(O,"max",{enumerable:!0,get:function(){return s$.max}});var u$=Ud();Object.defineProperty(O,"merge",{enumerable:!0,get:function(){return u$.merge}});var c$=no();Object.defineProperty(O,"mergeAll",{enumerable:!0,get:function(){return c$.mergeAll}});var l$=Nd();Object.defineProperty(O,"flatMap",{enumerable:!0,get:function(){return l$.flatMap}});var f$=vr();Object.defineProperty(O,"mergeMap",{enumerable:!0,get:function(){return f$.mergeMap}});var h$=Vd();Object.defineProperty(O,"mergeMapTo",{enumerable:!0,get:function(){return h$.mergeMapTo}});var p$=Wd();Object.defineProperty(O,"mergeScan",{enumerable:!0,get:function(){return p$.mergeScan}});var d$=Gd();Object.defineProperty(O,"mergeWith",{enumerable:!0,get:function(){return d$.mergeWith}});var v$=Bd();Object.defineProperty(O,"min",{enumerable:!0,get:function(){return v$.min}});var m$=Ca();Object.defineProperty(O,"multicast",{enumerable:!0,get:function(){return m$.multicast}});var y$=to();Object.defineProperty(O,"observeOn",{enumerable:!0,get:function(){return y$.observeOn}});var g$=Hd();Object.defineProperty(O,"onErrorResumeNext",{enumerable:!0,get:function(){return g$.onErrorResumeNext}});var b$=$d();Object.defineProperty(O,"pairwise",{enumerable:!0,get:function(){return b$.pairwise}});var _$=sP();Object.defineProperty(O,"partition",{enumerable:!0,get:function(){return _$.partition}});var P$=Yd();Object.defineProperty(O,"pluck",{enumerable:!0,get:function(){return P$.pluck}});var w$=Qd();Object.defineProperty(O,"publish",{enumerable:!0,get:function(){return w$.publish}});var O$=Kd();Object.defineProperty(O,"publishBehavior",{enumerable:!0,get:function(){return O$.publishBehavior}});var S$=Xd();Object.defineProperty(O,"publishLast",{enumerable:!0,get:function(){return S$.publishLast}});var T$=Jd();Object.defineProperty(O,"publishReplay",{enumerable:!0,get:function(){return T$.publishReplay}});var C$=uP();Object.defineProperty(O,"race",{enumerable:!0,get:function(){return C$.race}});var A$=Sl();Object.defineProperty(O,"raceWith",{enumerable:!0,get:function(){return A$.raceWith}});var E$=on();Object.defineProperty(O,"reduce",{enumerable:!0,get:function(){return E$.reduce}});var q$=Zd();Object.defineProperty(O,"repeat",{enumerable:!0,get:function(){return q$.repeat}});var M$=ev();Object.defineProperty(O,"repeatWhen",{enumerable:!0,get:function(){return M$.repeatWhen}});var x$=tv();Object.defineProperty(O,"retry",{enumerable:!0,get:function(){return x$.retry}});var L$=rv();Object.defineProperty(O,"retryWhen",{enumerable:!0,get:function(){return L$.retryWhen}});var j$=Ks();Object.defineProperty(O,"refCount",{enumerable:!0,get:function(){return j$.refCount}});var I$=Ml();Object.defineProperty(O,"sample",{enumerable:!0,get:function(){return I$.sample}});var F$=iv();Object.defineProperty(O,"sampleTime",{enumerable:!0,get:function(){return F$.sampleTime}});var D$=nv();Object.defineProperty(O,"scan",{enumerable:!0,get:function(){return D$.scan}});var k$=ov();Object.defineProperty(O,"sequenceEqual",{enumerable:!0,get:function(){return k$.sequenceEqual}});var R$=Il();Object.defineProperty(O,"share",{enumerable:!0,get:function(){return R$.share}});var z$=sv();Object.defineProperty(O,"shareReplay",{enumerable:!0,get:function(){return z$.shareReplay}});var N$=uv();Object.defineProperty(O,"single",{enumerable:!0,get:function(){return N$.single}});var V$=cv();Object.defineProperty(O,"skip",{enumerable:!0,get:function(){return V$.skip}});var W$=lv();Object.defineProperty(O,"skipLast",{enumerable:!0,get:function(){return W$.skipLast}});var U$=fv();Object.defineProperty(O,"skipUntil",{enumerable:!0,get:function(){return U$.skipUntil}});var G$=hv();Object.defineProperty(O,"skipWhile",{enumerable:!0,get:function(){return G$.skipWhile}});var B$=pv();Object.defineProperty(O,"startWith",{enumerable:!0,get:function(){return B$.startWith}});var H$=ro();Object.defineProperty(O,"subscribeOn",{enumerable:!0,get:function(){return H$.subscribeOn}});var $$=dv();Object.defineProperty(O,"switchAll",{enumerable:!0,get:function(){return $$.switchAll}});var Y$=yo();Object.defineProperty(O,"switchMap",{enumerable:!0,get:function(){return Y$.switchMap}});var Q$=vv();Object.defineProperty(O,"switchMapTo",{enumerable:!0,get:function(){return Q$.switchMapTo}});var K$=mv();Object.defineProperty(O,"switchScan",{enumerable:!0,get:function(){return K$.switchScan}});var X$=ho();Object.defineProperty(O,"take",{enumerable:!0,get:function(){return X$.take}});var J$=cl();Object.defineProperty(O,"takeLast",{enumerable:!0,get:function(){return J$.takeLast}});var Z$=yv();Object.defineProperty(O,"takeUntil",{enumerable:!0,get:function(){return Z$.takeUntil}});var e6=gv();Object.defineProperty(O,"takeWhile",{enumerable:!0,get:function(){return e6.takeWhile}});var t6=bv();Object.defineProperty(O,"tap",{enumerable:!0,get:function(){return t6.tap}});var r6=Kl();Object.defineProperty(O,"throttle",{enumerable:!0,get:function(){return r6.throttle}});var i6=_v();Object.defineProperty(O,"throttleTime",{enumerable:!0,get:function(){return i6.throttleTime}});var n6=po();Object.defineProperty(O,"throwIfEmpty",{enumerable:!0,get:function(){return n6.throwIfEmpty}});var o6=Pv();Object.defineProperty(O,"timeInterval",{enumerable:!0,get:function(){return o6.timeInterval}});var a6=Pa();Object.defineProperty(O,"timeout",{enumerable:!0,get:function(){return a6.timeout}});var s6=wv();Object.defineProperty(O,"timeoutWith",{enumerable:!0,get:function(){return s6.timeoutWith}});var u6=Ov();Object.defineProperty(O,"timestamp",{enumerable:!0,get:function(){return u6.timestamp}});var c6=Pc();Object.defineProperty(O,"toArray",{enumerable:!0,get:function(){return c6.toArray}});var l6=Sv();Object.defineProperty(O,"window",{enumerable:!0,get:function(){return l6.window}});var f6=Tv();Object.defineProperty(O,"windowCount",{enumerable:!0,get:function(){return f6.windowCount}});var h6=Cv();Object.defineProperty(O,"windowTime",{enumerable:!0,get:function(){return h6.windowTime}});var p6=Ev();Object.defineProperty(O,"windowToggle",{enumerable:!0,get:function(){return p6.windowToggle}});var d6=qv();Object.defineProperty(O,"windowWhen",{enumerable:!0,get:function(){return d6.windowWhen}});var v6=Mv();Object.defineProperty(O,"withLatestFrom",{enumerable:!0,get:function(){return v6.withLatestFrom}});var m6=Lv();Object.defineProperty(O,"zip",{enumerable:!0,get:function(){return m6.zip}});var y6=xv();Object.defineProperty(O,"zipAll",{enumerable:!0,get:function(){return y6.zipAll}});var g6=jv();Object.defineProperty(O,"zipWith",{enumerable:!0,get:function(){return g6.zipWith}})});var xa=_(Ma=>{var b6=function(r,e){return r<e?-1:r>e?1:0},_6=function(r,e){return r<e?1:r>e?-1:0};function P6(r){return function(e,t){return r(t,e)}}function w6(r){return r===2?function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:e[1]<t[1]?-1:e[1]>t[1]?1:0}:function(e,t){for(var i=0;i<r;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i++}return 0}}Ma.DEFAULT_COMPARATOR=b6;Ma.DEFAULT_REVERSE_COMPARATOR=_6;Ma.reverseComparator=P6;Ma.createTupleComparator=w6});var cP=_(Fv=>{Fv.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Fv.SYMBOL_SUPPORT=typeof Symbol<"u"});var _e=_((K7,fP)=>{var lP=cP(),O6=lP.ARRAY_BUFFER_SUPPORT,S6=lP.SYMBOL_SUPPORT;fP.exports=function(e,t){var i,n,s,c,l;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||O6&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,c=e.length;s<c;s++)t(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(t);return}if(S6&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;l=i.next(),l.done!==!0;)t(l.value,s),s++;return}for(n in e)e.hasOwnProperty(n)&&t(e[n],n)}});var hf=_((X7,gP)=>{var hP=xa(),pP=_e(),dP=hP.DEFAULT_COMPARATOR,T6=hP.reverseComparator;function ft(r){if(this.clear(),this.comparator=r||dP,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.")}ft.prototype.clear=function(){this.root=null,this.min=null,this.size=0};function C6(r){return{item:r,degree:0}}function vP(r,e){r.root?(e.right=r.root.right,e.left=r.root,r.root.right.left=e,r.root.right=e):r.root=e}ft.prototype.push=function(r){var e=C6(r);return e.left=e,e.right=e,vP(this,e),(!this.min||this.comparator(e.item,this.min.item)<=0)&&(this.min=e),++this.size};ft.prototype.peek=function(){return this.min?this.min.item:void 0};function mP(r){for(var e=[],t=r,i=!1;!(t===r&&i);)t===r&&(i=!0),e.push(t),t=t.right;return e}function yP(r,e){r.root===e&&(r.root=e.right),e.left.right=e.right,e.right.left=e.left}function A6(r,e){r.child?(e.right=r.child.right,e.left=r.child,r.child.right.left=e,r.child.right=e):r.child=e}function E6(r,e,t){yP(r,e),e.left=e,e.right=e,A6(t,e),t.degree++,e.parent=t}function q6(r){var e=new Array(r.size),t=mP(r.root),i,n,s,c,l,h;for(i=0,n=t.length;i<n;i++){for(s=t[i],l=s.degree;e[l];)c=e[l],r.comparator(s.item,c.item)>0&&(h=s,s=c,c=h),E6(r,c,s),e[l]=null,l++;e[l]=s}for(i=0;i<r.size;i++)e[i]&&r.comparator(e[i].item,r.min.item)<=0&&(r.min=e[i])}ft.prototype.pop=function(){if(this.size){var r=this.min;if(r.child){var e=mP(r.child),t,i,n;for(i=0,n=e.length;i<n;i++)t=e[i],vP(this,t),delete t.parent}return yP(this,r),r===r.right?(this.min=null,this.root=null):(this.min=r.right,q6(this)),this.size--,r.item}};ft.prototype.inspect=function(){var r={size:this.size};return this.min&&"item"in this.min&&(r.top=this.min.item),Object.defineProperty(r,"constructor",{value:ft,enumerable:!1}),r};typeof Symbol<"u"&&(ft.prototype[Symbol.for("nodejs.util.inspect.custom")]=ft.prototype.inspect);function ff(r){if(this.clear(),this.comparator=r||dP,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.");this.comparator=T6(this.comparator)}ff.prototype=ft.prototype;ft.from=function(r,e){var t=new ft(e);return pP(r,function(i){t.push(i)}),t};ff.from=function(r,e){var t=new ff(e);return pP(r,function(i){t.push(i)}),t};ft.MinFibonacciHeap=ft;ft.MaxFibonacciHeap=ff;gP.exports=ft});var ht=_(gr=>{var M6=Math.pow(2,8)-1,x6=Math.pow(2,16)-1,L6=Math.pow(2,32)-1,j6=Math.pow(2,7)-1,I6=Math.pow(2,15)-1,F6=Math.pow(2,31)-1;gr.getPointerArray=function(r){var e=r-1;if(e<=M6)return Uint8Array;if(e<=x6)return Uint16Array;if(e<=L6)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};gr.getSignedPointerArray=function(r){var e=r-1;return e<=j6?Int8Array:e<=I6?Int16Array:e<=F6?Int32Array:Float64Array};gr.getNumberType=function(r){return r===(r|0)?Math.sign(r)===-1?r<=127&&r>=-128?Int8Array:r<=32767&&r>=-32768?Int16Array:Int32Array:r<=255?Uint8Array:r<=65535?Uint16Array:Uint32Array:Float64Array};var D6={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};gr.getMinimalRepresentation=function(r,e){var t=null,i=0,n,s,c,l,h;for(l=0,h=r.length;l<h;l++)c=e?e(r[l]):r[l],s=gr.getNumberType(c),n=D6[s.name],n>i&&(i=n,t=s);return t};gr.isTypedArray=function(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(r)};gr.concat=function(){var r=0,e,t,i;for(e=0,i=arguments.length;e<i;e++)r+=arguments[e].length;var n=new arguments[0].constructor(r);for(e=0,t=0;e<i;e++)n.set(arguments[e],t),t+=arguments[e].length;return n};gr.indices=function(r){for(var e=gr.getPointerArray(r),t=new e(r),i=0;i<r;i++)t[i]=i;return t}});var Ot=_(ja=>{var PP=_e(),wP=ht();function k6(r){return Array.isArray(r)||wP.isTypedArray(r)}function Dv(r){if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size}function R6(r){var e=Dv(r),t=typeof e=="number"?new Array(e):[],i=0;return PP(r,function(n){t[i++]=n}),t}function z6(r){var e=Dv(r),t=typeof e=="number"?wP.getPointerArray(e):Array,i=typeof e=="number"?new Array(e):[],n=typeof e=="number"?new t(e):[],s=0;return PP(r,function(c){i[s]=c,n[s]=s++}),[i,n]}ja.isArrayLike=k6;ja.guessLength=Dv;ja.toArray=R6;ja.toArrayWithIndices=z6});var _f=_((PX,CP)=>{var yf=_e(),OP=xa(),br=Ot(),bf=OP.DEFAULT_COMPARATOR,kv=OP.reverseComparator;function Rv(r,e,t,i){for(var n=e[i],s,c;i>t;){if(s=i-1>>1,c=e[s],r(n,c)<0){e[i]=c,i=s;continue}break}e[i]=n}function Ia(r,e,t){for(var i=e.length,n=t,s=e[t],c=2*t+1,l;c<i;)l=c+1,l<i&&r(e[c],e[l])>=0&&(c=l),e[t]=e[c],t=c,c=2*t+1;e[t]=s,Rv(r,e,n,t)}function SP(r,e,t){e.push(t),Rv(r,e,0,e.length-1)}function zv(r,e){var t=e.pop();if(e.length!==0){var i=e[0];return e[0]=t,Ia(r,e,0),i}return t}function So(r,e,t){if(e.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var i=e[0];return e[0]=t,Ia(r,e,0),i}function TP(r,e,t){var i;return e.length!==0&&r(e[0],t)<0&&(i=e[0],e[0]=t,t=i,Ia(r,e,0)),t}function cn(r,e){for(var t=e.length,i=t>>1,n=i;--n>=0;)Ia(r,e,n)}function Nv(r,e){for(var t=e.length,i=0,n=new Array(t);i<t;)n[i++]=zv(r,e);return n}function N6(r,e,t){arguments.length===2&&(t=e,e=r,r=bf);var i=kv(r),n,s,c,l=1/0,h;if(e===1){if(br.isArrayLike(t)){for(n=0,s=t.length;n<s;n++)c=t[n],(l===1/0||r(c,l)<0)&&(l=c);return h=new t.constructor(1),h[0]=l,h}return yf(t,function(v){(l===1/0||r(v,l)<0)&&(l=v)}),[l]}if(br.isArrayLike(t)){if(e>=t.length)return t.slice().sort(r);for(h=t.slice(0,e),cn(i,h),n=e,s=t.length;n<s;n++)i(t[n],h[0])>0&&So(i,h,t[n]);return h.sort(r)}var p=br.guessLength(t);return p!==null&&p<e&&(e=p),h=new Array(e),n=0,yf(t,function(v){n<e?h[n]=v:(n===e&&cn(i,h),i(v,h[0])>0&&So(i,h,v)),n++}),h.length>n&&(h.length=n),h.sort(r)}function V6(r,e,t){arguments.length===2&&(t=e,e=r,r=bf);var i=kv(r),n,s,c,l=-1/0,h;if(e===1){if(br.isArrayLike(t)){for(n=0,s=t.length;n<s;n++)c=t[n],(l===-1/0||r(c,l)>0)&&(l=c);return h=new t.constructor(1),h[0]=l,h}return yf(t,function(v){(l===-1/0||r(v,l)>0)&&(l=v)}),[l]}if(br.isArrayLike(t)){if(e>=t.length)return t.slice().sort(i);for(h=t.slice(0,e),cn(r,h),n=e,s=t.length;n<s;n++)r(t[n],h[0])>0&&So(r,h,t[n]);return h.sort(i)}var p=br.guessLength(t);return p!==null&&p<e&&(e=p),h=new Array(e),n=0,yf(t,function(v){n<e?h[n]=v:(n===e&&cn(r,h),r(v,h[0])>0&&So(r,h,v)),n++}),h.length>n&&(h.length=n),h.sort(i)}function fe(r){if(this.clear(),this.comparator=r||bf,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}fe.prototype.clear=function(){this.items=[],this.size=0};fe.prototype.push=function(r){return SP(this.comparator,this.items,r),++this.size};fe.prototype.peek=function(){return this.items[0]};fe.prototype.pop=function(){return this.size!==0&&this.size--,zv(this.comparator,this.items)};fe.prototype.replace=function(r){return So(this.comparator,this.items,r)};fe.prototype.pushpop=function(r){return TP(this.comparator,this.items,r)};fe.prototype.consume=function(){return this.size=0,Nv(this.comparator,this.items)};fe.prototype.toArray=function(){return Nv(this.comparator,this.items.slice())};fe.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:fe,enumerable:!1}),r};typeof Symbol<"u"&&(fe.prototype[Symbol.for("nodejs.util.inspect.custom")]=fe.prototype.inspect);function gf(r){if(this.clear(),this.comparator=r||bf,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=kv(this.comparator)}gf.prototype=fe.prototype;fe.from=function(r,e){var t=new fe(e),i;return br.isArrayLike(r)?i=r.slice():i=br.toArray(r),cn(t.comparator,i),t.items=i,t.size=i.length,t};gf.from=function(r,e){var t=new gf(e),i;return br.isArrayLike(r)?i=r.slice():i=br.toArray(r),cn(t.comparator,i),t.items=i,t.size=i.length,t};fe.siftUp=Ia;fe.siftDown=Rv;fe.push=SP;fe.pop=zv;fe.replace=So;fe.pushpop=TP;fe.heapify=cn;fe.consume=Nv;fe.nsmallest=N6;fe.nlargest=V6;fe.MinHeap=fe;fe.MaxHeap=gf;CP.exports=fe});var xP=_((wX,MP)=>{var AP="";function EP(r,e,t){for(var i=e.length,n=[],s=i,c=-1,l,h=0,p;s--;)c=Math.max(r[e[s]+t],c);for(p=c>>24&&32||c>>16&&24||c>>8&&16||8;h<p;h+=4){for(s=16;s--;)n[s]=[];for(s=i;s--;)n[r[e[s]+t]>>h&15].push(e[s]);for(l=0;l<16;l++)for(c=n[l].length;c--;)e[++s]=n[l][c]}}function W6(r,e,t,i){return r[t]-r[i]||(t%3===2?r[t+1]-r[i+1]||e[t+2]-e[i+2]:e[t+1]-e[i+1])}function Vv(r,e){var t=[],i=[],n=2*e/3|0,s=e-n,c=n+1>>1,l=n,h=0,p,v=[],b=[];if(e===1)return[0];for(;l--;)t[l]=(l*3>>1)+1;for(l=3;l--;)EP(r,t,l);for(h=i[(t[0]/3|0)+(t[0]%3===1?0:c)]=1,l=1;l<n;l++)(r[t[l]]!==r[t[l-1]]||r[t[l]+1]!==r[t[l-1]+1]||r[t[l]+2]!==r[t[l-1]+2])&&h++,i[(t[l]/3|0)+(t[l]%3===1?0:c)]=h;if(h<n)for(i=Vv(i,n),l=n;l--;)t[l]=i[l]<c?i[l]*3+1:(i[l]-c)*3+2;for(l=n;l--;)v[t[l]]=l;for(v[e]=-1,v[e+1]=-2,i=e%3===1?[e-1]:[],l=0;l<n;l++)t[l]%3===1&&i.push(t[l]-1);for(EP(r,i,0),l=0,h=0,p=0;l<n&&h<s;)b[p++]=W6(r,v,t[l],i[h])<0?t[l++]:i[h++];for(;l<n;)b[p++]=t[l++];for(;h<s;)b[p++]=i[h++];return b}function qP(r){var e=r.length,t=e%3,i=new Array(e+t),n,s;if(typeof r!="string"){var c=Object.create(null);for(s=0;s<e;s++)c[r[s]]||(c[r[s]]=!0);var l=Object.create(null),h=Object.keys(c).sort();for(s=0,n=h.length;s<n;s++)l[h[s]]=s+1;for(s=0;s<e;s++)i[s]=l[r[s]]}else for(s=0;s<e;s++)i[s]=r.charCodeAt(s);for(s=e;s<e+t;s++)i[s]=0;return i}function ji(r){this.hasArbitrarySequence=typeof r!="string",this.string=r,this.length=r.length,this.array=Vv(qP(r),this.length)}ji.prototype.toString=function(){return this.array.join(",")};ji.prototype.toJSON=function(){return this.array};ji.prototype.inspect=function(){for(var r=new Array(this.length),e=0;e<this.length;e++)r[e]=this.string.slice(this.array[e]);return Object.defineProperty(r,"constructor",{value:ji,enumerable:!1}),r};typeof Symbol<"u"&&(ji.prototype[Symbol.for("nodejs.util.inspect.custom")]=ji.prototype.inspect);function Ii(r){if(this.hasArbitrarySequence=typeof r[0]!="string",this.size=r.length,this.hasArbitrarySequence){this.text=[];for(var e=0,t=this.size;e<t;e++)this.text.push.apply(this.text,r[e]),e<t-1&&this.text.push(AP)}else this.text=r.join(AP);this.firstLength=r[0].length,this.length=this.text.length,this.array=Vv(qP(this.text),this.length)}Ii.prototype.longestCommonSubsequence=function(){var r=this.hasArbitrarySequence?[]:"",e,t,i,n,s;for(t=1;t<this.length;t++)if(n=this.array[t],s=this.array[t-1],!(n<this.firstLength&&s<this.firstLength)&&!(n>this.firstLength&&s>this.firstLength)){for(e=Math.min(this.length-n,this.length-s),i=0;i<e;i++)if(this.text[n+i]!==this.text[s+i]){e=i;break}e>r.length&&(r=this.text.slice(n,n+e))}return r};Ii.prototype.toString=function(){return this.array.join(",")};Ii.prototype.toJSON=function(){return this.array};Ii.prototype.inspect=function(){for(var r=new Array(this.length),e=0;e<this.length;e++)r[e]=this.text.slice(this.array[e]);return Object.defineProperty(r,"constructor",{value:Ii,enumerable:!1}),r};typeof Symbol<"u"&&(Ii.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ii.prototype.inspect);ji.GeneralizedSuffixArray=Ii;MP.exports=ji});var DP=_((OX,FP)=>{var U6=_e();function tr(r){this.size=0,this.items=new Map,this.inverse=r}function Lt(){this.size=0,this.items=new Map,this.inverse=new tr(this)}function LP(){this.size=0,this.items.clear(),this.inverse.items.clear()}Lt.prototype.clear=LP;tr.prototype.clear=LP;function jP(r,e){if(this.items.has(r)){var t=this.items.get(r);if(t===e)return this;this.inverse.items.delete(t)}if(this.inverse.items.has(e)){var i=this.inverse.items.get(e);if(i===r)return this;this.items.delete(i)}return this.items.set(r,e),this.inverse.items.set(e,r),this.size=this.items.size,this.inverse.size=this.inverse.items.size,this}Lt.prototype.set=jP;tr.prototype.set=jP;function IP(r){if(this.items.has(r)){var e=this.items.get(r);return this.items.delete(r),this.inverse.items.delete(e),this.size=this.items.size,this.inverse.size=this.inverse.items.size,!0}return!1}Lt.prototype.delete=IP;tr.prototype.delete=IP;var G6=["has","get","forEach","keys","values","entries"];G6.forEach(function(r){Lt.prototype[r]=tr.prototype[r]=function(){return Map.prototype[r].apply(this.items,arguments)}});typeof Symbol<"u"&&(Lt.prototype[Symbol.iterator]=Lt.prototype.entries,tr.prototype[Symbol.iterator]=tr.prototype.entries);Lt.prototype.inspect=function(){var r={left:this.items,right:this.inverse.items};return Object.defineProperty(r,"constructor",{value:Lt,enumerable:!1}),r};typeof Symbol<"u"&&(Lt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Lt.prototype.inspect);tr.prototype.inspect=function(){var r={left:this.inverse.items,right:this.items};return Object.defineProperty(r,"constructor",{value:tr,enumerable:!1}),r};typeof Symbol<"u"&&(tr.prototype[Symbol.for("nodejs.util.inspect.custom")]=tr.prototype.inspect);Lt.from=function(r){var e=new Lt;return U6(r,function(t,i){e.set(i,t)}),e};FP.exports=Lt});var Ue=_((SX,kP)=>{function _r(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol<"u"&&(_r.prototype[Symbol.iterator]=function(){return this});_r.of=function(){var r=arguments,e=r.length,t=0;return new _r(function(){return t>=e?{done:!0}:{done:!1,value:r[t++]}})};_r.empty=function(){var r=new _r(function(){return{done:!0}});return r};_r.fromSequence=function(r){var e=0,t=r.length;return new _r(function(){return e>=t?{done:!0}:{done:!1,value:r[e++]}})};_r.is=function(r){return r instanceof _r?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};kP.exports=_r});var Uv=_(rr=>{function zP(r){return r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r&~(r>>1)}rr.msb32=zP;function Wv(r){return r|=r>>1,r|=r>>2,r|=r>>4,r&~(r>>1)}rr.msb8=Wv;rr.test=function(r,e){return r>>e&1};rr.criticalBit8=function(r,e){return Wv(r^e)};rr.criticalBit8Mask=function(r,e){return~Wv(r^e)>>>0&255};rr.testCriticalBit8=function(r,e){return 1+(r|e)>>8};rr.criticalBit32Mask=function(r,e){return~zP(r^e)>>>0&4294967295};rr.popcount=function(r){return r-=r>>1&1431655765,r=(r&858993459)+(r>>2&858993459),r=r+(r>>4)&252645135,r+=r>>8,r+=r>>16,r&127};var To=new Uint8Array(Math.pow(2,8));for(Fa=0,RP=To.length;Fa<RP;Fa++)To[Fa]=rr.popcount(Fa);var Fa,RP;rr.table8Popcount=function(r){return To[r&255]+To[r>>8&255]+To[r>>16&255]+To[r>>24&255]}});var UP=_((CX,WP)=>{var VP=Ue(),NP=Uv();function Re(r){this.length=r,this.clear()}Re.prototype.clear=function(){this.size=0,this.array=new Uint32Array(Math.ceil(this.length/32))};Re.prototype.set=function(r,e){var t=r>>5,i=r&31,n=this.array[t],s;return e===0||e===!1?s=this.array[t]&=~(1<<i):s=this.array[t]|=1<<i,s=s>>>0,s>n?this.size++:s<n&&this.size--,this};Re.prototype.reset=function(r){var e=r>>5,t=r&31,i=this.array[e],n;return n=this.array[e]&=~(1<<t),n<i&&this.size--,this};Re.prototype.flip=function(r){var e=r>>5,t=r&31,i=this.array[e],n=this.array[e]^=1<<t;return n=n>>>0,n>i?this.size++:n<i&&this.size--,this};Re.prototype.get=function(r){var e=r>>5,t=r&31;return this.array[e]>>t&1};Re.prototype.test=function(r){return!!this.get(r)};Re.prototype.rank=function(r){if(this.size===0)return 0;for(var e=r>>5,t=r&31,i=0,n=0;n<e;n++)i+=NP.table8Popcount(this.array[n]);var s=this.array[e]&(1<<t)-1;return i+=NP.table8Popcount(s),i};Re.prototype.select=function(r){if(this.size===0||r>=this.length)return-1;for(var e,t=32,i=0,n=0,s=0,c=this.array.length;s<c;s++)if(e=this.array[s],e!==0){s===c-1&&(t=this.length%32||32);for(var l=0;l<t;l++,i++)if(n+=e>>l&1,n===r)return i}};Re.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.length,i,n,s=32,c=0,l=this.array.length;c<l;c++){i=this.array[c],c===l-1&&(s=t%32||32);for(var h=0;h<s;h++)n=i>>h&1,r.call(e,n,c*32+h)}};Re.prototype.values=function(){var r=this.length,e=!1,t,i,n=this.array,s=n.length,c=0,l=-1,h=32;return new VP(function p(){if(!e){if(c>=s)return{done:!0};c===s-1&&(h=r%32||32),t=n[c++],e=!0,l=-1}return l++,l>=h?(e=!1,p()):(i=t>>l&1,{value:i})})};Re.prototype.entries=function(){var r=this.length,e=!1,t,i,n=this.array,s,c=n.length,l=0,h=-1,p=32;return new VP(function v(){if(!e){if(l>=c)return{done:!0};l===c-1&&(p=r%32||32),t=n[l++],e=!0,h=-1}return h++,s=~-l*32+h,h>=p?(e=!1,v()):(i=t>>h&1,{value:[s,i]})})};typeof Symbol<"u"&&(Re.prototype[Symbol.iterator]=Re.prototype.values);Re.prototype.inspect=function(){var r=new Uint8Array(this.length);return this.forEach(function(e,t){r[t]=e}),Object.defineProperty(r,"constructor",{value:Re,enumerable:!1}),r};typeof Symbol<"u"&&(Re.prototype[Symbol.for("nodejs.util.inspect.custom")]=Re.prototype.inspect);Re.prototype.toJSON=function(){return Array.from(this.array)};WP.exports=Re});var $P=_((AX,HP)=>{var BP=Ue(),GP=Uv(),B6=function(r){return Math.max(1,Math.ceil(r*1.5))};function H6(r){return new Uint32Array(Math.ceil(r/32))}function Pe(r){var e=r||0,t=B6;typeof r=="object"&&(e=r.initialLength||r.initialCapacity||0,t=r.policy||t),this.size=0,this.length=e,this.capacity=Math.ceil(this.length/32)*32,this.policy=t,this.array=H6(this.capacity)}Pe.prototype.set=function(r,e){if(this.length<r)throw new Error("BitVector.set: index out of bounds.");var t=r>>5,i=r&31,n=this.array[t],s;return e===0||e===!1?s=this.array[t]&=~(1<<i):s=this.array[t]|=1<<i,s=s>>>0,s>n?this.size++:s<n&&this.size--,this};Pe.prototype.reset=function(r){var e=r>>5,t=r&31,i=this.array[e],n;return n=this.array[e]&=~(1<<t),n<i&&this.size--,this};Pe.prototype.flip=function(r){var e=r>>5,t=r&31,i=this.array[e],n=this.array[e]^=1<<t;return n=n>>>0,n>i?this.size++:n<i&&this.size--,this};Pe.prototype.applyPolicy=function(r){var e=this.policy(r||this.capacity);if(typeof e!="number"||e<0)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(e<=this.capacity)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned a less or equal capacity to allocate.");return Math.ceil(e/32)*32};Pe.prototype.reallocate=function(r){var e=r;if(r=Math.ceil(r/32)*32,e<this.length&&(this.length=e),r===this.capacity)return this;var t=this.array,i=r/32;return i===this.array.length?this:(i>this.array.length?(this.array=new Uint32Array(i),this.array.set(t,0)):this.array=t.slice(0,i),this.capacity=r,this)};Pe.prototype.grow=function(r){var e;if(typeof r=="number"){if(this.capacity>=r)return this;for(e=this.capacity;e<r;)e=this.applyPolicy(e);return this.reallocate(e),this}return e=this.applyPolicy(),this.reallocate(e),this};Pe.prototype.resize=function(r){return r===this.length?this:r<this.length?(this.length=r,this):(this.length=r,this.reallocate(r),this)};Pe.prototype.push=function(r){if(this.capacity===this.length&&this.grow(),r===0||r===!1)return++this.length;this.size++;var e=this.length++,t=e>>5,i=e&31;return this.array[t]|=1<<i,this.length};Pe.prototype.pop=function(){if(this.length!==0){var r=--this.length,e=r>>5,t=r&31;return this.array[e]>>t&1}};Pe.prototype.get=function(r){if(!(this.length<r)){var e=r>>5,t=r&31;return this.array[e]>>t&1}};Pe.prototype.test=function(r){return this.length<r?!1:!!this.get(r)};Pe.prototype.rank=function(r){if(this.size===0)return 0;for(var e=r>>5,t=r&31,i=0,n=0;n<e;n++)i+=GP.table8Popcount(this.array[n]);var s=this.array[e]&(1<<t)-1;return i+=GP.table8Popcount(s),i};Pe.prototype.select=function(r){if(this.size===0||r>=this.length)return-1;for(var e,t=32,i=0,n=0,s=0,c=this.array.length;s<c;s++)if(e=this.array[s],e!==0){s===c-1&&(t=this.length%32||32);for(var l=0;l<t;l++,i++)if(n+=e>>l&1,n===r)return i}};Pe.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.length,i,n,s=32,c=0,l=this.array.length;c<l;c++){i=this.array[c],c===l-1&&(s=t%32||32);for(var h=0;h<s;h++)n=i>>h&1,r.call(e,n,c*32+h)}};Pe.prototype.values=function(){var r=this.length,e=!1,t,i,n=this.array,s=n.length,c=0,l=-1,h=32;return new BP(function p(){if(!e){if(c>=s)return{done:!0};c===s-1&&(h=r%32||32),t=n[c++],e=!0,l=-1}return l++,l>=h?(e=!1,p()):(i=t>>l&1,{value:i})})};Pe.prototype.entries=function(){var r=this.length,e=!1,t,i,n=this.array,s,c=n.length,l=0,h=-1,p=32;return new BP(function v(){if(!e){if(l>=c)return{done:!0};l===c-1&&(p=r%32||32),t=n[l++],e=!0,h=-1}return h++,s=~-l*32+h,h>=p?(e=!1,v()):(i=t>>h&1,{value:[s,i]})})};typeof Symbol<"u"&&(Pe.prototype[Symbol.iterator]=Pe.prototype.values);Pe.prototype.inspect=function(){var r=new Uint8Array(this.length);return this.forEach(function(e,t){r[t]=e}),Object.defineProperty(r,"constructor",{value:Pe,enumerable:!1}),r};typeof Symbol<"u"&&(Pe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pe.prototype.inspect);Pe.prototype.toJSON=function(){return Array.from(this.array.slice(0,(this.length>>5)+1))};HP.exports=Pe});var QP=_((EX,YP)=>{function ln(r,e){return(r&65535)*e+(((r>>>16)*e&65535)<<16)&4294967295}function $6(r,e){return(r&65535)+(e>>>16)+(((r>>>16)+e&65535)<<16)&4294967295}function Gv(r,e){return r<<e|r>>>32-e}YP.exports=function(e,t){var i=3432918353,n=461845907,s=15,c=13,l=5,h=1801774676,p=e,v,b,w;for(b=0,w=t.length-4;b<=w;b+=4)v=t[b]|t[b+1]<<8|t[b+2]<<16|t[b+3]<<24,v=ln(v,i),v=Gv(v,s),v=ln(v,n),p^=v,p=Gv(p,c),p=ln(p,l),p=$6(p,h);switch(v=0,t.length&3){case 3:v^=t[b+2]<<16;case 2:v^=t[b+1]<<8;case 1:v^=t[b],v=ln(v,i),v=Gv(v,s),v=ln(v,n),p^=v;default:}return p^=t.length,p^=p>>>16,p=ln(p,2246822507),p^=p>>>13,p=ln(p,3266489909),p^=p>>>16,p>>>0}});var ZP=_((qX,JP)=>{var Y6=QP(),Q6=_e(),K6=Math.LN2*Math.LN2,X6={errorRate:.005};function KP(r){var e=new Uint16Array(r.length),t,i;for(t=0,i=r.length;t<i;t++)e[t]=r.charCodeAt(t);return e}function XP(r,e,t){var i=Y6(e*4221880213&4294967295,t);return i%(r*8)}function fn(r){var e={};if(!r)throw new Error("mnemonist/BloomFilter.constructor: a BloomFilter must be created with a capacity.");if(typeof r=="object"?e=r:e.capacity=r,typeof e.capacity!="number"||e.capacity<=0)throw new Error("mnemonist/BloomFilter.constructor: `capacity` option should be a positive integer.");if(this.capacity=e.capacity,this.errorRate=e.errorRate||X6.errorRate,typeof this.errorRate!="number"||e.errorRate<=0)throw new Error("mnemonist/BloomFilter.constructor: `errorRate` option should be a positive float.");this.clear()}fn.prototype.clear=function(){var r=-1/K6*this.capacity*Math.log(this.errorRate),e=r/8|0;this.hashFunctions=e*8/this.capacity*Math.LN2|0,this.data=new Uint8Array(e)};fn.prototype.add=function(r){for(var e=KP(r),t=0,i=this.hashFunctions;t<i;t++){var n=XP(this.data.length,t,e),s=1<<(7&n);this.data[n>>3]|=s}return this};fn.prototype.test=function(r){for(var e=KP(r),t=0,i=this.hashFunctions;t<i;t++){var n=XP(this.data.length,t,e);if(!(this.data[n>>3]&1<<(7&n)))return!1}return!0};fn.prototype.toJSON=function(){return this.data};fn.from=function(r,e){if(!e&&(e=r.length||r.size,typeof e!="number"))throw new Error("BloomFilter.from: could not infer the filter's capacity. Try passing it as second argument.");var t=new fn(e);return Q6(r,function(i){t.add(i)}),t};JP.exports=fn});var t1=_((MX,e1)=>{var J6=_e();function ir(r){if(typeof r!="function")throw new Error("mnemonist/BKTree.constructor: given `distance` should be a function.");this.distance=r,this.clear()}ir.prototype.add=function(r){if(!this.root)return this.root={item:r,children:{}},this.size++,this;for(var e=this.root,t;t=this.distance(r,e.item),!!e.children[t];)e=e.children[t];return e.children[t]={item:r,children:{}},this.size++,this};ir.prototype.search=function(r,e){if(!this.root)return[];for(var t=[],i=[this.root],n,s,c,l,h;i.length;)for(n=i.pop(),c=this.distance(e,n.item),c<=r&&t.push({item:n.item,distance:c}),l=c-r,h=c+r+1;l<h;l++)s=n.children[l],s&&i.push(s);return t};ir.prototype.clear=function(){this.size=0,this.root=null};ir.prototype.toJSON=function(){return this.root};ir.prototype.inspect=function(){for(var r=[],e=[this.root],t,i;e.length;)if(t=e.pop(),!!t){r.push(t.item);for(i in t.children)e.push(t.children[i])}return Object.defineProperty(r,"constructor",{value:ir,enumerable:!1}),r};typeof Symbol<"u"&&(ir.prototype[Symbol.for("nodejs.util.inspect.custom")]=ir.prototype.inspect);ir.from=function(r,e){var t=new ir(e);return J6(r,function(i){t.add(i)}),t};e1.exports=ir});var Hv=_((xX,i1)=>{var Bv=Ot(),r1=Ue();function Me(r,e){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=e,this.items=new r(this.capacity),this.clear()}Me.prototype.clear=function(){this.start=0,this.size=0};Me.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var e=(this.start+this.size)%this.capacity;return this.items[e]=r,++this.size};Me.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var e=this.start-1;return this.start===0&&(e=this.capacity-1),this.items[e]=r,this.start=e,++this.size};Me.prototype.pop=function(){if(this.size===0)return;let r=(this.start+this.size-1)%this.capacity;return this.size--,this.items[r]};Me.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}};Me.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]};Me.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>this.capacity&&(r-=this.capacity),this.items[r]}};Me.prototype.get=function(r){if(this.size!==0)return r=this.start+r,r>this.capacity&&(r-=this.capacity),this.items[r]};Me.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.capacity,i=this.size,n=this.start,s=0;s<i;)r.call(e,this.items[n],s,this),n++,s++,n===t&&(n=0)};Me.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var e=new this.ArrayClass(this.size),t=this.capacity,i=this.size,n=this.start,s=0;s<i;)e[s]=this.items[n],n++,s++,n===t&&(n=0);return e};Me.prototype.values=function(){var r=this.items,e=this.capacity,t=this.size,i=this.start,n=0;return new r1(function(){if(n>=t)return{done:!0};var s=r[i];return i++,n++,i===e&&(i=0),{value:s,done:!1}})};Me.prototype.entries=function(){var r=this.items,e=this.capacity,t=this.size,i=this.start,n=0;return new r1(function(){if(n>=t)return{done:!0};var s=r[i];return i++,i===e&&(i=0),{value:[n++,s],done:!1}})};typeof Symbol<"u"&&(Me.prototype[Symbol.iterator]=Me.prototype.values);Me.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:Me,enumerable:!1}),r};typeof Symbol<"u"&&(Me.prototype[Symbol.for("nodejs.util.inspect.custom")]=Me.prototype.inspect);Me.from=function(r,e,t){if(arguments.length<3&&(t=Bv.guessLength(r),typeof t!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new Me(e,t);if(Bv.isArrayLike(r)){var n,s;for(n=0,s=r.length;n<s;n++)i.items[n]=r[n];return i.size=s,i}return Bv.forEach(r,function(c){i.push(c)}),i};i1.exports=Me});var a1=_((LX,o1)=>{var $v=Ot(),Yv=Hv();function Co(r,e){if(arguments.length<2)throw new Error("mnemonist/circular-buffer: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/circular-buffer: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=e,this.items=new r(this.capacity),this.clear()}function n1(r){Co.prototype[r]=Yv.prototype[r]}Object.keys(Yv.prototype).forEach(n1);typeof Symbol<"u"&&Object.getOwnPropertySymbols(Yv.prototype).forEach(n1);Co.prototype.push=function(r){var e=(this.start+this.size)%this.capacity;return this.items[e]=r,this.size===this.capacity?(this.start=(e+1)%this.capacity,this.size):++this.size};Co.prototype.unshift=function(r){var e=this.start-1;return this.start===0&&(e=this.capacity-1),this.items[e]=r,this.size===this.capacity?(this.start=e,this.size):(this.start=e,++this.size)};Co.from=function(r,e,t){if(arguments.length<3&&(t=$v.guessLength(r),typeof t!="number"))throw new Error("mnemonist/circular-buffer.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new Co(e,t);if($v.isArrayLike(r)){var n,s;for(n=0,s=r.length;n<s;n++)i.items[n]=r[n];return i.size=s,i}return $v.forEach(r,function(c){i.push(c)}),i};o1.exports=Co});var u1=_((jX,s1)=>{function Je(r){if(typeof r!="function")throw new Error("mnemonist/DefaultMap.constructor: expecting a function.");this.items=new Map,this.factory=r,this.size=0}Je.prototype.clear=function(){this.items.clear(),this.size=0};Je.prototype.get=function(r){var e=this.items.get(r);return typeof e>"u"&&(e=this.factory(r,this.size),this.items.set(r,e),this.size++),e};Je.prototype.peek=function(r){return this.items.get(r)};Je.prototype.set=function(r,e){return this.items.set(r,e),this.size=this.items.size,this};Je.prototype.has=function(r){return this.items.has(r)};Je.prototype.delete=function(r){var e=this.items.delete(r);return this.size=this.items.size,e};Je.prototype.forEach=function(r,e){e=arguments.length>1?e:this,this.items.forEach(r,e)};Je.prototype.entries=function(){return this.items.entries()};Je.prototype.keys=function(){return this.items.keys()};Je.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(Je.prototype[Symbol.iterator]=Je.prototype.entries);Je.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Je.prototype[Symbol.for("nodejs.util.inspect.custom")]=Je.prototype.inspect);Je.autoIncrement=function(){var r=0;return function(){return r++}};s1.exports=Je});var l1=_((IX,c1)=>{function Pr(r){if(typeof r!="function")throw new Error("mnemonist/DefaultWeakMap.constructor: expecting a function.");this.items=new WeakMap,this.factory=r}Pr.prototype.clear=function(){this.items=new WeakMap};Pr.prototype.get=function(r){var e=this.items.get(r);return typeof e>"u"&&(e=this.factory(r),this.items.set(r,e)),e};Pr.prototype.peek=function(r){return this.items.get(r)};Pr.prototype.set=function(r,e){return this.items.set(r,e),this};Pr.prototype.has=function(r){return this.items.has(r)};Pr.prototype.delete=function(r){return this.items.delete(r)};Pr.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Pr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pr.prototype.inspect);c1.exports=Pr});var h1=_((FX,f1)=>{var Qv=ht();function wr(r){var e=Qv.getPointerArray(r),t=Qv.getPointerArray(Math.log2(r));this.size=r,this.dimension=r,this.parents=new e(r),this.ranks=new t(r);for(var i=0;i<r;i++)this.parents[i]=i}wr.prototype.find=function(r){for(var e=r,t,i;t=this.parents[e],e!==t;)e=t;for(;i=this.parents[r],i!==e;)this.parents[r]=e,r=i;return e};wr.prototype.union=function(r,e){var t=this.find(r),i=this.find(e);if(t===i)return this;this.dimension--;var n=this.ranks[r],s=this.ranks[e];return n<s?this.parents[t]=i:n>s?this.parents[i]=t:(this.parents[i]=t,this.ranks[t]++),this};wr.prototype.connected=function(r,e){var t=this.find(r);return t===this.find(e)};wr.prototype.mapping=function(){for(var r=Qv.getPointerArray(this.dimension),e={},t=new r(this.size),i=0,n,s=0,c=this.parents.length;s<c;s++)n=this.find(s),typeof e[n]>"u"?(t[s]=i,e[n]=i++):t[s]=e[n];return t};wr.prototype.compile=function(){for(var r={},e=new Array(this.dimension),t=0,i,n=0,s=this.parents.length;n<s;n++)i=this.find(n),typeof r[i]>"u"?(e[t]=[n],r[i]=t++):e[r[i]].push(n);return e};wr.prototype.inspect=function(){var r=this.compile();return Object.defineProperty(r,"constructor",{value:wr,enumerable:!1}),r};typeof Symbol<"u"&&(wr.prototype[Symbol.for("nodejs.util.inspect.custom")]=wr.prototype.inspect);f1.exports=wr});var Pf=_((DX,v1)=>{var p1=xa(),Kv=_f(),Z6=p1.DEFAULT_COMPARATOR,e4=p1.reverseComparator;function t4(r,e,t,i){for(var n=t,s=i,c=e[i],l=2*i+1,h;l<n;)h=l+1,h<n&&r(e[l],e[h])>=0&&(l=h),e[i]=e[l],i=l,l=2*i+1;e[i]=c,Kv.siftDown(r,e,s,i)}function d1(r,e,t,i){for(var n=i,s=n,c=new r(i),l,h;s>0;)l=t[--s],s!==0&&(h=t[0],t[0]=l,t4(e,t,--i,0),l=h),c[s]=l;return c}function Or(r,e,t){if(arguments.length===2&&(t=e,e=null),this.ArrayClass=r,this.capacity=t,this.items=new r(t),this.clear(),this.comparator=e||Z6,typeof t!="number"&&t<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=e4(this.comparator)}Or.prototype.clear=function(){this.size=0};Or.prototype.push=function(r){return this.size<this.capacity?(this.items[this.size]=r,Kv.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(r,this.items[0])>0&&Kv.replace(this.comparator,this.items,r),this.size};Or.prototype.peek=function(){return this.items[0]};Or.prototype.consume=function(){var r=d1(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,r};Or.prototype.toArray=function(){return d1(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)};Or.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:Or,enumerable:!1}),r};typeof Symbol<"u"&&(Or.prototype[Symbol.for("nodejs.util.inspect.custom")]=Or.prototype.inspect);v1.exports=Or});var g1=_((kX,y1)=>{var r4=_e(),m1=function(r){return r};function it(r){if(this.items=new Map,this.clear(),Array.isArray(r)?(this.writeHashFunction=r[0],this.readHashFunction=r[1]):(this.writeHashFunction=r,this.readHashFunction=r),this.writeHashFunction||(this.writeHashFunction=m1),this.readHashFunction||(this.readHashFunction=m1),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.")}it.prototype.clear=function(){this.items.clear(),this.size=0};it.prototype.add=function(r){var e=this.writeHashFunction(r);return this.items.set(e,r),this.size=this.items.size,this};it.prototype.set=function(r,e){return r=this.writeHashFunction(r),this.items.set(r,e),this.size=this.items.size,this};it.prototype.get=function(r){return r=this.readHashFunction(r),this.items.get(r)};it.prototype.has=function(r){return r=this.readHashFunction(r),this.items.has(r)};it.prototype.forEach=function(r,e){e=arguments.length>1?e:this,this.items.forEach(function(t){r.call(e,t,t)})};it.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(it.prototype[Symbol.iterator]=it.prototype.values);it.prototype.inspect=function(){var r=Array.from(this.items.values());return Object.defineProperty(r,"constructor",{value:it,enumerable:!1}),r};typeof Symbol<"u"&&(it.prototype[Symbol.for("nodejs.util.inspect.custom")]=it.prototype.inspect);it.from=function(r,e,t){var i=new it(e);return r4(r,function(n,s){t?i.set(s,n):i.add(n)}),i};y1.exports=it});var Xv=_((RX,b1)=>{var wf=Ue(),i4=_e();function me(r){this.Container=r||Array,this.items=new Map,this.clear(),Object.defineProperty(this.items,"constructor",{value:me,enumerable:!1})}me.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};me.prototype.set=function(r,e){var t=this.items.get(r),i;return t||(this.dimension++,t=new this.Container,this.items.set(r,t)),this.Container===Set?(i=t.size,t.add(e),i<t.size&&this.size++):(t.push(e),this.size++),this};me.prototype.delete=function(r){var e=this.items.get(r);return e?(this.size-=this.Container===Set?e.size:e.length,this.dimension--,this.items.delete(r),!0):!1};me.prototype.remove=function(r,e){var t=this.items.get(r),i,n;return t?this.Container===Set?(i=t.delete(e),i&&this.size--,t.size===0&&(this.items.delete(r),this.dimension--),i):(n=t.indexOf(e),n===-1?!1:(this.size--,t.length===1?(this.items.delete(r),this.dimension--,!0):(t.splice(n,1),!0))):!1};me.prototype.has=function(r){return this.items.has(r)};me.prototype.get=function(r){return this.items.get(r)};me.prototype.multiplicity=function(r){var e=this.items.get(r);return typeof e>"u"?0:this.Container===Set?e.size:e.length};me.prototype.count=me.prototype.multiplicity;me.prototype.forEach=function(r,e){e=arguments.length>1?e:this;var t;function i(n){r.call(e,n,t)}this.items.forEach(function(n,s){t=s,n.forEach(i)})};me.prototype.forEachAssociation=function(r,e){e=arguments.length>1?e:this,this.items.forEach(r,e)};me.prototype.keys=function(){return this.items.keys()};me.prototype.values=function(){var r=this.items.values(),e=!1,t,i,n,s;return this.Container===Set?new wf(function c(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,t=i.value.values()}return i=t.next(),i.done?(e=!1,c()):{done:!1,value:i.value}}):new wf(function c(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,t=i.value,n=0,s=t.length}return n>=s?(e=!1,c()):{done:!1,value:t[n++]}})};me.prototype.entries=function(){var r=this.items.entries(),e=!1,t,i,n,s,c;return this.Container===Set?new wf(function l(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,n=i.value[0],t=i.value[1].values()}return i=t.next(),i.done?(e=!1,l()):{done:!1,value:[n,i.value]}}):new wf(function l(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,n=i.value[0],t=i.value[1],s=0,c=t.length}return s>=c?(e=!1,l()):{done:!1,value:[n,t[s++]]}})};me.prototype.containers=function(){return this.items.values()};me.prototype.associations=function(){return this.items.entries()};typeof Symbol<"u"&&(me.prototype[Symbol.iterator]=me.prototype.entries);me.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(me.prototype[Symbol.for("nodejs.util.inspect.custom")]=me.prototype.inspect);me.prototype.toJSON=function(){return this.items};me.from=function(r,e){var t=new me(e);return i4(r,function(i,n){t.set(n,i)}),t};b1.exports=me});var w1=_((zX,P1)=>{var n4=Xv(),o4=_e(),_1=function(r){return r};function nt(r,e){if(this.items=new n4(e),this.clear(),Array.isArray(r)?(this.writeHashFunction=r[0],this.readHashFunction=r[1]):(this.writeHashFunction=r,this.readHashFunction=r),this.writeHashFunction||(this.writeHashFunction=_1),this.readHashFunction||(this.readHashFunction=_1),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.")}nt.prototype.clear=function(){this.items.clear(),this.size=0,this.dimension=0};nt.prototype.add=function(r){var e=this.writeHashFunction(r);return this.items.set(e,r),this.size=this.items.size,this.dimension=this.items.dimension,this};nt.prototype.set=function(r,e){return r=this.writeHashFunction(r),this.items.set(r,e),this.size=this.items.size,this.dimension=this.items.dimension,this};nt.prototype.get=function(r){return r=this.readHashFunction(r),this.items.get(r)};nt.prototype.has=function(r){return r=this.readHashFunction(r),this.items.has(r)};nt.prototype.forEach=function(r,e){e=arguments.length>1?e:this,this.items.forEach(function(t){r.call(e,t,t)})};nt.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(nt.prototype[Symbol.iterator]=nt.prototype.values);nt.prototype.inspect=function(){var r=Array.from(this);return Object.defineProperty(r,"constructor",{value:nt,enumerable:!1}),r};typeof Symbol<"u"&&(nt.prototype[Symbol.for("nodejs.util.inspect.custom")]=nt.prototype.inspect);nt.from=function(r,e,t,i){arguments.length===3&&typeof t=="boolean"&&(i=t,t=Array);var n=new nt(e,t);return o4(r,function(s,c){i?n.set(c,s):n.add(s)}),n};P1.exports=nt});var T1=_((NX,S1)=>{var O1=1024;function a4(r){return(r&r-1)===0}function nr(r,e){if(arguments.length<1)throw new Error("mnemonist/hashed-array-tree: expecting at least a byte array constructor.");var t=e||0,i=O1,n=0;if(typeof e=="object"&&(t=e.initialCapacity||0,n=e.initialLength||0,i=e.blockSize||O1),!i||!a4(i))throw new Error("mnemonist/hashed-array-tree: block size should be a power of two.");var s=Math.max(n,t),c=Math.ceil(s/i);this.ArrayClass=r,this.length=n,this.capacity=c*i,this.blockSize=i,this.offsetMask=i-1,this.blockMask=Math.log2(i),this.blocks=new Array(c);for(var l=0;l<c;l++)this.blocks[l]=new this.ArrayClass(this.blockSize)}nr.prototype.set=function(r,e){if(this.length<r)throw new Error("HashedArrayTree("+this.ArrayClass.name+").set: index out of bounds.");var t=r>>this.blockMask,i=r&this.offsetMask;return this.blocks[t][i]=e,this};nr.prototype.get=function(r){if(!(this.length<r)){var e=r>>this.blockMask,t=r&this.offsetMask;return this.blocks[e][t]}};nr.prototype.grow=function(r){if(typeof r!="number"&&(r=this.capacity+this.blockSize),this.capacity>=r)return this;for(;this.capacity<r;)this.blocks.push(new this.ArrayClass(this.blockSize)),this.capacity+=this.blockSize;return this};nr.prototype.resize=function(r){return r===this.length?this:r<this.length?(this.length=r,this):(this.length=r,this.grow(r),this)};nr.prototype.push=function(r){this.capacity===this.length&&this.grow();var e=this.length,t=e>>this.blockMask,i=e&this.offsetMask;return this.blocks[t][i]=r,++this.length};nr.prototype.pop=function(){if(this.length!==0){var r=this.blocks[this.blocks.length-1],e=--this.length&this.offsetMask;return r[e]}};nr.prototype.inspect=function(){for(var r=new this.ArrayClass(this.length),e,t=0,i=this.length;t<i;t++)e=t>>this.blockMask,r[t]=this.blocks[e][t&this.offsetMask];return r.type=this.ArrayClass.name,r.items=this.length,r.capacity=this.capacity,r.blockSize=this.blockSize,Object.defineProperty(r,"constructor",{value:nr,enumerable:!1}),r};typeof Symbol<"u"&&(nr.prototype[Symbol.for("nodejs.util.inspect.custom")]=nr.prototype.inspect);S1.exports=nr});var Zv=_((VX,A1)=>{var C1=Ue(),Jv=Ot();function ze(r,e){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=e,this.ArrayClass=r,this.items=new this.ArrayClass(this.capacity),this.clear()}ze.prototype.clear=function(){this.size=0};ze.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=r,this.size};ze.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]};ze.prototype.peek=function(){return this.items[this.size-1]};ze.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.items.length;t<i;t++)r.call(e,this.items[i-t-1],t,this)};ze.prototype.toArray=function(){for(var r=new this.ArrayClass(this.size),e=this.size-1,t=this.size;t--;)r[t]=this.items[e-t];return r};ze.prototype.values=function(){var r=this.items,e=this.size,t=0;return new C1(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return t++,{value:i,done:!1}})};ze.prototype.entries=function(){var r=this.items,e=this.size,t=0;return new C1(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(ze.prototype[Symbol.iterator]=ze.prototype.values);ze.prototype.toString=function(){return this.toArray().join(",")};ze.prototype.toJSON=function(){return this.toArray()};ze.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:ze,enumerable:!1}),r};typeof Symbol<"u"&&(ze.prototype[Symbol.for("nodejs.util.inspect.custom")]=ze.prototype.inspect);ze.from=function(r,e,t){if(arguments.length<3&&(t=Jv.guessLength(r),typeof t!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new ze(e,t);if(Jv.isArrayLike(r)){var n,s;for(n=0,s=r.length;n<s;n++)i.items[n]=r[n];return i.size=s,i}return Jv.forEach(r,function(c){i.push(c)}),i};A1.exports=ze});var q1=_((WX,E1)=>{var s4=Ot(),u4=ht(),c4=Zv();function em(r,e,t,i,n,s,c,l){var h=c+(l-c)/2|0,p=~-h,v=-~h,b=t[h];i[s]=b+1;var w=e?e(r[b]):r[b][1],T=s*2+1,E=s*2+2,M=-1/0,L=-1/0;c<=p&&(M=em(r,e,t,i,n,T,c,p)),v<=l&&(L=em(r,e,t,i,n,E,v,l));var D=Math.max(w,M,L),N=b;return D===M?N=n[i[T]-1]:D===L&&(N=n[i[E]-1]),n[b]=N,D}function Sr(r,e){this.size=r.length,this.intervals=r;var t=null,i=null;Array.isArray(e)&&(t=e[0],i=e[1]);var n=r.length,s=u4.getPointerArray(n+1),c=new s(n),l;for(l=1;l<n;l++)c[l]=l;c.sort(function(w,T){return w=r[w],T=r[T],t?(w=t(w),T=t(T)):(w=w[0],T=T[0]),w<T?-1:w>T?1:0});var h=Math.ceil(Math.log2(n+1)),p=Math.pow(2,h)-1,v=new s(p),b=new s(n);em(r,i,c,v,b,0,0,n-1),c=null,this.height=h,this.tree=v,this.augmentations=b,this.startGetter=t,this.endGetter=i,this.stack=new c4(s,this.height)}Sr.prototype.intervalsContainingPoint=function(r){var e=[],t=this.stack;t.clear(),t.push(0);for(var i=this.tree.length,n,s,c,l,h,p,v,b,w;t.size;)n=t.pop(),s=this.tree[n]-1,c=this.intervals[s],l=this.intervals[this.augmentations[s]],v=this.endGetter?this.endGetter(l):l[1],!(r>v)&&(b=n*2+1,b<i&&this.tree[b]!==0&&t.push(b),h=this.startGetter?this.startGetter(c):c[0],p=this.endGetter?this.endGetter(c):c[1],r>=h&&r<=p&&e.push(c),!(r<h)&&(w=n*2+2,w<i&&this.tree[w]!==0&&t.push(w)));return e};Sr.prototype.intervalsOverlappingInterval=function(r){var e=this.startGetter?this.startGetter(r):r[0],t=this.endGetter?this.endGetter(r):r[1],i=[],n=this.stack;n.clear(),n.push(0);for(var s=this.tree.length,c,l,h,p,v,b,w,T,E;n.size;)c=n.pop(),l=this.tree[c]-1,h=this.intervals[l],p=this.intervals[this.augmentations[l]],w=this.endGetter?this.endGetter(p):p[1],!(e>w)&&(T=c*2+1,T<s&&this.tree[T]!==0&&n.push(T),v=this.startGetter?this.startGetter(h):h[0],b=this.endGetter?this.endGetter(h):h[1],t>=v&&e<=b&&i.push(h),!(t<v)&&(E=c*2+2,E<s&&this.tree[E]!==0&&n.push(E)));return i};Sr.prototype.inspect=function(){var r=this.intervals.slice();return Object.defineProperty(r,"constructor",{value:Sr,enumerable:!1}),r};typeof Symbol<"u"&&(Sr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Sr.prototype.inspect);Sr.from=function(r,e){return s4.isArrayLike(r)?new Sr(r,e):new Sr(Array.from(r),e)};E1.exports=Sr});var tm=_(Fi=>{Fi.search=function(r,e,t,i){var n=0;t=typeof t<"u"?t:0,i=typeof i<"u"?i:r.length,i--;for(var s;t<=i;)if(n=t+i>>>1,s=r[n],s>e)i=~-n;else if(s<e)t=-~n;else return n;return-1};Fi.searchWithComparator=function(r,e,t){for(var i=0,n=0,s=~-e.length,c;n<=s;)if(i=n+s>>>1,c=r(e[i],t),c>0)s=~-i;else if(c<0)n=-~i;else return i;return-1};Fi.lowerBound=function(r,e,t,i){var n=0;for(t=typeof t<"u"?t:0,i=typeof i<"u"?i:r.length;t<i;)n=t+i>>>1,e<=r[n]?i=n:t=-~n;return t};Fi.lowerBoundWithComparator=function(r,e,t){for(var i=0,n=0,s=e.length;n<s;)i=n+s>>>1,r(t,e[i])<=0?s=i:n=-~i;return n};Fi.lowerBoundIndices=function(r,e,t,i,n){var s=0;for(i=typeof i<"u"?i:0,n=typeof n<"u"?n:r.length;i<n;)s=i+n>>>1,t<=r[e[s]]?n=s:i=-~s;return i};Fi.upperBound=function(r,e,t,i){var n=0;for(t=typeof t<"u"?t:0,i=typeof i<"u"?i:r.length;t<i;)n=t+i>>>1,e>=r[n]?t=-~n:i=n;return t};Fi.upperBoundWithComparator=function(r,e,t){for(var i=0,n=0,s=e.length;n<s;)i=n+s>>>1,r(t,e[i])>=0?n=-~i:s=i;return n}});var j1=_(Di=>{var Ao=ht(),Eo=Ot().isArrayLike,hn=tm(),M1=hf();function x1(r,e){if(r.length===0)return e.slice();if(e.length===0)return r.slice();var t;r[0]>e[0]&&(t=r,r=e,e=t);var i=r[r.length-1],n=e[0];if(i<=n)return Ao.isTypedArray(r)?Ao.concat(r,e):r.concat(e);var s=new r.constructor(r.length+e.length),c,l,h;for(c=0,l=r.length;c<l&&(h=r[c],h<=n);c++)s[c]=h;for(var p=c,v=r.length,b=0,w=e.length,T,E;p<v&&b<w;)T=r[p],E=e[b],T<=E?(s[c++]=T,p++):(s[c++]=E,b++);for(;p<v;)s[c++]=r[p++];for(;b<w;)s[c++]=e[b++];return s}function L1(r,e){if(r.length===0)return e.slice();if(e.length===0)return r.slice();var t;r[0]>e[0]&&(t=r,r=e,e=t);var i=r[r.length-1],n=e[0];if(i<n)return Ao.isTypedArray(r)?Ao.concat(r,e):r.concat(e);var s=new r.constructor,c,l,h;for(c=0,l=r.length;c<l&&(h=r[c],h<n);c++)s.push(h);for(var p=c,v=r.length,b=0,w=e.length,T,E;p<v&&b<w;)T=r[p],E=e[b],T<=E?((s.length===0||s[s.length-1]!==T)&&s.push(T),p++):((s.length===0||s[s.length-1]!==E)&&s.push(E),b++);for(;p<v;)T=r[p++],(s.length===0||s[s.length-1]!==T)&&s.push(T);for(;b<w;)E=e[b++],(s.length===0||s[s.length-1]!==E)&&s.push(E);return s}Di.intersectionUniqueArrays=function(r,e){if(r.length===0||e.length===0)return new r.constructor(0);var t;r[0]>e[0]&&(t=r,r=e,e=t);var i=r[r.length-1],n=e[0];if(i<n)return new r.constructor(0);for(var s=new r.constructor,c=hn.lowerBound(r,n),l=r.length,h=0,p=hn.upperBound(e,i),v,b;c<l&&h<p;)v=r[c],b=e[h],v<b?c=hn.lowerBound(r,b,c+1):v>b?h=hn.lowerBound(e,v,h+1):(s.push(v),c++,h++);return s};function l4(r){var e=0,t=-1/0,i,n,s,c=[];for(n=0,s=r.length;n<s;n++)i=r[n].length,i!==0&&(c.push(r[n]),e+=i,i>t&&(t=i));if(c.length===0)return new r[0].constructor(0);if(c.length===1)return c[0].slice();if(c.length===2)return x1(c[0],c[1]);r=c;var l=new r[0].constructor(e),h=Ao.getPointerArray(t),p=new h(r.length),v=new M1(function(T,E){return T=r[T][p[T]],E=r[E][p[E]],T<E?-1:T>E?1:0});for(n=0;n<s;n++)v.push(n);n=0;for(var b,w;v.size;)b=v.pop(),w=r[b][p[b]++],l[n++]=w,p[b]<r[b].length&&v.push(b);return l}function f4(r){var e=-1/0,t,i,n,s=[];for(i=0,n=r.length;i<n;i++)t=r[i].length,t!==0&&(s.push(r[i]),t>e&&(e=t));if(s.length===0)return new r[0].constructor(0);if(s.length===1)return s[0].slice();if(s.length===2)return L1(s[0],s[1]);r=s;var c=new r[0].constructor,l=Ao.getPointerArray(e),h=new l(r.length),p=new M1(function(w,T){return w=r[w][h[w]],T=r[T][h[T]],w<T?-1:w>T?1:0});for(i=0;i<n;i++)p.push(i);for(var v,b;p.size;)v=p.pop(),b=r[v][h[v]++],(c.length===0||c[c.length-1]!==b)&&c.push(b),h[v]<r[v].length&&p.push(v);return c}Di.kWayIntersectionUniqueArrays=function(r){var e=-1/0,t=-1/0,i=1/0,n,s,c,l,h;for(l=0,h=r.length;l<h;l++){if(c=r[l].length,c===0)return[];c>e&&(e=c),n=r[l][0],s=r[l][c-1],n>t&&(t=n),s<i&&(i=s)}if(t>i)return[];if(t===i)return[t];var p,v,b=r[0],w,T,E,M,L,D,N=t;for(l=1;l<h;l++){for(p=b,v=r[l],b=new Array,w=0,T=hn.lowerBound(v,N),E=p.length,M=v.length;w<E&&T<M;)L=p[w],D=v[T],L<D?w=hn.lowerBound(p,D,w+1):L>D?T=hn.lowerBound(v,L,T+1):(b.push(L),w++,T++);if(b.length===0)return b;N=b[0]}return b};Di.merge=function(){if(arguments.length===2){if(Eo(arguments[0]))return x1(arguments[0],arguments[1])}else if(Eo(arguments[0]))return l4(arguments);return null};Di.unionUnique=function(){if(arguments.length===2){if(Eo(arguments[0]))return L1(arguments[0],arguments[1])}else if(Eo(arguments[0]))return f4(arguments);return null};Di.intersectionUnique=function(){if(arguments.length===2){if(Eo(arguments[0]))return Di.intersectionUniqueArrays(arguments[0],arguments[1])}else if(Eo(arguments[0]))return Di.kWayIntersectionUniqueArrays(arguments);return null}});var D1=_((BX,F1)=>{var h4=Ue(),p4=_e(),d4=j1();function I1(r){return r}function pt(r){if(this.clear(),Array.isArray(r)?(this.documentTokenizer=r[0],this.queryTokenizer=r[1]):(this.documentTokenizer=r,this.queryTokenizer=r),this.documentTokenizer||(this.documentTokenizer=I1),this.queryTokenizer||(this.queryTokenizer=I1),typeof this.documentTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: document tokenizer is not a function.");if(typeof this.queryTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: query tokenizer is not a function.")}pt.prototype.clear=function(){this.items=[],this.mapping=new Map,this.size=0,this.dimension=0};pt.prototype.add=function(r){this.size++;var e=this.items.length;this.items.push(r);var t=this.documentTokenizer(r);if(!Array.isArray(t))throw new Error("mnemonist/InvertedIndex.add: tokenizer function should return an array of tokens.");for(var i=new Set,n,s,c=0,l=t.length;c<l;c++)n=t[c],!i.has(n)&&(i.add(n),s=this.mapping.get(n),s||(s=[],this.mapping.set(n,s)),s.push(e));return this.dimension=this.mapping.size,this};pt.prototype.get=function(r){if(!this.size)return[];var e=this.queryTokenizer(r);if(!Array.isArray(e))throw new Error("mnemonist/InvertedIndex.query: tokenizer function should return an array of tokens.");if(!e.length)return[];var t=this.mapping.get(e[0]),i,n,s;if(typeof t>"u"||t.length===0)return[];if(e.length>1)for(n=1,s=e.length;n<s;n++){if(i=this.mapping.get(e[n]),typeof i>"u"||i.length===0)return[];t=d4.intersectionUniqueArrays(t,i)}var c=new Array(t.length);for(n=0,s=c.length;n<s;n++)c[n]=this.items[t[n]];return c};pt.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.documents.length;t<i;t++)r.call(e,this.documents[t],t,this)};pt.prototype.documents=function(){var r=this.items,e=r.length,t=0;return new h4(function(){if(t>=e)return{done:!0};var i=r[t++];return{value:i,done:!1}})};pt.prototype.tokens=function(){return this.mapping.keys()};typeof Symbol<"u"&&(pt.prototype[Symbol.iterator]=pt.prototype.documents);pt.prototype.inspect=function(){var r=this.items.slice();return Object.defineProperty(r,"constructor",{value:pt,enumerable:!1}),r};typeof Symbol<"u"&&(pt.prototype[Symbol.for("nodejs.util.inspect.custom")]=pt.prototype.inspect);pt.from=function(r,e){var t=new pt(e);return p4(r,function(i){t.add(i)}),t};F1.exports=pt});var im=_(rm=>{var Ge=new Float64Array(64),Ce=new Float64Array(64);function v4(r,e,t){var i,n,s,c,l;for(Ge[0]=e,Ce[0]=t,n=0;n>=0;)if(s=Ge[n],c=Ce[n]-1,s<c){for(i=r[s];s<c;){for(;r[c]>=i&&s<c;)c--;for(s<c&&(r[s++]=r[c]);r[s]<=i&&s<c;)s++;s<c&&(r[c--]=r[s])}r[s]=i,Ge[n+1]=s+1,Ce[n+1]=Ce[n],Ce[n++]=s,Ce[n]-Ge[n]>Ce[n-1]-Ge[n-1]&&(l=Ge[n],Ge[n]=Ge[n-1],Ge[n-1]=l,l=Ce[n],Ce[n]=Ce[n-1],Ce[n-1]=l)}else n--;return r}rm.inplaceQuickSort=v4;function m4(r,e,t,i){var n,s,c,l,h,p;for(Ge[0]=t,Ce[0]=i,s=0;s>=0;)if(c=Ge[s],l=Ce[s]-1,c<l){for(h=e[c],n=r[h];c<l;){for(;r[e[l]]>=n&&c<l;)l--;for(c<l&&(e[c++]=e[l]);r[e[c]]<=n&&c<l;)c++;c<l&&(e[l--]=e[c])}e[c]=h,Ge[s+1]=c+1,Ce[s+1]=Ce[s],Ce[s++]=c,Ce[s]-Ge[s]>Ce[s-1]-Ge[s-1]&&(p=Ge[s],Ge[s]=Ge[s-1],Ge[s-1]=p,p=Ce[s],Ce[s]=Ce[s-1],Ce[s-1]=p)}else s--;return e}rm.inplaceQuickSortIndices=m4});var V1=_(($X,N1)=>{var y4=Ot(),Of=ht(),k1=xa().createTupleComparator,R1=Pf(),g4=im().inplaceQuickSortIndices;function nm(r,e,t,i){var n,s=0,c;for(n=0;n<r;n++)c=e[n][t]-i[n],s+=c*c;return s}function b4(r,e){var t=e.length,i=new Array(r),n=new Array(t),s,c=Of.getPointerArray(t),l=new c(t),h,p,v,b=!0;for(h=0;h<r;h++){for(s=new Float64Array(t),p=0;p<t;p++)v=e[p],s[p]=v[1][h],b&&(n[p]=v[0],l[p]=p);b=!1,i[h]=s}return{axes:i,ids:l,labels:n}}function z1(r,e,t,i){for(var n=i.length,s=Of.getPointerArray(n+1),c=new s(n),l=new s(n),h=new s(n),p=[[0,0,t.length,-1,0]],v,b,w,T,E,M,L,D,N=0;p.length!==0;)v=p.pop(),D=v[0],M=v[1],L=v[2],b=v[3],w=v[4],g4(e[D],t,M,L),n=L-M,T=M+(n>>>1),E=t[T],c[N]=E,b>-1&&(w===0?l[b]=N+1:h[b]=N+1),D=(D+1)%r,T!==M&&T!==L-1&&p.push([D,T+1,L,N,1]),T!==M&&p.push([D,M,T,N,0]),N++;return{axes:e,labels:i,pivots:c,lefts:l,rights:h}}function Gt(r,e){this.dimensions=r,this.visited=0,this.axes=e.axes,this.labels=e.labels,this.pivots=e.pivots,this.lefts=e.lefts,this.rights=e.rights,this.size=this.labels.length}Gt.prototype.nearestNeighbor=function(r){var e=1/0,t=null,i=this.dimensions,n=this.axes,s=this.pivots,c=this.lefts,l=this.rights,h=0;function p(v,b){h++;var w=c[b],T=l[b],E=s[b],M=nm(i,n,E,r);if(!(M<e&&(t=E,e=M,M===0))){var L=n[v][E]-r[v];v=(v+1)%i,L>0?w!==0&&p(v,w-1):T!==0&&p(v,T-1),L*L<e&&(L>0?T!==0&&p(v,T-1):w!==0&&p(v,w-1))}}return p(0,0),this.visited=h,this.labels[t]};var _4=k1(3),P4=k1(2);Gt.prototype.kNearestNeighbors=function(r,e){if(r<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(r=Math.min(r,this.size),r===1)return[this.nearestNeighbor(e)];var t=new R1(Array,_4,r),i=this.dimensions,n=this.axes,s=this.pivots,c=this.lefts,l=this.rights,h=0;function p(w,T){var E=c[T],M=l[T],L=s[T],D=nm(i,n,L,e);t.push([D,h++,L]);var N=e[w],Y=n[w][L],ie=N-Y;w=(w+1)%i,N<Y?E!==0&&p(w,E-1):M!==0&&p(w,M-1),(ie*ie<t.peek()[0]||t.size<r)&&(N<Y?M!==0&&p(w,M-1):E!==0&&p(w,E-1))}p(0,0),this.visited=h;for(var v=t.consume(),b=0;b<v.length;b++)v[b]=this.labels[v[b][2]];return v};Gt.prototype.linearKNearestNeighbors=function(r,e){if(r<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");r=Math.min(r,this.size);var t=new R1(Array,P4,r),i,n,s;for(i=0,n=this.size;i<n;i++)s=nm(this.dimensions,this.axes,this.pivots[i],e),t.push([s,i]);var c=t.consume();for(i=0;i<c.length;i++)c[i]=this.labels[this.pivots[c[i][1]]];return c};Gt.prototype.inspect=function(){var r=new Map;r.dimensions=this.dimensions,Object.defineProperty(r,"constructor",{value:Gt,enumerable:!1});var e,t,i;for(e=0;e<this.size;e++){for(i=new Array(this.dimensions),t=0;t<this.dimensions;t++)i[t]=this.axes[t][e];r.set(this.labels[e],i)}return r};typeof Symbol<"u"&&(Gt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Gt.prototype.inspect);Gt.from=function(r,e){var t=y4.toArray(r),i=b4(e,t),n=z1(e,i.axes,i.ids,i.labels);return new Gt(e,n)};Gt.fromAxes=function(r,e){e||(e=Of.indices(r[0].length));var t=r.length,i=z1(r.length,r,Of.indices(e.length),e);return new Gt(t,i)};N1.exports=Gt});var G1=_((YX,U1)=>{var W1=Ue(),w4=_e();function Oe(){this.clear()}Oe.prototype.clear=function(){this.head=null,this.tail=null,this.size=0};Oe.prototype.first=function(){return this.head?this.head.item:void 0};Oe.prototype.peek=Oe.prototype.first;Oe.prototype.last=function(){return this.tail?this.tail.item:void 0};Oe.prototype.push=function(r){var e={item:r,next:null};return this.head?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),this.size++,this.size};Oe.prototype.unshift=function(r){var e={item:r,next:null};return this.head?(this.head.next||(this.tail=this.head),e.next=this.head,this.head=e):(this.head=e,this.tail=e),this.size++,this.size};Oe.prototype.shift=function(){if(this.size){var r=this.head;return this.head=r.next,this.size--,r.item}};Oe.prototype.forEach=function(r,e){if(this.size){e=arguments.length>1?e:this;for(var t=this.head,i=0;t;)r.call(e,t.item,i,this),t=t.next,i++}};Oe.prototype.toArray=function(){if(!this.size)return[];for(var r=new Array(this.size),e=0,t=this.size,i=this.head;e<t;e++)r[e]=i.item,i=i.next;return r};Oe.prototype.values=function(){var r=this.head;return new W1(function(){if(!r)return{done:!0};var e=r.item;return r=r.next,{value:e,done:!1}})};Oe.prototype.entries=function(){var r=this.head,e=0;return new W1(function(){if(!r)return{done:!0};var t=r.item;return r=r.next,e++,{value:[e-1,t],done:!1}})};typeof Symbol<"u"&&(Oe.prototype[Symbol.iterator]=Oe.prototype.values);Oe.prototype.toString=function(){return this.toArray().join(",")};Oe.prototype.toJSON=function(){return this.toArray()};Oe.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:Oe,enumerable:!1}),r};typeof Symbol<"u"&&(Oe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Oe.prototype.inspect);Oe.from=function(r){var e=new Oe;return w4(r,function(t){e.push(t)}),e};U1.exports=Oe});var Sf=_((QX,B1)=>{var om=Ue(),O4=_e(),S4=ht(),T4=Ot();function Ie(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var i=S4.getPointerArray(t);this.forward=new i(t),this.backward=new i(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items={}}Ie.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};Ie.prototype.splayOnTop=function(r){var e=this.head;if(this.head===r)return this;var t=this.backward[r],i=this.forward[r];return this.tail===r?this.tail=t:this.backward[i]=t,this.forward[t]=i,this.backward[e]=r,this.head=r,this.forward[r]=e,this};Ie.prototype.set=function(r,e){var t=this.items[r];if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],delete this.items[this.K[t]]),this.items[r]=t,this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Ie.prototype.setpop=function(r,e){var t=null,i=null,n=this.items[r];return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],delete this.items[this.K[n]]),this.items[r]=n,this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Ie.prototype.has=function(r){return r in this.items};Ie.prototype.get=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};Ie.prototype.peek=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.V[e]};Ie.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.size,n=this.head,s=this.K,c=this.V,l=this.forward;t<i;)r.call(e,c[n],s[n],this),n=l[n],t++};Ie.prototype.keys=function(){var r=0,e=this.size,t=this.head,i=this.K,n=this.forward;return new om(function(){if(r>=e)return{done:!0};var s=i[t];return r++,r<e&&(t=n[t]),{done:!1,value:s}})};Ie.prototype.values=function(){var r=0,e=this.size,t=this.head,i=this.V,n=this.forward;return new om(function(){if(r>=e)return{done:!0};var s=i[t];return r++,r<e&&(t=n[t]),{done:!1,value:s}})};Ie.prototype.entries=function(){var r=0,e=this.size,t=this.head,i=this.K,n=this.V,s=this.forward;return new om(function(){if(r>=e)return{done:!0};var c=i[t],l=n[t];return r++,r<e&&(t=s[t]),{done:!1,value:[c,l]}})};typeof Symbol<"u"&&(Ie.prototype[Symbol.iterator]=Ie.prototype.entries);Ie.prototype.inspect=function(){for(var r=new Map,e=this.entries(),t;t=e.next(),!t.done;)r.set(t.value[0],t.value[1]);return Object.defineProperty(r,"constructor",{value:Ie,enumerable:!1}),r};typeof Symbol<"u"&&(Ie.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ie.prototype.inspect);Ie.from=function(r,e,t,i){if(arguments.length<2){if(i=T4.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Ie(e,t,i);return O4(r,function(s,c){n.set(c,s)}),n};B1.exports=Ie});var $1=_((KX,H1)=>{var qo=Sf(),C4=_e(),A4=ht(),E4=Ot();function Tr(r,e,t){arguments.length<2?qo.call(this,r):qo.call(this,r,e,t);var i=A4.getPointerArray(this.capacity);this.deleted=new i(this.capacity),this.deletedSize=0}for(am in qo.prototype)Tr.prototype[am]=qo.prototype[am];var am;typeof Symbol<"u"&&(Tr.prototype[Symbol.iterator]=qo.prototype[Symbol.iterator]);Tr.prototype.clear=function(){qo.prototype.clear.call(this),this.deletedSize=0};Tr.prototype.set=function(r,e){var t=this.items[r];if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?(this.deletedSize>0?t=this.deleted[--this.deletedSize]:t=this.size,this.size++):(t=this.tail,this.tail=this.backward[t],delete this.items[this.K[t]]),this.items[r]=t,this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Tr.prototype.setpop=function(r,e){var t=null,i=null,n=this.items[r];return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?(this.deletedSize>0?n=this.deleted[--this.deletedSize]:n=this.size,this.size++):(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],delete this.items[this.K[n]]),this.items[r]=n,this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Tr.prototype.delete=function(r){var e=this.items[r];if(typeof e>"u")return!1;if(delete this.items[r],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var t=this.backward[e],i=this.forward[e];return this.head===e&&(this.head=i),this.tail===e&&(this.tail=t),this.forward[t]=i,this.backward[i]=t,this.size--,this.deleted[this.deletedSize++]=e,!0};Tr.prototype.remove=function(r,e=void 0){var t=this.items[r];if(typeof t>"u")return e;var i=this.V[t];if(delete this.items[r],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,i;var n=this.backward[t],s=this.forward[t];return this.head===t&&(this.head=s),this.tail===t&&(this.tail=n),this.forward[n]=s,this.backward[s]=n,this.size--,this.deleted[this.deletedSize++]=t,i};Tr.from=function(r,e,t,i){if(arguments.length<2){if(i=E4.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Tr(e,t,i);return C4(r,function(s,c){n.set(c,s)}),n};H1.exports=Tr});var sm=_((XX,Y1)=>{var Mo=Sf(),q4=_e(),M4=ht(),x4=Ot();function Ze(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-map: capacity should be a finite positive integer.");var i=M4.getPointerArray(t);this.forward=new i(t),this.backward=new i(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items=new Map}Ze.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()};Ze.prototype.set=function(r,e){var t=this.items.get(r);if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],this.items.delete(this.K[t])),this.items.set(r,t),this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Ze.prototype.setpop=function(r,e){var t=null,i=null,n=this.items.get(r);return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],this.items.delete(this.K[n])),this.items.set(r,n),this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Ze.prototype.has=function(r){return this.items.has(r)};Ze.prototype.get=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};Ze.prototype.peek=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.V[e]};Ze.prototype.splayOnTop=Mo.prototype.splayOnTop;Ze.prototype.forEach=Mo.prototype.forEach;Ze.prototype.keys=Mo.prototype.keys;Ze.prototype.values=Mo.prototype.values;Ze.prototype.entries=Mo.prototype.entries;typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=Ze.prototype.entries);Ze.prototype.inspect=Mo.prototype.inspect;Ze.from=function(r,e,t,i){if(arguments.length<2){if(i=x4.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Ze(e,t,i);return q4(r,function(s,c){n.set(c,s)}),n};Y1.exports=Ze});var K1=_((JX,Q1)=>{var xo=sm(),L4=_e(),j4=ht(),I4=Ot();function Cr(r,e,t){arguments.length<2?xo.call(this,r):xo.call(this,r,e,t);var i=j4.getPointerArray(this.capacity);this.deleted=new i(this.capacity),this.deletedSize=0}for(um in xo.prototype)Cr.prototype[um]=xo.prototype[um];var um;typeof Symbol<"u"&&(Cr.prototype[Symbol.iterator]=xo.prototype[Symbol.iterator]);Cr.prototype.clear=function(){xo.prototype.clear.call(this),this.deletedSize=0};Cr.prototype.set=function(r,e){var t=this.items.get(r);if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?(this.deletedSize>0?t=this.deleted[--this.deletedSize]:t=this.size,this.size++):(t=this.tail,this.tail=this.backward[t],this.items.delete(this.K[t])),this.items.set(r,t),this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Cr.prototype.setpop=function(r,e){var t=null,i=null,n=this.items.get(r);return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?(this.deletedSize>0?n=this.deleted[--this.deletedSize]:n=this.size,this.size++):(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],this.items.delete(this.K[n])),this.items.set(r,n),this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Cr.prototype.delete=function(r){var e=this.items.get(r);if(typeof e>"u")return!1;if(this.items.delete(r),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var t=this.backward[e],i=this.forward[e];return this.head===e&&(this.head=i),this.tail===e&&(this.tail=t),this.forward[t]=i,this.backward[i]=t,this.size--,this.deleted[this.deletedSize++]=e,!0};Cr.prototype.remove=function(r,e=void 0){var t=this.items.get(r);if(typeof t>"u")return e;var i=this.V[t];if(this.items.delete(r),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,i;var n=this.backward[t],s=this.forward[t];return this.head===t&&(this.head=s),this.tail===t&&(this.tail=n),this.forward[n]=s,this.backward[s]=n,this.size--,this.deleted[this.deletedSize++]=t,i};Cr.from=function(r,e,t,i){if(arguments.length<2){if(i=I4.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-map.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Cr(e,t,i);return L4(r,function(s,c){n.set(c,s)}),n};Q1.exports=Cr});var J1=_((ZX,X1)=>{var F4=Ue(),D4=_e(),k4=Pf(),R4=function(r,e){return r[1]>e[1]?-1:r[1]<e[1]?1:0};function ae(){this.items=new Map,Object.defineProperty(this.items,"constructor",{value:ae,enumerable:!1}),this.clear()}ae.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};ae.prototype.add=function(r,e){if(e===0)return this;if(e<0)return this.remove(r,-e);if(e=e||1,typeof e!="number")throw new Error("mnemonist/multi-set.add: given count should be a number.");this.size+=e;let t=this.items.get(r);return t===void 0?this.dimension++:e+=t,this.items.set(r,e),this};ae.prototype.set=function(r,e){var t;if(typeof e!="number")throw new Error("mnemonist/multi-set.set: given count should be a number.");return e<=0?(t=this.items.get(r),typeof t<"u"&&(this.size-=t,this.dimension--),this.items.delete(r),this):(e=e||1,t=this.items.get(r),typeof t=="number"?this.items.set(r,t+e):(this.dimension++,this.items.set(r,e)),this.size+=e,this)};ae.prototype.has=function(r){return this.items.has(r)};ae.prototype.delete=function(r){var e=this.items.get(r);return e===0?!1:(this.size-=e,this.dimension--,this.items.delete(r),!0)};ae.prototype.remove=function(r,e){if(e!==0){if(e<0)return this.add(r,-e);if(e=e||1,typeof e!="number")throw new Error("mnemonist/multi-set.remove: given count should be a number.");var t=this.items.get(r);if(!(typeof t>"u")){var i=Math.max(0,t-e);i===0?(this.items.delete(r),this.size-=t,this.dimension--):(this.items.set(r,i),this.size-=e)}}};ae.prototype.edit=function(r,e){var t=this.multiplicity(r);if(t!==0){var i=this.multiplicity(e);return this.items.set(e,t+i),this.items.delete(r),this}};ae.prototype.multiplicity=function(r){var e=this.items.get(r);return typeof e>"u"?0:e};ae.prototype.get=ae.prototype.multiplicity;ae.prototype.count=ae.prototype.multiplicity;ae.prototype.frequency=function(r){if(this.size===0)return 0;var e=this.multiplicity(r);return e/this.size};ae.prototype.top=function(r){if(typeof r!="number"||r<=0)throw new Error("mnemonist/multi-set.top: n must be a number > 0.");for(var e=new k4(Array,R4,r),t=this.items.entries(),i;i=t.next(),!i.done;)e.push(i.value);return e.consume()};ae.prototype.forEach=function(r,e){e=arguments.length>1?e:this;var t;this.items.forEach(function(i,n){for(t=0;t<i;t++)r.call(e,n,n)})};ae.prototype.forEachMultiplicity=function(r,e){e=arguments.length>1?e:this,this.items.forEach(r,e)};ae.prototype.keys=function(){return this.items.keys()};ae.prototype.values=function(){var r=this.items.entries(),e=!1,t,i,n,s;return new F4(function c(){if(!e){if(t=r.next(),t.done)return{done:!0};e=!0,i=t.value[0],n=t.value[1],s=0}return s>=n?(e=!1,c()):(s++,{done:!1,value:i})})};ae.prototype.multiplicities=function(){return this.items.entries()};typeof Symbol<"u"&&(ae.prototype[Symbol.iterator]=ae.prototype.values);ae.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(ae.prototype[Symbol.for("nodejs.util.inspect.custom")]=ae.prototype.inspect);ae.prototype.toJSON=function(){return this.items};ae.from=function(r){var e=new ae;return D4(r,function(t){e.add(t)}),e};ae.isSubset=function(r,e){var t=r.multiplicities(),i,n,s;if(r===e)return!0;if(r.dimension>e.dimension)return!1;for(;i=t.next(),!i.done;)if(n=i.value[0],s=i.value[1],e.multiplicity(n)<s)return!1;return!0};ae.isSuperset=function(r,e){return ae.isSubset(e,r)};X1.exports=ae});var nw=_((e9,iw)=>{var z4=Ue(),N4=_e();function V4(r,e,t){return((Math.pow(r,2)-Math.pow(Math.abs(e-t),2))/2|0)+r+1}function W4(r,e){for(var t=0,i=0,n=e+1;i<n;i++)t+=V4(r,e,i);return t}function U4(r,e){return r.length>e.length?-1:r.length<e.length?1:r<e?-1:r>e?1:0}function Z1(r,e){var t=r+1,i=e/t|0,n=i+1,s,c,l=e-i*t,h=t-l,p=new Array(r+1);for(s=0;s<h;s++)p[s]=[s*i,i];var v=(s-1)*i+i;for(c=0;c<l;c++)p[s+c]=[v+c*n,n];return p}function ew(r,e){var t=e.length,i=r+1,n=t/i|0,s=n+1,c,l,h,p=t-n*i,v=i-p,b=new Array(r+1);for(l=0;l<v;l++)c=l*n,b[l]=e.slice(c,c+n);var w=(l-1)*n+n;for(h=0;h<p;h++)c=w+h*s,b[l+h]=e.slice(c,c+s);return b}function G4(r,e,t){if(e===0)return 0;var i=t.length,n=r+1,s=i/n|0,c=s+1,l=i-s*n,h=n-l;if(e<=h-1)return e*s;var p=e-h;return h*s+p*c}function tw(r,e,t,i,n,s){var c=n-t,l=n+t,h=r-t,p=n+e-h,v=n+e+h,b=i-s;return[Math.max(0,c,p),Math.min(l,v,b)]}function rw(r,e,t,i,n,s){var c=e.length,l=c-t,h=tw(r,l,i,c,n,s),p=h[0],v=h[1],b="",w=[],T,E,M;for(E=p,M=v+1;E<M;E++)T=e.slice(E,E+s),T!==b&&(w.push(T),b=T);return w}function xe(r,e){if(typeof r!="function")throw new Error("mnemonist/passjoin-index: `levenshtein` should be a function returning edit distance between two strings.");if(typeof e!="number"||e<1)throw new Error("mnemonist/passjoin-index: `k` should be a number > 0");this.levenshtein=r,this.k=e,this.clear()}xe.prototype.clear=function(){this.size=0,this.strings=[],this.invertedIndices={}};xe.prototype.add=function(r){var e=r.length,t=this.size;this.strings.push(r),this.size++;var i=ew(this.k,r),n=this.invertedIndices[e];typeof n>"u"&&(n={},this.invertedIndices[e]=n);var s,c,l,h,p;for(h=0,p=i.length;h<p;h++)s=i[h],l=s+h,c=n[l],typeof c>"u"?(c=[t],n[l]=c):c.push(t);return this};xe.prototype.search=function(r){var e=r.length,t=this.k,i=new Set,n,s,c,l,h,p,v,b,w,T,E,M,L,D,N;for(b=Math.max(0,e-t),w=e+t+1;b<w;b++){var Y=this.invertedIndices[b];if(!(typeof Y>"u")){for(v=Z1(t,b),T=0,E=v.length;T<E;T++)for(c=v[T][0],l=v[T][1],p=rw(t,r,b,T,c,l),p.length||(p=[""]),M=0,L=p.length;M<L;M++)if(h=p[M]+T,n=Y[h],!(typeof n>"u"))for(D=0,N=n.length;D<N;D++)s=this.strings[n[D]],(e<=t&&b<=t||!i.has(s)&&this.levenshtein(r,s)<=t)&&i.add(s)}}return i};xe.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.strings.length;t<i;t++)r.call(e,this.strings[t],t,this)};xe.prototype.values=function(){var r=this.strings,e=r.length,t=0;return new z4(function(){if(t>=e)return{done:!0};var i=r[t];return t++,{value:i,done:!1}})};typeof Symbol<"u"&&(xe.prototype[Symbol.iterator]=xe.prototype.values);xe.prototype.inspect=function(){var r=this.strings.slice();return Object.defineProperty(r,"constructor",{value:xe,enumerable:!1}),r};typeof Symbol<"u"&&(xe.prototype[Symbol.for("nodejs.util.inspect.custom")]=xe.prototype.inspect);xe.from=function(r,e,t){var i=new xe(e,t);return N4(r,function(n){i.add(n)}),i};xe.countKeys=W4;xe.comparator=U4;xe.partition=Z1;xe.segments=ew;xe.segmentPos=G4;xe.multiMatchAwareInterval=tw;xe.multiMatchAwareSubstrings=rw;iw.exports=xe});var sw=_((t9,aw)=>{var ow=Ue(),B4=_e();function Le(){this.clear()}Le.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Le.prototype.enqueue=function(r){return this.items.push(r),++this.size};Le.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}};Le.prototype.peek=function(){if(this.size)return this.items[this.offset]};Le.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.offset,i=0,n=this.items.length;t<n;t++,i++)r.call(e,this.items[t],i,this)};Le.prototype.toArray=function(){return this.items.slice(this.offset)};Le.prototype.values=function(){var r=this.items,e=this.offset;return new ow(function(){if(e>=r.length)return{done:!0};var t=r[e];return e++,{value:t,done:!1}})};Le.prototype.entries=function(){var r=this.items,e=this.offset,t=0;return new ow(function(){if(e>=r.length)return{done:!0};var i=r[e];return e++,{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(Le.prototype[Symbol.iterator]=Le.prototype.values);Le.prototype.toString=function(){return this.toArray().join(",")};Le.prototype.toJSON=function(){return this.toArray()};Le.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:Le,enumerable:!1}),r};typeof Symbol<"u"&&(Le.prototype[Symbol.for("nodejs.util.inspect.custom")]=Le.prototype.inspect);Le.from=function(r){var e=new Le;return B4(r,function(t){e.enqueue(t)}),e};Le.of=function(){return Le.from(arguments)};aw.exports=Le});var lw=_((r9,cw)=>{var uw=Ue(),H4=_e();function je(){this.clear()}je.prototype.clear=function(){this.items=[],this.size=0};je.prototype.push=function(r){return this.items.push(r),++this.size};je.prototype.pop=function(){if(this.size!==0)return this.size--,this.items.pop()};je.prototype.peek=function(){return this.items[this.size-1]};je.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.items.length;t<i;t++)r.call(e,this.items[i-t-1],t,this)};je.prototype.toArray=function(){for(var r=new Array(this.size),e=this.size-1,t=this.size;t--;)r[t]=this.items[e-t];return r};je.prototype.values=function(){var r=this.items,e=r.length,t=0;return new uw(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return t++,{value:i,done:!1}})};je.prototype.entries=function(){var r=this.items,e=r.length,t=0;return new uw(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(je.prototype[Symbol.iterator]=je.prototype.values);je.prototype.toString=function(){return this.toArray().join(",")};je.prototype.toJSON=function(){return this.toArray()};je.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:je,enumerable:!1}),r};typeof Symbol<"u"&&(je.prototype[Symbol.for("nodejs.util.inspect.custom")]=je.prototype.inspect);je.from=function(r){var e=new je;return H4(r,function(t){e.push(t)}),e};je.of=function(){return je.from(arguments)};cw.exports=je});var fw=_(Ne=>{Ne.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var r=new Set,e=1/0,t=null,i,n,s=arguments.length;for(n=0;n<s;n++){if(i=arguments[n],i.size===0)return r;i.size<e&&(e=i.size,t=i)}for(var c=t.values(),l,h,p,v;l=c.next(),!l.done;){for(h=l.value,p=!0,n=0;n<s;n++)if(v=arguments[n],v!==t&&!v.has(h)){p=!1;break}p&&r.add(h)}return r};Ne.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var r=new Set,e,t=arguments.length,i,n;for(e=0;e<t;e++)for(i=arguments[e].values();n=i.next(),!n.done;)r.add(n.value);return r};Ne.difference=function(r,e){if(!r.size)return new Set;if(!e.size)return new Set(r);for(var t=new Set,i=r.values(),n;n=i.next(),!n.done;)e.has(n.value)||t.add(n.value);return t};Ne.symmetricDifference=function(r,e){for(var t=new Set,i=r.values(),n;n=i.next(),!n.done;)e.has(n.value)||t.add(n.value);for(i=e.values();n=i.next(),!n.done;)r.has(n.value)||t.add(n.value);return t};Ne.isSubset=function(r,e){var t=r.values(),i;if(r===e)return!0;if(r.size>e.size)return!1;for(;i=t.next(),!i.done;)if(!e.has(i.value))return!1;return!0};Ne.isSuperset=function(r,e){return Ne.isSubset(e,r)};Ne.add=function(r,e){for(var t=e.values(),i;i=t.next(),!i.done;)r.add(i.value)};Ne.subtract=function(r,e){for(var t=e.values(),i;i=t.next(),!i.done;)r.delete(i.value)};Ne.intersect=function(r,e){for(var t=r.values(),i;i=t.next(),!i.done;)e.has(i.value)||r.delete(i.value)};Ne.disjunct=function(r,e){for(var t=r.values(),i,n=[];i=t.next(),!i.done;)e.has(i.value)&&n.push(i.value);for(t=e.values();i=t.next(),!i.done;)r.has(i.value)||r.add(i.value);for(var s=0,c=n.length;s<c;s++)r.delete(n[s])};Ne.intersectionSize=function(r,e){var t;if(r.size>e.size&&(t=r,r=e,e=t),r.size===0)return 0;if(r===e)return r.size;for(var i=r.values(),n,s=0;n=i.next(),!n.done;)e.has(n.value)&&s++;return s};Ne.unionSize=function(r,e){var t=Ne.intersectionSize(r,e);return r.size+e.size-t};Ne.jaccard=function(r,e){var t=Ne.intersectionSize(r,e);if(t===0)return 0;var i=r.size+e.size-t;return t/i};Ne.overlap=function(r,e){var t=Ne.intersectionSize(r,e);return t===0?0:t/Math.min(r.size,e.size)}});var pw=_((n9,hw)=>{var $4=Ue(),Y4=ht().getPointerArray;function jt(r){var e=Y4(r);this.start=0,this.size=0,this.capacity=r,this.dense=new e(r),this.sparse=new e(r)}jt.prototype.clear=function(){this.start=0,this.size=0};jt.prototype.has=function(r){if(this.size===0)return!1;var e=this.sparse[r],t=e<this.capacity&&e>=this.start&&e<this.start+this.size||e<(this.start+this.size)%this.capacity;return t&&this.dense[e]===r};jt.prototype.enqueue=function(r){var e=this.sparse[r];if(this.size!==0){var t=e<this.capacity&&e>=this.start&&e<this.start+this.size||e<(this.start+this.size)%this.capacity;if(t&&this.dense[e]===r)return this}return e=(this.start+this.size)%this.capacity,this.dense[e]=r,this.sparse[r]=e,this.size++,this};jt.prototype.dequeue=function(){if(this.size!==0){var r=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var e=this.dense[r];return this.sparse[e]=this.capacity,e}};jt.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.capacity,i=this.size,n=this.start,s=0;s<i;)r.call(e,this.dense[n],s,this),n++,s++,n===t&&(n=0)};jt.prototype.values=function(){var r=this.dense,e=this.capacity,t=this.size,i=this.start,n=0;return new $4(function(){if(n>=t)return{done:!0};var s=r[i];return i++,n++,i===e&&(i=0),{value:s,done:!1}})};typeof Symbol<"u"&&(jt.prototype[Symbol.iterator]=jt.prototype.values);jt.prototype.inspect=function(){var r=[];return this.forEach(function(e){r.push(e)}),Object.defineProperty(r,"constructor",{value:jt,enumerable:!1}),r.capacity=this.capacity,r};typeof Symbol<"u"&&(jt.prototype[Symbol.for("nodejs.util.inspect.custom")]=jt.prototype.inspect);hw.exports=jt});var vw=_((o9,dw)=>{var cm=Ue(),Q4=ht().getPointerArray;function ot(r,e){arguments.length<2&&(e=r,r=Array);var t=Q4(e);this.size=0,this.length=e,this.dense=new t(e),this.sparse=new t(e),this.vals=new r(e)}ot.prototype.clear=function(){this.size=0};ot.prototype.has=function(r){var e=this.sparse[r];return e<this.size&&this.dense[e]===r};ot.prototype.get=function(r){var e=this.sparse[r];if(e<this.size&&this.dense[e]===r)return this.vals[e]};ot.prototype.set=function(r,e){var t=this.sparse[r];return t<this.size&&this.dense[t]===r?(this.vals[t]=e,this):(this.dense[this.size]=r,this.sparse[r]=this.size,this.vals[this.size]=e,this.size++,this)};ot.prototype.delete=function(r){var e=this.sparse[r];return e>=this.size||this.dense[e]!==r?!1:(e=this.dense[this.size-1],this.dense[this.sparse[r]]=e,this.sparse[e]=this.sparse[r],this.size--,!0)};ot.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0;t<this.size;t++)r.call(e,this.vals[t],this.dense[t])};ot.prototype.keys=function(){var r=this.size,e=this.dense,t=0;return new cm(function(){if(t<r){var i=e[t];return t++,{value:i}}return{done:!0}})};ot.prototype.values=function(){var r=this.size,e=this.vals,t=0;return new cm(function(){if(t<r){var i=e[t];return t++,{value:i}}return{done:!0}})};ot.prototype.entries=function(){var r=this.size,e=this.dense,t=this.vals,i=0;return new cm(function(){if(i<r){var n=[e[i],t[i]];return i++,{value:n}}return{done:!0}})};typeof Symbol<"u"&&(ot.prototype[Symbol.iterator]=ot.prototype.entries);ot.prototype.inspect=function(){for(var r=new Map,e=0;e<this.size;e++)r.set(this.dense[e],this.vals[e]);return Object.defineProperty(r,"constructor",{value:ot,enumerable:!1}),r.length=this.length,this.vals.constructor!==Array&&(r.type=this.vals.constructor.name),r};typeof Symbol<"u"&&(ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=ot.prototype.inspect);dw.exports=ot});var yw=_((a9,mw)=>{var K4=Ue(),X4=ht().getPointerArray;function It(r){var e=X4(r);this.size=0,this.length=r,this.dense=new e(r),this.sparse=new e(r)}It.prototype.clear=function(){this.size=0};It.prototype.has=function(r){var e=this.sparse[r];return e<this.size&&this.dense[e]===r};It.prototype.add=function(r){var e=this.sparse[r];return e<this.size&&this.dense[e]===r?this:(this.dense[this.size]=r,this.sparse[r]=this.size,this.size++,this)};It.prototype.delete=function(r){var e=this.sparse[r];return e>=this.size||this.dense[e]!==r?!1:(e=this.dense[this.size-1],this.dense[this.sparse[r]]=e,this.sparse[e]=this.sparse[r],this.size--,!0)};It.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t,i=0;i<this.size;i++)t=this.dense[i],r.call(e,t,t)};It.prototype.values=function(){var r=this.size,e=this.dense,t=0;return new K4(function(){if(t<r){var i=e[t];return t++,{value:i}}return{done:!0}})};typeof Symbol<"u"&&(It.prototype[Symbol.iterator]=It.prototype.values);It.prototype.inspect=function(){for(var r=new Set,e=0;e<this.size;e++)r.add(this.dense[e]);return Object.defineProperty(r,"constructor",{value:It,enumerable:!1}),r.length=this.length,r};typeof Symbol<"u"&&(It.prototype[Symbol.for("nodejs.util.inspect.custom")]=It.prototype.inspect);mw.exports=It});var ww=_((s9,Pw)=>{var J4=_e(),Z4=2,e5=2,t5=new Set([0,1,2]),r5={0:"Returns only the top suggestion",1:"Returns suggestions with the smallest edit distance",2:"Returns every suggestion (no early termination)"};function Tf(r){var e=new Set;return typeof r=="number"&&e.add(r),{suggestions:e,count:0}}function gw(r,e,t){return{term:r||"",distance:e||0,count:t||0}}function _w(r,e,t,i){i=i||new Set,e++;var n,s=r.length,c;if(s>1)for(c=0;c<s;c++)n=r.substring(0,c)+r.substring(c+1),i.has(n)||(i.add(n),e<t&&_w(n,e,t,i));return i}function i5(r,e,t,i,n,s){var c=t.suggestions.values().next().value;e<2&&t.suggestions.size>0&&r[c].length-s.length>i.length-s.length&&(t.suggestions=new Set,t.count=0),(e===2||!t.suggestions.size||r[c].length-s.length>=i.length-s.length)&&t.suggestions.add(n)}function bw(r,e){var t=r.length,i=e.length,n=[[]],s=t+i,c=new Map,l,h,p;for(n[0][0]=s,l=0;l<=t;l++)n[l+1]||(n[l+1]=[]),n[l+1][1]=l,n[l+1][0]=s;for(p=0;p<=i;p++)n[1][p+1]=p,n[0][p+1]=s;var v=r+e,b;for(l=0,h=v.length;l<h;l++)b=v[l],c.has(b)||c.set(b,0);for(l=1;l<=t;l++){var w=0;for(p=1;p<=i;p++){var T=c.get(e[p-1]),E=w;r[l-1]===e[p-1]?(n[l+1][p+1]=n[l][p],w=p):n[l+1][p+1]=Math.min(n[l][p],n[l+1][p],n[l][p+1])+1,n[l+1][p+1]=Math.min(n[l+1][p+1],n[T][E]+(l-T-1)+1+(p-E-1))}c.set(r[l-1],l)}return n[t+1][i+1]}function n5(r,e,t,i,n,s){var c=s.length;if(c-i>n)return[];for(var l=[s],h=new Set,p=new Set,v=[],b,w;l.length>0&&(b=l.shift(),!(t<2&&v.length>0&&c-b.length>v[0].distance));){if(w=r[b],w!==void 0){if(typeof w=="number"&&(w=Tf(w)),w.count>0&&!p.has(b)){p.add(b);var T=gw(b,c-b.length,w.count);if(v.push(T),t<2&&c-b.length===0)break}w.suggestions.forEach(D=>{var N=e[D];if(!p.has(N)){p.add(N);var Y=0;if(s!==N)if(N.length===b.length)Y=c-b.length;else if(c===b.length)Y=N.length-b.length;else{for(var ie=0,pe=0,Fe=N.length;ie<Fe&&ie<c&&N[ie]===s[ie];)ie++;for(;pe<Fe-ie&&pe<c&&N[Fe-pe-1]===s[c-pe-1];)pe++;ie>0||pe>0?Y=bw(N.substr(ie,Fe-ie-pe),s.substr(ie,c-ie-pe)):Y=bw(N,s)}if(t<2&&v.length>0&&v[0].distance>Y&&(v=[]),!(t<2&&v.length>0&&Y>v[0].distance)&&Y<=i){var dt=r[N];dt!==void 0&&v.push(gw(N,Y,dt.count))}}})}if(c-b.length<i){if(t<2&&v.length>0&&c-b.length>=v[0].distance)continue;for(var E=0,M=b.length;E<M;E++){var L=b.substring(0,E)+b.substring(E+1);h.has(L)||(h.add(L),l.push(L))}}}return t===0?v.slice(0,1):v}function Ar(r){if(r=r||{},this.clear(),this.maxDistance=typeof r.maxDistance=="number"?r.maxDistance:Z4,this.verbosity=typeof r.verbosity=="number"?r.verbosity:e5,typeof this.maxDistance!="number"||this.maxDistance<=0)throw Error("mnemonist/SymSpell.constructor: invalid `maxDistance` option. Should be a integer greater than 0.");if(!t5.has(this.verbosity))throw Error("mnemonist/SymSpell.constructor: invalid `verbosity` option. Should be either 0, 1 or 2.")}Ar.prototype.clear=function(){this.size=0,this.dictionary=Object.create(null),this.maxLength=0,this.words=[]};Ar.prototype.add=function(r){var e=this.dictionary[r];if(e!==void 0?(typeof e=="number"&&(e=Tf(e),this.dictionary[r]=e),e.count++):(e=Tf(),e.count++,this.dictionary[r]=e,r.length>this.maxLength&&(this.maxLength=r.length)),e.count===1){var t=this.words.length;this.words.push(r);var i=_w(r,0,this.maxDistance);i.forEach(n=>{var s=this.dictionary[n];s!==void 0?(typeof s=="number"&&(s=Tf(s),this.dictionary[n]=s),s.suggestions.has(t)||i5(this.words,this.verbosity,s,r,t,n)):this.dictionary[n]=t})}return this.size++,this};Ar.prototype.search=function(r){return n5(this.dictionary,this.words,this.verbosity,this.maxDistance,this.maxLength,r)};Ar.prototype.inspect=function(){var r=[];r.size=this.size,r.maxDistance=this.maxDistance,r.verbosity=this.verbosity,r.behavior=r5[this.verbosity];for(var e in this.dictionary)typeof this.dictionary[e]=="object"&&this.dictionary[e].count&&r.push([e,this.dictionary[e].count]);return Object.defineProperty(r,"constructor",{value:Ar,enumerable:!1}),r};typeof Symbol<"u"&&(Ar.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ar.prototype.inspect);Ar.from=function(r,e){var t=new Ar(e);return J4(r,function(i){t.add(i)}),t};Pw.exports=Ar});var lm=_((u9,Ow)=>{var o5=_e(),Lo=Ue(),Be=String.fromCharCode(0);function Se(r){this.mode=r===Array?"array":"string",this.clear()}Se.prototype.clear=function(){this.root={},this.size=0};Se.prototype.set=function(r,e){for(var t=this.root,i,n=0,s=r.length;n<s;n++)i=r[n],t=t[i]||(t[i]={});return Be in t||this.size++,t[Be]=e,this};Se.prototype.update=function(r,e){for(var t=this.root,i,n=0,s=r.length;n<s;n++)i=r[n],t=t[i]||(t[i]={});return Be in t||this.size++,t[Be]=e(t[Be]),this};Se.prototype.get=function(r){var e=this.root,t,i,n;for(i=0,n=r.length;i<n;i++)if(t=r[i],e=e[t],typeof e>"u")return;if(Be in e)return e[Be]};Se.prototype.delete=function(r){var e=this.root,t=null,i=null,n,s,c,l;for(c=0,l=r.length;c<l;c++){if(s=r[c],n=e,e=e[s],typeof e>"u")return!1;t!==null?Object.keys(e).length>1&&(t=null,i=null):Object.keys(e).length<2&&(t=n,i=s)}return Be in e?(this.size--,t?delete t[i]:delete e[Be],!0):!1};Se.prototype.has=function(r){for(var e=this.root,t,i=0,n=r.length;i<n;i++)if(t=r[i],e=e[t],typeof e>"u")return!1;return Be in e};Se.prototype.find=function(r){var e=typeof r=="string",t=this.root,i=[],n,s,c;for(s=0,c=r.length;s<c;s++)if(n=r[s],t=t[n],typeof t>"u")return i;for(var l=[t],h=[r],p;l.length;){r=h.pop(),t=l.pop();for(p in t){if(p===Be){i.push([r,t[Be]]);continue}l.push(t[p]),h.push(e?r+p:r.concat(p))}}return i};Se.prototype.values=function(r){var e=this.root,t=[],i,n,s;if(r){for(n=0,s=r.length;n<s;n++)if(i=r[n],e=e[i],typeof e>"u")return Lo.empty()}return t.push(e),new Lo(function(){for(var c,l=!1,h;t.length;){c=t.pop();for(h in c){if(h===Be){l=!0;continue}t.push(c[h])}if(l)return{done:!1,value:c[Be]}}return{done:!0}})};Se.prototype.prefixes=function(r){var e=this.root,t=[],i=[],n,s,c,l=this.mode==="string";if(r){for(s=0,c=r.length;s<c;s++)if(n=r[s],e=e[n],typeof e>"u")return Lo.empty()}else r=l?"":[];return t.push(e),i.push(r),new Lo(function(){for(var h,p,v=!1,b;t.length;){h=t.pop(),p=i.pop();for(b in h){if(b===Be){v=!0;continue}t.push(h[b]),i.push(l?p+b:p.concat(b))}if(v)return{done:!1,value:p}}return{done:!0}})};Se.prototype.keys=Se.prototype.prefixes;Se.prototype.entries=function(r){var e=this.root,t=[],i=[],n,s,c,l=this.mode==="string";if(r){for(s=0,c=r.length;s<c;s++)if(n=r[s],e=e[n],typeof e>"u")return Lo.empty()}else r=l?"":[];return t.push(e),i.push(r),new Lo(function(){for(var h,p,v=!1,b;t.length;){h=t.pop(),p=i.pop();for(b in h){if(b===Be){v=!0;continue}t.push(h[b]),i.push(l?p+b:p.concat(b))}if(v)return{done:!1,value:[p,h[Be]]}}return{done:!0}})};typeof Symbol<"u"&&(Se.prototype[Symbol.iterator]=Se.prototype.entries);Se.prototype.inspect=function(){for(var r=new Array(this.size),e=this.entries(),t,i=0;t=e.next(),!t.done;)r[i++]=t.value;return Object.defineProperty(r,"constructor",{value:Se,enumerable:!1}),r};typeof Symbol<"u"&&(Se.prototype[Symbol.for("nodejs.util.inspect.custom")]=Se.prototype.inspect);Se.prototype.toJSON=function(){return this.root};Se.from=function(r){var e=new Se;return o5(r,function(t,i){e.set(i,t)}),e};Se.SENTINEL=Be;Ow.exports=Se});var Cw=_((c9,Tw)=>{var a5=_e(),Sw=lm(),Cf=String.fromCharCode(0);function He(r){this.mode=r===Array?"array":"string",this.clear()}for(fm in Sw.prototype)He.prototype[fm]=Sw.prototype[fm];var fm;delete He.prototype.set;delete He.prototype.get;delete He.prototype.values;delete He.prototype.entries;He.prototype.add=function(r){for(var e=this.root,t,i=0,n=r.length;i<n;i++)t=r[i],e=e[t]||(e[t]={});return Cf in e||this.size++,e[Cf]=!0,this};He.prototype.find=function(r){var e=typeof r=="string",t=this.root,i=[],n,s,c;for(s=0,c=r.length;s<c;s++)if(n=r[s],t=t[n],typeof t>"u")return i;for(var l=[t],h=[r],p;l.length;){r=h.pop(),t=l.pop();for(p in t){if(p===Cf){i.push(r);continue}l.push(t[p]),h.push(e?r+p:r.concat(p))}}return i};typeof Symbol<"u"&&(He.prototype[Symbol.iterator]=He.prototype.keys);He.prototype.inspect=function(){for(var r=new Set,e=this.keys(),t;t=e.next(),!t.done;)r.add(t.value);return Object.defineProperty(r,"constructor",{value:He,enumerable:!1}),r};typeof Symbol<"u"&&(He.prototype[Symbol.for("nodejs.util.inspect.custom")]=He.prototype.inspect);He.prototype.toJSON=function(){return this.root};He.from=function(r){var e=new He;return a5(r,function(t){e.add(t)}),e};He.SENTINEL=Cf;Tw.exports=He});var Mw=_((l9,qw)=>{var Aw=Ue(),s5=_e(),u5=Ot(),Ew=ht(),c5=function(r){return Math.max(1,Math.ceil(r*1.5))},l5=function(r){var e=Ew.getPointerArray(r);return new e(r)};function oe(r,e){if(arguments.length<1)throw new Error("mnemonist/vector: expecting at least a byte array constructor.");var t=e||0,i=c5,n=0,s=!1;typeof e=="object"&&(t=e.initialCapacity||0,n=e.initialLength||0,i=e.policy||i,s=e.factory===!0),this.factory=s?r:null,this.ArrayClass=r,this.length=n,this.capacity=Math.max(n,t),this.policy=i,this.array=new r(this.capacity)}oe.prototype.set=function(r,e){if(this.length<r)throw new Error("Vector("+this.ArrayClass.name+").set: index out of bounds.");return this.array[r]=e,this};oe.prototype.get=function(r){if(!(this.length<r))return this.array[r]};oe.prototype.applyPolicy=function(r){var e=this.policy(r||this.capacity);if(typeof e!="number"||e<0)throw new Error("mnemonist/vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(e<=this.capacity)throw new Error("mnemonist/vector.applyPolicy: policy returned a less or equal capacity to allocate.");return e};oe.prototype.reallocate=function(r){if(r===this.capacity)return this;var e=this.array;if(r<this.length&&(this.length=r),r>this.capacity)if(this.factory===null?this.array=new this.ArrayClass(r):this.array=this.factory(r),Ew.isTypedArray(this.array))this.array.set(e,0);else for(var t=0,i=this.length;t<i;t++)this.array[t]=e[t];else this.array=e.slice(0,r);return this.capacity=r,this};oe.prototype.grow=function(r){var e;if(typeof r=="number"){if(this.capacity>=r)return this;for(e=this.capacity;e<r;)e=this.applyPolicy(e);return this.reallocate(e),this}return e=this.applyPolicy(),this.reallocate(e),this};oe.prototype.resize=function(r){return r===this.length?this:r<this.length?(this.length=r,this):(this.length=r,this.reallocate(r),this)};oe.prototype.push=function(r){return this.capacity===this.length&&this.grow(),this.array[this.length++]=r,this.length};oe.prototype.pop=function(){if(this.length!==0)return this.array[--this.length]};oe.prototype.values=function(){var r=this.array,e=this.length,t=0;return new Aw(function(){if(t>=e)return{done:!0};var i=r[t];return t++,{value:i,done:!1}})};oe.prototype.entries=function(){var r=this.array,e=this.length,t=0;return new Aw(function(){if(t>=e)return{done:!0};var i=r[t];return{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(oe.prototype[Symbol.iterator]=oe.prototype.values);oe.prototype.inspect=function(){var r=this.array.slice(0,this.length);return r.type=this.array.constructor.name,r.items=this.length,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:oe,enumerable:!1}),r};typeof Symbol<"u"&&(oe.prototype[Symbol.for("nodejs.util.inspect.custom")]=oe.prototype.inspect);oe.from=function(r,e,t){if(arguments.length<3&&(t=u5.guessLength(r),typeof t!="number"))throw new Error("mnemonist/vector.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new oe(e,t);return s5(r,function(n){i.push(n)}),i};function Er(r){var e=function(i){oe.call(this,r,i)};for(var t in oe.prototype)oe.prototype.hasOwnProperty(t)&&(e.prototype[t]=oe.prototype[t]);return e.from=function(i,n){return oe.from(i,r,n)},typeof Symbol<"u"&&(e.prototype[Symbol.iterator]=e.prototype.values),e}oe.Int8Vector=Er(Int8Array);oe.Uint8Vector=Er(Uint8Array);oe.Uint8ClampedVector=Er(Uint8ClampedArray);oe.Int16Vector=Er(Int16Array);oe.Uint16Vector=Er(Uint16Array);oe.Int32Vector=Er(Int32Array);oe.Uint32Vector=Er(Uint32Array);oe.Float32Vector=Er(Float32Array);oe.Float64Vector=Er(Float64Array);oe.PointerVector=Er(l5);qw.exports=oe});var Lw=_((f9,xw)=>{var f5=Ot(),h5=ht(),p5=im().inplaceQuickSortIndices,d5=tm().lowerBoundIndices,v5=_f(),m5=h5.getPointerArray;function y5(r,e){return r.distance<e.distance?1:r.distance>e.distance?-1:0}function g5(r,e,t){for(var i=t.length,n=m5(i),s=0,c=new n(i),l=new n(i),h=new n(i),p=new Float64Array(i),v=[0,0,i],b=new Float64Array(i),w,T,E,M,L,D,N,Y,ie;v.length;)if(L=v.pop(),M=v.pop(),w=v.pop(),T=t[L-1],L--,ie=L-M,c[w]=T,ie!==0){if(ie===1){N=r(e[T],e[t[M]]),p[w]=N,s++,h[w]=s,c[s]=t[M];continue}for(Y=M;Y<L;Y++)b[t[Y]]=r(e[T],e[t[Y]]);p5(b,t,M,L),E=M+ie/2-1,E===(E|0)?N=(b[t[E]]+b[t[E+1]])/2:N=b[t[Math.ceil(E)]],p[w]=N,D=d5(b,t,N,M,L),L-D>0&&(s++,h[w]=s,v.push(s,D,L)),D-M>0&&(s++,l[w]=s,v.push(s,M,D))}return{nodes:c,lefts:l,rights:h,mus:p}}function Yr(r,e){if(typeof r!="function")throw new Error("mnemonist/VPTree.constructor: given `distance` must be a function.");if(!e)throw new Error("mnemonist/VPTree.constructor: you must provide items to the tree. A VPTree cannot be updated after its creation.");this.distance=r,this.heap=new v5(y5),this.D=0;var t=f5.toArrayWithIndices(e);this.items=t[0];var i=t[1];this.size=i.length;var n=g5(r,this.items,i);this.nodes=n.nodes,this.lefts=n.lefts,this.rights=n.rights,this.mus=n.mus}Yr.prototype.nearestNeighbors=function(r,e){var t=this.heap,i=[0],n=1/0,s,c,l,h,p,v,b;for(this.D=0;i.length;)s=i.pop(),c=this.nodes[s],l=this.items[c],b=this.distance(l,e),this.D++,b<n&&(t.push({distance:b,item:l}),t.size>r&&t.pop(),t.size>=r&&(n=t.peek().distance)),h=this.lefts[s],p=this.rights[s],!(!h&&!p)&&(v=this.mus[s],b<v?(h&&b<v+n&&i.push(h),p&&b>=v-n&&i.push(p)):(p&&b>=v-n&&i.push(p),h&&b<v+n&&i.push(h)));for(var w=new Array(t.size),T=t.size-1;T>=0;T--)w[T]=t.pop();return w};Yr.prototype.neighbors=function(r,e){var t=[],i=[0],n,s,c,l,h,p,v;for(this.D=0;i.length;)n=i.pop(),s=this.nodes[n],c=this.items[s],v=this.distance(c,e),this.D++,v<=r&&t.push({distance:v,item:c}),l=this.lefts[n],h=this.rights[n],!(!l&&!h)&&(p=this.mus[n],v<p?(l&&v<p+r&&i.push(l),h&&v>=p-r&&i.push(h)):(h&&v>=p-r&&i.push(h),l&&v<p+r&&i.push(l)));return t};Yr.prototype.inspect=function(){var r=this.items.slice();return Object.defineProperty(r,"constructor",{value:Yr,enumerable:!1}),r};typeof Symbol<"u"&&(Yr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Yr.prototype.inspect);Yr.from=function(r,e){return new Yr(e,r)};xw.exports=Yr});var Fw=_((h9,Iw)=>{var hm=_f(),pm=hf(),jw=xP();Iw.exports={BiMap:DP(),BitSet:UP(),BitVector:$P(),BloomFilter:ZP(),BKTree:t1(),CircularBuffer:a1(),DefaultMap:u1(),DefaultWeakMap:l1(),FixedDeque:Hv(),StaticDisjointSet:h1(),FibonacciHeap:pm,MinFibonacciHeap:pm.MinFibonacciHeap,MaxFibonacciHeap:pm.MaxFibonacciHeap,FixedReverseHeap:Pf(),FuzzyMap:g1(),FuzzyMultiMap:w1(),HashedArrayTree:T1(),Heap:hm,MinHeap:hm.MinHeap,MaxHeap:hm.MaxHeap,StaticIntervalTree:q1(),InvertedIndex:D1(),KDTree:V1(),LinkedList:G1(),LRUCache:Sf(),LRUCacheWithDelete:$1(),LRUMap:sm(),LRUMapWithDelete:K1(),MultiMap:Xv(),MultiSet:J1(),PassjoinIndex:nw(),Queue:sw(),FixedStack:Zv(),Stack:lw(),SuffixArray:jw,GeneralizedSuffixArray:jw.GeneralizedSuffixArray,Set:fw(),SparseQueueSet:pw(),SparseMap:vw(),SparseSet:yw(),SymSpell:ww(),Trie:Cw(),TrieMap:lm(),Vector:Mw(),VPTree:Lw()}});var k5={};BM(k5,{ArrayTilemap:()=>zf,CharacterShiftAction:()=>If,CollisionStrategy:()=>Ea,Direction:()=>ct,GridEngine:()=>Va,GridEngineHeadless:()=>Ra,MoveToResult:()=>kf,NoPathFoundStrategy:()=>un,NumberOfDirections:()=>zr,PathBlockedStrategy:()=>wo,PhaserTile:()=>Ri,PhaserTileLayer:()=>No,PhaserTilemap:()=>Na,QueuedPathBlockedStrategy:()=>ym,TiledLayer:()=>Wo,TiledTile:()=>Vo,TiledTilemap:()=>Nf,default:()=>D5,directionFromPos:()=>rt});module.exports=HM(k5);var k=class r{static get ZERO(){return new r(0,0)}static get ONE(){return new r(1,1)}static get UP(){return new r(0,-1)}static get DOWN(){return new r(0,1)}static get LEFT(){return new r(-1,0)}static get RIGHT(){return new r(1,0)}static get UP_LEFT(){return new r(-1,-1)}static get UP_RIGHT(){return new r(1,-1)}static get DOWN_RIGHT(){return new r(1,1)}static get DOWN_LEFT(){return new r(-1,1)}constructor(e,t){typeof e=="number"?(this.x=e,this.y=t||0):(this.x=e.x,this.y=e.y)}clone(){return new r(this.x,this.y)}add(e){return new r(this.x+e.x,this.y+e.y)}multiply(e){return new r(this.x*e.x,this.y*e.y)}divide(e){return new r(this.x/e.x,this.y/e.y)}subtract(e){return new r(this.x-e.x,this.y-e.y)}equals(e){return this.x===e.x&&this.y===e.y}abs(){return new r(Math.abs(this.x),Math.abs(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}modulo(e){return new r(this.x%e.x,this.y%e.y)}scalarModulo(e){return new r(this.x%e,this.y%e)}scalarMult(e){return new r(this.x*e,this.y*e)}toPosition(){return{x:this.x,y:this.y}}toString(){return`${this.x}#${this.y}`}};var G=class{static equal(e,t){return e.position.x===t.position.x&&e.position.y===t.position.y&&e.layer===t.layer}static copyOver(e,t){t.position.x=e.position.x,t.position.y=e.position.y,t.layer=e.layer}static clone(e){return{position:e.position.clone(),layer:e.layer}}static toString(e){return`${e.position.toString()}#${e.layer}`}static toInternal(e){return{position:new k(e.position.x,e.position.y),layer:e.charLayer}}static fromInternal(e){return{position:e.position.toPosition(),charLayer:e.layer}}};var ct=(p=>(p.NONE="none",p.LEFT="left",p.UP_LEFT="up-left",p.UP="up",p.UP_RIGHT="up-right",p.RIGHT="right",p.DOWN_RIGHT="down-right",p.DOWN="down",p.DOWN_LEFT="down-left",p))(ct||{}),$M={up:"down",down:"up",left:"right",right:"left",none:"none","up-left":"down-right","up-right":"down-left","down-right":"up-left","down-left":"up-right"},YM={up:k.UP,down:k.DOWN,left:k.LEFT,right:k.RIGHT,none:k.ZERO,"up-left":k.UP_LEFT,"up-right":k.UP_RIGHT,"down-right":k.DOWN_RIGHT,"down-left":k.DOWN_LEFT},ha={up:0,"up-right":1,right:2,"down-right":3,down:4,"down-left":5,left:6,"up-left":7,none:NaN},rb=["up","up-right","right","down-right","down","down-left","left","up-left"],QM=["down-left","down-right","up-right","up-left"];function pa(){return["up","down","left","right","none","up-left","up-right","down-right","down-left"]}function qn(r){return QM.includes(r)}function cp(r){return["left","right"].includes(r)}function ib(r){return["up","down"].includes(r)}function nb(r,e=1){return r==="none"?"none":rb[(ha[r]+8-Math.abs(e)%8)%8]}function Mn(r,e=1){return r==="none"?"none":rb[(ha[r]+e)%8]}function Xt(r){return YM[r]}function ob(r){return $M[r]}function rt(r,e){if(r.x===e.x){if(r.y>e.y)return"up";if(r.y<e.y)return"down"}else if(r.y===e.y){if(r.x>e.x)return"left";if(r.x<e.x)return"right"}else if(r.x>e.x){if(r.y<e.y)return"down-left";if(r.y>e.y)return"up-left"}else if(r.x<e.x){if(r.y<e.y)return"down-right";if(r.y>e.y)return"up-right"}return"none"}var zr=(t=>(t[t.FOUR=4]="FOUR",t[t.EIGHT=8]="EIGHT",t))(zr||{});function ai(r){return typeof r=="string"&&pa().includes(r)}var Hr=bt(Mi(),1);var xi=1e3,of=class{constructor(e,t){this.id=e;this.movementDirection="none";this._tilePos={position:new k(0,0),layer:void 0};this.movementStarted$=new Hr.Subject;this.movementStopped$=new Hr.Subject;this.directionChanged$=new Hr.Subject;this.positionChangeStarted$=new Hr.Subject;this.positionChangeFinished$=new Hr.Subject;this.tilePositionSet$=new Hr.Subject;this.autoMovementSet$=new Hr.Subject;this.lastMovementImpulse="none";this.facingDirection="down";this.depthChanged$=new Hr.Subject;this.movementProgress=0;this.tilemap=t.tilemap,this.speed=t.speed,this.collidesWithTilesInternal=t.collidesWithTiles,this._tilePos.layer=t.charLayer,this.ignoreMissingTiles=t.ignoreMissingTiles??!1,this.collisionGroups=new Set(t.collisionGroups||[]),this.ignoreCollisionGroups=new Set(t.ignoreCollisionGroups||[]),this.labels=new Set(t.labels||[]),this.numberOfDirections=t.numberOfDirections,t.facingDirection&&this.turnTowards(t.facingDirection),this.tileWidth=t.tileWidth??1,this.tileHeight=t.tileHeight??1}getId(){return this.id}getSpeed(){return this.speed}setSpeed(e){this.speed=e}setMovement(e){this.autoMovementSet$.next(e),this.movement=e}getMovement(){return this.movement}collidesWithTiles(){return this.collidesWithTilesInternal}setCollidesWithTiles(e){this.collidesWithTilesInternal=e}getIgnoreMissingTiles(){return this.ignoreMissingTiles}setIgnoreMissingTiles(e){this.ignoreMissingTiles=e}setTilePosition(e){this.isMoving()&&this.movementStopped$.next(this.movementDirection),this.tilePositionSet$.next({...e}),this.fire(this.positionChangeStarted$,this.tilePos,e),this.fire(this.positionChangeFinished$,this.tilePos,e),this.movementDirection="none",this.lastMovementImpulse="none",this.tilePos=e,this.movementProgress=0}getTilePos(){return this.tilePos}getNextTilePos(){if(!this.isMoving())return this.tilePos;let e=this.tilePos.layer,t=this.tilePosInDirection(this.tilePos.position,this.movementDirection),i=this.tilemap.getTransition(t,this.tilePos.layer);return i&&(e=i),{position:this.tilePosInDirection(this.tilePos.position,this.movementDirection),layer:e}}getTileWidth(){return this.tileWidth}getTileHeight(){return this.tileHeight}move(e){this.lastMovementImpulse=e,e!="none"&&(this.isMoving()||(this.isBlockingDirection(e)?this.changeFacingDirection(e):this.startMoving(e)))}update(e){this.movement?.update(e),this.isMoving()&&this.updateCharacterPosition(e),this.lastMovementImpulse="none"}getMovementDirection(){return this.movementDirection}isBlockingDirection(e){if(e=="none")return!1;let t=this.tilePosInDirection(this.getNextTilePos().position,e),i=this.tilemap.getTransition(t,this.getNextTilePos().layer)||this.getNextTilePos().layer;return this.collidesWithTilesInternal&&this.isTileBlocking(e,i)?!0:this.isCharBlocking(e,i)}isTileBlocking(e,t){return this.someCharTile((i,n)=>{let s=this.tilePosInDirection(new k(i,n),e);return this.tilemap.hasBlockingTile(s,t,ob(e),this.ignoreMissingTiles)})}isCharBlocking(e,t){return this.someCharTile((i,n)=>{let s=this.tilePosInDirection(new k(i,n),e);return this.tilemap.hasBlockingChar(s,t,this.getCollisionGroups(),new Set([this.getId()]),this.ignoreCollisionGroups)})}isMoving(){return this.movementDirection!="none"}turnTowards(e){this.isMoving()||e!="none"&&this.changeFacingDirection(e)}changeFacingDirection(e){this.facingDirection!==e&&(this.facingDirection=e,this.directionChanged$.next(e))}getFacingDirection(){return this.facingDirection}getFacingPosition(){return this._tilePos.position.add(Xt(this.facingDirection))}addCollisionGroup(e){this.collisionGroups.add(e)}setCollisionGroups(e){this.collisionGroups=new Set(e)}setIgnoreCollisionGroups(e){this.ignoreCollisionGroups=new Set(e)}getCollisionGroups(){return Array.from(this.collisionGroups)}getIgnoreCollisionGroups(){return Array.from(this.ignoreCollisionGroups)}hasCollisionGroup(e){return this.collisionGroups.has(e)}removeCollisionGroup(e){this.collisionGroups.delete(e)}removeAllCollisionGroups(){this.collisionGroups.clear()}addLabels(e){for(let t of e)this.labels.add(t)}getLabels(){return[...this.labels.values()]}hasLabel(e){return this.labels.has(e)}clearLabels(){this.labels.clear()}removeLabels(e){for(let t of e)this.labels.delete(t)}getNumberOfDirections(){return this.numberOfDirections}movementStarted(){return this.movementStarted$}movementStopped(){return this.movementStopped$}directionChanged(){return this.directionChanged$}tilePositionSet(){return this.tilePositionSet$}positionChangeStarted(){return this.positionChangeStarted$}positionChangeFinished(){return this.positionChangeFinished$}autoMovementSet(){return this.autoMovementSet$}depthChanged(){return this.depthChanged$}getMovementProgress(){return this.movementProgress}setMovementProgress(e){let t=Math.max(0,Math.min(xi,e));this.movementProgress=t}hasWalkedHalfATile(){return this.movementProgress>xi/2}willCrossTileBorderThisUpdate(e){return this.movementProgress+this.maxProgressForDelta(e)>=xi}updateCharacterPosition(e){let t=this.willCrossTileBorderThisUpdate(e),n=1-(t?xi-this.movementProgress:this.maxProgressForDelta(e))/this.maxProgressForDelta(e);this.movementProgress=Math.min(this.movementProgress+this.maxProgressForDelta(e),xi),t&&(this.movementProgress=0,this.shouldContinueMoving()?(this.fire(this.positionChangeFinished$,this.tilePos,this.getNextTilePos()),this.tilePos=this.getNextTilePos(),this.startMoving(this.lastMovementImpulse),n>0&&this.updateCharacterPosition(e*n)):this.stopMoving())}maxProgressForDelta(e){let i=e/1e3;return Math.floor(i*this.speed*xi)}get tilePos(){return G.clone(this._tilePos)}set tilePos(e){G.copyOver(e,this._tilePos)}startMoving(e){e!=="none"&&(e!=this.movementDirection&&this.movementStarted$.next(e),this.movementDirection=e,this.facingDirection=e,this.fire(this.positionChangeStarted$,this.tilePos,this.getNextTilePos()))}tilePosInDirection(e,t){return e.add(Xt(this.tilemap.toMapDirection(t)))}shouldContinueMoving(){return this.lastMovementImpulse!=="none"&&!this.isBlockingDirection(this.lastMovementImpulse)}stopMoving(){if(this.movementDirection==="none")return;let e=this.tilePos,t=this.getNextTilePos(),i=this.movementDirection;this.tilePos=this.getNextTilePos(),this.movementDirection="none",this.movementStopped$.next(i),this.fire(this.positionChangeFinished$,e,t)}fire(e,{position:t,layer:i},{position:n,layer:s}){e.next({exitTile:t,enterTile:n,exitLayer:i,enterLayer:s})}someCharTile(e){let t=this.getNextTilePos().position;for(let i=t.x;i<t.x+this.getTileWidth();i++)for(let n=t.y;n<t.y+this.getTileHeight();n++)if(e(i,n))return!0;return!1}};var oP=bt(Mi(),1),Aa=class r{constructor(e,t){this.walkingAnimationMapping=e;this.charsInRow=t;this.lastFootLeft=!1;this.directionToFrameRow={down:0,"down-left":1,"down-right":2,left:1,right:2,up:3,"up-left":1,"up-right":2};this._isEnabled=!0;this.frameChange$=new oP.Subject;this.setWalkingAnimationMapping(e)}static{this.FRAMES_CHAR_ROW=3}static{this.FRAMES_CHAR_COL=4}frameChange(){return this.frameChange$}setIsEnabled(e){this._isEnabled=e}isEnabled(){return this._isEnabled}updateCharacterFrame(e,t,i){this._isEnabled&&(t?this.setStandingFrameDuringWalk(e,i):this.setWalkingFrame(e))}setStandingFrame(e){this._isEnabled&&this._setStandingFrame(e)}setWalkingAnimationMapping(e){this.walkingAnimationMapping=e,this._isEnabled=this.walkingAnimationMapping!==void 0}getWalkingAnimationMapping(){return this.walkingAnimationMapping}getCharsInRow(){return this.charsInRow}setStandingFrameDuringWalk(e,t){this.isCurrentFrameStanding(e,t)||(this.lastFootLeft=!this.lastFootLeft),this._setStandingFrame(e)}setWalkingFrame(e){let t=this.framesOfDirection(e);t&&this.frameChange$.next(this.lastFootLeft?t.rightFoot:t.leftFoot)}_setStandingFrame(e){let t=this.framesOfDirection(e);t&&this.frameChange$.next(t.standing)}isCurrentFrameStanding(e,t){return t===this.framesOfDirection(e)?.standing}framesOfDirection(e){return typeof this.walkingAnimationMapping=="number"?this.getFramesForCharIndex(e,this.walkingAnimationMapping):this.getFramesForAnimationMapping(e)}getFramesForAnimationMapping(e){if(this.walkingAnimationMapping)return this.walkingAnimationMapping[e]||this.walkingAnimationMapping[this.fallbackDirection(e)]}fallbackDirection(e){switch(e){case"down-left":return"left";case"down-right":return"right";case"up-left":return"left";case"up-right":return"right"}return e}getFramesForCharIndex(e,t){let i=Math.floor(t/this.charsInRow),n=t%this.charsInRow,s=this.charsInRow*r.FRAMES_CHAR_ROW,c=r.FRAMES_CHAR_ROW*n,l=(this.directionToFrameRow[e]??0)+i*r.FRAMES_CHAR_COL,h=c+l*s;return{rightFoot:h,standing:h+1,leftFoot:h+2}}};var an=class{static shiftPad(e,t){let i=Math.floor(e),s=`${i}`.padStart(t,"0").length;return i/Math.pow(10,s)}};var Iv=bt(Mi(),1),uf=bt(Po(),1);var qe=class r{static vec2str(e){return`${e.x}#${e.y}`}static equal(e,t){return r.vec2str(e)==r.vec2str(t)}static manhattanDistance(e,t){let i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return i+n}static chebyshevDistance(e,t){let i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.max(i,n)}static scalarMult(e,t){return e.clone().multiply(new k(t,t))}};var sn=class r{constructor(e){this.tilemap=e;this.charLayerDepths=new Map;this.setLayerDepths()}static{this.ALWAYS_TOP_PROP_NAME="ge_alwaysTop"}static{this.CHAR_LAYER_PROP_NAME="ge_charLayer"}static{this.HEIGHT_SHIFT_PROP_NAME="ge_heightShift"}static{this.Z_INDEX_PADDING=7}getTileWidth(){let e=this.tilemap.layers[0]?.tilemapLayer.scale??1;return this.tilemap.tileWidth*e}getTileHeight(){let e=this.tilemap.layers[0]?.tilemapLayer.scale??1;return this.tilemap.tileHeight*e}getDepthOfCharLayer(e){return this.charLayerDepths.get(e)??0}tilePosToPixelPos(e){return this.isIsometric()?qe.scalarMult(this.getTileSize(),.5).multiply(new k(e.x-e.y,e.x+e.y)):e.clone().multiply(this.getTileSize())}getTileDistance(e){if(this.isIsometric())switch(e){case"down-left":case"down-right":case"up-left":case"up-right":return qe.scalarMult(this.getTileSize(),.5);default:return this.getTileSize()}return this.getTileSize()}getTileSize(){return new k(this.getTileWidth(),this.getTileHeight())}isIsometric(){return this.tilemap.orientation==Phaser.Tilemaps.Orientation.ISOMETRIC.toString()}isLayerAlwaysOnTop(e){return this.hasLayerProp(e,r.ALWAYS_TOP_PROP_NAME)}isCharLayer(e){return this.hasLayerProp(e,r.CHAR_LAYER_PROP_NAME)}setLayerDepths(){let e=[],t=-1,i=this.tilemap.layers.filter(s=>this.isLayerAlwaysOnTop(s));this.tilemap.layers.filter(s=>!this.isLayerAlwaysOnTop(s)).forEach(s=>{this.hasLayerProp(s,r.HEIGHT_SHIFT_PROP_NAME)?(this.createHeightShiftLayers(s,t),e.push(s.tilemapLayer)):this.setDepth(s,++t)}),this.charLayerDepths.set(void 0,t),i.forEach((s,c)=>{s.tilemapLayer.setDepth(c+1+t)}),e.forEach(s=>s.destroy())}setDepth(e,t){e.tilemapLayer.setDepth(t),this.isCharLayer(e)&&this.charLayerDepths.set(this.getLayerProp(e,r.CHAR_LAYER_PROP_NAME),t)}createHeightShiftLayers(e,t){let i=this.getLayerProp(e,r.HEIGHT_SHIFT_PROP_NAME);isNaN(i)&&(i=0);let n=1;for(let s=0;s<e.height;s++){let c=this.copyLayer(e,s);if(c){c.scale=e.tilemapLayer.scale;let l=this.isIsometric()?this.getTileHeight()/2:this.getTileHeight();c.setDepth(t+an.shiftPad((s+i)*l+n,r.Z_INDEX_PADDING))}}}getLayerProp(e,t){return e.properties.find(s=>s.name==t)?.value}hasLayerProp(e,t){return this.getLayerProp(e,t)!=null}copyLayer(e,t){let i=`${e.name}#${t}`,n=this.tilemap.createBlankLayer(i,e.tilemapLayer.tileset);if(n){if(n.name=i,this.isIsometric())for(let s=t;s>=0;s--){let c=t-s;n.putTileAt(e.data[s][c],c,s)}else for(let s=0;s<e.width;s++)n.putTileAt(e.data[t][s],s,t);return n}}};var sf=class{constructor(e,t,i,n,s){this.charData=e;this.scene=t;this.tilemap=i;this.geHeadless=s;this.customOffset=new k(0,0);this.cachedContainerHeight=0;this.newSpriteSet$=new Iv.Subject;this.destroy$=new Iv.Subject;this.layerOverlaySprite=n&&e.sprite?this.scene.add.sprite(0,0,e.sprite.texture):void 0,this.walkingAnimationMapping=e.walkingAnimationMapping,this.customOffset=new k(e.offsetX||0,e.offsetY||0),this.sprite=e.sprite,this.container=e.container,this.cachedContainerHeight=e.container?.getBounds().height??0,this.geHeadless.directionChanged().pipe((0,uf.filter)(({charId:c})=>c===this.charData.id)).subscribe(({direction:c})=>{this.animation?.setStandingFrame(c)}),this.sprite&&(this.sprite.setOrigin(0,0),this.resetAnimation(this.sprite),this.updateOverlaySprite(),this.updateGridChar())}destroy(){this.destroy$.next(),this.destroy$.complete(),this.newSpriteSet$.complete()}setSprite(e){e?(this.sprite&&(e.x=this.sprite.x,e.y=this.sprite.y),this.sprite=e,this.newSpriteSet$.next(),this.layerOverlaySprite=this.layerOverlaySprite?this.scene.add.sprite(0,0,this.sprite.texture):void 0,this.updateOverlaySprite(),this.resetAnimation(this.sprite),this.updateDepth()):(this.layerOverlaySprite=void 0,this.sprite=void 0)}getSprite(){return this.sprite}getLayerOverlaySprite(){return this.layerOverlaySprite}setContainer(e){this.container=e,this.cachedContainerHeight=e?.getBounds().height??0}getContainer(){return this.container}getOffsetX(){return this.customOffset.x}setOffsetX(e){this.customOffset.x=e}getOffsetY(){return this.customOffset.y}setOffsetY(e){this.customOffset.y=e}getWalkingAnimationMapping(){return this.walkingAnimationMapping}turnTowards(e){this.geHeadless.isMoving(this.charData.id)||e!="none"&&(this.geHeadless.turnTowards(this.charData.id,e),this.animation?.setStandingFrame(e))}getAnimation(){return this.animation}setAnimation(e){this.animation=e}update(e){this.updateGridChar()}getEngineOffset(){if(!this.sprite)return k.ZERO;let e=this.tilemap.getTileWidth()/2-Math.floor((this.sprite?.displayWidth??0)/2),t=-(this.sprite?.displayHeight??0)+this.tilemap.getTileHeight();return new k(e,t)}updatePixelPos(){let e=new k(this.geHeadless.getPosition(this.charData.id)),t=this.geHeadless.getMovementProgress(this.charData.id)/1e3,n=this.tilemap.tilePosToPixelPos(e).add(this.getEngineOffset()).add(this.customOffset).add(Xt(this.geHeadless.getFacingDirection(this.charData.id)).multiply(this.tilemap.getTileDistance(this.geHeadless.getFacingDirection(this.charData.id)).scalarMult(t))),s=this.getGameObj();s&&(s.x=Math.floor(n.x),s.y=Math.floor(n.y))}getGameObj(){return this.container||this.sprite}updateGridChar(){if(this.updatePixelPos(),this.sprite&&this.geHeadless.isMoving(this.charData.id)){let e=this.geHeadless.getMovementProgress(this.charData.id)>xi/2;this.getAnimation()?.updateCharacterFrame(this.geHeadless.getFacingDirection(this.charData.id),e,Number(this.sprite.frame.name))}this.updateDepth()}resetAnimation(e){let t=new Aa(this.walkingAnimationMapping,e.texture.source[0].width/e.width/Aa.FRAMES_CHAR_ROW);this.setAnimation(t),t.frameChange().pipe((0,uf.takeUntil)(this.newSpriteSet$)).subscribe(i=>{e?.setFrame(i)}),t.setIsEnabled(this.walkingAnimationMapping!==void 0),t.setStandingFrame(this.geHeadless.getFacingDirection(this.charData.id))}updateOverlaySprite(){if(!this.layerOverlaySprite||!this.sprite)return;this.layerOverlaySprite.scale=this.sprite.scale;let e=this.tilemap.getTileHeight()/this.layerOverlaySprite.scale;this.layerOverlaySprite.setCrop(0,0,this.layerOverlaySprite.displayWidth,this.sprite.height-e),this.layerOverlaySprite.setOrigin(0,0)}updateDepth(){if(!this.getGameObj())return;let t=new k(this.geHeadless.getPosition(this.charData.id)),i=this.geHeadless.getCharLayer(this.charData.id);this.container?this.setContainerDepth(this.container,{position:t,layer:i}):this.sprite&&this.setSpriteDepth(this.sprite,{position:t,layer:i});let n=this.getLayerOverlaySprite();if(n){let s=new k({...t,y:t.y-1});this.setSpriteDepth(n,{position:s,layer:i})}}setSpriteDepth(e,t){e.setDepth(this.tilemap.getDepthOfCharLayer(this.getTransitionLayer(t))+this.getPaddedPixelDepthSprite(e))}setContainerDepth(e,t){e.setDepth(this.tilemap.getDepthOfCharLayer(this.getTransitionLayer(t))+this.getPaddedPixelDepthContainer(e))}getPaddedPixelDepthContainer(e){return an.shiftPad(e.y+this.cachedContainerHeight,sn.Z_INDEX_PADDING)}getPaddedPixelDepthSprite(e){return an.shiftPad(e.y+e.displayHeight,sn.Z_INDEX_PADDING)}getTransitionLayer(e){if(e.layer)return this.geHeadless.getTransition(e.position,e.layer)||e.layer}};var Ea=(n=>(n.DONT_BLOCK="DONT_BLOCK",n.BLOCK_TWO_TILES="BLOCK_TWO_TILES",n.BLOCK_ONE_TILE_AHEAD="BLOCK_ONE_TILE_AHEAD",n.BLOCK_ONE_TILE_BEHIND="BLOCK_ONE_TILE_BEHIND",n))(Ea||{});var un=(i=>(i.STOP="STOP",i.CLOSEST_REACHABLE="CLOSEST_REACHABLE",i.RETRY="RETRY",i))(un||{});var cf=class{distance(e,t){return qe.manhattanDistance(e,t)}direction(e,t){if(qe.equal(e,t))return"none";let i=e.clone().subtract(t);return Math.abs(i.x)>Math.abs(i.y)?i.x>0?"left":"right":i.y>0?"up":"down"}neighbors(e){return[new k(e.x,e.y+1),new k(e.x+1,e.y),new k(e.x-1,e.y),new k(e.x,e.y-1)]}getDirections(){return["up","right","down","left"]}};var lf=class{distance(e,t){return qe.chebyshevDistance(e,t)}neighbors(e){let t=[new k(e.x,e.y+1),new k(e.x+1,e.y),new k(e.x-1,e.y),new k(e.x,e.y-1)],i=[new k(e.x+1,e.y+1),new k(e.x+1,e.y-1),new k(e.x-1,e.y+1),new k(e.x-1,e.y-1)];return[...t,...i]}direction(e,t){return t.x>e.x?t.y>e.y?"down-right":t.y<e.y?"up-right":"right":t.x<e.x?t.y>e.y?"down-left":t.y<e.y?"up-left":"left":t.y<e.y?"up":t.y>e.y?"down":"none"}getDirections(){return["up","right","down","left","down-left","down-right","up-right","up-left"]}};var lt=class{static create(e){switch(e){case 4:return new cf;case 8:return new lf}}};var qa=class{constructor(e,t,i){this.backoffMs=e;this.maxRetries=t;this.onFinished=i;this.retries=0;this.elapsed=0}retry(e,t){this.shouldRetry()?(this.elapsed+=e,this.elapsed>=this.backoffMs&&(this.elapsed=0,this.retries++,t())):this.onFinished()}reset(){this.retries=0,this.elapsed=0}getMaxRetries(){return this.maxRetries}getBackoffMs(){return this.backoffMs}shouldRetry(){return this.maxRetries===-1||this.retries<this.maxRetries}};var wo=(i=>(i.WAIT="WAIT",i.RETRY="RETRY",i.STOP="STOP",i))(wo||{});var zo=bt(Mi(),1);var yr=class{constructor(e,{shortestPathAlgorithm:t="BFS",pathWidth:i=1,pathHeight:n=1,numberOfDirections:s=4,isPositionAllowed:c=(L,D)=>!0,collisionGroups:l=[],ignoredChars:h=[],ignoreTiles:p=!1,ignoreMapBounds:v=!1,ignoreBlockedTarget:b=!1,maxPathLength:w=1/0,ignoreLayers:T=!1,considerCosts:E=!1,calculateClosestToTarget:M=!0}={}){this.gridTilemap=e;this.options={shortestPathAlgorithm:t,pathWidth:i,pathHeight:n,numberOfDirections:s,isPositionAllowed:c,collisionGroups:l,ignoredChars:h,ignoreTiles:p,ignoreMapBounds:v,ignoreBlockedTarget:b,maxPathLength:w,ignoreLayers:T,considerCosts:E,calculateClosestToTarget:M}}findShortestPath(e,t){this.options.ignoreLayers&&(this.gridTilemap.fixCacheLayer(e.layer),t.layer=e.layer);let i=this.findShortestPathImpl(e,t);return this.gridTilemap.unfixCacheLayers(),i}getNeighbors(e,t){return lt.create(this.options.numberOfDirections??4).neighbors(e.position).map(c=>{let l=e.layer;return this.options.ignoreLayers||(l=this.gridTilemap.getTransition(c,e.layer)),{position:c,layer:l||e.layer}}).filter(c=>!this.isBlocking(e,c)||this.options.ignoreBlockedTarget&&G.equal(c,t))}getTransition(e,t){if(!this.options.ignoreLayers)return this.gridTilemap.getTransition(e,t)}getCosts(e,t){if(!this.options.considerCosts)return 1;let i=rt(t.position,e);return this.gridTilemap.getTileCosts(t,i)}isBlocking(e,t){return!(this.options.ignoreMapBounds||this.gridTilemap.isInRange(t.position))||!this.options.isPositionAllowed(t.position,t.layer)||!this.options.ignoreTiles&&this.hasBlockingTileFrom(e,t,this.options.pathWidth,this.options.pathHeight,this.options.ignoreMapBounds,this.gridTilemap)?!0:this.hasBlockingCharFrom(t,this.options.pathWidth,this.options.pathHeight,this.options.collisionGroups,this.options.ignoredChars,this.gridTilemap)}distance(e,t){return(this.options.numberOfDirections===4?qe.manhattanDistance:qe.chebyshevDistance)(e,t)}getTilePosInDir(e,t){return this.gridTilemap.getTilePosInDirection(e,t)}getReverseNeighbors(e,t){let n=lt.create(this.options.numberOfDirections??4).neighbors(e.position),s;if(!this.options.ignoreLayers){let l=this.gridTilemap.getReverseTransitions(e.position,e.layer);s=l?[...l]:void 0}return n.map(l=>s?s.map(h=>({position:l,layer:h||e.layer})):[{position:l,layer:e.layer}]).flat().filter(l=>!this.isBlocking(l,e)||this.options.ignoreBlockedTarget&&G.equal(e,t))}hasBlockingCharFrom(e,t,i,n,s,c){for(let l=e.position.x;l<e.position.x+t;l++)for(let h=e.position.y;h<e.position.y+i;h++)if(c.hasBlockingChar(new k(l,h),e.layer,n,new Set(s)))return!0;return!1}hasBlockingTileFrom(e,t,i,n,s,c){for(let l=t.position.x;l<t.position.x+i;l++)for(let h=t.position.y;h<t.position.y+n;h++)if(c.hasBlockingTile(new k(l,h),t.layer,rt(t.position,e.position),s))return!0;return!1}};var _P=bt(hf(),1);var pf=class extends yr{findShortestPathImpl(e,t){let i=this.shortestPathBfs(e,t);return{path:this.returnPath(i.previous,e,t),closestToTarget:i.closestToTarget,steps:i.steps,maxPathLengthReached:i.maxPathLengthReached,algorithmUsed:"A_STAR"}}shortestPathBfs(e,t){let i=new Map,n=new Map,s=new Map,c=new _P.MinFibonacciHeap((v,b)=>La(s,v)-La(s,b)),l=e,h=this.distance(e.position,t.position),p=0;for(c.push(e),n.set(G.toString(e),0),s.set(G.toString(e),this.distance(e.position,t.position));c.size>0;){let v=c.pop();if(!v)break;p++;let b=this.distance(v.position,t.position);if(b<h&&(h=b,l=v),bP(v,t))return{previous:i,closestToTarget:l,steps:p,maxPathLengthReached:!1};if(La(n,v)+1>this.options.maxPathLength)return{previous:new Map,closestToTarget:l,steps:p,maxPathLengthReached:!0};for(let w of this.getNeighbors(v,t)){let T=La(n,v)+this.getCosts(v.position,w),E=G.toString(w);(!n.has(E)||T<La(n,w))&&(i.set(E,v),n.set(E,T),s.set(E,T+this.distance(w.position,t.position)),c.push(w))}}return{previous:i,closestToTarget:l,steps:p,maxPathLengthReached:!1}}returnPath(e,t,i){let n=[],s=i;for(n.push(s);!bP(s,t);){if(s=e.get(G.toString(s)),!s)return[];n.push(s)}return n.reverse()}};function La(r,e){return r.get(G.toString(e))??Number.MAX_VALUE}function bP(r,e){return qe.equal(r.position,e.position)?r.layer===e.layer:!1}var df=class{constructor(e){this.data=e}},$r=class{constructor(){this.sizeInternal=0}dequeue(){if(this.tail===void 0)return;this.sizeInternal--;let e=this.tail.data;return this.tail.prev===void 0?(this.tail=void 0,this.head=void 0,e):(this.tail.prev.next=void 0,this.tail=this.tail.prev,e)}enqueue(e){if(this.sizeInternal++,this.head===void 0){this.head=new df(e),this.tail=this.head;return}let t=new df(e);t.next=this.head,this.head.prev=t,this.head=t}peek(){return this.tail?this.tail.data:void 0}peekAll(){let e=[],t=this.tail;for(;t;)e.push(t.data),t=t.prev;return e}clear(){this.head=void 0,this.tail=void 0,this.sizeInternal=0}peekEnd(){return this.head?.data}size(){return this.sizeInternal}};var Oo=class extends yr{findShortestPathImpl(e,t){let i=this.shortestPathBfs(e,t);return{path:this.returnPath(i.previous,e,t),closestToTarget:i.closestToTarget,steps:i.steps,maxPathLengthReached:i.maxPathLengthReached,algorithmUsed:"BFS"}}equal(e,t){return qe.equal(e.position,t.position)?e.layer===t.layer:!1}shortestPathBfs(e,t){let i=new Map,n=new Set,s=new $r,c=e,l=this.distance(e.position,t.position),h=0;for(s.enqueue({node:e,dist:0}),n.add(G.toString(e));s.size()>0;){let p=s.dequeue();if(h++,!p)break;let{node:v,dist:b}=p;if(b>this.options.maxPathLength)return{previous:new Map,closestToTarget:c,steps:h,maxPathLengthReached:!0};let w=this.distance(v.position,t.position);if(w<l&&(l=w,c=v),this.equal(v,t))return{previous:i,closestToTarget:c,steps:h,maxPathLengthReached:!1};for(let T of this.getNeighbors(v,t))n.has(G.toString(T))||(i.set(G.toString(T),v),s.enqueue({node:T,dist:b+1}),n.add(G.toString(T)))}return{previous:i,closestToTarget:c,steps:h,maxPathLengthReached:!1}}returnPath(e,t,i){let n=[],s=i;for(n.push(s);!this.equal(s,t);){if(s=e.get(G.toString(s)),!s)return[];n.push(s)}return n.reverse()}};var vf=class{constructor(){this.previous=new Map;this.visited=new Map;this.queue=new $r;this.minMatching=1/0;this.lastDist=0}isNewFrontier(){let e=this.queue.peek();return!!(e&&e.dist>this.lastDist)}step(e,t,i){this.lastDist=i;for(let n of e){let s=G.toString(n);if(!this.visited.has(s)){this.previous.set(s,t),this.queue.enqueue({node:n,dist:i+1}),this.visited.set(s,i+1);let c=this.otherBfs?.visited.get(s);c!==void 0&&c<this.minMatching&&(this.minMatching=c,this.minMatchingNode=n)}}}},mf=class extends yr{findShortestPathImpl(e,t){let i=this.shortestPathBfs(e,t);return{path:this.returnPath(i.previous,i.previous2,i.matchingPos,e,t),closestToTarget:i.closestToTarget,steps:i.steps,maxPathLengthReached:i.maxPathLengthReached,algorithmUsed:"BIDIRECTIONAL_SEARCH"}}equal(e,t){return qe.equal(e.position,t.position)?e.layer===t.layer:!1}shortestPathBfs(e,t){if(G.equal(e,t))return{previous:new Map,previous2:new Map,closestToTarget:e,steps:0,maxPathLengthReached:!1};let i=new vf,n=new vf,s=0;i.otherBfs=n,n.otherBfs=i;let c=e,l=this.distance(e.position,t.position);for(i.queue.enqueue({node:e,dist:0}),n.queue.enqueue({node:t,dist:0}),i.visited.set(G.toString(e),0),n.visited.set(G.toString(t),0);this.shouldStop(i.queue.size()>0,n.queue.size()>0);){let h=i.queue.dequeue();if(!h)break;let{node:p,dist:v}=h;if(v+1+(n.queue.peek()?.dist||0)>this.options.maxPathLength)return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(c),steps:s,maxPathLengthReached:!0};let b=this.distance(p.position,t.position);if(b<l&&(l=b,c=p),s++,i.step(this.getNeighbors(p,t),p,v),i.isNewFrontier()&&i.minMatchingNode)return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(t),matchingPos:i.minMatchingNode,steps:s,maxPathLengthReached:!1};let w=n.queue.dequeue();if(!w)continue;let{node:T,dist:E}=w;if(s++,n.step(this.getReverseNeighbors(T,t),T,E),n.isNewFrontier()&&n.minMatchingNode)return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(t),matchingPos:n.minMatchingNode,steps:s,maxPathLengthReached:!1}}return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(c),steps:s,maxPathLengthReached:!1}}shouldStop(e,t){return this.options.calculateClosestToTarget?e||t:e&&t}maybeClosestToTarget(e){return this.options.calculateClosestToTarget?e:void 0}returnPath(e,t,i,n,s){if(i){let c=this.getPathFromPrev(e,n,i).reverse(),l=this.getPathFromPrev(t,s,i);return c.pop(),[...c,...l]}else return this.getPathFromPrev(e,n,s).reverse()}getPathFromPrev(e,t,i){let n=[],s=i;for(n.push(s);!this.equal(s,t);){if(s=e.get(G.toString(s)),!s)return[];n.push(s)}return n}};var dm=bt(Fw(),1);var jo=class extends yr{constructor(t,i={}){super(t,i);this.openSet=new dm.MinFibonacciHeap;this.g=new Map;this.f=new Map;this.closestToTarget={position:new k(0,0),layer:void 0};this.smallestDistToTarget=0;this.steps=0;this.maxFrontierSize=0;this.maxJumpSize=0;this.turnOrder={right:0,"down-right":1,down:2,"down-left":3,left:4,"up-left":5,up:6,"up-right":7};this.turnTimes=b5();this.distanceUtils=lt.create(4)}findShortestPathImpl(t,i){this.maxJumpSize=this.distance(t.position,i.position);let n=this.shortestPath(t,i);return{path:this.returnPath(n.previous,t,i),closestToTarget:n.closestToTarget,steps:n.steps,maxPathLengthReached:n.maxPathLengthReached,algorithmUsed:"JPS"}}shortestPath(t,i){this.steps=0;let n=new Map;this.g=new Map,this.f=new Map,this.closestToTarget=t,this.smallestDistToTarget=this.distance(t.position,i.position),this.openSet=new dm.MinFibonacciHeap((c,l)=>Da(this.f,c)-Da(this.f,l)),this.openSet.push(t);let s=G.toString(t);for(this.g.set(s,0),this.f.set(s,this.distance(t.position,i.position)),this.maxFrontierSize=Math.max(this.maxFrontierSize,this.openSet.size);this.openSet.size>0;){let c=this.openSet.pop();if(!c)break;if(this.steps++,G.equal(c,i))return{previous:n,closestToTarget:i,steps:this.steps,maxPathLengthReached:!1};if(Da(this.g,c)+1>this.options.maxPathLength)return{previous:new Map,closestToTarget:this.closestToTarget,steps:this.steps,maxPathLengthReached:!0};this.updateClosestToTarget(c,i);for(let l of this.getNeighborsInternal(c,n.get(G.toString(c)),i)){let h=G.toString(l.p),p=Da(this.g,c)+l.dist;(!this.g.has(h)||p<Da(this.g,l.p))&&(n.set(h,c),this.g.set(h,p),this.f.set(h,p+this.distance(l.p.position,i.position)),this.openSet.push(l.p))}}return{previous:n,closestToTarget:this.closestToTarget,steps:this.steps,maxPathLengthReached:!1}}updateClosestToTarget(t,i){let n=this.distance(t.position,i.position);n<this.smallestDistToTarget&&(this.smallestDistToTarget=n,this.closestToTarget=t)}getNeighborsInternal(t,i,n){if(!i||t.layer!==i.layer)return this.getNeighbors(t,n).map(l=>({p:l,dist:1}));let s=this.prune(i,t).map(l=>{let h=this.getTransition(l.position,t.layer);return{position:l.position,layer:h||t.layer}}),c=[];for(let l of s){let h=this.jump(t,l,n,1);h&&c.push(h)}return c}jump(t,i,n,s){let c=this.distanceUtils.direction(t.position,i.position);if(!(this.isBlocking(t,i)&&!(G.equal(i,n)&&this.options.ignoreBlockedTarget)))return G.equal(i,n)?{p:i,dist:s}:s>=this.maxJumpSize?{p:i,dist:s}:this.getTransition(i.position,t.layer)!==void 0?{p:i,dist:s}:cp(c)?{p:i,dist:s}:this.getForced(t,i).length>0?{p:i,dist:s}:(this.updateClosestToTarget(i,n),this.jump(i,this.getTilePosInDir(i,rt(t.position,i.position)),n,s+1))}getForced(t,i){let n=[],s=this.posInDir(i,this.distanceUtils.direction(i.position,t.position)),{topLeft:c,downLeft:l,top:h,bottom:p}=this.normalizedPositions(s,i),v=(w,T)=>this.isBlocking(w,T)||this.getTransition(T.position,T.layer)!==void 0,b=this.distanceUtils.direction(t.position,i.position);return ib(b)&&((v(s,l)||v(l,p))&&!this.isBlocking(i,p)&&n.push(p),(v(s,c)||v(c,h))&&!this.isBlocking(i,h)&&n.push(h)),n}prune(t,i){let{right:n,top:s,bottom:c}=this.normalizedPositions(t,i),l=this.getForced(t,i),h=rt(t.position,i.position);return cp(h)?[n,s,c]:[n,...l]}normalizedPositions(t,i){let n=rt(t.position,i.position);return{topLeft:this.posInDir(i,this.turnTimes.get("up-left")?.get(this.turnOrder[n])||"up-left"),downLeft:this.posInDir(i,this.turnTimes.get("down-left")?.get(this.turnOrder[n])||"down-left"),downRight:this.posInDir(i,this.turnTimes.get("down-right")?.get(this.turnOrder[n])||"down-right"),topRight:this.posInDir(i,this.turnTimes.get("up-right")?.get(this.turnOrder[n])||"up-right"),top:this.posInDir(i,this.turnTimes.get("up")?.get(this.turnOrder[n])||"up"),bottom:this.posInDir(i,this.turnTimes.get("down")?.get(this.turnOrder[n])||"down"),right:this.posInDir(i,this.turnTimes.get("right")?.get(this.turnOrder[n])||"right")}}posInDir(t,i){return{position:t.position.add(Xt(i)),layer:t.layer}}returnPath(t,i,n){let s=[],c=n;for(s.push(c);!G.equal(c,i);){let l=t.get(G.toString(c));if(!l)return[];this.distance(l.position,c.position)>1?this.fillPath(c,l,s):s.push(l),c=l}return s.reverse()}fillPath(t,i,n){let s=t;do{let c=rt(s.position,i.position);s=this.getTilePosInDir(s,c),n.push(s)}while(!qe.equal(s.position,i.position))}};function Da(r,e){return r.get(G.toString(e))??Number.MAX_VALUE}function b5(){let r=["right","down-right","down","down-left","left","up-left","up","up-right"],e=new Map;for(let t=0;t<r.length;t++){let i=new Map,n=r[t];i.set(0,n);for(let s=1;s<=7;s++)n=Mn(n),i.set(s,n);e.set(r[t],i)}return e}var Io=bt(Po(),1);var Af=class{constructor(e,t,i,n={}){this.character=e;this.gridTilemap=t;this.charToFollow=i;let s={distance:0,noPathFoundStrategy:"STOP",maxPathLength:1/0,shortestPathAlgorithm:"BIDIRECTIONAL_SEARCH",ignoreLayers:!1,considerCosts:n.considerCosts||!1,facingDirection:"none"};this.options={...s,...n},this.options.considerCosts&&this.options.shortestPathAlgorithm!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${this.options.shortestPathAlgorithm}'. It can only be used with A* algorithm.`),this.character=e,this.updateTarget(this.charToFollow.getTilePos().position,this.charToFollow.getTilePos().layer),this.charToFollow.positionChangeStarted().pipe((0,Io.takeUntil)(this.character.autoMovementSet().pipe((0,Io.filter)(c=>c!==this),(0,Io.take)(1)))).subscribe(({enterTile:c,enterLayer:l})=>{this.updateTarget(c,l)})}update(e){this.targetMovement?.update(e)}getInfo(){return{type:"Follow",config:{charToFollow:this.charToFollow.getId(),distance:this.options.distance,noPathFoundStrategy:this.options.noPathFoundStrategy,maxPathLength:this.options.maxPathLength,ignoreLayers:this.options.ignoreLayers,facingDirection:this.options.facingDirection,shortestPathAlgorithm:this.options.shortestPathAlgorithm}}}updateTarget(e,t){let i=this.options.facingDirection!=="none"&&this.options.distance===0;if(i){let n=ha[this.options.facingDirection]+ha[this.charToFollow.getFacingDirection()],s=Mn("up",n);e=this.gridTilemap.getTilePosInDirection({position:new k(e),layer:t},s).position}this.targetMovement=new Fo(this.character,this.gridTilemap,{position:new k(e),layer:t},{distance:i?0:this.options.distance+1,config:{algorithm:this.options.shortestPathAlgorithm,noPathFoundStrategy:this.options.noPathFoundStrategy,maxPathLength:this.options.maxPathLength,ignoreLayers:this.options.ignoreLayers,considerCosts:this.options.considerCosts},ignoreBlockedTarget:!0})}};var ka=class{static getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}};var Do=bt(Po(),1);var Ef=class{constructor(e,t=0,i=-1){this.character=e;this.delay=t;this.radius=i;this.stepSize=0;this.delayLeft=this.delay,this.initialRow=e.getNextTilePos().position.y,this.initialCol=e.getNextTilePos().position.x,this.randomizeStepSize(),this.stepsWalked=0,this.currentMovementDirection="none",this.character.positionChangeStarted().pipe((0,Do.takeUntil)(this.character.autoMovementSet().pipe((0,Do.filter)(n=>n!==this),(0,Do.take)(1)))).subscribe(()=>{this.stepsWalked++}),this.distanceUtils=lt.create(e.getNumberOfDirections())}update(e){if(this.shouldContinueWalkingCurrentDirection())this.character.move(this.currentMovementDirection);else if(this.delayLeft-=e,this.delayLeft<=0){this.delayLeft=this.delay;let t=this.getFreeRandomDirection();this.stepsWalked=0,this.character.move(t),this.currentMovementDirection=t,this.randomizeStepSize()}}getInfo(){return{type:"Random",config:{delay:this.delay,radius:this.radius}}}shouldContinueWalkingCurrentDirection(){return this.stepsWalked<this.stepSize&&this.currentMovementDirection!=="none"&&!this.character.isBlockingDirection(this.currentMovementDirection)&&this.isWithinRadius(this.currentMovementDirection)}getFreeDirections(){return this.distanceUtils.getDirections().filter(t=>!this.character.isBlockingDirection(t)).filter(t=>this.isWithinRadius(t))}isWithinRadius(e){return this.radius==-1?!0:this.getDist(e)<=this.radius}getDist(e){return this.distanceUtils.distance(this.character.getNextTilePos().position.add(Xt(e)),new k(this.initialCol,this.initialRow))}getFreeRandomDirection(){let e=this.getFreeDirections();return e.length==0?"none":e[ka.getRandomInt(e.length)]}randomizeStepSize(){this.stepSize=ka.getRandomInt(this.radius)+1}};var or=bt(Mi(),1),$e=bt(Po(),1);function Dw(r,e){return r.filter(t=>e.labels?.withAllLabels?e.labels?.withAllLabels.every(i=>t.hasLabel(i)):e.labels?.withOneOfLabels?e.labels?.withOneOfLabels.some(i=>t.hasLabel(i)):e.labels?.withNoneLabels?!e.labels?.withNoneLabels.some(i=>t.hasLabel(i)):!0)}var qf="2.43.2";var St=bt(Mi(),1);var Mf=class{constructor(e,t){this.collistionStrategy=e;this.collisionGroupRelation=t;this.tilePosToCharacters=new Map;this.charRemoved$=new St.Subject}isCharBlockingAt(e,t,i,n=new Set,s=new Set){if(i.length===0)return!1;let c=this.posToString(e,t),l=this.tilePosToCharacters.get(c);return!!(l&&l.size>0&&[...l].filter(h=>!n.has(h.getId())).filter(h=>!this.doIntersect(h.getCollisionGroups(),s)).some(h=>i.some(p=>h.getCollisionGroups().some(v=>this.collidesWith(p,v)))))}doIntersect(e,t){for(let i of e)if(t.has(i))return!0;return!1}collidesWith(e,t){return this.collisionGroupRelation?(this.collisionGroupRelation.get(e)||new Set).has(t):e===t}getCharactersAt(e,t){let i=this.posToString(e,t),n=this.tilePosToCharacters.get(i);return new Set(n)}addCharacter(e){this.addTilePositions(e.getTilePos(),e),this.addTilePositions(e.getNextTilePos(),e),this.addPositionChangeSub(e),this.addPositionChangeFinishedSub(e),this.addTilePosSetSub(e)}removeCharacter(e){let t=e.getId();this.charRemoved$.next(t),this.deleteTilePositions(e.getTilePos(),e),this.deleteTilePositions(e.getNextTilePos(),e)}add(e,t){this.tilePosToCharacters.has(e)||this.tilePosToCharacters.set(e,new Set),this.tilePosToCharacters.get(e)?.add(t)}addTilePosSetSub(e){e.tilePositionSet().pipe((0,St.takeUntil)(this.charRemoved(e.getId()))).subscribe(t=>{this.deleteTilePositions(e.getNextTilePos(),e),this.addTilePositions(t,e)})}charRemoved(e){return this.charRemoved$?.pipe((0,St.take)(1),(0,St.filter)(t=>t==e))}addPositionChangeSub(e){e.positionChangeStarted().pipe((0,St.takeUntil)(this.charRemoved(e.getId())),this.posChangeToLayerPos()).subscribe(t=>{this.collistionStrategy==="BLOCK_ONE_TILE_AHEAD"&&this.deleteTilePositions(t.exit,e),this.addTilePositions(t.enter,e)})}addPositionChangeFinishedSub(e){e.positionChangeFinished().pipe((0,St.takeUntil)(this.charRemoved(e.getId())),this.posChangeToLayerPos()).subscribe(t=>{this.deleteTilePositions(t.exit,e),this.addTilePositions(t.enter,e)})}addTilePositions(e,t){this.forEachCharTile(e,t,(i,n)=>{this.add(this.posToString(new k(i,n),e.layer),t)})}deleteTilePositions(e,t){this.forEachCharTile(e,t,(i,n)=>{this.tilePosToCharacters.get(this.posToString(new k(i,n),e.layer))?.delete(t)})}forEachCharTile(e,t,i){let n=e.position;for(let s=n.x;s<n.x+t.getTileWidth();s++)for(let c=n.y;c<n.y+t.getTileHeight();c++)i(s,c)}posChangeToLayerPos(){return(0,St.pipe)((0,St.map)(e=>({enter:{position:new k(e.enterTile),layer:e.enterLayer},exit:{position:new k(e.exitTile),layer:e.exitLayer}})))}posToString(e,t){return`${e.x}#${e.y}#${t}`}};var ki=class{constructor(e,t,i,n){this.x=e;this.y=t;this.width=i;this.height=n}getX(){return this.x}getY(){return this.y}getWidth(){return this.width}getHeight(){return this.height}isInRange(e){return e.x>=this.x&&e.x<this.x+this.width&&e.y>=this.y&&e.y<this.y+this.height}};var ko="ge_charLayer";var kw=0,P5=1,vm={none:1,left:2,"up-left":3,up:4,"up-right":5,right:6,"down-right":7,down:8,"down-left":9},Lf=class{constructor(e,t){this.tilemap=e;this.gridTilemap=t;this.tileCollisionCache=new Map}fixLayer(e){this.fixedLayer=this.tileCollisionCache.get(e)}unfixLayers(){this.fixedLayer=void 0}rebuild(e){e||(e=new ki(0,0,this.tilemap.getWidth(),this.tilemap.getHeight()));let t=this.tilemap.getLayers().filter(i=>i.isCharLayer());for(let i of[...t,void 0]){let n=this.tileCollisionCache.get(i?.getName());if(n===void 0){n=new Array(this.tilemap.getWidth());for(let s=0;s<this.tilemap.getWidth();s++)n[s]=new Array(this.tilemap.getHeight());this.tileCollisionCache.set(i?.getName(),n)}for(let s=e.getY();s<e.getY()+e.getHeight();s++)for(let c=e.getX();c<e.getX()+e.getWidth();c++){let l=0;!this.gridTilemap.hasNoTileUncached(new k(c,s),i?.getName())&&(l=mm(l,0));for(let v of pa())this.gridTilemap.hasBlockingTileUncached(new k(c,s),i?.getName(),v,!0)&&(l=mm(l,vm[v]));this.gridTilemap.hasBlockingTileUncached(new k(c,s),i?.getName(),void 0,!0)&&(l=mm(l,vm[1])),n[c][s]=l}}}hasTileAt(e,t,i){let s=(this.fixedLayer||this.tileCollisionCache.get(i))?.[e]?.[t];if(s!==void 0)return xf(s,kw)}isBlockingFrom(e,t,i,n,s){let l=(this.fixedLayer||this.tileCollisionCache.get(i))?.[e]?.[t];if(l!==void 0)return!s&&!xf(l,kw)?!0:n===void 0?xf(l,P5):xf(l,vm[n])}};function mm(r,e){return r|1<<e}function xf(r,e){return(r>>e&1)==1}var Rw="ge_cost",jf=class r{constructor(e,t,i,n=void 0,s=!1){this.tilemap=e;this.collisionTilePropertyName=t;this.useTileCollisionCache=s;this.characters=new Map;this.transitions=new Map;this.reverseTransitions=new Map;this.collidesPropNames=new Map;this.tileCostPropNames=new Map;this.collisionRelevantLayersFrameCache=new Map;this.charBlockCache=new Mf(i,n);for(let c of pa())this.collidesPropNames.set(c,r.ONE_WAY_COLLIDE_PROP_PREFIX+c),this.tileCostPropNames.set(c,`${Rw}_${c}`);this.useTileCollisionCache&&(this.tileCollisionCache=new Lf(e,this),this.tileCollisionCache.rebuild())}static{this.ONE_WAY_COLLIDE_PROP_PREFIX="ge_collide_"}fixCacheLayer(e){this.tileCollisionCache?.fixLayer(e)}unfixCacheLayers(){this.tileCollisionCache?.unfixLayers()}addCharacter(e){this.characters.set(e.getId(),e);let t=e.getNextTilePos().layer;t===void 0?e.setTilePosition({...e.getNextTilePos(),layer:this.getLowestCharLayer()}):this.getCharLayerNames().includes(t)||console.warn(`Char layer '${t}' of character '${e.getId()}' is unknown.`),this.charBlockCache.addCharacter(e)}removeCharacter(e){let t=this.characters.get(e);t&&(this.charBlockCache.removeCharacter(t),this.characters.delete(e))}getCharacters(){return[...this.characters.values()]}getCharactersAt(e,t){return this.charBlockCache.getCharactersAt(e,t)}rebuildTileCollisionCache(e){this.tileCollisionCache?.rebuild(e)}hasBlockingTileUncached(e,t,i,n){if(!n&&this.hasNoTileUncached(e,t))return!0;let s=this.getCollisionRelevantLayers(t);for(let c of s)if(this.isLayerBlockingAt(c.getName(),e,i))return!0;return!1}hasBlockingTile(e,t,i,n){let s=this.tileCollisionCache?.isBlockingFrom(e.x,e.y,t,i,n);return s!==void 0?s:this.hasBlockingTileUncached(e,t,i,n)}getTransition(e,t){let i=this.transitions.get(e.toString());if(i)return i.get(t)}getReverseTransitions(e,t){let i=this.reverseTransitions.get(e.toString());if(i)return i.get(t)}setTransition(e,t,i){this.transitions.has(e.toString())||this.transitions.set(e.toString(),new Map),this.reverseTransitions.has(e.toString())||this.reverseTransitions.set(e.toString(),new Map),this.transitions.get(e.toString())?.set(t,i),this.reverseTransitions.get(e.toString())?.has(i)||this.reverseTransitions.get(e.toString())?.set(i,new Set),this.reverseTransitions.get(e.toString())?.get(i)?.add(t)}getTransitions(){return new Map([...this.transitions].map(([e,t])=>[e,new Map(t)]))}getTileCosts(e,t){let i=this.getCollisionRelevantLayers(e.layer),n=1;for(let s of i)n=Math.max(n,this.getTileCostsForLayer({...e,layer:s.getName()},t));return n}getTileCostsForLayer(e,t){let i=this.tilemap.getTileAt(e.position.x,e.position.y,e.layer);return t&&i?.getProperty(this.tileCostPropNames.get(t)||"")||i?.getProperty(Rw)||1}hasNoTileUncached(e,t){return!this.getCollisionRelevantLayers(t).some(n=>this.tilemap.hasTileAt(e.x,e.y,n.getName()))}hasNoTile(e,t){let i=this.tileCollisionCache?.hasTileAt(e.x,e.y,t);return i!==void 0?i:this.hasNoTileUncached(e,t)}hasBlockingChar(e,t,i,n=new Set,s=new Set){return this.charBlockCache.isCharBlockingAt(e,t,i,n,s)}isInRange(e){return new ki(0,0,this.tilemap.getWidth(),this.tilemap.getHeight()).isInRange(e)}toMapDirection(e){return this.isIsometric()?nb(e):e}fromMapDirection(e){return this.isIsometric()?Mn(e):e}isIsometric(){return this.tilemap.getOrientation()==="isometric"}getTilePosInDirection(e,t){let i=e.position.add(Xt(this.toMapDirection(t))),n=this.getTransition(i,e.layer)||e.layer;return{position:i,layer:n}}invalidateFrameCache(){this.collisionRelevantLayersFrameCache.clear()}isLayerBlockingAt(e,t,i){let n=this.tilemap.getTileAt(t.x,t.y,e);return n?!!(n.getProperty(this.collisionTilePropertyName)||i&&n.getProperty(this.collidesPropNames.get(i)||"")):!1}getCharLayerIndexes(){return this.tilemap.getLayers().map((e,t)=>({layer:e,index:t})).filter(({layer:e})=>e.isCharLayer()).map(({index:e})=>e)}findPrevAndCharLayer(e){let t=this.getCharLayerIndexes(),i=this.tilemap.getLayers(),n=t.findIndex(s=>i[s].getProperty(ko)==e);return n==0?{prevIndex:-1,charLayerIndex:t[n]}:{prevIndex:t[n-1],charLayerIndex:t[n]}}getCollisionRelevantLayers(e){if(!e)return this.tilemap.getLayers();let t=this.collisionRelevantLayersFrameCache.get(e);if(t)return t;let{prevIndex:i,charLayerIndex:n}=this.findPrevAndCharLayer(e),s=this.tilemap.getLayers().slice(i+1,n+1);return this.collisionRelevantLayersFrameCache.set(e,s),s}getLowestCharLayer(){for(let e of this.tilemap.getLayers())if(e.isCharLayer())return e.getProperty(ko)}getCharLayerNames(){return this.tilemap.getLayers().filter(e=>e.isCharLayer()).map(e=>e.getProperty(ko)).filter(w5)}};function w5(r){return r!=null}var If=(t=>(t.REMOVED="REMOVED",t.ADDED="ADDED",t))(If||{});var zw=bt(Mi(),1),Df=bt(Po(),1);var ym=(i=>(i.WAIT="WAIT",i.SKIP="SKIP",i.STOP="STOP",i))(ym||{}),Ff=class{constructor(e,t){this.character=e;this.tilemap=t;this.queue=new $r;this.finished$=new zw.Subject;this.pathBlockedWaitElapsed=0;this.distanceUtils=lt.create(e.getNumberOfDirections()),this.character.autoMovementSet().pipe((0,Df.filter)(i=>i!==this),(0,Df.take)(1)).subscribe(()=>{this.queue.size()>0&&this.finishMovementTerminated(),this.finished$.complete()})}update(e){(!this.character.isMoving()||this.character.willCrossTileBorderThisUpdate(e))&&this.queue.size()>0&&this.moveCharOnPath(e)}getInfo(){return{type:"Queue"}}enqueue(e,t={}){let i={pathBlockedStrategy:t.pathBlockedStrategy??"STOP",pathBlockedWaitTimeoutMs:t?.pathBlockedWaitTimeoutMs||-1,ignoreInvalidPositions:t.ignoreInvalidPositions??!1,skipInvalidPositions:t.skipInvalidPositions??!1};for(let n of e){let s={command:n,config:i};if(ai(n)){this.queue.enqueue(s);continue}let l=this.queue.peekEnd()?.command;if(l||(l=this.character.getNextTilePos()),ai(l)){this.queue.enqueue(s);continue}let h=this.distanceUtils.distance(l.position,n.position)===1;(!t.ignoreInvalidPositions||h)&&this.queue.enqueue(s)}}peekAll(){return this.queue.peekAll()}size(){return this.queue.size()}finished(){return this.finished$}clear(){this.queue.clear()}moveCharOnPath(e){let t=this.queue.peek();if(!t)return;let i=t.command,n=t.config;if(ai(i)&&(i=this.tilemap.getTilePosInDirection(this.character.getNextTilePos(),i)),n.skipInvalidPositions){if(i=this.getNextValidPosition(),!i){this.finishInvalidNextPos(i);return}}else if(!this.isNeighborPos(i)){this.finishInvalidNextPos(i);return}if(this.character.isBlockingDirection(rt(this.character.getNextTilePos().position,i.position))){if(n.pathBlockedStrategy==="STOP")this.finishPathBlocked(i);else if(n.pathBlockedStrategy==="SKIP"){this.queue.dequeue(),this.moveCharOnPath(e);return}else n.pathBlockedStrategy==="WAIT"&&n.pathBlockedWaitTimeoutMs>-1&&(this.pathBlockedWaitElapsed+=e,this.pathBlockedWaitElapsed>=n.pathBlockedWaitTimeoutMs&&this.finishBlockedWaitTimeout(i,n.pathBlockedWaitTimeoutMs));return}this.pathBlockedWaitElapsed=0,this.queue.dequeue(),this.character.move(this.getDir(this.character.getNextTilePos().position,i.position)),this.isLastMovement()&&this.finish("SUCCESS","",i)}getNextValidPosition(){for(;this.queue.size()>0;){let e=this.queue.peek()?.command;if(ai(e)&&(e=this.tilemap.getTilePosInDirection(this.character.getNextTilePos(),e)),e&&this.isNeighborPos(e))return e;this.queue.dequeue()}}isLastMovement(){return this.queue.size()===0}isNeighborPos(e){let t=this.distanceUtils.distance(this.character.getNextTilePos().position,e.position)===1,i=this.tilemap.getTransition(e.position,this.character.getNextTilePos().layer);if(this.character.getNextTilePos().layer!==e.layer)return t&&i===e.layer;let n=i!==void 0&&i!==e.layer;return t&&!n}finishMovementTerminated(){this.finish("MOVEMENT_TERMINATED","New automatic movement has been set to character.")}finishInvalidNextPos(e){e?this.finish("INVALID_NEXT_POS",`Position ${this.posToStr(e)} is not reachable from ${this.posToStr(this.character.getNextTilePos())}.`):this.finish("INVALID_NEXT_POS",`No enqueued position is reachable from ${this.posToStr(this.character.getNextTilePos())}.`)}finishPathBlocked(e){this.finish("PATH_BLOCKED",`Position ${this.posToStr(e)} is blocked.`)}finishBlockedWaitTimeout(e,t){this.finish("PATH_BLOCKED_WAIT_TIMEOUT",`Position ${this.posToStr(e)} is blocked and the wait timeout of ${t} ms has been exceeded.`)}finish(e,t="",i=this.character.getNextTilePos()){this.queue=new $r,this.finished$.next({position:i.position,result:e,description:t,layer:i.layer})}getDir(e,t){return this.tilemap.fromMapDirection(rt(e,t))}posToStr(e){return`(${e.position.x}, ${e.position.y}, ${e.layer})`}};var Ra=class{constructor(e=!0){this.isCreatedInternal=!1;e&&console.log(`Using GridEngine v${qf}`)}getCharLayer(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getTilePos().layer}getTransition(e,t){return this.initGuard(),this.gridTilemap?.getTransition(new k(e),t)}setTransition(e,t,i){return this.initGuard(),this.gridTilemap?.setTransition(new k(e),t,i)}create(e,t){this.isCreatedInternal=!0,this.gridCharacters=new Map;let i=this.setConfigDefaults(t);this.config=i,this.movementStopped$=new or.Subject,this.movementStarted$=new or.Subject,this.directionChanged$=new or.Subject,this.positionChangeStarted$=new or.Subject,this.positionChangeFinished$=new or.Subject,this.queueMovementFinished$=new or.Subject,this.charRemoved$=new or.Subject,this.charAdded$=new or.Subject,this.gridTilemap=new jf(e,this.config.collisionTilePropertyName,this.config.characterCollisionStrategy,this.recordToMap(this.config.collisionGroupRelation),this.config.cacheTileCollisions),this.addCharacters()}recordToMap(e){return e?new Map(Object.entries(e).map(([i,n])=>[i,new Set(n)])):void 0}getPosition(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getTilePos().position}move(e,t){this.moveChar(e,t)}moveRandomly(e,t=0,i=-1){this.initGuard();let n=this.gridCharacters?.get(e);if(!n)throw this.createCharUnknownErr(e);let s=new Ef(n,t,i);n.setMovement(s)}getMovement(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);let i=t.getMovement();return i?i.getInfo():{type:"None"}}moveTo(e,t,i){let n=this.assembleMoveToConfig(i);this.initGuard();let s=this.gridCharacters?.get(e);if(!s)throw this.createCharUnknownErr(e);if(!this.gridTilemap)throw this.createUninitializedErr();let c=new Fo(s,this.gridTilemap,{position:new k(t),layer:i?.targetLayer||s.getNextTilePos().layer},{distance:0,config:n});return s.setMovement(c),c.finishedObs().pipe((0,$e.map)(l=>({charId:e,position:l.position,result:l.result,description:l.description,layer:l.layer})))}stopMovement(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.setMovement(void 0)}setSpeed(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setSpeed(t)}getSpeed(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getSpeed()}collidesWithTiles(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.collidesWithTiles()}update(e,t){if(this.isCreatedInternal&&this.gridCharacters)for(let[i,n]of this.gridCharacters)n.update(t);this.gridTilemap?.invalidateFrameCache()}addCharacter(e){if(!this.gridTilemap)throw this.createUninitializedErr();if(!this.config)throw this.createUninitializedErr();let t={speed:e.speed||4,tilemap:this.gridTilemap,collidesWithTiles:!0,collisionGroups:["geDefault"],ignoreCollisionGroups:[],charLayer:e.charLayer,facingDirection:e.facingDirection,labels:e.labels,numberOfDirections:e.numberOfDirections??this.config.numberOfDirections,tileWidth:e.tileWidth,tileHeight:e.tileHeight};typeof e.collides=="boolean"?e.collides===!1&&(t.collidesWithTiles=!1,t.collisionGroups=[]):e.collides!==void 0&&(e.collides.collidesWithTiles===!1&&(t.collidesWithTiles=!1),e.collides.collisionGroups&&(t.collisionGroups=e.collides.collisionGroups),e.collides.ignoreCollisionGroups&&(t.ignoreCollisionGroups=e.collides.ignoreCollisionGroups),t.ignoreMissingTiles=e.collides?.ignoreMissingTiles??!1);let i=new of(e.id,t);e.startPosition&&i.setTilePosition({position:new k(e.startPosition),layer:i.getTilePos().layer}),this.gridCharacters?.set(e.id,i),this.gridTilemap.addCharacter(i);let n=i.getId();i.movementStopped().pipe((0,$e.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.movementStopped$?.next({charId:n,direction:s})}),i.movementStarted().pipe((0,$e.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.movementStarted$?.next({charId:n,direction:s})}),i.directionChanged().pipe((0,$e.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.directionChanged$?.next({charId:n,direction:s})}),i.positionChangeStarted().pipe((0,$e.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.positionChangeStarted$?.next({charId:n,...s})}),i.positionChangeFinished().pipe((0,$e.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.positionChangeFinished$?.next({charId:n,...s})}),this.charAdded$?.next(n)}hasCharacter(e){return this.initGuard(),!!this.gridCharacters?.has(e)}removeCharacter(e){if(this.initGuard(),!this.gridCharacters?.get(e))throw this.createCharUnknownErr(e);this.gridTilemap?.removeCharacter(e),this.gridCharacters?.delete(e),this.charRemoved$?.next(e)}removeAllCharacters(){if(this.initGuard(),!!this.gridCharacters)for(let e of this.gridCharacters.keys())this.removeCharacter(e)}getAllCharacters(e){if(this.initGuard(),!this.gridCharacters)return[];let t=[...this.gridCharacters.values()];return(e?Dw(t,e):t).map(n=>n.getId())}getLabels(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getLabels()}addLabels(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.addLabels(t)}removeLabels(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.removeLabels(t)}clearLabels(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.clearLabels()}follow(e,t,i,n){let s;i===void 0?s={distance:0,closestPointIfBlocked:!1}:typeof i=="number"?(s={distance:i,closestPointIfBlocked:!1},n&&(s.closestPointIfBlocked=!0)):s=i,this.initGuard();let c=this.gridCharacters?.get(e),l=this.gridCharacters?.get(t);if(!c)throw this.createCharUnknownErr(e);if(!l)throw this.createCharUnknownErr(t);if(!this.gridTilemap)throw this.createUninitializedErr();let h=new Af(c,this.gridTilemap,l,{distance:s.distance??0,noPathFoundStrategy:s.closestPointIfBlocked?"CLOSEST_REACHABLE":"STOP",maxPathLength:s.maxPathLength??1/0,shortestPathAlgorithm:s.algorithm??"BIDIRECTIONAL_SEARCH",ignoreLayers:!!s.ignoreLayers,facingDirection:s.facingDirection??"none"});c.setMovement(h)}isMoving(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.isMoving()}getFacingDirection(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getFacingDirection()}getFacingPosition(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);let i=t.getFacingPosition();return{x:i.x,y:i.y}}turnTowards(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);return i.turnTowards(t)}getCharactersAt(e,t){if(this.initGuard(),!this.gridTilemap)return[];let i=this.gridTilemap.getCharactersAt(new k(e),t);return Array.from(i).map(n=>n.getId())}setPosition(e,t,i){this.initGuard();let n=this.gridCharacters?.get(e);if(!n)throw this.createCharUnknownErr(e);i||n.setTilePosition({position:new k(t),layer:n.getTilePos().layer}),n.setTilePosition({position:new k(t),layer:i})}isBlocked(e,t,i=["geDefault"]){this.initGuard();let n=new k(e);return!!(this.gridTilemap?.hasBlockingTile(n,t)||this.gridTilemap?.hasBlockingChar(n,t,i))}isTileBlocked(e,t){return this.initGuard(),!!this.gridTilemap?.hasBlockingTile(new k(e),t)}getCollisionGroups(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getCollisionGroups()||[]}setCollisionGroups(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setCollisionGroups(t)}getIgnoreCollisionGroups(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getIgnoreCollisionGroups()||[]}setIgnoreCollisionGroups(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setIgnoreCollisionGroups(t)}getTilePosInDirection(e,t,i){if(!this.gridTilemap)throw this.createUninitializedErr();let n=this.gridTilemap.getTilePosInDirection({position:new k(e),layer:t},i);return{position:n.position.toPosition(),charLayer:n.layer}}findShortestPath(e,t,i={}){if(!this.gridTilemap)throw this.createUninitializedErr();let n=i.shortestPathAlgorithm||"BFS";i.considerCosts&&n!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${n}'. It can only be used with A* algorithm.`);let c=new Ro(this.gridTilemap).findShortestPath(G.toInternal(e),G.toInternal(t),{...i,shortestPathAlgorithm:n});return{path:c.path.map(G.fromInternal),closestToTarget:c.closestToTarget?G.fromInternal(c.closestToTarget):void 0,reachedMaxPathLength:!1,steps:c.steps}}steppedOn(e,t,i){return this.positionChangeFinished().pipe((0,$e.filter)(n=>e.includes(n.charId)&&t.some(s=>s.x===n.enterTile.x&&s.y===n.enterTile.y)&&(i===void 0||i.includes(n.enterLayer))))}characterShifted(){if(!this.charAdded$||!this.charRemoved$)throw this.createUninitializedErr();return this.charAdded$.pipe((0,$e.map)(e=>({charId:e,action:"ADDED"})),(0,$e.mergeWith)(this.charRemoved$.pipe((0,$e.map)(e=>({charId:e,action:"REMOVED"})))))}movementStarted(){if(!this.movementStarted$)throw this.createUninitializedErr();return this.movementStarted$}movementStopped(){if(!this.movementStopped$)throw this.createUninitializedErr();return this.movementStopped$}directionChanged(){if(!this.directionChanged$)throw this.createUninitializedErr();return this.directionChanged$}positionChangeStarted(){if(!this.positionChangeStarted$)throw this.createUninitializedErr();return this.positionChangeStarted$}positionChangeFinished(){if(!this.positionChangeFinished$)throw this.createUninitializedErr();return this.positionChangeFinished$}getMovementProgress(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getMovementProgress()}rebuildTileCollisionCache(e,t,i,n){this.gridTilemap?.rebuildTileCollisionCache(new ki(e,t,i,n))}addQueueMovements(e,t,i){this.initGuard();let n=this.gridCharacters?.get(e);if(!n)throw this.createCharUnknownErr(e);if(!this.gridTilemap)throw this.createUninitializedErr();let s;n?.getMovement()?.getInfo().type==="Queue"?s=n.getMovement():(s=new Ff(n,this.gridTilemap),n.setMovement(s),s.finished().pipe((0,$e.takeUntil)((0,or.merge)(this.charRemoved(e),n.autoMovementSet()))).subscribe(c=>{this.queueMovementFinished$?.next({charId:e,...c})})),s.enqueue(t.map(c=>ai(c)?c:{position:new k(c.position),layer:c.charLayer}),i)}queueMovementFinished(){if(!this.queueMovementFinished$)throw this.createUninitializedErr();return this.queueMovementFinished$}getEnqueuedMovements(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getMovement()?.getInfo().type==="Queue"?t.getMovement().peekAll().map(n=>({command:ai(n.command)?n.command:G.fromInternal(n.command),config:n.config})):[]}clearEnqueuedMovements(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.getMovement()?.getInfo().type==="Queue"&&t.getMovement().clear()}getTileCost(e,t,i){return this.initGuard(),this.gridTilemap?.getTileCosts({position:new k(e),layer:t},i)??1}getState(){let e=[];if(this.gridCharacters)for(let[t,i]of this.gridCharacters.entries())e.push({id:t,position:G.fromInternal(i.getTilePos()),facingDirection:i.getFacingDirection(),speed:i.getSpeed(),labels:i.getLabels(),movementProgress:i.getMovementProgress(),collisionConfig:{collisionGroups:i.getCollisionGroups(),ignoreCollisionGroups:i.getIgnoreCollisionGroups(),collidesWithTiles:i.collidesWithTiles(),ignoreMissingTiles:i.getIgnoreMissingTiles()}});return{characters:e}}setState(e){if(this.gridCharacters)for(let t of e.characters){let i=this.gridCharacters.get(t.id);if(i){let n=i.getTilePos();G.equal(n,G.toInternal(t.position))||i.setTilePosition(G.toInternal(t.position)),i.setSpeed(t.speed),i.turnTowards(t.facingDirection),t.collisionConfig.collisionGroups&&i.setCollisionGroups(t.collisionConfig.collisionGroups),t.collisionConfig.collidesWithTiles!==void 0&&i.setCollidesWithTiles(t.collisionConfig.collidesWithTiles),t.collisionConfig.ignoreMissingTiles!==void 0&&i.setIgnoreMissingTiles(t.collisionConfig.ignoreMissingTiles),i.setMovementProgress(t.movementProgress),i.clearLabels(),i.addLabels(t.labels)}}}charRemoved(e){if(!this.charRemoved$)throw this.createUninitializedErr();return this.charRemoved$?.pipe((0,$e.take)(1),(0,$e.filter)(t=>t==e))}initGuard(){if(!this.isCreatedInternal)throw this.createUninitializedErr()}createUninitializedErr(){throw new Error("GridEngine not initialized. You need to call create() first.")}addCharacters(){this.config?.characters.forEach(e=>this.addCharacter(e))}moveChar(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);if(i.getNumberOfDirections()===4){if(!this.gridTilemap?.isIsometric()&&qn(t)){console.warn(`GridEngine: Character '${e}' can't be moved '${t}' in 4 direction mode.`);return}else if(this.gridTilemap?.isIsometric()&&!qn(t)){console.warn(`GridEngine: Character '${e}' can't be moved '${t}' in 4 direction isometric mode.`);return}}i.move(t)}createCharUnknownErr(e){return new Error(`Character unknown: ${e}`)}assembleMoveToConfig(e={}){let t={...e,noPathFoundStrategy:"STOP",pathBlockedStrategy:"WAIT"};return e?.noPathFoundStrategy&&(Object.values(un).includes(e.noPathFoundStrategy)?t.noPathFoundStrategy=e.noPathFoundStrategy:console.warn(`GridEngine: Unknown NoPathFoundStrategy '${e.noPathFoundStrategy}'. Falling back to 'STOP'`)),e?.pathBlockedStrategy&&(Object.values(wo).includes(e.pathBlockedStrategy)?t.pathBlockedStrategy=e.pathBlockedStrategy:console.warn(`GridEngine: Unknown PathBlockedStrategy '${e.pathBlockedStrategy}'. Falling back to 'WAIT'`)),t}setConfigDefaults(e){return{collisionTilePropertyName:"ge_collide",numberOfDirections:4,characterCollisionStrategy:"BLOCK_TWO_TILES",cacheTileCollisions:!1,...e}}};var Rf=class extends jo{constructor(e,t={}){super(e,t),this.distanceUtils=lt.create(8)}getForced(e,t){let i=[],n=this.posInDir(t,this.distanceUtils.direction(t.position,e.position)),{topLeft:s,downLeft:c,top:l,bottom:h,topRight:p,downRight:v}=this.normalizedPositions(n,t),b=this.distanceUtils.direction(e.position,t.position),w=(T,E)=>this.isBlocking(T,E)||this.getTransition(E.position,E.layer)!==void 0;return qn(b)?(w(e,s)&&!this.isBlocking(t,l)&&i.push(l),w(e,s)&&(w(e,c)||w(c,s))&&!this.isBlocking(t,s)&&i.push(s),w(e,c)&&!this.isBlocking(t,h)&&i.push(h),w(e,c)&&(w(e,s)||w(s,c))&&!this.isBlocking(t,c)&&i.push(c)):(w(e,l)&&(w(e,s)||w(s,l))&&(this.isBlocking(t,s)||i.push(s),this.isBlocking(t,l)||i.push(l)),w(e,l)&&(w(e,s)||w(s,l)||w(l,p))&&!this.isBlocking(t,p)&&i.push(p),w(e,h)&&(w(e,c)||w(c,l))&&(this.isBlocking(t,c)||i.push(c),this.isBlocking(t,h)||i.push(h)),w(e,h)&&(w(e,c)||w(s,h)||w(l,v))&&!this.isBlocking(t,v)&&i.push(v)),i}prune(e,t){let{right:i,topRight:n,downRight:s}=this.normalizedPositions(e,t),c=this.getForced(e,t),l=rt(e.position,t.position);return qn(l)?[i,n,s,...c]:[i,...c]}jump(e,t,i,n){let s=this.distanceUtils.direction(e.position,t.position);if(!(this.isBlocking(e,t)&&!(G.equal(t,i)&&this.options.ignoreBlockedTarget))){if(G.equal(t,i))return{p:t,dist:n};if(n>=this.maxJumpSize)return{p:t,dist:n};if(this.getTransition(t.position,e.layer)!==void 0)return{p:t,dist:n};if(this.getForced(e,t).length>0)return{p:t,dist:n};if(this.updateClosestToTarget(t,i),s==="up-left"){if(this.jump(t,this.getTilePosInDir(t,"up"),i,n+1)!==void 0)return{p:t,dist:n};if(this.jump(t,this.getTilePosInDir(t,"left"),i,n+1)!==void 0)return{p:t,dist:n}}else if(s==="down-left"){if(this.jump(t,this.getTilePosInDir(t,"down"),i,n+1)!==void 0)return{p:t,dist:n};if(this.jump(t,this.getTilePosInDir(t,"left"),i,n+1)!==void 0)return{p:t,dist:n}}else if(s==="up-right"){if(this.jump(t,this.getTilePosInDir(t,"up"),i,n+1)!==void 0)return{p:t,dist:n};if(this.jump(t,this.getTilePosInDir(t,"right"),i,n+1)!==void 0)return{p:t,dist:n}}else if(s==="down-right"){if(this.jump(t,this.getTilePosInDir(t,"down"),i,n+1)!==void 0)return{p:t,dist:n};if(this.jump(t,this.getTilePosInDir(t,"right"),i,n+1)!==void 0)return{p:t,dist:n}}return this.jump(t,this.getTilePosInDir(t,rt(e.position,t.position)),i,n+1)}}};var Ro=class{constructor(e){this.gridTilemap=e}findShortestPath(e,t,i={}){return O5(i.shortestPathAlgorithm||"BIDIRECTIONAL_SEARCH",this.gridTilemap,i).findShortestPath(e,t)}};function O5(r,e,t){switch(r){case"BIDIRECTIONAL_SEARCH":return new mf(e,t);case"A_STAR":return new pf(e,t);case"JPS":return t.numberOfDirections===8?new Rf(e,t):new jo(e,t)}return new Oo(e,t)}var kf=(h=>(h.SUCCESS="SUCCESS",h.NO_PATH_FOUND_MAX_RETRIES_EXCEEDED="NO_PATH_FOUND_MAX_RETRIES_EXCEEDED",h.PATH_BLOCKED_MAX_RETRIES_EXCEEDED="PATH_BLOCKED_MAX_RETRIES_EXCEEDED",h.PATH_BLOCKED="PATH_BLOCKED",h.NO_PATH_FOUND="NO_PATH_FOUND",h.PATH_BLOCKED_WAIT_TIMEOUT="PATH_BLOCKED_WAIT_TIMEOUT",h.MOVEMENT_TERMINATED="MOVEMENT_TERMINATED",h.MAX_PATH_LENGTH_REACHED="MAX_PATH_LENGTH_REACHED",h))(kf||{}),Fo=class{constructor(e,t,i,{config:n,ignoreBlockedTarget:s=!1,distance:c=0}={}){this.character=e;this.tilemap=t;this.targetPos=i;this.shortestPath=[];this.distOffset=0;this.posOnPath=0;this.stopped=!1;this.pathBlockedWaitElapsed=0;this.isPositionAllowed=()=>!0;this.shortestPathAlgorithm="BIDIRECTIONAL_SEARCH";this.maxPathLength=1/0;this.considerCosts=!1;this.isBlocking=(e,t)=>e?new Oo(this.tilemap,this.getPathfindingOptions()).isBlocking(this.character.getTilePos(),{position:e,layer:t}):!0;this.shortestPathAlgorithm=n?.algorithm??this.shortestPathAlgorithm,this.ignoreBlockedTarget=s,this.distance=c,this.noPathFoundStrategy=n?.noPathFoundStrategy||"STOP",this.pathBlockedStrategy=n?.pathBlockedStrategy||"WAIT",this.noPathFoundRetryable=new qa(n?.noPathFoundRetryBackoffMs||200,n?.noPathFoundMaxRetries||-1,()=>{this.stop("NO_PATH_FOUND_MAX_RETRIES_EXCEEDED")}),this.pathBlockedRetryable=new qa(n?.pathBlockedRetryBackoffMs||200,n?.pathBlockedMaxRetries||-1,()=>{this.stop("PATH_BLOCKED_MAX_RETRIES_EXCEEDED")}),n?.isPositionAllowedFn&&(this.isPositionAllowed=n.isPositionAllowedFn),n?.maxPathLength&&(this.maxPathLength=n.maxPathLength),n?.considerCosts&&this.shortestPathAlgorithm!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${this.shortestPathAlgorithm}'. It can only be used with A* algorithm.`),this.considerCosts=n?.considerCosts||!1,this.ignoreLayers=!!n?.ignoreLayers,this.distanceUtils=lt.create(e.getNumberOfDirections()),this.pathBlockedWaitTimeoutMs=n?.pathBlockedWaitTimeoutMs||-1,this.finished$=new zo.Subject,this.setCharacter(e)}setPathBlockedStrategy(e){this.pathBlockedStrategy=e}getPathBlockedStrategy(){return this.pathBlockedStrategy}setCharacter(e){this.character=e,this.noPathFoundRetryable.reset(),this.pathBlockedRetryable.reset(),this.pathBlockedWaitElapsed=0,this.calcShortestPath(),this.character.autoMovementSet().pipe((0,zo.filter)(t=>t!==this),(0,zo.take)(1)).subscribe(()=>{this.stop("MOVEMENT_TERMINATED")})}getPathfindingOptions(){return{shortestPathAlgorithm:this.shortestPathAlgorithm,pathWidth:this.character.getTileWidth(),pathHeight:this.character.getTileHeight(),numberOfDirections:this.character.getNumberOfDirections(),isPositionAllowed:this.isPositionAllowed,collisionGroups:this.character.getCollisionGroups(),ignoredChars:[this.character.getId()],ignoreTiles:!this.character.collidesWithTiles(),ignoreMapBounds:this.character.getIgnoreMissingTiles(),ignoreBlockedTarget:this.ignoreBlockedTarget,maxPathLength:this.maxPathLength,ignoreLayers:this.ignoreLayers,considerCosts:this.considerCosts,calculateClosestToTarget:!0}}update(e){this.stopped||(this.noPathFound()&&(this.noPathFoundStrategy==="RETRY"?this.noPathFoundRetryable.retry(e,()=>this.calcShortestPath()):this.noPathFoundStrategy==="STOP"&&this.stop("NO_PATH_FOUND")),this.updatePosOnPath(),this.isBlocking(this.nextTileOnPath()?.position,this.character?.getNextTilePos().layer)?this.applyPathBlockedStrategy(e):this.pathBlockedWaitElapsed=0,this.hasArrived()?(this.stop("SUCCESS"),this.existsDistToTarget()&&this.turnTowardsTarget()):this.isBlocking(this.nextTileOnPath()?.position,this.character?.getNextTilePos().layer)||this.moveCharOnPath())}finishedObs(){return this.finished$}getInfo(){return{type:"Target",state:{pathAhead:this.shortestPath.slice(this.posOnPath).map(e=>G.fromInternal(e))},config:{algorithm:this.shortestPathAlgorithm,ignoreBlockedTarget:this.ignoreBlockedTarget,distance:this.distance,targetPos:G.fromInternal(this.targetPos),noPathFoundStrategy:this.noPathFoundStrategy,pathBlockedStrategy:this.pathBlockedStrategy,noPathFoundRetryBackoffMs:this.noPathFoundRetryable.getBackoffMs(),noPathFoundMaxRetries:this.noPathFoundRetryable.getMaxRetries()}}}resultToReason(e){switch(e){case"SUCCESS":return"Successfully arrived.";case"MOVEMENT_TERMINATED":return"Movement of character has been replaced before destination was reached.";case"PATH_BLOCKED":return"PathBlockedStrategy STOP: Path blocked.";case"NO_PATH_FOUND_MAX_RETRIES_EXCEEDED":return`NoPathFoundStrategy RETRY: Maximum retries of ${this.noPathFoundRetryable.getMaxRetries()} exceeded.`;case"NO_PATH_FOUND":return"NoPathFoundStrategy STOP: No path found.";case"PATH_BLOCKED_MAX_RETRIES_EXCEEDED":return`PathBlockedStrategy RETRY: Maximum retries of ${this.pathBlockedRetryable.getMaxRetries()} exceeded.`;case"PATH_BLOCKED_WAIT_TIMEOUT":return`PathBlockedStrategy WAIT: Wait timeout of ${this.pathBlockedWaitTimeoutMs}ms exceeded.`}}applyPathBlockedStrategy(e){this.pathBlockedStrategy==="RETRY"?this.pathBlockedRetryable.retry(e,()=>{let t=this.getShortestPath();t.path.length>0&&this.calcShortestPath(t)}):this.pathBlockedStrategy==="STOP"?this.stop("PATH_BLOCKED"):this.pathBlockedStrategy==="WAIT"&&this.pathBlockedWaitTimeoutMs>-1&&(this.pathBlockedWaitElapsed+=e,this.pathBlockedWaitElapsed>=this.pathBlockedWaitTimeoutMs&&this.stop("PATH_BLOCKED_WAIT_TIMEOUT"))}moveCharOnPath(){let e=this.nextTileOnPath();if(!e)return;let t=this.getDir(this.character.getNextTilePos().position,e.position);this.character.move(t)}nextTileOnPath(){return this.shortestPath[this.posOnPath+1]}stop(e){this.finished$.next({position:this.character.getTilePos().position,result:e,description:this.resultToReason(e),layer:this.character.getTilePos().layer}),this.finished$.complete(),this.stopped=!0}turnTowardsTarget(){let e=this.shortestPath[this.posOnPath+1],t=this.getDir(this.character.getNextTilePos().position,e.position);this.character.turnTowards(t)}existsDistToTarget(){return this.posOnPath<this.shortestPath.length-1}hasArrived(){return!this.noPathFound()&&this.posOnPath+Math.max(0,this.distance-this.distOffset)>=this.shortestPath.length-1}updatePosOnPath(){let e=this.shortestPath[this.posOnPath];for(;this.posOnPath<this.shortestPath.length-1&&(this.character.getNextTilePos().position.x!=e.position.x||this.character.getNextTilePos().position.y!=e.position.y);)this.posOnPath++,e=this.shortestPath[this.posOnPath]}noPathFound(){return this.shortestPath.length===0}calcShortestPath(e){e=e??this.getShortestPath(),this.posOnPath=0,this.shortestPath=e.path,this.distOffset=e.distOffset}getShortestPath(){let e=new Ro(this.tilemap),{path:t,closestToTarget:i}=e.findShortestPath(this.character.getNextTilePos(),this.targetPos,this.getPathfindingOptions());if(t.length==0&&this.noPathFoundStrategy==="CLOSEST_REACHABLE"){if(!i)throw Error("ClosestToTarget should never be undefined in TargetMovement.");let s=e.findShortestPath(this.character.getNextTilePos(),i,this.getPathfindingOptions()).path,c=this.distanceUtils.distance(i.position,this.targetPos.position);return{path:s,distOffset:c}}return{path:t,distOffset:0}}getDir(e,t){return this.tilemap.fromMapDirection(this.distanceUtils.direction(e,t))}};var S5=Object.create,Vw=Object.defineProperty,T5=Object.getOwnPropertyDescriptor,C5=Object.getOwnPropertyNames,A5=Object.getPrototypeOf,E5=Object.prototype.hasOwnProperty,q5=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),M5=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of C5(e))!E5.call(r,n)&&n!==t&&Vw(r,n,{get:()=>e[n],enumerable:!(i=T5(e,n))||i.enumerable});return r},bm=(r,e,t)=>(t=r!=null?S5(A5(r)):{},M5(e||!r||!r.__esModule?Vw(t,"default",{value:r,enumerable:!0}):t,r)),_m=q5((r,e)=>{(function(){var t,i="4.17.21",n=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",l="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,v="__lodash_placeholder__",b=1,w=2,T=4,E=1,M=2,L=1,D=2,N=4,Y=8,ie=16,pe=32,Fe=64,dt=128,Uo=256,Vf=512,Bw=30,Hw="...",$w=800,Yw=16,Om=1,Qw=2,Kw=3,zi=1/0,Qr=9007199254740991,Xw=17976931348623157e292,Wa=0/0,ar=4294967295,Jw=ar-1,Zw=ar>>>1,eO=[["ary",dt],["bind",L],["bindKey",D],["curry",Y],["curryRight",ie],["flip",Vf],["partial",pe],["partialRight",Fe],["rearg",Uo]],dn="[object Arguments]",Ua="[object Array]",tO="[object AsyncFunction]",Go="[object Boolean]",Bo="[object Date]",rO="[object DOMException]",Ga="[object Error]",Ba="[object Function]",Sm="[object GeneratorFunction]",Bt="[object Map]",Ho="[object Number]",iO="[object Null]",qr="[object Object]",Tm="[object Promise]",nO="[object Proxy]",$o="[object RegExp]",Ht="[object Set]",Yo="[object String]",Ha="[object Symbol]",oO="[object Undefined]",Qo="[object WeakMap]",aO="[object WeakSet]",Ko="[object ArrayBuffer]",vn="[object DataView]",Wf="[object Float32Array]",Uf="[object Float64Array]",Gf="[object Int8Array]",Bf="[object Int16Array]",Hf="[object Int32Array]",$f="[object Uint8Array]",Yf="[object Uint8ClampedArray]",Qf="[object Uint16Array]",Kf="[object Uint32Array]",sO=/\b__p \+= '';/g,uO=/\b(__p \+=) '' \+/g,cO=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Cm=/&(?:amp|lt|gt|quot|#39);/g,Am=/[&<>"']/g,lO=RegExp(Cm.source),fO=RegExp(Am.source),hO=/<%-([\s\S]+?)%>/g,pO=/<%([\s\S]+?)%>/g,Em=/<%=([\s\S]+?)%>/g,dO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vO=/^\w*$/,mO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xf=/[\\^$.*+?()[\]{}|]/g,yO=RegExp(Xf.source),Jf=/^\s+/,gO=/\s/,bO=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_O=/\{\n\/\* \[wrapped with (.+)\] \*/,PO=/,? & /,wO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,OO=/[()=,{}\[\]\/\s]/,SO=/\\(\\)?/g,TO=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qm=/\w*$/,CO=/^[-+]0x[0-9a-f]+$/i,AO=/^0b[01]+$/i,EO=/^\[object .+?Constructor\]$/,qO=/^0o[0-7]+$/i,MO=/^(?:0|[1-9]\d*)$/,xO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$a=/($^)/,LO=/['\n\r\u2028\u2029\\]/g,Ya="\\ud800-\\udfff",jO="\\u0300-\\u036f",IO="\\ufe20-\\ufe2f",FO="\\u20d0-\\u20ff",Mm=jO+IO+FO,xm="\\u2700-\\u27bf",Lm="a-z\\xdf-\\xf6\\xf8-\\xff",DO="\\xac\\xb1\\xd7\\xf7",kO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",RO="\\u2000-\\u206f",zO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jm="A-Z\\xc0-\\xd6\\xd8-\\xde",Im="\\ufe0e\\ufe0f",Fm=DO+kO+RO+zO,Zf="['\u2019]",NO="["+Ya+"]",Dm="["+Fm+"]",Qa="["+Mm+"]",km="\\d+",VO="["+xm+"]",Rm="["+Lm+"]",zm="[^"+Ya+Fm+km+xm+Lm+jm+"]",eh="\\ud83c[\\udffb-\\udfff]",WO="(?:"+Qa+"|"+eh+")",Nm="[^"+Ya+"]",th="(?:\\ud83c[\\udde6-\\uddff]){2}",rh="[\\ud800-\\udbff][\\udc00-\\udfff]",mn="["+jm+"]",Vm="\\u200d",Wm="(?:"+Rm+"|"+zm+")",UO="(?:"+mn+"|"+zm+")",Um="(?:"+Zf+"(?:d|ll|m|re|s|t|ve))?",Gm="(?:"+Zf+"(?:D|LL|M|RE|S|T|VE))?",Bm=WO+"?",Hm="["+Im+"]?",GO="(?:"+Vm+"(?:"+[Nm,th,rh].join("|")+")"+Hm+Bm+")*",BO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",HO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$m=Hm+Bm+GO,$O="(?:"+[VO,th,rh].join("|")+")"+$m,YO="(?:"+[Nm+Qa+"?",Qa,th,rh,NO].join("|")+")",QO=RegExp(Zf,"g"),KO=RegExp(Qa,"g"),ih=RegExp(eh+"(?="+eh+")|"+YO+$m,"g"),XO=RegExp([mn+"?"+Rm+"+"+Um+"(?="+[Dm,mn,"$"].join("|")+")",UO+"+"+Gm+"(?="+[Dm,mn+Wm,"$"].join("|")+")",mn+"?"+Wm+"+"+Um,mn+"+"+Gm,HO,BO,km,$O].join("|"),"g"),JO=RegExp("["+Vm+Ya+Mm+Im+"]"),ZO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tS=-1,ye={};ye[Wf]=ye[Uf]=ye[Gf]=ye[Bf]=ye[Hf]=ye[$f]=ye[Yf]=ye[Qf]=ye[Kf]=!0,ye[dn]=ye[Ua]=ye[Ko]=ye[Go]=ye[vn]=ye[Bo]=ye[Ga]=ye[Ba]=ye[Bt]=ye[Ho]=ye[qr]=ye[$o]=ye[Ht]=ye[Yo]=ye[Qo]=!1;var ve={};ve[dn]=ve[Ua]=ve[Ko]=ve[vn]=ve[Go]=ve[Bo]=ve[Wf]=ve[Uf]=ve[Gf]=ve[Bf]=ve[Hf]=ve[Bt]=ve[Ho]=ve[qr]=ve[$o]=ve[Ht]=ve[Yo]=ve[Ha]=ve[$f]=ve[Yf]=ve[Qf]=ve[Kf]=!0,ve[Ga]=ve[Ba]=ve[Qo]=!1;var rS={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},iS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},oS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},aS=parseFloat,sS=parseInt,Ym=typeof global=="object"&&global&&global.Object===Object&&global,uS=typeof self=="object"&&self&&self.Object===Object&&self,Ve=Ym||uS||Function("return this")(),nh=typeof r=="object"&&r&&!r.nodeType&&r,Ni=nh&&typeof e=="object"&&e&&!e.nodeType&&e,Qm=Ni&&Ni.exports===nh,oh=Qm&&Ym.process,Ft=function(){try{var C=Ni&&Ni.require&&Ni.require("util").types;return C||oh&&oh.binding&&oh.binding("util")}catch{}}(),Km=Ft&&Ft.isArrayBuffer,Xm=Ft&&Ft.isDate,Jm=Ft&&Ft.isMap,Zm=Ft&&Ft.isRegExp,ey=Ft&&Ft.isSet,ty=Ft&&Ft.isTypedArray;function Tt(C,x,q){switch(q.length){case 0:return C.call(x);case 1:return C.call(x,q[0]);case 2:return C.call(x,q[0],q[1]);case 3:return C.call(x,q[0],q[1],q[2])}return C.apply(x,q)}function cS(C,x,q,V){for(var Q=-1,se=C==null?0:C.length;++Q<se;){var De=C[Q];x(V,De,q(De),C)}return V}function Dt(C,x){for(var q=-1,V=C==null?0:C.length;++q<V&&x(C[q],q,C)!==!1;);return C}function lS(C,x){for(var q=C==null?0:C.length;q--&&x(C[q],q,C)!==!1;);return C}function ry(C,x){for(var q=-1,V=C==null?0:C.length;++q<V;)if(!x(C[q],q,C))return!1;return!0}function Kr(C,x){for(var q=-1,V=C==null?0:C.length,Q=0,se=[];++q<V;){var De=C[q];x(De,q,C)&&(se[Q++]=De)}return se}function Ka(C,x){var q=C==null?0:C.length;return!!q&&yn(C,x,0)>-1}function ah(C,x,q){for(var V=-1,Q=C==null?0:C.length;++V<Q;)if(q(x,C[V]))return!0;return!1}function ge(C,x){for(var q=-1,V=C==null?0:C.length,Q=Array(V);++q<V;)Q[q]=x(C[q],q,C);return Q}function Xr(C,x){for(var q=-1,V=x.length,Q=C.length;++q<V;)C[Q+q]=x[q];return C}function sh(C,x,q,V){var Q=-1,se=C==null?0:C.length;for(V&&se&&(q=C[++Q]);++Q<se;)q=x(q,C[Q],Q,C);return q}function fS(C,x,q,V){var Q=C==null?0:C.length;for(V&&Q&&(q=C[--Q]);Q--;)q=x(q,C[Q],Q,C);return q}function uh(C,x){for(var q=-1,V=C==null?0:C.length;++q<V;)if(x(C[q],q,C))return!0;return!1}var hS=ch("length");function pS(C){return C.split("")}function dS(C){return C.match(wO)||[]}function iy(C,x,q){var V;return q(C,function(Q,se,De){if(x(Q,se,De))return V=se,!1}),V}function Xa(C,x,q,V){for(var Q=C.length,se=q+(V?1:-1);V?se--:++se<Q;)if(x(C[se],se,C))return se;return-1}function yn(C,x,q){return x===x?CS(C,x,q):Xa(C,ny,q)}function vS(C,x,q,V){for(var Q=q-1,se=C.length;++Q<se;)if(V(C[Q],x))return Q;return-1}function ny(C){return C!==C}function oy(C,x){var q=C==null?0:C.length;return q?fh(C,x)/q:Wa}function ch(C){return function(x){return x==null?t:x[C]}}function lh(C){return function(x){return C==null?t:C[x]}}function ay(C,x,q,V,Q){return Q(C,function(se,De,de){q=V?(V=!1,se):x(q,se,De,de)}),q}function mS(C,x){var q=C.length;for(C.sort(x);q--;)C[q]=C[q].value;return C}function fh(C,x){for(var q,V=-1,Q=C.length;++V<Q;){var se=x(C[V]);se!==t&&(q=q===t?se:q+se)}return q}function hh(C,x){for(var q=-1,V=Array(C);++q<C;)V[q]=x(q);return V}function yS(C,x){return ge(x,function(q){return[q,C[q]]})}function sy(C){return C&&C.slice(0,fy(C)+1).replace(Jf,"")}function Ct(C){return function(x){return C(x)}}function ph(C,x){return ge(x,function(q){return C[q]})}function Xo(C,x){return C.has(x)}function uy(C,x){for(var q=-1,V=C.length;++q<V&&yn(x,C[q],0)>-1;);return q}function cy(C,x){for(var q=C.length;q--&&yn(x,C[q],0)>-1;);return q}function gS(C,x){for(var q=C.length,V=0;q--;)C[q]===x&&++V;return V}var bS=lh(rS),_S=lh(iS);function PS(C){return"\\"+oS[C]}function wS(C,x){return C==null?t:C[x]}function gn(C){return JO.test(C)}function OS(C){return ZO.test(C)}function SS(C){for(var x,q=[];!(x=C.next()).done;)q.push(x.value);return q}function dh(C){var x=-1,q=Array(C.size);return C.forEach(function(V,Q){q[++x]=[Q,V]}),q}function ly(C,x){return function(q){return C(x(q))}}function Jr(C,x){for(var q=-1,V=C.length,Q=0,se=[];++q<V;){var De=C[q];(De===x||De===v)&&(C[q]=v,se[Q++]=q)}return se}function Ja(C){var x=-1,q=Array(C.size);return C.forEach(function(V){q[++x]=V}),q}function TS(C){var x=-1,q=Array(C.size);return C.forEach(function(V){q[++x]=[V,V]}),q}function CS(C,x,q){for(var V=q-1,Q=C.length;++V<Q;)if(C[V]===x)return V;return-1}function AS(C,x,q){for(var V=q+1;V--;)if(C[V]===x)return V;return V}function bn(C){return gn(C)?qS(C):hS(C)}function $t(C){return gn(C)?MS(C):pS(C)}function fy(C){for(var x=C.length;x--&&gO.test(C.charAt(x)););return x}var ES=lh(nS);function qS(C){for(var x=ih.lastIndex=0;ih.test(C);)++x;return x}function MS(C){return C.match(ih)||[]}function xS(C){return C.match(XO)||[]}var LS=function C(x){x=x==null?Ve:Zr.defaults(Ve.Object(),x,Zr.pick(Ve,eS));var q=x.Array,V=x.Date,Q=x.Error,se=x.Function,De=x.Math,de=x.Object,vh=x.RegExp,jS=x.String,kt=x.TypeError,Za=q.prototype,IS=se.prototype,_n=de.prototype,es=x["__core-js_shared__"],ts=IS.toString,ce=_n.hasOwnProperty,FS=0,hy=function(){var o=/[^.]+$/.exec(es&&es.keys&&es.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),rs=_n.toString,DS=ts.call(de),kS=Ve._,RS=vh("^"+ts.call(ce).replace(Xf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),is=Qm?x.Buffer:t,ei=x.Symbol,ns=x.Uint8Array,py=is?is.allocUnsafe:t,os=ly(de.getPrototypeOf,de),dy=de.create,vy=_n.propertyIsEnumerable,as=Za.splice,my=ei?ei.isConcatSpreadable:t,Jo=ei?ei.iterator:t,Vi=ei?ei.toStringTag:t,ss=function(){try{var o=Hi(de,"defineProperty");return o({},"",{}),o}catch{}}(),zS=x.clearTimeout!==Ve.clearTimeout&&x.clearTimeout,NS=V&&V.now!==Ve.Date.now&&V.now,VS=x.setTimeout!==Ve.setTimeout&&x.setTimeout,us=De.ceil,cs=De.floor,mh=de.getOwnPropertySymbols,WS=is?is.isBuffer:t,yy=x.isFinite,US=Za.join,GS=ly(de.keys,de),ke=De.max,et=De.min,BS=V.now,HS=x.parseInt,gy=De.random,$S=Za.reverse,yh=Hi(x,"DataView"),Zo=Hi(x,"Map"),gh=Hi(x,"Promise"),Pn=Hi(x,"Set"),ea=Hi(x,"WeakMap"),ta=Hi(de,"create"),ls=ea&&new ea,wn={},YS=$i(yh),QS=$i(Zo),KS=$i(gh),XS=$i(Pn),JS=$i(ea),fs=ei?ei.prototype:t,ra=fs?fs.valueOf:t,by=fs?fs.toString:t;function y(o){if(Te(o)&&!K(o)&&!(o instanceof re)){if(o instanceof Rt)return o;if(ce.call(o,"__wrapped__"))return _g(o)}return new Rt(o)}var On=function(){function o(){}return function(a){if(!we(a))return{};if(dy)return dy(a);o.prototype=a;var u=new o;return o.prototype=t,u}}();function hs(){}function Rt(o,a){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=t}y.templateSettings={escape:hO,evaluate:pO,interpolate:Em,variable:"",imports:{_:y}},y.prototype=hs.prototype,y.prototype.constructor=y,Rt.prototype=On(hs.prototype),Rt.prototype.constructor=Rt;function re(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ar,this.__views__=[]}function ZS(){var o=new re(this.__wrapped__);return o.__actions__=vt(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=vt(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=vt(this.__views__),o}function eT(){if(this.__filtered__){var o=new re(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function tT(){var o=this.__wrapped__.value(),a=this.__dir__,u=K(o),f=a<0,d=u?o.length:0,g=pC(0,d,this.__views__),P=g.start,S=g.end,A=S-P,j=f?S:P-1,I=this.__iteratees__,F=I.length,R=0,W=et(A,this.__takeCount__);if(!u||!f&&d==A&&W==A)return Uy(o,this.__actions__);var H=[];e:for(;A--&&R<W;){j+=a;for(var Z=-1,$=o[j];++Z<F;){var te=I[Z],ne=te.iteratee,qt=te.type,ut=ne($);if(qt==Qw)$=ut;else if(!ut){if(qt==Om)continue e;break e}}H[R++]=$}return H}re.prototype=On(hs.prototype),re.prototype.constructor=re;function Wi(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var f=o[a];this.set(f[0],f[1])}}function rT(){this.__data__=ta?ta(null):{},this.size=0}function iT(o){var a=this.has(o)&&delete this.__data__[o];return this.size-=a?1:0,a}function nT(o){var a=this.__data__;if(ta){var u=a[o];return u===h?t:u}return ce.call(a,o)?a[o]:t}function oT(o){var a=this.__data__;return ta?a[o]!==t:ce.call(a,o)}function aT(o,a){var u=this.__data__;return this.size+=this.has(o)?0:1,u[o]=ta&&a===t?h:a,this}Wi.prototype.clear=rT,Wi.prototype.delete=iT,Wi.prototype.get=nT,Wi.prototype.has=oT,Wi.prototype.set=aT;function Mr(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var f=o[a];this.set(f[0],f[1])}}function sT(){this.__data__=[],this.size=0}function uT(o){var a=this.__data__,u=ps(a,o);if(u<0)return!1;var f=a.length-1;return u==f?a.pop():as.call(a,u,1),--this.size,!0}function cT(o){var a=this.__data__,u=ps(a,o);return u<0?t:a[u][1]}function lT(o){return ps(this.__data__,o)>-1}function fT(o,a){var u=this.__data__,f=ps(u,o);return f<0?(++this.size,u.push([o,a])):u[f][1]=a,this}Mr.prototype.clear=sT,Mr.prototype.delete=uT,Mr.prototype.get=cT,Mr.prototype.has=lT,Mr.prototype.set=fT;function xr(o){var a=-1,u=o==null?0:o.length;for(this.clear();++a<u;){var f=o[a];this.set(f[0],f[1])}}function hT(){this.size=0,this.__data__={hash:new Wi,map:new(Zo||Mr),string:new Wi}}function pT(o){var a=Ts(this,o).delete(o);return this.size-=a?1:0,a}function dT(o){return Ts(this,o).get(o)}function vT(o){return Ts(this,o).has(o)}function mT(o,a){var u=Ts(this,o),f=u.size;return u.set(o,a),this.size+=u.size==f?0:1,this}xr.prototype.clear=hT,xr.prototype.delete=pT,xr.prototype.get=dT,xr.prototype.has=vT,xr.prototype.set=mT;function Ui(o){var a=-1,u=o==null?0:o.length;for(this.__data__=new xr;++a<u;)this.add(o[a])}function yT(o){return this.__data__.set(o,h),this}function gT(o){return this.__data__.has(o)}Ui.prototype.add=Ui.prototype.push=yT,Ui.prototype.has=gT;function Yt(o){var a=this.__data__=new Mr(o);this.size=a.size}function bT(){this.__data__=new Mr,this.size=0}function _T(o){var a=this.__data__,u=a.delete(o);return this.size=a.size,u}function PT(o){return this.__data__.get(o)}function wT(o){return this.__data__.has(o)}function OT(o,a){var u=this.__data__;if(u instanceof Mr){var f=u.__data__;if(!Zo||f.length<n-1)return f.push([o,a]),this.size=++u.size,this;u=this.__data__=new xr(f)}return u.set(o,a),this.size=u.size,this}Yt.prototype.clear=bT,Yt.prototype.delete=_T,Yt.prototype.get=PT,Yt.prototype.has=wT,Yt.prototype.set=OT;function _y(o,a){var u=K(o),f=!u&&Yi(o),d=!u&&!f&&oi(o),g=!u&&!f&&!d&&An(o),P=u||f||d||g,S=P?hh(o.length,jS):[],A=S.length;for(var j in o)(a||ce.call(o,j))&&!(P&&(j=="length"||d&&(j=="offset"||j=="parent")||g&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||Fr(j,A)))&&S.push(j);return S}function Py(o){var a=o.length;return a?o[qh(0,a-1)]:t}function ST(o,a){return Cs(vt(o),Gi(a,0,o.length))}function TT(o){return Cs(vt(o))}function bh(o,a,u){(u!==t&&!Qt(o[a],u)||u===t&&!(a in o))&&Lr(o,a,u)}function ia(o,a,u){var f=o[a];(!(ce.call(o,a)&&Qt(f,u))||u===t&&!(a in o))&&Lr(o,a,u)}function ps(o,a){for(var u=o.length;u--;)if(Qt(o[u][0],a))return u;return-1}function CT(o,a,u,f){return ti(o,function(d,g,P){a(f,d,u(d),P)}),f}function wy(o,a){return o&&ur(a,We(a),o)}function AT(o,a){return o&&ur(a,yt(a),o)}function Lr(o,a,u){a=="__proto__"&&ss?ss(o,a,{configurable:!0,enumerable:!0,value:u,writable:!0}):o[a]=u}function _h(o,a){for(var u=-1,f=a.length,d=q(f),g=o==null;++u<f;)d[u]=g?t:ep(o,a[u]);return d}function Gi(o,a,u){return o===o&&(u!==t&&(o=o<=u?o:u),a!==t&&(o=o>=a?o:a)),o}function zt(o,a,u,f,d,g){var P,S=a&b,A=a&w,j=a&T;if(u&&(P=d?u(o,f,d,g):u(o)),P!==t)return P;if(!we(o))return o;var I=K(o);if(I){if(P=vC(o),!S)return vt(o,P)}else{var F=tt(o),R=F==Ba||F==Sm;if(oi(o))return Hy(o,S);if(F==qr||F==dn||R&&!d){if(P=A||R?{}:fg(o),!S)return A?nC(o,AT(P,o)):iC(o,wy(P,o))}else{if(!ve[F])return d?o:{};P=mC(o,F,S)}}g||(g=new Yt);var W=g.get(o);if(W)return W;g.set(o,P),Ng(o)?o.forEach(function($){P.add(zt($,a,u,$,o,g))}):Rg(o)&&o.forEach(function($,te){P.set(te,zt($,a,u,te,o,g))});var H=j?A?Nh:zh:A?yt:We,Z=I?t:H(o);return Dt(Z||o,function($,te){Z&&(te=$,$=o[te]),ia(P,te,zt($,a,u,te,o,g))}),P}function ET(o){var a=We(o);return function(u){return Oy(u,o,a)}}function Oy(o,a,u){var f=u.length;if(o==null)return!f;for(o=de(o);f--;){var d=u[f],g=a[d],P=o[d];if(P===t&&!(d in o)||!g(P))return!1}return!0}function Sy(o,a,u){if(typeof o!="function")throw new kt(c);return la(function(){o.apply(t,u)},a)}function na(o,a,u,f){var d=-1,g=Ka,P=!0,S=o.length,A=[],j=a.length;if(!S)return A;u&&(a=ge(a,Ct(u))),f?(g=ah,P=!1):a.length>=n&&(g=Xo,P=!1,a=new Ui(a));e:for(;++d<S;){var I=o[d],F=u==null?I:u(I);if(I=f||I!==0?I:0,P&&F===F){for(var R=j;R--;)if(a[R]===F)continue e;A.push(I)}else g(a,F,f)||A.push(I)}return A}var ti=Xy(sr),Ty=Xy(wh,!0);function qT(o,a){var u=!0;return ti(o,function(f,d,g){return u=!!a(f,d,g),u}),u}function ds(o,a,u){for(var f=-1,d=o.length;++f<d;){var g=o[f],P=a(g);if(P!=null&&(S===t?P===P&&!Et(P):u(P,S)))var S=P,A=g}return A}function MT(o,a,u,f){var d=o.length;for(u=J(u),u<0&&(u=-u>d?0:d+u),f=f===t||f>d?d:J(f),f<0&&(f+=d),f=u>f?0:Wg(f);u<f;)o[u++]=a;return o}function Cy(o,a){var u=[];return ti(o,function(f,d,g){a(f,d,g)&&u.push(f)}),u}function Ye(o,a,u,f,d){var g=-1,P=o.length;for(u||(u=gC),d||(d=[]);++g<P;){var S=o[g];a>0&&u(S)?a>1?Ye(S,a-1,u,f,d):Xr(d,S):f||(d[d.length]=S)}return d}var Ph=Jy(),Ay=Jy(!0);function sr(o,a){return o&&Ph(o,a,We)}function wh(o,a){return o&&Ay(o,a,We)}function vs(o,a){return Kr(a,function(u){return Dr(o[u])})}function Bi(o,a){a=ii(a,o);for(var u=0,f=a.length;o!=null&&u<f;)o=o[cr(a[u++])];return u&&u==f?o:t}function Ey(o,a,u){var f=a(o);return K(o)?f:Xr(f,u(o))}function at(o){return o==null?o===t?oO:iO:Vi&&Vi in de(o)?hC(o):TC(o)}function Oh(o,a){return o>a}function xT(o,a){return o!=null&&ce.call(o,a)}function LT(o,a){return o!=null&&a in de(o)}function jT(o,a,u){return o>=et(a,u)&&o<ke(a,u)}function Sh(o,a,u){for(var f=u?ah:Ka,d=o[0].length,g=o.length,P=g,S=q(g),A=1/0,j=[];P--;){var I=o[P];P&&a&&(I=ge(I,Ct(a))),A=et(I.length,A),S[P]=!u&&(a||d>=120&&I.length>=120)?new Ui(P&&I):t}I=o[0];var F=-1,R=S[0];e:for(;++F<d&&j.length<A;){var W=I[F],H=a?a(W):W;if(W=u||W!==0?W:0,!(R?Xo(R,H):f(j,H,u))){for(P=g;--P;){var Z=S[P];if(!(Z?Xo(Z,H):f(o[P],H,u)))continue e}R&&R.push(H),j.push(W)}}return j}function IT(o,a,u,f){return sr(o,function(d,g,P){a(f,u(d),g,P)}),f}function oa(o,a,u){a=ii(a,o),o=vg(o,a);var f=o==null?o:o[cr(Vt(a))];return f==null?t:Tt(f,o,u)}function qy(o){return Te(o)&&at(o)==dn}function FT(o){return Te(o)&&at(o)==Ko}function DT(o){return Te(o)&&at(o)==Bo}function aa(o,a,u,f,d){return o===a?!0:o==null||a==null||!Te(o)&&!Te(a)?o!==o&&a!==a:kT(o,a,u,f,aa,d)}function kT(o,a,u,f,d,g){var P=K(o),S=K(a),A=P?Ua:tt(o),j=S?Ua:tt(a);A=A==dn?qr:A,j=j==dn?qr:j;var I=A==qr,F=j==qr,R=A==j;if(R&&oi(o)){if(!oi(a))return!1;P=!0,I=!1}if(R&&!I)return g||(g=new Yt),P||An(o)?ug(o,a,u,f,d,g):lC(o,a,A,u,f,d,g);if(!(u&E)){var W=I&&ce.call(o,"__wrapped__"),H=F&&ce.call(a,"__wrapped__");if(W||H){var Z=W?o.value():o,$=H?a.value():a;return g||(g=new Yt),d(Z,$,u,f,g)}}return R?(g||(g=new Yt),fC(o,a,u,f,d,g)):!1}function RT(o){return Te(o)&&tt(o)==Bt}function Th(o,a,u,f){var d=u.length,g=d,P=!f;if(o==null)return!g;for(o=de(o);d--;){var S=u[d];if(P&&S[2]?S[1]!==o[S[0]]:!(S[0]in o))return!1}for(;++d<g;){S=u[d];var A=S[0],j=o[A],I=S[1];if(P&&S[2]){if(j===t&&!(A in o))return!1}else{var F=new Yt;if(f)var R=f(j,I,A,o,a,F);if(!(R===t?aa(I,j,E|M,f,F):R))return!1}}return!0}function My(o){if(!we(o)||_C(o))return!1;var a=Dr(o)?RS:EO;return a.test($i(o))}function zT(o){return Te(o)&&at(o)==$o}function NT(o){return Te(o)&&tt(o)==Ht}function VT(o){return Te(o)&&Ls(o.length)&&!!ye[at(o)]}function xy(o){return typeof o=="function"?o:o==null?gt:typeof o=="object"?K(o)?Iy(o[0],o[1]):jy(o):Zg(o)}function Ch(o){if(!ca(o))return GS(o);var a=[];for(var u in de(o))ce.call(o,u)&&u!="constructor"&&a.push(u);return a}function WT(o){if(!we(o))return SC(o);var a=ca(o),u=[];for(var f in o)f=="constructor"&&(a||!ce.call(o,f))||u.push(f);return u}function Ah(o,a){return o<a}function Ly(o,a){var u=-1,f=mt(o)?q(o.length):[];return ti(o,function(d,g,P){f[++u]=a(d,g,P)}),f}function jy(o){var a=Wh(o);return a.length==1&&a[0][2]?pg(a[0][0],a[0][1]):function(u){return u===o||Th(u,o,a)}}function Iy(o,a){return Gh(o)&&hg(a)?pg(cr(o),a):function(u){var f=ep(u,o);return f===t&&f===a?tp(u,o):aa(a,f,E|M)}}function ms(o,a,u,f,d){o!==a&&Ph(a,function(g,P){if(d||(d=new Yt),we(g))UT(o,a,P,u,ms,f,d);else{var S=f?f(Hh(o,P),g,P+"",o,a,d):t;S===t&&(S=g),bh(o,P,S)}},yt)}function UT(o,a,u,f,d,g,P){var S=Hh(o,u),A=Hh(a,u),j=P.get(A);if(j){bh(o,u,j);return}var I=g?g(S,A,u+"",o,a,P):t,F=I===t;if(F){var R=K(A),W=!R&&oi(A),H=!R&&!W&&An(A);I=A,R||W||H?K(S)?I=S:Ae(S)?I=vt(S):W?(F=!1,I=Hy(A,!0)):H?(F=!1,I=$y(A,!0)):I=[]:fa(A)||Yi(A)?(I=S,Yi(S)?I=Ug(S):(!we(S)||Dr(S))&&(I=fg(A))):F=!1}F&&(P.set(A,I),d(I,A,f,g,P),P.delete(A)),bh(o,u,I)}function Fy(o,a){var u=o.length;if(u)return a+=a<0?u:0,Fr(a,u)?o[a]:t}function Dy(o,a,u){a.length?a=ge(a,function(g){return K(g)?function(P){return Bi(P,g.length===1?g[0]:g)}:g}):a=[gt];var f=-1;a=ge(a,Ct(B()));var d=Ly(o,function(g,P,S){var A=ge(a,function(j){return j(g)});return{criteria:A,index:++f,value:g}});return mS(d,function(g,P){return rC(g,P,u)})}function GT(o,a){return ky(o,a,function(u,f){return tp(o,f)})}function ky(o,a,u){for(var f=-1,d=a.length,g={};++f<d;){var P=a[f],S=Bi(o,P);u(S,P)&&sa(g,ii(P,o),S)}return g}function BT(o){return function(a){return Bi(a,o)}}function Eh(o,a,u,f){var d=f?vS:yn,g=-1,P=a.length,S=o;for(o===a&&(a=vt(a)),u&&(S=ge(o,Ct(u)));++g<P;)for(var A=0,j=a[g],I=u?u(j):j;(A=d(S,I,A,f))>-1;)S!==o&&as.call(S,A,1),as.call(o,A,1);return o}function Ry(o,a){for(var u=o?a.length:0,f=u-1;u--;){var d=a[u];if(u==f||d!==g){var g=d;Fr(d)?as.call(o,d,1):Lh(o,d)}}return o}function qh(o,a){return o+cs(gy()*(a-o+1))}function HT(o,a,u,f){for(var d=-1,g=ke(us((a-o)/(u||1)),0),P=q(g);g--;)P[f?g:++d]=o,o+=u;return P}function Mh(o,a){var u="";if(!o||a<1||a>Qr)return u;do a%2&&(u+=o),a=cs(a/2),a&&(o+=o);while(a);return u}function ee(o,a){return $h(dg(o,a,gt),o+"")}function $T(o){return Py(En(o))}function YT(o,a){var u=En(o);return Cs(u,Gi(a,0,u.length))}function sa(o,a,u,f){if(!we(o))return o;a=ii(a,o);for(var d=-1,g=a.length,P=g-1,S=o;S!=null&&++d<g;){var A=cr(a[d]),j=u;if(A==="__proto__"||A==="constructor"||A==="prototype")return o;if(d!=P){var I=S[A];j=f?f(I,A,S):t,j===t&&(j=we(I)?I:Fr(a[d+1])?[]:{})}ia(S,A,j),S=S[A]}return o}var zy=ls?function(o,a){return ls.set(o,a),o}:gt,QT=ss?function(o,a){return ss(o,"toString",{configurable:!0,enumerable:!1,value:ip(a),writable:!0})}:gt;function KT(o){return Cs(En(o))}function Nt(o,a,u){var f=-1,d=o.length;a<0&&(a=-a>d?0:d+a),u=u>d?d:u,u<0&&(u+=d),d=a>u?0:u-a>>>0,a>>>=0;for(var g=q(d);++f<d;)g[f]=o[f+a];return g}function XT(o,a){var u;return ti(o,function(f,d,g){return u=a(f,d,g),!u}),!!u}function ys(o,a,u){var f=0,d=o==null?f:o.length;if(typeof a=="number"&&a===a&&d<=Zw){for(;f<d;){var g=f+d>>>1,P=o[g];P!==null&&!Et(P)&&(u?P<=a:P<a)?f=g+1:d=g}return d}return xh(o,a,gt,u)}function xh(o,a,u,f){var d=0,g=o==null?0:o.length;if(g===0)return 0;a=u(a);for(var P=a!==a,S=a===null,A=Et(a),j=a===t;d<g;){var I=cs((d+g)/2),F=u(o[I]),R=F!==t,W=F===null,H=F===F,Z=Et(F);if(P)var $=f||H;else j?$=H&&(f||R):S?$=H&&R&&(f||!W):A?$=H&&R&&!W&&(f||!Z):W||Z?$=!1:$=f?F<=a:F<a;$?d=I+1:g=I}return et(g,Jw)}function Ny(o,a){for(var u=-1,f=o.length,d=0,g=[];++u<f;){var P=o[u],S=a?a(P):P;if(!u||!Qt(S,A)){var A=S;g[d++]=P===0?0:P}}return g}function Vy(o){return typeof o=="number"?o:Et(o)?Wa:+o}function At(o){if(typeof o=="string")return o;if(K(o))return ge(o,At)+"";if(Et(o))return by?by.call(o):"";var a=o+"";return a=="0"&&1/o==-zi?"-0":a}function ri(o,a,u){var f=-1,d=Ka,g=o.length,P=!0,S=[],A=S;if(u)P=!1,d=ah;else if(g>=n){var j=a?null:uC(o);if(j)return Ja(j);P=!1,d=Xo,A=new Ui}else A=a?[]:S;e:for(;++f<g;){var I=o[f],F=a?a(I):I;if(I=u||I!==0?I:0,P&&F===F){for(var R=A.length;R--;)if(A[R]===F)continue e;a&&A.push(F),S.push(I)}else d(A,F,u)||(A!==S&&A.push(F),S.push(I))}return S}function Lh(o,a){return a=ii(a,o),o=vg(o,a),o==null||delete o[cr(Vt(a))]}function Wy(o,a,u,f){return sa(o,a,u(Bi(o,a)),f)}function gs(o,a,u,f){for(var d=o.length,g=f?d:-1;(f?g--:++g<d)&&a(o[g],g,o););return u?Nt(o,f?0:g,f?g+1:d):Nt(o,f?g+1:0,f?d:g)}function Uy(o,a){var u=o;return u instanceof re&&(u=u.value()),sh(a,function(f,d){return d.func.apply(d.thisArg,Xr([f],d.args))},u)}function jh(o,a,u){var f=o.length;if(f<2)return f?ri(o[0]):[];for(var d=-1,g=q(f);++d<f;)for(var P=o[d],S=-1;++S<f;)S!=d&&(g[d]=na(g[d]||P,o[S],a,u));return ri(Ye(g,1),a,u)}function Gy(o,a,u){for(var f=-1,d=o.length,g=a.length,P={};++f<d;){var S=f<g?a[f]:t;u(P,o[f],S)}return P}function Ih(o){return Ae(o)?o:[]}function Fh(o){return typeof o=="function"?o:gt}function ii(o,a){return K(o)?o:Gh(o,a)?[o]:bg(ue(o))}var JT=ee;function ni(o,a,u){var f=o.length;return u=u===t?f:u,!a&&u>=f?o:Nt(o,a,u)}var By=zS||function(o){return Ve.clearTimeout(o)};function Hy(o,a){if(a)return o.slice();var u=o.length,f=py?py(u):new o.constructor(u);return o.copy(f),f}function Dh(o){var a=new o.constructor(o.byteLength);return new ns(a).set(new ns(o)),a}function ZT(o,a){var u=a?Dh(o.buffer):o.buffer;return new o.constructor(u,o.byteOffset,o.byteLength)}function eC(o){var a=new o.constructor(o.source,qm.exec(o));return a.lastIndex=o.lastIndex,a}function tC(o){return ra?de(ra.call(o)):{}}function $y(o,a){var u=a?Dh(o.buffer):o.buffer;return new o.constructor(u,o.byteOffset,o.length)}function Yy(o,a){if(o!==a){var u=o!==t,f=o===null,d=o===o,g=Et(o),P=a!==t,S=a===null,A=a===a,j=Et(a);if(!S&&!j&&!g&&o>a||g&&P&&A&&!S&&!j||f&&P&&A||!u&&A||!d)return 1;if(!f&&!g&&!j&&o<a||j&&u&&d&&!f&&!g||S&&u&&d||!P&&d||!A)return-1}return 0}function rC(o,a,u){for(var f=-1,d=o.criteria,g=a.criteria,P=d.length,S=u.length;++f<P;){var A=Yy(d[f],g[f]);if(A){if(f>=S)return A;var j=u[f];return A*(j=="desc"?-1:1)}}return o.index-a.index}function Qy(o,a,u,f){for(var d=-1,g=o.length,P=u.length,S=-1,A=a.length,j=ke(g-P,0),I=q(A+j),F=!f;++S<A;)I[S]=a[S];for(;++d<P;)(F||d<g)&&(I[u[d]]=o[d]);for(;j--;)I[S++]=o[d++];return I}function Ky(o,a,u,f){for(var d=-1,g=o.length,P=-1,S=u.length,A=-1,j=a.length,I=ke(g-S,0),F=q(I+j),R=!f;++d<I;)F[d]=o[d];for(var W=d;++A<j;)F[W+A]=a[A];for(;++P<S;)(R||d<g)&&(F[W+u[P]]=o[d++]);return F}function vt(o,a){var u=-1,f=o.length;for(a||(a=q(f));++u<f;)a[u]=o[u];return a}function ur(o,a,u,f){var d=!u;u||(u={});for(var g=-1,P=a.length;++g<P;){var S=a[g],A=f?f(u[S],o[S],S,u,o):t;A===t&&(A=o[S]),d?Lr(u,S,A):ia(u,S,A)}return u}function iC(o,a){return ur(o,Uh(o),a)}function nC(o,a){return ur(o,cg(o),a)}function bs(o,a){return function(u,f){var d=K(u)?cS:CT,g=a?a():{};return d(u,o,B(f,2),g)}}function Sn(o){return ee(function(a,u){var f=-1,d=u.length,g=d>1?u[d-1]:t,P=d>2?u[2]:t;for(g=o.length>3&&typeof g=="function"?(d--,g):t,P&&st(u[0],u[1],P)&&(g=d<3?t:g,d=1),a=de(a);++f<d;){var S=u[f];S&&o(a,S,f,g)}return a})}function Xy(o,a){return function(u,f){if(u==null)return u;if(!mt(u))return o(u,f);for(var d=u.length,g=a?d:-1,P=de(u);(a?g--:++g<d)&&f(P[g],g,P)!==!1;);return u}}function Jy(o){return function(a,u,f){for(var d=-1,g=de(a),P=f(a),S=P.length;S--;){var A=P[o?S:++d];if(u(g[A],A,g)===!1)break}return a}}function oC(o,a,u){var f=a&L,d=ua(o);function g(){var P=this&&this!==Ve&&this instanceof g?d:o;return P.apply(f?u:this,arguments)}return g}function Zy(o){return function(a){a=ue(a);var u=gn(a)?$t(a):t,f=u?u[0]:a.charAt(0),d=u?ni(u,1).join(""):a.slice(1);return f[o]()+d}}function Tn(o){return function(a){return sh(Xg(Kg(a).replace(QO,"")),o,"")}}function ua(o){return function(){var a=arguments;switch(a.length){case 0:return new o;case 1:return new o(a[0]);case 2:return new o(a[0],a[1]);case 3:return new o(a[0],a[1],a[2]);case 4:return new o(a[0],a[1],a[2],a[3]);case 5:return new o(a[0],a[1],a[2],a[3],a[4]);case 6:return new o(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new o(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var u=On(o.prototype),f=o.apply(u,a);return we(f)?f:u}}function aC(o,a,u){var f=ua(o);function d(){for(var g=arguments.length,P=q(g),S=g,A=Cn(d);S--;)P[S]=arguments[S];var j=g<3&&P[0]!==A&&P[g-1]!==A?[]:Jr(P,A);if(g-=j.length,g<u)return ng(o,a,_s,d.placeholder,t,P,j,t,t,u-g);var I=this&&this!==Ve&&this instanceof d?f:o;return Tt(I,this,P)}return d}function eg(o){return function(a,u,f){var d=de(a);if(!mt(a)){var g=B(u,3);a=We(a),u=function(S){return g(d[S],S,d)}}var P=o(a,u,f);return P>-1?d[g?a[P]:P]:t}}function tg(o){return Ir(function(a){var u=a.length,f=u,d=Rt.prototype.thru;for(o&&a.reverse();f--;){var g=a[f];if(typeof g!="function")throw new kt(c);if(d&&!P&&Ss(g)=="wrapper")var P=new Rt([],!0)}for(f=P?f:u;++f<u;){g=a[f];var S=Ss(g),A=S=="wrapper"?Vh(g):t;A&&Bh(A[0])&&A[1]==(dt|Y|pe|Uo)&&!A[4].length&&A[9]==1?P=P[Ss(A[0])].apply(P,A[3]):P=g.length==1&&Bh(g)?P[S]():P.thru(g)}return function(){var j=arguments,I=j[0];if(P&&j.length==1&&K(I))return P.plant(I).value();for(var F=0,R=u?a[F].apply(this,j):I;++F<u;)R=a[F].call(this,R);return R}})}function _s(o,a,u,f,d,g,P,S,A,j){var I=a&dt,F=a&L,R=a&D,W=a&(Y|ie),H=a&Vf,Z=R?t:ua(o);function $(){for(var te=arguments.length,ne=q(te),qt=te;qt--;)ne[qt]=arguments[qt];if(W)var ut=Cn($),Mt=gS(ne,ut);if(f&&(ne=Qy(ne,f,d,W)),g&&(ne=Ky(ne,g,P,W)),te-=Mt,W&&te<j){var Ee=Jr(ne,ut);return ng(o,a,_s,$.placeholder,u,ne,Ee,S,A,j-te)}var Kt=F?u:this,Rr=R?Kt[o]:o;return te=ne.length,S?ne=CC(ne,S):H&&te>1&&ne.reverse(),I&&A<te&&(ne.length=A),this&&this!==Ve&&this instanceof $&&(Rr=Z||ua(Rr)),Rr.apply(Kt,ne)}return $}function rg(o,a){return function(u,f){return IT(u,o,a(f),{})}}function Ps(o,a){return function(u,f){var d;if(u===t&&f===t)return a;if(u!==t&&(d=u),f!==t){if(d===t)return f;typeof u=="string"||typeof f=="string"?(u=At(u),f=At(f)):(u=Vy(u),f=Vy(f)),d=o(u,f)}return d}}function kh(o){return Ir(function(a){return a=ge(a,Ct(B())),ee(function(u){var f=this;return o(a,function(d){return Tt(d,f,u)})})})}function ws(o,a){a=a===t?" ":At(a);var u=a.length;if(u<2)return u?Mh(a,o):a;var f=Mh(a,us(o/bn(a)));return gn(a)?ni($t(f),0,o).join(""):f.slice(0,o)}function sC(o,a,u,f){var d=a&L,g=ua(o);function P(){for(var S=-1,A=arguments.length,j=-1,I=f.length,F=q(I+A),R=this&&this!==Ve&&this instanceof P?g:o;++j<I;)F[j]=f[j];for(;A--;)F[j++]=arguments[++S];return Tt(R,d?u:this,F)}return P}function ig(o){return function(a,u,f){return f&&typeof f!="number"&&st(a,u,f)&&(u=f=t),a=kr(a),u===t?(u=a,a=0):u=kr(u),f=f===t?a<u?1:-1:kr(f),HT(a,u,f,o)}}function Os(o){return function(a,u){return typeof a=="string"&&typeof u=="string"||(a=Wt(a),u=Wt(u)),o(a,u)}}function ng(o,a,u,f,d,g,P,S,A,j){var I=a&Y,F=I?P:t,R=I?t:P,W=I?g:t,H=I?t:g;a|=I?pe:Fe,a&=~(I?Fe:pe),a&N||(a&=~(L|D));var Z=[o,a,d,W,F,H,R,S,A,j],$=u.apply(t,Z);return Bh(o)&&mg($,Z),$.placeholder=f,yg($,o,a)}function Rh(o){var a=De[o];return function(u,f){if(u=Wt(u),f=f==null?0:et(J(f),292),f&&yy(u)){var d=(ue(u)+"e").split("e"),g=a(d[0]+"e"+(+d[1]+f));return d=(ue(g)+"e").split("e"),+(d[0]+"e"+(+d[1]-f))}return a(u)}}var uC=Pn&&1/Ja(new Pn([,-0]))[1]==zi?function(o){return new Pn(o)}:ap;function og(o){return function(a){var u=tt(a);return u==Bt?dh(a):u==Ht?TS(a):yS(a,o(a))}}function jr(o,a,u,f,d,g,P,S){var A=a&D;if(!A&&typeof o!="function")throw new kt(c);var j=f?f.length:0;if(j||(a&=~(pe|Fe),f=d=t),P=P===t?P:ke(J(P),0),S=S===t?S:J(S),j-=d?d.length:0,a&Fe){var I=f,F=d;f=d=t}var R=A?t:Vh(o),W=[o,a,u,f,d,I,F,g,P,S];if(R&&OC(W,R),o=W[0],a=W[1],u=W[2],f=W[3],d=W[4],S=W[9]=W[9]===t?A?0:o.length:ke(W[9]-j,0),!S&&a&(Y|ie)&&(a&=~(Y|ie)),!a||a==L)var H=oC(o,a,u);else a==Y||a==ie?H=aC(o,a,S):(a==pe||a==(L|pe))&&!d.length?H=sC(o,a,u,f):H=_s.apply(t,W);var Z=R?zy:mg;return yg(Z(H,W),o,a)}function ag(o,a,u,f){return o===t||Qt(o,_n[u])&&!ce.call(f,u)?a:o}function sg(o,a,u,f,d,g){return we(o)&&we(a)&&(g.set(a,o),ms(o,a,t,sg,g),g.delete(a)),o}function cC(o){return fa(o)?t:o}function ug(o,a,u,f,d,g){var P=u&E,S=o.length,A=a.length;if(S!=A&&!(P&&A>S))return!1;var j=g.get(o),I=g.get(a);if(j&&I)return j==a&&I==o;var F=-1,R=!0,W=u&M?new Ui:t;for(g.set(o,a),g.set(a,o);++F<S;){var H=o[F],Z=a[F];if(f)var $=P?f(Z,H,F,a,o,g):f(H,Z,F,o,a,g);if($!==t){if($)continue;R=!1;break}if(W){if(!uh(a,function(te,ne){if(!Xo(W,ne)&&(H===te||d(H,te,u,f,g)))return W.push(ne)})){R=!1;break}}else if(!(H===Z||d(H,Z,u,f,g))){R=!1;break}}return g.delete(o),g.delete(a),R}function lC(o,a,u,f,d,g,P){switch(u){case vn:if(o.byteLength!=a.byteLength||o.byteOffset!=a.byteOffset)return!1;o=o.buffer,a=a.buffer;case Ko:return!(o.byteLength!=a.byteLength||!g(new ns(o),new ns(a)));case Go:case Bo:case Ho:return Qt(+o,+a);case Ga:return o.name==a.name&&o.message==a.message;case $o:case Yo:return o==a+"";case Bt:var S=dh;case Ht:var A=f&E;if(S||(S=Ja),o.size!=a.size&&!A)return!1;var j=P.get(o);if(j)return j==a;f|=M,P.set(o,a);var I=ug(S(o),S(a),f,d,g,P);return P.delete(o),I;case Ha:if(ra)return ra.call(o)==ra.call(a)}return!1}function fC(o,a,u,f,d,g){var P=u&E,S=zh(o),A=S.length,j=zh(a),I=j.length;if(A!=I&&!P)return!1;for(var F=A;F--;){var R=S[F];if(!(P?R in a:ce.call(a,R)))return!1}var W=g.get(o),H=g.get(a);if(W&&H)return W==a&&H==o;var Z=!0;g.set(o,a),g.set(a,o);for(var $=P;++F<A;){R=S[F];var te=o[R],ne=a[R];if(f)var qt=P?f(ne,te,R,a,o,g):f(te,ne,R,o,a,g);if(!(qt===t?te===ne||d(te,ne,u,f,g):qt)){Z=!1;break}$||($=R=="constructor")}if(Z&&!$){var ut=o.constructor,Mt=a.constructor;ut!=Mt&&"constructor"in o&&"constructor"in a&&!(typeof ut=="function"&&ut instanceof ut&&typeof Mt=="function"&&Mt instanceof Mt)&&(Z=!1)}return g.delete(o),g.delete(a),Z}function Ir(o){return $h(dg(o,t,Og),o+"")}function zh(o){return Ey(o,We,Uh)}function Nh(o){return Ey(o,yt,cg)}var Vh=ls?function(o){return ls.get(o)}:ap;function Ss(o){for(var a=o.name+"",u=wn[a],f=ce.call(wn,a)?u.length:0;f--;){var d=u[f],g=d.func;if(g==null||g==o)return d.name}return a}function Cn(o){var a=ce.call(y,"placeholder")?y:o;return a.placeholder}function B(){var o=y.iteratee||np;return o=o===np?xy:o,arguments.length?o(arguments[0],arguments[1]):o}function Ts(o,a){var u=o.__data__;return bC(a)?u[typeof a=="string"?"string":"hash"]:u.map}function Wh(o){for(var a=We(o),u=a.length;u--;){var f=a[u],d=o[f];a[u]=[f,d,hg(d)]}return a}function Hi(o,a){var u=wS(o,a);return My(u)?u:t}function hC(o){var a=ce.call(o,Vi),u=o[Vi];try{o[Vi]=t;var f=!0}catch{}var d=rs.call(o);return f&&(a?o[Vi]=u:delete o[Vi]),d}var Uh=mh?function(o){return o==null?[]:(o=de(o),Kr(mh(o),function(a){return vy.call(o,a)}))}:sp,cg=mh?function(o){for(var a=[];o;)Xr(a,Uh(o)),o=os(o);return a}:sp,tt=at;(yh&&tt(new yh(new ArrayBuffer(1)))!=vn||Zo&&tt(new Zo)!=Bt||gh&&tt(gh.resolve())!=Tm||Pn&&tt(new Pn)!=Ht||ea&&tt(new ea)!=Qo)&&(tt=function(o){var a=at(o),u=a==qr?o.constructor:t,f=u?$i(u):"";if(f)switch(f){case YS:return vn;case QS:return Bt;case KS:return Tm;case XS:return Ht;case JS:return Qo}return a});function pC(o,a,u){for(var f=-1,d=u.length;++f<d;){var g=u[f],P=g.size;switch(g.type){case"drop":o+=P;break;case"dropRight":a-=P;break;case"take":a=et(a,o+P);break;case"takeRight":o=ke(o,a-P);break}}return{start:o,end:a}}function dC(o){var a=o.match(_O);return a?a[1].split(PO):[]}function lg(o,a,u){a=ii(a,o);for(var f=-1,d=a.length,g=!1;++f<d;){var P=cr(a[f]);if(!(g=o!=null&&u(o,P)))break;o=o[P]}return g||++f!=d?g:(d=o==null?0:o.length,!!d&&Ls(d)&&Fr(P,d)&&(K(o)||Yi(o)))}function vC(o){var a=o.length,u=new o.constructor(a);return a&&typeof o[0]=="string"&&ce.call(o,"index")&&(u.index=o.index,u.input=o.input),u}function fg(o){return typeof o.constructor=="function"&&!ca(o)?On(os(o)):{}}function mC(o,a,u){var f=o.constructor;switch(a){case Ko:return Dh(o);case Go:case Bo:return new f(+o);case vn:return ZT(o,u);case Wf:case Uf:case Gf:case Bf:case Hf:case $f:case Yf:case Qf:case Kf:return $y(o,u);case Bt:return new f;case Ho:case Yo:return new f(o);case $o:return eC(o);case Ht:return new f;case Ha:return tC(o)}}function yC(o,a){var u=a.length;if(!u)return o;var f=u-1;return a[f]=(u>1?"& ":"")+a[f],a=a.join(u>2?", ":" "),o.replace(bO,`{
/* [wrapped with `+a+`] */
`)}function gC(o){return K(o)||Yi(o)||!!(my&&o&&o[my])}function Fr(o,a){var u=typeof o;return a=a??Qr,!!a&&(u=="number"||u!="symbol"&&MO.test(o))&&o>-1&&o%1==0&&o<a}function st(o,a,u){if(!we(u))return!1;var f=typeof a;return(f=="number"?mt(u)&&Fr(a,u.length):f=="string"&&a in u)?Qt(u[a],o):!1}function Gh(o,a){if(K(o))return!1;var u=typeof o;return u=="number"||u=="symbol"||u=="boolean"||o==null||Et(o)?!0:vO.test(o)||!dO.test(o)||a!=null&&o in de(a)}function bC(o){var a=typeof o;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?o!=="__proto__":o===null}function Bh(o){var a=Ss(o),u=y[a];if(typeof u!="function"||!(a in re.prototype))return!1;if(o===u)return!0;var f=Vh(u);return!!f&&o===f[0]}function _C(o){return!!hy&&hy in o}var PC=es?Dr:up;function ca(o){var a=o&&o.constructor,u=typeof a=="function"&&a.prototype||_n;return o===u}function hg(o){return o===o&&!we(o)}function pg(o,a){return function(u){return u==null?!1:u[o]===a&&(a!==t||o in de(u))}}function wC(o){var a=Ms(o,function(f){return u.size===p&&u.clear(),f}),u=a.cache;return a}function OC(o,a){var u=o[1],f=a[1],d=u|f,g=d<(L|D|dt),P=f==dt&&u==Y||f==dt&&u==Uo&&o[7].length<=a[8]||f==(dt|Uo)&&a[7].length<=a[8]&&u==Y;if(!(g||P))return o;f&L&&(o[2]=a[2],d|=u&L?0:N);var S=a[3];if(S){var A=o[3];o[3]=A?Qy(A,S,a[4]):S,o[4]=A?Jr(o[3],v):a[4]}return S=a[5],S&&(A=o[5],o[5]=A?Ky(A,S,a[6]):S,o[6]=A?Jr(o[5],v):a[6]),S=a[7],S&&(o[7]=S),f&dt&&(o[8]=o[8]==null?a[8]:et(o[8],a[8])),o[9]==null&&(o[9]=a[9]),o[0]=a[0],o[1]=d,o}function SC(o){var a=[];if(o!=null)for(var u in de(o))a.push(u);return a}function TC(o){return rs.call(o)}function dg(o,a,u){return a=ke(a===t?o.length-1:a,0),function(){for(var f=arguments,d=-1,g=ke(f.length-a,0),P=q(g);++d<g;)P[d]=f[a+d];d=-1;for(var S=q(a+1);++d<a;)S[d]=f[d];return S[a]=u(P),Tt(o,this,S)}}function vg(o,a){return a.length<2?o:Bi(o,Nt(a,0,-1))}function CC(o,a){for(var u=o.length,f=et(a.length,u),d=vt(o);f--;){var g=a[f];o[f]=Fr(g,u)?d[g]:t}return o}function Hh(o,a){if(!(a==="constructor"&&typeof o[a]=="function")&&a!="__proto__")return o[a]}var mg=gg(zy),la=VS||function(o,a){return Ve.setTimeout(o,a)},$h=gg(QT);function yg(o,a,u){var f=a+"";return $h(o,yC(f,AC(dC(f),u)))}function gg(o){var a=0,u=0;return function(){var f=BS(),d=Yw-(f-u);if(u=f,d>0){if(++a>=$w)return arguments[0]}else a=0;return o.apply(t,arguments)}}function Cs(o,a){var u=-1,f=o.length,d=f-1;for(a=a===t?f:a;++u<a;){var g=qh(u,d),P=o[g];o[g]=o[u],o[u]=P}return o.length=a,o}var bg=wC(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(mO,function(u,f,d,g){a.push(d?g.replace(SO,"$1"):f||u)}),a});function cr(o){if(typeof o=="string"||Et(o))return o;var a=o+"";return a=="0"&&1/o==-zi?"-0":a}function $i(o){if(o!=null){try{return ts.call(o)}catch{}try{return o+""}catch{}}return""}function AC(o,a){return Dt(eO,function(u){var f="_."+u[0];a&u[1]&&!Ka(o,f)&&o.push(f)}),o.sort()}function _g(o){if(o instanceof re)return o.clone();var a=new Rt(o.__wrapped__,o.__chain__);return a.__actions__=vt(o.__actions__),a.__index__=o.__index__,a.__values__=o.__values__,a}function EC(o,a,u){(u?st(o,a,u):a===t)?a=1:a=ke(J(a),0);var f=o==null?0:o.length;if(!f||a<1)return[];for(var d=0,g=0,P=q(us(f/a));d<f;)P[g++]=Nt(o,d,d+=a);return P}function qC(o){for(var a=-1,u=o==null?0:o.length,f=0,d=[];++a<u;){var g=o[a];g&&(d[f++]=g)}return d}function MC(){var o=arguments.length;if(!o)return[];for(var a=q(o-1),u=arguments[0],f=o;f--;)a[f-1]=arguments[f];return Xr(K(u)?vt(u):[u],Ye(a,1))}var xC=ee(function(o,a){return Ae(o)?na(o,Ye(a,1,Ae,!0)):[]}),LC=ee(function(o,a){var u=Vt(a);return Ae(u)&&(u=t),Ae(o)?na(o,Ye(a,1,Ae,!0),B(u,2)):[]}),jC=ee(function(o,a){var u=Vt(a);return Ae(u)&&(u=t),Ae(o)?na(o,Ye(a,1,Ae,!0),t,u):[]});function IC(o,a,u){var f=o==null?0:o.length;return f?(a=u||a===t?1:J(a),Nt(o,a<0?0:a,f)):[]}function FC(o,a,u){var f=o==null?0:o.length;return f?(a=u||a===t?1:J(a),a=f-a,Nt(o,0,a<0?0:a)):[]}function DC(o,a){return o&&o.length?gs(o,B(a,3),!0,!0):[]}function kC(o,a){return o&&o.length?gs(o,B(a,3),!0):[]}function RC(o,a,u,f){var d=o==null?0:o.length;return d?(u&&typeof u!="number"&&st(o,a,u)&&(u=0,f=d),MT(o,a,u,f)):[]}function Pg(o,a,u){var f=o==null?0:o.length;if(!f)return-1;var d=u==null?0:J(u);return d<0&&(d=ke(f+d,0)),Xa(o,B(a,3),d)}function wg(o,a,u){var f=o==null?0:o.length;if(!f)return-1;var d=f-1;return u!==t&&(d=J(u),d=u<0?ke(f+d,0):et(d,f-1)),Xa(o,B(a,3),d,!0)}function Og(o){var a=o==null?0:o.length;return a?Ye(o,1):[]}function zC(o){var a=o==null?0:o.length;return a?Ye(o,zi):[]}function NC(o,a){var u=o==null?0:o.length;return u?(a=a===t?1:J(a),Ye(o,a)):[]}function VC(o){for(var a=-1,u=o==null?0:o.length,f={};++a<u;){var d=o[a];f[d[0]]=d[1]}return f}function Sg(o){return o&&o.length?o[0]:t}function WC(o,a,u){var f=o==null?0:o.length;if(!f)return-1;var d=u==null?0:J(u);return d<0&&(d=ke(f+d,0)),yn(o,a,d)}function UC(o){var a=o==null?0:o.length;return a?Nt(o,0,-1):[]}var GC=ee(function(o){var a=ge(o,Ih);return a.length&&a[0]===o[0]?Sh(a):[]}),BC=ee(function(o){var a=Vt(o),u=ge(o,Ih);return a===Vt(u)?a=t:u.pop(),u.length&&u[0]===o[0]?Sh(u,B(a,2)):[]}),HC=ee(function(o){var a=Vt(o),u=ge(o,Ih);return a=typeof a=="function"?a:t,a&&u.pop(),u.length&&u[0]===o[0]?Sh(u,t,a):[]});function $C(o,a){return o==null?"":US.call(o,a)}function Vt(o){var a=o==null?0:o.length;return a?o[a-1]:t}function YC(o,a,u){var f=o==null?0:o.length;if(!f)return-1;var d=f;return u!==t&&(d=J(u),d=d<0?ke(f+d,0):et(d,f-1)),a===a?AS(o,a,d):Xa(o,ny,d,!0)}function QC(o,a){return o&&o.length?Fy(o,J(a)):t}var KC=ee(Tg);function Tg(o,a){return o&&o.length&&a&&a.length?Eh(o,a):o}function XC(o,a,u){return o&&o.length&&a&&a.length?Eh(o,a,B(u,2)):o}function JC(o,a,u){return o&&o.length&&a&&a.length?Eh(o,a,t,u):o}var ZC=Ir(function(o,a){var u=o==null?0:o.length,f=_h(o,a);return Ry(o,ge(a,function(d){return Fr(d,u)?+d:d}).sort(Yy)),f});function eA(o,a){var u=[];if(!(o&&o.length))return u;var f=-1,d=[],g=o.length;for(a=B(a,3);++f<g;){var P=o[f];a(P,f,o)&&(u.push(P),d.push(f))}return Ry(o,d),u}function Yh(o){return o==null?o:$S.call(o)}function tA(o,a,u){var f=o==null?0:o.length;return f?(u&&typeof u!="number"&&st(o,a,u)?(a=0,u=f):(a=a==null?0:J(a),u=u===t?f:J(u)),Nt(o,a,u)):[]}function rA(o,a){return ys(o,a)}function iA(o,a,u){return xh(o,a,B(u,2))}function nA(o,a){var u=o==null?0:o.length;if(u){var f=ys(o,a);if(f<u&&Qt(o[f],a))return f}return-1}function oA(o,a){return ys(o,a,!0)}function aA(o,a,u){return xh(o,a,B(u,2),!0)}function sA(o,a){var u=o==null?0:o.length;if(u){var f=ys(o,a,!0)-1;if(Qt(o[f],a))return f}return-1}function uA(o){return o&&o.length?Ny(o):[]}function cA(o,a){return o&&o.length?Ny(o,B(a,2)):[]}function lA(o){var a=o==null?0:o.length;return a?Nt(o,1,a):[]}function fA(o,a,u){return o&&o.length?(a=u||a===t?1:J(a),Nt(o,0,a<0?0:a)):[]}function hA(o,a,u){var f=o==null?0:o.length;return f?(a=u||a===t?1:J(a),a=f-a,Nt(o,a<0?0:a,f)):[]}function pA(o,a){return o&&o.length?gs(o,B(a,3),!1,!0):[]}function dA(o,a){return o&&o.length?gs(o,B(a,3)):[]}var vA=ee(function(o){return ri(Ye(o,1,Ae,!0))}),mA=ee(function(o){var a=Vt(o);return Ae(a)&&(a=t),ri(Ye(o,1,Ae,!0),B(a,2))}),yA=ee(function(o){var a=Vt(o);return a=typeof a=="function"?a:t,ri(Ye(o,1,Ae,!0),t,a)});function gA(o){return o&&o.length?ri(o):[]}function bA(o,a){return o&&o.length?ri(o,B(a,2)):[]}function _A(o,a){return a=typeof a=="function"?a:t,o&&o.length?ri(o,t,a):[]}function Qh(o){if(!(o&&o.length))return[];var a=0;return o=Kr(o,function(u){if(Ae(u))return a=ke(u.length,a),!0}),hh(a,function(u){return ge(o,ch(u))})}function Cg(o,a){if(!(o&&o.length))return[];var u=Qh(o);return a==null?u:ge(u,function(f){return Tt(a,t,f)})}var PA=ee(function(o,a){return Ae(o)?na(o,a):[]}),wA=ee(function(o){return jh(Kr(o,Ae))}),OA=ee(function(o){var a=Vt(o);return Ae(a)&&(a=t),jh(Kr(o,Ae),B(a,2))}),SA=ee(function(o){var a=Vt(o);return a=typeof a=="function"?a:t,jh(Kr(o,Ae),t,a)}),TA=ee(Qh);function CA(o,a){return Gy(o||[],a||[],ia)}function AA(o,a){return Gy(o||[],a||[],sa)}var EA=ee(function(o){var a=o.length,u=a>1?o[a-1]:t;return u=typeof u=="function"?(o.pop(),u):t,Cg(o,u)});function Ag(o){var a=y(o);return a.__chain__=!0,a}function qA(o,a){return a(o),o}function As(o,a){return a(o)}var MA=Ir(function(o){var a=o.length,u=a?o[0]:0,f=this.__wrapped__,d=function(g){return _h(g,o)};return a>1||this.__actions__.length||!(f instanceof re)||!Fr(u)?this.thru(d):(f=f.slice(u,+u+(a?1:0)),f.__actions__.push({func:As,args:[d],thisArg:t}),new Rt(f,this.__chain__).thru(function(g){return a&&!g.length&&g.push(t),g}))});function xA(){return Ag(this)}function LA(){return new Rt(this.value(),this.__chain__)}function jA(){this.__values__===t&&(this.__values__=Vg(this.value()));var o=this.__index__>=this.__values__.length,a=o?t:this.__values__[this.__index__++];return{done:o,value:a}}function IA(){return this}function FA(o){for(var a,u=this;u instanceof hs;){var f=_g(u);f.__index__=0,f.__values__=t,a?d.__wrapped__=f:a=f;var d=f;u=u.__wrapped__}return d.__wrapped__=o,a}function DA(){var o=this.__wrapped__;if(o instanceof re){var a=o;return this.__actions__.length&&(a=new re(this)),a=a.reverse(),a.__actions__.push({func:As,args:[Yh],thisArg:t}),new Rt(a,this.__chain__)}return this.thru(Yh)}function kA(){return Uy(this.__wrapped__,this.__actions__)}var RA=bs(function(o,a,u){ce.call(o,u)?++o[u]:Lr(o,u,1)});function zA(o,a,u){var f=K(o)?ry:qT;return u&&st(o,a,u)&&(a=t),f(o,B(a,3))}function NA(o,a){var u=K(o)?Kr:Cy;return u(o,B(a,3))}var VA=eg(Pg),WA=eg(wg);function UA(o,a){return Ye(Es(o,a),1)}function GA(o,a){return Ye(Es(o,a),zi)}function BA(o,a,u){return u=u===t?1:J(u),Ye(Es(o,a),u)}function Eg(o,a){var u=K(o)?Dt:ti;return u(o,B(a,3))}function qg(o,a){var u=K(o)?lS:Ty;return u(o,B(a,3))}var HA=bs(function(o,a,u){ce.call(o,u)?o[u].push(a):Lr(o,u,[a])});function $A(o,a,u,f){o=mt(o)?o:En(o),u=u&&!f?J(u):0;var d=o.length;return u<0&&(u=ke(d+u,0)),js(o)?u<=d&&o.indexOf(a,u)>-1:!!d&&yn(o,a,u)>-1}var YA=ee(function(o,a,u){var f=-1,d=typeof a=="function",g=mt(o)?q(o.length):[];return ti(o,function(P){g[++f]=d?Tt(a,P,u):oa(P,a,u)}),g}),QA=bs(function(o,a,u){Lr(o,u,a)});function Es(o,a){var u=K(o)?ge:Ly;return u(o,B(a,3))}function KA(o,a,u,f){return o==null?[]:(K(a)||(a=a==null?[]:[a]),u=f?t:u,K(u)||(u=u==null?[]:[u]),Dy(o,a,u))}var XA=bs(function(o,a,u){o[u?0:1].push(a)},function(){return[[],[]]});function JA(o,a,u){var f=K(o)?sh:ay,d=arguments.length<3;return f(o,B(a,4),u,d,ti)}function ZA(o,a,u){var f=K(o)?fS:ay,d=arguments.length<3;return f(o,B(a,4),u,d,Ty)}function eE(o,a){var u=K(o)?Kr:Cy;return u(o,xs(B(a,3)))}function tE(o){var a=K(o)?Py:$T;return a(o)}function rE(o,a,u){(u?st(o,a,u):a===t)?a=1:a=J(a);var f=K(o)?ST:YT;return f(o,a)}function iE(o){var a=K(o)?TT:KT;return a(o)}function nE(o){if(o==null)return 0;if(mt(o))return js(o)?bn(o):o.length;var a=tt(o);return a==Bt||a==Ht?o.size:Ch(o).length}function oE(o,a,u){var f=K(o)?uh:XT;return u&&st(o,a,u)&&(a=t),f(o,B(a,3))}var aE=ee(function(o,a){if(o==null)return[];var u=a.length;return u>1&&st(o,a[0],a[1])?a=[]:u>2&&st(a[0],a[1],a[2])&&(a=[a[0]]),Dy(o,Ye(a,1),[])}),qs=NS||function(){return Ve.Date.now()};function sE(o,a){if(typeof a!="function")throw new kt(c);return o=J(o),function(){if(--o<1)return a.apply(this,arguments)}}function Mg(o,a,u){return a=u?t:a,a=o&&a==null?o.length:a,jr(o,dt,t,t,t,t,a)}function xg(o,a){var u;if(typeof a!="function")throw new kt(c);return o=J(o),function(){return--o>0&&(u=a.apply(this,arguments)),o<=1&&(a=t),u}}var Kh=ee(function(o,a,u){var f=L;if(u.length){var d=Jr(u,Cn(Kh));f|=pe}return jr(o,f,a,u,d)}),Lg=ee(function(o,a,u){var f=L|D;if(u.length){var d=Jr(u,Cn(Lg));f|=pe}return jr(a,f,o,u,d)});function jg(o,a,u){a=u?t:a;var f=jr(o,Y,t,t,t,t,t,a);return f.placeholder=jg.placeholder,f}function Ig(o,a,u){a=u?t:a;var f=jr(o,ie,t,t,t,t,t,a);return f.placeholder=Ig.placeholder,f}function Fg(o,a,u){var f,d,g,P,S,A,j=0,I=!1,F=!1,R=!0;if(typeof o!="function")throw new kt(c);a=Wt(a)||0,we(u)&&(I=!!u.leading,F="maxWait"in u,g=F?ke(Wt(u.maxWait)||0,a):g,R="trailing"in u?!!u.trailing:R);function W(Ee){var Kt=f,Rr=d;return f=d=t,j=Ee,P=o.apply(Rr,Kt),P}function H(Ee){return j=Ee,S=la(te,a),I?W(Ee):P}function Z(Ee){var Kt=Ee-A,Rr=Ee-j,eb=a-Kt;return F?et(eb,g-Rr):eb}function $(Ee){var Kt=Ee-A,Rr=Ee-j;return A===t||Kt>=a||Kt<0||F&&Rr>=g}function te(){var Ee=qs();if($(Ee))return ne(Ee);S=la(te,Z(Ee))}function ne(Ee){return S=t,R&&f?W(Ee):(f=d=t,P)}function qt(){S!==t&&By(S),j=0,f=A=d=S=t}function ut(){return S===t?P:ne(qs())}function Mt(){var Ee=qs(),Kt=$(Ee);if(f=arguments,d=this,A=Ee,Kt){if(S===t)return H(A);if(F)return By(S),S=la(te,a),W(A)}return S===t&&(S=la(te,a)),P}return Mt.cancel=qt,Mt.flush=ut,Mt}var uE=ee(function(o,a){return Sy(o,1,a)}),cE=ee(function(o,a,u){return Sy(o,Wt(a)||0,u)});function lE(o){return jr(o,Vf)}function Ms(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new kt(c);var u=function(){var f=arguments,d=a?a.apply(this,f):f[0],g=u.cache;if(g.has(d))return g.get(d);var P=o.apply(this,f);return u.cache=g.set(d,P)||g,P};return u.cache=new(Ms.Cache||xr),u}Ms.Cache=xr;function xs(o){if(typeof o!="function")throw new kt(c);return function(){var a=arguments;switch(a.length){case 0:return!o.call(this);case 1:return!o.call(this,a[0]);case 2:return!o.call(this,a[0],a[1]);case 3:return!o.call(this,a[0],a[1],a[2])}return!o.apply(this,a)}}function fE(o){return xg(2,o)}var hE=JT(function(o,a){a=a.length==1&&K(a[0])?ge(a[0],Ct(B())):ge(Ye(a,1),Ct(B()));var u=a.length;return ee(function(f){for(var d=-1,g=et(f.length,u);++d<g;)f[d]=a[d].call(this,f[d]);return Tt(o,this,f)})}),Xh=ee(function(o,a){var u=Jr(a,Cn(Xh));return jr(o,pe,t,a,u)}),Dg=ee(function(o,a){var u=Jr(a,Cn(Dg));return jr(o,Fe,t,a,u)}),pE=Ir(function(o,a){return jr(o,Uo,t,t,t,a)});function dE(o,a){if(typeof o!="function")throw new kt(c);return a=a===t?a:J(a),ee(o,a)}function vE(o,a){if(typeof o!="function")throw new kt(c);return a=a==null?0:ke(J(a),0),ee(function(u){var f=u[a],d=ni(u,0,a);return f&&Xr(d,f),Tt(o,this,d)})}function mE(o,a,u){var f=!0,d=!0;if(typeof o!="function")throw new kt(c);return we(u)&&(f="leading"in u?!!u.leading:f,d="trailing"in u?!!u.trailing:d),Fg(o,a,{leading:f,maxWait:a,trailing:d})}function yE(o){return Mg(o,1)}function gE(o,a){return Xh(Fh(a),o)}function bE(){if(!arguments.length)return[];var o=arguments[0];return K(o)?o:[o]}function _E(o){return zt(o,T)}function PE(o,a){return a=typeof a=="function"?a:t,zt(o,T,a)}function wE(o){return zt(o,b|T)}function OE(o,a){return a=typeof a=="function"?a:t,zt(o,b|T,a)}function SE(o,a){return a==null||Oy(o,a,We(a))}function Qt(o,a){return o===a||o!==o&&a!==a}var TE=Os(Oh),CE=Os(function(o,a){return o>=a}),Yi=qy(function(){return arguments}())?qy:function(o){return Te(o)&&ce.call(o,"callee")&&!vy.call(o,"callee")},K=q.isArray,AE=Km?Ct(Km):FT;function mt(o){return o!=null&&Ls(o.length)&&!Dr(o)}function Ae(o){return Te(o)&&mt(o)}function EE(o){return o===!0||o===!1||Te(o)&&at(o)==Go}var oi=WS||up,qE=Xm?Ct(Xm):DT;function ME(o){return Te(o)&&o.nodeType===1&&!fa(o)}function xE(o){if(o==null)return!0;if(mt(o)&&(K(o)||typeof o=="string"||typeof o.splice=="function"||oi(o)||An(o)||Yi(o)))return!o.length;var a=tt(o);if(a==Bt||a==Ht)return!o.size;if(ca(o))return!Ch(o).length;for(var u in o)if(ce.call(o,u))return!1;return!0}function LE(o,a){return aa(o,a)}function jE(o,a,u){u=typeof u=="function"?u:t;var f=u?u(o,a):t;return f===t?aa(o,a,t,u):!!f}function Jh(o){if(!Te(o))return!1;var a=at(o);return a==Ga||a==rO||typeof o.message=="string"&&typeof o.name=="string"&&!fa(o)}function IE(o){return typeof o=="number"&&yy(o)}function Dr(o){if(!we(o))return!1;var a=at(o);return a==Ba||a==Sm||a==tO||a==nO}function kg(o){return typeof o=="number"&&o==J(o)}function Ls(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Qr}function we(o){var a=typeof o;return o!=null&&(a=="object"||a=="function")}function Te(o){return o!=null&&typeof o=="object"}var Rg=Jm?Ct(Jm):RT;function FE(o,a){return o===a||Th(o,a,Wh(a))}function DE(o,a,u){return u=typeof u=="function"?u:t,Th(o,a,Wh(a),u)}function kE(o){return zg(o)&&o!=+o}function RE(o){if(PC(o))throw new Q(s);return My(o)}function zE(o){return o===null}function NE(o){return o==null}function zg(o){return typeof o=="number"||Te(o)&&at(o)==Ho}function fa(o){if(!Te(o)||at(o)!=qr)return!1;var a=os(o);if(a===null)return!0;var u=ce.call(a,"constructor")&&a.constructor;return typeof u=="function"&&u instanceof u&&ts.call(u)==DS}var Zh=Zm?Ct(Zm):zT;function VE(o){return kg(o)&&o>=-Qr&&o<=Qr}var Ng=ey?Ct(ey):NT;function js(o){return typeof o=="string"||!K(o)&&Te(o)&&at(o)==Yo}function Et(o){return typeof o=="symbol"||Te(o)&&at(o)==Ha}var An=ty?Ct(ty):VT;function WE(o){return o===t}function UE(o){return Te(o)&&tt(o)==Qo}function GE(o){return Te(o)&&at(o)==aO}var BE=Os(Ah),HE=Os(function(o,a){return o<=a});function Vg(o){if(!o)return[];if(mt(o))return js(o)?$t(o):vt(o);if(Jo&&o[Jo])return SS(o[Jo]());var a=tt(o),u=a==Bt?dh:a==Ht?Ja:En;return u(o)}function kr(o){if(!o)return o===0?o:0;if(o=Wt(o),o===zi||o===-zi){var a=o<0?-1:1;return a*Xw}return o===o?o:0}function J(o){var a=kr(o),u=a%1;return a===a?u?a-u:a:0}function Wg(o){return o?Gi(J(o),0,ar):0}function Wt(o){if(typeof o=="number")return o;if(Et(o))return Wa;if(we(o)){var a=typeof o.valueOf=="function"?o.valueOf():o;o=we(a)?a+"":a}if(typeof o!="string")return o===0?o:+o;o=sy(o);var u=AO.test(o);return u||qO.test(o)?sS(o.slice(2),u?2:8):CO.test(o)?Wa:+o}function Ug(o){return ur(o,yt(o))}function $E(o){return o?Gi(J(o),-Qr,Qr):o===0?o:0}function ue(o){return o==null?"":At(o)}var YE=Sn(function(o,a){if(ca(a)||mt(a)){ur(a,We(a),o);return}for(var u in a)ce.call(a,u)&&ia(o,u,a[u])}),Gg=Sn(function(o,a){ur(a,yt(a),o)}),Is=Sn(function(o,a,u,f){ur(a,yt(a),o,f)}),QE=Sn(function(o,a,u,f){ur(a,We(a),o,f)}),KE=Ir(_h);function XE(o,a){var u=On(o);return a==null?u:wy(u,a)}var JE=ee(function(o,a){o=de(o);var u=-1,f=a.length,d=f>2?a[2]:t;for(d&&st(a[0],a[1],d)&&(f=1);++u<f;)for(var g=a[u],P=yt(g),S=-1,A=P.length;++S<A;){var j=P[S],I=o[j];(I===t||Qt(I,_n[j])&&!ce.call(o,j))&&(o[j]=g[j])}return o}),ZE=ee(function(o){return o.push(t,sg),Tt(Bg,t,o)});function eq(o,a){return iy(o,B(a,3),sr)}function tq(o,a){return iy(o,B(a,3),wh)}function rq(o,a){return o==null?o:Ph(o,B(a,3),yt)}function iq(o,a){return o==null?o:Ay(o,B(a,3),yt)}function nq(o,a){return o&&sr(o,B(a,3))}function oq(o,a){return o&&wh(o,B(a,3))}function aq(o){return o==null?[]:vs(o,We(o))}function sq(o){return o==null?[]:vs(o,yt(o))}function ep(o,a,u){var f=o==null?t:Bi(o,a);return f===t?u:f}function uq(o,a){return o!=null&&lg(o,a,xT)}function tp(o,a){return o!=null&&lg(o,a,LT)}var cq=rg(function(o,a,u){a!=null&&typeof a.toString!="function"&&(a=rs.call(a)),o[a]=u},ip(gt)),lq=rg(function(o,a,u){a!=null&&typeof a.toString!="function"&&(a=rs.call(a)),ce.call(o,a)?o[a].push(u):o[a]=[u]},B),fq=ee(oa);function We(o){return mt(o)?_y(o):Ch(o)}function yt(o){return mt(o)?_y(o,!0):WT(o)}function hq(o,a){var u={};return a=B(a,3),sr(o,function(f,d,g){Lr(u,a(f,d,g),f)}),u}function pq(o,a){var u={};return a=B(a,3),sr(o,function(f,d,g){Lr(u,d,a(f,d,g))}),u}var dq=Sn(function(o,a,u){ms(o,a,u)}),Bg=Sn(function(o,a,u,f){ms(o,a,u,f)}),vq=Ir(function(o,a){var u={};if(o==null)return u;var f=!1;a=ge(a,function(g){return g=ii(g,o),f||(f=g.length>1),g}),ur(o,Nh(o),u),f&&(u=zt(u,b|w|T,cC));for(var d=a.length;d--;)Lh(u,a[d]);return u});function mq(o,a){return Hg(o,xs(B(a)))}var yq=Ir(function(o,a){return o==null?{}:GT(o,a)});function Hg(o,a){if(o==null)return{};var u=ge(Nh(o),function(f){return[f]});return a=B(a),ky(o,u,function(f,d){return a(f,d[0])})}function gq(o,a,u){a=ii(a,o);var f=-1,d=a.length;for(d||(d=1,o=t);++f<d;){var g=o==null?t:o[cr(a[f])];g===t&&(f=d,g=u),o=Dr(g)?g.call(o):g}return o}function bq(o,a,u){return o==null?o:sa(o,a,u)}function _q(o,a,u,f){return f=typeof f=="function"?f:t,o==null?o:sa(o,a,u,f)}var $g=og(We),Yg=og(yt);function Pq(o,a,u){var f=K(o),d=f||oi(o)||An(o);if(a=B(a,4),u==null){var g=o&&o.constructor;d?u=f?new g:[]:we(o)?u=Dr(g)?On(os(o)):{}:u={}}return(d?Dt:sr)(o,function(P,S,A){return a(u,P,S,A)}),u}function wq(o,a){return o==null?!0:Lh(o,a)}function Oq(o,a,u){return o==null?o:Wy(o,a,Fh(u))}function Sq(o,a,u,f){return f=typeof f=="function"?f:t,o==null?o:Wy(o,a,Fh(u),f)}function En(o){return o==null?[]:ph(o,We(o))}function Tq(o){return o==null?[]:ph(o,yt(o))}function Cq(o,a,u){return u===t&&(u=a,a=t),u!==t&&(u=Wt(u),u=u===u?u:0),a!==t&&(a=Wt(a),a=a===a?a:0),Gi(Wt(o),a,u)}function Aq(o,a,u){return a=kr(a),u===t?(u=a,a=0):u=kr(u),o=Wt(o),jT(o,a,u)}function Eq(o,a,u){if(u&&typeof u!="boolean"&&st(o,a,u)&&(a=u=t),u===t&&(typeof a=="boolean"?(u=a,a=t):typeof o=="boolean"&&(u=o,o=t)),o===t&&a===t?(o=0,a=1):(o=kr(o),a===t?(a=o,o=0):a=kr(a)),o>a){var f=o;o=a,a=f}if(u||o%1||a%1){var d=gy();return et(o+d*(a-o+aS("1e-"+((d+"").length-1))),a)}return qh(o,a)}var qq=Tn(function(o,a,u){return a=a.toLowerCase(),o+(u?Qg(a):a)});function Qg(o){return rp(ue(o).toLowerCase())}function Kg(o){return o=ue(o),o&&o.replace(xO,bS).replace(KO,"")}function Mq(o,a,u){o=ue(o),a=At(a);var f=o.length;u=u===t?f:Gi(J(u),0,f);var d=u;return u-=a.length,u>=0&&o.slice(u,d)==a}function xq(o){return o=ue(o),o&&fO.test(o)?o.replace(Am,_S):o}function Lq(o){return o=ue(o),o&&yO.test(o)?o.replace(Xf,"\\$&"):o}var jq=Tn(function(o,a,u){return o+(u?"-":"")+a.toLowerCase()}),Iq=Tn(function(o,a,u){return o+(u?" ":"")+a.toLowerCase()}),Fq=Zy("toLowerCase");function Dq(o,a,u){o=ue(o),a=J(a);var f=a?bn(o):0;if(!a||f>=a)return o;var d=(a-f)/2;return ws(cs(d),u)+o+ws(us(d),u)}function kq(o,a,u){o=ue(o),a=J(a);var f=a?bn(o):0;return a&&f<a?o+ws(a-f,u):o}function Rq(o,a,u){o=ue(o),a=J(a);var f=a?bn(o):0;return a&&f<a?ws(a-f,u)+o:o}function zq(o,a,u){return u||a==null?a=0:a&&(a=+a),HS(ue(o).replace(Jf,""),a||0)}function Nq(o,a,u){return(u?st(o,a,u):a===t)?a=1:a=J(a),Mh(ue(o),a)}function Vq(){var o=arguments,a=ue(o[0]);return o.length<3?a:a.replace(o[1],o[2])}var Wq=Tn(function(o,a,u){return o+(u?"_":"")+a.toLowerCase()});function Uq(o,a,u){return u&&typeof u!="number"&&st(o,a,u)&&(a=u=t),u=u===t?ar:u>>>0,u?(o=ue(o),o&&(typeof a=="string"||a!=null&&!Zh(a))&&(a=At(a),!a&&gn(o))?ni($t(o),0,u):o.split(a,u)):[]}var Gq=Tn(function(o,a,u){return o+(u?" ":"")+rp(a)});function Bq(o,a,u){return o=ue(o),u=u==null?0:Gi(J(u),0,o.length),a=At(a),o.slice(u,u+a.length)==a}function Hq(o,a,u){var f=y.templateSettings;u&&st(o,a,u)&&(a=t),o=ue(o),a=Is({},a,f,ag);var d=Is({},a.imports,f.imports,ag),g=We(d),P=ph(d,g),S,A,j=0,I=a.interpolate||$a,F="__p += '",R=vh((a.escape||$a).source+"|"+I.source+"|"+(I===Em?TO:$a).source+"|"+(a.evaluate||$a).source+"|$","g"),W="//# sourceURL="+(ce.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tS+"]")+`
`;o.replace(R,function($,te,ne,qt,ut,Mt){return ne||(ne=qt),F+=o.slice(j,Mt).replace(LO,PS),te&&(S=!0,F+=`' +
__e(`+te+`) +
'`),ut&&(A=!0,F+=`';
`+ut+`;
__p += '`),ne&&(F+=`' +
((__t = (`+ne+`)) == null ? '' : __t) +
'`),j=Mt+$.length,$}),F+=`';
`;var H=ce.call(a,"variable")&&a.variable;if(!H)F=`with (obj) {
`+F+`
}
`;else if(OO.test(H))throw new Q(l);F=(A?F.replace(sO,""):F).replace(uO,"$1").replace(cO,"$1;"),F="function("+(H||"obj")+`) {
`+(H?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(S?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var Z=Jg(function(){return se(g,W+"return "+F).apply(t,P)});if(Z.source=F,Jh(Z))throw Z;return Z}function $q(o){return ue(o).toLowerCase()}function Yq(o){return ue(o).toUpperCase()}function Qq(o,a,u){if(o=ue(o),o&&(u||a===t))return sy(o);if(!o||!(a=At(a)))return o;var f=$t(o),d=$t(a),g=uy(f,d),P=cy(f,d)+1;return ni(f,g,P).join("")}function Kq(o,a,u){if(o=ue(o),o&&(u||a===t))return o.slice(0,fy(o)+1);if(!o||!(a=At(a)))return o;var f=$t(o),d=cy(f,$t(a))+1;return ni(f,0,d).join("")}function Xq(o,a,u){if(o=ue(o),o&&(u||a===t))return o.replace(Jf,"");if(!o||!(a=At(a)))return o;var f=$t(o),d=uy(f,$t(a));return ni(f,d).join("")}function Jq(o,a){var u=Bw,f=Hw;if(we(a)){var d="separator"in a?a.separator:d;u="length"in a?J(a.length):u,f="omission"in a?At(a.omission):f}o=ue(o);var g=o.length;if(gn(o)){var P=$t(o);g=P.length}if(u>=g)return o;var S=u-bn(f);if(S<1)return f;var A=P?ni(P,0,S).join(""):o.slice(0,S);if(d===t)return A+f;if(P&&(S+=A.length-S),Zh(d)){if(o.slice(S).search(d)){var j,I=A;for(d.global||(d=vh(d.source,ue(qm.exec(d))+"g")),d.lastIndex=0;j=d.exec(I);)var F=j.index;A=A.slice(0,F===t?S:F)}}else if(o.indexOf(At(d),S)!=S){var R=A.lastIndexOf(d);R>-1&&(A=A.slice(0,R))}return A+f}function Zq(o){return o=ue(o),o&&lO.test(o)?o.replace(Cm,ES):o}var eM=Tn(function(o,a,u){return o+(u?" ":"")+a.toUpperCase()}),rp=Zy("toUpperCase");function Xg(o,a,u){return o=ue(o),a=u?t:a,a===t?OS(o)?xS(o):dS(o):o.match(a)||[]}var Jg=ee(function(o,a){try{return Tt(o,t,a)}catch(u){return Jh(u)?u:new Q(u)}}),tM=Ir(function(o,a){return Dt(a,function(u){u=cr(u),Lr(o,u,Kh(o[u],o))}),o});function rM(o){var a=o==null?0:o.length,u=B();return o=a?ge(o,function(f){if(typeof f[1]!="function")throw new kt(c);return[u(f[0]),f[1]]}):[],ee(function(f){for(var d=-1;++d<a;){var g=o[d];if(Tt(g[0],this,f))return Tt(g[1],this,f)}})}function iM(o){return ET(zt(o,b))}function ip(o){return function(){return o}}function nM(o,a){return o==null||o!==o?a:o}var oM=tg(),aM=tg(!0);function gt(o){return o}function np(o){return xy(typeof o=="function"?o:zt(o,b))}function sM(o){return jy(zt(o,b))}function uM(o,a){return Iy(o,zt(a,b))}var cM=ee(function(o,a){return function(u){return oa(u,o,a)}}),lM=ee(function(o,a){return function(u){return oa(o,u,a)}});function op(o,a,u){var f=We(a),d=vs(a,f);u==null&&!(we(a)&&(d.length||!f.length))&&(u=a,a=o,o=this,d=vs(a,We(a)));var g=!(we(u)&&"chain"in u)||!!u.chain,P=Dr(o);return Dt(d,function(S){var A=a[S];o[S]=A,P&&(o.prototype[S]=function(){var j=this.__chain__;if(g||j){var I=o(this.__wrapped__),F=I.__actions__=vt(this.__actions__);return F.push({func:A,args:arguments,thisArg:o}),I.__chain__=j,I}return A.apply(o,Xr([this.value()],arguments))})}),o}function fM(){return Ve._===this&&(Ve._=kS),this}function ap(){}function hM(o){return o=J(o),ee(function(a){return Fy(a,o)})}var pM=kh(ge),dM=kh(ry),vM=kh(uh);function Zg(o){return Gh(o)?ch(cr(o)):BT(o)}function mM(o){return function(a){return o==null?t:Bi(o,a)}}var yM=ig(),gM=ig(!0);function sp(){return[]}function up(){return!1}function bM(){return{}}function _M(){return""}function PM(){return!0}function wM(o,a){if(o=J(o),o<1||o>Qr)return[];var u=ar,f=et(o,ar);a=B(a),o-=ar;for(var d=hh(f,a);++u<o;)a(u);return d}function OM(o){return K(o)?ge(o,cr):Et(o)?[o]:vt(bg(ue(o)))}function SM(o){var a=++FS;return ue(o)+a}var TM=Ps(function(o,a){return o+a},0),CM=Rh("ceil"),AM=Ps(function(o,a){return o/a},1),EM=Rh("floor");function qM(o){return o&&o.length?ds(o,gt,Oh):t}function MM(o,a){return o&&o.length?ds(o,B(a,2),Oh):t}function xM(o){return oy(o,gt)}function LM(o,a){return oy(o,B(a,2))}function jM(o){return o&&o.length?ds(o,gt,Ah):t}function IM(o,a){return o&&o.length?ds(o,B(a,2),Ah):t}var FM=Ps(function(o,a){return o*a},1),DM=Rh("round"),kM=Ps(function(o,a){return o-a},0);function RM(o){return o&&o.length?fh(o,gt):0}function zM(o,a){return o&&o.length?fh(o,B(a,2)):0}return y.after=sE,y.ary=Mg,y.assign=YE,y.assignIn=Gg,y.assignInWith=Is,y.assignWith=QE,y.at=KE,y.before=xg,y.bind=Kh,y.bindAll=tM,y.bindKey=Lg,y.castArray=bE,y.chain=Ag,y.chunk=EC,y.compact=qC,y.concat=MC,y.cond=rM,y.conforms=iM,y.constant=ip,y.countBy=RA,y.create=XE,y.curry=jg,y.curryRight=Ig,y.debounce=Fg,y.defaults=JE,y.defaultsDeep=ZE,y.defer=uE,y.delay=cE,y.difference=xC,y.differenceBy=LC,y.differenceWith=jC,y.drop=IC,y.dropRight=FC,y.dropRightWhile=DC,y.dropWhile=kC,y.fill=RC,y.filter=NA,y.flatMap=UA,y.flatMapDeep=GA,y.flatMapDepth=BA,y.flatten=Og,y.flattenDeep=zC,y.flattenDepth=NC,y.flip=lE,y.flow=oM,y.flowRight=aM,y.fromPairs=VC,y.functions=aq,y.functionsIn=sq,y.groupBy=HA,y.initial=UC,y.intersection=GC,y.intersectionBy=BC,y.intersectionWith=HC,y.invert=cq,y.invertBy=lq,y.invokeMap=YA,y.iteratee=np,y.keyBy=QA,y.keys=We,y.keysIn=yt,y.map=Es,y.mapKeys=hq,y.mapValues=pq,y.matches=sM,y.matchesProperty=uM,y.memoize=Ms,y.merge=dq,y.mergeWith=Bg,y.method=cM,y.methodOf=lM,y.mixin=op,y.negate=xs,y.nthArg=hM,y.omit=vq,y.omitBy=mq,y.once=fE,y.orderBy=KA,y.over=pM,y.overArgs=hE,y.overEvery=dM,y.overSome=vM,y.partial=Xh,y.partialRight=Dg,y.partition=XA,y.pick=yq,y.pickBy=Hg,y.property=Zg,y.propertyOf=mM,y.pull=KC,y.pullAll=Tg,y.pullAllBy=XC,y.pullAllWith=JC,y.pullAt=ZC,y.range=yM,y.rangeRight=gM,y.rearg=pE,y.reject=eE,y.remove=eA,y.rest=dE,y.reverse=Yh,y.sampleSize=rE,y.set=bq,y.setWith=_q,y.shuffle=iE,y.slice=tA,y.sortBy=aE,y.sortedUniq=uA,y.sortedUniqBy=cA,y.split=Uq,y.spread=vE,y.tail=lA,y.take=fA,y.takeRight=hA,y.takeRightWhile=pA,y.takeWhile=dA,y.tap=qA,y.throttle=mE,y.thru=As,y.toArray=Vg,y.toPairs=$g,y.toPairsIn=Yg,y.toPath=OM,y.toPlainObject=Ug,y.transform=Pq,y.unary=yE,y.union=vA,y.unionBy=mA,y.unionWith=yA,y.uniq=gA,y.uniqBy=bA,y.uniqWith=_A,y.unset=wq,y.unzip=Qh,y.unzipWith=Cg,y.update=Oq,y.updateWith=Sq,y.values=En,y.valuesIn=Tq,y.without=PA,y.words=Xg,y.wrap=gE,y.xor=wA,y.xorBy=OA,y.xorWith=SA,y.zip=TA,y.zipObject=CA,y.zipObjectDeep=AA,y.zipWith=EA,y.entries=$g,y.entriesIn=Yg,y.extend=Gg,y.extendWith=Is,op(y,y),y.add=TM,y.attempt=Jg,y.camelCase=qq,y.capitalize=Qg,y.ceil=CM,y.clamp=Cq,y.clone=_E,y.cloneDeep=wE,y.cloneDeepWith=OE,y.cloneWith=PE,y.conformsTo=SE,y.deburr=Kg,y.defaultTo=nM,y.divide=AM,y.endsWith=Mq,y.eq=Qt,y.escape=xq,y.escapeRegExp=Lq,y.every=zA,y.find=VA,y.findIndex=Pg,y.findKey=eq,y.findLast=WA,y.findLastIndex=wg,y.findLastKey=tq,y.floor=EM,y.forEach=Eg,y.forEachRight=qg,y.forIn=rq,y.forInRight=iq,y.forOwn=nq,y.forOwnRight=oq,y.get=ep,y.gt=TE,y.gte=CE,y.has=uq,y.hasIn=tp,y.head=Sg,y.identity=gt,y.includes=$A,y.indexOf=WC,y.inRange=Aq,y.invoke=fq,y.isArguments=Yi,y.isArray=K,y.isArrayBuffer=AE,y.isArrayLike=mt,y.isArrayLikeObject=Ae,y.isBoolean=EE,y.isBuffer=oi,y.isDate=qE,y.isElement=ME,y.isEmpty=xE,y.isEqual=LE,y.isEqualWith=jE,y.isError=Jh,y.isFinite=IE,y.isFunction=Dr,y.isInteger=kg,y.isLength=Ls,y.isMap=Rg,y.isMatch=FE,y.isMatchWith=DE,y.isNaN=kE,y.isNative=RE,y.isNil=NE,y.isNull=zE,y.isNumber=zg,y.isObject=we,y.isObjectLike=Te,y.isPlainObject=fa,y.isRegExp=Zh,y.isSafeInteger=VE,y.isSet=Ng,y.isString=js,y.isSymbol=Et,y.isTypedArray=An,y.isUndefined=WE,y.isWeakMap=UE,y.isWeakSet=GE,y.join=$C,y.kebabCase=jq,y.last=Vt,y.lastIndexOf=YC,y.lowerCase=Iq,y.lowerFirst=Fq,y.lt=BE,y.lte=HE,y.max=qM,y.maxBy=MM,y.mean=xM,y.meanBy=LM,y.min=jM,y.minBy=IM,y.stubArray=sp,y.stubFalse=up,y.stubObject=bM,y.stubString=_M,y.stubTrue=PM,y.multiply=FM,y.nth=QC,y.noConflict=fM,y.noop=ap,y.now=qs,y.pad=Dq,y.padEnd=kq,y.padStart=Rq,y.parseInt=zq,y.random=Eq,y.reduce=JA,y.reduceRight=ZA,y.repeat=Nq,y.replace=Vq,y.result=gq,y.round=DM,y.runInContext=C,y.sample=tE,y.size=nE,y.snakeCase=Wq,y.some=oE,y.sortedIndex=rA,y.sortedIndexBy=iA,y.sortedIndexOf=nA,y.sortedLastIndex=oA,y.sortedLastIndexBy=aA,y.sortedLastIndexOf=sA,y.startCase=Gq,y.startsWith=Bq,y.subtract=kM,y.sum=RM,y.sumBy=zM,y.template=Hq,y.times=wM,y.toFinite=kr,y.toInteger=J,y.toLength=Wg,y.toLower=$q,y.toNumber=Wt,y.toSafeInteger=$E,y.toString=ue,y.toUpper=Yq,y.trim=Qq,y.trimEnd=Kq,y.trimStart=Xq,y.truncate=Jq,y.unescape=Zq,y.uniqueId=SM,y.upperCase=eM,y.upperFirst=rp,y.each=Eg,y.eachRight=qg,y.first=Sg,op(y,function(){var o={};return sr(y,function(a,u){ce.call(y.prototype,u)||(o[u]=a)}),o}(),{chain:!1}),y.VERSION=i,Dt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){y[o].placeholder=y}),Dt(["drop","take"],function(o,a){re.prototype[o]=function(u){u=u===t?1:ke(J(u),0);var f=this.__filtered__&&!a?new re(this):this.clone();return f.__filtered__?f.__takeCount__=et(u,f.__takeCount__):f.__views__.push({size:et(u,ar),type:o+(f.__dir__<0?"Right":"")}),f},re.prototype[o+"Right"]=function(u){return this.reverse()[o](u).reverse()}}),Dt(["filter","map","takeWhile"],function(o,a){var u=a+1,f=u==Om||u==Kw;re.prototype[o]=function(d){var g=this.clone();return g.__iteratees__.push({iteratee:B(d,3),type:u}),g.__filtered__=g.__filtered__||f,g}}),Dt(["head","last"],function(o,a){var u="take"+(a?"Right":"");re.prototype[o]=function(){return this[u](1).value()[0]}}),Dt(["initial","tail"],function(o,a){var u="drop"+(a?"":"Right");re.prototype[o]=function(){return this.__filtered__?new re(this):this[u](1)}}),re.prototype.compact=function(){return this.filter(gt)},re.prototype.find=function(o){return this.filter(o).head()},re.prototype.findLast=function(o){return this.reverse().find(o)},re.prototype.invokeMap=ee(function(o,a){return typeof o=="function"?new re(this):this.map(function(u){return oa(u,o,a)})}),re.prototype.reject=function(o){return this.filter(xs(B(o)))},re.prototype.slice=function(o,a){o=J(o);var u=this;return u.__filtered__&&(o>0||a<0)?new re(u):(o<0?u=u.takeRight(-o):o&&(u=u.drop(o)),a!==t&&(a=J(a),u=a<0?u.dropRight(-a):u.take(a-o)),u)},re.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},re.prototype.toArray=function(){return this.take(ar)},sr(re.prototype,function(o,a){var u=/^(?:filter|find|map|reject)|While$/.test(a),f=/^(?:head|last)$/.test(a),d=y[f?"take"+(a=="last"?"Right":""):a],g=f||/^find/.test(a);d&&(y.prototype[a]=function(){var P=this.__wrapped__,S=f?[1]:arguments,A=P instanceof re,j=S[0],I=A||K(P),F=function(te){var ne=d.apply(y,Xr([te],S));return f&&R?ne[0]:ne};I&&u&&typeof j=="function"&&j.length!=1&&(A=I=!1);var R=this.__chain__,W=!!this.__actions__.length,H=g&&!R,Z=A&&!W;if(!g&&I){P=Z?P:new re(this);var $=o.apply(P,S);return $.__actions__.push({func:As,args:[F],thisArg:t}),new Rt($,R)}return H&&Z?o.apply(this,S):($=this.thru(F),H?f?$.value()[0]:$.value():$)})}),Dt(["pop","push","shift","sort","splice","unshift"],function(o){var a=Za[o],u=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",f=/^(?:pop|shift)$/.test(o);y.prototype[o]=function(){var d=arguments;if(f&&!this.__chain__){var g=this.value();return a.apply(K(g)?g:[],d)}return this[u](function(P){return a.apply(K(P)?P:[],d)})}}),sr(re.prototype,function(o,a){var u=y[a];if(u){var f=u.name+"";ce.call(wn,f)||(wn[f]=[]),wn[f].push({name:a,func:u})}}),wn[_s(t,D).name]=[{name:"wrapper",func:t}],re.prototype.clone=ZS,re.prototype.reverse=eT,re.prototype.value=tT,y.prototype.at=MA,y.prototype.chain=xA,y.prototype.commit=LA,y.prototype.next=jA,y.prototype.plant=FA,y.prototype.reverse=DA,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=kA,y.prototype.first=y.prototype.head,Jo&&(y.prototype[Jo]=IA),y},Zr=LS();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ve._=Zr,define(function(){return Zr})):Ni?((Ni.exports=Zr)._=Zr,nh._=Zr):Ve._=Zr}).call(r)}),Ww=class extends Set{constructor(r,e=!1){super(r),this.valuesAsFlags=e}};function za(r){if(r instanceof Map)return Object.fromEntries([...r.entries()].map(([e,t])=>[e,za(t)]));if(r instanceof Set)return Array.from(r.values()).map(za);if(r instanceof Ww)return{values:[...r.values()],valuesAsFlags:r.valuesAsFlags};if(typeof r=="object"){let e={};return Object.entries(r).forEach(([t,i])=>{e[t]=za(i)}),e}else return r}var PZ=bm(_m(),1);var x5=bm(_m(),1);function pn(r,e){if(typeof r!="object")throw new Error(`Cannot merge into non-object objectToMergeWith. Received: ${JSON.stringify(r)}`);if(typeof e!="object")throw new Error(`Cannot merge using non-object objectToMergeWith. Received: ${JSON.stringify(e)}`);let t=(0,x5.cloneDeep)(r);for(let[i,n]of Object.entries(e))typeof n!="object"||n instanceof Set||t[i]===void 0?t[i]=n:t[i]=pn(t[i],n);return t}function Uw(r,e){if(!(r===void 0||typeof r!="object"))for(let t of Object.keys(r)){if(t===e)return r[t];let i=r[t];if(typeof i=="object"){let n=Uw(i,e);if(n!==void 0)return n}}}var gm="@composite:",L5="@inherit:",j5=class{constructor(r,e,t){this.tiledClassToMembersMap=r,this.enumNameToValuesMap=e,this.parserOptions=t,this.memoiser=new Map}flattenMembers(r,e){return this.memoiser.has(r)?{[r]:this.memoiser.get(r)}:(this.memoiser.set(r,e.reduce((t,i)=>({...t,...this.flattenMemberProperty(i)}),{})),{[r]:this.memoiser.get(r)})}flattenMemberProperty(r){let e=r.propertyType??r.propertytype;if(r.type==="class"){if(!this.memoiser.has(e)){let n=this.tiledClassToMembersMap.get(e).reduce((s,c)=>pn(this.flattenMemberProperty(c),s),{});this.memoiser.set(e,n)}let t=this.memoiser.get(e),i=pn(t,this.flattenValue(r.value,t));return this.checkIfShouldFlatten(r.name)?i:{[r.name.replace(gm,"")]:i}}else return this.enumNameToValuesMap.has(e)?this.enumNameToValuesMap.get(e).valuesAsFlags?{[r.name]:new Set(r.value.split(",").filter(t=>t!==""))}:{[r.name]:r.value}:{[r.name]:r.value}}get memoisedFlattenedProperties(){return this.memoiser}flattenValue(r,e){return Object.entries(r).reduce((t,[i,n])=>{if(typeof n!="object")return Uw(e,i)instanceof Set?pn({[i]:new Set(n.split(",").filter(s=>s!==""))},t):pn({[i]:n},t);if(this.checkIfShouldFlatten(i))return pn(this.flattenValue(n,e),t);{let s=i.replace(gm,"");return pn({[s]:this.flattenValue(n,e)},t)}},{})}checkIfShouldFlatten(r){return this.parserOptions?.defaultComposite===!0?r.startsWith(L5):!r.startsWith(gm)}},Nw=bm(_m(),1),I5=class{constructor(r){this.flattener=r}flattenPropertiesOnObject(r){return{...this.flattener.memoisedFlattenedProperties.get(r.class??r.type),...r.properties?.reduce((e,t)=>({...e,...this.flattener.flattenMemberProperty(t)}),{}),name:r.name,id:r.id,class:r.class??r.type??null,x:r.x,y:r.y}}flattenPropertiesOnTile(r){return{...this.flattener.memoisedFlattenedProperties.get(r.class??r.type),...r.properties?.reduce((e,t)=>({...e,...this.flattener.flattenMemberProperty(t)}),{}),id:r.id,class:r.class??r.type??null}}getCustomTypesMap(){return new Map([...this.flattener.memoisedFlattenedProperties.entries()].map(([r,e])=>[r,(0,Nw.cloneDeep)(e)]))}getEnumsMap(){return new Map([...this.flattener.enumNameToValuesMap.entries()].map(([r,e])=>[r,(0,Nw.cloneDeep)(e)]))}toJSON(){return JSON.stringify({customTypes:za(this.getCustomTypesMap()),enums:za(this.getEnumsMap())},null,4)}};function F5(r,e){let t=new Map(r.propertyTypes.filter(s=>s.type==="enum").map(s=>[s.name,new Ww(s.values,s.valuesAsFlags)])),i=new Map(r.propertyTypes.filter(s=>s.type==="class").map(s=>[s.name,s.members])),n=new j5(i,t,e);return i.forEach((s,c)=>{n.flattenMembers(c,s)}),new I5(n)}var Gw={parse:F5};var Ri=class{constructor(e,t){this.phaserTile=e;this.tiledProject=t}getProperty(e){let t={};if(this.tiledProject){let n=Gw.parse(this.tiledProject),s=this.getType();if(s){let c=n.getCustomTypesMap()?.get(s);if(c)for(let[l,h]of Object.entries(c))t[l]=h}}return this.phaserTile.properties[e]??t[e]}hasProperty(e){return this.getProperty(e)!=null}getType(){return this.phaserTile.tileset?.tileData[this.phaserTile.index-1]?.type}};var No=class{constructor(e,t){this.phaserTilemapLayer=e;this.tiledProject=t}getName(){return this.phaserTilemapLayer.layer.name}getProperty(e){return this.phaserTilemapLayer.layer.properties?.find(n=>n.name==e)?.value}hasProperty(e){return this.getProperty(e)!=null}isCharLayer(){return this.hasProperty(ko)}getData(){return this.phaserTilemapLayer.layer.data.map(e=>e.map(t=>new Ri(t,this.tiledProject)))}};var Na=class{constructor(e,t){this.phaserTilemap=e;this.tiledProject=t;for(let i of this.phaserTilemap.layers)if(i.tilemapLayer==null)throw new Error(`Error initializing tilemap. Layer '${i.name}' has no 'tilemapLayer'. This can happen if you call 'createLayer' with the wrong layer ID.`)}getTileWidth(){return this.phaserTilemap.tileWidth}getTileHeight(){return this.phaserTilemap.tileHeight}getWidth(){return this.phaserTilemap.width}getHeight(){return this.phaserTilemap.height}getOrientation(){return this.phaserTilemap.orientation==Phaser.Tilemaps.Orientation.ISOMETRIC.toString()?"isometric":"orthogonal"}getLayers(){return this.phaserTilemap.layers.map(e=>new No(e.tilemapLayer,this.tiledProject))}hasTileAt(e,t,i){return!!this.phaserTilemap.hasTileAt(e,t,i)}getTileAt(e,t,i){let n=this.phaserTilemap.getTileAt(e,t,!1,i);if(n)return new Ri(n,this.tiledProject)}};var zf=class{constructor(e,t="orthogonal",i="ge_collide"){this.map=e;this.orientation=t;this.layerMap=new Map;this.layers=[];let n=-1,s=-1;Object.entries(e).map(([c,l])=>{let h=l.data[0]?.length,p=l.data.length;if(n!==-1&&n!==h||s!==-1&&s!==p)throw new Error("All tilemap layers must have the same dimensions.");n=h,s=p;let v=[];for(let w=0;w<l.data.length;w++){let T=[];for(let E=0;E<l.data[w].length;E++){let M=new wm(l.data[w][E]===1,i);T.push(M)}v.push(T)}let b=new Pm(c,v,l.isCharLayer);this.layers.push(b),this.layerMap.set(c,b)})}getWidth(){return Object.values(this.map)[0]?.data[0]?.length||0}getHeight(){return Object.values(this.map)[0]?.data.length||0}getOrientation(){return this.orientation}getLayers(){return this.layers}hasTileAt(e,t,i){return!i||!this.layerMap.get(i)?!1:e>=0&&e<this.getWidth()&&t>=0&&t<this.getHeight()}getTileAt(e,t,i){if(!i)return;let n=this.layerMap.get(i);if(n)return n.getData()[t][e]}},Pm=class{constructor(e,t,i=!1){this.name=e;this.tiles=t;this.isCharLayerInternal=i}getName(){return this.name}getProperty(e){if(e==="ge_charLayer"&&this.isCharLayerInternal)return this.name}hasProperty(e){return e==="ge_charLayer"&&this.isCharLayerInternal}getData(){return this.tiles}isCharLayer(){return this.isCharLayerInternal}},wm=class{constructor(e,t){this.isBlocking=e;this.collisionPropertyName=t}getProperty(e){return e===this.collisionPropertyName?this.isBlocking:!1}hasProperty(e){return e===this.collisionPropertyName}};var Vo=class{constructor(e,t){this.props={};let i=e.find(s=>{if(!s.tiles)return!1;let c=s.firstgid??0;return!!s.tiles.find(h=>h.id+c===t)});if(!i)return;let n=i.tiles?.find(s=>s.id+(i.firstgid??0)===t);if(n?.properties)for(let s of n.properties)s.name&&(this.props[s.name]=s.value)}getProperty(e){return this.props[e]}hasProperty(e){return this.props[e]!==void 0}};var Wo=class{constructor(e,t){this.layer=t;this.data=[];if(this.data=[],this.layer.data)for(let i=0;i<(this.layer.height||0);i++){let n=[];for(let s=0;s<(this.layer.width||0);s++){let c=this.layer.data[i*(this.layer.width||0)+s];c!==void 0?n.push(new Vo(e,c)):n.push(void 0)}this.data.push(n)}}getName(){return this.layer.name}getProperty(e){return this.layer.properties?.find(t=>t.name===e)?.value}hasProperty(e){return this.getProperty(e)!==void 0}getData(){return this.data}isCharLayer(){return this.hasProperty("ge_charLayer")}};var Nf=class{constructor(e){this.rawTilemap=e;this.layers=[];this.layers=this.rawTilemap.layers?.map(t=>new Wo(this.rawTilemap.tilesets,t))}hasTileAt(e,t,i){if(e<0||e>=this.rawTilemap.width||t<0||t>=this.rawTilemap.height||!this.rawTilemap.layers)return!1;let n=this.rawTilemap.layers.find(c=>c.name===i);if(!n)return!1;let s=t*this.rawTilemap.width+e;return n.data[s]>0}getTileAt(e,t,i){if(e<0||e>=this.rawTilemap.width||t<0||t>=this.rawTilemap.height||!this.rawTilemap.layers)return;let n=this.layers.find(s=>s.getName()===i);if(n)return n.getData()[t][e]}getOrientation(){return this.rawTilemap.orientation}getLayers(){return this.layers}getWidth(){return this.rawTilemap.width}getHeight(){return this.rawTilemap.height}};var Va=class r{constructor(e){this.scene=e;this.geHeadless=new Ra(!1);this.isCreatedInternal=!1;r.welcomeMessagePrinted||(console.log(`Using GridEngine Phaser Plugin v${qf}`),r.welcomeMessagePrinted=!0),this.scene.sys.events.once("boot",this.boot,this)}static{this.welcomeMessagePrinted=!1}boot(){this.scene.sys.events.on("update",this.update,this)}getCharLayer(e){return this.geHeadless.getCharLayer(e)}getTransition(e,t){return this.geHeadless.getTransition(e,t)}setTransition(e,t,i){this.geHeadless.setTransition(e,t,i)}create(e,t){this.geHeadless.create(new Na(e,t.tiledProject),t),this.isCreatedInternal=!0,this.gridCharacters=new Map;let i=this.setConfigDefaults(t);this.config=i,this.gridTilemap=new sn(e),this.addCharacters()}getPosition(e){return this.geHeadless.getPosition(e)}move(e,t){this.geHeadless.move(e,t)}moveRandomly(e,t=0,i=-1){this.geHeadless.moveRandomly(e,t,i)}getMovement(e){return this.geHeadless.getMovement(e)}moveTo(e,t,i){return this.geHeadless.moveTo(e,t,i)}stopMovement(e){this.geHeadless.stopMovement(e)}setSpeed(e,t){this.geHeadless.setSpeed(e,t)}getSpeed(e){return this.geHeadless.getSpeed(e)}setContainer(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setContainer(t)}getContainer(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getContainer()}getOffsetX(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getOffsetX()}setOffsetX(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setOffsetX(t)}getOffsetY(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getOffsetY()}setOffsetY(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setOffsetY(t)}collidesWithTiles(e){return this.geHeadless.collidesWithTiles(e)}getWalkingAnimationMapping(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getAnimation()?.getWalkingAnimationMapping()}hasLayerOverlay(){return this.initGuard(),!!this.config?.layerOverlay}setWalkingAnimationMapping(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.getAnimation()?.setWalkingAnimationMapping(t)}update(e,t){if(this.isCreatedInternal&&this.gridCharacters)for(let[i,n]of this.gridCharacters)n.update(t);this.geHeadless.update(e,t)}addCharacter(e){this.geHeadless.addCharacter(e),this.addCharacterInternal(e)}hasCharacter(e){return this.geHeadless.hasCharacter(e)}removeCharacter(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.destroy(),this.gridCharacters?.delete(e),this.geHeadless.removeCharacter(e)}removeAllCharacters(){if(this.initGuard(),!!this.gridCharacters){for(let e of this.gridCharacters.keys())this.removeCharacter(e);this.geHeadless.removeAllCharacters()}}getAllCharacters(e){return this.geHeadless.getAllCharacters(e)}getLabels(e){return this.geHeadless.getLabels(e)}addLabels(e,t){this.geHeadless.addLabels(e,t)}removeLabels(e,t){this.geHeadless.removeLabels(e,t)}clearLabels(e){this.geHeadless.clearLabels(e)}follow(e,t,i,n){let s;i===void 0?s={distance:0,closestPointIfBlocked:!1}:typeof i=="number"?(s={distance:i,closestPointIfBlocked:!1},n&&(s.closestPointIfBlocked=!0)):s=i,this.geHeadless.follow(e,t,s)}isMoving(e){return this.geHeadless.isMoving(e)}getFacingDirection(e){return this.geHeadless.getFacingDirection(e)}getFacingPosition(e){return this.geHeadless.getFacingPosition(e)}turnTowards(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.turnTowards(t),this.geHeadless.turnTowards(e,t)}getCharactersAt(e,t){return this.geHeadless.getCharactersAt(e,t)}setPosition(e,t,i){this.geHeadless.setPosition(e,t,i)}getSprite(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getSprite()}setSprite(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);t.setOrigin(0,0),i.setSprite(t)}isBlocked(e,t,i=["geDefault"]){return this.geHeadless.isBlocked(e,t,i)}isTileBlocked(e,t){return this.geHeadless.isTileBlocked(e,t)}getCollisionGroups(e){return this.geHeadless.getCollisionGroups(e)}setCollisionGroups(e,t){this.geHeadless.setCollisionGroups(e,t)}getIgnoreCollisionGroups(e){return this.geHeadless.getIgnoreCollisionGroups(e)}setIgnoreCollisionGroups(e,t){this.geHeadless.setIgnoreCollisionGroups(e,t)}getTilePosInDirection(e,t,i){return this.geHeadless.getTilePosInDirection(e,t,i)}findShortestPath(e,t,i={}){return this.geHeadless.findShortestPath(e,t,i)}steppedOn(e,t,i){return this.geHeadless.steppedOn(e,t,i)}characterShifted(){return this.geHeadless.characterShifted()}movementStarted(){return this.geHeadless.movementStarted()}movementStopped(){return this.geHeadless.movementStopped()}directionChanged(){return this.geHeadless.directionChanged()}positionChangeStarted(){return this.geHeadless.positionChangeStarted()}positionChangeFinished(){return this.geHeadless.positionChangeFinished()}getMovementProgress(e){return this.geHeadless.getMovementProgress(e)}rebuildTileCollisionCache(e,t,i,n){this.geHeadless.rebuildTileCollisionCache(e,t,i,n)}addQueueMovements(e,t,i){this.geHeadless.addQueueMovements(e,t,i)}getEnqueuedMovements(e){return this.geHeadless.getEnqueuedMovements(e)}queueMovementFinished(){return this.geHeadless.queueMovementFinished()}clearEnqueuedMovements(e){return this.geHeadless.clearEnqueuedMovements(e)}getState(){return{characters:this.geHeadless.getState().characters.map(e=>({...e,offsetX:this.getOffsetX(e.id),offsetY:this.getOffsetY(e.id)}))}}setState(e){if(this.geHeadless.setState(e),this.gridCharacters)for(let t of e.characters){let i=this.gridCharacters.get(t.id);i&&(i.setOffsetX(t.offsetX),i.setOffsetY(t.offsetY))}}getTileCost(e,t,i){return this.initGuard(),this.geHeadless.getTileCost(e,t,i)}setConfigDefaults(e){return{collisionTilePropertyName:"ge_collide",numberOfDirections:4,characterCollisionStrategy:"BLOCK_TWO_TILES",layerOverlay:!1,cacheTileCollisions:!1,...e}}initGuard(){if(!this.isCreatedInternal)throw this.createUninitializedErr()}createUninitializedErr(){throw new Error("GridEngine not initialized. You need to call create() first.")}addCharacters(){this.config?.characters.forEach(e=>this.addCharacterInternal(e))}createCharUnknownErr(e){return new Error(`Character unknown: ${e}`)}addCharacterInternal(e){if(this.initGuard(),!this.gridTilemap)throw this.createUninitializedErr();if(!this.config)throw this.createUninitializedErr();let t=new sf(e,this.scene,this.gridTilemap,this.config.layerOverlay,this.geHeadless);this.gridCharacters?.set(e.id,t)}};var D5=Va;0&&(module.exports={ArrayTilemap,CharacterShiftAction,CollisionStrategy,Direction,GridEngine,GridEngineHeadless,MoveToResult,NoPathFoundStrategy,NumberOfDirections,PathBlockedStrategy,PhaserTile,PhaserTileLayer,PhaserTilemap,QueuedPathBlockedStrategy,TiledLayer,TiledTile,TiledTilemap,directionFromPos});
/*! Bundled license information:

tiled-property-flattener/dist/tiled_property_flattener.min.js:
  (*! Bundled license information:
  
  lodash/lodash.js:
    (**
     * @license
     * Lodash <https://lodash.com/>
     * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
     * Released under MIT license <https://lodash.com/license>
     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
     * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     *)
  *)
*/
