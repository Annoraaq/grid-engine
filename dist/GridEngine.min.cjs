var pA=Object.create;var Ia=Object.defineProperty;var dA=Object.getOwnPropertyDescriptor;var vA=Object.getOwnPropertyNames;var mA=Object.getPrototypeOf,gA=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),yA=(n,e)=>{for(var r in e)Ia(n,r,{get:e[r],enumerable:!0})},Cg=(n,e,r,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of vA(e))!gA.call(n,a)&&a!==r&&Ia(n,a,{get:()=>e[a],enumerable:!(t=dA(e,a))||t.enumerable});return n};var Ie=(n,e,r)=>(r=n!=null?pA(mA(n)):{},Cg(e||!n||!n.__esModule?Ia(r,"default",{value:n,enumerable:!0}):r,n)),bA=n=>Cg(Ia({},"__esModule",{value:!0}),n);var se=b(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.isFunction=void 0;function TA(n){return typeof n=="function"}Da.isFunction=TA});var bt=b(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.createErrorClass=void 0;function wA(n){var e=function(t){Error.call(t),t.stack=new Error().stack},r=n(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}ka.createErrorClass=wA});var th=b(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.UnsubscriptionError=void 0;var SA=bt();Ra.UnsubscriptionError=SA.createErrorClass(function(n){return function(r){n(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(t,a){return a+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}})});var Jr=b(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.arrRemove=void 0;function CA(n,e){if(n){var r=n.indexOf(e);0<=r&&n.splice(r,1)}}Va.arrRemove=CA});var ir=b(ze=>{"use strict";var Lg=ze&&ze.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mg=ze&&ze.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},qg=ze&&ze.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(ze,"__esModule",{value:!0});ze.isSubscription=ze.EMPTY_SUBSCRIPTION=ze.Subscription=void 0;var ho=se(),ih=th(),xg=Jr(),nh=(function(){function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,r,t,a,s;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var f=Lg(c),p=f.next();!p.done;p=f.next()){var m=p.value;m.remove(this)}}catch(F){e={error:F}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}else c.remove(this);var O=this.initialTeardown;if(ho.isFunction(O))try{O()}catch(F){s=F instanceof ih.UnsubscriptionError?F.errors:[F]}var A=this._finalizers;if(A){this._finalizers=null;try{for(var q=Lg(A),j=q.next();!j.done;j=q.next()){var I=j.value;try{jg(I)}catch(F){s=s??[],F instanceof ih.UnsubscriptionError?s=qg(qg([],Mg(s)),Mg(F.errors)):s.push(F)}}}catch(F){t={error:F}}finally{try{j&&!j.done&&(a=q.return)&&a.call(q)}finally{if(t)throw t.error}}}if(s)throw new ih.UnsubscriptionError(s)}},n.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)jg(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},n.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},n.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},n.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&xg.arrRemove(r,e)},n.prototype.remove=function(e){var r=this._finalizers;r&&xg.arrRemove(r,e),e instanceof n&&e._removeParent(this)},n.EMPTY=(function(){var e=new n;return e.closed=!0,e})(),n})();ze.Subscription=nh;ze.EMPTY_SUBSCRIPTION=nh.EMPTY;function AA(n){return n instanceof nh||n&&"closed"in n&&ho.isFunction(n.remove)&&ho.isFunction(n.add)&&ho.isFunction(n.unsubscribe)}ze.isSubscription=AA;function jg(n){ho.isFunction(n)?n():n.unsubscribe()}});var Di=b(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.config=void 0;Na.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}});var oh=b(Mr=>{"use strict";var Ig=Mr&&Mr.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},Fg=Mr&&Mr.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.timeoutProvider=void 0;Mr.timeoutProvider={setTimeout:function(n,e){for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];var a=Mr.timeoutProvider.delegate;return a?.setTimeout?a.setTimeout.apply(a,Fg([n,e],Ig(r))):setTimeout.apply(void 0,Fg([n,e],Ig(r)))},clearTimeout:function(n){var e=Mr.timeoutProvider.delegate;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0}});var ah=b(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.reportUnhandledError=void 0;var EA=Di(),LA=oh();function MA(n){LA.timeoutProvider.setTimeout(function(){var e=EA.config.onUnhandledError;if(e)e(n);else throw n})}Wa.reportUnhandledError=MA});var Le=b(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.noop=void 0;function qA(){}Ua.noop=qA});var Dg=b(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.createNotification=qr.nextNotification=qr.errorNotification=qr.COMPLETE_NOTIFICATION=void 0;qr.COMPLETE_NOTIFICATION=(function(){return Ga("C",void 0,void 0)})();function xA(n){return Ga("E",void 0,n)}qr.errorNotification=xA;function jA(n){return Ga("N",n,void 0)}qr.nextNotification=jA;function Ga(n,e,r){return{kind:n,value:e,error:r}}qr.createNotification=Ga});var Ba=b(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.captureError=ki.errorContext=void 0;var kg=Di(),oi=null;function IA(n){if(kg.config.useDeprecatedSynchronousErrorHandling){var e=!oi;if(e&&(oi={errorThrown:!1,error:null}),n(),e){var r=oi,t=r.errorThrown,a=r.error;if(oi=null,t)throw a}}else n()}ki.errorContext=IA;function FA(n){kg.config.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=n)}ki.captureError=FA});var Ri=b(_r=>{"use strict";var Ng=_r&&_r.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(_r,"__esModule",{value:!0});_r.EMPTY_OBSERVER=_r.SafeSubscriber=_r.Subscriber=void 0;var DA=se(),Rg=ir(),lh=Di(),kA=ah(),Vg=Le(),sh=Dg(),RA=oh(),VA=Ba(),Wg=(function(n){Ng(e,n);function e(r){var t=n.call(this)||this;return t.isStopped=!1,r?(t.destination=r,Rg.isSubscription(r)&&r.add(t)):t.destination=_r.EMPTY_OBSERVER,t}return e.create=function(r,t,a){return new Ug(r,t,a)},e.prototype.next=function(r){this.isStopped?ch(sh.nextNotification(r),this):this._next(r)},e.prototype.error=function(r){this.isStopped?ch(sh.errorNotification(r),this):(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped?ch(sh.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(Rg.Subscription);_r.Subscriber=Wg;var NA=Function.prototype.bind;function uh(n,e){return NA.call(n,e)}var WA=(function(){function n(e){this.partialObserver=e}return n.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(t){Ha(t)}},n.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(t){Ha(t)}else Ha(e)},n.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Ha(r)}},n})(),Ug=(function(n){Ng(e,n);function e(r,t,a){var s=n.call(this)||this,c;if(DA.isFunction(r)||!r)c={next:r??void 0,error:t??void 0,complete:a??void 0};else{var f;s&&lh.config.useDeprecatedNextContext?(f=Object.create(r),f.unsubscribe=function(){return s.unsubscribe()},c={next:r.next&&uh(r.next,f),error:r.error&&uh(r.error,f),complete:r.complete&&uh(r.complete,f)}):c=r}return s.destination=new WA(c),s}return e})(Wg);_r.SafeSubscriber=Ug;function Ha(n){lh.config.useDeprecatedSynchronousErrorHandling?VA.captureError(n):kA.reportUnhandledError(n)}function UA(n){throw n}function ch(n,e){var r=lh.config.onStoppedNotification;r&&RA.timeoutProvider.setTimeout(function(){return r(n,e)})}_r.EMPTY_OBSERVER={closed:!0,next:Vg.noop,error:UA,complete:Vg.noop}});var po=b(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.observable=void 0;za.observable=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})()});var Me=b($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.identity=void 0;function GA(n){return n}$a.identity=GA});var vo=b(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.pipeFromArray=Vi.pipe=void 0;var BA=Me();function HA(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Gg(n)}Vi.pipe=HA;function Gg(n){return n.length===0?BA.identity:n.length===1?n[0]:function(r){return n.reduce(function(t,a){return a(t)},r)}}Vi.pipeFromArray=Gg});var ce=b(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Observable=void 0;var hh=Ri(),zA=ir(),$A=po(),YA=vo(),QA=Di(),fh=se(),XA=Ba(),KA=(function(){function n(e){e&&(this._subscribe=e)}return n.prototype.lift=function(e){var r=new n;return r.source=this,r.operator=e,r},n.prototype.subscribe=function(e,r,t){var a=this,s=ZA(e)?e:new hh.SafeSubscriber(e,r,t);return XA.errorContext(function(){var c=a,f=c.operator,p=c.source;s.add(f?f.call(s,p):p?a._subscribe(s):a._trySubscribe(s))}),s},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},n.prototype.forEach=function(e,r){var t=this;return r=Bg(r),new r(function(a,s){var c=new hh.SafeSubscriber({next:function(f){try{e(f)}catch(p){s(p),c.unsubscribe()}},error:s,complete:a});t.subscribe(c)})},n.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},n.prototype[$A.observable]=function(){return this},n.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return YA.pipeFromArray(e)(this)},n.prototype.toPromise=function(e){var r=this;return e=Bg(e),new e(function(t,a){var s;r.subscribe(function(c){return s=c},function(c){return a(c)},function(){return t(s)})})},n.create=function(e){return new n(e)},n})();Ya.Observable=KA;function Bg(n){var e;return(e=n??QA.config.Promise)!==null&&e!==void 0?e:Promise}function JA(n){return n&&fh.isFunction(n.next)&&fh.isFunction(n.error)&&fh.isFunction(n.complete)}function ZA(n){return n&&n instanceof hh.Subscriber||JA(n)&&zA.isSubscription(n)}});var R=b(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.operate=Ni.hasLift=void 0;var eE=se();function Hg(n){return eE.isFunction(n?.lift)}Ni.hasLift=Hg;function rE(n){return function(e){if(Hg(e))return e.lift(function(r){try{return n(r,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}Ni.operate=rE});var W=b(_t=>{"use strict";var tE=_t&&_t.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(_t,"__esModule",{value:!0});_t.OperatorSubscriber=_t.createOperatorSubscriber=void 0;var iE=Ri();function nE(n,e,r,t,a){return new zg(n,e,r,t,a)}_t.createOperatorSubscriber=nE;var zg=(function(n){tE(e,n);function e(r,t,a,s,c,f){var p=n.call(this,r)||this;return p.onFinalize=c,p.shouldUnsubscribe=f,p._next=t?function(m){try{t(m)}catch(O){r.error(O)}}:n.prototype._next,p._error=s?function(m){try{s(m)}catch(O){r.error(O)}finally{this.unsubscribe()}}:n.prototype._error,p._complete=a?function(){try{a()}catch(m){r.error(m)}finally{this.unsubscribe()}}:n.prototype._complete,p}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;n.prototype.unsubscribe.call(this),!t&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e})(iE.Subscriber);_t.OperatorSubscriber=zg});var Xa=b(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.refCount=void 0;var oE=R(),aE=W();function sE(){return oE.operate(function(n,e){var r=null;n._refCount++;var t=aE.createOperatorSubscriber(e,void 0,void 0,void 0,function(){if(!n||n._refCount<=0||0<--n._refCount){r=null;return}var a=n._connection,s=r;r=null,a&&(!s||a===s)&&a.unsubscribe(),e.unsubscribe()});n.subscribe(t),t.closed||(r=n.connect())})}Qa.refCount=sE});var mo=b(Wi=>{"use strict";var uE=Wi&&Wi.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.ConnectableObservable=void 0;var cE=ce(),$g=ir(),lE=Xa(),fE=W(),hE=R(),pE=(function(n){uE(e,n);function e(r,t){var a=n.call(this)||this;return a.source=r,a.subjectFactory=t,a._subject=null,a._refCount=0,a._connection=null,hE.hasLift(r)&&(a.lift=r.lift),a}return e.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},e.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var r=this._connection;this._subject=this._connection=null,r?.unsubscribe()},e.prototype.connect=function(){var r=this,t=this._connection;if(!t){t=this._connection=new $g.Subscription;var a=this.getSubject();t.add(this.source.subscribe(fE.createOperatorSubscriber(a,void 0,function(){r._teardown(),a.complete()},function(s){r._teardown(),a.error(s)},function(){return r._teardown()}))),t.closed&&(this._connection=null,t=$g.Subscription.EMPTY)}return t},e.prototype.refCount=function(){return lE.refCount()(this)},e})(cE.Observable);Wi.ConnectableObservable=pE});var Yg=b(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.performanceTimestampProvider=void 0;go.performanceTimestampProvider={now:function(){return(go.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}});var ph=b(Pr=>{"use strict";var Qg=Pr&&Pr.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},Xg=Pr&&Pr.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.animationFrameProvider=void 0;var dE=ir();Pr.animationFrameProvider={schedule:function(n){var e=requestAnimationFrame,r=cancelAnimationFrame,t=Pr.animationFrameProvider.delegate;t&&(e=t.requestAnimationFrame,r=t.cancelAnimationFrame);var a=e(function(s){r=void 0,n(s)});return new dE.Subscription(function(){return r?.(a)})},requestAnimationFrame:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=Pr.animationFrameProvider.delegate;return(r?.requestAnimationFrame||requestAnimationFrame).apply(void 0,Xg([],Qg(n)))},cancelAnimationFrame:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=Pr.animationFrameProvider.delegate;return(r?.cancelAnimationFrame||cancelAnimationFrame).apply(void 0,Xg([],Qg(n)))},delegate:void 0}});var Zg=b(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.animationFrames=void 0;var vE=ce(),mE=Yg(),Kg=ph();function gE(n){return n?Jg(n):yE}Ka.animationFrames=gE;function Jg(n){return new vE.Observable(function(e){var r=n||mE.performanceTimestampProvider,t=r.now(),a=0,s=function(){e.closed||(a=Kg.animationFrameProvider.requestAnimationFrame(function(c){a=0;var f=r.now();e.next({timestamp:n?f:c,elapsed:f-t}),s()}))};return s(),function(){a&&Kg.animationFrameProvider.cancelAnimationFrame(a)}})}var yE=Jg()});var dh=b(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.ObjectUnsubscribedError=void 0;var bE=bt();Ja.ObjectUnsubscribedError=bE.createErrorClass(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})});var qe=b(xr=>{"use strict";var ry=xr&&xr.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})(),_E=xr&&xr.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(xr,"__esModule",{value:!0});xr.AnonymousSubject=xr.Subject=void 0;var ey=ce(),mh=ir(),PE=dh(),OE=Jr(),vh=Ba(),ty=(function(n){ry(e,n);function e(){var r=n.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var t=new gh(this,this);return t.operator=r,t},e.prototype._throwIfClosed=function(){if(this.closed)throw new PE.ObjectUnsubscribedError},e.prototype.next=function(r){var t=this;vh.errorContext(function(){var a,s;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var c=_E(t.currentObservers),f=c.next();!f.done;f=c.next()){var p=f.value;p.next(r)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}}})},e.prototype.error=function(r){var t=this;vh.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=r;for(var a=t.observers;a.length;)a.shift().error(r)}})},e.prototype.complete=function(){var r=this;vh.errorContext(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var t=r.observers;t.length;)t.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var t=this,a=this,s=a.hasError,c=a.isStopped,f=a.observers;return s||c?mh.EMPTY_SUBSCRIPTION:(this.currentObservers=null,f.push(r),new mh.Subscription(function(){t.currentObservers=null,OE.arrRemove(f,r)}))},e.prototype._checkFinalizedStatuses=function(r){var t=this,a=t.hasError,s=t.thrownError,c=t.isStopped;a?r.error(s):c&&r.complete()},e.prototype.asObservable=function(){var r=new ey.Observable;return r.source=this,r},e.create=function(r,t){return new gh(r,t)},e})(ey.Observable);xr.Subject=ty;var gh=(function(n){ry(e,n);function e(r,t){var a=n.call(this)||this;return a.destination=r,a.source=t,a}return e.prototype.next=function(r){var t,a;(a=(t=this.destination)===null||t===void 0?void 0:t.next)===null||a===void 0||a.call(t,r)},e.prototype.error=function(r){var t,a;(a=(t=this.destination)===null||t===void 0?void 0:t.error)===null||a===void 0||a.call(t,r)},e.prototype.complete=function(){var r,t;(t=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||t===void 0||t.call(r)},e.prototype._subscribe=function(r){var t,a;return(a=(t=this.source)===null||t===void 0?void 0:t.subscribe(r))!==null&&a!==void 0?a:mh.EMPTY_SUBSCRIPTION},e})(ty);xr.AnonymousSubject=gh});var yh=b(Ui=>{"use strict";var TE=Ui&&Ui.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Ui,"__esModule",{value:!0});Ui.BehaviorSubject=void 0;var wE=qe(),SE=(function(n){TE(e,n);function e(r){var t=n.call(this)||this;return t._value=r,t}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(r){var t=n.prototype._subscribe.call(this,r);return!t.closed&&r.next(this._value),t},e.prototype.getValue=function(){var r=this,t=r.hasError,a=r.thrownError,s=r._value;if(t)throw a;return this._throwIfClosed(),s},e.prototype.next=function(r){n.prototype.next.call(this,this._value=r)},e})(wE.Subject);Ui.BehaviorSubject=SE});var Za=b(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.dateTimestampProvider=void 0;yo.dateTimestampProvider={now:function(){return(yo.dateTimestampProvider.delegate||Date).now()},delegate:void 0}});var es=b(Gi=>{"use strict";var CE=Gi&&Gi.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Gi,"__esModule",{value:!0});Gi.ReplaySubject=void 0;var AE=qe(),EE=Za(),LE=(function(n){CE(e,n);function e(r,t,a){r===void 0&&(r=1/0),t===void 0&&(t=1/0),a===void 0&&(a=EE.dateTimestampProvider);var s=n.call(this)||this;return s._bufferSize=r,s._windowTime=t,s._timestampProvider=a,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=t===1/0,s._bufferSize=Math.max(1,r),s._windowTime=Math.max(1,t),s}return e.prototype.next=function(r){var t=this,a=t.isStopped,s=t._buffer,c=t._infiniteTimeWindow,f=t._timestampProvider,p=t._windowTime;a||(s.push(r),!c&&s.push(f.now()+p)),this._trimBuffer(),n.prototype.next.call(this,r)},e.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(r),a=this,s=a._infiniteTimeWindow,c=a._buffer,f=c.slice(),p=0;p<f.length&&!r.closed;p+=s?1:2)r.next(f[p]);return this._checkFinalizedStatuses(r),t},e.prototype._trimBuffer=function(){var r=this,t=r._bufferSize,a=r._timestampProvider,s=r._buffer,c=r._infiniteTimeWindow,f=(c?1:2)*t;if(t<1/0&&f<s.length&&s.splice(0,s.length-f),!c){for(var p=a.now(),m=0,O=1;O<s.length&&s[O]<=p;O+=2)m=O;m&&s.splice(0,m+1)}},e})(AE.Subject);Gi.ReplaySubject=LE});var rs=b(Bi=>{"use strict";var ME=Bi&&Bi.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.AsyncSubject=void 0;var qE=qe(),xE=(function(n){ME(e,n);function e(){var r=n!==null&&n.apply(this,arguments)||this;return r._value=null,r._hasValue=!1,r._isComplete=!1,r}return e.prototype._checkFinalizedStatuses=function(r){var t=this,a=t.hasError,s=t._hasValue,c=t._value,f=t.thrownError,p=t.isStopped,m=t._isComplete;a?r.error(f):(p||m)&&(s&&r.next(c),r.complete())},e.prototype.next=function(r){this.isStopped||(this._value=r,this._hasValue=!0)},e.prototype.complete=function(){var r=this,t=r._hasValue,a=r._value,s=r._isComplete;s||(this._isComplete=!0,t&&n.prototype.next.call(this,a),n.prototype.complete.call(this))},e})(qE.Subject);Bi.AsyncSubject=xE});var iy=b(Hi=>{"use strict";var jE=Hi&&Hi.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Hi,"__esModule",{value:!0});Hi.Action=void 0;var IE=ir(),FE=(function(n){jE(e,n);function e(r,t){return n.call(this)||this}return e.prototype.schedule=function(r,t){return t===void 0&&(t=0),this},e})(IE.Subscription);Hi.Action=FE});var ay=b(jr=>{"use strict";var ny=jr&&jr.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},oy=jr&&jr.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(jr,"__esModule",{value:!0});jr.intervalProvider=void 0;jr.intervalProvider={setInterval:function(n,e){for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];var a=jr.intervalProvider.delegate;return a?.setInterval?a.setInterval.apply(a,oy([n,e],ny(r))):setInterval.apply(void 0,oy([n,e],ny(r)))},clearInterval:function(n){var e=jr.intervalProvider.delegate;return(e?.clearInterval||clearInterval)(n)},delegate:void 0}});var $i=b(zi=>{"use strict";var DE=zi&&zi.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(zi,"__esModule",{value:!0});zi.AsyncAction=void 0;var kE=iy(),sy=ay(),RE=Jr(),VE=(function(n){DE(e,n);function e(r,t){var a=n.call(this,r,t)||this;return a.scheduler=r,a.work=t,a.pending=!1,a}return e.prototype.schedule=function(r,t){var a;if(t===void 0&&(t=0),this.closed)return this;this.state=r;var s=this.id,c=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(c,s,t)),this.pending=!0,this.delay=t,this.id=(a=this.id)!==null&&a!==void 0?a:this.requestAsyncId(c,this.id,t),this},e.prototype.requestAsyncId=function(r,t,a){return a===void 0&&(a=0),sy.intervalProvider.setInterval(r.flush.bind(r,this),a)},e.prototype.recycleAsyncId=function(r,t,a){if(a===void 0&&(a=0),a!=null&&this.delay===a&&this.pending===!1)return t;t!=null&&sy.intervalProvider.clearInterval(t)},e.prototype.execute=function(r,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(r,t);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,t){var a=!1,s;try{this.work(r)}catch(c){a=!0,s=c||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,t=r.id,a=r.scheduler,s=a.actions;this.work=this.state=this.scheduler=null,this.pending=!1,RE.arrRemove(s,this),t!=null&&(this.id=this.recycleAsyncId(a,t,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e})(kE.Action);zi.AsyncAction=VE});var cy=b(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.TestTools=Yi.Immediate=void 0;var NE=1,bh,ts={};function uy(n){return n in ts?(delete ts[n],!0):!1}Yi.Immediate={setImmediate:function(n){var e=NE++;return ts[e]=!0,bh||(bh=Promise.resolve()),bh.then(function(){return uy(e)&&n()}),e},clearImmediate:function(n){uy(n)}};Yi.TestTools={pending:function(){return Object.keys(ts).length}}});var fy=b(Ir=>{"use strict";var WE=Ir&&Ir.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},UE=Ir&&Ir.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.immediateProvider=void 0;var ly=cy(),GE=ly.Immediate.setImmediate,BE=ly.Immediate.clearImmediate;Ir.immediateProvider={setImmediate:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=Ir.immediateProvider.delegate;return(r?.setImmediate||GE).apply(void 0,UE([],WE(n)))},clearImmediate:function(n){var e=Ir.immediateProvider.delegate;return(e?.clearImmediate||BE)(n)},delegate:void 0}});var py=b(Qi=>{"use strict";var HE=Qi&&Qi.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Qi,"__esModule",{value:!0});Qi.AsapAction=void 0;var zE=$i(),hy=fy(),$E=(function(n){HE(e,n);function e(r,t){var a=n.call(this,r,t)||this;return a.scheduler=r,a.work=t,a}return e.prototype.requestAsyncId=function(r,t,a){return a===void 0&&(a=0),a!==null&&a>0?n.prototype.requestAsyncId.call(this,r,t,a):(r.actions.push(this),r._scheduled||(r._scheduled=hy.immediateProvider.setImmediate(r.flush.bind(r,void 0))))},e.prototype.recycleAsyncId=function(r,t,a){var s;if(a===void 0&&(a=0),a!=null?a>0:this.delay>0)return n.prototype.recycleAsyncId.call(this,r,t,a);var c=r.actions;t!=null&&((s=c[c.length-1])===null||s===void 0?void 0:s.id)!==t&&(hy.immediateProvider.clearImmediate(t),r._scheduled===t&&(r._scheduled=void 0))},e})(zE.AsyncAction);Qi.AsapAction=$E});var _h=b(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.Scheduler=void 0;var YE=Za(),QE=(function(){function n(e,r){r===void 0&&(r=n.now),this.schedulerActionCtor=e,this.now=r}return n.prototype.schedule=function(e,r,t){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(t,r)},n.now=YE.dateTimestampProvider.now,n})();is.Scheduler=QE});var Ki=b(Xi=>{"use strict";var XE=Xi&&Xi.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Xi,"__esModule",{value:!0});Xi.AsyncScheduler=void 0;var dy=_h(),KE=(function(n){XE(e,n);function e(r,t){t===void 0&&(t=dy.Scheduler.now);var a=n.call(this,r,t)||this;return a.actions=[],a._active=!1,a}return e.prototype.flush=function(r){var t=this.actions;if(this._active){t.push(r);return}var a;this._active=!0;do if(a=r.execute(r.state,r.delay))break;while(r=t.shift());if(this._active=!1,a){for(;r=t.shift();)r.unsubscribe();throw a}},e})(dy.Scheduler);Xi.AsyncScheduler=KE});var vy=b(Ji=>{"use strict";var JE=Ji&&Ji.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.AsapScheduler=void 0;var ZE=Ki(),eL=(function(n){JE(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.flush=function(r){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var a=this.actions,s;r=r||a.shift();do if(s=r.execute(r.state,r.delay))break;while((r=a[0])&&r.id===t&&a.shift());if(this._active=!1,s){for(;(r=a[0])&&r.id===t&&a.shift();)r.unsubscribe();throw s}},e})(ZE.AsyncScheduler);Ji.AsapScheduler=eL});var my=b(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.asap=ai.asapScheduler=void 0;var rL=py(),tL=vy();ai.asapScheduler=new tL.AsapScheduler(rL.AsapAction);ai.asap=ai.asapScheduler});var $e=b(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.async=si.asyncScheduler=void 0;var iL=$i(),nL=Ki();si.asyncScheduler=new nL.AsyncScheduler(iL.AsyncAction);si.async=si.asyncScheduler});var gy=b(Zi=>{"use strict";var oL=Zi&&Zi.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Zi,"__esModule",{value:!0});Zi.QueueAction=void 0;var aL=$i(),sL=(function(n){oL(e,n);function e(r,t){var a=n.call(this,r,t)||this;return a.scheduler=r,a.work=t,a}return e.prototype.schedule=function(r,t){return t===void 0&&(t=0),t>0?n.prototype.schedule.call(this,r,t):(this.delay=t,this.state=r,this.scheduler.flush(this),this)},e.prototype.execute=function(r,t){return t>0||this.closed?n.prototype.execute.call(this,r,t):this._execute(r,t)},e.prototype.requestAsyncId=function(r,t,a){return a===void 0&&(a=0),a!=null&&a>0||a==null&&this.delay>0?n.prototype.requestAsyncId.call(this,r,t,a):(r.flush(this),0)},e})(aL.AsyncAction);Zi.QueueAction=sL});var yy=b(en=>{"use strict";var uL=en&&en.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(en,"__esModule",{value:!0});en.QueueScheduler=void 0;var cL=Ki(),lL=(function(n){uL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(cL.AsyncScheduler);en.QueueScheduler=lL});var by=b(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.queue=ui.queueScheduler=void 0;var fL=gy(),hL=yy();ui.queueScheduler=new hL.QueueScheduler(fL.QueueAction);ui.queue=ui.queueScheduler});var Py=b(rn=>{"use strict";var pL=rn&&rn.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(rn,"__esModule",{value:!0});rn.AnimationFrameAction=void 0;var dL=$i(),_y=ph(),vL=(function(n){pL(e,n);function e(r,t){var a=n.call(this,r,t)||this;return a.scheduler=r,a.work=t,a}return e.prototype.requestAsyncId=function(r,t,a){return a===void 0&&(a=0),a!==null&&a>0?n.prototype.requestAsyncId.call(this,r,t,a):(r.actions.push(this),r._scheduled||(r._scheduled=_y.animationFrameProvider.requestAnimationFrame(function(){return r.flush(void 0)})))},e.prototype.recycleAsyncId=function(r,t,a){var s;if(a===void 0&&(a=0),a!=null?a>0:this.delay>0)return n.prototype.recycleAsyncId.call(this,r,t,a);var c=r.actions;t!=null&&t===r._scheduled&&((s=c[c.length-1])===null||s===void 0?void 0:s.id)!==t&&(_y.animationFrameProvider.cancelAnimationFrame(t),r._scheduled=void 0)},e})(dL.AsyncAction);rn.AnimationFrameAction=vL});var Oy=b(tn=>{"use strict";var mL=tn&&tn.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(tn,"__esModule",{value:!0});tn.AnimationFrameScheduler=void 0;var gL=Ki(),yL=(function(n){mL(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.flush=function(r){this._active=!0;var t;r?t=r.id:(t=this._scheduled,this._scheduled=void 0);var a=this.actions,s;r=r||a.shift();do if(s=r.execute(r.state,r.delay))break;while((r=a[0])&&r.id===t&&a.shift());if(this._active=!1,s){for(;(r=a[0])&&r.id===t&&a.shift();)r.unsubscribe();throw s}},e})(gL.AsyncScheduler);tn.AnimationFrameScheduler=yL});var Ty=b(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.animationFrame=ci.animationFrameScheduler=void 0;var bL=Py(),_L=Oy();ci.animationFrameScheduler=new _L.AnimationFrameScheduler(bL.AnimationFrameAction);ci.animationFrame=ci.animationFrameScheduler});var Cy=b(Pt=>{"use strict";var wy=Pt&&Pt.__extends||(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}})();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.VirtualAction=Pt.VirtualTimeScheduler=void 0;var PL=$i(),OL=ir(),TL=Ki(),wL=(function(n){wy(e,n);function e(r,t){r===void 0&&(r=Sy),t===void 0&&(t=1/0);var a=n.call(this,r,function(){return a.frame})||this;return a.maxFrames=t,a.frame=0,a.index=-1,a}return e.prototype.flush=function(){for(var r=this,t=r.actions,a=r.maxFrames,s,c;(c=t[0])&&c.delay<=a&&(t.shift(),this.frame=c.delay,!(s=c.execute(c.state,c.delay))););if(s){for(;c=t.shift();)c.unsubscribe();throw s}},e.frameTimeFactor=10,e})(TL.AsyncScheduler);Pt.VirtualTimeScheduler=wL;var Sy=(function(n){wy(e,n);function e(r,t,a){a===void 0&&(a=r.index+=1);var s=n.call(this,r,t)||this;return s.scheduler=r,s.work=t,s.index=a,s.active=!0,s.index=r.index=a,s}return e.prototype.schedule=function(r,t){if(t===void 0&&(t=0),Number.isFinite(t)){if(!this.id)return n.prototype.schedule.call(this,r,t);this.active=!1;var a=new e(this.scheduler,this.work);return this.add(a),a.schedule(r,t)}else return OL.Subscription.EMPTY},e.prototype.requestAsyncId=function(r,t,a){a===void 0&&(a=0),this.delay=r.frame+a;var s=r.actions;return s.push(this),s.sort(e.sortActions),1},e.prototype.recycleAsyncId=function(r,t,a){a===void 0&&(a=0)},e.prototype._execute=function(r,t){if(this.active===!0)return n.prototype._execute.call(this,r,t)},e.sortActions=function(r,t){return r.delay===t.delay?r.index===t.index?0:r.index>t.index?1:-1:r.delay>t.delay?1:-1},e})(PL.AsyncAction);Pt.VirtualAction=Sy});var Or=b(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.empty=li.EMPTY=void 0;var Ay=ce();li.EMPTY=new Ay.Observable(function(n){return n.complete()});function SL(n){return n?CL(n):li.EMPTY}li.empty=SL;function CL(n){return new Ay.Observable(function(e){return n.schedule(function(){return e.complete()})})}});var bo=b(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.isScheduler=void 0;var AL=se();function EL(n){return n&&AL.isFunction(n.schedule)}ns.isScheduler=EL});var Ye=b(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.popNumber=Ot.popScheduler=Ot.popResultSelector=void 0;var LL=se(),ML=bo();function Ph(n){return n[n.length-1]}function qL(n){return LL.isFunction(Ph(n))?n.pop():void 0}Ot.popResultSelector=qL;function xL(n){return ML.isScheduler(Ph(n))?n.pop():void 0}Ot.popScheduler=xL;function jL(n,e){return typeof Ph(n)=="number"?n.pop():e}Ot.popNumber=jL});var as=b(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.isArrayLike=void 0;os.isArrayLike=(function(n){return n&&typeof n.length=="number"&&typeof n!="function"})});var Oh=b(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.isPromise=void 0;var IL=se();function FL(n){return IL.isFunction(n?.then)}ss.isPromise=FL});var Th=b(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.isInteropObservable=void 0;var DL=po(),kL=se();function RL(n){return kL.isFunction(n[DL.observable])}us.isInteropObservable=RL});var wh=b(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.isAsyncIterable=void 0;var VL=se();function NL(n){return Symbol.asyncIterator&&VL.isFunction(n?.[Symbol.asyncIterator])}cs.isAsyncIterable=NL});var Sh=b(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.createInvalidObservableTypeError=void 0;function WL(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}ls.createInvalidObservableTypeError=WL});var Ch=b(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.iterator=nn.getSymbolIterator=void 0;function Ey(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}nn.getSymbolIterator=Ey;nn.iterator=Ey()});var Ah=b(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.isIterable=void 0;var UL=Ch(),GL=se();function BL(n){return GL.isFunction(n?.[UL.iterator])}fs.isIterable=BL});var hs=b(hr=>{"use strict";var HL=hr&&hr.__generator||function(n,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,a,s,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(O){return p([m,O])}}function p(m){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,a&&(s=m[0]&2?a.return:m[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,m[1])).done)return s;switch(a=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,a=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(n,r)}catch(O){m=[6,O],a=0}finally{t=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},on=hr&&hr.__await||function(n){return this instanceof on?(this.v=n,this):new on(n)},zL=hr&&hr.__asyncGenerator||function(n,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r.apply(n,e||[]),a,s=[];return a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a;function c(q){t[q]&&(a[q]=function(j){return new Promise(function(I,F){s.push([q,j,I,F])>1||f(q,j)})})}function f(q,j){try{p(t[q](j))}catch(I){A(s[0][3],I)}}function p(q){q.value instanceof on?Promise.resolve(q.value.v).then(m,O):A(s[0][2],q)}function m(q){f("next",q)}function O(q){f("throw",q)}function A(q,j){q(j),s.shift(),s.length&&f(s[0][0],s[0][1])}};Object.defineProperty(hr,"__esModule",{value:!0});hr.isReadableStreamLike=hr.readableStreamLikeToAsyncGenerator=void 0;var $L=se();function YL(n){return zL(this,arguments,function(){var r,t,a,s;return HL(this,function(c){switch(c.label){case 0:r=n.getReader(),c.label=1;case 1:c.trys.push([1,,9,10]),c.label=2;case 2:return[4,on(r.read())];case 3:return t=c.sent(),a=t.value,s=t.done,s?[4,on(void 0)]:[3,5];case 4:return[2,c.sent()];case 5:return[4,on(a)];case 6:return[4,c.sent()];case 7:return c.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}hr.readableStreamLikeToAsyncGenerator=YL;function QL(n){return $L.isFunction(n?.getReader)}hr.isReadableStreamLike=QL});var Q=b(ve=>{"use strict";var XL=ve&&ve.__awaiter||function(n,e,r,t){function a(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function f(O){try{m(t.next(O))}catch(A){c(A)}}function p(O){try{m(t.throw(O))}catch(A){c(A)}}function m(O){O.done?s(O.value):a(O.value).then(f,p)}m((t=t.apply(n,e||[])).next())})},KL=ve&&ve.__generator||function(n,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,a,s,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(O){return p([m,O])}}function p(m){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,a&&(s=m[0]&2?a.return:m[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,m[1])).done)return s;switch(a=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,a=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(n,r)}catch(O){m=[6,O],a=0}finally{t=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},JL=ve&&ve.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],r;return e?e.call(n):(n=typeof Eh=="function"?Eh(n):n[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r);function t(s){r[s]=n[s]&&function(c){return new Promise(function(f,p){c=n[s](c),a(f,p,c.done,c.value)})}}function a(s,c,f,p){Promise.resolve(p).then(function(m){s({value:m,done:f})},c)}},Eh=ve&&ve.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ve,"__esModule",{value:!0});ve.fromReadableStreamLike=ve.fromAsyncIterable=ve.fromIterable=ve.fromPromise=ve.fromArrayLike=ve.fromInteropObservable=ve.innerFrom=void 0;var ZL=as(),eM=Oh(),an=ce(),rM=Th(),tM=wh(),iM=Sh(),nM=Ah(),Ly=hs(),oM=se(),aM=ah(),sM=po();function uM(n){if(n instanceof an.Observable)return n;if(n!=null){if(rM.isInteropObservable(n))return My(n);if(ZL.isArrayLike(n))return qy(n);if(eM.isPromise(n))return xy(n);if(tM.isAsyncIterable(n))return Lh(n);if(nM.isIterable(n))return jy(n);if(Ly.isReadableStreamLike(n))return Iy(n)}throw iM.createInvalidObservableTypeError(n)}ve.innerFrom=uM;function My(n){return new an.Observable(function(e){var r=n[sM.observable]();if(oM.isFunction(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}ve.fromInteropObservable=My;function qy(n){return new an.Observable(function(e){for(var r=0;r<n.length&&!e.closed;r++)e.next(n[r]);e.complete()})}ve.fromArrayLike=qy;function xy(n){return new an.Observable(function(e){n.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,aM.reportUnhandledError)})}ve.fromPromise=xy;function jy(n){return new an.Observable(function(e){var r,t;try{for(var a=Eh(n),s=a.next();!s.done;s=a.next()){var c=s.value;if(e.next(c),e.closed)return}}catch(f){r={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(r)throw r.error}}e.complete()})}ve.fromIterable=jy;function Lh(n){return new an.Observable(function(e){cM(n,e).catch(function(r){return e.error(r)})})}ve.fromAsyncIterable=Lh;function Iy(n){return Lh(Ly.readableStreamLikeToAsyncGenerator(n))}ve.fromReadableStreamLike=Iy;function cM(n,e){var r,t,a,s;return XL(this,void 0,void 0,function(){var c,f;return KL(this,function(p){switch(p.label){case 0:p.trys.push([0,5,6,11]),r=JL(n),p.label=1;case 1:return[4,r.next()];case 2:if(t=p.sent(),!!t.done)return[3,4];if(c=t.value,e.next(c),e.closed)return[2];p.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return f=p.sent(),a={error:f},[3,11];case 6:return p.trys.push([6,,9,10]),t&&!t.done&&(s=r.return)?[4,s.call(r)]:[3,8];case 7:p.sent(),p.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}});var Zr=b(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.executeSchedule=void 0;function lM(n,e,r,t,a){t===void 0&&(t=0),a===void 0&&(a=!1);var s=e.schedule(function(){r(),a?n.add(this.schedule(null,t)):this.unsubscribe()},t);if(n.add(s),!a)return s}ps.executeSchedule=lM});var sn=b(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.observeOn=void 0;var Mh=Zr(),fM=R(),hM=W();function pM(n,e){return e===void 0&&(e=0),fM.operate(function(r,t){r.subscribe(hM.createOperatorSubscriber(t,function(a){return Mh.executeSchedule(t,n,function(){return t.next(a)},e)},function(){return Mh.executeSchedule(t,n,function(){return t.complete()},e)},function(a){return Mh.executeSchedule(t,n,function(){return t.error(a)},e)}))})}ds.observeOn=pM});var un=b(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.subscribeOn=void 0;var dM=R();function vM(n,e){return e===void 0&&(e=0),dM.operate(function(r,t){t.add(n.schedule(function(){return r.subscribe(t)},e))})}vs.subscribeOn=vM});var Fy=b(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.scheduleObservable=void 0;var mM=Q(),gM=sn(),yM=un();function bM(n,e){return mM.innerFrom(n).pipe(yM.subscribeOn(e),gM.observeOn(e))}ms.scheduleObservable=bM});var Dy=b(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.schedulePromise=void 0;var _M=Q(),PM=sn(),OM=un();function TM(n,e){return _M.innerFrom(n).pipe(OM.subscribeOn(e),PM.observeOn(e))}gs.schedulePromise=TM});var ky=b(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.scheduleArray=void 0;var wM=ce();function SM(n,e){return new wM.Observable(function(r){var t=0;return e.schedule(function(){t===n.length?r.complete():(r.next(n[t++]),r.closed||this.schedule())})})}ys.scheduleArray=SM});var qh=b(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.scheduleIterable=void 0;var CM=ce(),AM=Ch(),EM=se(),Ry=Zr();function LM(n,e){return new CM.Observable(function(r){var t;return Ry.executeSchedule(r,e,function(){t=n[AM.iterator](),Ry.executeSchedule(r,e,function(){var a,s,c;try{a=t.next(),s=a.value,c=a.done}catch(f){r.error(f);return}c?r.complete():r.next(s)},0,!0)}),function(){return EM.isFunction(t?.return)&&t.return()}})}bs.scheduleIterable=LM});var xh=b(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.scheduleAsyncIterable=void 0;var MM=ce(),Vy=Zr();function qM(n,e){if(!n)throw new Error("Iterable cannot be null");return new MM.Observable(function(r){Vy.executeSchedule(r,e,function(){var t=n[Symbol.asyncIterator]();Vy.executeSchedule(r,e,function(){t.next().then(function(a){a.done?r.complete():r.next(a.value)})},0,!0)})})}_s.scheduleAsyncIterable=qM});var Ny=b(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.scheduleReadableStreamLike=void 0;var xM=xh(),jM=hs();function IM(n,e){return xM.scheduleAsyncIterable(jM.readableStreamLikeToAsyncGenerator(n),e)}Ps.scheduleReadableStreamLike=IM});var jh=b(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.scheduled=void 0;var FM=Fy(),DM=Dy(),kM=ky(),RM=qh(),VM=xh(),NM=Th(),WM=Oh(),UM=as(),GM=Ah(),BM=wh(),HM=Sh(),zM=hs(),$M=Ny();function YM(n,e){if(n!=null){if(NM.isInteropObservable(n))return FM.scheduleObservable(n,e);if(UM.isArrayLike(n))return kM.scheduleArray(n,e);if(WM.isPromise(n))return DM.schedulePromise(n,e);if(BM.isAsyncIterable(n))return VM.scheduleAsyncIterable(n,e);if(GM.isIterable(n))return RM.scheduleIterable(n,e);if(zM.isReadableStreamLike(n))return $M.scheduleReadableStreamLike(n,e)}throw HM.createInvalidObservableTypeError(n)}Os.scheduled=YM});var et=b(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.from=void 0;var QM=jh(),XM=Q();function KM(n,e){return e?QM.scheduled(n,e):XM.innerFrom(n)}Ts.from=KM});var Ss=b(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.of=void 0;var JM=Ye(),ZM=et();function eq(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=JM.popScheduler(n);return ZM.from(n,r)}ws.of=eq});var Ih=b(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.throwError=void 0;var rq=ce(),tq=se();function iq(n,e){var r=tq.isFunction(n)?n:function(){return n},t=function(a){return a.error(r())};return new rq.Observable(e?function(a){return e.schedule(t,0,a)}:t)}Cs.throwError=iq});var As=b(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.observeNotification=rt.Notification=rt.NotificationKind=void 0;var nq=Or(),oq=Ss(),aq=Ih(),sq=se(),uq;(function(n){n.NEXT="N",n.ERROR="E",n.COMPLETE="C"})(uq=rt.NotificationKind||(rt.NotificationKind={}));var cq=(function(){function n(e,r,t){this.kind=e,this.value=r,this.error=t,this.hasValue=e==="N"}return n.prototype.observe=function(e){return Wy(this,e)},n.prototype.do=function(e,r,t){var a=this,s=a.kind,c=a.value,f=a.error;return s==="N"?e?.(c):s==="E"?r?.(f):t?.()},n.prototype.accept=function(e,r,t){var a;return sq.isFunction((a=e)===null||a===void 0?void 0:a.next)?this.observe(e):this.do(e,r,t)},n.prototype.toObservable=function(){var e=this,r=e.kind,t=e.value,a=e.error,s=r==="N"?oq.of(t):r==="E"?aq.throwError(function(){return a}):r==="C"?nq.EMPTY:0;if(!s)throw new TypeError("Unexpected notification kind "+r);return s},n.createNext=function(e){return new n("N",e)},n.createError=function(e){return new n("E",void 0,e)},n.createComplete=function(){return n.completeNotification},n.completeNotification=new n("C"),n})();rt.Notification=cq;function Wy(n,e){var r,t,a,s=n,c=s.kind,f=s.value,p=s.error;if(typeof c!="string")throw new TypeError('Invalid notification, missing "kind"');c==="N"?(r=e.next)===null||r===void 0||r.call(e,f):c==="E"?(t=e.error)===null||t===void 0||t.call(e,p):(a=e.complete)===null||a===void 0||a.call(e)}rt.observeNotification=Wy});var Gy=b(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.isObservable=void 0;var lq=ce(),Uy=se();function fq(n){return!!n&&(n instanceof lq.Observable||Uy.isFunction(n.lift)&&Uy.isFunction(n.subscribe))}Es.isObservable=fq});var Tt=b(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.EmptyError=void 0;var hq=bt();Ls.EmptyError=hq.createErrorClass(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}})});var By=b(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.lastValueFrom=void 0;var pq=Tt();function dq(n,e){var r=typeof e=="object";return new Promise(function(t,a){var s=!1,c;n.subscribe({next:function(f){c=f,s=!0},error:a,complete:function(){s?t(c):r?t(e.defaultValue):a(new pq.EmptyError)}})})}Ms.lastValueFrom=dq});var Hy=b(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.firstValueFrom=void 0;var vq=Tt(),mq=Ri();function gq(n,e){var r=typeof e=="object";return new Promise(function(t,a){var s=new mq.SafeSubscriber({next:function(c){t(c),s.unsubscribe()},error:a,complete:function(){r?t(e.defaultValue):a(new vq.EmptyError)}});n.subscribe(s)})}qs.firstValueFrom=gq});var Fh=b(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.ArgumentOutOfRangeError=void 0;var yq=bt();xs.ArgumentOutOfRangeError=yq.createErrorClass(function(n){return function(){n(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})});var Dh=b(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.NotFoundError=void 0;var bq=bt();js.NotFoundError=bq.createErrorClass(function(n){return function(r){n(this),this.name="NotFoundError",this.message=r}})});var kh=b(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.SequenceError=void 0;var _q=bt();Is.SequenceError=_q.createErrorClass(function(n){return function(r){n(this),this.name="SequenceError",this.message=r}})});var Ds=b(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.isValidDate=void 0;function Pq(n){return n instanceof Date&&!isNaN(n)}Fs.isValidDate=Pq});var _o=b(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.timeout=fi.TimeoutError=void 0;var Oq=$e(),Tq=Ds(),wq=R(),Sq=Q(),Cq=bt(),Aq=W(),Eq=Zr();fi.TimeoutError=Cq.createErrorClass(function(n){return function(r){r===void 0&&(r=null),n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r}});function Lq(n,e){var r=Tq.isValidDate(n)?{first:n}:typeof n=="number"?{each:n}:n,t=r.first,a=r.each,s=r.with,c=s===void 0?Mq:s,f=r.scheduler,p=f===void 0?e??Oq.asyncScheduler:f,m=r.meta,O=m===void 0?null:m;if(t==null&&a==null)throw new TypeError("No timeout provided.");return wq.operate(function(A,q){var j,I,F=null,D=0,U=function(oe){I=Eq.executeSchedule(q,p,function(){try{j.unsubscribe(),Sq.innerFrom(c({meta:O,lastValue:F,seen:D})).subscribe(q)}catch(he){q.error(he)}},oe)};j=A.subscribe(Aq.createOperatorSubscriber(q,function(oe){I?.unsubscribe(),D++,q.next(F=oe),a>0&&U(a)},void 0,void 0,function(){I?.closed||I?.unsubscribe(),F=null})),!D&&U(t!=null?typeof t=="number"?t:+t-p.now():a)})}fi.timeout=Lq;function Mq(n){throw new fi.TimeoutError(n)}});var tt=b(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.map=void 0;var qq=R(),xq=W();function jq(n,e){return qq.operate(function(r,t){var a=0;r.subscribe(xq.createOperatorSubscriber(t,function(s){t.next(n.call(e,s,a++))}))})}ks.map=jq});var St=b(wt=>{"use strict";var Iq=wt&&wt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},Fq=wt&&wt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(wt,"__esModule",{value:!0});wt.mapOneOrManyArgs=void 0;var Dq=tt(),kq=Array.isArray;function Rq(n,e){return kq(e)?n.apply(void 0,Fq([],Iq(e))):n(e)}function Vq(n){return Dq.map(function(e){return Rq(n,e)})}wt.mapOneOrManyArgs=Vq});var Vh=b(Ct=>{"use strict";var Nq=Ct&&Ct.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},zy=Ct&&Ct.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.bindCallbackInternals=void 0;var Wq=bo(),Uq=ce(),Gq=un(),Bq=St(),Hq=sn(),zq=rs();function Rh(n,e,r,t){if(r)if(Wq.isScheduler(r))t=r;else return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return Rh(n,e,t).apply(this,a).pipe(Bq.mapOneOrManyArgs(r))};return t?function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return Rh(n,e).apply(this,a).pipe(Gq.subscribeOn(t),Hq.observeOn(t))}:function(){for(var a=this,s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];var f=new zq.AsyncSubject,p=!0;return new Uq.Observable(function(m){var O=f.subscribe(m);if(p){p=!1;var A=!1,q=!1;e.apply(a,zy(zy([],Nq(s)),[function(){for(var j=[],I=0;I<arguments.length;I++)j[I]=arguments[I];if(n){var F=j.shift();if(F!=null){f.error(F);return}}f.next(1<j.length?j:j[0]),q=!0,A&&f.complete()}])),q&&f.complete(),A=!0}return O})}}Ct.bindCallbackInternals=Rh});var $y=b(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.bindCallback=void 0;var $q=Vh();function Yq(n,e,r){return $q.bindCallbackInternals(!1,n,e,r)}Rs.bindCallback=Yq});var Yy=b(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.bindNodeCallback=void 0;var Qq=Vh();function Xq(n,e,r){return Qq.bindCallbackInternals(!0,n,e,r)}Vs.bindNodeCallback=Xq});var Nh=b(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.argsArgArrayOrObject=void 0;var Kq=Array.isArray,Jq=Object.getPrototypeOf,Zq=Object.prototype,ex=Object.keys;function rx(n){if(n.length===1){var e=n[0];if(Kq(e))return{args:e,keys:null};if(tx(e)){var r=ex(e);return{args:r.map(function(t){return e[t]}),keys:r}}}return{args:n,keys:null}}Ns.argsArgArrayOrObject=rx;function tx(n){return n&&typeof n=="object"&&Jq(n)===Zq}});var Wh=b(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.createObject=void 0;function ix(n,e){return n.reduce(function(r,t,a){return r[t]=e[a],r},{})}Ws.createObject=ix});var Us=b(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.combineLatestInit=cn.combineLatest=void 0;var nx=ce(),ox=Nh(),Ky=et(),Jy=Me(),ax=St(),Qy=Ye(),sx=Wh(),ux=W(),cx=Zr();function lx(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=Qy.popScheduler(n),t=Qy.popResultSelector(n),a=ox.argsArgArrayOrObject(n),s=a.args,c=a.keys;if(s.length===0)return Ky.from([],r);var f=new nx.Observable(Zy(s,r,c?function(p){return sx.createObject(c,p)}:Jy.identity));return t?f.pipe(ax.mapOneOrManyArgs(t)):f}cn.combineLatest=lx;function Zy(n,e,r){return r===void 0&&(r=Jy.identity),function(t){Xy(e,function(){for(var a=n.length,s=new Array(a),c=a,f=a,p=function(O){Xy(e,function(){var A=Ky.from(n[O],e),q=!1;A.subscribe(ux.createOperatorSubscriber(t,function(j){s[O]=j,q||(q=!0,f--),f||t.next(r(s.slice()))},function(){--c||t.complete()}))},t)},m=0;m<a;m++)p(m)},t)}}cn.combineLatestInit=Zy;function Xy(n,e,r){n?cx.executeSchedule(r,n,e):e()}});var Bs=b(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.mergeInternals=void 0;var fx=Q(),hx=Zr(),eb=W();function px(n,e,r,t,a,s,c,f){var p=[],m=0,O=0,A=!1,q=function(){A&&!p.length&&!m&&e.complete()},j=function(F){return m<t?I(F):p.push(F)},I=function(F){s&&e.next(F),m++;var D=!1;fx.innerFrom(r(F,O++)).subscribe(eb.createOperatorSubscriber(e,function(U){a?.(U),s?j(U):e.next(U)},function(){D=!0},void 0,function(){if(D)try{m--;for(var U=function(){var oe=p.shift();c?hx.executeSchedule(e,c,function(){return I(oe)}):I(oe)};p.length&&m<t;)U();q()}catch(oe){e.error(oe)}}))};return n.subscribe(eb.createOperatorSubscriber(e,j,function(){A=!0,q()})),function(){f?.()}}Gs.mergeInternals=px});var Fr=b(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.mergeMap=void 0;var dx=tt(),vx=Q(),mx=R(),gx=Bs(),yx=se();function rb(n,e,r){return r===void 0&&(r=1/0),yx.isFunction(e)?rb(function(t,a){return dx.map(function(s,c){return e(t,s,a,c)})(vx.innerFrom(n(t,a)))},r):(typeof e=="number"&&(r=e),mx.operate(function(t,a){return gx.mergeInternals(t,a,n,r)}))}Hs.mergeMap=rb});var ln=b(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.mergeAll=void 0;var bx=Fr(),_x=Me();function Px(n){return n===void 0&&(n=1/0),bx.mergeMap(_x.identity,n)}zs.mergeAll=Px});var Po=b($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.concatAll=void 0;var Ox=ln();function Tx(){return Ox.mergeAll(1)}$s.concatAll=Tx});var Oo=b(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.concat=void 0;var wx=Po(),Sx=Ye(),Cx=et();function Ax(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return wx.concatAll()(Cx.from(n,Sx.popScheduler(n)))}Ys.concat=Ax});var To=b(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.defer=void 0;var Ex=ce(),Lx=Q();function Mx(n){return new Ex.Observable(function(e){Lx.innerFrom(n()).subscribe(e)})}Qs.defer=Mx});var tb=b(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.connectable=void 0;var qx=qe(),xx=ce(),jx=To(),Ix={connector:function(){return new qx.Subject},resetOnDisconnect:!0};function Fx(n,e){e===void 0&&(e=Ix);var r=null,t=e.connector,a=e.resetOnDisconnect,s=a===void 0?!0:a,c=t(),f=new xx.Observable(function(p){return c.subscribe(p)});return f.connect=function(){return(!r||r.closed)&&(r=jx.defer(function(){return n}).subscribe(c),s&&r.add(function(){return c=t()})),r},f}Xs.connectable=Fx});var ib=b(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.forkJoin=void 0;var Dx=ce(),kx=Nh(),Rx=Q(),Vx=Ye(),Nx=W(),Wx=St(),Ux=Wh();function Gx(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=Vx.popResultSelector(n),t=kx.argsArgArrayOrObject(n),a=t.args,s=t.keys,c=new Dx.Observable(function(f){var p=a.length;if(!p){f.complete();return}for(var m=new Array(p),O=p,A=p,q=function(I){var F=!1;Rx.innerFrom(a[I]).subscribe(Nx.createOperatorSubscriber(f,function(D){F||(F=!0,A--),m[I]=D},function(){return O--},void 0,function(){(!O||!F)&&(A||f.next(s?Ux.createObject(s,m):m),f.complete())}))},j=0;j<p;j++)q(j)});return r?c.pipe(Wx.mapOneOrManyArgs(r)):c}Ks.forkJoin=Gx});var ob=b(fn=>{"use strict";var Bx=fn&&fn.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s};Object.defineProperty(fn,"__esModule",{value:!0});fn.fromEvent=void 0;var Hx=Q(),zx=ce(),$x=Fr(),Yx=as(),hi=se(),Qx=St(),Xx=["addListener","removeListener"],Kx=["addEventListener","removeEventListener"],Jx=["on","off"];function Uh(n,e,r,t){if(hi.isFunction(r)&&(t=r,r=void 0),t)return Uh(n,e,r).pipe(Qx.mapOneOrManyArgs(t));var a=Bx(rj(n)?Kx.map(function(f){return function(p){return n[f](e,p,r)}}):Zx(n)?Xx.map(nb(n,e)):ej(n)?Jx.map(nb(n,e)):[],2),s=a[0],c=a[1];if(!s&&Yx.isArrayLike(n))return $x.mergeMap(function(f){return Uh(f,e,r)})(Hx.innerFrom(n));if(!s)throw new TypeError("Invalid event target");return new zx.Observable(function(f){var p=function(){for(var m=[],O=0;O<arguments.length;O++)m[O]=arguments[O];return f.next(1<m.length?m:m[0])};return s(p),function(){return c(p)}})}fn.fromEvent=Uh;function nb(n,e){return function(r){return function(t){return n[r](e,t)}}}function Zx(n){return hi.isFunction(n.addListener)&&hi.isFunction(n.removeListener)}function ej(n){return hi.isFunction(n.on)&&hi.isFunction(n.off)}function rj(n){return hi.isFunction(n.addEventListener)&&hi.isFunction(n.removeEventListener)}});var sb=b(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.fromEventPattern=void 0;var tj=ce(),ij=se(),nj=St();function ab(n,e,r){return r?ab(n,e).pipe(nj.mapOneOrManyArgs(r)):new tj.Observable(function(t){var a=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return t.next(c.length===1?c[0]:c)},s=n(a);return ij.isFunction(e)?function(){return e(a,s)}:void 0})}Js.fromEventPattern=ab});var cb=b(hn=>{"use strict";var oj=hn&&hn.__generator||function(n,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,a,s,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(O){return p([m,O])}}function p(m){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,a&&(s=m[0]&2?a.return:m[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,m[1])).done)return s;switch(a=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,a=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(n,r)}catch(O){m=[6,O],a=0}finally{t=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(hn,"__esModule",{value:!0});hn.generate=void 0;var ub=Me(),aj=bo(),sj=To(),uj=qh();function cj(n,e,r,t,a){var s,c,f,p;arguments.length===1?(s=n,p=s.initialState,e=s.condition,r=s.iterate,c=s.resultSelector,f=c===void 0?ub.identity:c,a=s.scheduler):(p=n,!t||aj.isScheduler(t)?(f=ub.identity,a=t):f=t);function m(){var O;return oj(this,function(A){switch(A.label){case 0:O=p,A.label=1;case 1:return!e||e(O)?[4,f(O)]:[3,4];case 2:A.sent(),A.label=3;case 3:return O=r(O),[3,1];case 4:return[2]}})}return sj.defer(a?function(){return uj.scheduleIterable(m(),a)}:m)}hn.generate=cj});var lb=b(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.iif=void 0;var lj=To();function fj(n,e,r){return lj.defer(function(){return n()?e:r})}Zs.iif=fj});var At=b(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.timer=void 0;var hj=ce(),pj=$e(),dj=bo(),vj=Ds();function mj(n,e,r){n===void 0&&(n=0),r===void 0&&(r=pj.async);var t=-1;return e!=null&&(dj.isScheduler(e)?r=e:t=e),new hj.Observable(function(a){var s=vj.isValidDate(n)?+n-r.now():n;s<0&&(s=0);var c=0;return r.schedule(function(){a.closed||(a.next(c++),0<=t?this.schedule(void 0,t):a.complete())},s)})}eu.timer=mj});var Gh=b(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.interval=void 0;var gj=$e(),yj=At();function bj(n,e){return n===void 0&&(n=0),e===void 0&&(e=gj.asyncScheduler),n<0&&(n=0),yj.timer(n,n,e)}ru.interval=bj});var hb=b(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.merge=void 0;var _j=ln(),Pj=Q(),Oj=Or(),fb=Ye(),Tj=et();function wj(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=fb.popScheduler(n),t=fb.popNumber(n,1/0),a=n;return a.length?a.length===1?Pj.innerFrom(a[0]):_j.mergeAll(t)(Tj.from(a,r)):Oj.EMPTY}tu.merge=wj});var Bh=b(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.never=pi.NEVER=void 0;var Sj=ce(),Cj=Le();pi.NEVER=new Sj.Observable(Cj.noop);function Aj(){return pi.NEVER}pi.never=Aj});var di=b(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.argsOrArgArray=void 0;var Ej=Array.isArray;function Lj(n){return n.length===1&&Ej(n[0])?n[0]:n}iu.argsOrArgArray=Lj});var Hh=b(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.onErrorResumeNext=void 0;var Mj=ce(),qj=di(),xj=W(),pb=Le(),jj=Q();function Ij(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=qj.argsOrArgArray(n);return new Mj.Observable(function(t){var a=0,s=function(){if(a<r.length){var c=void 0;try{c=jj.innerFrom(r[a++])}catch{s();return}var f=new xj.OperatorSubscriber(t,void 0,pb.noop,pb.noop);c.subscribe(f),f.add(s)}else t.complete()};s()})}nu.onErrorResumeNext=Ij});var db=b(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.pairs=void 0;var Fj=et();function Dj(n,e){return Fj.from(Object.entries(n),e)}ou.pairs=Dj});var zh=b(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.not=void 0;function kj(n,e){return function(r,t){return!n.call(e,r,t)}}au.not=kj});var it=b(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.filter=void 0;var Rj=R(),Vj=W();function Nj(n,e){return Rj.operate(function(r,t){var a=0;r.subscribe(Vj.createOperatorSubscriber(t,function(s){return n.call(e,s,a++)&&t.next(s)}))})}su.filter=Nj});var gb=b(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.partition=void 0;var Wj=zh(),vb=it(),mb=Q();function Uj(n,e,r){return[vb.filter(e,r)(mb.innerFrom(n)),vb.filter(Wj.not(e,r))(mb.innerFrom(n))]}uu.partition=Uj});var $h=b(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.raceInit=pn.race=void 0;var Gj=ce(),yb=Q(),Bj=di(),Hj=W();function zj(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n=Bj.argsOrArgArray(n),n.length===1?yb.innerFrom(n[0]):new Gj.Observable(bb(n))}pn.race=zj;function bb(n){return function(e){for(var r=[],t=function(s){r.push(yb.innerFrom(n[s]).subscribe(Hj.createOperatorSubscriber(e,function(c){if(r){for(var f=0;f<r.length;f++)f!==s&&r[f].unsubscribe();r=null}e.next(c)})))},a=0;r&&!e.closed&&a<n.length;a++)t(a)}}pn.raceInit=bb});var _b=b(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.range=void 0;var $j=ce(),Yj=Or();function Qj(n,e,r){if(e==null&&(e=n,n=0),e<=0)return Yj.EMPTY;var t=e+n;return new $j.Observable(r?function(a){var s=n;return r.schedule(function(){s<t?(a.next(s++),this.schedule()):a.complete()})}:function(a){for(var s=n;s<t&&!a.closed;)a.next(s++);a.complete()})}cu.range=Qj});var Pb=b(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.using=void 0;var Xj=ce(),Kj=Q(),Jj=Or();function Zj(n,e){return new Xj.Observable(function(r){var t=n(),a=e(t),s=a?Kj.innerFrom(a):Jj.EMPTY;return s.subscribe(r),function(){t&&t.unsubscribe()}})}lu.using=Zj});var fu=b(Et=>{"use strict";var eI=Et&&Et.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},rI=Et&&Et.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Et,"__esModule",{value:!0});Et.zip=void 0;var tI=ce(),iI=Q(),nI=di(),oI=Or(),aI=W(),sI=Ye();function uI(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=sI.popResultSelector(n),t=nI.argsOrArgArray(n);return t.length?new tI.Observable(function(a){var s=t.map(function(){return[]}),c=t.map(function(){return!1});a.add(function(){s=c=null});for(var f=function(m){iI.innerFrom(t[m]).subscribe(aI.createOperatorSubscriber(a,function(O){if(s[m].push(O),s.every(function(q){return q.length})){var A=s.map(function(q){return q.shift()});a.next(r?r.apply(void 0,rI([],eI(A))):A),s.some(function(q,j){return!q.length&&c[j]})&&a.complete()}},function(){c[m]=!0,!s[m].length&&a.complete()}))},p=0;!a.closed&&p<t.length;p++)f(p);return function(){s=c=null}}):oI.EMPTY}Et.zip=uI});var Tb=b(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0})});var pu=b(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.audit=void 0;var cI=R(),lI=Q(),wb=W();function fI(n){return cI.operate(function(e,r){var t=!1,a=null,s=null,c=!1,f=function(){if(s?.unsubscribe(),s=null,t){t=!1;var m=a;a=null,r.next(m)}c&&r.complete()},p=function(){s=null,c&&r.complete()};e.subscribe(wb.createOperatorSubscriber(r,function(m){t=!0,a=m,s||lI.innerFrom(n(m)).subscribe(s=wb.createOperatorSubscriber(r,f,p))},function(){c=!0,(!t||!s||s.closed)&&r.complete()}))})}hu.audit=fI});var Yh=b(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.auditTime=void 0;var hI=$e(),pI=pu(),dI=At();function vI(n,e){return e===void 0&&(e=hI.asyncScheduler),pI.audit(function(){return dI.timer(n,e)})}du.auditTime=vI});var Qh=b(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.buffer=void 0;var mI=R(),gI=Le(),Sb=W(),yI=Q();function bI(n){return mI.operate(function(e,r){var t=[];return e.subscribe(Sb.createOperatorSubscriber(r,function(a){return t.push(a)},function(){r.next(t),r.complete()})),yI.innerFrom(n).subscribe(Sb.createOperatorSubscriber(r,function(){var a=t;t=[],r.next(a)},gI.noop)),function(){t=null}})}vu.buffer=bI});var Kh=b(dn=>{"use strict";var Xh=dn&&dn.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(dn,"__esModule",{value:!0});dn.bufferCount=void 0;var _I=R(),PI=W(),OI=Jr();function TI(n,e){return e===void 0&&(e=null),e=e??n,_I.operate(function(r,t){var a=[],s=0;r.subscribe(PI.createOperatorSubscriber(t,function(c){var f,p,m,O,A=null;s++%e===0&&a.push([]);try{for(var q=Xh(a),j=q.next();!j.done;j=q.next()){var I=j.value;I.push(c),n<=I.length&&(A=A??[],A.push(I))}}catch(U){f={error:U}}finally{try{j&&!j.done&&(p=q.return)&&p.call(q)}finally{if(f)throw f.error}}if(A)try{for(var F=Xh(A),D=F.next();!D.done;D=F.next()){var I=D.value;OI.arrRemove(a,I),t.next(I)}}catch(U){m={error:U}}finally{try{D&&!D.done&&(O=F.return)&&O.call(F)}finally{if(m)throw m.error}}},function(){var c,f;try{for(var p=Xh(a),m=p.next();!m.done;m=p.next()){var O=m.value;t.next(O)}}catch(A){c={error:A}}finally{try{m&&!m.done&&(f=p.return)&&f.call(p)}finally{if(c)throw c.error}}t.complete()},void 0,function(){a=null}))})}dn.bufferCount=TI});var Jh=b(vn=>{"use strict";var wI=vn&&vn.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(vn,"__esModule",{value:!0});vn.bufferTime=void 0;var SI=ir(),CI=R(),AI=W(),EI=Jr(),LI=$e(),MI=Ye(),Cb=Zr();function qI(n){for(var e,r,t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];var s=(e=MI.popScheduler(t))!==null&&e!==void 0?e:LI.asyncScheduler,c=(r=t[0])!==null&&r!==void 0?r:null,f=t[1]||1/0;return CI.operate(function(p,m){var O=[],A=!1,q=function(F){var D=F.buffer,U=F.subs;U.unsubscribe(),EI.arrRemove(O,F),m.next(D),A&&j()},j=function(){if(O){var F=new SI.Subscription;m.add(F);var D=[],U={buffer:D,subs:F};O.push(U),Cb.executeSchedule(F,s,function(){return q(U)},n)}};c!==null&&c>=0?Cb.executeSchedule(m,s,j,c,!0):A=!0,j();var I=AI.createOperatorSubscriber(m,function(F){var D,U,oe=O.slice();try{for(var he=wI(oe),Fe=he.next();!Fe.done;Fe=he.next()){var Te=Fe.value,We=Te.buffer;We.push(F),f<=We.length&&q(Te)}}catch(pr){D={error:pr}}finally{try{Fe&&!Fe.done&&(U=he.return)&&U.call(he)}finally{if(D)throw D.error}}},function(){for(;O?.length;)m.next(O.shift().buffer);I?.unsubscribe(),m.complete(),m.unsubscribe()},void 0,function(){return O=null});p.subscribe(I)})}vn.bufferTime=qI});var ep=b(mn=>{"use strict";var xI=mn&&mn.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mn,"__esModule",{value:!0});mn.bufferToggle=void 0;var jI=ir(),II=R(),Ab=Q(),Zh=W(),Eb=Le(),FI=Jr();function DI(n,e){return II.operate(function(r,t){var a=[];Ab.innerFrom(n).subscribe(Zh.createOperatorSubscriber(t,function(s){var c=[];a.push(c);var f=new jI.Subscription,p=function(){FI.arrRemove(a,c),t.next(c),f.unsubscribe()};f.add(Ab.innerFrom(e(s)).subscribe(Zh.createOperatorSubscriber(t,p,Eb.noop)))},Eb.noop)),r.subscribe(Zh.createOperatorSubscriber(t,function(s){var c,f;try{for(var p=xI(a),m=p.next();!m.done;m=p.next()){var O=m.value;O.push(s)}}catch(A){c={error:A}}finally{try{m&&!m.done&&(f=p.return)&&f.call(p)}finally{if(c)throw c.error}}},function(){for(;a.length>0;)t.next(a.shift());t.complete()}))})}mn.bufferToggle=DI});var rp=b(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.bufferWhen=void 0;var kI=R(),RI=Le(),Lb=W(),VI=Q();function NI(n){return kI.operate(function(e,r){var t=null,a=null,s=function(){a?.unsubscribe();var c=t;t=[],c&&r.next(c),VI.innerFrom(n()).subscribe(a=Lb.createOperatorSubscriber(r,s,RI.noop))};s(),e.subscribe(Lb.createOperatorSubscriber(r,function(c){return t?.push(c)},function(){t&&r.next(t),r.complete()},void 0,function(){return t=a=null}))})}mu.bufferWhen=NI});var tp=b(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.catchError=void 0;var WI=Q(),UI=W(),GI=R();function Mb(n){return GI.operate(function(e,r){var t=null,a=!1,s;t=e.subscribe(UI.createOperatorSubscriber(r,void 0,void 0,function(c){s=WI.innerFrom(n(c,Mb(n)(e))),t?(t.unsubscribe(),t=null,s.subscribe(r)):a=!0})),a&&(t.unsubscribe(),t=null,s.subscribe(r))})}gu.catchError=Mb});var ip=b(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.scanInternals=void 0;var BI=W();function HI(n,e,r,t,a){return function(s,c){var f=r,p=e,m=0;s.subscribe(BI.createOperatorSubscriber(c,function(O){var A=m++;p=f?n(p,O,A):(f=!0,O),t&&c.next(p)},a&&(function(){f&&c.next(p),c.complete()})))}}yu.scanInternals=HI});var vi=b(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.reduce=void 0;var zI=ip(),$I=R();function YI(n,e){return $I.operate(zI.scanInternals(n,e,arguments.length>=2,!1,!0))}bu.reduce=YI});var Pu=b(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.toArray=void 0;var QI=vi(),XI=R(),KI=function(n,e){return n.push(e),n};function JI(){return XI.operate(function(n,e){QI.reduce(KI,[])(n).subscribe(e)})}_u.toArray=JI});var np=b(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.joinAllInternals=void 0;var ZI=Me(),eF=St(),rF=vo(),tF=Fr(),iF=Pu();function nF(n,e){return rF.pipe(iF.toArray(),tF.mergeMap(function(r){return n(r)}),e?eF.mapOneOrManyArgs(e):ZI.identity)}Ou.joinAllInternals=nF});var wu=b(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.combineLatestAll=void 0;var oF=Us(),aF=np();function sF(n){return aF.joinAllInternals(oF.combineLatest,n)}Tu.combineLatestAll=sF});var op=b(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.combineAll=void 0;var uF=wu();Su.combineAll=uF.combineLatestAll});var ap=b(Lt=>{"use strict";var qb=Lt&&Lt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},xb=Lt&&Lt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.combineLatest=void 0;var cF=Us(),lF=R(),fF=di(),hF=St(),pF=vo(),dF=Ye();function jb(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=dF.popResultSelector(n);return r?pF.pipe(jb.apply(void 0,xb([],qb(n))),hF.mapOneOrManyArgs(r)):lF.operate(function(t,a){cF.combineLatestInit(xb([t],qb(fF.argsOrArgArray(n))))(a)})}Lt.combineLatest=jb});var sp=b(Mt=>{"use strict";var vF=Mt&&Mt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},mF=Mt&&Mt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.combineLatestWith=void 0;var gF=ap();function yF(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return gF.combineLatest.apply(void 0,mF([],vF(n)))}Mt.combineLatestWith=yF});var Au=b(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.concatMap=void 0;var Ib=Fr(),bF=se();function _F(n,e){return bF.isFunction(e)?Ib.mergeMap(n,e,1):Ib.mergeMap(n,1)}Cu.concatMap=_F});var up=b(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.concatMapTo=void 0;var Fb=Au(),PF=se();function OF(n,e){return PF.isFunction(e)?Fb.concatMap(function(){return n},e):Fb.concatMap(function(){return n})}Eu.concatMapTo=OF});var cp=b(qt=>{"use strict";var TF=qt&&qt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},wF=qt&&qt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(qt,"__esModule",{value:!0});qt.concat=void 0;var SF=R(),CF=Po(),AF=Ye(),EF=et();function LF(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=AF.popScheduler(n);return SF.operate(function(t,a){CF.concatAll()(EF.from(wF([t],TF(n)),r)).subscribe(a)})}qt.concat=LF});var lp=b(xt=>{"use strict";var MF=xt&&xt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},qF=xt&&xt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(xt,"__esModule",{value:!0});xt.concatWith=void 0;var xF=cp();function jF(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return xF.concat.apply(void 0,qF([],MF(n)))}xt.concatWith=jF});var Db=b(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.fromSubscribable=void 0;var IF=ce();function FF(n){return new IF.Observable(function(e){return n.subscribe(e)})}Lu.fromSubscribable=FF});var wo=b(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.connect=void 0;var DF=qe(),kF=Q(),RF=R(),VF=Db(),NF={connector:function(){return new DF.Subject}};function WF(n,e){e===void 0&&(e=NF);var r=e.connector;return RF.operate(function(t,a){var s=r();kF.innerFrom(n(VF.fromSubscribable(s))).subscribe(a),a.add(t.subscribe(s))})}Mu.connect=WF});var fp=b(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.count=void 0;var UF=vi();function GF(n){return UF.reduce(function(e,r,t){return!n||n(r,t)?e+1:e},0)}qu.count=GF});var hp=b(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.debounce=void 0;var BF=R(),HF=Le(),kb=W(),zF=Q();function $F(n){return BF.operate(function(e,r){var t=!1,a=null,s=null,c=function(){if(s?.unsubscribe(),s=null,t){t=!1;var f=a;a=null,r.next(f)}};e.subscribe(kb.createOperatorSubscriber(r,function(f){s?.unsubscribe(),t=!0,a=f,s=kb.createOperatorSubscriber(r,c,HF.noop),zF.innerFrom(n(f)).subscribe(s)},function(){c(),r.complete()},void 0,function(){a=s=null}))})}xu.debounce=$F});var pp=b(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.debounceTime=void 0;var YF=$e(),QF=R(),XF=W();function KF(n,e){return e===void 0&&(e=YF.asyncScheduler),QF.operate(function(r,t){var a=null,s=null,c=null,f=function(){if(a){a.unsubscribe(),a=null;var m=s;s=null,t.next(m)}};function p(){var m=c+n,O=e.now();if(O<m){a=this.schedule(void 0,m-O),t.add(a);return}f()}r.subscribe(XF.createOperatorSubscriber(t,function(m){s=m,c=e.now(),a||(a=e.schedule(p,n),t.add(a))},function(){f(),t.complete()},void 0,function(){s=a=null}))})}ju.debounceTime=KF});var gn=b(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.defaultIfEmpty=void 0;var JF=R(),ZF=W();function eD(n){return JF.operate(function(e,r){var t=!1;e.subscribe(ZF.createOperatorSubscriber(r,function(a){t=!0,r.next(a)},function(){t||r.next(n),r.complete()}))})}Iu.defaultIfEmpty=eD});var yn=b(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.take=void 0;var rD=Or(),tD=R(),iD=W();function nD(n){return n<=0?function(){return rD.EMPTY}:tD.operate(function(e,r){var t=0;e.subscribe(iD.createOperatorSubscriber(r,function(a){++t<=n&&(r.next(a),n<=t&&r.complete())}))})}Fu.take=nD});var ku=b(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.ignoreElements=void 0;var oD=R(),aD=W(),sD=Le();function uD(){return oD.operate(function(n,e){n.subscribe(aD.createOperatorSubscriber(e,sD.noop))})}Du.ignoreElements=uD});var Vu=b(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.mapTo=void 0;var cD=tt();function lD(n){return cD.map(function(){return n})}Ru.mapTo=lD});var Wu=b(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.delayWhen=void 0;var fD=Oo(),Rb=yn(),hD=ku(),pD=Vu(),dD=Fr(),vD=Q();function Vb(n,e){return e?function(r){return fD.concat(e.pipe(Rb.take(1),hD.ignoreElements()),r.pipe(Vb(n)))}:dD.mergeMap(function(r,t){return vD.innerFrom(n(r,t)).pipe(Rb.take(1),pD.mapTo(r))})}Nu.delayWhen=Vb});var dp=b(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.delay=void 0;var mD=$e(),gD=Wu(),yD=At();function bD(n,e){e===void 0&&(e=mD.asyncScheduler);var r=yD.timer(n,e);return gD.delayWhen(function(){return r})}Uu.delay=bD});var vp=b(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.dematerialize=void 0;var _D=As(),PD=R(),OD=W();function TD(){return PD.operate(function(n,e){n.subscribe(OD.createOperatorSubscriber(e,function(r){return _D.observeNotification(r,e)}))})}Gu.dematerialize=TD});var mp=b(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.distinct=void 0;var wD=R(),Nb=W(),SD=Le(),CD=Q();function AD(n,e){return wD.operate(function(r,t){var a=new Set;r.subscribe(Nb.createOperatorSubscriber(t,function(s){var c=n?n(s):s;a.has(c)||(a.add(c),t.next(s))})),e&&CD.innerFrom(e).subscribe(Nb.createOperatorSubscriber(t,function(){return a.clear()},SD.noop))})}Bu.distinct=AD});var zu=b(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.distinctUntilChanged=void 0;var ED=Me(),LD=R(),MD=W();function qD(n,e){return e===void 0&&(e=ED.identity),n=n??xD,LD.operate(function(r,t){var a,s=!0;r.subscribe(MD.createOperatorSubscriber(t,function(c){var f=e(c);(s||!n(a,f))&&(s=!1,a=f,t.next(c))}))})}Hu.distinctUntilChanged=qD;function xD(n,e){return n===e}});var gp=b($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.distinctUntilKeyChanged=void 0;var jD=zu();function ID(n,e){return jD.distinctUntilChanged(function(r,t){return e?e(r[n],t[n]):r[n]===t[n]})}$u.distinctUntilKeyChanged=ID});var bn=b(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.throwIfEmpty=void 0;var FD=Tt(),DD=R(),kD=W();function RD(n){return n===void 0&&(n=VD),DD.operate(function(e,r){var t=!1;e.subscribe(kD.createOperatorSubscriber(r,function(a){t=!0,r.next(a)},function(){return t?r.complete():r.error(n())}))})}Yu.throwIfEmpty=RD;function VD(){return new FD.EmptyError}});var yp=b(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.elementAt=void 0;var Wb=Fh(),ND=it(),WD=bn(),UD=gn(),GD=yn();function BD(n,e){if(n<0)throw new Wb.ArgumentOutOfRangeError;var r=arguments.length>=2;return function(t){return t.pipe(ND.filter(function(a,s){return s===n}),GD.take(1),r?UD.defaultIfEmpty(e):WD.throwIfEmpty(function(){return new Wb.ArgumentOutOfRangeError}))}}Qu.elementAt=BD});var bp=b(jt=>{"use strict";var HD=jt&&jt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},zD=jt&&jt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(jt,"__esModule",{value:!0});jt.endWith=void 0;var $D=Oo(),YD=Ss();function QD(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(r){return $D.concat(r,YD.of.apply(void 0,zD([],HD(n))))}}jt.endWith=QD});var _p=b(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.every=void 0;var XD=R(),KD=W();function JD(n,e){return XD.operate(function(r,t){var a=0;r.subscribe(KD.createOperatorSubscriber(t,function(s){n.call(e,s,a++,r)||(t.next(!1),t.complete())},function(){t.next(!0),t.complete()}))})}Xu.every=JD});var Ju=b(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.exhaustMap=void 0;var ZD=tt(),Ub=Q(),ek=R(),Gb=W();function Bb(n,e){return e?function(r){return r.pipe(Bb(function(t,a){return Ub.innerFrom(n(t,a)).pipe(ZD.map(function(s,c){return e(t,s,a,c)}))}))}:ek.operate(function(r,t){var a=0,s=null,c=!1;r.subscribe(Gb.createOperatorSubscriber(t,function(f){s||(s=Gb.createOperatorSubscriber(t,void 0,function(){s=null,c&&t.complete()}),Ub.innerFrom(n(f,a++)).subscribe(s))},function(){c=!0,!s&&t.complete()}))})}Ku.exhaustMap=Bb});var ec=b(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.exhaustAll=void 0;var rk=Ju(),tk=Me();function ik(){return rk.exhaustMap(tk.identity)}Zu.exhaustAll=ik});var Pp=b(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.exhaust=void 0;var nk=ec();rc.exhaust=nk.exhaustAll});var Op=b(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.expand=void 0;var ok=R(),ak=Bs();function sk(n,e,r){return e===void 0&&(e=1/0),e=(e||0)<1?1/0:e,ok.operate(function(t,a){return ak.mergeInternals(t,a,n,e,void 0,!0,r)})}tc.expand=sk});var Tp=b(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.finalize=void 0;var uk=R();function ck(n){return uk.operate(function(e,r){try{e.subscribe(r)}finally{r.add(n)}})}ic.finalize=ck});var nc=b(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.createFind=_n.find=void 0;var lk=R(),fk=W();function hk(n,e){return lk.operate(Hb(n,e,"value"))}_n.find=hk;function Hb(n,e,r){var t=r==="index";return function(a,s){var c=0;a.subscribe(fk.createOperatorSubscriber(s,function(f){var p=c++;n.call(e,f,p,a)&&(s.next(t?p:f),s.complete())},function(){s.next(t?-1:void 0),s.complete()}))}}_n.createFind=Hb});var wp=b(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.findIndex=void 0;var pk=R(),dk=nc();function vk(n,e){return pk.operate(dk.createFind(n,e,"index"))}oc.findIndex=vk});var Sp=b(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.first=void 0;var mk=Tt(),gk=it(),yk=yn(),bk=gn(),_k=bn(),Pk=Me();function Ok(n,e){var r=arguments.length>=2;return function(t){return t.pipe(n?gk.filter(function(a,s){return n(a,s,t)}):Pk.identity,yk.take(1),r?bk.defaultIfEmpty(e):_k.throwIfEmpty(function(){return new mk.EmptyError}))}}ac.first=Ok});var Cp=b(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.groupBy=void 0;var Tk=ce(),wk=Q(),Sk=qe(),Ck=R(),zb=W();function Ak(n,e,r,t){return Ck.operate(function(a,s){var c;!e||typeof e=="function"?c=e:(r=e.duration,c=e.element,t=e.connector);var f=new Map,p=function(I){f.forEach(I),I(s)},m=function(I){return p(function(F){return F.error(I)})},O=0,A=!1,q=new zb.OperatorSubscriber(s,function(I){try{var F=n(I),D=f.get(F);if(!D){f.set(F,D=t?t():new Sk.Subject);var U=j(F,D);if(s.next(U),r){var oe=zb.createOperatorSubscriber(D,function(){D.complete(),oe?.unsubscribe()},void 0,void 0,function(){return f.delete(F)});q.add(wk.innerFrom(r(U)).subscribe(oe))}}D.next(c?c(I):I)}catch(he){m(he)}},function(){return p(function(I){return I.complete()})},m,function(){return f.clear()},function(){return A=!0,O===0});a.subscribe(q);function j(I,F){var D=new Tk.Observable(function(U){O++;var oe=F.subscribe(U);return function(){oe.unsubscribe(),--O===0&&A&&q.unsubscribe()}});return D.key=I,D}})}sc.groupBy=Ak});var Ap=b(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.isEmpty=void 0;var Ek=R(),Lk=W();function Mk(){return Ek.operate(function(n,e){n.subscribe(Lk.createOperatorSubscriber(e,function(){e.next(!1),e.complete()},function(){e.next(!0),e.complete()}))})}uc.isEmpty=Mk});var cc=b(Pn=>{"use strict";var qk=Pn&&Pn.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.takeLast=void 0;var xk=Or(),jk=R(),Ik=W();function Fk(n){return n<=0?function(){return xk.EMPTY}:jk.operate(function(e,r){var t=[];e.subscribe(Ik.createOperatorSubscriber(r,function(a){t.push(a),n<t.length&&t.shift()},function(){var a,s;try{for(var c=qk(t),f=c.next();!f.done;f=c.next()){var p=f.value;r.next(p)}}catch(m){a={error:m}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}r.complete()},void 0,function(){t=null}))})}Pn.takeLast=Fk});var Ep=b(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.last=void 0;var Dk=Tt(),kk=it(),Rk=cc(),Vk=bn(),Nk=gn(),Wk=Me();function Uk(n,e){var r=arguments.length>=2;return function(t){return t.pipe(n?kk.filter(function(a,s){return n(a,s,t)}):Wk.identity,Rk.takeLast(1),r?Nk.defaultIfEmpty(e):Vk.throwIfEmpty(function(){return new Dk.EmptyError}))}}lc.last=Uk});var Mp=b(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.materialize=void 0;var Lp=As(),Gk=R(),Bk=W();function Hk(){return Gk.operate(function(n,e){n.subscribe(Bk.createOperatorSubscriber(e,function(r){e.next(Lp.Notification.createNext(r))},function(){e.next(Lp.Notification.createComplete()),e.complete()},function(r){e.next(Lp.Notification.createError(r)),e.complete()}))})}fc.materialize=Hk});var qp=b(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.max=void 0;var zk=vi(),$k=se();function Yk(n){return zk.reduce($k.isFunction(n)?function(e,r){return n(e,r)>0?e:r}:function(e,r){return e>r?e:r})}hc.max=Yk});var xp=b(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.flatMap=void 0;var Qk=Fr();pc.flatMap=Qk.mergeMap});var jp=b(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.mergeMapTo=void 0;var $b=Fr(),Xk=se();function Kk(n,e,r){return r===void 0&&(r=1/0),Xk.isFunction(e)?$b.mergeMap(function(){return n},e,r):(typeof e=="number"&&(r=e),$b.mergeMap(function(){return n},r))}dc.mergeMapTo=Kk});var Ip=b(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.mergeScan=void 0;var Jk=R(),Zk=Bs();function eR(n,e,r){return r===void 0&&(r=1/0),Jk.operate(function(t,a){var s=e;return Zk.mergeInternals(t,a,function(c,f){return n(s,c,f)},r,function(c){s=c},!1,void 0,function(){return s=null})})}vc.mergeScan=eR});var Fp=b(It=>{"use strict";var rR=It&&It.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},tR=It&&It.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(It,"__esModule",{value:!0});It.merge=void 0;var iR=R(),nR=ln(),Yb=Ye(),oR=et();function aR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=Yb.popScheduler(n),t=Yb.popNumber(n,1/0);return iR.operate(function(a,s){nR.mergeAll(t)(oR.from(tR([a],rR(n)),r)).subscribe(s)})}It.merge=aR});var Dp=b(Ft=>{"use strict";var sR=Ft&&Ft.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},uR=Ft&&Ft.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.mergeWith=void 0;var cR=Fp();function lR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return cR.merge.apply(void 0,uR([],sR(n)))}Ft.mergeWith=lR});var kp=b(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.min=void 0;var fR=vi(),hR=se();function pR(n){return fR.reduce(hR.isFunction(n)?function(e,r){return n(e,r)<0?e:r}:function(e,r){return e<r?e:r})}mc.min=pR});var So=b(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.multicast=void 0;var dR=mo(),Qb=se(),vR=wo();function mR(n,e){var r=Qb.isFunction(n)?n:function(){return n};return Qb.isFunction(e)?vR.connect(e,{connector:r}):function(t){return new dR.ConnectableObservable(t,r)}}gc.multicast=mR});var Rp=b(Dr=>{"use strict";var gR=Dr&&Dr.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},yR=Dr&&Dr.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.onErrorResumeNext=Dr.onErrorResumeNextWith=void 0;var bR=di(),_R=Hh();function Xb(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=bR.argsOrArgArray(n);return function(t){return _R.onErrorResumeNext.apply(void 0,yR([t],gR(r)))}}Dr.onErrorResumeNextWith=Xb;Dr.onErrorResumeNext=Xb});var Vp=b(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.pairwise=void 0;var PR=R(),OR=W();function TR(){return PR.operate(function(n,e){var r,t=!1;n.subscribe(OR.createOperatorSubscriber(e,function(a){var s=r;r=a,t&&e.next([s,a]),t=!0}))})}yc.pairwise=TR});var Np=b(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.pluck=void 0;var wR=tt();function SR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=n.length;if(r===0)throw new Error("list of properties cannot be empty.");return wR.map(function(t){for(var a=t,s=0;s<r;s++){var c=a?.[n[s]];if(typeof c<"u")a=c;else return}return a})}bc.pluck=SR});var Wp=b(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.publish=void 0;var CR=qe(),AR=So(),ER=wo();function LR(n){return n?function(e){return ER.connect(n)(e)}:function(e){return AR.multicast(new CR.Subject)(e)}}_c.publish=LR});var Up=b(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.publishBehavior=void 0;var MR=yh(),qR=mo();function xR(n){return function(e){var r=new MR.BehaviorSubject(n);return new qR.ConnectableObservable(e,function(){return r})}}Pc.publishBehavior=xR});var Gp=b(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.publishLast=void 0;var jR=rs(),IR=mo();function FR(){return function(n){var e=new jR.AsyncSubject;return new IR.ConnectableObservable(n,function(){return e})}}Oc.publishLast=FR});var Bp=b(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.publishReplay=void 0;var DR=es(),kR=So(),Kb=se();function RR(n,e,r,t){r&&!Kb.isFunction(r)&&(t=r);var a=Kb.isFunction(r)?r:void 0;return function(s){return kR.multicast(new DR.ReplaySubject(n,e,t),a)(s)}}Tc.publishReplay=RR});var wc=b(Dt=>{"use strict";var VR=Dt&&Dt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},NR=Dt&&Dt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.raceWith=void 0;var WR=$h(),UR=R(),GR=Me();function BR(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.length?UR.operate(function(r,t){WR.raceInit(NR([r],VR(n)))(t)}):GR.identity}Dt.raceWith=BR});var Hp=b(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.repeat=void 0;var HR=Or(),zR=R(),Jb=W(),$R=Q(),YR=At();function QR(n){var e,r=1/0,t;return n!=null&&(typeof n=="object"?(e=n.count,r=e===void 0?1/0:e,t=n.delay):r=n),r<=0?function(){return HR.EMPTY}:zR.operate(function(a,s){var c=0,f,p=function(){if(f?.unsubscribe(),f=null,t!=null){var O=typeof t=="number"?YR.timer(t):$R.innerFrom(t(c)),A=Jb.createOperatorSubscriber(s,function(){A.unsubscribe(),m()});O.subscribe(A)}else m()},m=function(){var O=!1;f=a.subscribe(Jb.createOperatorSubscriber(s,void 0,function(){++c<r?f?p():O=!0:s.complete()})),O&&p()};m()})}Sc.repeat=QR});var zp=b(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.repeatWhen=void 0;var XR=Q(),KR=qe(),JR=R(),Zb=W();function ZR(n){return JR.operate(function(e,r){var t,a=!1,s,c=!1,f=!1,p=function(){return f&&c&&(r.complete(),!0)},m=function(){return s||(s=new KR.Subject,XR.innerFrom(n(s)).subscribe(Zb.createOperatorSubscriber(r,function(){t?O():a=!0},function(){c=!0,p()}))),s},O=function(){f=!1,t=e.subscribe(Zb.createOperatorSubscriber(r,void 0,function(){f=!0,!p()&&m().next()})),a&&(t.unsubscribe(),t=null,a=!1,O())};O()})}Cc.repeatWhen=ZR});var $p=b(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.retry=void 0;var eV=R(),e_=W(),rV=Me(),tV=At(),iV=Q();function nV(n){n===void 0&&(n=1/0);var e;n&&typeof n=="object"?e=n:e={count:n};var r=e.count,t=r===void 0?1/0:r,a=e.delay,s=e.resetOnSuccess,c=s===void 0?!1:s;return t<=0?rV.identity:eV.operate(function(f,p){var m=0,O,A=function(){var q=!1;O=f.subscribe(e_.createOperatorSubscriber(p,function(j){c&&(m=0),p.next(j)},void 0,function(j){if(m++<t){var I=function(){O?(O.unsubscribe(),O=null,A()):q=!0};if(a!=null){var F=typeof a=="number"?tV.timer(a):iV.innerFrom(a(j,m)),D=e_.createOperatorSubscriber(p,function(){D.unsubscribe(),I()},function(){p.complete()});F.subscribe(D)}else I()}else p.error(j)})),q&&(O.unsubscribe(),O=null,A())};A()})}Ac.retry=nV});var Yp=b(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.retryWhen=void 0;var oV=Q(),aV=qe(),sV=R(),r_=W();function uV(n){return sV.operate(function(e,r){var t,a=!1,s,c=function(){t=e.subscribe(r_.createOperatorSubscriber(r,void 0,void 0,function(f){s||(s=new aV.Subject,oV.innerFrom(n(s)).subscribe(r_.createOperatorSubscriber(r,function(){return t?c():a=!0}))),s&&s.next(f)})),a&&(t.unsubscribe(),t=null,a=!1,c())};c()})}Ec.retryWhen=uV});var Mc=b(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.sample=void 0;var cV=Q(),lV=R(),fV=Le(),t_=W();function hV(n){return lV.operate(function(e,r){var t=!1,a=null;e.subscribe(t_.createOperatorSubscriber(r,function(s){t=!0,a=s})),cV.innerFrom(n).subscribe(t_.createOperatorSubscriber(r,function(){if(t){t=!1;var s=a;a=null,r.next(s)}},fV.noop))})}Lc.sample=hV});var Qp=b(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.sampleTime=void 0;var pV=$e(),dV=Mc(),vV=Gh();function mV(n,e){return e===void 0&&(e=pV.asyncScheduler),dV.sample(vV.interval(n,e))}qc.sampleTime=mV});var Xp=b(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.scan=void 0;var gV=R(),yV=ip();function bV(n,e){return gV.operate(yV.scanInternals(n,e,arguments.length>=2,!0))}xc.scan=bV});var Kp=b(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.sequenceEqual=void 0;var _V=R(),PV=W(),OV=Q();function TV(n,e){return e===void 0&&(e=function(r,t){return r===t}),_V.operate(function(r,t){var a=i_(),s=i_(),c=function(p){t.next(p),t.complete()},f=function(p,m){var O=PV.createOperatorSubscriber(t,function(A){var q=m.buffer,j=m.complete;q.length===0?j?c(!1):p.buffer.push(A):!e(A,q.shift())&&c(!1)},function(){p.complete=!0;var A=m.complete,q=m.buffer;A&&c(q.length===0),O?.unsubscribe()});return O};r.subscribe(f(a,s)),OV.innerFrom(n).subscribe(f(s,a))})}jc.sequenceEqual=TV;function i_(){return{buffer:[],complete:!1}}});var Ic=b(kt=>{"use strict";var wV=kt&&kt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},SV=kt&&kt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(kt,"__esModule",{value:!0});kt.share=void 0;var n_=Q(),CV=qe(),o_=Ri(),AV=R();function EV(n){n===void 0&&(n={});var e=n.connector,r=e===void 0?function(){return new CV.Subject}:e,t=n.resetOnError,a=t===void 0?!0:t,s=n.resetOnComplete,c=s===void 0?!0:s,f=n.resetOnRefCountZero,p=f===void 0?!0:f;return function(m){var O,A,q,j=0,I=!1,F=!1,D=function(){A?.unsubscribe(),A=void 0},U=function(){D(),O=q=void 0,I=F=!1},oe=function(){var he=O;U(),he?.unsubscribe()};return AV.operate(function(he,Fe){j++,!F&&!I&&D();var Te=q=q??r();Fe.add(function(){j--,j===0&&!F&&!I&&(A=Jp(oe,p))}),Te.subscribe(Fe),!O&&j>0&&(O=new o_.SafeSubscriber({next:function(We){return Te.next(We)},error:function(We){F=!0,D(),A=Jp(U,a,We),Te.error(We)},complete:function(){I=!0,D(),A=Jp(U,c),Te.complete()}}),n_.innerFrom(he).subscribe(O))})(m)}}kt.share=EV;function Jp(n,e){for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];if(e===!0){n();return}if(e!==!1){var a=new o_.SafeSubscriber({next:function(){a.unsubscribe(),n()}});return n_.innerFrom(e.apply(void 0,SV([],wV(r)))).subscribe(a)}}});var Zp=b(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.shareReplay=void 0;var LV=es(),MV=Ic();function qV(n,e,r){var t,a,s,c,f=!1;return n&&typeof n=="object"?(t=n.bufferSize,c=t===void 0?1/0:t,a=n.windowTime,e=a===void 0?1/0:a,s=n.refCount,f=s===void 0?!1:s,r=n.scheduler):c=n??1/0,MV.share({connector:function(){return new LV.ReplaySubject(c,e,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:f})}Fc.shareReplay=qV});var ed=b(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.single=void 0;var xV=Tt(),jV=kh(),IV=Dh(),FV=R(),DV=W();function kV(n){return FV.operate(function(e,r){var t=!1,a,s=!1,c=0;e.subscribe(DV.createOperatorSubscriber(r,function(f){s=!0,(!n||n(f,c++,e))&&(t&&r.error(new jV.SequenceError("Too many matching values")),t=!0,a=f)},function(){t?(r.next(a),r.complete()):r.error(s?new IV.NotFoundError("No matching values"):new xV.EmptyError)}))})}Dc.single=kV});var rd=b(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.skip=void 0;var RV=it();function VV(n){return RV.filter(function(e,r){return n<=r})}kc.skip=VV});var td=b(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.skipLast=void 0;var NV=Me(),WV=R(),UV=W();function GV(n){return n<=0?NV.identity:WV.operate(function(e,r){var t=new Array(n),a=0;return e.subscribe(UV.createOperatorSubscriber(r,function(s){var c=a++;if(c<n)t[c]=s;else{var f=c%n,p=t[f];t[f]=s,r.next(p)}})),function(){t=null}})}Rc.skipLast=GV});var id=b(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.skipUntil=void 0;var BV=R(),a_=W(),HV=Q(),zV=Le();function $V(n){return BV.operate(function(e,r){var t=!1,a=a_.createOperatorSubscriber(r,function(){a?.unsubscribe(),t=!0},zV.noop);HV.innerFrom(n).subscribe(a),e.subscribe(a_.createOperatorSubscriber(r,function(s){return t&&r.next(s)}))})}Vc.skipUntil=$V});var nd=b(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.skipWhile=void 0;var YV=R(),QV=W();function XV(n){return YV.operate(function(e,r){var t=!1,a=0;e.subscribe(QV.createOperatorSubscriber(r,function(s){return(t||(t=!n(s,a++)))&&r.next(s)}))})}Nc.skipWhile=XV});var od=b(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.startWith=void 0;var s_=Oo(),KV=Ye(),JV=R();function ZV(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=KV.popScheduler(n);return JV.operate(function(t,a){(r?s_.concat(n,t,r):s_.concat(n,t)).subscribe(a)})}Wc.startWith=ZV});var On=b(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.switchMap=void 0;var eN=Q(),rN=R(),u_=W();function tN(n,e){return rN.operate(function(r,t){var a=null,s=0,c=!1,f=function(){return c&&!a&&t.complete()};r.subscribe(u_.createOperatorSubscriber(t,function(p){a?.unsubscribe();var m=0,O=s++;eN.innerFrom(n(p,O)).subscribe(a=u_.createOperatorSubscriber(t,function(A){return t.next(e?e(p,A,O,m++):A)},function(){a=null,f()}))},function(){c=!0,f()}))})}Uc.switchMap=tN});var ad=b(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.switchAll=void 0;var iN=On(),nN=Me();function oN(){return iN.switchMap(nN.identity)}Gc.switchAll=oN});var sd=b(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.switchMapTo=void 0;var c_=On(),aN=se();function sN(n,e){return aN.isFunction(e)?c_.switchMap(function(){return n},e):c_.switchMap(function(){return n})}Bc.switchMapTo=sN});var ud=b(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.switchScan=void 0;var uN=On(),cN=R();function lN(n,e){return cN.operate(function(r,t){var a=e;return uN.switchMap(function(s,c){return n(a,s,c)},function(s,c){return a=c,c})(r).subscribe(t),function(){a=null}})}Hc.switchScan=lN});var cd=b(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.takeUntil=void 0;var fN=R(),hN=W(),pN=Q(),dN=Le();function vN(n){return fN.operate(function(e,r){pN.innerFrom(n).subscribe(hN.createOperatorSubscriber(r,function(){return r.complete()},dN.noop)),!r.closed&&e.subscribe(r)})}zc.takeUntil=vN});var ld=b($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.takeWhile=void 0;var mN=R(),gN=W();function yN(n,e){return e===void 0&&(e=!1),mN.operate(function(r,t){var a=0;r.subscribe(gN.createOperatorSubscriber(t,function(s){var c=n(s,a++);(c||e)&&t.next(s),!c&&t.complete()}))})}$c.takeWhile=yN});var fd=b(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.tap=void 0;var bN=se(),_N=R(),PN=W(),ON=Me();function TN(n,e,r){var t=bN.isFunction(n)||e||r?{next:n,error:e,complete:r}:n;return t?_N.operate(function(a,s){var c;(c=t.subscribe)===null||c===void 0||c.call(t);var f=!0;a.subscribe(PN.createOperatorSubscriber(s,function(p){var m;(m=t.next)===null||m===void 0||m.call(t,p),s.next(p)},function(){var p;f=!1,(p=t.complete)===null||p===void 0||p.call(t),s.complete()},function(p){var m;f=!1,(m=t.error)===null||m===void 0||m.call(t,p),s.error(p)},function(){var p,m;f&&((p=t.unsubscribe)===null||p===void 0||p.call(t)),(m=t.finalize)===null||m===void 0||m.call(t)}))}):ON.identity}Yc.tap=TN});var Xc=b(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.throttle=void 0;var wN=R(),l_=W(),SN=Q();function CN(n,e){return wN.operate(function(r,t){var a=e??{},s=a.leading,c=s===void 0?!0:s,f=a.trailing,p=f===void 0?!1:f,m=!1,O=null,A=null,q=!1,j=function(){A?.unsubscribe(),A=null,p&&(D(),q&&t.complete())},I=function(){A=null,q&&t.complete()},F=function(U){return A=SN.innerFrom(n(U)).subscribe(l_.createOperatorSubscriber(t,j,I))},D=function(){if(m){m=!1;var U=O;O=null,t.next(U),!q&&F(U)}};r.subscribe(l_.createOperatorSubscriber(t,function(U){m=!0,O=U,!(A&&!A.closed)&&(c?D():F(U))},function(){q=!0,!(p&&m&&A&&!A.closed)&&t.complete()}))})}Qc.throttle=CN});var hd=b(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.throttleTime=void 0;var AN=$e(),EN=Xc(),LN=At();function MN(n,e,r){e===void 0&&(e=AN.asyncScheduler);var t=LN.timer(n,e);return EN.throttle(function(){return t},r)}Kc.throttleTime=MN});var pd=b(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.TimeInterval=Tn.timeInterval=void 0;var qN=$e(),xN=R(),jN=W();function IN(n){return n===void 0&&(n=qN.asyncScheduler),xN.operate(function(e,r){var t=n.now();e.subscribe(jN.createOperatorSubscriber(r,function(a){var s=n.now(),c=s-t;t=s,r.next(new f_(a,c))}))})}Tn.timeInterval=IN;var f_=(function(){function n(e,r){this.value=e,this.interval=r}return n})();Tn.TimeInterval=f_});var dd=b(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.timeoutWith=void 0;var FN=$e(),DN=Ds(),kN=_o();function RN(n,e,r){var t,a,s;if(r=r??FN.async,DN.isValidDate(n)?t=n:typeof n=="number"&&(a=n),e)s=function(){return e};else throw new TypeError("No observable provided to switch to");if(t==null&&a==null)throw new TypeError("No timeout provided.");return kN.timeout({first:t,each:a,scheduler:r,with:s})}Jc.timeoutWith=RN});var vd=b(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.timestamp=void 0;var VN=Za(),NN=tt();function WN(n){return n===void 0&&(n=VN.dateTimestampProvider),NN.map(function(e){return{value:e,timestamp:n.now()}})}Zc.timestamp=WN});var md=b(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.window=void 0;var h_=qe(),UN=R(),p_=W(),GN=Le(),BN=Q();function HN(n){return UN.operate(function(e,r){var t=new h_.Subject;r.next(t.asObservable());var a=function(s){t.error(s),r.error(s)};return e.subscribe(p_.createOperatorSubscriber(r,function(s){return t?.next(s)},function(){t.complete(),r.complete()},a)),BN.innerFrom(n).subscribe(p_.createOperatorSubscriber(r,function(){t.complete(),r.next(t=new h_.Subject)},GN.noop,a)),function(){t?.unsubscribe(),t=null}})}el.window=HN});var gd=b(wn=>{"use strict";var zN=wn&&wn.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(wn,"__esModule",{value:!0});wn.windowCount=void 0;var d_=qe(),$N=R(),YN=W();function QN(n,e){e===void 0&&(e=0);var r=e>0?e:n;return $N.operate(function(t,a){var s=[new d_.Subject],c=[],f=0;a.next(s[0].asObservable()),t.subscribe(YN.createOperatorSubscriber(a,function(p){var m,O;try{for(var A=zN(s),q=A.next();!q.done;q=A.next()){var j=q.value;j.next(p)}}catch(D){m={error:D}}finally{try{q&&!q.done&&(O=A.return)&&O.call(A)}finally{if(m)throw m.error}}var I=f-n+1;if(I>=0&&I%r===0&&s.shift().complete(),++f%r===0){var F=new d_.Subject;s.push(F),a.next(F.asObservable())}},function(){for(;s.length>0;)s.shift().complete();a.complete()},function(p){for(;s.length>0;)s.shift().error(p);a.error(p)},function(){c=null,s=null}))})}wn.windowCount=QN});var yd=b(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.windowTime=void 0;var XN=qe(),KN=$e(),JN=ir(),ZN=R(),eW=W(),rW=Jr(),tW=Ye(),v_=Zr();function iW(n){for(var e,r,t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];var s=(e=tW.popScheduler(t))!==null&&e!==void 0?e:KN.asyncScheduler,c=(r=t[0])!==null&&r!==void 0?r:null,f=t[1]||1/0;return ZN.operate(function(p,m){var O=[],A=!1,q=function(D){var U=D.window,oe=D.subs;U.complete(),oe.unsubscribe(),rW.arrRemove(O,D),A&&j()},j=function(){if(O){var D=new JN.Subscription;m.add(D);var U=new XN.Subject,oe={window:U,subs:D,seen:0};O.push(oe),m.next(U.asObservable()),v_.executeSchedule(D,s,function(){return q(oe)},n)}};c!==null&&c>=0?v_.executeSchedule(m,s,j,c,!0):A=!0,j();var I=function(D){return O.slice().forEach(D)},F=function(D){I(function(U){var oe=U.window;return D(oe)}),D(m),m.unsubscribe()};return p.subscribe(eW.createOperatorSubscriber(m,function(D){I(function(U){U.window.next(D),f<=++U.seen&&q(U)})},function(){return F(function(D){return D.complete()})},function(D){return F(function(U){return U.error(D)})})),function(){O=null}})}rl.windowTime=iW});var _d=b(Sn=>{"use strict";var nW=Sn&&Sn.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.windowToggle=void 0;var oW=qe(),aW=ir(),sW=R(),m_=Q(),bd=W(),g_=Le(),uW=Jr();function cW(n,e){return sW.operate(function(r,t){var a=[],s=function(c){for(;0<a.length;)a.shift().error(c);t.error(c)};m_.innerFrom(n).subscribe(bd.createOperatorSubscriber(t,function(c){var f=new oW.Subject;a.push(f);var p=new aW.Subscription,m=function(){uW.arrRemove(a,f),f.complete(),p.unsubscribe()},O;try{O=m_.innerFrom(e(c))}catch(A){s(A);return}t.next(f.asObservable()),p.add(O.subscribe(bd.createOperatorSubscriber(t,m,g_.noop,s)))},g_.noop)),r.subscribe(bd.createOperatorSubscriber(t,function(c){var f,p,m=a.slice();try{for(var O=nW(m),A=O.next();!A.done;A=O.next()){var q=A.value;q.next(c)}}catch(j){f={error:j}}finally{try{A&&!A.done&&(p=O.return)&&p.call(O)}finally{if(f)throw f.error}}},function(){for(;0<a.length;)a.shift().complete();t.complete()},s,function(){for(;0<a.length;)a.shift().unsubscribe()}))})}Sn.windowToggle=cW});var Pd=b(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.windowWhen=void 0;var lW=qe(),fW=R(),y_=W(),hW=Q();function pW(n){return fW.operate(function(e,r){var t,a,s=function(f){t.error(f),r.error(f)},c=function(){a?.unsubscribe(),t?.complete(),t=new lW.Subject,r.next(t.asObservable());var f;try{f=hW.innerFrom(n())}catch(p){s(p);return}f.subscribe(a=y_.createOperatorSubscriber(r,c,c,s))};c(),e.subscribe(y_.createOperatorSubscriber(r,function(f){return t.next(f)},function(){t.complete(),r.complete()},s,function(){a?.unsubscribe(),t=null}))})}tl.windowWhen=pW});var Od=b(Rt=>{"use strict";var b_=Rt&&Rt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},__=Rt&&Rt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.withLatestFrom=void 0;var dW=R(),P_=W(),vW=Q(),mW=Me(),gW=Le(),yW=Ye();function bW(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=yW.popResultSelector(n);return dW.operate(function(t,a){for(var s=n.length,c=new Array(s),f=n.map(function(){return!1}),p=!1,m=function(A){vW.innerFrom(n[A]).subscribe(P_.createOperatorSubscriber(a,function(q){c[A]=q,!p&&!f[A]&&(f[A]=!0,(p=f.every(mW.identity))&&(f=null))},gW.noop))},O=0;O<s;O++)m(O);t.subscribe(P_.createOperatorSubscriber(a,function(A){if(p){var q=__([A],b_(c));a.next(r?r.apply(void 0,__([],b_(q))):q)}}))})}Rt.withLatestFrom=bW});var Td=b(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.zipAll=void 0;var _W=fu(),PW=np();function OW(n){return PW.joinAllInternals(_W.zip,n)}il.zipAll=OW});var wd=b(Vt=>{"use strict";var TW=Vt&&Vt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},wW=Vt&&Vt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.zip=void 0;var SW=fu(),CW=R();function AW(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return CW.operate(function(r,t){SW.zip.apply(void 0,wW([r],TW(n))).subscribe(t)})}Vt.zip=AW});var Sd=b(Nt=>{"use strict";var EW=Nt&&Nt.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},LW=Nt&&Nt.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.zipWith=void 0;var MW=wd();function qW(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return MW.zip.apply(void 0,LW([],EW(n)))}Nt.zipWith=qW});var Wt=b(d=>{"use strict";var xW=d&&d.__createBinding||(Object.create?(function(n,e,r,t){t===void 0&&(t=r),Object.defineProperty(n,t,{enumerable:!0,get:function(){return e[r]}})}):(function(n,e,r,t){t===void 0&&(t=r),n[t]=e[r]})),jW=d&&d.__exportStar||function(n,e){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xW(e,n,r)};Object.defineProperty(d,"__esModule",{value:!0});d.interval=d.iif=d.generate=d.fromEventPattern=d.fromEvent=d.from=d.forkJoin=d.empty=d.defer=d.connectable=d.concat=d.combineLatest=d.bindNodeCallback=d.bindCallback=d.UnsubscriptionError=d.TimeoutError=d.SequenceError=d.ObjectUnsubscribedError=d.NotFoundError=d.EmptyError=d.ArgumentOutOfRangeError=d.firstValueFrom=d.lastValueFrom=d.isObservable=d.identity=d.noop=d.pipe=d.NotificationKind=d.Notification=d.Subscriber=d.Subscription=d.Scheduler=d.VirtualAction=d.VirtualTimeScheduler=d.animationFrameScheduler=d.animationFrame=d.queueScheduler=d.queue=d.asyncScheduler=d.async=d.asapScheduler=d.asap=d.AsyncSubject=d.ReplaySubject=d.BehaviorSubject=d.Subject=d.animationFrames=d.observable=d.ConnectableObservable=d.Observable=void 0;d.filter=d.expand=d.exhaustMap=d.exhaustAll=d.exhaust=d.every=d.endWith=d.elementAt=d.distinctUntilKeyChanged=d.distinctUntilChanged=d.distinct=d.dematerialize=d.delayWhen=d.delay=d.defaultIfEmpty=d.debounceTime=d.debounce=d.count=d.connect=d.concatWith=d.concatMapTo=d.concatMap=d.concatAll=d.combineLatestWith=d.combineLatestAll=d.combineAll=d.catchError=d.bufferWhen=d.bufferToggle=d.bufferTime=d.bufferCount=d.buffer=d.auditTime=d.audit=d.config=d.NEVER=d.EMPTY=d.scheduled=d.zip=d.using=d.timer=d.throwError=d.range=d.race=d.partition=d.pairs=d.onErrorResumeNext=d.of=d.never=d.merge=void 0;d.switchMap=d.switchAll=d.subscribeOn=d.startWith=d.skipWhile=d.skipUntil=d.skipLast=d.skip=d.single=d.shareReplay=d.share=d.sequenceEqual=d.scan=d.sampleTime=d.sample=d.refCount=d.retryWhen=d.retry=d.repeatWhen=d.repeat=d.reduce=d.raceWith=d.publishReplay=d.publishLast=d.publishBehavior=d.publish=d.pluck=d.pairwise=d.onErrorResumeNextWith=d.observeOn=d.multicast=d.min=d.mergeWith=d.mergeScan=d.mergeMapTo=d.mergeMap=d.flatMap=d.mergeAll=d.max=d.materialize=d.mapTo=d.map=d.last=d.isEmpty=d.ignoreElements=d.groupBy=d.first=d.findIndex=d.find=d.finalize=void 0;d.zipWith=d.zipAll=d.withLatestFrom=d.windowWhen=d.windowToggle=d.windowTime=d.windowCount=d.window=d.toArray=d.timestamp=d.timeoutWith=d.timeout=d.timeInterval=d.throwIfEmpty=d.throttleTime=d.throttle=d.tap=d.takeWhile=d.takeUntil=d.takeLast=d.take=d.switchScan=d.switchMapTo=void 0;var IW=ce();Object.defineProperty(d,"Observable",{enumerable:!0,get:function(){return IW.Observable}});var FW=mo();Object.defineProperty(d,"ConnectableObservable",{enumerable:!0,get:function(){return FW.ConnectableObservable}});var DW=po();Object.defineProperty(d,"observable",{enumerable:!0,get:function(){return DW.observable}});var kW=Zg();Object.defineProperty(d,"animationFrames",{enumerable:!0,get:function(){return kW.animationFrames}});var RW=qe();Object.defineProperty(d,"Subject",{enumerable:!0,get:function(){return RW.Subject}});var VW=yh();Object.defineProperty(d,"BehaviorSubject",{enumerable:!0,get:function(){return VW.BehaviorSubject}});var NW=es();Object.defineProperty(d,"ReplaySubject",{enumerable:!0,get:function(){return NW.ReplaySubject}});var WW=rs();Object.defineProperty(d,"AsyncSubject",{enumerable:!0,get:function(){return WW.AsyncSubject}});var O_=my();Object.defineProperty(d,"asap",{enumerable:!0,get:function(){return O_.asap}});Object.defineProperty(d,"asapScheduler",{enumerable:!0,get:function(){return O_.asapScheduler}});var T_=$e();Object.defineProperty(d,"async",{enumerable:!0,get:function(){return T_.async}});Object.defineProperty(d,"asyncScheduler",{enumerable:!0,get:function(){return T_.asyncScheduler}});var w_=by();Object.defineProperty(d,"queue",{enumerable:!0,get:function(){return w_.queue}});Object.defineProperty(d,"queueScheduler",{enumerable:!0,get:function(){return w_.queueScheduler}});var S_=Ty();Object.defineProperty(d,"animationFrame",{enumerable:!0,get:function(){return S_.animationFrame}});Object.defineProperty(d,"animationFrameScheduler",{enumerable:!0,get:function(){return S_.animationFrameScheduler}});var C_=Cy();Object.defineProperty(d,"VirtualTimeScheduler",{enumerable:!0,get:function(){return C_.VirtualTimeScheduler}});Object.defineProperty(d,"VirtualAction",{enumerable:!0,get:function(){return C_.VirtualAction}});var UW=_h();Object.defineProperty(d,"Scheduler",{enumerable:!0,get:function(){return UW.Scheduler}});var GW=ir();Object.defineProperty(d,"Subscription",{enumerable:!0,get:function(){return GW.Subscription}});var BW=Ri();Object.defineProperty(d,"Subscriber",{enumerable:!0,get:function(){return BW.Subscriber}});var A_=As();Object.defineProperty(d,"Notification",{enumerable:!0,get:function(){return A_.Notification}});Object.defineProperty(d,"NotificationKind",{enumerable:!0,get:function(){return A_.NotificationKind}});var HW=vo();Object.defineProperty(d,"pipe",{enumerable:!0,get:function(){return HW.pipe}});var zW=Le();Object.defineProperty(d,"noop",{enumerable:!0,get:function(){return zW.noop}});var $W=Me();Object.defineProperty(d,"identity",{enumerable:!0,get:function(){return $W.identity}});var YW=Gy();Object.defineProperty(d,"isObservable",{enumerable:!0,get:function(){return YW.isObservable}});var QW=By();Object.defineProperty(d,"lastValueFrom",{enumerable:!0,get:function(){return QW.lastValueFrom}});var XW=Hy();Object.defineProperty(d,"firstValueFrom",{enumerable:!0,get:function(){return XW.firstValueFrom}});var KW=Fh();Object.defineProperty(d,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return KW.ArgumentOutOfRangeError}});var JW=Tt();Object.defineProperty(d,"EmptyError",{enumerable:!0,get:function(){return JW.EmptyError}});var ZW=Dh();Object.defineProperty(d,"NotFoundError",{enumerable:!0,get:function(){return ZW.NotFoundError}});var eU=dh();Object.defineProperty(d,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return eU.ObjectUnsubscribedError}});var rU=kh();Object.defineProperty(d,"SequenceError",{enumerable:!0,get:function(){return rU.SequenceError}});var tU=_o();Object.defineProperty(d,"TimeoutError",{enumerable:!0,get:function(){return tU.TimeoutError}});var iU=th();Object.defineProperty(d,"UnsubscriptionError",{enumerable:!0,get:function(){return iU.UnsubscriptionError}});var nU=$y();Object.defineProperty(d,"bindCallback",{enumerable:!0,get:function(){return nU.bindCallback}});var oU=Yy();Object.defineProperty(d,"bindNodeCallback",{enumerable:!0,get:function(){return oU.bindNodeCallback}});var aU=Us();Object.defineProperty(d,"combineLatest",{enumerable:!0,get:function(){return aU.combineLatest}});var sU=Oo();Object.defineProperty(d,"concat",{enumerable:!0,get:function(){return sU.concat}});var uU=tb();Object.defineProperty(d,"connectable",{enumerable:!0,get:function(){return uU.connectable}});var cU=To();Object.defineProperty(d,"defer",{enumerable:!0,get:function(){return cU.defer}});var lU=Or();Object.defineProperty(d,"empty",{enumerable:!0,get:function(){return lU.empty}});var fU=ib();Object.defineProperty(d,"forkJoin",{enumerable:!0,get:function(){return fU.forkJoin}});var hU=et();Object.defineProperty(d,"from",{enumerable:!0,get:function(){return hU.from}});var pU=ob();Object.defineProperty(d,"fromEvent",{enumerable:!0,get:function(){return pU.fromEvent}});var dU=sb();Object.defineProperty(d,"fromEventPattern",{enumerable:!0,get:function(){return dU.fromEventPattern}});var vU=cb();Object.defineProperty(d,"generate",{enumerable:!0,get:function(){return vU.generate}});var mU=lb();Object.defineProperty(d,"iif",{enumerable:!0,get:function(){return mU.iif}});var gU=Gh();Object.defineProperty(d,"interval",{enumerable:!0,get:function(){return gU.interval}});var yU=hb();Object.defineProperty(d,"merge",{enumerable:!0,get:function(){return yU.merge}});var bU=Bh();Object.defineProperty(d,"never",{enumerable:!0,get:function(){return bU.never}});var _U=Ss();Object.defineProperty(d,"of",{enumerable:!0,get:function(){return _U.of}});var PU=Hh();Object.defineProperty(d,"onErrorResumeNext",{enumerable:!0,get:function(){return PU.onErrorResumeNext}});var OU=db();Object.defineProperty(d,"pairs",{enumerable:!0,get:function(){return OU.pairs}});var TU=gb();Object.defineProperty(d,"partition",{enumerable:!0,get:function(){return TU.partition}});var wU=$h();Object.defineProperty(d,"race",{enumerable:!0,get:function(){return wU.race}});var SU=_b();Object.defineProperty(d,"range",{enumerable:!0,get:function(){return SU.range}});var CU=Ih();Object.defineProperty(d,"throwError",{enumerable:!0,get:function(){return CU.throwError}});var AU=At();Object.defineProperty(d,"timer",{enumerable:!0,get:function(){return AU.timer}});var EU=Pb();Object.defineProperty(d,"using",{enumerable:!0,get:function(){return EU.using}});var LU=fu();Object.defineProperty(d,"zip",{enumerable:!0,get:function(){return LU.zip}});var MU=jh();Object.defineProperty(d,"scheduled",{enumerable:!0,get:function(){return MU.scheduled}});var qU=Or();Object.defineProperty(d,"EMPTY",{enumerable:!0,get:function(){return qU.EMPTY}});var xU=Bh();Object.defineProperty(d,"NEVER",{enumerable:!0,get:function(){return xU.NEVER}});jW(Tb(),d);var jU=Di();Object.defineProperty(d,"config",{enumerable:!0,get:function(){return jU.config}});var IU=pu();Object.defineProperty(d,"audit",{enumerable:!0,get:function(){return IU.audit}});var FU=Yh();Object.defineProperty(d,"auditTime",{enumerable:!0,get:function(){return FU.auditTime}});var DU=Qh();Object.defineProperty(d,"buffer",{enumerable:!0,get:function(){return DU.buffer}});var kU=Kh();Object.defineProperty(d,"bufferCount",{enumerable:!0,get:function(){return kU.bufferCount}});var RU=Jh();Object.defineProperty(d,"bufferTime",{enumerable:!0,get:function(){return RU.bufferTime}});var VU=ep();Object.defineProperty(d,"bufferToggle",{enumerable:!0,get:function(){return VU.bufferToggle}});var NU=rp();Object.defineProperty(d,"bufferWhen",{enumerable:!0,get:function(){return NU.bufferWhen}});var WU=tp();Object.defineProperty(d,"catchError",{enumerable:!0,get:function(){return WU.catchError}});var UU=op();Object.defineProperty(d,"combineAll",{enumerable:!0,get:function(){return UU.combineAll}});var GU=wu();Object.defineProperty(d,"combineLatestAll",{enumerable:!0,get:function(){return GU.combineLatestAll}});var BU=sp();Object.defineProperty(d,"combineLatestWith",{enumerable:!0,get:function(){return BU.combineLatestWith}});var HU=Po();Object.defineProperty(d,"concatAll",{enumerable:!0,get:function(){return HU.concatAll}});var zU=Au();Object.defineProperty(d,"concatMap",{enumerable:!0,get:function(){return zU.concatMap}});var $U=up();Object.defineProperty(d,"concatMapTo",{enumerable:!0,get:function(){return $U.concatMapTo}});var YU=lp();Object.defineProperty(d,"concatWith",{enumerable:!0,get:function(){return YU.concatWith}});var QU=wo();Object.defineProperty(d,"connect",{enumerable:!0,get:function(){return QU.connect}});var XU=fp();Object.defineProperty(d,"count",{enumerable:!0,get:function(){return XU.count}});var KU=hp();Object.defineProperty(d,"debounce",{enumerable:!0,get:function(){return KU.debounce}});var JU=pp();Object.defineProperty(d,"debounceTime",{enumerable:!0,get:function(){return JU.debounceTime}});var ZU=gn();Object.defineProperty(d,"defaultIfEmpty",{enumerable:!0,get:function(){return ZU.defaultIfEmpty}});var eG=dp();Object.defineProperty(d,"delay",{enumerable:!0,get:function(){return eG.delay}});var rG=Wu();Object.defineProperty(d,"delayWhen",{enumerable:!0,get:function(){return rG.delayWhen}});var tG=vp();Object.defineProperty(d,"dematerialize",{enumerable:!0,get:function(){return tG.dematerialize}});var iG=mp();Object.defineProperty(d,"distinct",{enumerable:!0,get:function(){return iG.distinct}});var nG=zu();Object.defineProperty(d,"distinctUntilChanged",{enumerable:!0,get:function(){return nG.distinctUntilChanged}});var oG=gp();Object.defineProperty(d,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return oG.distinctUntilKeyChanged}});var aG=yp();Object.defineProperty(d,"elementAt",{enumerable:!0,get:function(){return aG.elementAt}});var sG=bp();Object.defineProperty(d,"endWith",{enumerable:!0,get:function(){return sG.endWith}});var uG=_p();Object.defineProperty(d,"every",{enumerable:!0,get:function(){return uG.every}});var cG=Pp();Object.defineProperty(d,"exhaust",{enumerable:!0,get:function(){return cG.exhaust}});var lG=ec();Object.defineProperty(d,"exhaustAll",{enumerable:!0,get:function(){return lG.exhaustAll}});var fG=Ju();Object.defineProperty(d,"exhaustMap",{enumerable:!0,get:function(){return fG.exhaustMap}});var hG=Op();Object.defineProperty(d,"expand",{enumerable:!0,get:function(){return hG.expand}});var pG=it();Object.defineProperty(d,"filter",{enumerable:!0,get:function(){return pG.filter}});var dG=Tp();Object.defineProperty(d,"finalize",{enumerable:!0,get:function(){return dG.finalize}});var vG=nc();Object.defineProperty(d,"find",{enumerable:!0,get:function(){return vG.find}});var mG=wp();Object.defineProperty(d,"findIndex",{enumerable:!0,get:function(){return mG.findIndex}});var gG=Sp();Object.defineProperty(d,"first",{enumerable:!0,get:function(){return gG.first}});var yG=Cp();Object.defineProperty(d,"groupBy",{enumerable:!0,get:function(){return yG.groupBy}});var bG=ku();Object.defineProperty(d,"ignoreElements",{enumerable:!0,get:function(){return bG.ignoreElements}});var _G=Ap();Object.defineProperty(d,"isEmpty",{enumerable:!0,get:function(){return _G.isEmpty}});var PG=Ep();Object.defineProperty(d,"last",{enumerable:!0,get:function(){return PG.last}});var OG=tt();Object.defineProperty(d,"map",{enumerable:!0,get:function(){return OG.map}});var TG=Vu();Object.defineProperty(d,"mapTo",{enumerable:!0,get:function(){return TG.mapTo}});var wG=Mp();Object.defineProperty(d,"materialize",{enumerable:!0,get:function(){return wG.materialize}});var SG=qp();Object.defineProperty(d,"max",{enumerable:!0,get:function(){return SG.max}});var CG=ln();Object.defineProperty(d,"mergeAll",{enumerable:!0,get:function(){return CG.mergeAll}});var AG=xp();Object.defineProperty(d,"flatMap",{enumerable:!0,get:function(){return AG.flatMap}});var EG=Fr();Object.defineProperty(d,"mergeMap",{enumerable:!0,get:function(){return EG.mergeMap}});var LG=jp();Object.defineProperty(d,"mergeMapTo",{enumerable:!0,get:function(){return LG.mergeMapTo}});var MG=Ip();Object.defineProperty(d,"mergeScan",{enumerable:!0,get:function(){return MG.mergeScan}});var qG=Dp();Object.defineProperty(d,"mergeWith",{enumerable:!0,get:function(){return qG.mergeWith}});var xG=kp();Object.defineProperty(d,"min",{enumerable:!0,get:function(){return xG.min}});var jG=So();Object.defineProperty(d,"multicast",{enumerable:!0,get:function(){return jG.multicast}});var IG=sn();Object.defineProperty(d,"observeOn",{enumerable:!0,get:function(){return IG.observeOn}});var FG=Rp();Object.defineProperty(d,"onErrorResumeNextWith",{enumerable:!0,get:function(){return FG.onErrorResumeNextWith}});var DG=Vp();Object.defineProperty(d,"pairwise",{enumerable:!0,get:function(){return DG.pairwise}});var kG=Np();Object.defineProperty(d,"pluck",{enumerable:!0,get:function(){return kG.pluck}});var RG=Wp();Object.defineProperty(d,"publish",{enumerable:!0,get:function(){return RG.publish}});var VG=Up();Object.defineProperty(d,"publishBehavior",{enumerable:!0,get:function(){return VG.publishBehavior}});var NG=Gp();Object.defineProperty(d,"publishLast",{enumerable:!0,get:function(){return NG.publishLast}});var WG=Bp();Object.defineProperty(d,"publishReplay",{enumerable:!0,get:function(){return WG.publishReplay}});var UG=wc();Object.defineProperty(d,"raceWith",{enumerable:!0,get:function(){return UG.raceWith}});var GG=vi();Object.defineProperty(d,"reduce",{enumerable:!0,get:function(){return GG.reduce}});var BG=Hp();Object.defineProperty(d,"repeat",{enumerable:!0,get:function(){return BG.repeat}});var HG=zp();Object.defineProperty(d,"repeatWhen",{enumerable:!0,get:function(){return HG.repeatWhen}});var zG=$p();Object.defineProperty(d,"retry",{enumerable:!0,get:function(){return zG.retry}});var $G=Yp();Object.defineProperty(d,"retryWhen",{enumerable:!0,get:function(){return $G.retryWhen}});var YG=Xa();Object.defineProperty(d,"refCount",{enumerable:!0,get:function(){return YG.refCount}});var QG=Mc();Object.defineProperty(d,"sample",{enumerable:!0,get:function(){return QG.sample}});var XG=Qp();Object.defineProperty(d,"sampleTime",{enumerable:!0,get:function(){return XG.sampleTime}});var KG=Xp();Object.defineProperty(d,"scan",{enumerable:!0,get:function(){return KG.scan}});var JG=Kp();Object.defineProperty(d,"sequenceEqual",{enumerable:!0,get:function(){return JG.sequenceEqual}});var ZG=Ic();Object.defineProperty(d,"share",{enumerable:!0,get:function(){return ZG.share}});var e2=Zp();Object.defineProperty(d,"shareReplay",{enumerable:!0,get:function(){return e2.shareReplay}});var r2=ed();Object.defineProperty(d,"single",{enumerable:!0,get:function(){return r2.single}});var t2=rd();Object.defineProperty(d,"skip",{enumerable:!0,get:function(){return t2.skip}});var i2=td();Object.defineProperty(d,"skipLast",{enumerable:!0,get:function(){return i2.skipLast}});var n2=id();Object.defineProperty(d,"skipUntil",{enumerable:!0,get:function(){return n2.skipUntil}});var o2=nd();Object.defineProperty(d,"skipWhile",{enumerable:!0,get:function(){return o2.skipWhile}});var a2=od();Object.defineProperty(d,"startWith",{enumerable:!0,get:function(){return a2.startWith}});var s2=un();Object.defineProperty(d,"subscribeOn",{enumerable:!0,get:function(){return s2.subscribeOn}});var u2=ad();Object.defineProperty(d,"switchAll",{enumerable:!0,get:function(){return u2.switchAll}});var c2=On();Object.defineProperty(d,"switchMap",{enumerable:!0,get:function(){return c2.switchMap}});var l2=sd();Object.defineProperty(d,"switchMapTo",{enumerable:!0,get:function(){return l2.switchMapTo}});var f2=ud();Object.defineProperty(d,"switchScan",{enumerable:!0,get:function(){return f2.switchScan}});var h2=yn();Object.defineProperty(d,"take",{enumerable:!0,get:function(){return h2.take}});var p2=cc();Object.defineProperty(d,"takeLast",{enumerable:!0,get:function(){return p2.takeLast}});var d2=cd();Object.defineProperty(d,"takeUntil",{enumerable:!0,get:function(){return d2.takeUntil}});var v2=ld();Object.defineProperty(d,"takeWhile",{enumerable:!0,get:function(){return v2.takeWhile}});var m2=fd();Object.defineProperty(d,"tap",{enumerable:!0,get:function(){return m2.tap}});var g2=Xc();Object.defineProperty(d,"throttle",{enumerable:!0,get:function(){return g2.throttle}});var y2=hd();Object.defineProperty(d,"throttleTime",{enumerable:!0,get:function(){return y2.throttleTime}});var b2=bn();Object.defineProperty(d,"throwIfEmpty",{enumerable:!0,get:function(){return b2.throwIfEmpty}});var _2=pd();Object.defineProperty(d,"timeInterval",{enumerable:!0,get:function(){return _2.timeInterval}});var P2=_o();Object.defineProperty(d,"timeout",{enumerable:!0,get:function(){return P2.timeout}});var O2=dd();Object.defineProperty(d,"timeoutWith",{enumerable:!0,get:function(){return O2.timeoutWith}});var T2=vd();Object.defineProperty(d,"timestamp",{enumerable:!0,get:function(){return T2.timestamp}});var w2=Pu();Object.defineProperty(d,"toArray",{enumerable:!0,get:function(){return w2.toArray}});var S2=md();Object.defineProperty(d,"window",{enumerable:!0,get:function(){return S2.window}});var C2=gd();Object.defineProperty(d,"windowCount",{enumerable:!0,get:function(){return C2.windowCount}});var A2=yd();Object.defineProperty(d,"windowTime",{enumerable:!0,get:function(){return A2.windowTime}});var E2=_d();Object.defineProperty(d,"windowToggle",{enumerable:!0,get:function(){return E2.windowToggle}});var L2=Pd();Object.defineProperty(d,"windowWhen",{enumerable:!0,get:function(){return L2.windowWhen}});var M2=Od();Object.defineProperty(d,"withLatestFrom",{enumerable:!0,get:function(){return M2.withLatestFrom}});var q2=Td();Object.defineProperty(d,"zipAll",{enumerable:!0,get:function(){return q2.zipAll}});var x2=Sd();Object.defineProperty(d,"zipWith",{enumerable:!0,get:function(){return x2.zipWith}})});var M_=b(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.partition=void 0;var j2=zh(),L_=it();function I2(n,e){return function(r){return[L_.filter(n,e)(r),L_.filter(j2.not(n,e))(r)]}}ol.partition=I2});var q_=b(Ut=>{"use strict";var F2=Ut&&Ut.__read||function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],c;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(c)throw c.error}}return s},D2=Ut&&Ut.__spreadArray||function(n,e){for(var r=0,t=e.length,a=n.length;r<t;r++,a++)n[a]=e[r];return n};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.race=void 0;var k2=di(),R2=wc();function V2(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return R2.raceWith.apply(void 0,D2([],F2(k2.argsOrArgArray(n))))}Ut.race=V2});var Cn=b(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.mergeAll=_.merge=_.max=_.materialize=_.mapTo=_.map=_.last=_.isEmpty=_.ignoreElements=_.groupBy=_.first=_.findIndex=_.find=_.finalize=_.filter=_.expand=_.exhaustMap=_.exhaustAll=_.exhaust=_.every=_.endWith=_.elementAt=_.distinctUntilKeyChanged=_.distinctUntilChanged=_.distinct=_.dematerialize=_.delayWhen=_.delay=_.defaultIfEmpty=_.debounceTime=_.debounce=_.count=_.connect=_.concatWith=_.concatMapTo=_.concatMap=_.concatAll=_.concat=_.combineLatestWith=_.combineLatest=_.combineLatestAll=_.combineAll=_.catchError=_.bufferWhen=_.bufferToggle=_.bufferTime=_.bufferCount=_.buffer=_.auditTime=_.audit=void 0;_.timeInterval=_.throwIfEmpty=_.throttleTime=_.throttle=_.tap=_.takeWhile=_.takeUntil=_.takeLast=_.take=_.switchScan=_.switchMapTo=_.switchMap=_.switchAll=_.subscribeOn=_.startWith=_.skipWhile=_.skipUntil=_.skipLast=_.skip=_.single=_.shareReplay=_.share=_.sequenceEqual=_.scan=_.sampleTime=_.sample=_.refCount=_.retryWhen=_.retry=_.repeatWhen=_.repeat=_.reduce=_.raceWith=_.race=_.publishReplay=_.publishLast=_.publishBehavior=_.publish=_.pluck=_.partition=_.pairwise=_.onErrorResumeNext=_.observeOn=_.multicast=_.min=_.mergeWith=_.mergeScan=_.mergeMapTo=_.mergeMap=_.flatMap=void 0;_.zipWith=_.zipAll=_.zip=_.withLatestFrom=_.windowWhen=_.windowToggle=_.windowTime=_.windowCount=_.window=_.toArray=_.timestamp=_.timeoutWith=_.timeout=void 0;var N2=pu();Object.defineProperty(_,"audit",{enumerable:!0,get:function(){return N2.audit}});var W2=Yh();Object.defineProperty(_,"auditTime",{enumerable:!0,get:function(){return W2.auditTime}});var U2=Qh();Object.defineProperty(_,"buffer",{enumerable:!0,get:function(){return U2.buffer}});var G2=Kh();Object.defineProperty(_,"bufferCount",{enumerable:!0,get:function(){return G2.bufferCount}});var B2=Jh();Object.defineProperty(_,"bufferTime",{enumerable:!0,get:function(){return B2.bufferTime}});var H2=ep();Object.defineProperty(_,"bufferToggle",{enumerable:!0,get:function(){return H2.bufferToggle}});var z2=rp();Object.defineProperty(_,"bufferWhen",{enumerable:!0,get:function(){return z2.bufferWhen}});var $2=tp();Object.defineProperty(_,"catchError",{enumerable:!0,get:function(){return $2.catchError}});var Y2=op();Object.defineProperty(_,"combineAll",{enumerable:!0,get:function(){return Y2.combineAll}});var Q2=wu();Object.defineProperty(_,"combineLatestAll",{enumerable:!0,get:function(){return Q2.combineLatestAll}});var X2=ap();Object.defineProperty(_,"combineLatest",{enumerable:!0,get:function(){return X2.combineLatest}});var K2=sp();Object.defineProperty(_,"combineLatestWith",{enumerable:!0,get:function(){return K2.combineLatestWith}});var J2=cp();Object.defineProperty(_,"concat",{enumerable:!0,get:function(){return J2.concat}});var Z2=Po();Object.defineProperty(_,"concatAll",{enumerable:!0,get:function(){return Z2.concatAll}});var eB=Au();Object.defineProperty(_,"concatMap",{enumerable:!0,get:function(){return eB.concatMap}});var rB=up();Object.defineProperty(_,"concatMapTo",{enumerable:!0,get:function(){return rB.concatMapTo}});var tB=lp();Object.defineProperty(_,"concatWith",{enumerable:!0,get:function(){return tB.concatWith}});var iB=wo();Object.defineProperty(_,"connect",{enumerable:!0,get:function(){return iB.connect}});var nB=fp();Object.defineProperty(_,"count",{enumerable:!0,get:function(){return nB.count}});var oB=hp();Object.defineProperty(_,"debounce",{enumerable:!0,get:function(){return oB.debounce}});var aB=pp();Object.defineProperty(_,"debounceTime",{enumerable:!0,get:function(){return aB.debounceTime}});var sB=gn();Object.defineProperty(_,"defaultIfEmpty",{enumerable:!0,get:function(){return sB.defaultIfEmpty}});var uB=dp();Object.defineProperty(_,"delay",{enumerable:!0,get:function(){return uB.delay}});var cB=Wu();Object.defineProperty(_,"delayWhen",{enumerable:!0,get:function(){return cB.delayWhen}});var lB=vp();Object.defineProperty(_,"dematerialize",{enumerable:!0,get:function(){return lB.dematerialize}});var fB=mp();Object.defineProperty(_,"distinct",{enumerable:!0,get:function(){return fB.distinct}});var hB=zu();Object.defineProperty(_,"distinctUntilChanged",{enumerable:!0,get:function(){return hB.distinctUntilChanged}});var pB=gp();Object.defineProperty(_,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return pB.distinctUntilKeyChanged}});var dB=yp();Object.defineProperty(_,"elementAt",{enumerable:!0,get:function(){return dB.elementAt}});var vB=bp();Object.defineProperty(_,"endWith",{enumerable:!0,get:function(){return vB.endWith}});var mB=_p();Object.defineProperty(_,"every",{enumerable:!0,get:function(){return mB.every}});var gB=Pp();Object.defineProperty(_,"exhaust",{enumerable:!0,get:function(){return gB.exhaust}});var yB=ec();Object.defineProperty(_,"exhaustAll",{enumerable:!0,get:function(){return yB.exhaustAll}});var bB=Ju();Object.defineProperty(_,"exhaustMap",{enumerable:!0,get:function(){return bB.exhaustMap}});var _B=Op();Object.defineProperty(_,"expand",{enumerable:!0,get:function(){return _B.expand}});var PB=it();Object.defineProperty(_,"filter",{enumerable:!0,get:function(){return PB.filter}});var OB=Tp();Object.defineProperty(_,"finalize",{enumerable:!0,get:function(){return OB.finalize}});var TB=nc();Object.defineProperty(_,"find",{enumerable:!0,get:function(){return TB.find}});var wB=wp();Object.defineProperty(_,"findIndex",{enumerable:!0,get:function(){return wB.findIndex}});var SB=Sp();Object.defineProperty(_,"first",{enumerable:!0,get:function(){return SB.first}});var CB=Cp();Object.defineProperty(_,"groupBy",{enumerable:!0,get:function(){return CB.groupBy}});var AB=ku();Object.defineProperty(_,"ignoreElements",{enumerable:!0,get:function(){return AB.ignoreElements}});var EB=Ap();Object.defineProperty(_,"isEmpty",{enumerable:!0,get:function(){return EB.isEmpty}});var LB=Ep();Object.defineProperty(_,"last",{enumerable:!0,get:function(){return LB.last}});var MB=tt();Object.defineProperty(_,"map",{enumerable:!0,get:function(){return MB.map}});var qB=Vu();Object.defineProperty(_,"mapTo",{enumerable:!0,get:function(){return qB.mapTo}});var xB=Mp();Object.defineProperty(_,"materialize",{enumerable:!0,get:function(){return xB.materialize}});var jB=qp();Object.defineProperty(_,"max",{enumerable:!0,get:function(){return jB.max}});var IB=Fp();Object.defineProperty(_,"merge",{enumerable:!0,get:function(){return IB.merge}});var FB=ln();Object.defineProperty(_,"mergeAll",{enumerable:!0,get:function(){return FB.mergeAll}});var DB=xp();Object.defineProperty(_,"flatMap",{enumerable:!0,get:function(){return DB.flatMap}});var kB=Fr();Object.defineProperty(_,"mergeMap",{enumerable:!0,get:function(){return kB.mergeMap}});var RB=jp();Object.defineProperty(_,"mergeMapTo",{enumerable:!0,get:function(){return RB.mergeMapTo}});var VB=Ip();Object.defineProperty(_,"mergeScan",{enumerable:!0,get:function(){return VB.mergeScan}});var NB=Dp();Object.defineProperty(_,"mergeWith",{enumerable:!0,get:function(){return NB.mergeWith}});var WB=kp();Object.defineProperty(_,"min",{enumerable:!0,get:function(){return WB.min}});var UB=So();Object.defineProperty(_,"multicast",{enumerable:!0,get:function(){return UB.multicast}});var GB=sn();Object.defineProperty(_,"observeOn",{enumerable:!0,get:function(){return GB.observeOn}});var BB=Rp();Object.defineProperty(_,"onErrorResumeNext",{enumerable:!0,get:function(){return BB.onErrorResumeNext}});var HB=Vp();Object.defineProperty(_,"pairwise",{enumerable:!0,get:function(){return HB.pairwise}});var zB=M_();Object.defineProperty(_,"partition",{enumerable:!0,get:function(){return zB.partition}});var $B=Np();Object.defineProperty(_,"pluck",{enumerable:!0,get:function(){return $B.pluck}});var YB=Wp();Object.defineProperty(_,"publish",{enumerable:!0,get:function(){return YB.publish}});var QB=Up();Object.defineProperty(_,"publishBehavior",{enumerable:!0,get:function(){return QB.publishBehavior}});var XB=Gp();Object.defineProperty(_,"publishLast",{enumerable:!0,get:function(){return XB.publishLast}});var KB=Bp();Object.defineProperty(_,"publishReplay",{enumerable:!0,get:function(){return KB.publishReplay}});var JB=q_();Object.defineProperty(_,"race",{enumerable:!0,get:function(){return JB.race}});var ZB=wc();Object.defineProperty(_,"raceWith",{enumerable:!0,get:function(){return ZB.raceWith}});var eH=vi();Object.defineProperty(_,"reduce",{enumerable:!0,get:function(){return eH.reduce}});var rH=Hp();Object.defineProperty(_,"repeat",{enumerable:!0,get:function(){return rH.repeat}});var tH=zp();Object.defineProperty(_,"repeatWhen",{enumerable:!0,get:function(){return tH.repeatWhen}});var iH=$p();Object.defineProperty(_,"retry",{enumerable:!0,get:function(){return iH.retry}});var nH=Yp();Object.defineProperty(_,"retryWhen",{enumerable:!0,get:function(){return nH.retryWhen}});var oH=Xa();Object.defineProperty(_,"refCount",{enumerable:!0,get:function(){return oH.refCount}});var aH=Mc();Object.defineProperty(_,"sample",{enumerable:!0,get:function(){return aH.sample}});var sH=Qp();Object.defineProperty(_,"sampleTime",{enumerable:!0,get:function(){return sH.sampleTime}});var uH=Xp();Object.defineProperty(_,"scan",{enumerable:!0,get:function(){return uH.scan}});var cH=Kp();Object.defineProperty(_,"sequenceEqual",{enumerable:!0,get:function(){return cH.sequenceEqual}});var lH=Ic();Object.defineProperty(_,"share",{enumerable:!0,get:function(){return lH.share}});var fH=Zp();Object.defineProperty(_,"shareReplay",{enumerable:!0,get:function(){return fH.shareReplay}});var hH=ed();Object.defineProperty(_,"single",{enumerable:!0,get:function(){return hH.single}});var pH=rd();Object.defineProperty(_,"skip",{enumerable:!0,get:function(){return pH.skip}});var dH=td();Object.defineProperty(_,"skipLast",{enumerable:!0,get:function(){return dH.skipLast}});var vH=id();Object.defineProperty(_,"skipUntil",{enumerable:!0,get:function(){return vH.skipUntil}});var mH=nd();Object.defineProperty(_,"skipWhile",{enumerable:!0,get:function(){return mH.skipWhile}});var gH=od();Object.defineProperty(_,"startWith",{enumerable:!0,get:function(){return gH.startWith}});var yH=un();Object.defineProperty(_,"subscribeOn",{enumerable:!0,get:function(){return yH.subscribeOn}});var bH=ad();Object.defineProperty(_,"switchAll",{enumerable:!0,get:function(){return bH.switchAll}});var _H=On();Object.defineProperty(_,"switchMap",{enumerable:!0,get:function(){return _H.switchMap}});var PH=sd();Object.defineProperty(_,"switchMapTo",{enumerable:!0,get:function(){return PH.switchMapTo}});var OH=ud();Object.defineProperty(_,"switchScan",{enumerable:!0,get:function(){return OH.switchScan}});var TH=yn();Object.defineProperty(_,"take",{enumerable:!0,get:function(){return TH.take}});var wH=cc();Object.defineProperty(_,"takeLast",{enumerable:!0,get:function(){return wH.takeLast}});var SH=cd();Object.defineProperty(_,"takeUntil",{enumerable:!0,get:function(){return SH.takeUntil}});var CH=ld();Object.defineProperty(_,"takeWhile",{enumerable:!0,get:function(){return CH.takeWhile}});var AH=fd();Object.defineProperty(_,"tap",{enumerable:!0,get:function(){return AH.tap}});var EH=Xc();Object.defineProperty(_,"throttle",{enumerable:!0,get:function(){return EH.throttle}});var LH=hd();Object.defineProperty(_,"throttleTime",{enumerable:!0,get:function(){return LH.throttleTime}});var MH=bn();Object.defineProperty(_,"throwIfEmpty",{enumerable:!0,get:function(){return MH.throwIfEmpty}});var qH=pd();Object.defineProperty(_,"timeInterval",{enumerable:!0,get:function(){return qH.timeInterval}});var xH=_o();Object.defineProperty(_,"timeout",{enumerable:!0,get:function(){return xH.timeout}});var jH=dd();Object.defineProperty(_,"timeoutWith",{enumerable:!0,get:function(){return jH.timeoutWith}});var IH=vd();Object.defineProperty(_,"timestamp",{enumerable:!0,get:function(){return IH.timestamp}});var FH=Pu();Object.defineProperty(_,"toArray",{enumerable:!0,get:function(){return FH.toArray}});var DH=md();Object.defineProperty(_,"window",{enumerable:!0,get:function(){return DH.window}});var kH=gd();Object.defineProperty(_,"windowCount",{enumerable:!0,get:function(){return kH.windowCount}});var RH=yd();Object.defineProperty(_,"windowTime",{enumerable:!0,get:function(){return RH.windowTime}});var VH=_d();Object.defineProperty(_,"windowToggle",{enumerable:!0,get:function(){return VH.windowToggle}});var NH=Pd();Object.defineProperty(_,"windowWhen",{enumerable:!0,get:function(){return NH.windowWhen}});var WH=Od();Object.defineProperty(_,"withLatestFrom",{enumerable:!0,get:function(){return WH.withLatestFrom}});var UH=wd();Object.defineProperty(_,"zip",{enumerable:!0,get:function(){return UH.zip}});var GH=Td();Object.defineProperty(_,"zipAll",{enumerable:!0,get:function(){return GH.zipAll}});var BH=Sd();Object.defineProperty(_,"zipWith",{enumerable:!0,get:function(){return BH.zipWith}})});var Ad=b(Lo=>{var HH=function(n,e){return n<e?-1:n>e?1:0},zH=function(n,e){return n<e?1:n>e?-1:0};function $H(n){return function(e,r){return n(r,e)}}function YH(n){return n===2?function(e,r){return e[0]<r[0]?-1:e[0]>r[0]?1:e[1]<r[1]?-1:e[1]>r[1]?1:0}:function(e,r){for(var t=0;t<n;){if(e[t]<r[t])return-1;if(e[t]>r[t])return 1;t++}return 0}}Lo.DEFAULT_COMPARATOR=HH;Lo.DEFAULT_REVERSE_COMPARATOR=zH;Lo.reverseComparator=$H;Lo.createTupleComparator=YH});var x_=b(Ed=>{Ed.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Ed.SYMBOL_SUPPORT=typeof Symbol<"u"});var Mo=b((K4,I_)=>{var j_=x_(),QH=j_.ARRAY_BUFFER_SUPPORT,XH=j_.SYMBOL_SUPPORT;I_.exports=function(e,r){var t,a,s,c,f;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof r!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||QH&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,c=e.length;s<c;s++)r(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(r);return}if(XH&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(t=e,s=0;f=t.next(),f.done!==!0;)r(f.value,s),s++;return}for(a in e)e.hasOwnProperty(a)&&r(e[a],a)}});var U_=b((J4,W_)=>{var F_=Ad(),D_=Mo(),k_=F_.DEFAULT_COMPARATOR,KH=F_.reverseComparator;function Ne(n){if(this.clear(),this.comparator=n||k_,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.")}Ne.prototype.clear=function(){this.root=null,this.min=null,this.size=0};function JH(n){return{item:n,degree:0}}function R_(n,e){n.root?(e.right=n.root.right,e.left=n.root,n.root.right.left=e,n.root.right=e):n.root=e}Ne.prototype.push=function(n){var e=JH(n);return e.left=e,e.right=e,R_(this,e),(!this.min||this.comparator(e.item,this.min.item)<=0)&&(this.min=e),++this.size};Ne.prototype.peek=function(){return this.min?this.min.item:void 0};function V_(n){for(var e=[],r=n,t=!1;!(r===n&&t);)r===n&&(t=!0),e.push(r),r=r.right;return e}function N_(n,e){n.root===e&&(n.root=e.right),e.left.right=e.right,e.right.left=e.left}function ZH(n,e){n.child?(e.right=n.child.right,e.left=n.child,n.child.right.left=e,n.child.right=e):n.child=e}function ez(n,e,r){N_(n,e),e.left=e,e.right=e,ZH(r,e),r.degree++,e.parent=r}function rz(n){var e=new Array(n.size),r=V_(n.root),t,a,s,c,f,p;for(t=0,a=r.length;t<a;t++){for(s=r[t],f=s.degree;e[f];)c=e[f],n.comparator(s.item,c.item)>0&&(p=s,s=c,c=p),ez(n,c,s),e[f]=null,f++;e[f]=s}for(t=0;t<n.size;t++)e[t]&&n.comparator(e[t].item,n.min.item)<=0&&(n.min=e[t])}Ne.prototype.pop=function(){if(this.size){var n=this.min;if(n.child){var e=V_(n.child),r,t,a;for(t=0,a=e.length;t<a;t++)r=e[t],R_(this,r),delete r.parent}return N_(this,n),n===n.right?(this.min=null,this.root=null):(this.min=n.right,rz(this)),this.size--,n.item}};Ne.prototype.inspect=function(){var n={size:this.size};return this.min&&"item"in this.min&&(n.top=this.min.item),Object.defineProperty(n,"constructor",{value:Ne,enumerable:!1}),n};typeof Symbol<"u"&&(Ne.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ne.prototype.inspect);function ll(n){if(this.clear(),this.comparator=n||k_,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.");this.comparator=KH(this.comparator)}ll.prototype=Ne.prototype;Ne.from=function(n,e){var r=new Ne(e);return D_(n,function(t){r.push(t)}),r};ll.from=function(n,e){var r=new ll(e);return D_(n,function(t){r.push(t)}),r};Ne.MinFibonacciHeap=Ne;Ne.MaxFibonacciHeap=ll;W_.exports=Ne});var Ld=b(Rr=>{var tz=Math.pow(2,8)-1,iz=Math.pow(2,16)-1,nz=Math.pow(2,32)-1,oz=Math.pow(2,7)-1,az=Math.pow(2,15)-1,sz=Math.pow(2,31)-1;Rr.getPointerArray=function(n){var e=n-1;if(e<=tz)return Uint8Array;if(e<=iz)return Uint16Array;if(e<=nz)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};Rr.getSignedPointerArray=function(n){var e=n-1;return e<=oz?Int8Array:e<=az?Int16Array:e<=sz?Int32Array:Float64Array};Rr.getNumberType=function(n){return n===(n|0)?Math.sign(n)===-1?n<=127&&n>=-128?Int8Array:n<=32767&&n>=-32768?Int16Array:Int32Array:n<=255?Uint8Array:n<=65535?Uint16Array:Uint32Array:Float64Array};var uz={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};Rr.getMinimalRepresentation=function(n,e){var r=null,t=0,a,s,c,f,p;for(f=0,p=n.length;f<p;f++)c=e?e(n[f]):n[f],s=Rr.getNumberType(c),a=uz[s.name],a>t&&(t=a,r=s);return r};Rr.isTypedArray=function(n){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(n)};Rr.concat=function(){var n=0,e,r,t;for(e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;var a=new arguments[0].constructor(n);for(e=0,r=0;e<t;e++)a.set(arguments[e],r),r+=arguments[e].length;return a};Rr.indices=function(n){for(var e=Rr.getPointerArray(n),r=new e(n),t=0;t<n;t++)r[t]=t;return r}});var qd=b(qo=>{var G_=Mo(),B_=Ld();function cz(n){return Array.isArray(n)||B_.isTypedArray(n)}function Md(n){if(typeof n.length=="number")return n.length;if(typeof n.size=="number")return n.size}function lz(n){var e=Md(n),r=typeof e=="number"?new Array(e):[],t=0;return G_(n,function(a){r[t++]=a}),r}function fz(n){var e=Md(n),r=typeof e=="number"?B_.getPointerArray(e):Array,t=typeof e=="number"?new Array(e):[],a=typeof e=="number"?new r(e):[],s=0;return G_(n,function(c){t[s]=c,a[s]=s++}),[t,a]}qo.isArrayLike=cz;qo.guessLength=Md;qo.toArray=lz;qo.toArrayWithIndices=fz});var Q_=b((r8,Y_)=>{var fl=Mo(),H_=Ad(),Vr=qd(),pl=H_.DEFAULT_COMPARATOR,xd=H_.reverseComparator;function jd(n,e,r,t){for(var a=e[t],s,c;t>r;){if(s=t-1>>1,c=e[s],n(a,c)<0){e[t]=c,t=s;continue}break}e[t]=a}function xo(n,e,r){for(var t=e.length,a=r,s=e[r],c=2*r+1,f;c<t;)f=c+1,f<t&&n(e[c],e[f])>=0&&(c=f),e[r]=e[c],r=c,c=2*r+1;e[r]=s,jd(n,e,a,r)}function z_(n,e,r){e.push(r),jd(n,e,0,e.length-1)}function Id(n,e){var r=e.pop();if(e.length!==0){var t=e[0];return e[0]=r,xo(n,e,0),t}return r}function En(n,e,r){if(e.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var t=e[0];return e[0]=r,xo(n,e,0),t}function $_(n,e,r){var t;return e.length!==0&&n(e[0],r)<0&&(t=e[0],e[0]=r,r=t,xo(n,e,0)),r}function bi(n,e){for(var r=e.length,t=r>>1,a=t;--a>=0;)xo(n,e,a)}function Fd(n,e){for(var r=e.length,t=0,a=new Array(r);t<r;)a[t++]=Id(n,e);return a}function hz(n,e,r){arguments.length===2&&(r=e,e=n,n=pl);var t=xd(n),a,s,c,f=1/0,p;if(e===1){if(Vr.isArrayLike(r)){for(a=0,s=r.length;a<s;a++)c=r[a],(f===1/0||n(c,f)<0)&&(f=c);return p=new r.constructor(1),p[0]=f,p}return fl(r,function(O){(f===1/0||n(O,f)<0)&&(f=O)}),[f]}if(Vr.isArrayLike(r)){if(e>=r.length)return r.slice().sort(n);for(p=r.slice(0,e),bi(t,p),a=e,s=r.length;a<s;a++)t(r[a],p[0])>0&&En(t,p,r[a]);return p.sort(n)}var m=Vr.guessLength(r);return m!==null&&m<e&&(e=m),p=new Array(e),a=0,fl(r,function(O){a<e?p[a]=O:(a===e&&bi(t,p),t(O,p[0])>0&&En(t,p,O)),a++}),p.length>a&&(p.length=a),p.sort(n)}function pz(n,e,r){arguments.length===2&&(r=e,e=n,n=pl);var t=xd(n),a,s,c,f=-1/0,p;if(e===1){if(Vr.isArrayLike(r)){for(a=0,s=r.length;a<s;a++)c=r[a],(f===-1/0||n(c,f)>0)&&(f=c);return p=new r.constructor(1),p[0]=f,p}return fl(r,function(O){(f===-1/0||n(O,f)>0)&&(f=O)}),[f]}if(Vr.isArrayLike(r)){if(e>=r.length)return r.slice().sort(t);for(p=r.slice(0,e),bi(n,p),a=e,s=r.length;a<s;a++)n(r[a],p[0])>0&&En(n,p,r[a]);return p.sort(t)}var m=Vr.guessLength(r);return m!==null&&m<e&&(e=m),p=new Array(e),a=0,fl(r,function(O){a<e?p[a]=O:(a===e&&bi(n,p),n(O,p[0])>0&&En(n,p,O)),a++}),p.length>a&&(p.length=a),p.sort(t)}function ue(n){if(this.clear(),this.comparator=n||pl,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}ue.prototype.clear=function(){this.items=[],this.size=0};ue.prototype.push=function(n){return z_(this.comparator,this.items,n),++this.size};ue.prototype.peek=function(){return this.items[0]};ue.prototype.pop=function(){return this.size!==0&&this.size--,Id(this.comparator,this.items)};ue.prototype.replace=function(n){return En(this.comparator,this.items,n)};ue.prototype.pushpop=function(n){return $_(this.comparator,this.items,n)};ue.prototype.consume=function(){return this.size=0,Fd(this.comparator,this.items)};ue.prototype.toArray=function(){return Fd(this.comparator,this.items.slice())};ue.prototype.inspect=function(){var n=this.toArray();return Object.defineProperty(n,"constructor",{value:ue,enumerable:!1}),n};typeof Symbol<"u"&&(ue.prototype[Symbol.for("nodejs.util.inspect.custom")]=ue.prototype.inspect);function hl(n){if(this.clear(),this.comparator=n||pl,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=xd(this.comparator)}hl.prototype=ue.prototype;ue.from=function(n,e){var r=new ue(e),t;return Vr.isArrayLike(n)?t=n.slice():t=Vr.toArray(n),bi(r.comparator,t),r.items=t,r.size=t.length,r};hl.from=function(n,e){var r=new hl(e),t;return Vr.isArrayLike(n)?t=n.slice():t=Vr.toArray(n),bi(r.comparator,t),r.items=t,r.size=t.length,r};ue.siftUp=xo;ue.siftDown=jd;ue.push=z_;ue.pop=Id;ue.replace=En;ue.pushpop=$_;ue.heapify=bi;ue.consume=Fd;ue.nsmallest=hz;ue.nlargest=pz;ue.MinHeap=ue;ue.MaxHeap=hl;Y_.exports=ue});var eP=b((t8,Z_)=>{var X_="";function K_(n,e,r){for(var t=e.length,a=[],s=t,c=-1,f,p=0,m;s--;)c=Math.max(n[e[s]+r],c);for(m=c>>24&&32||c>>16&&24||c>>8&&16||8;p<m;p+=4){for(s=16;s--;)a[s]=[];for(s=t;s--;)a[n[e[s]+r]>>p&15].push(e[s]);for(f=0;f<16;f++)for(c=a[f].length;c--;)e[++s]=a[f][c]}}function dz(n,e,r,t){return n[r]-n[t]||(r%3===2?n[r+1]-n[t+1]||e[r+2]-e[t+2]:e[r+1]-e[t+1])}function Dd(n,e){var r=[],t=[],a=2*e/3|0,s=e-a,c=a+1>>1,f=a,p=0,m,O=[],A=[];if(e===1)return[0];for(;f--;)r[f]=(f*3>>1)+1;for(f=3;f--;)K_(n,r,f);for(p=t[(r[0]/3|0)+(r[0]%3===1?0:c)]=1,f=1;f<a;f++)(n[r[f]]!==n[r[f-1]]||n[r[f]+1]!==n[r[f-1]+1]||n[r[f]+2]!==n[r[f-1]+2])&&p++,t[(r[f]/3|0)+(r[f]%3===1?0:c)]=p;if(p<a)for(t=Dd(t,a),f=a;f--;)r[f]=t[f]<c?t[f]*3+1:(t[f]-c)*3+2;for(f=a;f--;)O[r[f]]=f;for(O[e]=-1,O[e+1]=-2,t=e%3===1?[e-1]:[],f=0;f<a;f++)r[f]%3===1&&t.push(r[f]-1);for(K_(n,t,0),f=0,p=0,m=0;f<a&&p<s;)A[m++]=dz(n,O,r[f],t[p])<0?r[f++]:t[p++];for(;f<a;)A[m++]=r[f++];for(;p<s;)A[m++]=t[p++];return A}function J_(n){var e=n.length,r=e%3,t=new Array(e+r),a,s;if(typeof n!="string"){var c=Object.create(null);for(s=0;s<e;s++)c[n[s]]||(c[n[s]]=!0);var f=Object.create(null),p=Object.keys(c).sort();for(s=0,a=p.length;s<a;s++)f[p[s]]=s+1;for(s=0;s<e;s++)t[s]=f[n[s]]}else for(s=0;s<e;s++)t[s]=n.charCodeAt(s);for(s=e;s<e+r;s++)t[s]=0;return t}function Gt(n){this.hasArbitrarySequence=typeof n!="string",this.string=n,this.length=n.length,this.array=Dd(J_(n),this.length)}Gt.prototype.toString=function(){return this.array.join(",")};Gt.prototype.toJSON=function(){return this.array};Gt.prototype.inspect=function(){for(var n=new Array(this.length),e=0;e<this.length;e++)n[e]=this.string.slice(this.array[e]);return Object.defineProperty(n,"constructor",{value:Gt,enumerable:!1}),n};typeof Symbol<"u"&&(Gt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Gt.prototype.inspect);function Bt(n){if(this.hasArbitrarySequence=typeof n[0]!="string",this.size=n.length,this.hasArbitrarySequence){this.text=[];for(var e=0,r=this.size;e<r;e++)this.text.push.apply(this.text,n[e]),e<r-1&&this.text.push(X_)}else this.text=n.join(X_);this.firstLength=n[0].length,this.length=this.text.length,this.array=Dd(J_(this.text),this.length)}Bt.prototype.longestCommonSubsequence=function(){var n=this.hasArbitrarySequence?[]:"",e,r,t,a,s;for(r=1;r<this.length;r++)if(a=this.array[r],s=this.array[r-1],!(a<this.firstLength&&s<this.firstLength)&&!(a>this.firstLength&&s>this.firstLength)){for(e=Math.min(this.length-a,this.length-s),t=0;t<e;t++)if(this.text[a+t]!==this.text[s+t]){e=t;break}e>n.length&&(n=this.text.slice(a,a+e))}return n};Bt.prototype.toString=function(){return this.array.join(",")};Bt.prototype.toJSON=function(){return this.array};Bt.prototype.inspect=function(){for(var n=new Array(this.length),e=0;e<this.length;e++)n[e]=this.text.slice(this.array[e]);return Object.defineProperty(n,"constructor",{value:Bt,enumerable:!1}),n};typeof Symbol<"u"&&(Bt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Bt.prototype.inspect);Gt.GeneralizedSuffixArray=Bt;Z_.exports=Gt});var tP=b((i8,rP)=>{function Nr(n){if(typeof n!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=n}typeof Symbol<"u"&&(Nr.prototype[Symbol.iterator]=function(){return this});Nr.of=function(){var n=arguments,e=n.length,r=0;return new Nr(function(){return r>=e?{done:!0}:{done:!1,value:n[r++]}})};Nr.empty=function(){var n=new Nr(function(){return{done:!0}});return n};Nr.fromSequence=function(n){var e=0,r=n.length;return new Nr(function(){return e>=r?{done:!0}:{done:!1,value:n[e++]}})};Nr.is=function(n){return n instanceof Nr?!0:typeof n=="object"&&n!==null&&typeof n.next=="function"};rP.exports=Nr});var aP=b((n8,oP)=>{var iP=tP(),vz=Mo(),mz=qd(),nP=Ld(),gz=function(n){return Math.max(1,Math.ceil(n*1.5))},yz=function(n){var e=nP.getPointerArray(n);return new e(n)};function te(n,e){if(arguments.length<1)throw new Error("mnemonist/vector: expecting at least a byte array constructor.");var r=e||0,t=gz,a=0,s=!1;typeof e=="object"&&(r=e.initialCapacity||0,a=e.initialLength||0,t=e.policy||t,s=e.factory===!0),this.factory=s?n:null,this.ArrayClass=n,this.length=a,this.capacity=Math.max(a,r),this.policy=t,this.array=new n(this.capacity)}te.prototype.set=function(n,e){if(this.length<n)throw new Error("Vector("+this.ArrayClass.name+").set: index out of bounds.");return this.array[n]=e,this};te.prototype.get=function(n){if(!(this.length<n))return this.array[n]};te.prototype.applyPolicy=function(n){var e=this.policy(n||this.capacity);if(typeof e!="number"||e<0)throw new Error("mnemonist/vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(e<=this.capacity)throw new Error("mnemonist/vector.applyPolicy: policy returned a less or equal capacity to allocate.");return e};te.prototype.reallocate=function(n){if(n===this.capacity)return this;var e=this.array;if(n<this.length&&(this.length=n),n>this.capacity)if(this.factory===null?this.array=new this.ArrayClass(n):this.array=this.factory(n),nP.isTypedArray(this.array))this.array.set(e,0);else for(var r=0,t=this.length;r<t;r++)this.array[r]=e[r];else this.array=e.slice(0,n);return this.capacity=n,this};te.prototype.grow=function(n){var e;if(typeof n=="number"){if(this.capacity>=n)return this;for(e=this.capacity;e<n;)e=this.applyPolicy(e);return this.reallocate(e),this}return e=this.applyPolicy(),this.reallocate(e),this};te.prototype.resize=function(n){return n===this.length?this:n<this.length?(this.length=n,this):(this.length=n,this.reallocate(n),this)};te.prototype.push=function(n){return this.capacity===this.length&&this.grow(),this.array[this.length++]=n,this.length};te.prototype.pop=function(){if(this.length!==0)return this.array[--this.length]};te.prototype.values=function(){var n=this.array,e=this.length,r=0;return new iP(function(){if(r>=e)return{done:!0};var t=n[r];return r++,{value:t,done:!1}})};te.prototype.entries=function(){var n=this.array,e=this.length,r=0;return new iP(function(){if(r>=e)return{done:!0};var t=n[r];return{value:[r++,t],done:!1}})};typeof Symbol<"u"&&(te.prototype[Symbol.iterator]=te.prototype.values);te.prototype.inspect=function(){var n=this.array.slice(0,this.length);return n.type=this.array.constructor.name,n.items=this.length,n.capacity=this.capacity,Object.defineProperty(n,"constructor",{value:te,enumerable:!1}),n};typeof Symbol<"u"&&(te.prototype[Symbol.for("nodejs.util.inspect.custom")]=te.prototype.inspect);te.from=function(n,e,r){if(arguments.length<3&&(r=mz.guessLength(n),typeof r!="number"))throw new Error("mnemonist/vector.from: could not guess iterable length. Please provide desired capacity as last argument.");var t=new te(e,r);return vz(n,function(a){t.push(a)}),t};function Wr(n){var e=function(t){te.call(this,n,t)};for(var r in te.prototype)te.prototype.hasOwnProperty(r)&&(e.prototype[r]=te.prototype[r]);return e.from=function(t,a){return te.from(t,n,a)},typeof Symbol<"u"&&(e.prototype[Symbol.iterator]=e.prototype.values),e}te.Int8Vector=Wr(Int8Array);te.Uint8Vector=Wr(Uint8Array);te.Uint8ClampedVector=Wr(Uint8ClampedArray);te.Int16Vector=Wr(Int16Array);te.Uint16Vector=Wr(Uint16Array);te.Int32Vector=Wr(Int32Array);te.Uint32Vector=Wr(Uint32Array);te.Float32Vector=Wr(Float32Array);te.Float64Vector=Wr(Float64Array);te.PointerVector=Wr(yz);oP.exports=te});var Dz={};yA(Dz,{ArrayTilemap:()=>ql,CharacterShiftAction:()=>Sl,CollisionStrategy:()=>Ao,Direction:()=>Ve,GridEngine:()=>No,GridEngineHeadless:()=>ko,MoveToResult:()=>El,NoPathFoundStrategy:()=>yi,NumberOfDirections:()=>ni,PathBlockedStrategy:()=>An,PhaserTile:()=>zt,PhaserTileLayer:()=>kn,PhaserTilemap:()=>Vo,QueuedPathBlockedStrategy:()=>Ud,TiledLayer:()=>Vn,TiledTile:()=>Rn,TiledTilemap:()=>xl,default:()=>Fz,directionFromPos:()=>Ce});module.exports=bA(Dz);var S=class n{static get ZERO(){return new n(0,0)}static get ONE(){return new n(1,1)}static get UP(){return new n(0,-1)}static get DOWN(){return new n(0,1)}static get LEFT(){return new n(-1,0)}static get RIGHT(){return new n(1,0)}static get UP_LEFT(){return new n(-1,-1)}static get UP_RIGHT(){return new n(1,-1)}static get DOWN_RIGHT(){return new n(1,1)}static get DOWN_LEFT(){return new n(-1,1)}constructor(e,r){typeof e=="number"?(this.x=e,this.y=r||0):(this.x=e.x,this.y=e.y)}clone(){return new n(this.x,this.y)}add(e){return new n(this.x+e.x,this.y+e.y)}multiply(e){return new n(this.x*e.x,this.y*e.y)}divide(e){return new n(this.x/e.x,this.y/e.y)}subtract(e){return new n(this.x-e.x,this.y-e.y)}equals(e){return this.x===e.x&&this.y===e.y}abs(){return new n(Math.abs(this.x),Math.abs(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}modulo(e){return new n(this.x%e.x,this.y%e.y)}scalarModulo(e){return new n(this.x%e,this.y%e)}scalarMult(e){return new n(this.x*e,this.y*e)}toPosition(){return{x:this.x,y:this.y}}toString(){return`${this.x}#${this.y}`}};var G=class{static equal(e,r){return e.position.x===r.position.x&&e.position.y===r.position.y&&e.layer===r.layer}static copyOver(e,r){r.position.x=e.position.x,r.position.y=e.position.y,r.layer=e.layer}static clone(e){return{position:e.position.clone(),layer:e.layer}}static toString(e){return`${e.position.toString()}#${e.layer}`}static toInternal(e){return{position:new S(e.position.x,e.position.y),layer:e.charLayer}}static fromInternal(e){return{position:e.position.toPosition(),charLayer:e.layer}}};var Ve=(m=>(m.NONE="none",m.LEFT="left",m.UP_LEFT="up-left",m.UP="up",m.UP_RIGHT="up-right",m.RIGHT="right",m.DOWN_RIGHT="down-right",m.DOWN="down",m.DOWN_LEFT="down-left",m))(Ve||{}),_A={up:"down",down:"up",left:"right",right:"left",none:"none","up-left":"down-right","up-right":"down-left","down-right":"up-left","down-left":"up-right"},PA={up:S.UP,down:S.DOWN,left:S.LEFT,right:S.RIGHT,none:S.ZERO,"up-left":S.UP_LEFT,"up-right":S.UP_RIGHT,"down-right":S.DOWN_RIGHT,"down-left":S.DOWN_LEFT},co={up:0,"up-right":1,right:2,"down-right":3,down:4,"down-left":5,left:6,"up-left":7,none:NaN},Ag=["up","up-right","right","down-right","down","down-left","left","up-left"],OA=["down-left","down-right","up-right","up-left"];function lo(){return["up","down","left","right","none","up-left","up-right","down-right","down-left"]}function ii(n){return OA.includes(n)}function Eg(n,e=1){return n==="none"?"none":Ag[(co[n]+8-Math.abs(e)%8)%8]}function Fa(n,e=1){return n==="none"?"none":Ag[(co[n]+e)%8]}function tr(n){return PA[n]}function fo(n){return _A[n]}function Ce(n,e){if(n.x===e.x){if(n.y>e.y)return"up";if(n.y<e.y)return"down"}else if(n.y===e.y){if(n.x>e.x)return"left";if(n.x<e.x)return"right"}else if(n.x>e.x){if(n.y<e.y)return"down-left";if(n.y>e.y)return"up-left"}else if(n.x<e.x){if(n.y<e.y)return"down-right";if(n.y>e.y)return"up-right"}return"none"}var ni=(r=>(r[r.FOUR=4]="FOUR",r[r.EIGHT=8]="EIGHT",r))(ni||{});function yt(n){return typeof n=="string"&&lo().includes(n)}var nt=Ie(Wt(),1);var ot=1e3,nl=class{constructor(e,r){this.id=e;this.movementDirection="none";this._tilePos={position:new S(0,0),layer:void 0};this.movementStarted$=new nt.Subject;this.movementStopped$=new nt.Subject;this.directionChanged$=new nt.Subject;this.positionChangeStarted$=new nt.Subject;this.positionChangeFinished$=new nt.Subject;this.tilePositionSet$=new nt.Subject;this.autoMovementSet$=new nt.Subject;this.lastMovementImpulse="none";this.facingDirection="down";this.depthChanged$=new nt.Subject;this.movementProgress=0;this.currentMovementReverted=!1;this.tilemap=r.tilemap,this.speed=r.speed,this.collidesWithTilesInternal=r.collidesWithTiles,this._tilePos.layer=r.charLayer,this.ignoreMissingTiles=r.ignoreMissingTiles??!1,this.collisionGroups=new Set(r.collisionGroups||[]),this.ignoreCollisionGroups=new Set(r.ignoreCollisionGroups||[]),this.labels=new Set(r.labels||[]),this.numberOfDirections=r.numberOfDirections,r.facingDirection&&this.turnTowards(r.facingDirection),this.tileWidth=r.tileWidth??1,this.tileHeight=r.tileHeight??1}getId(){return this.id}getSpeed(){return this.speed}setSpeed(e){this.speed=e}setMovement(e){this.autoMovementSet$.next(e),this.movement=e}getMovement(){return this.movement}collidesWithTiles(){return this.collidesWithTilesInternal}setCollidesWithTiles(e){this.collidesWithTilesInternal=e}getIgnoreMissingTiles(){return this.ignoreMissingTiles}setIgnoreMissingTiles(e){this.ignoreMissingTiles=e}setTilePosition(e){this.currentMovementReverted=!1,this.isMoving()&&this.movementStopped$.next(this.movementDirection),this.tilePositionSet$.next({...e}),this.fire(this.positionChangeStarted$,this.tilePos,e),this.fire(this.positionChangeFinished$,this.tilePos,e),this.movementDirection="none",this.lastMovementImpulse="none",this.tilePos=e,this.movementProgress=0}getTilePos(){return this.tilePos}getNextTilePos(){if(!this.isMoving())return this.tilePos;if(this.currentMovementReverted)return this.tilePos;let e=this.tilePos.layer,r=this.tilePosInDirection(this.tilePos.position,this.movementDirection),t=this.tilemap.getTransition(r,this.tilePos.layer);return t&&(e=t),{position:this.tilePosInDirection(this.tilePos.position,this.movementDirection),layer:e}}getTileWidth(){return this.tileWidth}getTileHeight(){return this.tileHeight}move(e){this.lastMovementImpulse=e,e!="none"&&(this.isMoving()||(this.isBlockingDirection(e)?this.changeFacingDirection(e):this.startMoving(e)))}update(e){this.movement?.update(e),this.isMoving()&&this.updateCharacterPosition(e),this.lastMovementImpulse="none"}getMovementDirection(){return this.movementDirection}isBlockingDirection(e){if(e=="none")return!1;let r=this.tilePosInDirection(this.getNextTilePos().position,e),t=this.tilemap.getTransition(r,this.getNextTilePos().layer)||this.getNextTilePos().layer;return this.collidesWithTilesInternal&&this.isTileBlocking(e,t)?!0:this.isCharBlocking(e,t)}isTileBlocking(e,r){return this.someCharTile((t,a)=>{let s=this.tilePosInDirection(new S(t,a),e);return this.tilemap.hasBlockingTile(s,r,fo(e),this.ignoreMissingTiles)})}revertCurrentMovement(){this.isMoving()&&(this.currentMovementReverted=!0,this.movementDirection=fo(this.movementDirection),this.movementStopped$.next(this.facingDirection),this.facingDirection=this.movementDirection,this.movementProgress=ot-this.movementProgress,this.movementStarted$.next(this.facingDirection))}isCurrentMovementReverted(){return this.currentMovementReverted}isCharBlocking(e,r){return this.someCharTile((t,a)=>{let s=this.tilePosInDirection(new S(t,a),e);return this.tilemap.hasBlockingChar(s,r,this.getCollisionGroups(),new Set([this.getId()]),this.ignoreCollisionGroups)})}isMoving(){return this.movementDirection!="none"}turnTowards(e){this.isMoving()||e!="none"&&this.changeFacingDirection(e)}changeFacingDirection(e){this.facingDirection!==e&&(this.facingDirection=e,this.directionChanged$.next(e))}getFacingDirection(){return this.facingDirection}getFacingPosition(){return this._tilePos.position.add(tr(this.facingDirection))}addCollisionGroup(e){this.collisionGroups.add(e)}setCollisionGroups(e){this.collisionGroups=new Set(e)}setIgnoreCollisionGroups(e){this.ignoreCollisionGroups=new Set(e)}getCollisionGroups(){return Array.from(this.collisionGroups)}getIgnoreCollisionGroups(){return Array.from(this.ignoreCollisionGroups)}hasCollisionGroup(e){return this.collisionGroups.has(e)}removeCollisionGroup(e){this.collisionGroups.delete(e)}removeAllCollisionGroups(){this.collisionGroups.clear()}addLabels(e){for(let r of e)this.labels.add(r)}getLabels(){return[...this.labels.values()]}hasLabel(e){return this.labels.has(e)}clearLabels(){this.labels.clear()}removeLabels(e){for(let r of e)this.labels.delete(r)}getNumberOfDirections(){return this.numberOfDirections}movementStarted(){return this.movementStarted$}movementStopped(){return this.movementStopped$}directionChanged(){return this.directionChanged$}tilePositionSet(){return this.tilePositionSet$}positionChangeStarted(){return this.positionChangeStarted$}positionChangeFinished(){return this.positionChangeFinished$}autoMovementSet(){return this.autoMovementSet$}depthChanged(){return this.depthChanged$}getMovementProgress(){return this.movementProgress}setMovementProgress(e){let r=Math.max(0,Math.min(ot,e));this.movementProgress=r}hasWalkedHalfATile(){return this.movementProgress>ot/2}willCrossTileBorderThisUpdate(e){return this.movementProgress+this.maxProgressForDelta(e)>=ot}updateCharacterPosition(e){let r=this.willCrossTileBorderThisUpdate(e),a=1-(r?ot-this.movementProgress:this.maxProgressForDelta(e))/this.maxProgressForDelta(e);this.movementProgress=Math.min(this.movementProgress+this.maxProgressForDelta(e),ot),r&&(this.movementProgress=0,this.shouldContinueMoving()?(this.fire(this.positionChangeFinished$,this.tilePos,this.getNextTilePos()),this.tilePos=this.getNextTilePos(),this.startMoving(this.lastMovementImpulse),a>0&&this.updateCharacterPosition(e*a)):this.stopMoving())}maxProgressForDelta(e){let t=e/1e3;return Math.floor(t*this.speed*ot)}get tilePos(){return G.clone(this._tilePos)}set tilePos(e){G.copyOver(e,this._tilePos)}startMoving(e){e!=="none"&&(this.currentMovementReverted=!1,e!=this.movementDirection&&this.movementStarted$.next(e),this.movementDirection=e,this.facingDirection=e,this.fire(this.positionChangeStarted$,this.tilePos,this.getNextTilePos()))}tilePosInDirection(e,r){return e.add(tr(this.tilemap.toMapDirection(r)))}shouldContinueMoving(){return this.lastMovementImpulse!=="none"&&!this.isBlockingDirection(this.lastMovementImpulse)}stopMoving(){if(this.movementDirection==="none")return;let e=this.tilePos,r=this.getNextTilePos(),t=this.movementDirection;this.tilePos=this.getNextTilePos(),this.movementDirection="none",this.movementStopped$.next(t),this.currentMovementReverted=!1,this.fire(this.positionChangeFinished$,e,r)}fire(e,{position:r,layer:t},{position:a,layer:s}){e.next({exitTile:r,enterTile:a,exitLayer:t,enterLayer:s})}someCharTile(e){let r=this.getNextTilePos().position;for(let t=r.x;t<r.x+this.getTileWidth();t++)for(let a=r.y;a<r.y+this.getTileHeight();a++)if(e(t,a))return!0;return!1}};var E_=Ie(Wt(),1),Co=class n{constructor(e,r){this.walkingAnimationMapping=e;this.charsInRow=r;this.lastFootLeft=!1;this.directionToFrameRow={down:0,"down-left":1,"down-right":2,left:1,right:2,up:3,"up-left":1,"up-right":2};this._isEnabled=!0;this.frameChange$=new E_.Subject;this.setWalkingAnimationMapping(e)}static{this.FRAMES_CHAR_ROW=3}static{this.FRAMES_CHAR_COL=4}frameChange(){return this.frameChange$}setIsEnabled(e){this._isEnabled=e}isEnabled(){return this._isEnabled}updateCharacterFrame(e,r,t){this._isEnabled&&(r?this.setStandingFrameDuringWalk(e,t):this.setWalkingFrame(e))}setStandingFrame(e){this._isEnabled&&this._setStandingFrame(e)}setWalkingAnimationMapping(e){this.walkingAnimationMapping=e,this._isEnabled=this.walkingAnimationMapping!==void 0}getWalkingAnimationMapping(){return this.walkingAnimationMapping}getCharsInRow(){return this.charsInRow}setStandingFrameDuringWalk(e,r){this.isCurrentFrameStanding(e,r)||(this.lastFootLeft=!this.lastFootLeft),this._setStandingFrame(e)}setWalkingFrame(e){let r=this.framesOfDirection(e);r&&this.frameChange$.next(this.lastFootLeft?r.rightFoot:r.leftFoot)}_setStandingFrame(e){let r=this.framesOfDirection(e);r&&this.frameChange$.next(r.standing)}isCurrentFrameStanding(e,r){return r===this.framesOfDirection(e)?.standing}framesOfDirection(e){return typeof this.walkingAnimationMapping=="number"?this.getFramesForCharIndex(e,this.walkingAnimationMapping):this.getFramesForAnimationMapping(e)}getFramesForAnimationMapping(e){if(this.walkingAnimationMapping)return this.walkingAnimationMapping[e]||this.walkingAnimationMapping[this.fallbackDirection(e)]}fallbackDirection(e){switch(e){case"down-left":return"left";case"down-right":return"right";case"up-left":return"left";case"up-right":return"right"}return e}getFramesForCharIndex(e,r){let t=Math.floor(r/this.charsInRow),a=r%this.charsInRow,s=this.charsInRow*n.FRAMES_CHAR_ROW,c=n.FRAMES_CHAR_ROW*a,f=(this.directionToFrameRow[e]??0)+t*n.FRAMES_CHAR_COL,p=c+f*s;return{rightFoot:p,standing:p+1,leftFoot:p+2}}};var mi=class{static shiftPad(e,r){let t=Math.floor(e),s=`${t}`.padStart(r,"0").length;return t/Math.pow(10,s)}};var Cd=Ie(Wt(),1),sl=Ie(Cn(),1);var _e=class n{static vec2str(e){return`${e.x}#${e.y}`}static equal(e,r){return n.vec2str(e)==n.vec2str(r)}static manhattanDistance(e,r){let t=Math.abs(e.x-r.x),a=Math.abs(e.y-r.y);return t+a}static chebyshevDistance(e,r){let t=Math.abs(e.x-r.x),a=Math.abs(e.y-r.y);return Math.max(t,a)}static scalarMult(e,r){return e.clone().multiply(new S(r,r))}};var gi=class n{constructor(e){this.tilemap=e;this.charLayerDepths=new Map;this.setLayerDepths()}static{this.ALWAYS_TOP_PROP_NAME="ge_alwaysTop"}static{this.CHAR_LAYER_PROP_NAME="ge_charLayer"}static{this.HEIGHT_SHIFT_PROP_NAME="ge_heightShift"}static{this.Z_INDEX_PADDING=7}getTileWidth(){let e=this.tilemap.layers[0]?.tilemapLayer.scale??1;return this.tilemap.tileWidth*e}getTileHeight(){let e=this.tilemap.layers[0]?.tilemapLayer.scale??1;return this.tilemap.tileHeight*e}getDepthOfCharLayer(e){return this.charLayerDepths.get(e)??0}tilePosToPixelPos(e){return this.isIsometric()?_e.scalarMult(this.getTileSize(),.5).multiply(new S(e.x-e.y,e.x+e.y)):e.clone().multiply(this.getTileSize())}getTileDistance(e){if(this.isIsometric())switch(e){case"down-left":case"down-right":case"up-left":case"up-right":return _e.scalarMult(this.getTileSize(),.5);default:return this.getTileSize()}return this.getTileSize()}getTileSize(){return new S(this.getTileWidth(),this.getTileHeight())}isIsometric(){return this.tilemap.orientation==Phaser.Tilemaps.Orientation.ISOMETRIC.toString()}isLayerAlwaysOnTop(e){return this.hasLayerProp(e,n.ALWAYS_TOP_PROP_NAME)}isCharLayer(e){return this.hasLayerProp(e,n.CHAR_LAYER_PROP_NAME)}setLayerDepths(){let e=[],r=-1,t=this.tilemap.layers.filter(s=>this.isLayerAlwaysOnTop(s));this.tilemap.layers.filter(s=>!this.isLayerAlwaysOnTop(s)).forEach(s=>{this.hasLayerProp(s,n.HEIGHT_SHIFT_PROP_NAME)?(this.createHeightShiftLayers(s,r),e.push(s.tilemapLayer)):this.setDepth(s,++r)}),this.charLayerDepths.set(void 0,r),t.forEach((s,c)=>{s.tilemapLayer.setDepth(c+1+r)}),e.forEach(s=>s.destroy())}setDepth(e,r){e.tilemapLayer.setDepth(r),this.isCharLayer(e)&&this.charLayerDepths.set(this.getLayerProp(e,n.CHAR_LAYER_PROP_NAME),r)}createHeightShiftLayers(e,r){let t=this.getLayerProp(e,n.HEIGHT_SHIFT_PROP_NAME);isNaN(t)&&(t=0);let a=1;for(let s=0;s<e.height;s++){let c=this.copyLayer(e,s);if(c){c.scale=e.tilemapLayer.scale;let f=this.isIsometric()?this.getTileHeight()/2:this.getTileHeight();c.setDepth(r+mi.shiftPad((s+t)*f+a,n.Z_INDEX_PADDING))}}}getLayerProp(e,r){return e.properties.find(s=>s.name==r)?.value}hasLayerProp(e,r){return this.getLayerProp(e,r)!=null}copyLayer(e,r){let t=`${e.name}#${r}`,a=this.tilemap.createBlankLayer(t,e.tilemapLayer.tileset);if(a){if(a.name=t,this.isIsometric())for(let s=r;s>=0;s--){let c=r-s;a.putTileAt(e.data[s][c],c,s)}else for(let s=0;s<e.width;s++)a.putTileAt(e.data[r][s],s,r);return a}}};var al=class{constructor(e,r,t,a,s){this.charData=e;this.scene=r;this.tilemap=t;this.geHeadless=s;this.customOffset=new S(0,0);this.depthOffset=0;this.newSpriteSet$=new Cd.Subject;this.destroy$=new Cd.Subject;this.layerOverlaySprite=a&&e.sprite?this.scene.add.sprite(0,0,e.sprite.texture):void 0,this.walkingAnimationMapping=e.walkingAnimationMapping,this.customOffset=new S(e.offsetX||0,e.offsetY||0),this.depthOffset=e.depthOffset??0,this.sprite=e.sprite,this.container=e.container,this.cachedContainerBounds=e.container?.getBounds(),this.geHeadless.directionChanged().pipe((0,sl.filter)(({charId:c})=>c===this.charData.id)).subscribe(({direction:c})=>{this.animation?.setStandingFrame(c)}),this.sprite&&(this.sprite.setOrigin(0,0),this.resetAnimation(this.sprite),this.updateOverlaySprite(),this.updateGridChar())}destroy(){this.destroy$.next(),this.destroy$.complete(),this.newSpriteSet$.complete()}setSprite(e){e?(this.sprite&&(e.x=this.sprite.x,e.y=this.sprite.y),this.sprite=e,this.newSpriteSet$.next(),this.layerOverlaySprite=this.layerOverlaySprite?this.scene.add.sprite(0,0,this.sprite.texture):void 0,this.updateOverlaySprite(),this.resetAnimation(this.sprite),this.updateDepth()):(this.layerOverlaySprite=void 0,this.sprite=void 0)}getSprite(){return this.sprite}getLayerOverlaySprite(){return this.layerOverlaySprite}setContainer(e){this.container=e,this.cachedContainerBounds=e?.getBounds()}getContainer(){return this.container}getOffsetX(){return this.customOffset.x}setOffsetX(e){this.customOffset.x=e}getOffsetY(){return this.customOffset.y}setOffsetY(e){this.customOffset.y=e}getWalkingAnimationMapping(){return this.walkingAnimationMapping}turnTowards(e){this.geHeadless.isMoving(this.charData.id)||e!="none"&&(this.geHeadless.turnTowards(this.charData.id,e),this.animation?.setStandingFrame(e))}getAnimation(){return this.animation}setAnimation(e){this.animation=e}update(e){this.updateGridChar()}getDepthOffset(){return this.depthOffset}getEngineOffset(){if(!this.sprite)return S.ZERO;let e=this.tilemap.getTileWidth()/2-Math.floor((this.sprite?.displayWidth??0)/2),r=-(this.sprite?.displayHeight??0)+this.tilemap.getTileHeight();return new S(e,r)}updatePixelPos(){let e=new S(this.geHeadless.getPosition(this.charData.id));this.geHeadless.isCurrentMovementReverted(this.charData.id)&&(e=new S(this.geHeadless.getTilePosInDirection(this.geHeadless.getPosition(this.charData.id),this.geHeadless.getCharLayer(this.charData.id),fo(this.geHeadless.getFacingDirection(this.charData.id))).position));let r=this.geHeadless.getMovementProgress(this.charData.id)/1e3,a=this.tilemap.tilePosToPixelPos(e).add(this.getEngineOffset()).add(this.customOffset).add(tr(this.geHeadless.getFacingDirection(this.charData.id)).multiply(this.tilemap.getTileDistance(this.geHeadless.getFacingDirection(this.charData.id)).scalarMult(r))),s=this.getGameObj();s&&(s.x=Math.floor(a.x),s.y=Math.floor(a.y))}getGameObj(){return this.container||this.sprite}updateGridChar(){if(this.updatePixelPos(),this.sprite&&this.geHeadless.isMoving(this.charData.id)){let e=this.geHeadless.getMovementProgress(this.charData.id)>ot/2;this.getAnimation()?.updateCharacterFrame(this.geHeadless.getFacingDirection(this.charData.id),e,Number(this.sprite.frame.name))}this.updateDepth()}resetAnimation(e){let r=new Co(this.walkingAnimationMapping,e.texture.source[0].width/e.width/Co.FRAMES_CHAR_ROW);this.setAnimation(r),r.frameChange().pipe((0,sl.takeUntil)(this.newSpriteSet$)).subscribe(t=>{e?.setFrame(t)}),r.setIsEnabled(this.walkingAnimationMapping!==void 0),r.setStandingFrame(this.geHeadless.getFacingDirection(this.charData.id))}updateOverlaySprite(){if(!this.layerOverlaySprite||!this.sprite)return;this.layerOverlaySprite.scale=this.sprite.scale;let e=this.tilemap.getTileHeight()/this.layerOverlaySprite.scale;this.layerOverlaySprite.setCrop(0,0,this.layerOverlaySprite.displayWidth,this.sprite.height-e),this.layerOverlaySprite.setOrigin(0,0)}updateDepth(){if(!this.getGameObj())return;let r=new S(this.geHeadless.getPosition(this.charData.id)),t=this.geHeadless.getCharLayer(this.charData.id);this.container?this.setContainerDepth(this.container,{position:r,layer:t}):this.sprite&&this.setSpriteDepth(this.sprite,{position:r,layer:t});let a=this.getLayerOverlaySprite();if(a){let s=new S({...r,y:r.y-1});this.setSpriteDepth(a,{position:s,layer:t})}}setSpriteDepth(e,r){e.setDepth(this.tilemap.getDepthOfCharLayer(this.getTransitionLayer(r))+this.getPaddedPixelDepthSprite(e))}setContainerDepth(e,r){e.setDepth(this.tilemap.getDepthOfCharLayer(this.getTransitionLayer(r))+this.getPaddedPixelDepthContainer(e))}getPaddedPixelDepthContainer(e){return mi.shiftPad(e.y+(this.cachedContainerBounds?.y??0)+(this.cachedContainerBounds?.height??0)+this.depthOffset,gi.Z_INDEX_PADDING)}getPaddedPixelDepthSprite(e){return mi.shiftPad(e.y+e.displayHeight+this.depthOffset,gi.Z_INDEX_PADDING)}getTransitionLayer(e){if(e.layer)return this.geHeadless.getTransition(e.position,e.layer)||e.layer}};var Ao=(a=>(a.DONT_BLOCK="DONT_BLOCK",a.BLOCK_TWO_TILES="BLOCK_TWO_TILES",a.BLOCK_ONE_TILE_AHEAD="BLOCK_ONE_TILE_AHEAD",a.BLOCK_ONE_TILE_BEHIND="BLOCK_ONE_TILE_BEHIND",a))(Ao||{});var yi=(a=>(a.STOP="STOP",a.CLOSEST_REACHABLE="CLOSEST_REACHABLE",a.RETRY="RETRY",a.ALTERNATIVE_TARGETS="ALTERNATIVE_TARGETS",a))(yi||{});var ul=class{distance(e,r){return _e.manhattanDistance(e,r)}direction(e,r){if(_e.equal(e,r))return"none";let t=e.clone().subtract(r);return Math.abs(t.x)>Math.abs(t.y)?t.x>0?"left":"right":t.y>0?"up":"down"}neighbors(e){return[new S(e.x,e.y+1),new S(e.x+1,e.y),new S(e.x-1,e.y),new S(e.x,e.y-1)]}getDirections(){return["up","right","down","left"]}};var cl=class{distance(e,r){return _e.chebyshevDistance(e,r)}neighbors(e){let r=[new S(e.x,e.y+1),new S(e.x+1,e.y),new S(e.x-1,e.y),new S(e.x,e.y-1)],t=[new S(e.x+1,e.y+1),new S(e.x+1,e.y-1),new S(e.x-1,e.y+1),new S(e.x-1,e.y-1)];return[...r,...t]}direction(e,r){return r.x>e.x?r.y>e.y?"down-right":r.y<e.y?"up-right":"right":r.x<e.x?r.y>e.y?"down-left":r.y<e.y?"up-left":"left":r.y<e.y?"up":r.y>e.y?"down":"none"}getDirections(){return["up","right","down","left","down-left","down-right","up-right","up-left"]}};var Tr=class{static create(e){switch(e){case 4:return new ul;case 8:return new cl}}};var Eo=class{constructor(e,r,t){this.backoffMs=e;this.maxRetries=r;this.onFinished=t;this.retries=0;this.elapsed=0}retry(e,r){this.shouldRetry()?(this.elapsed+=e,this.elapsed>=this.backoffMs&&(this.elapsed=0,this.retries++,r())):this.onFinished()}reset(){this.retries=0,this.elapsed=0}getMaxRetries(){return this.maxRetries}getBackoffMs(){return this.backoffMs}shouldRetry(){return this.maxRetries===-1||this.retries<this.maxRetries}};var An=(t=>(t.WAIT="WAIT",t.RETRY="RETRY",t.STOP="STOP",t))(An||{});var Dn=Ie(Wt(),1);var kr=class{constructor(e,{shortestPathAlgorithm:r="BFS",pathWidth:t=1,pathHeight:a=1,numberOfDirections:s=4,isPositionAllowed:c=(D,U)=>!0,collisionGroups:f=[],ignoredChars:p=[],ignoreTiles:m=!1,ignoreMapBounds:O=!1,ignoreBlockedTarget:A=!1,maxPathLength:q=1/0,ignoreLayers:j=!1,considerCosts:I=!1,calculateClosestToTarget:F=!0}={}){this.gridTilemap=e;this.options={shortestPathAlgorithm:r,pathWidth:t,pathHeight:a,numberOfDirections:s,isPositionAllowed:c,collisionGroups:f,ignoredChars:p,ignoreTiles:m,ignoreMapBounds:O,ignoreBlockedTarget:A,maxPathLength:q,ignoreLayers:j,considerCosts:I,calculateClosestToTarget:F},this.ignoredCharsSet=new Set(p)}findShortestPath(e,r){this.options.ignoreLayers&&(this.gridTilemap.fixCacheLayer(e.layer),r.layer=e.layer);let t=this.findShortestPathImpl(e,r);return this.gridTilemap.unfixCacheLayers(),t}getNeighbors(e,r){return Tr.create(this.options.numberOfDirections??4).neighbors(e.position).map(c=>{let f=e.layer;return this.options.ignoreLayers||(f=this.gridTilemap.getTransition(c,e.layer)),{position:c,layer:f||e.layer}}).filter(c=>!this.isBlocking(e,c)||this.options.ignoreBlockedTarget&&G.equal(c,r))}getTransition(e,r){if(!this.options.ignoreLayers)return this.gridTilemap.getTransition(e,r)}getCosts(e,r){if(!this.options.considerCosts)return 1;let t=Ce(r.position,e);return this.gridTilemap.getTileCosts(r,t)}isBlocking(e,r){return!(this.options.ignoreMapBounds||this.gridTilemap.isInRange(r.position))||!this.options.isPositionAllowed(r.position,r.layer)||!this.options.ignoreTiles&&this.hasBlockingTileFrom(e,r,this.options.pathWidth,this.options.pathHeight,this.options.ignoreMapBounds,this.gridTilemap)?!0:this.hasBlockingCharFrom(e,r,this.options.pathWidth,this.options.pathHeight,this.options.collisionGroups,this.ignoredCharsSet,this.gridTilemap)}distance(e,r){return(this.options.numberOfDirections===4?_e.manhattanDistance:_e.chebyshevDistance)(e,r)}getTilePosInDir(e,r){return this.options.ignoreLayers?{position:e.position.add(tr(this.gridTilemap.toMapDirection(r))),layer:e.layer}:this.gridTilemap.getTilePosInDirection(e,r)}getReverseNeighbors(e,r){let a=Tr.create(this.options.numberOfDirections??4).neighbors(e.position),s;if(!this.options.ignoreLayers){let f=this.gridTilemap.getReverseTransitions(e.position,e.layer);s=f?[...f]:void 0}return a.map(f=>s?s.map(p=>({position:f,layer:p||e.layer})):[{position:f,layer:e.layer}]).flat().filter(f=>!this.isBlocking(f,e)||this.options.ignoreBlockedTarget&&G.equal(e,r))}hasBlockingCharFrom(e,r,t,a,s,c,f){if(t===1&&a===1)return f.hasBlockingChar(r.position,r.layer,s,c);let p=O=>f.hasBlockingChar(O,r.layer,s,c),m=Ce(e.position,r.position);return this.isBlockingMultiTile(e,m,t,a,p)}hasBlockingTileFrom(e,r,t,a,s,c){if(t===1&&a===1)return c.hasBlockingTile(r.position,r.layer,Ce(r.position,e.position),s);let f=Ce(e.position,r.position),p=m=>c.hasBlockingTile(m,r.layer,f,s);return this.isBlockingMultiTile(e,f,t,a,p)}isBlockingMultiTile(e,r,t,a,s){let c={src:new S(e.position.x+t,e.position.y),dest:new S(e.position.x+t,e.position.y+a-1)},f={src:new S(e.position.x-1,e.position.y),dest:new S(e.position.x-1,e.position.y+a-1)},p={src:new S(e.position.x,e.position.y-1),dest:new S(e.position.x+t-1,e.position.y-1)},m={src:new S(e.position.x,e.position.y+a),dest:new S(e.position.x+t-1,e.position.y+a)};switch(r){case"right":return this.checkLine(c,s);case"left":return this.checkLine(f,s);case"up":return this.checkLine(p,s);case"down":return this.checkLine(m,s);case"up-left":return this.checkLine({src:p.src,dest:new S(p.dest.x-1,p.dest.y)},s)||this.checkLine({src:new S(f.src.x,f.src.y-1),dest:new S(f.dest.x,f.dest.y-1)},s);case"up-right":return this.checkLine({src:new S(p.src.x+1,p.src.y),dest:p.dest},s)||this.checkLine({src:new S(c.src.x,c.src.y-1),dest:new S(c.dest.x,c.dest.y-1)},s);case"down-left":return this.checkLine({src:new S(f.src.x,f.src.y+1),dest:new S(f.dest.x,f.dest.y+1)},s)||this.checkLine({src:m.src,dest:new S(m.dest.x-1,m.dest.y)},s);case"down-right":return this.checkLine({src:new S(m.src.x+1,m.src.y),dest:m.dest},s)||this.checkLine({src:new S(c.src.x,c.src.y+1),dest:new S(c.dest.x,c.dest.y+1)},s)}return!1}checkLine(e,r){for(let t=e.src.x;t<=e.dest.x;t++)for(let a=e.src.y;a<=e.dest.y;a++)if(r(new S(t,a)))return!0;return!1}};var kd=Ie(U_(),1),Rd=Ie(Q_(),1),sP=Ie(eP(),1),wr=Ie(aP(),1);var jo=kd.default.MinFibonacciHeap,o8=kd.default.MaxFibonacciHeap,a8=Rd.default.MinHeap,s8=Rd.default.MaxHeap,u8=sP.default.GeneralizedSuffixArray,c8=wr.default.Uint8Vector,l8=wr.default.Uint8ClampedVector,f8=wr.default.Int8Vector,h8=wr.default.Uint16Vector,p8=wr.default.Int16Vector,d8=wr.default.Uint32Vector,v8=wr.default.Int32Vector,m8=wr.default.Float32Vector,g8=wr.default.Float64Vector,y8=wr.default.PointerVector;var dl=class extends kr{findShortestPathImpl(e,r){let t=this.shortestPathBfs(e,r);return{path:this.returnPath(t.previous,e,r),closestToTarget:t.closestToTarget,steps:t.steps,maxPathLengthReached:t.maxPathLengthReached,algorithmUsed:"A_STAR"}}shortestPathBfs(e,r){let t=new Map,a=new Map,s=new Map,c=new jo((O,A)=>Io(s,O)-Io(s,A)),f=e,p=this.distance(e.position,r.position),m=0;for(c.push(e),a.set(G.toString(e),0),s.set(G.toString(e),this.distance(e.position,r.position));c.size>0;){let O=c.pop();if(!O)break;m++;let A=this.distance(O.position,r.position);if(A<p&&(p=A,f=O),uP(O,r))return{previous:t,closestToTarget:f,steps:m,maxPathLengthReached:!1};if(Io(a,O)+1>this.options.maxPathLength)return{previous:new Map,closestToTarget:f,steps:m,maxPathLengthReached:!0};for(let q of this.getNeighbors(O,r)){let j=Io(a,O)+this.getCosts(O.position,q),I=G.toString(q);(!a.has(I)||j<Io(a,q))&&(t.set(I,O),a.set(I,j),s.set(I,j+this.distance(q.position,r.position)),c.push(q))}}return{previous:t,closestToTarget:f,steps:m,maxPathLengthReached:!1}}returnPath(e,r,t){let a=[],s=t;for(a.push(s);!uP(s,r);){if(s=e.get(G.toString(s)),!s)return[];a.push(s)}return a.reverse()}};function Io(n,e){return n.get(G.toString(e))??Number.MAX_VALUE}function uP(n,e){return _e.equal(n.position,e.position)?n.layer===e.layer:!1}var vl=class{constructor(e){this.data=e}},at=class{constructor(){this.sizeInternal=0}dequeue(){if(this.tail===void 0)return;this.sizeInternal--;let e=this.tail.data;return this.tail.prev===void 0?(this.tail=void 0,this.head=void 0,e):(this.tail.prev.next=void 0,this.tail=this.tail.prev,e)}enqueue(e){if(this.sizeInternal++,this.head===void 0){this.head=new vl(e),this.tail=this.head;return}let r=new vl(e);r.next=this.head,this.head.prev=r,this.head=r}peek(){return this.tail?this.tail.data:void 0}peekAll(){let e=[],r=this.tail;for(;r;)e.push(r.data),r=r.prev;return e}clear(){this.head=void 0,this.tail=void 0,this.sizeInternal=0}peekEnd(){return this.head?.data}size(){return this.sizeInternal}};var Ln=class extends kr{findShortestPathImpl(e,r){let t=this.shortestPathBfs(e,r);return{path:this.returnPath(t.previous,e,r),closestToTarget:t.closestToTarget,steps:t.steps,maxPathLengthReached:t.maxPathLengthReached,algorithmUsed:"BFS"}}equal(e,r){return _e.equal(e.position,r.position)?e.layer===r.layer:!1}shortestPathBfs(e,r){let t=new Map,a=new Set,s=new at,c=e,f=this.distance(e.position,r.position),p=0;for(s.enqueue({node:e,dist:0}),a.add(G.toString(e));s.size()>0;){let m=s.dequeue();if(p++,!m)break;let{node:O,dist:A}=m;if(A>this.options.maxPathLength)return{previous:new Map,closestToTarget:c,steps:p,maxPathLengthReached:!0};let q=this.distance(O.position,r.position);if(q<f&&(f=q,c=O),this.equal(O,r))return{previous:t,closestToTarget:c,steps:p,maxPathLengthReached:!1};for(let j of this.getNeighbors(O,r))a.has(G.toString(j))||(t.set(G.toString(j),O),s.enqueue({node:j,dist:A+1}),a.add(G.toString(j)))}return{previous:t,closestToTarget:c,steps:p,maxPathLengthReached:!1}}returnPath(e,r,t){let a=[],s=t;for(a.push(s);!this.equal(s,r);){if(s=e.get(G.toString(s)),!s)return[];a.push(s)}return a.reverse()}};var ml=class{constructor(){this.previous=new Map;this.visited=new Map;this.queue=new at;this.minMatching=1/0;this.lastDist=0}isNewFrontier(){let e=this.queue.peek();return!!(e&&e.dist>this.lastDist)}step(e,r,t){this.lastDist=t;for(let a of e){let s=G.toString(a);if(!this.visited.has(s)){this.previous.set(s,r),this.queue.enqueue({node:a,dist:t+1}),this.visited.set(s,t+1);let c=this.otherBfs?.visited.get(s);c!==void 0&&c<this.minMatching&&(this.minMatching=c,this.minMatchingNode=a)}}}},gl=class extends kr{findShortestPathImpl(e,r){let t=this.shortestPathBfs(e,r);return{path:this.returnPath(t.previous,t.previous2,t.matchingPos,e,r),closestToTarget:t.closestToTarget,steps:t.steps,maxPathLengthReached:t.maxPathLengthReached,algorithmUsed:"BIDIRECTIONAL_SEARCH"}}equal(e,r){return _e.equal(e.position,r.position)?e.layer===r.layer:!1}shortestPathBfs(e,r){if(G.equal(e,r))return{previous:new Map,previous2:new Map,closestToTarget:e,steps:0,maxPathLengthReached:!1};let t=new ml,a=new ml,s=0;t.otherBfs=a,a.otherBfs=t;let c=e,f=this.distance(e.position,r.position);for(t.queue.enqueue({node:e,dist:0}),a.queue.enqueue({node:r,dist:0}),t.visited.set(G.toString(e),0),a.visited.set(G.toString(r),0);this.shouldStop(t.queue.size()>0,a.queue.size()>0);){let p=t.queue.dequeue();if(!p)break;let{node:m,dist:O}=p;if(O+1+(a.queue.peek()?.dist||0)>this.options.maxPathLength)return{previous:t.previous,previous2:a.previous,closestToTarget:this.maybeClosestToTarget(c),steps:s,maxPathLengthReached:!0};let A=this.distance(m.position,r.position);if(A<f&&(f=A,c=m),s++,t.step(this.getNeighbors(m,r),m,O),t.isNewFrontier()&&t.minMatchingNode)return{previous:t.previous,previous2:a.previous,closestToTarget:this.maybeClosestToTarget(r),matchingPos:t.minMatchingNode,steps:s,maxPathLengthReached:!1};let q=a.queue.dequeue();if(!q)continue;let{node:j,dist:I}=q;if(s++,a.step(this.getReverseNeighbors(j,r),j,I),a.isNewFrontier()&&a.minMatchingNode)return{previous:t.previous,previous2:a.previous,closestToTarget:this.maybeClosestToTarget(r),matchingPos:a.minMatchingNode,steps:s,maxPathLengthReached:!1}}return{previous:t.previous,previous2:a.previous,closestToTarget:this.maybeClosestToTarget(c),steps:s,maxPathLengthReached:!1}}shouldStop(e,r){return this.options.calculateClosestToTarget?e||r:e&&r}maybeClosestToTarget(e){return this.options.calculateClosestToTarget?e:void 0}returnPath(e,r,t,a,s){if(t){let c=this.getPathFromPrev(e,a,t).reverse(),f=this.getPathFromPrev(r,s,t);return c.pop(),[...c,...f]}else return this.getPathFromPrev(e,a,s).reverse()}getPathFromPrev(e,r,t){let a=[],s=t;for(a.push(s);!this.equal(s,r);){if(s=e.get(G.toString(s)),!s)return[];a.push(s)}return a}};var Mn=class extends kr{constructor(r,t={}){super(r,t);this.openSet=new jo;this.g=new Map;this.f=new Map;this.closestToTarget={position:new S(0,0),layer:void 0};this.smallestDistToTarget=0;this.steps=0;this.visits=[];this.maxFrontierSize=0;this.maxJumpSize=0}findShortestPathImpl(r,t){this.maxJumpSize=this.distance(r.position,t.position);let a=this.shortestPath(r,t);return{path:this.returnPath(a.previous,r,t),closestToTarget:a.closestToTarget,steps:a.steps,maxPathLengthReached:a.maxPathLengthReached,algorithmUsed:"JPS"}}shortestPath(r,t){this.steps=0;let a=new Map;this.g=new Map,this.f=new Map,this.closestToTarget=r,this.smallestDistToTarget=this.distance(r.position,t.position),this.openSet=new jo((c,f)=>Fo(this.f,c)-Fo(this.f,f)),this.openSet.push(r);let s=G.toString(r);for(this.g.set(s,0),this.f.set(s,this.distance(r.position,t.position)),this.maxFrontierSize=Math.max(this.maxFrontierSize,this.openSet.size);this.openSet.size>0;){let c=this.openSet.pop();if(!c)break;if(this.steps++,G.equal(c,t))return{previous:a,closestToTarget:t,steps:this.steps,maxPathLengthReached:!1};if(Fo(this.g,c)+1>this.options.maxPathLength)return{previous:new Map,closestToTarget:this.closestToTarget,steps:this.steps,maxPathLengthReached:!0};this.updateClosestToTarget(c,t);for(let f of this.getNeighborsInternal(c,a.get(G.toString(c)),t)){let p=G.toString(f.p),m=Fo(this.g,c)+f.dist;(!this.g.has(p)||m<Fo(this.g,f.p))&&(a.set(p,c),this.g.set(p,m),this.f.set(p,m+this.distance(f.p.position,t.position)),this.openSet.push(f.p))}}return{previous:a,closestToTarget:this.closestToTarget,steps:this.steps,maxPathLengthReached:!1}}updateClosestToTarget(r,t){let a=this.distance(r.position,t.position);a<this.smallestDistToTarget&&(this.smallestDistToTarget=a,this.closestToTarget=r)}addIfNotBlocked(r,t,a){this.blockOrTrans(t,a)||r.push(a)}blockOrTrans(r,t){return this.isBlocking(r,t)||this.getTransition(t.position,t.layer)!==void 0}getNeighborsInternal(r,t,a){if(!t||r.layer!==t.layer)return this.getNeighbors(r,a).map(f=>({p:f,dist:1}));let s=this.prune(t,r).filter(f=>!this.isBlockingIgnoreTarget(r,f,a)).map(f=>{let p=this.getTransition(f.position,r.layer);return{position:f.position,layer:p||r.layer}}),c=[];for(let f of s)if(this.isHorizontal(r.position,f.position))c.push({p:f,dist:1});else{let p=this.jump(r,f,a,1,Ce(r.position,f.position));p&&c.push(p)}return c}isBlockingIgnoreTarget(r,t,a){return this.isBlocking(r,t)&&!(this.options.ignoreBlockedTarget&&G.equal(t,a))}jump(r,t,a,s,c){if(!this.isBlockingIgnoreTarget(r,t,a))return G.equal(t,a)?{p:t,dist:s}:s>=this.maxJumpSize?{p:t,dist:s}:this.getTransition(t.position,r.layer)!==void 0?{p:t,dist:s}:this.hasForced(r,t)?{p:t,dist:s}:(this.updateClosestToTarget(t,a),this.jump(t,this.getTilePosInDir(t,c),a,s+1,c))}isHorizontal(r,t){return r.y===t.y}getForced(r,t,a,s,c,f){let p=[],m=r;return(this.blockOrTrans(m,a)||this.blockOrTrans(a,s))&&this.addIfNotBlocked(p,t,s),(this.blockOrTrans(m,c)||this.blockOrTrans(c,f))&&this.addIfNotBlocked(p,t,f),p}hasForced(r,t){let{topLeft:a,downLeft:s,top:c,bottom:f}=this.normalizedPositions(r,t);return!!((this.blockOrTrans(r,s)||this.blockOrTrans(s,f))&&!this.blockOrTrans(t,f)||(this.blockOrTrans(r,a)||this.blockOrTrans(a,c))&&!this.blockOrTrans(t,c))}prune(r,t){let{right:a,top:s,bottom:c,downLeft:f,topLeft:p}=this.normalizedPositions(r,t);return this.isHorizontal(r.position,t.position)?[a,s,c]:[a,...this.getForced(r,t,f,c,p,s)]}normalizedPositions(r,t){return r.position.x<t.position.x?{topLeft:{position:new S(t.position.x-1,t.position.y-1),layer:t.layer},downLeft:{position:new S(t.position.x-1,t.position.y+1),layer:t.layer},top:{position:new S(t.position.x,t.position.y-1),layer:t.layer},bottom:{position:new S(t.position.x,t.position.y+1),layer:t.layer},right:{position:new S(t.position.x+1,t.position.y),layer:t.layer}}:r.position.x>t.position.x?{topLeft:{position:new S(t.position.x+1,t.position.y+1),layer:t.layer},downLeft:{position:new S(t.position.x+1,t.position.y-1),layer:t.layer},top:{position:new S(t.position.x,t.position.y+1),layer:t.layer},bottom:{position:new S(t.position.x,t.position.y-1),layer:t.layer},right:{position:new S(t.position.x-1,t.position.y),layer:t.layer}}:r.position.y<t.position.y?{topLeft:{position:new S(t.position.x+1,t.position.y-1),layer:t.layer},downLeft:{position:new S(t.position.x-1,t.position.y-1),layer:t.layer},top:{position:new S(t.position.x+1,t.position.y),layer:t.layer},bottom:{position:new S(t.position.x-1,t.position.y),layer:t.layer},right:{position:new S(t.position.x,t.position.y+1),layer:t.layer}}:{topLeft:{position:new S(t.position.x-1,t.position.y+1),layer:t.layer},downLeft:{position:new S(t.position.x+1,t.position.y+1),layer:t.layer},top:{position:new S(t.position.x-1,t.position.y),layer:t.layer},bottom:{position:new S(t.position.x+1,t.position.y),layer:t.layer},right:{position:new S(t.position.x,t.position.y-1),layer:t.layer}}}posInDir(r,t){return{position:r.position.add(tr(t)),layer:r.layer}}returnPath(r,t,a){let s=[],c=a;for(s.push(c);!G.equal(c,t);){let f=r.get(G.toString(c));if(!f)return[];this.distance(f.position,c.position)>1?this.fillPath(c,f,s):s.push(f),c=f}return s.reverse()}fillPath(r,t,a){let s=r;do{let c=Ce(s.position,t.position);s=this.getTilePosInDir(s,c),a.push(s)}while(!_e.equal(s.position,t.position))}};function Fo(n,e){return n.get(G.toString(e))??Number.MAX_VALUE}var qn=Ie(Cn(),1);var yl=class{constructor(e,r,t,a={}){this.character=e;this.gridTilemap=r;this.charToFollow=t;let s={distance:0,noPathFoundStrategy:"STOP",maxPathLength:1/0,shortestPathAlgorithm:"BIDIRECTIONAL_SEARCH",ignoreLayers:!1,considerCosts:a.considerCosts||!1,facingDirection:"none",isPositionAllowedFn:()=>!0,ignoredChars:[]};this.options={...s,...a},this.options.considerCosts&&this.options.shortestPathAlgorithm!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${this.options.shortestPathAlgorithm}'. It can only be used with A* algorithm.`),this.options.shortestPathAlgorithm==="JPS"&&(this.character.getTileWidth()>1||this.character.getTileHeight()>1)&&console.warn("GridEngine: Pathfinding algorithm 'JPS' can only be used for characters with 'tileWidth' and 'tileHeight' of 1")}init(){this.updateTarget(this.charToFollow.getTilePos().position,this.charToFollow.getTilePos().layer),this.charToFollow.positionChangeStarted().pipe((0,qn.takeUntil)(this.character.autoMovementSet().pipe((0,qn.filter)(e=>e!==this),(0,qn.take)(1)))).subscribe(({enterTile:e,enterLayer:r})=>{this.updateTarget(e,r)})}update(e){this.targetMovement?.update(e)}getInfo(){return{type:"Follow",config:{charToFollow:this.charToFollow.getId(),distance:this.options.distance,noPathFoundStrategy:this.options.noPathFoundStrategy,maxPathLength:this.options.maxPathLength,ignoreLayers:this.options.ignoreLayers,facingDirection:this.options.facingDirection,shortestPathAlgorithm:this.options.shortestPathAlgorithm,considerCosts:this.options.considerCosts,isPositionAllowedFn:this.options.isPositionAllowedFn,ignoredChars:this.options.ignoredChars}}}getFacingPos(){let e=co[this.options.facingDirection]+co[this.charToFollow.getFacingDirection()],r=Fa("up",e),t={x:this.charToFollow.getTilePos().position.x,y:this.charToFollow.getTilePos().position.y};return r==="right"?t.x+=this.charToFollow.getTileWidth()-1:r==="down"?t.y+=this.charToFollow.getTileWidth()-1:r==="down-left"?t.y+=this.charToFollow.getTileWidth()-1:r==="down-right"?(t.y+=this.charToFollow.getTileWidth()-1,t.x+=this.charToFollow.getTileWidth()-1):r==="up-right"&&(t.x+=this.charToFollow.getTileWidth()-1),this.gridTilemap.getTilePosInDirection({position:new S(t),layer:this.charToFollow.getTilePos().layer},r).position}updateTarget(e,r){let t=this.options.facingDirection!=="none"&&this.options.distance===0;t&&(e=this.getFacingPos()),this.targetMovement=new xn(this.character,this.gridTilemap,{position:new S(e),layer:r},{distance:t?0:this.options.distance+1,config:{algorithm:this.options.shortestPathAlgorithm,noPathFoundStrategy:this.options.noPathFoundStrategy,maxPathLength:this.options.maxPathLength,ignoreLayers:this.options.ignoreLayers,considerCosts:this.options.considerCosts,ignoredChars:[this.charToFollow.getId(),...this.options.ignoredChars],isPositionAllowedFn:this.options.isPositionAllowedFn}}),this.targetMovement.init()}};var Do=class{static getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}};var jn=Ie(Cn(),1);var bl=class{constructor(e,r=0,t=-1){this.character=e;this.delay=r;this.radius=t;this.stepSize=0;this.delayLeft=this.delay,this.initialRow=e.getNextTilePos().position.y,this.initialCol=e.getNextTilePos().position.x,this.randomizeStepSize(),this.stepsWalked=0,this.currentMovementDirection="none",this.character.positionChangeStarted().pipe((0,jn.takeUntil)(this.character.autoMovementSet().pipe((0,jn.filter)(a=>a!==this),(0,jn.take)(1)))).subscribe(()=>{this.stepsWalked++}),this.distanceUtils=Tr.create(e.getNumberOfDirections())}init(){}update(e){if(this.shouldContinueWalkingCurrentDirection())this.character.move(this.currentMovementDirection);else if(this.delayLeft-=e,this.delayLeft<=0){this.delayLeft=this.delay;let r=this.getFreeRandomDirection();this.stepsWalked=0,this.character.move(r),this.currentMovementDirection=r,this.randomizeStepSize()}}getInfo(){return{type:"Random",config:{delay:this.delay,radius:this.radius}}}shouldContinueWalkingCurrentDirection(){return this.stepsWalked<this.stepSize&&this.currentMovementDirection!=="none"&&!this.character.isBlockingDirection(this.currentMovementDirection)&&this.isWithinRadius(this.currentMovementDirection)}getFreeDirections(){return this.distanceUtils.getDirections().filter(r=>!this.character.isBlockingDirection(r)).filter(r=>this.isWithinRadius(r))}isWithinRadius(e){return this.radius==-1?!0:this.getDist(e)<=this.radius}getDist(e){return this.distanceUtils.distance(this.character.getNextTilePos().position.add(tr(e)),new S(this.initialCol,this.initialRow))}getFreeRandomDirection(){let e=this.getFreeDirections();return e.length==0?"none":e[Do.getRandomInt(e.length)]}randomizeStepSize(){this.stepSize=Do.getRandomInt(this.radius)+1}};var Sr=Ie(Wt(),1),Ae=Ie(Cn(),1);function cP(n,e){return n.filter(r=>e.labels?.withAllLabels?e.labels?.withAllLabels.every(t=>r.hasLabel(t)):e.labels?.withOneOfLabels?e.labels?.withOneOfLabels.some(t=>r.hasLabel(t)):e.labels?.withNoneLabels?!e.labels?.withNoneLabels.some(t=>r.hasLabel(t)):!0)}var _l="2.48.2";var Qe=Ie(Wt(),1);var Pl=class{constructor(e,r){this.collistionStrategy=e;this.collisionGroupRelation=r;this.tilePosToCharacters=new Vd;this.charRemoved$=new Qe.Subject}isCharBlockingAt(e,r,t,a=new Set,s=new Set){if(t.length===0)return!1;let c=this.tilePosToCharacters.get(e,r);return!!(c&&c.size>0&&[...c].filter(f=>!a.has(f.getId())).filter(f=>!this.doIntersect(f.getCollisionGroups(),s)).some(f=>t.some(p=>f.getCollisionGroups().some(m=>this.collidesWith(p,m)))))}doIntersect(e,r){for(let t of e)if(r.has(t))return!0;return!1}collidesWith(e,r){return this.collisionGroupRelation?(this.collisionGroupRelation.get(e)||new Set).has(r):e===r}getCharactersAt(e,r){return this.tilePosToCharacters.get(e,r)||new Set}addCharacter(e){this.addTilePositions(e.getTilePos(),e),this.addTilePositions(e.getNextTilePos(),e),this.addPositionChangeSub(e),this.addPositionChangeFinishedSub(e),this.addTilePosSetSub(e)}removeCharacter(e){let r=e.getId();this.charRemoved$.next(r),this.deleteTilePositions(e.getTilePos(),e),this.deleteTilePositions(e.getNextTilePos(),e)}add(e,r,t){let a=this.tilePosToCharacters.get(e,r);a||this.tilePosToCharacters.set(e,r,new Set([t])),a?.add(t)}addTilePosSetSub(e){e.tilePositionSet().pipe((0,Qe.takeUntil)(this.charRemoved(e.getId()))).subscribe(r=>{this.deleteTilePositions(e.getNextTilePos(),e),this.addTilePositions(r,e)})}charRemoved(e){return this.charRemoved$?.pipe((0,Qe.take)(1),(0,Qe.filter)(r=>r==e))}addPositionChangeSub(e){e.positionChangeStarted().pipe((0,Qe.takeUntil)(this.charRemoved(e.getId())),this.posChangeToLayerPos()).subscribe(r=>{this.collistionStrategy==="BLOCK_ONE_TILE_AHEAD"&&this.deleteTilePositions(r.exit,e),this.addTilePositions(r.enter,e)})}addPositionChangeFinishedSub(e){e.positionChangeFinished().pipe((0,Qe.takeUntil)(this.charRemoved(e.getId())),this.posChangeToLayerPos()).subscribe(r=>{this.deleteTilePositions(r.exit,e),this.addTilePositions(r.enter,e)})}addTilePositions(e,r){this.forEachCharTile(e,r,(t,a)=>{this.add(new S(t,a),e.layer,r)})}deleteTilePositions(e,r){this.forEachCharTile(e,r,(t,a)=>{this.tilePosToCharacters.get(new S(t,a),e.layer)?.delete(r)})}forEachCharTile(e,r,t){let a=e.position;for(let s=a.x;s<a.x+r.getTileWidth();s++)for(let c=a.y;c<a.y+r.getTileHeight();c++)t(s,c)}posChangeToLayerPos(){return(0,Qe.pipe)((0,Qe.map)(e=>({enter:{position:new S(e.enterTile),layer:e.enterLayer},exit:{position:new S(e.exitTile),layer:e.exitLayer}})))}posToString(e,r){return`${e.x}#${e.y}#${r}`}},Vd=class{constructor(){this.memo=new Map}set(e,r,t){let a=this.memo.get(e.x);a||(a=new Map,this.memo.set(e.x,a));let s=a.get(e.y);s||(s=new Map,a.set(e.y,s)),s.set(r,t)}get(e,r){let t=this.memo.get(e.x);if(!t)return;let a=t.get(e.y);if(a)return a.get(r)}};var Ht=class{constructor(e,r,t,a){this.x=e;this.y=r;this.width=t;this.height=a}getX(){return this.x}getY(){return this.y}getWidth(){return this.width}getHeight(){return this.height}isInRange(e){return e.x>=this.x&&e.x<this.x+this.width&&e.y>=this.y&&e.y<this.y+this.height}};var In="ge_charLayer";var lP=0,_z=1,Nd={none:1,left:2,"up-left":3,up:4,"up-right":5,right:6,"down-right":7,down:8,"down-left":9},Tl=class{constructor(e,r){this.tilemap=e;this.gridTilemap=r;this.tileCollisionCache=new Map}fixLayer(e){this.fixedLayer=this.tileCollisionCache.get(e)}unfixLayers(){this.fixedLayer=void 0}rebuild(e){e||(e=new Ht(0,0,this.tilemap.getWidth(),this.tilemap.getHeight()));let r=this.tilemap.getLayers().filter(t=>t.isCharLayer());for(let t of[...r,void 0]){let a=this.tileCollisionCache.get(t?.getName());if(a===void 0){a=new Array(this.tilemap.getWidth());for(let s=0;s<this.tilemap.getWidth();s++)a[s]=new Array(this.tilemap.getHeight());this.tileCollisionCache.set(t?.getName(),a)}for(let s=e.getY();s<e.getY()+e.getHeight();s++)for(let c=e.getX();c<e.getX()+e.getWidth();c++){let f=0;!this.gridTilemap.hasNoTileUncached(new S(c,s),t?.getName())&&(f=Wd(f,0));for(let O of lo())this.gridTilemap.hasBlockingTileUncached(new S(c,s),t?.getName(),O,!0)&&(f=Wd(f,Nd[O]));this.gridTilemap.hasBlockingTileUncached(new S(c,s),t?.getName(),void 0,!0)&&(f=Wd(f,Nd[1])),a[c][s]=f}}}hasTileAt(e,r,t){let s=(this.fixedLayer||this.tileCollisionCache.get(t))?.[e]?.[r];if(s!==void 0)return Ol(s,lP)}isBlockingFrom(e,r,t,a,s){let f=(this.fixedLayer||this.tileCollisionCache.get(t))?.[e]?.[r];if(f!==void 0)return!s&&!Ol(f,lP)?!0:a===void 0?Ol(f,_z):Ol(f,Nd[a])}};function Wd(n,e){return n|1<<e}function Ol(n,e){return(n>>e&1)==1}var fP="ge_cost",wl=class n{constructor(e,r,t,a=void 0,s=!1){this.tilemap=e;this.collisionTilePropertyName=r;this.useTileCollisionCache=s;this.characters=new Map;this.transitions=new Map;this.reverseTransitions=new Map;this.collidesPropNames=new Map;this.tileCostPropNames=new Map;this.collisionRelevantLayersFrameCache=new Map;this.charBlockCache=new Pl(t,a);for(let c of lo())this.collidesPropNames.set(c,n.ONE_WAY_COLLIDE_PROP_PREFIX+c),this.tileCostPropNames.set(c,`${fP}_${c}`);this.useTileCollisionCache&&(this.tileCollisionCache=new Tl(e,this),this.tileCollisionCache.rebuild())}static{this.ONE_WAY_COLLIDE_PROP_PREFIX="ge_collide_"}fixCacheLayer(e){this.tileCollisionCache?.fixLayer(e)}unfixCacheLayers(){this.tileCollisionCache?.unfixLayers()}addCharacter(e){this.characters.set(e.getId(),e);let r=e.getNextTilePos().layer;r===void 0?e.setTilePosition({...e.getNextTilePos(),layer:this.getLowestCharLayer()}):this.getCharLayerNames().includes(r)||console.warn(`Char layer '${r}' of character '${e.getId()}' is unknown.`),this.charBlockCache.addCharacter(e)}removeCharacter(e){let r=this.characters.get(e);r&&(this.charBlockCache.removeCharacter(r),this.characters.delete(e))}getCharacters(){return[...this.characters.values()]}getCharactersAt(e,r){return this.charBlockCache.getCharactersAt(e,r)}rebuildTileCollisionCache(e){this.tileCollisionCache?.rebuild(e)}hasBlockingTileUncached(e,r,t,a){if(!a&&this.hasNoTileUncached(e,r))return!0;let s=this.getCollisionRelevantLayers(r);for(let c of s)if(this.isLayerBlockingAt(c.getName(),e,t))return!0;return!1}hasBlockingTile(e,r,t,a){let s=this.tileCollisionCache?.isBlockingFrom(e.x,e.y,r,t,a);return s!==void 0?s:this.hasBlockingTileUncached(e,r,t,a)}getTransition(e,r){let t=this.transitions.get(e.toString());if(t)return t.get(r)}getReverseTransitions(e,r){let t=this.reverseTransitions.get(e.toString());if(t)return t.get(r)}setTransition(e,r,t){this.transitions.has(e.toString())||this.transitions.set(e.toString(),new Map),this.reverseTransitions.has(e.toString())||this.reverseTransitions.set(e.toString(),new Map),this.transitions.get(e.toString())?.set(r,t),this.reverseTransitions.get(e.toString())?.has(t)||this.reverseTransitions.get(e.toString())?.set(t,new Set),this.reverseTransitions.get(e.toString())?.get(t)?.add(r)}getTransitions(){return new Map([...this.transitions].map(([e,r])=>[e,new Map(r)]))}getTileCosts(e,r){let t=this.getCollisionRelevantLayers(e.layer),a=1;for(let s of t)a=Math.max(a,this.getTileCostsForLayer({...e,layer:s.getName()},r));return a}getTileCostsForLayer(e,r){let t=this.tilemap.getTileAt(e.position.x,e.position.y,e.layer);return r&&t?.getProperty(this.tileCostPropNames.get(r)||"")||t?.getProperty(fP)||1}hasNoTileUncached(e,r){return!this.getCollisionRelevantLayers(r).some(a=>this.tilemap.hasTileAt(e.x,e.y,a.getName()))}hasNoTile(e,r){let t=this.tileCollisionCache?.hasTileAt(e.x,e.y,r);return t!==void 0?t:this.hasNoTileUncached(e,r)}hasBlockingChar(e,r,t,a=new Set,s=new Set){return this.charBlockCache.isCharBlockingAt(e,r,t,a,s)}isInRange(e){return new Ht(0,0,this.tilemap.getWidth(),this.tilemap.getHeight()).isInRange(e)}toMapDirection(e){return this.isIsometric()?Eg(e):e}fromMapDirection(e){return this.isIsometric()?Fa(e):e}isIsometric(){return this.tilemap.getOrientation()==="isometric"}getTilePosInDirection(e,r){let t=e.position.add(tr(this.toMapDirection(r))),a=this.getTransition(t,e.layer)||e.layer;return{position:t,layer:a}}invalidateFrameCache(){this.collisionRelevantLayersFrameCache.clear()}isLayerBlockingAt(e,r,t){let a=this.tilemap.getTileAt(r.x,r.y,e);return a?!!(a.getProperty(this.collisionTilePropertyName)||t&&a.getProperty(this.collidesPropNames.get(t)||"")):!1}getCharLayerIndexes(){return this.tilemap.getLayers().map((e,r)=>({layer:e,index:r})).filter(({layer:e})=>e.isCharLayer()).map(({index:e})=>e)}findPrevAndCharLayer(e){let r=this.getCharLayerIndexes(),t=this.tilemap.getLayers(),a=r.findIndex(s=>t[s].getProperty(In)==e);return a==0?{prevIndex:-1,charLayerIndex:r[a]}:{prevIndex:r[a-1],charLayerIndex:r[a]}}getCollisionRelevantLayers(e){if(!e)return this.tilemap.getLayers();let r=this.collisionRelevantLayersFrameCache.get(e);if(r)return r;let{prevIndex:t,charLayerIndex:a}=this.findPrevAndCharLayer(e),s=this.tilemap.getLayers().slice(t+1,a+1);return this.collisionRelevantLayersFrameCache.set(e,s),s}getLowestCharLayer(){for(let e of this.tilemap.getLayers())if(e.isCharLayer())return e.getProperty(In)}getCharLayerNames(){return this.tilemap.getLayers().filter(e=>e.isCharLayer()).map(e=>e.getProperty(In)).filter(Pz)}};function Pz(n){return n!=null}var Sl=(r=>(r.REMOVED="REMOVED",r.ADDED="ADDED",r))(Sl||{});var hP=Ie(Wt(),1),Al=Ie(Cn(),1);var Ud=(t=>(t.WAIT="WAIT",t.SKIP="SKIP",t.STOP="STOP",t))(Ud||{}),Cl=class{constructor(e,r){this.character=e;this.tilemap=r;this.queue=new at;this.finished$=new hP.Subject;this.pathBlockedWaitElapsed=0;this.distanceUtils=Tr.create(e.getNumberOfDirections())}init(){this.character.autoMovementSet().pipe((0,Al.filter)(e=>e!==this),(0,Al.take)(1)).subscribe(()=>{this.queue.size()>0&&this.finishMovementTerminated(),this.finished$.complete()})}update(e){(!this.character.isMoving()||this.character.willCrossTileBorderThisUpdate(e))&&this.queue.size()>0&&this.moveCharOnPath(e)}getInfo(){return{type:"Queue"}}enqueue(e,r={}){let t={pathBlockedStrategy:r.pathBlockedStrategy??"STOP",pathBlockedWaitTimeoutMs:r?.pathBlockedWaitTimeoutMs||-1,ignoreInvalidPositions:r.ignoreInvalidPositions??!1,skipInvalidPositions:r.skipInvalidPositions??!1};for(let a of e){let s={command:a,config:t};if(yt(a)){this.queue.enqueue(s);continue}let f=this.queue.peekEnd()?.command;if(f||(f=this.character.getNextTilePos()),yt(f)){this.queue.enqueue(s);continue}let p=this.distanceUtils.distance(f.position,a.position)===1;(!r.ignoreInvalidPositions||p)&&this.queue.enqueue(s)}}peekAll(){return this.queue.peekAll()}size(){return this.queue.size()}finished(){return this.finished$}clear(){this.queue.clear()}moveCharOnPath(e){let r=this.queue.peek();if(!r)return;let t=r.command,a=r.config;if(yt(t)&&(t=this.tilemap.getTilePosInDirection(this.character.getNextTilePos(),t)),a.skipInvalidPositions){if(t=this.getNextValidPosition(),!t){this.finishInvalidNextPos(t);return}}else if(!this.isNeighborPos(t)){this.finishInvalidNextPos(t);return}if(this.character.isBlockingDirection(Ce(this.character.getNextTilePos().position,t.position))){if(a.pathBlockedStrategy==="STOP")this.finishPathBlocked(t);else if(a.pathBlockedStrategy==="SKIP"){this.queue.dequeue(),this.moveCharOnPath(e);return}else a.pathBlockedStrategy==="WAIT"&&a.pathBlockedWaitTimeoutMs>-1&&(this.pathBlockedWaitElapsed+=e,this.pathBlockedWaitElapsed>=a.pathBlockedWaitTimeoutMs&&this.finishBlockedWaitTimeout(t,a.pathBlockedWaitTimeoutMs));return}this.pathBlockedWaitElapsed=0,this.queue.dequeue(),this.character.move(this.getDir(this.character.getNextTilePos().position,t.position)),this.isLastMovement()&&this.finish("SUCCESS","",t)}getNextValidPosition(){for(;this.queue.size()>0;){let e=this.queue.peek()?.command;if(yt(e)&&(e=this.tilemap.getTilePosInDirection(this.character.getNextTilePos(),e)),e&&this.isNeighborPos(e))return e;this.queue.dequeue()}}isLastMovement(){return this.queue.size()===0}isNeighborPos(e){let r=this.distanceUtils.distance(this.character.getNextTilePos().position,e.position)===1,t=this.tilemap.getTransition(e.position,this.character.getNextTilePos().layer);if(this.character.getNextTilePos().layer!==e.layer)return r&&t===e.layer;let a=t!==void 0&&t!==e.layer;return r&&!a}finishMovementTerminated(){this.finish("MOVEMENT_TERMINATED","New automatic movement has been set to character.")}finishInvalidNextPos(e){e?this.finish("INVALID_NEXT_POS",`Position ${this.posToStr(e)} is not reachable from ${this.posToStr(this.character.getNextTilePos())}.`):this.finish("INVALID_NEXT_POS",`No enqueued position is reachable from ${this.posToStr(this.character.getNextTilePos())}.`)}finishPathBlocked(e){this.finish("PATH_BLOCKED",`Position ${this.posToStr(e)} is blocked.`)}finishBlockedWaitTimeout(e,r){this.finish("PATH_BLOCKED_WAIT_TIMEOUT",`Position ${this.posToStr(e)} is blocked and the wait timeout of ${r} ms has been exceeded.`)}finish(e,r="",t=this.character.getNextTilePos()){this.queue=new at,this.finished$.next({position:t.position,result:e,description:r,layer:t.layer})}getDir(e,r){return this.tilemap.fromMapDirection(Ce(e,r))}posToStr(e){return`(${e.position.x}, ${e.position.y}, ${e.layer})`}};var ko=class{constructor(e=!0){this.isCreatedInternal=!1;e&&console.log(`Using GridEngine v${_l}`)}getCharLayer(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getTilePos().layer}getTransition(e,r){return this.initGuard(),this.gridTilemap?.getTransition(new S(e),r)}setTransition(e,r,t){return this.initGuard(),this.gridTilemap?.setTransition(new S(e),r,t)}create(e,r){this.isCreatedInternal=!0,this.gridCharacters=new Map;let t=this.setConfigDefaults(r);this.config=t,this.movementStopped$=new Sr.Subject,this.movementStarted$=new Sr.Subject,this.directionChanged$=new Sr.Subject,this.positionChangeStarted$=new Sr.Subject,this.positionChangeFinished$=new Sr.Subject,this.queueMovementFinished$=new Sr.Subject,this.charRemoved$=new Sr.Subject,this.charAdded$=new Sr.Subject,this.gridTilemap=new wl(e,this.config.collisionTilePropertyName,this.config.characterCollisionStrategy,this.recordToMap(this.config.collisionGroupRelation),this.config.cacheTileCollisions),this.addCharacters()}recordToMap(e){return e?new Map(Object.entries(e).map(([t,a])=>[t,new Set(a)])):void 0}getPosition(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getTilePos().position}move(e,r){this.moveChar(e,r)}moveRandomly(e,r=0,t=-1){this.initGuard();let a=this.gridCharacters?.get(e);if(!a)throw this.createCharUnknownErr(e);let s=new bl(a,r,t);a.setMovement(s)}getMovement(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);let t=r.getMovement();return t?t.getInfo():{type:"None"}}moveTo(e,r,t){let a=this.assembleMoveToConfig(t);this.initGuard();let s=this.gridCharacters?.get(e);if(!s)throw this.createCharUnknownErr(e);if(!this.gridTilemap)throw this.createUninitializedErr();let c=new xn(s,this.gridTilemap,{position:new S(r),layer:t?.targetLayer||s.getNextTilePos().layer},{distance:0,config:a});return s.setMovement(c),c.init(),c.finishedObs().pipe((0,Ae.map)(f=>({charId:e,position:f.position,result:f.result,description:f.description,layer:f.layer})))}stopMovement(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);r.setMovement(void 0)}setSpeed(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.setSpeed(r)}getSpeed(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getSpeed()}collidesWithTiles(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.collidesWithTiles()}update(e,r){if(this.isCreatedInternal&&this.gridCharacters)for(let[t,a]of this.gridCharacters)a.update(r);this.gridTilemap?.invalidateFrameCache()}addCharacter(e){if(!this.gridTilemap)throw this.createUninitializedErr();if(!this.config)throw this.createUninitializedErr();let r={speed:e.speed||4,tilemap:this.gridTilemap,collidesWithTiles:!0,collisionGroups:["geDefault"],ignoreCollisionGroups:[],charLayer:e.charLayer,facingDirection:e.facingDirection,labels:e.labels,numberOfDirections:e.numberOfDirections??this.config.numberOfDirections,tileWidth:e.tileWidth,tileHeight:e.tileHeight};typeof e.collides=="boolean"?e.collides===!1&&(r.collidesWithTiles=!1,r.collisionGroups=[]):e.collides!==void 0&&(e.collides.collidesWithTiles===!1&&(r.collidesWithTiles=!1),e.collides.collisionGroups&&(r.collisionGroups=e.collides.collisionGroups),e.collides.ignoreCollisionGroups&&(r.ignoreCollisionGroups=e.collides.ignoreCollisionGroups),r.ignoreMissingTiles=e.collides?.ignoreMissingTiles??!1);let t=new nl(e.id,r);e.startPosition&&t.setTilePosition({position:new S(e.startPosition),layer:t.getTilePos().layer}),this.gridCharacters?.set(e.id,t),this.gridTilemap.addCharacter(t);let a=t.getId();t.movementStopped().pipe((0,Ae.takeUntil)(this.charRemoved(a))).subscribe(s=>{this.movementStopped$?.next({charId:a,direction:s})}),t.movementStarted().pipe((0,Ae.takeUntil)(this.charRemoved(a))).subscribe(s=>{this.movementStarted$?.next({charId:a,direction:s})}),t.directionChanged().pipe((0,Ae.takeUntil)(this.charRemoved(a))).subscribe(s=>{this.directionChanged$?.next({charId:a,direction:s})}),t.positionChangeStarted().pipe((0,Ae.takeUntil)(this.charRemoved(a))).subscribe(s=>{this.positionChangeStarted$?.next({charId:a,...s})}),t.positionChangeFinished().pipe((0,Ae.takeUntil)(this.charRemoved(a))).subscribe(s=>{this.positionChangeFinished$?.next({charId:a,...s})}),this.charAdded$?.next(a)}hasCharacter(e){return this.initGuard(),!!this.gridCharacters?.has(e)}removeCharacter(e){if(this.initGuard(),!this.gridCharacters?.get(e))throw this.createCharUnknownErr(e);this.gridTilemap?.removeCharacter(e),this.gridCharacters?.delete(e),this.charRemoved$?.next(e)}removeAllCharacters(){if(this.initGuard(),!!this.gridCharacters)for(let e of this.gridCharacters.keys())this.removeCharacter(e)}getAllCharacters(e){if(this.initGuard(),!this.gridCharacters)return[];let r=[...this.gridCharacters.values()];return(e?cP(r,e):r).map(a=>a.getId())}getLabels(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getLabels()}addLabels(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.addLabels(r)}removeLabels(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.removeLabels(r)}clearLabels(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);r.clearLabels()}follow(e,r,t,a){let s;t===void 0?s={distance:0,closestPointIfBlocked:!1}:typeof t=="number"?(s={distance:t,closestPointIfBlocked:!1},a&&(s.closestPointIfBlocked=!0)):s=t,this.initGuard();let c=this.gridCharacters?.get(e),f=this.gridCharacters?.get(r);if(!c)throw this.createCharUnknownErr(e);if(!f)throw this.createCharUnknownErr(r);if(!this.gridTilemap)throw this.createUninitializedErr();let p=new yl(c,this.gridTilemap,f,{distance:s.distance??0,noPathFoundStrategy:s.closestPointIfBlocked?"CLOSEST_REACHABLE":"STOP",maxPathLength:s.maxPathLength??1/0,shortestPathAlgorithm:s.algorithm??"BIDIRECTIONAL_SEARCH",ignoreLayers:!!s.ignoreLayers,facingDirection:s.facingDirection??"none",considerCosts:s.considerCosts??!1,isPositionAllowedFn:s.isPositionAllowedFn??(()=>!0),ignoredChars:s.ignoredChars??[]});c.setMovement(p),p.init()}isMoving(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.isMoving()}getFacingDirection(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getFacingDirection()}getFacingPosition(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);let t=r.getFacingPosition();return{x:t.x,y:t.y}}turnTowards(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.turnTowards(r)}getCharactersAt(e,r){if(this.initGuard(),!this.gridTilemap)return[];let t=this.gridTilemap.getCharactersAt(new S(e),r);return Array.from(t).map(a=>a.getId())}setPosition(e,r,t){this.initGuard();let a=this.gridCharacters?.get(e);if(!a)throw this.createCharUnknownErr(e);t||a.setTilePosition({position:new S(r),layer:a.getTilePos().layer}),a.setTilePosition({position:new S(r),layer:t})}isBlocked(e,r,t=["geDefault"]){this.initGuard();let a=new S(e);return!!(this.gridTilemap?.hasBlockingTile(a,r)||this.gridTilemap?.hasBlockingChar(a,r,t))}isTileBlocked(e,r){return this.initGuard(),!!this.gridTilemap?.hasBlockingTile(new S(e),r)}getCollisionGroups(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getCollisionGroups()||[]}setCollisionGroups(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.setCollisionGroups(r)}getIgnoreCollisionGroups(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getIgnoreCollisionGroups()||[]}setIgnoreCollisionGroups(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.setIgnoreCollisionGroups(r)}getTilePosInDirection(e,r,t){if(!this.gridTilemap)throw this.createUninitializedErr();let a=this.gridTilemap.getTilePosInDirection({position:new S(e),layer:r},t);return{position:a.position.toPosition(),charLayer:a.layer}}findShortestPath(e,r,t={}){if(!this.gridTilemap)throw this.createUninitializedErr();let a=t.shortestPathAlgorithm||"BFS";t.considerCosts&&a!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${a}'. It can only be used with A* algorithm.`);let s=t.pathWidth!==void 0&&t.pathWidth!==1,c=t.pathHeight!==void 0&&t.pathHeight!==1;(s||c)&&a==="JPS"&&console.warn("GridEngine: Pathfinding options 'pathWidth' and 'pathHeight' > 1 cannot be used with algorithm 'JPS'.");let p=new Fn(this.gridTilemap).findShortestPath(G.toInternal(e),G.toInternal(r),{...t,shortestPathAlgorithm:a});return{path:p.path.map(G.fromInternal),closestToTarget:p.closestToTarget?G.fromInternal(p.closestToTarget):void 0,reachedMaxPathLength:!1,steps:p.steps}}steppedOn(e,r,t){return this.positionChangeFinished().pipe((0,Ae.filter)(a=>e.includes(a.charId)&&r.some(s=>s.x===a.enterTile.x&&s.y===a.enterTile.y)&&(t===void 0||t.includes(a.enterLayer))))}characterShifted(){if(!this.charAdded$||!this.charRemoved$)throw this.createUninitializedErr();return this.charAdded$.pipe((0,Ae.map)(e=>({charId:e,action:"ADDED"})),(0,Ae.mergeWith)(this.charRemoved$.pipe((0,Ae.map)(e=>({charId:e,action:"REMOVED"})))))}movementStarted(){if(!this.movementStarted$)throw this.createUninitializedErr();return this.movementStarted$}movementStopped(){if(!this.movementStopped$)throw this.createUninitializedErr();return this.movementStopped$}directionChanged(){if(!this.directionChanged$)throw this.createUninitializedErr();return this.directionChanged$}positionChangeStarted(){if(!this.positionChangeStarted$)throw this.createUninitializedErr();return this.positionChangeStarted$}positionChangeFinished(){if(!this.positionChangeFinished$)throw this.createUninitializedErr();return this.positionChangeFinished$}getMovementProgress(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getMovementProgress()}rebuildTileCollisionCache(e,r,t,a){this.gridTilemap?.rebuildTileCollisionCache(new Ht(e,r,t,a))}addQueueMovements(e,r,t){this.initGuard();let a=this.gridCharacters?.get(e);if(!a)throw this.createCharUnknownErr(e);if(!this.gridTilemap)throw this.createUninitializedErr();let s;a?.getMovement()?.getInfo().type==="Queue"?s=a.getMovement():(s=new Cl(a,this.gridTilemap),a.setMovement(s),s.init(),s.finished().pipe((0,Ae.takeUntil)((0,Sr.merge)(this.charRemoved(e),a.autoMovementSet()))).subscribe(c=>{this.queueMovementFinished$?.next({charId:e,...c})})),s.enqueue(r.map(c=>yt(c)?c:{position:new S(c.position),layer:c.charLayer}),t)}queueMovementFinished(){if(!this.queueMovementFinished$)throw this.createUninitializedErr();return this.queueMovementFinished$}getEnqueuedMovements(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getMovement()?.getInfo().type==="Queue"?r.getMovement().peekAll().map(a=>({command:yt(a.command)?a.command:G.fromInternal(a.command),config:a.config})):[]}clearEnqueuedMovements(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);r.getMovement()?.getInfo().type==="Queue"&&r.getMovement().clear()}getTileCost(e,r,t){return this.initGuard(),this.gridTilemap?.getTileCosts({position:new S(e),layer:r},t)??1}getState(){let e=[];if(this.gridCharacters)for(let[r,t]of this.gridCharacters.entries())e.push({id:r,position:G.fromInternal(t.getTilePos()),facingDirection:t.getFacingDirection(),speed:t.getSpeed(),labels:t.getLabels(),movementProgress:t.getMovementProgress(),collisionConfig:{collisionGroups:t.getCollisionGroups(),ignoreCollisionGroups:t.getIgnoreCollisionGroups(),collidesWithTiles:t.collidesWithTiles(),ignoreMissingTiles:t.getIgnoreMissingTiles()}});return{characters:e}}setState(e){if(this.gridCharacters)for(let r of e.characters){let t=this.gridCharacters.get(r.id);if(t){let a=t.getTilePos();G.equal(a,G.toInternal(r.position))||t.setTilePosition(G.toInternal(r.position)),t.setSpeed(r.speed),t.turnTowards(r.facingDirection),r.collisionConfig.collisionGroups&&t.setCollisionGroups(r.collisionConfig.collisionGroups),r.collisionConfig.collidesWithTiles!==void 0&&t.setCollidesWithTiles(r.collisionConfig.collidesWithTiles),r.collisionConfig.ignoreMissingTiles!==void 0&&t.setIgnoreMissingTiles(r.collisionConfig.ignoreMissingTiles),t.setMovementProgress(r.movementProgress),t.clearLabels(),t.addLabels(r.labels)}}}revertCurrentMovement(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);r.revertCurrentMovement()}isCurrentMovementReverted(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.isCurrentMovementReverted()}charRemoved(e){if(!this.charRemoved$)throw this.createUninitializedErr();return this.charRemoved$?.pipe((0,Ae.take)(1),(0,Ae.filter)(r=>r==e))}initGuard(){if(!this.isCreatedInternal)throw this.createUninitializedErr()}createUninitializedErr(){throw new Error("GridEngine not initialized. You need to call create() first.")}addCharacters(){this.config?.characters.forEach(e=>this.addCharacter(e))}moveChar(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);if(t.getNumberOfDirections()===4){if(!this.gridTilemap?.isIsometric()&&ii(r)){console.warn(`GridEngine: Character '${e}' can't be moved '${r}' in 4 direction mode.`);return}else if(this.gridTilemap?.isIsometric()&&!ii(r)){console.warn(`GridEngine: Character '${e}' can't be moved '${r}' in 4 direction isometric mode.`);return}}t.move(r)}createCharUnknownErr(e){return new Error(`Character unknown: ${e}`)}assembleMoveToConfig(e={}){let r={...e,noPathFoundStrategy:"STOP",pathBlockedStrategy:"WAIT"};return e?.noPathFoundStrategy&&(Object.values(yi).includes(e.noPathFoundStrategy)?r.noPathFoundStrategy=e.noPathFoundStrategy:console.warn(`GridEngine: Unknown NoPathFoundStrategy '${e.noPathFoundStrategy}'. Falling back to 'STOP'`)),e?.pathBlockedStrategy&&(Object.values(An).includes(e.pathBlockedStrategy)?r.pathBlockedStrategy=e.pathBlockedStrategy:console.warn(`GridEngine: Unknown PathBlockedStrategy '${e.pathBlockedStrategy}'. Falling back to 'WAIT'`)),r}setConfigDefaults(e){return{collisionTilePropertyName:"ge_collide",numberOfDirections:4,characterCollisionStrategy:"BLOCK_TWO_TILES",cacheTileCollisions:!1,...e}}};var Ll=class extends Mn{constructor(r,t={}){super(r,t);this.jumpCache=new Ml}findShortestPathImpl(r,t){return this.jumpCache=new Ml,super.findShortestPathImpl(r,t)}getNeighborsInternal(r,t,a){if(!t||r.layer!==t.layer)return this.getNeighbors(r,a).map(f=>({p:f,dist:1}));let s=this.prune(t,r).map(f=>{let p=this.getTransition(f.position,r.layer);return{position:f.position,layer:p||r.layer}}),c=[];for(let f of s){let p=this.jump(r,f,a,1,Ce(r.position,f.position));p&&(p.dist=this.distance(r.position,p.p.position),c.push(p))}return c}getForced(r,t){let a=[],{topLeft:s,downLeft:c,top:f,bottom:p,topRight:m,downRight:O}=this.normalizedPositions(r,t),A=Ce(r.position,t.position);return ii(A)?(this.blockOrTrans(r,s)&&(this.addIfNotBlocked(a,t,f),this.addIfNotBlocked(a,t,m),this.blockOrTrans(c,s)&&this.addIfNotBlocked(a,t,s)),this.blockOrTrans(r,c)&&(this.addIfNotBlocked(a,t,p),this.addIfNotBlocked(a,t,O),this.blockOrTrans(s,c)&&this.addIfNotBlocked(a,t,c)),this.blockOrTrans(s,f)&&this.addIfNotBlocked(a,t,f),this.blockOrTrans(c,p)&&this.addIfNotBlocked(a,t,p),this.blockOrTrans(s,m)&&this.addIfNotBlocked(a,t,m),this.blockOrTrans(c,O)&&this.addIfNotBlocked(a,t,O)):((this.blockOrTrans(r,f)||this.blockOrTrans(f,m))&&this.addIfNotBlocked(a,t,m),(this.blockOrTrans(r,p)||this.blockOrTrans(p,O))&&this.addIfNotBlocked(a,t,O),this.blockOrTrans(r,s)&&this.blockOrTrans(r,f)&&(this.addIfNotBlocked(a,t,f),this.addIfNotBlocked(a,t,s)),this.blockOrTrans(r,c)&&this.blockOrTrans(r,p)&&(this.addIfNotBlocked(a,t,p),this.addIfNotBlocked(a,t,c)),this.blockOrTrans(s,f)&&this.blockOrTrans(r,f)&&this.addIfNotBlocked(a,t,f),this.blockOrTrans(c,p)&&this.blockOrTrans(r,p)&&this.addIfNotBlocked(a,t,p)),a}hasForced(r,t){let{topLeft:a,downLeft:s,top:c,bottom:f,topRight:p,downRight:m}=this.normalizedPositions(r,t),O=Ce(r.position,t.position);if(ii(O)){if(this.blockOrTrans(r,a)&&(!this.blockOrTrans(t,c)||!this.blockOrTrans(t,p)||this.blockOrTrans(s,a)&&!this.blockOrTrans(t,a))||this.blockOrTrans(r,s)&&(!this.blockOrTrans(t,f)||!this.blockOrTrans(t,m)||this.blockOrTrans(a,s)&&!this.blockOrTrans(t,s))||this.blockOrTrans(a,c)&&!this.blockOrTrans(t,c)||this.blockOrTrans(s,f)&&!this.blockOrTrans(t,f)||this.blockOrTrans(a,p)&&!this.blockOrTrans(t,p)||this.blockOrTrans(s,m)&&!this.blockOrTrans(t,m))return!0}else if((this.blockOrTrans(r,c)||this.blockOrTrans(c,p))&&!this.blockOrTrans(t,p)||(this.blockOrTrans(r,f)||this.blockOrTrans(f,m))&&!this.blockOrTrans(t,m)||this.blockOrTrans(r,a)&&this.blockOrTrans(r,c)&&(!this.blockOrTrans(t,c)||!this.blockOrTrans(t,a))||this.blockOrTrans(r,s)&&this.blockOrTrans(r,f)&&(!this.blockOrTrans(t,f)||!this.blockOrTrans(t,s))||this.blockOrTrans(a,c)&&this.blockOrTrans(r,c)&&!this.blockOrTrans(t,c)||this.blockOrTrans(s,f)&&this.blockOrTrans(r,f)&&!this.blockOrTrans(t,f))return!0;return!1}prune(r,t){let{top:a,right:s,topRight:c,downRight:f,bottom:p}=this.normalizedPositions(r,t),m=this.getForced(r,t),O=Ce(r.position,t.position);return ii(O)?[a,s,c,f,p,...m]:[s,...m]}jump(r,t,a,s,c){let f=this.jumpCache.get(r,t);if(f!==null)return f;if(this.isBlocking(r,t)&&!(G.equal(t,a)&&this.options.ignoreBlockedTarget)){this.jumpCache.set(r,t,void 0);return}if(G.equal(t,a))return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0};if(s>=this.maxJumpSize)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0};if(this.getTransition(t.position,r.layer)!==void 0)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0};if(this.hasForced(r,t))return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0};if(this.updateClosestToTarget(t,a),c==="up-left"){if(this.jump(t,this.getTilePosInDir(t,"up"),a,s+1,"up")!==void 0)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0};if(this.jump(t,this.getTilePosInDir(t,"left"),a,s+1,"left")!==void 0)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0}}else if(c==="down-left"){if(this.jump(t,this.getTilePosInDir(t,"down"),a,s+1,"down")!==void 0)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0};if(this.jump(t,this.getTilePosInDir(t,"left"),a,s+1,"left")!==void 0)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0}}else if(c==="up-right"){if(this.jump(t,this.getTilePosInDir(t,"up"),a,s+1,"up")!==void 0)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0};if(this.jump(t,this.getTilePosInDir(t,"right"),a,s+1,"right")!==void 0)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0}}else if(c==="down-right"){if(this.jump(t,this.getTilePosInDir(t,"down"),a,s+1,"down")!==void 0)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0};if(this.jump(t,this.getTilePosInDir(t,"right"),a,s+1,"right")!==void 0)return this.jumpCache.set(r,t,{p:t,dist:0}),{p:t,dist:0}}let p=this.jump(t,this.getTilePosInDir(t,c),a,s+1,c);return this.jumpCache.set(r,t,p),p}normalizedPositions(r,t){return r.position.x<t.position.x&&r.position.y===t.position.y?{topLeft:{position:new S(t.position.x-1,t.position.y-1),layer:t.layer},downLeft:{position:new S(t.position.x-1,t.position.y+1),layer:t.layer},top:{position:new S(t.position.x,t.position.y-1),layer:t.layer},bottom:{position:new S(t.position.x,t.position.y+1),layer:t.layer},right:{position:new S(t.position.x+1,t.position.y),layer:t.layer},topRight:{position:new S(t.position.x+1,t.position.y-1),layer:t.layer},downRight:{position:new S(t.position.x+1,t.position.y+1),layer:t.layer}}:r.position.x>t.position.x&&r.position.y===t.position.y?{topLeft:{position:new S(t.position.x+1,t.position.y+1),layer:t.layer},downLeft:{position:new S(t.position.x+1,t.position.y-1),layer:t.layer},top:{position:new S(t.position.x,t.position.y+1),layer:t.layer},bottom:{position:new S(t.position.x,t.position.y-1),layer:t.layer},right:{position:new S(t.position.x-1,t.position.y),layer:t.layer},topRight:{position:new S(t.position.x-1,t.position.y+1),layer:t.layer},downRight:{position:new S(t.position.x-1,t.position.y-1),layer:t.layer}}:r.position.y<t.position.y&&r.position.x===t.position.x?{topLeft:{position:new S(t.position.x+1,t.position.y-1),layer:t.layer},downLeft:{position:new S(t.position.x-1,t.position.y-1),layer:t.layer},top:{position:new S(t.position.x+1,t.position.y),layer:t.layer},bottom:{position:new S(t.position.x-1,t.position.y),layer:t.layer},right:{position:new S(t.position.x,t.position.y+1),layer:t.layer},topRight:{position:new S(t.position.x+1,t.position.y+1),layer:t.layer},downRight:{position:new S(t.position.x-1,t.position.y+1),layer:t.layer}}:r.position.y>t.position.y&&r.position.x===t.position.x?{topLeft:{position:new S(t.position.x-1,t.position.y+1),layer:t.layer},downLeft:{position:new S(t.position.x+1,t.position.y+1),layer:t.layer},top:{position:new S(t.position.x-1,t.position.y),layer:t.layer},bottom:{position:new S(t.position.x+1,t.position.y),layer:t.layer},right:{position:new S(t.position.x,t.position.y-1),layer:t.layer},topRight:{position:new S(t.position.x-1,t.position.y-1),layer:t.layer},downRight:{position:new S(t.position.x+1,t.position.y-1),layer:t.layer}}:r.position.y<t.position.y&&r.position.x<t.position.x?{topLeft:{position:new S(t.position.x,t.position.y-1),layer:t.layer},downLeft:{position:new S(t.position.x-1,t.position.y),layer:t.layer},top:{position:new S(t.position.x+1,t.position.y-1),layer:t.layer},bottom:{position:new S(t.position.x-1,t.position.y+1),layer:t.layer},right:{position:new S(t.position.x+1,t.position.y+1),layer:t.layer},topRight:{position:new S(t.position.x+1,t.position.y),layer:t.layer},downRight:{position:new S(t.position.x,t.position.y+1),layer:t.layer}}:r.position.y<t.position.y&&r.position.x>t.position.x?{topLeft:{position:new S(t.position.x+1,t.position.y),layer:t.layer},downLeft:{position:new S(t.position.x,t.position.y-1),layer:t.layer},top:{position:new S(t.position.x+1,t.position.y+1),layer:t.layer},bottom:{position:new S(t.position.x-1,t.position.y-1),layer:t.layer},right:{position:new S(t.position.x-1,t.position.y+1),layer:t.layer},topRight:{position:new S(t.position.x,t.position.y+1),layer:t.layer},downRight:{position:new S(t.position.x-1,t.position.y),layer:t.layer}}:r.position.y>t.position.y&&r.position.x<t.position.x?{topLeft:{position:new S(t.position.x-1,t.position.y),layer:t.layer},downLeft:{position:new S(t.position.x,t.position.y+1),layer:t.layer},top:{position:new S(t.position.x-1,t.position.y-1),layer:t.layer},bottom:{position:new S(t.position.x+1,t.position.y+1),layer:t.layer},right:{position:new S(t.position.x+1,t.position.y-1),layer:t.layer},topRight:{position:new S(t.position.x,t.position.y-1),layer:t.layer},downRight:{position:new S(t.position.x+1,t.position.y),layer:t.layer}}:{topLeft:{position:new S(t.position.x,t.position.y+1),layer:t.layer},downLeft:{position:new S(t.position.x+1,t.position.y),layer:t.layer},top:{position:new S(t.position.x-1,t.position.y+1),layer:t.layer},bottom:{position:new S(t.position.x+1,t.position.y-1),layer:t.layer},right:{position:new S(t.position.x-1,t.position.y-1),layer:t.layer},topRight:{position:new S(t.position.x-1,t.position.y),layer:t.layer},downRight:{position:new S(t.position.x,t.position.y-1),layer:t.layer}}}},Ml=class{constructor(){this.memo=new Map}set(e,r,t){let a=this.memo.get(e.position.x);a||(a=new Map,this.memo.set(e.position.x,a));let s=a.get(e.position.y);s||(s=new Map,a.set(e.position.y,s));let c=s.get(e.layer);c||(c=new Map,s.set(e.layer,c));let f=c.get(r.position.x);f||(f=new Map,c.set(r.position.x,f));let p=f.get(r.position.y);p||(p=new Map,f.set(r.position.y,p)),p.get(r.layer)||(t===void 0?p.set(r.layer,null):p.set(r.layer,t))}get(e,r){let t=this.memo.get(e.position.x);if(!t)return null;let a=t.get(e.position.y);if(!a)return null;let s=a.get(e.layer);if(!s)return null;let c=s.get(r.position.x);if(!c)return null;let f=c.get(r.position.y);if(!f)return null;let p=f.get(r.layer);return p===void 0?null:p===null?void 0:p}};var Fn=class{constructor(e){this.gridTilemap=e}findShortestPath(e,r,t={}){return Oz(t.shortestPathAlgorithm||"BIDIRECTIONAL_SEARCH",this.gridTilemap,t).findShortestPath(e,r)}};function Oz(n,e,r){switch(n){case"BIDIRECTIONAL_SEARCH":return new gl(e,r);case"A_STAR":return new dl(e,r);case"JPS":return r.numberOfDirections===8?new Ll(e,r):new Mn(e,r)}return new Ln(e,r)}var El=(p=>(p.SUCCESS="SUCCESS",p.NO_PATH_FOUND_MAX_RETRIES_EXCEEDED="NO_PATH_FOUND_MAX_RETRIES_EXCEEDED",p.PATH_BLOCKED_MAX_RETRIES_EXCEEDED="PATH_BLOCKED_MAX_RETRIES_EXCEEDED",p.PATH_BLOCKED="PATH_BLOCKED",p.NO_PATH_FOUND="NO_PATH_FOUND",p.PATH_BLOCKED_WAIT_TIMEOUT="PATH_BLOCKED_WAIT_TIMEOUT",p.MOVEMENT_TERMINATED="MOVEMENT_TERMINATED",p.MAX_PATH_LENGTH_REACHED="MAX_PATH_LENGTH_REACHED",p))(El||{}),xn=class{constructor(e,r,t,{config:a,ignoreBlockedTarget:s=!1,distance:c=0}={}){this.character=e;this.tilemap=r;this.targetPos=t;this.shortestPath=[];this.distOffset=0;this.posOnPath=0;this.stopped=!1;this.pathBlockedWaitElapsed=0;this.isPositionAllowed=()=>!0;this.shortestPathAlgorithm="BIDIRECTIONAL_SEARCH";this.maxPathLength=1/0;this.considerCosts=!1;this.ignoredChars=[];this.isBlocking=(e,r)=>e?new Ln(this.tilemap,this.getPathfindingOptions()).isBlocking(this.character.getTilePos(),{position:e,layer:r}):!0;this.shortestPathAlgorithm=a?.algorithm??this.shortestPathAlgorithm,this.ignoreBlockedTarget=s,this.distance=c,this.noPathFoundStrategy=a?.noPathFoundStrategy||"STOP",this.pathBlockedStrategy=a?.pathBlockedStrategy||"WAIT",this.noPathFoundRetryable=new Eo(a?.noPathFoundRetryBackoffMs||200,a?.noPathFoundMaxRetries||-1,()=>{this.stop("NO_PATH_FOUND_MAX_RETRIES_EXCEEDED")}),this.pathBlockedRetryable=new Eo(a?.pathBlockedRetryBackoffMs||200,a?.pathBlockedMaxRetries||-1,()=>{this.stop("PATH_BLOCKED_MAX_RETRIES_EXCEEDED")}),a?.isPositionAllowedFn&&(this.isPositionAllowed=a.isPositionAllowedFn),a?.maxPathLength&&(this.maxPathLength=a.maxPathLength),this.alternativeTargets=a?.alternativeTargets,this.noPathFoundAlternativeTargetsFallbackStrategy=a?.noPathFoundAlternativeTargetsFallbackStrategy,a?.considerCosts&&this.shortestPathAlgorithm!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${this.shortestPathAlgorithm}'. It can only be used with A* algorithm.`),this.shortestPathAlgorithm==="JPS"&&(this.character.getTileWidth()>1||this.character.getTileHeight()>1)&&console.warn("GridEngine: Pathfinding algorithm 'JPS' can only be used for characters with 'tileWidth' and 'tileHeight' of 1"),this.considerCosts=a?.considerCosts||!1,this.ignoreLayers=!!a?.ignoreLayers,this.distanceUtils=Tr.create(e.getNumberOfDirections()),this.pathBlockedWaitTimeoutMs=a?.pathBlockedWaitTimeoutMs||-1,this.ignoredChars=a?.ignoredChars??[],this.finished$=new Dn.Subject}init(){this.noPathFoundRetryable.reset(),this.pathBlockedRetryable.reset(),this.pathBlockedWaitElapsed=0,this.calcShortestPath(),this.character.autoMovementSet().pipe((0,Dn.filter)(e=>e!==this),(0,Dn.take)(1)).subscribe(()=>{this.stop("MOVEMENT_TERMINATED")})}setPathBlockedStrategy(e){this.pathBlockedStrategy=e}getPathBlockedStrategy(){return this.pathBlockedStrategy}getPathfindingOptions(){return{shortestPathAlgorithm:this.shortestPathAlgorithm,pathWidth:this.character.getTileWidth(),pathHeight:this.character.getTileHeight(),numberOfDirections:this.character.getNumberOfDirections(),isPositionAllowed:this.isPositionAllowed,collisionGroups:this.character.getCollisionGroups(),ignoredChars:[this.character.getId(),...this.ignoredChars],ignoreTiles:!this.character.collidesWithTiles(),ignoreMapBounds:this.character.getIgnoreMissingTiles(),ignoreBlockedTarget:this.ignoreBlockedTarget,maxPathLength:this.maxPathLength,ignoreLayers:this.ignoreLayers,considerCosts:this.considerCosts,calculateClosestToTarget:!0}}update(e){this.stopped||(this.noPathFound()&&(this.noPathFoundStrategy==="RETRY"?this.noPathFoundRetryable.retry(e,()=>this.calcShortestPath()):this.noPathFoundStrategy==="STOP"&&this.stop("NO_PATH_FOUND")),this.updatePosOnPath(),this.isBlocking(this.nextTileOnPath()?.position,this.character?.getNextTilePos().layer)?this.applyPathBlockedStrategy(e):this.pathBlockedWaitElapsed=0,this.updatePosOnPath(),this.hasArrived()?(this.stop("SUCCESS"),this.existsDistToTarget()&&this.turnTowardsTarget()):this.isBlocking(this.nextTileOnPath()?.position,this.character?.getNextTilePos().layer)||this.moveCharOnPath())}finishedObs(){return this.finished$}getInfo(){return{type:"Target",state:{pathAhead:this.shortestPath.slice(this.posOnPath).map(e=>G.fromInternal(e))},config:{algorithm:this.shortestPathAlgorithm,ignoreBlockedTarget:this.ignoreBlockedTarget,distance:this.distance,targetPos:G.fromInternal(this.targetPos),noPathFoundStrategy:this.noPathFoundStrategy,pathBlockedStrategy:this.pathBlockedStrategy,noPathFoundRetryBackoffMs:this.noPathFoundRetryable.getBackoffMs(),noPathFoundMaxRetries:this.noPathFoundRetryable.getMaxRetries()}}}resultToReason(e){switch(e){case"SUCCESS":return"Successfully arrived.";case"MOVEMENT_TERMINATED":return"Movement of character has been replaced before destination was reached.";case"PATH_BLOCKED":return"PathBlockedStrategy STOP: Path blocked.";case"NO_PATH_FOUND_MAX_RETRIES_EXCEEDED":return`NoPathFoundStrategy RETRY: Maximum retries of ${this.noPathFoundRetryable.getMaxRetries()} exceeded.`;case"NO_PATH_FOUND":return"NoPathFoundStrategy STOP: No path found.";case"PATH_BLOCKED_MAX_RETRIES_EXCEEDED":return`PathBlockedStrategy RETRY: Maximum retries of ${this.pathBlockedRetryable.getMaxRetries()} exceeded.`;case"PATH_BLOCKED_WAIT_TIMEOUT":return`PathBlockedStrategy WAIT: Wait timeout of ${this.pathBlockedWaitTimeoutMs}ms exceeded.`}}applyPathBlockedStrategy(e){this.pathBlockedStrategy==="RETRY"?this.pathBlockedRetryable.retry(e,()=>{let r=this.getShortestPath();r.path.length>0&&this.calcShortestPath(r)}):this.pathBlockedStrategy==="STOP"?this.stop("PATH_BLOCKED"):this.pathBlockedStrategy==="WAIT"&&this.pathBlockedWaitTimeoutMs>-1&&(this.pathBlockedWaitElapsed+=e,this.pathBlockedWaitElapsed>=this.pathBlockedWaitTimeoutMs&&this.stop("PATH_BLOCKED_WAIT_TIMEOUT"))}moveCharOnPath(){let e=this.nextTileOnPath();if(!e)return;let r=this.getDir(this.character.getNextTilePos().position,e.position);this.character.move(r)}nextTileOnPath(){return this.shortestPath[this.posOnPath+1]}stop(e){this.finished$.next({position:this.character.getNextTilePos().position,result:e,description:this.resultToReason(e),layer:this.character.getNextTilePos().layer}),this.finished$.complete(),this.stopped=!0}turnTowardsTarget(){let e=this.shortestPath[this.posOnPath+1],r=this.getDir(this.character.getNextTilePos().position,e.position);this.character.turnTowards(r)}existsDistToTarget(){return this.posOnPath<this.shortestPath.length-1}hasArrived(){return!this.noPathFound()&&this.posOnPath+Math.max(0,this.distance-this.distOffset)>=this.shortestPath.length-1}updatePosOnPath(){let e=this.shortestPath[this.posOnPath];for(;this.posOnPath<this.shortestPath.length-1&&(this.character.getNextTilePos().position.x!=e.position.x||this.character.getNextTilePos().position.y!=e.position.y);)this.posOnPath++,e=this.shortestPath[this.posOnPath]}noPathFound(){return this.shortestPath.length===0}calcShortestPath(e){e=e??this.getShortestPath(),this.posOnPath=0,this.shortestPath=e.path,this.distOffset=e.distOffset}getShortestPath(){let e=new Fn(this.tilemap),{path:r,closestToTarget:t}=e.findShortestPath(this.character.getNextTilePos(),this.targetPos,this.getPathfindingOptions());if(r.length==0){if(this.noPathFoundStrategy==="CLOSEST_REACHABLE"){if(!t)throw Error("ClosestToTarget should never be undefined in TargetMovement.");return this.pathToAlternativeTarget(t,e)}else if(this.noPathFoundStrategy==="ALTERNATIVE_TARGETS"){for(let s of this.alternativeTargets??[]){let{path:c,distOffset:f}=this.pathToAlternativeTarget(G.toInternal(s),e);if(c.length>0)return{path:c,distOffset:f}}return this.noPathFoundStrategy=this.noPathFoundAlternativeTargetsFallbackStrategy||"STOP",this.getShortestPath()}}return{path:r,distOffset:0}}pathToAlternativeTarget(e,r){let t=r.findShortestPath(this.character.getNextTilePos(),e,this.getPathfindingOptions()).path,a=this.distanceUtils.distance(e.position,this.targetPos.position);return{path:t,distOffset:a}}getDir(e,r){return this.tilemap.fromMapDirection(this.distanceUtils.direction(e,r))}};var Tz=Object.create,dP=Object.defineProperty,wz=Object.getOwnPropertyDescriptor,Sz=Object.getOwnPropertyNames,Cz=Object.getPrototypeOf,Az=Object.prototype.hasOwnProperty,Ez=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Lz=(n,e,r,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Sz(e))!Az.call(n,a)&&a!==r&&dP(n,a,{get:()=>e[a],enumerable:!(t=wz(e,a))||t.enumerable});return n},Bd=(n,e,r)=>(r=n!=null?Tz(Cz(n)):{},Lz(e||!n||!n.__esModule?dP(r,"default",{value:n,enumerable:!0}):r,n)),Hd=Ez((n,e)=>{(function(){var r,t="4.17.21",a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",f="Invalid `variable` option passed into `_.template`",p="__lodash_hash_undefined__",m=500,O="__lodash_placeholder__",A=1,q=2,j=4,I=1,F=2,D=1,U=2,oe=4,he=8,Fe=16,Te=32,We=64,pr=128,Nn=256,jl=512,yP=30,bP="...",_P=800,PP=16,Yd=1,OP=2,TP=3,$t=1/0,st=9007199254740991,wP=17976931348623157e292,Wo=NaN,Cr=4294967295,SP=Cr-1,CP=Cr>>>1,AP=[["ary",pr],["bind",D],["bindKey",U],["curry",he],["curryRight",Fe],["flip",jl],["partial",Te],["partialRight",We],["rearg",Nn]],Pi="[object Arguments]",Uo="[object Array]",EP="[object AsyncFunction]",Wn="[object Boolean]",Un="[object Date]",LP="[object DOMException]",Go="[object Error]",Bo="[object Function]",Qd="[object GeneratorFunction]",dr="[object Map]",Gn="[object Number]",MP="[object Null]",Ur="[object Object]",Xd="[object Promise]",qP="[object Proxy]",Bn="[object RegExp]",vr="[object Set]",Hn="[object String]",Ho="[object Symbol]",xP="[object Undefined]",zn="[object WeakMap]",jP="[object WeakSet]",$n="[object ArrayBuffer]",Oi="[object DataView]",Il="[object Float32Array]",Fl="[object Float64Array]",Dl="[object Int8Array]",kl="[object Int16Array]",Rl="[object Int32Array]",Vl="[object Uint8Array]",Nl="[object Uint8ClampedArray]",Wl="[object Uint16Array]",Ul="[object Uint32Array]",IP=/\b__p \+= '';/g,FP=/\b(__p \+=) '' \+/g,DP=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Kd=/&(?:amp|lt|gt|quot|#39);/g,Jd=/[&<>"']/g,kP=RegExp(Kd.source),RP=RegExp(Jd.source),VP=/<%-([\s\S]+?)%>/g,NP=/<%([\s\S]+?)%>/g,Zd=/<%=([\s\S]+?)%>/g,WP=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,UP=/^\w*$/,GP=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gl=/[\\^$.*+?()[\]{}|]/g,BP=RegExp(Gl.source),Bl=/^\s+/,HP=/\s/,zP=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$P=/\{\n\/\* \[wrapped with (.+)\] \*/,YP=/,? & /,QP=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,XP=/[()=,{}\[\]\/\s]/,KP=/\\(\\)?/g,JP=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ev=/\w*$/,ZP=/^[-+]0x[0-9a-f]+$/i,e0=/^0b[01]+$/i,r0=/^\[object .+?Constructor\]$/,t0=/^0o[0-7]+$/i,i0=/^(?:0|[1-9]\d*)$/,n0=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zo=/($^)/,o0=/['\n\r\u2028\u2029\\]/g,$o="\\ud800-\\udfff",a0="\\u0300-\\u036f",s0="\\ufe20-\\ufe2f",u0="\\u20d0-\\u20ff",rv=a0+s0+u0,tv="\\u2700-\\u27bf",iv="a-z\\xdf-\\xf6\\xf8-\\xff",c0="\\xac\\xb1\\xd7\\xf7",l0="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f0="\\u2000-\\u206f",h0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nv="A-Z\\xc0-\\xd6\\xd8-\\xde",ov="\\ufe0e\\ufe0f",av=c0+l0+f0+h0,Hl="['\u2019]",p0="["+$o+"]",sv="["+av+"]",Yo="["+rv+"]",uv="\\d+",d0="["+tv+"]",cv="["+iv+"]",lv="[^"+$o+av+uv+tv+iv+nv+"]",zl="\\ud83c[\\udffb-\\udfff]",v0="(?:"+Yo+"|"+zl+")",fv="[^"+$o+"]",$l="(?:\\ud83c[\\udde6-\\uddff]){2}",Yl="[\\ud800-\\udbff][\\udc00-\\udfff]",Ti="["+nv+"]",hv="\\u200d",pv="(?:"+cv+"|"+lv+")",m0="(?:"+Ti+"|"+lv+")",dv="(?:"+Hl+"(?:d|ll|m|re|s|t|ve))?",vv="(?:"+Hl+"(?:D|LL|M|RE|S|T|VE))?",mv=v0+"?",gv="["+ov+"]?",g0="(?:"+hv+"(?:"+[fv,$l,Yl].join("|")+")"+gv+mv+")*",y0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",b0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yv=gv+mv+g0,_0="(?:"+[d0,$l,Yl].join("|")+")"+yv,P0="(?:"+[fv+Yo+"?",Yo,$l,Yl,p0].join("|")+")",O0=RegExp(Hl,"g"),T0=RegExp(Yo,"g"),Ql=RegExp(zl+"(?="+zl+")|"+P0+yv,"g"),w0=RegExp([Ti+"?"+cv+"+"+dv+"(?="+[sv,Ti,"$"].join("|")+")",m0+"+"+vv+"(?="+[sv,Ti+pv,"$"].join("|")+")",Ti+"?"+pv+"+"+dv,Ti+"+"+vv,b0,y0,uv,_0].join("|"),"g"),S0=RegExp("["+hv+$o+rv+ov+"]"),C0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,A0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],E0=-1,pe={};pe[Il]=pe[Fl]=pe[Dl]=pe[kl]=pe[Rl]=pe[Vl]=pe[Nl]=pe[Wl]=pe[Ul]=!0,pe[Pi]=pe[Uo]=pe[$n]=pe[Wn]=pe[Oi]=pe[Un]=pe[Go]=pe[Bo]=pe[dr]=pe[Gn]=pe[Ur]=pe[Bn]=pe[vr]=pe[Hn]=pe[zn]=!1;var fe={};fe[Pi]=fe[Uo]=fe[$n]=fe[Oi]=fe[Wn]=fe[Un]=fe[Il]=fe[Fl]=fe[Dl]=fe[kl]=fe[Rl]=fe[dr]=fe[Gn]=fe[Ur]=fe[Bn]=fe[vr]=fe[Hn]=fe[Ho]=fe[Vl]=fe[Nl]=fe[Wl]=fe[Ul]=!0,fe[Go]=fe[Bo]=fe[zn]=!1;var L0={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},M0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},q0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},x0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},j0=parseFloat,I0=parseInt,bv=typeof global=="object"&&global&&global.Object===Object&&global,F0=typeof self=="object"&&self&&self.Object===Object&&self,we=bv||F0||Function("return this")(),Xl=typeof n=="object"&&n&&!n.nodeType&&n,Yt=Xl&&typeof e=="object"&&e&&!e.nodeType&&e,_v=Yt&&Yt.exports===Xl,Kl=_v&&bv.process,nr=(function(){try{var T=Yt&&Yt.require&&Yt.require("util").types;return T||Kl&&Kl.binding&&Kl.binding("util")}catch{}})(),Pv=nr&&nr.isArrayBuffer,Ov=nr&&nr.isDate,Tv=nr&&nr.isMap,wv=nr&&nr.isRegExp,Sv=nr&&nr.isSet,Cv=nr&&nr.isTypedArray;function Xe(T,E,C){switch(C.length){case 0:return T.call(E);case 1:return T.call(E,C[0]);case 2:return T.call(E,C[0],C[1]);case 3:return T.call(E,C[0],C[1],C[2])}return T.apply(E,C)}function D0(T,E,C,V){for(var $=-1,ie=T==null?0:T.length;++$<ie;){var Pe=T[$];E(V,Pe,C(Pe),T)}return V}function or(T,E){for(var C=-1,V=T==null?0:T.length;++C<V&&E(T[C],C,T)!==!1;);return T}function k0(T,E){for(var C=T==null?0:T.length;C--&&E(T[C],C,T)!==!1;);return T}function Av(T,E){for(var C=-1,V=T==null?0:T.length;++C<V;)if(!E(T[C],C,T))return!1;return!0}function ut(T,E){for(var C=-1,V=T==null?0:T.length,$=0,ie=[];++C<V;){var Pe=T[C];E(Pe,C,T)&&(ie[$++]=Pe)}return ie}function Qo(T,E){var C=T==null?0:T.length;return!!C&&wi(T,E,0)>-1}function Jl(T,E,C){for(var V=-1,$=T==null?0:T.length;++V<$;)if(C(E,T[V]))return!0;return!1}function de(T,E){for(var C=-1,V=T==null?0:T.length,$=Array(V);++C<V;)$[C]=E(T[C],C,T);return $}function ct(T,E){for(var C=-1,V=E.length,$=T.length;++C<V;)T[$+C]=E[C];return T}function Zl(T,E,C,V){var $=-1,ie=T==null?0:T.length;for(V&&ie&&(C=T[++$]);++$<ie;)C=E(C,T[$],$,T);return C}function R0(T,E,C,V){var $=T==null?0:T.length;for(V&&$&&(C=T[--$]);$--;)C=E(C,T[$],$,T);return C}function ef(T,E){for(var C=-1,V=T==null?0:T.length;++C<V;)if(E(T[C],C,T))return!0;return!1}var V0=rf("length");function N0(T){return T.split("")}function W0(T){return T.match(QP)||[]}function Ev(T,E,C){var V;return C(T,function($,ie,Pe){if(E($,ie,Pe))return V=ie,!1}),V}function Xo(T,E,C,V){for(var $=T.length,ie=C+(V?1:-1);V?ie--:++ie<$;)if(E(T[ie],ie,T))return ie;return-1}function wi(T,E,C){return E===E?Z0(T,E,C):Xo(T,Lv,C)}function U0(T,E,C,V){for(var $=C-1,ie=T.length;++$<ie;)if(V(T[$],E))return $;return-1}function Lv(T){return T!==T}function Mv(T,E){var C=T==null?0:T.length;return C?nf(T,E)/C:Wo}function rf(T){return function(E){return E==null?r:E[T]}}function tf(T){return function(E){return T==null?r:T[E]}}function qv(T,E,C,V,$){return $(T,function(ie,Pe,le){C=V?(V=!1,ie):E(C,ie,Pe,le)}),C}function G0(T,E){var C=T.length;for(T.sort(E);C--;)T[C]=T[C].value;return T}function nf(T,E){for(var C,V=-1,$=T.length;++V<$;){var ie=E(T[V]);ie!==r&&(C=C===r?ie:C+ie)}return C}function of(T,E){for(var C=-1,V=Array(T);++C<T;)V[C]=E(C);return V}function B0(T,E){return de(E,function(C){return[C,T[C]]})}function xv(T){return T&&T.slice(0,Dv(T)+1).replace(Bl,"")}function Ke(T){return function(E){return T(E)}}function af(T,E){return de(E,function(C){return T[C]})}function Yn(T,E){return T.has(E)}function jv(T,E){for(var C=-1,V=T.length;++C<V&&wi(E,T[C],0)>-1;);return C}function Iv(T,E){for(var C=T.length;C--&&wi(E,T[C],0)>-1;);return C}function H0(T,E){for(var C=T.length,V=0;C--;)T[C]===E&&++V;return V}var z0=tf(L0),$0=tf(M0);function Y0(T){return"\\"+x0[T]}function Q0(T,E){return T==null?r:T[E]}function Si(T){return S0.test(T)}function X0(T){return C0.test(T)}function K0(T){for(var E,C=[];!(E=T.next()).done;)C.push(E.value);return C}function sf(T){var E=-1,C=Array(T.size);return T.forEach(function(V,$){C[++E]=[$,V]}),C}function Fv(T,E){return function(C){return T(E(C))}}function lt(T,E){for(var C=-1,V=T.length,$=0,ie=[];++C<V;){var Pe=T[C];(Pe===E||Pe===O)&&(T[C]=O,ie[$++]=C)}return ie}function Ko(T){var E=-1,C=Array(T.size);return T.forEach(function(V){C[++E]=V}),C}function J0(T){var E=-1,C=Array(T.size);return T.forEach(function(V){C[++E]=[V,V]}),C}function Z0(T,E,C){for(var V=C-1,$=T.length;++V<$;)if(T[V]===E)return V;return-1}function e1(T,E,C){for(var V=C+1;V--;)if(T[V]===E)return V;return V}function Ci(T){return Si(T)?t1(T):V0(T)}function mr(T){return Si(T)?i1(T):N0(T)}function Dv(T){for(var E=T.length;E--&&HP.test(T.charAt(E)););return E}var r1=tf(q0);function t1(T){for(var E=Ql.lastIndex=0;Ql.test(T);)++E;return E}function i1(T){return T.match(Ql)||[]}function n1(T){return T.match(w0)||[]}var o1=function T(E){E=E==null?we:ft.defaults(we.Object(),E,ft.pick(we,A0));var C=E.Array,V=E.Date,$=E.Error,ie=E.Function,Pe=E.Math,le=E.Object,uf=E.RegExp,a1=E.String,ar=E.TypeError,Jo=C.prototype,s1=ie.prototype,Ai=le.prototype,Zo=E["__core-js_shared__"],ea=s1.toString,ae=Ai.hasOwnProperty,u1=0,kv=(function(){var i=/[^.]+$/.exec(Zo&&Zo.keys&&Zo.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})(),ra=Ai.toString,c1=ea.call(le),l1=we._,f1=uf("^"+ea.call(ae).replace(Gl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ta=_v?E.Buffer:r,ht=E.Symbol,ia=E.Uint8Array,Rv=ta?ta.allocUnsafe:r,na=Fv(le.getPrototypeOf,le),Vv=le.create,Nv=Ai.propertyIsEnumerable,oa=Jo.splice,Wv=ht?ht.isConcatSpreadable:r,Qn=ht?ht.iterator:r,Qt=ht?ht.toStringTag:r,aa=(function(){try{var i=ei(le,"defineProperty");return i({},"",{}),i}catch{}})(),h1=E.clearTimeout!==we.clearTimeout&&E.clearTimeout,p1=V&&V.now!==we.Date.now&&V.now,d1=E.setTimeout!==we.setTimeout&&E.setTimeout,sa=Pe.ceil,ua=Pe.floor,cf=le.getOwnPropertySymbols,v1=ta?ta.isBuffer:r,Uv=E.isFinite,m1=Jo.join,g1=Fv(le.keys,le),Oe=Pe.max,xe=Pe.min,y1=V.now,b1=E.parseInt,Gv=Pe.random,_1=Jo.reverse,lf=ei(E,"DataView"),Xn=ei(E,"Map"),ff=ei(E,"Promise"),Ei=ei(E,"Set"),Kn=ei(E,"WeakMap"),Jn=ei(le,"create"),ca=Kn&&new Kn,Li={},P1=ri(lf),O1=ri(Xn),T1=ri(ff),w1=ri(Ei),S1=ri(Kn),la=ht?ht.prototype:r,Zn=la?la.valueOf:r,Bv=la?la.toString:r;function v(i){if(ge(i)&&!Y(i)&&!(i instanceof ee)){if(i instanceof sr)return i;if(ae.call(i,"__wrapped__"))return Hm(i)}return new sr(i)}var Mi=(function(){function i(){}return function(o){if(!me(o))return{};if(Vv)return Vv(o);i.prototype=o;var u=new i;return i.prototype=r,u}})();function fa(){}function sr(i,o){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=r}v.templateSettings={escape:VP,evaluate:NP,interpolate:Zd,variable:"",imports:{_:v}},v.prototype=fa.prototype,v.prototype.constructor=v,sr.prototype=Mi(fa.prototype),sr.prototype.constructor=sr;function ee(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Cr,this.__views__=[]}function C1(){var i=new ee(this.__wrapped__);return i.__actions__=Ue(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Ue(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Ue(this.__views__),i}function A1(){if(this.__filtered__){var i=new ee(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function E1(){var i=this.__wrapped__.value(),o=this.__dir__,u=Y(i),l=o<0,h=u?i.length:0,g=NO(0,h,this.__views__),y=g.start,P=g.end,w=P-y,L=l?P:y-1,M=this.__iteratees__,x=M.length,k=0,N=xe(w,this.__takeCount__);if(!u||!l&&h==w&&N==w)return dm(i,this.__actions__);var H=[];e:for(;w--&&k<N;){L+=o;for(var K=-1,z=i[L];++K<x;){var Z=M[K],re=Z.iteratee,er=Z.type,Re=re(z);if(er==OP)z=Re;else if(!Re){if(er==Yd)continue e;break e}}H[k++]=z}return H}ee.prototype=Mi(fa.prototype),ee.prototype.constructor=ee;function Xt(i){var o=-1,u=i==null?0:i.length;for(this.clear();++o<u;){var l=i[o];this.set(l[0],l[1])}}function L1(){this.__data__=Jn?Jn(null):{},this.size=0}function M1(i){var o=this.has(i)&&delete this.__data__[i];return this.size-=o?1:0,o}function q1(i){var o=this.__data__;if(Jn){var u=o[i];return u===p?r:u}return ae.call(o,i)?o[i]:r}function x1(i){var o=this.__data__;return Jn?o[i]!==r:ae.call(o,i)}function j1(i,o){var u=this.__data__;return this.size+=this.has(i)?0:1,u[i]=Jn&&o===r?p:o,this}Xt.prototype.clear=L1,Xt.prototype.delete=M1,Xt.prototype.get=q1,Xt.prototype.has=x1,Xt.prototype.set=j1;function Gr(i){var o=-1,u=i==null?0:i.length;for(this.clear();++o<u;){var l=i[o];this.set(l[0],l[1])}}function I1(){this.__data__=[],this.size=0}function F1(i){var o=this.__data__,u=ha(o,i);if(u<0)return!1;var l=o.length-1;return u==l?o.pop():oa.call(o,u,1),--this.size,!0}function D1(i){var o=this.__data__,u=ha(o,i);return u<0?r:o[u][1]}function k1(i){return ha(this.__data__,i)>-1}function R1(i,o){var u=this.__data__,l=ha(u,i);return l<0?(++this.size,u.push([i,o])):u[l][1]=o,this}Gr.prototype.clear=I1,Gr.prototype.delete=F1,Gr.prototype.get=D1,Gr.prototype.has=k1,Gr.prototype.set=R1;function Br(i){var o=-1,u=i==null?0:i.length;for(this.clear();++o<u;){var l=i[o];this.set(l[0],l[1])}}function V1(){this.size=0,this.__data__={hash:new Xt,map:new(Xn||Gr),string:new Xt}}function N1(i){var o=wa(this,i).delete(i);return this.size-=o?1:0,o}function W1(i){return wa(this,i).get(i)}function U1(i){return wa(this,i).has(i)}function G1(i,o){var u=wa(this,i),l=u.size;return u.set(i,o),this.size+=u.size==l?0:1,this}Br.prototype.clear=V1,Br.prototype.delete=N1,Br.prototype.get=W1,Br.prototype.has=U1,Br.prototype.set=G1;function Kt(i){var o=-1,u=i==null?0:i.length;for(this.__data__=new Br;++o<u;)this.add(i[o])}function B1(i){return this.__data__.set(i,p),this}function H1(i){return this.__data__.has(i)}Kt.prototype.add=Kt.prototype.push=B1,Kt.prototype.has=H1;function gr(i){var o=this.__data__=new Gr(i);this.size=o.size}function z1(){this.__data__=new Gr,this.size=0}function $1(i){var o=this.__data__,u=o.delete(i);return this.size=o.size,u}function Y1(i){return this.__data__.get(i)}function Q1(i){return this.__data__.has(i)}function X1(i,o){var u=this.__data__;if(u instanceof Gr){var l=u.__data__;if(!Xn||l.length<a-1)return l.push([i,o]),this.size=++u.size,this;u=this.__data__=new Br(l)}return u.set(i,o),this.size=u.size,this}gr.prototype.clear=z1,gr.prototype.delete=$1,gr.prototype.get=Y1,gr.prototype.has=Q1,gr.prototype.set=X1;function Hv(i,o){var u=Y(i),l=!u&&ti(i),h=!u&&!l&&gt(i),g=!u&&!l&&!h&&Ii(i),y=u||l||h||g,P=y?of(i.length,a1):[],w=P.length;for(var L in i)(o||ae.call(i,L))&&!(y&&(L=="length"||h&&(L=="offset"||L=="parent")||g&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||Yr(L,w)))&&P.push(L);return P}function zv(i){var o=i.length;return o?i[Of(0,o-1)]:r}function K1(i,o){return Sa(Ue(i),Jt(o,0,i.length))}function J1(i){return Sa(Ue(i))}function hf(i,o,u){(u!==r&&!yr(i[o],u)||u===r&&!(o in i))&&Hr(i,o,u)}function eo(i,o,u){var l=i[o];(!(ae.call(i,o)&&yr(l,u))||u===r&&!(o in i))&&Hr(i,o,u)}function ha(i,o){for(var u=i.length;u--;)if(yr(i[u][0],o))return u;return-1}function Z1(i,o,u,l){return pt(i,function(h,g,y){o(l,h,u(h),y)}),l}function $v(i,o){return i&&Er(o,Se(o),i)}function eO(i,o){return i&&Er(o,Be(o),i)}function Hr(i,o,u){o=="__proto__"&&aa?aa(i,o,{configurable:!0,enumerable:!0,value:u,writable:!0}):i[o]=u}function pf(i,o){for(var u=-1,l=o.length,h=C(l),g=i==null;++u<l;)h[u]=g?r:$f(i,o[u]);return h}function Jt(i,o,u){return i===i&&(u!==r&&(i=i<=u?i:u),o!==r&&(i=i>=o?i:o)),i}function ur(i,o,u,l,h,g){var y,P=o&A,w=o&q,L=o&j;if(u&&(y=h?u(i,l,h,g):u(i)),y!==r)return y;if(!me(i))return i;var M=Y(i);if(M){if(y=UO(i),!P)return Ue(i,y)}else{var x=je(i),k=x==Bo||x==Qd;if(gt(i))return gm(i,P);if(x==Ur||x==Pi||k&&!h){if(y=w||k?{}:Dm(i),!P)return w?qO(i,eO(y,i)):MO(i,$v(y,i))}else{if(!fe[x])return h?i:{};y=GO(i,x,P)}}g||(g=new gr);var N=g.get(i);if(N)return N;g.set(i,y),fg(i)?i.forEach(function(z){y.add(ur(z,o,u,z,i,g))}):cg(i)&&i.forEach(function(z,Z){y.set(Z,ur(z,o,u,Z,i,g))});var H=L?w?jf:xf:w?Be:Se,K=M?r:H(i);return or(K||i,function(z,Z){K&&(Z=z,z=i[Z]),eo(y,Z,ur(z,o,u,Z,i,g))}),y}function rO(i){var o=Se(i);return function(u){return Yv(u,i,o)}}function Yv(i,o,u){var l=u.length;if(i==null)return!l;for(i=le(i);l--;){var h=u[l],g=o[h],y=i[h];if(y===r&&!(h in i)||!g(y))return!1}return!0}function Qv(i,o,u){if(typeof i!="function")throw new ar(c);return so(function(){i.apply(r,u)},o)}function ro(i,o,u,l){var h=-1,g=Qo,y=!0,P=i.length,w=[],L=o.length;if(!P)return w;u&&(o=de(o,Ke(u))),l?(g=Jl,y=!1):o.length>=a&&(g=Yn,y=!1,o=new Kt(o));e:for(;++h<P;){var M=i[h],x=u==null?M:u(M);if(M=l||M!==0?M:0,y&&x===x){for(var k=L;k--;)if(o[k]===x)continue e;w.push(M)}else g(o,x,l)||w.push(M)}return w}var pt=Om(Ar),Xv=Om(vf,!0);function tO(i,o){var u=!0;return pt(i,function(l,h,g){return u=!!o(l,h,g),u}),u}function pa(i,o,u){for(var l=-1,h=i.length;++l<h;){var g=i[l],y=o(g);if(y!=null&&(P===r?y===y&&!Ze(y):u(y,P)))var P=y,w=g}return w}function iO(i,o,u,l){var h=i.length;for(u=X(u),u<0&&(u=-u>h?0:h+u),l=l===r||l>h?h:X(l),l<0&&(l+=h),l=u>l?0:pg(l);u<l;)i[u++]=o;return i}function Kv(i,o){var u=[];return pt(i,function(l,h,g){o(l,h,g)&&u.push(l)}),u}function Ee(i,o,u,l,h){var g=-1,y=i.length;for(u||(u=HO),h||(h=[]);++g<y;){var P=i[g];o>0&&u(P)?o>1?Ee(P,o-1,u,l,h):ct(h,P):l||(h[h.length]=P)}return h}var df=Tm(),Jv=Tm(!0);function Ar(i,o){return i&&df(i,o,Se)}function vf(i,o){return i&&Jv(i,o,Se)}function da(i,o){return ut(o,function(u){return Qr(i[u])})}function Zt(i,o){o=vt(o,i);for(var u=0,l=o.length;i!=null&&u<l;)i=i[Lr(o[u++])];return u&&u==l?i:r}function Zv(i,o,u){var l=o(i);return Y(i)?l:ct(l,u(i))}function De(i){return i==null?i===r?xP:MP:Qt&&Qt in le(i)?VO(i):JO(i)}function mf(i,o){return i>o}function nO(i,o){return i!=null&&ae.call(i,o)}function oO(i,o){return i!=null&&o in le(i)}function aO(i,o,u){return i>=xe(o,u)&&i<Oe(o,u)}function gf(i,o,u){for(var l=u?Jl:Qo,h=i[0].length,g=i.length,y=g,P=C(g),w=1/0,L=[];y--;){var M=i[y];y&&o&&(M=de(M,Ke(o))),w=xe(M.length,w),P[y]=!u&&(o||h>=120&&M.length>=120)?new Kt(y&&M):r}M=i[0];var x=-1,k=P[0];e:for(;++x<h&&L.length<w;){var N=M[x],H=o?o(N):N;if(N=u||N!==0?N:0,!(k?Yn(k,H):l(L,H,u))){for(y=g;--y;){var K=P[y];if(!(K?Yn(K,H):l(i[y],H,u)))continue e}k&&k.push(H),L.push(N)}}return L}function sO(i,o,u,l){return Ar(i,function(h,g,y){o(l,u(h),g,y)}),l}function to(i,o,u){o=vt(o,i),i=Nm(i,o);var l=i==null?i:i[Lr(lr(o))];return l==null?r:Xe(l,i,u)}function em(i){return ge(i)&&De(i)==Pi}function uO(i){return ge(i)&&De(i)==$n}function cO(i){return ge(i)&&De(i)==Un}function io(i,o,u,l,h){return i===o?!0:i==null||o==null||!ge(i)&&!ge(o)?i!==i&&o!==o:lO(i,o,u,l,io,h)}function lO(i,o,u,l,h,g){var y=Y(i),P=Y(o),w=y?Uo:je(i),L=P?Uo:je(o);w=w==Pi?Ur:w,L=L==Pi?Ur:L;var M=w==Ur,x=L==Ur,k=w==L;if(k&&gt(i)){if(!gt(o))return!1;y=!0,M=!1}if(k&&!M)return g||(g=new gr),y||Ii(i)?jm(i,o,u,l,h,g):kO(i,o,w,u,l,h,g);if(!(u&I)){var N=M&&ae.call(i,"__wrapped__"),H=x&&ae.call(o,"__wrapped__");if(N||H){var K=N?i.value():i,z=H?o.value():o;return g||(g=new gr),h(K,z,u,l,g)}}return k?(g||(g=new gr),RO(i,o,u,l,h,g)):!1}function fO(i){return ge(i)&&je(i)==dr}function yf(i,o,u,l){var h=u.length,g=h,y=!l;if(i==null)return!g;for(i=le(i);h--;){var P=u[h];if(y&&P[2]?P[1]!==i[P[0]]:!(P[0]in i))return!1}for(;++h<g;){P=u[h];var w=P[0],L=i[w],M=P[1];if(y&&P[2]){if(L===r&&!(w in i))return!1}else{var x=new gr;if(l)var k=l(L,M,w,i,o,x);if(!(k===r?io(M,L,I|F,l,x):k))return!1}}return!0}function rm(i){if(!me(i)||$O(i))return!1;var o=Qr(i)?f1:r0;return o.test(ri(i))}function hO(i){return ge(i)&&De(i)==Bn}function pO(i){return ge(i)&&je(i)==vr}function dO(i){return ge(i)&&qa(i.length)&&!!pe[De(i)]}function tm(i){return typeof i=="function"?i:i==null?He:typeof i=="object"?Y(i)?om(i[0],i[1]):nm(i):wg(i)}function bf(i){if(!ao(i))return g1(i);var o=[];for(var u in le(i))ae.call(i,u)&&u!="constructor"&&o.push(u);return o}function vO(i){if(!me(i))return KO(i);var o=ao(i),u=[];for(var l in i)l=="constructor"&&(o||!ae.call(i,l))||u.push(l);return u}function _f(i,o){return i<o}function im(i,o){var u=-1,l=Ge(i)?C(i.length):[];return pt(i,function(h,g,y){l[++u]=o(h,g,y)}),l}function nm(i){var o=Ff(i);return o.length==1&&o[0][2]?Rm(o[0][0],o[0][1]):function(u){return u===i||yf(u,i,o)}}function om(i,o){return kf(i)&&km(o)?Rm(Lr(i),o):function(u){var l=$f(u,i);return l===r&&l===o?Yf(u,i):io(o,l,I|F)}}function va(i,o,u,l,h){i!==o&&df(o,function(g,y){if(h||(h=new gr),me(g))mO(i,o,y,u,va,l,h);else{var P=l?l(Vf(i,y),g,y+"",i,o,h):r;P===r&&(P=g),hf(i,y,P)}},Be)}function mO(i,o,u,l,h,g,y){var P=Vf(i,u),w=Vf(o,u),L=y.get(w);if(L){hf(i,u,L);return}var M=g?g(P,w,u+"",i,o,y):r,x=M===r;if(x){var k=Y(w),N=!k&&gt(w),H=!k&&!N&&Ii(w);M=w,k||N||H?Y(P)?M=P:ye(P)?M=Ue(P):N?(x=!1,M=gm(w,!0)):H?(x=!1,M=ym(w,!0)):M=[]:uo(w)||ti(w)?(M=P,ti(P)?M=dg(P):(!me(P)||Qr(P))&&(M=Dm(w))):x=!1}x&&(y.set(w,M),h(M,w,l,g,y),y.delete(w)),hf(i,u,M)}function am(i,o){var u=i.length;if(u)return o+=o<0?u:0,Yr(o,u)?i[o]:r}function sm(i,o,u){o.length?o=de(o,function(g){return Y(g)?function(y){return Zt(y,g.length===1?g[0]:g)}:g}):o=[He];var l=-1;o=de(o,Ke(B()));var h=im(i,function(g,y,P){var w=de(o,function(L){return L(g)});return{criteria:w,index:++l,value:g}});return G0(h,function(g,y){return LO(g,y,u)})}function gO(i,o){return um(i,o,function(u,l){return Yf(i,l)})}function um(i,o,u){for(var l=-1,h=o.length,g={};++l<h;){var y=o[l],P=Zt(i,y);u(P,y)&&no(g,vt(y,i),P)}return g}function yO(i){return function(o){return Zt(o,i)}}function Pf(i,o,u,l){var h=l?U0:wi,g=-1,y=o.length,P=i;for(i===o&&(o=Ue(o)),u&&(P=de(i,Ke(u)));++g<y;)for(var w=0,L=o[g],M=u?u(L):L;(w=h(P,M,w,l))>-1;)P!==i&&oa.call(P,w,1),oa.call(i,w,1);return i}function cm(i,o){for(var u=i?o.length:0,l=u-1;u--;){var h=o[u];if(u==l||h!==g){var g=h;Yr(h)?oa.call(i,h,1):Sf(i,h)}}return i}function Of(i,o){return i+ua(Gv()*(o-i+1))}function bO(i,o,u,l){for(var h=-1,g=Oe(sa((o-i)/(u||1)),0),y=C(g);g--;)y[l?g:++h]=i,i+=u;return y}function Tf(i,o){var u="";if(!i||o<1||o>st)return u;do o%2&&(u+=i),o=ua(o/2),o&&(i+=i);while(o);return u}function J(i,o){return Nf(Vm(i,o,He),i+"")}function _O(i){return zv(Fi(i))}function PO(i,o){var u=Fi(i);return Sa(u,Jt(o,0,u.length))}function no(i,o,u,l){if(!me(i))return i;o=vt(o,i);for(var h=-1,g=o.length,y=g-1,P=i;P!=null&&++h<g;){var w=Lr(o[h]),L=u;if(w==="__proto__"||w==="constructor"||w==="prototype")return i;if(h!=y){var M=P[w];L=l?l(M,w,P):r,L===r&&(L=me(M)?M:Yr(o[h+1])?[]:{})}eo(P,w,L),P=P[w]}return i}var lm=ca?function(i,o){return ca.set(i,o),i}:He,OO=aa?function(i,o){return aa(i,"toString",{configurable:!0,enumerable:!1,value:Xf(o),writable:!0})}:He;function TO(i){return Sa(Fi(i))}function cr(i,o,u){var l=-1,h=i.length;o<0&&(o=-o>h?0:h+o),u=u>h?h:u,u<0&&(u+=h),h=o>u?0:u-o>>>0,o>>>=0;for(var g=C(h);++l<h;)g[l]=i[l+o];return g}function wO(i,o){var u;return pt(i,function(l,h,g){return u=o(l,h,g),!u}),!!u}function ma(i,o,u){var l=0,h=i==null?l:i.length;if(typeof o=="number"&&o===o&&h<=CP){for(;l<h;){var g=l+h>>>1,y=i[g];y!==null&&!Ze(y)&&(u?y<=o:y<o)?l=g+1:h=g}return h}return wf(i,o,He,u)}function wf(i,o,u,l){var h=0,g=i==null?0:i.length;if(g===0)return 0;o=u(o);for(var y=o!==o,P=o===null,w=Ze(o),L=o===r;h<g;){var M=ua((h+g)/2),x=u(i[M]),k=x!==r,N=x===null,H=x===x,K=Ze(x);if(y)var z=l||H;else L?z=H&&(l||k):P?z=H&&k&&(l||!N):w?z=H&&k&&!N&&(l||!K):N||K?z=!1:z=l?x<=o:x<o;z?h=M+1:g=M}return xe(g,SP)}function fm(i,o){for(var u=-1,l=i.length,h=0,g=[];++u<l;){var y=i[u],P=o?o(y):y;if(!u||!yr(P,w)){var w=P;g[h++]=y===0?0:y}}return g}function hm(i){return typeof i=="number"?i:Ze(i)?Wo:+i}function Je(i){if(typeof i=="string")return i;if(Y(i))return de(i,Je)+"";if(Ze(i))return Bv?Bv.call(i):"";var o=i+"";return o=="0"&&1/i==-$t?"-0":o}function dt(i,o,u){var l=-1,h=Qo,g=i.length,y=!0,P=[],w=P;if(u)y=!1,h=Jl;else if(g>=a){var L=o?null:FO(i);if(L)return Ko(L);y=!1,h=Yn,w=new Kt}else w=o?[]:P;e:for(;++l<g;){var M=i[l],x=o?o(M):M;if(M=u||M!==0?M:0,y&&x===x){for(var k=w.length;k--;)if(w[k]===x)continue e;o&&w.push(x),P.push(M)}else h(w,x,u)||(w!==P&&w.push(x),P.push(M))}return P}function Sf(i,o){return o=vt(o,i),i=Nm(i,o),i==null||delete i[Lr(lr(o))]}function pm(i,o,u,l){return no(i,o,u(Zt(i,o)),l)}function ga(i,o,u,l){for(var h=i.length,g=l?h:-1;(l?g--:++g<h)&&o(i[g],g,i););return u?cr(i,l?0:g,l?g+1:h):cr(i,l?g+1:0,l?h:g)}function dm(i,o){var u=i;return u instanceof ee&&(u=u.value()),Zl(o,function(l,h){return h.func.apply(h.thisArg,ct([l],h.args))},u)}function Cf(i,o,u){var l=i.length;if(l<2)return l?dt(i[0]):[];for(var h=-1,g=C(l);++h<l;)for(var y=i[h],P=-1;++P<l;)P!=h&&(g[h]=ro(g[h]||y,i[P],o,u));return dt(Ee(g,1),o,u)}function vm(i,o,u){for(var l=-1,h=i.length,g=o.length,y={};++l<h;){var P=l<g?o[l]:r;u(y,i[l],P)}return y}function Af(i){return ye(i)?i:[]}function Ef(i){return typeof i=="function"?i:He}function vt(i,o){return Y(i)?i:kf(i,o)?[i]:Bm(ne(i))}var SO=J;function mt(i,o,u){var l=i.length;return u=u===r?l:u,!o&&u>=l?i:cr(i,o,u)}var mm=h1||function(i){return we.clearTimeout(i)};function gm(i,o){if(o)return i.slice();var u=i.length,l=Rv?Rv(u):new i.constructor(u);return i.copy(l),l}function Lf(i){var o=new i.constructor(i.byteLength);return new ia(o).set(new ia(i)),o}function CO(i,o){var u=o?Lf(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.byteLength)}function AO(i){var o=new i.constructor(i.source,ev.exec(i));return o.lastIndex=i.lastIndex,o}function EO(i){return Zn?le(Zn.call(i)):{}}function ym(i,o){var u=o?Lf(i.buffer):i.buffer;return new i.constructor(u,i.byteOffset,i.length)}function bm(i,o){if(i!==o){var u=i!==r,l=i===null,h=i===i,g=Ze(i),y=o!==r,P=o===null,w=o===o,L=Ze(o);if(!P&&!L&&!g&&i>o||g&&y&&w&&!P&&!L||l&&y&&w||!u&&w||!h)return 1;if(!l&&!g&&!L&&i<o||L&&u&&h&&!l&&!g||P&&u&&h||!y&&h||!w)return-1}return 0}function LO(i,o,u){for(var l=-1,h=i.criteria,g=o.criteria,y=h.length,P=u.length;++l<y;){var w=bm(h[l],g[l]);if(w){if(l>=P)return w;var L=u[l];return w*(L=="desc"?-1:1)}}return i.index-o.index}function _m(i,o,u,l){for(var h=-1,g=i.length,y=u.length,P=-1,w=o.length,L=Oe(g-y,0),M=C(w+L),x=!l;++P<w;)M[P]=o[P];for(;++h<y;)(x||h<g)&&(M[u[h]]=i[h]);for(;L--;)M[P++]=i[h++];return M}function Pm(i,o,u,l){for(var h=-1,g=i.length,y=-1,P=u.length,w=-1,L=o.length,M=Oe(g-P,0),x=C(M+L),k=!l;++h<M;)x[h]=i[h];for(var N=h;++w<L;)x[N+w]=o[w];for(;++y<P;)(k||h<g)&&(x[N+u[y]]=i[h++]);return x}function Ue(i,o){var u=-1,l=i.length;for(o||(o=C(l));++u<l;)o[u]=i[u];return o}function Er(i,o,u,l){var h=!u;u||(u={});for(var g=-1,y=o.length;++g<y;){var P=o[g],w=l?l(u[P],i[P],P,u,i):r;w===r&&(w=i[P]),h?Hr(u,P,w):eo(u,P,w)}return u}function MO(i,o){return Er(i,Df(i),o)}function qO(i,o){return Er(i,Im(i),o)}function ya(i,o){return function(u,l){var h=Y(u)?D0:Z1,g=o?o():{};return h(u,i,B(l,2),g)}}function qi(i){return J(function(o,u){var l=-1,h=u.length,g=h>1?u[h-1]:r,y=h>2?u[2]:r;for(g=i.length>3&&typeof g=="function"?(h--,g):r,y&&ke(u[0],u[1],y)&&(g=h<3?r:g,h=1),o=le(o);++l<h;){var P=u[l];P&&i(o,P,l,g)}return o})}function Om(i,o){return function(u,l){if(u==null)return u;if(!Ge(u))return i(u,l);for(var h=u.length,g=o?h:-1,y=le(u);(o?g--:++g<h)&&l(y[g],g,y)!==!1;);return u}}function Tm(i){return function(o,u,l){for(var h=-1,g=le(o),y=l(o),P=y.length;P--;){var w=y[i?P:++h];if(u(g[w],w,g)===!1)break}return o}}function xO(i,o,u){var l=o&D,h=oo(i);function g(){var y=this&&this!==we&&this instanceof g?h:i;return y.apply(l?u:this,arguments)}return g}function wm(i){return function(o){o=ne(o);var u=Si(o)?mr(o):r,l=u?u[0]:o.charAt(0),h=u?mt(u,1).join(""):o.slice(1);return l[i]()+h}}function xi(i){return function(o){return Zl(Og(Pg(o).replace(O0,"")),i,"")}}function oo(i){return function(){var o=arguments;switch(o.length){case 0:return new i;case 1:return new i(o[0]);case 2:return new i(o[0],o[1]);case 3:return new i(o[0],o[1],o[2]);case 4:return new i(o[0],o[1],o[2],o[3]);case 5:return new i(o[0],o[1],o[2],o[3],o[4]);case 6:return new i(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new i(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var u=Mi(i.prototype),l=i.apply(u,o);return me(l)?l:u}}function jO(i,o,u){var l=oo(i);function h(){for(var g=arguments.length,y=C(g),P=g,w=ji(h);P--;)y[P]=arguments[P];var L=g<3&&y[0]!==w&&y[g-1]!==w?[]:lt(y,w);if(g-=L.length,g<u)return Lm(i,o,ba,h.placeholder,r,y,L,r,r,u-g);var M=this&&this!==we&&this instanceof h?l:i;return Xe(M,this,y)}return h}function Sm(i){return function(o,u,l){var h=le(o);if(!Ge(o)){var g=B(u,3);o=Se(o),u=function(P){return g(h[P],P,h)}}var y=i(o,u,l);return y>-1?h[g?o[y]:y]:r}}function Cm(i){return $r(function(o){var u=o.length,l=u,h=sr.prototype.thru;for(i&&o.reverse();l--;){var g=o[l];if(typeof g!="function")throw new ar(c);if(h&&!y&&Ta(g)=="wrapper")var y=new sr([],!0)}for(l=y?l:u;++l<u;){g=o[l];var P=Ta(g),w=P=="wrapper"?If(g):r;w&&Rf(w[0])&&w[1]==(pr|he|Te|Nn)&&!w[4].length&&w[9]==1?y=y[Ta(w[0])].apply(y,w[3]):y=g.length==1&&Rf(g)?y[P]():y.thru(g)}return function(){var L=arguments,M=L[0];if(y&&L.length==1&&Y(M))return y.plant(M).value();for(var x=0,k=u?o[x].apply(this,L):M;++x<u;)k=o[x].call(this,k);return k}})}function ba(i,o,u,l,h,g,y,P,w,L){var M=o&pr,x=o&D,k=o&U,N=o&(he|Fe),H=o&jl,K=k?r:oo(i);function z(){for(var Z=arguments.length,re=C(Z),er=Z;er--;)re[er]=arguments[er];if(N)var Re=ji(z),rr=H0(re,Re);if(l&&(re=_m(re,l,h,N)),g&&(re=Pm(re,g,y,N)),Z-=rr,N&&Z<L){var be=lt(re,Re);return Lm(i,o,ba,z.placeholder,u,re,be,P,w,L-Z)}var br=x?u:this,Kr=k?br[i]:i;return Z=re.length,P?re=ZO(re,P):H&&Z>1&&re.reverse(),M&&w<Z&&(re.length=w),this&&this!==we&&this instanceof z&&(Kr=K||oo(Kr)),Kr.apply(br,re)}return z}function Am(i,o){return function(u,l){return sO(u,i,o(l),{})}}function _a(i,o){return function(u,l){var h;if(u===r&&l===r)return o;if(u!==r&&(h=u),l!==r){if(h===r)return l;typeof u=="string"||typeof l=="string"?(u=Je(u),l=Je(l)):(u=hm(u),l=hm(l)),h=i(u,l)}return h}}function Mf(i){return $r(function(o){return o=de(o,Ke(B())),J(function(u){var l=this;return i(o,function(h){return Xe(h,l,u)})})})}function Pa(i,o){o=o===r?" ":Je(o);var u=o.length;if(u<2)return u?Tf(o,i):o;var l=Tf(o,sa(i/Ci(o)));return Si(o)?mt(mr(l),0,i).join(""):l.slice(0,i)}function IO(i,o,u,l){var h=o&D,g=oo(i);function y(){for(var P=-1,w=arguments.length,L=-1,M=l.length,x=C(M+w),k=this&&this!==we&&this instanceof y?g:i;++L<M;)x[L]=l[L];for(;w--;)x[L++]=arguments[++P];return Xe(k,h?u:this,x)}return y}function Em(i){return function(o,u,l){return l&&typeof l!="number"&&ke(o,u,l)&&(u=l=r),o=Xr(o),u===r?(u=o,o=0):u=Xr(u),l=l===r?o<u?1:-1:Xr(l),bO(o,u,l,i)}}function Oa(i){return function(o,u){return typeof o=="string"&&typeof u=="string"||(o=fr(o),u=fr(u)),i(o,u)}}function Lm(i,o,u,l,h,g,y,P,w,L){var M=o&he,x=M?y:r,k=M?r:y,N=M?g:r,H=M?r:g;o|=M?Te:We,o&=~(M?We:Te),o&oe||(o&=~(D|U));var K=[i,o,h,N,x,H,k,P,w,L],z=u.apply(r,K);return Rf(i)&&Wm(z,K),z.placeholder=l,Um(z,i,o)}function qf(i){var o=Pe[i];return function(u,l){if(u=fr(u),l=l==null?0:xe(X(l),292),l&&Uv(u)){var h=(ne(u)+"e").split("e"),g=o(h[0]+"e"+(+h[1]+l));return h=(ne(g)+"e").split("e"),+(h[0]+"e"+(+h[1]-l))}return o(u)}}var FO=Ei&&1/Ko(new Ei([,-0]))[1]==$t?function(i){return new Ei(i)}:Zf;function Mm(i){return function(o){var u=je(o);return u==dr?sf(o):u==vr?J0(o):B0(o,i(o))}}function zr(i,o,u,l,h,g,y,P){var w=o&U;if(!w&&typeof i!="function")throw new ar(c);var L=l?l.length:0;if(L||(o&=~(Te|We),l=h=r),y=y===r?y:Oe(X(y),0),P=P===r?P:X(P),L-=h?h.length:0,o&We){var M=l,x=h;l=h=r}var k=w?r:If(i),N=[i,o,u,l,h,M,x,g,y,P];if(k&&XO(N,k),i=N[0],o=N[1],u=N[2],l=N[3],h=N[4],P=N[9]=N[9]===r?w?0:i.length:Oe(N[9]-L,0),!P&&o&(he|Fe)&&(o&=~(he|Fe)),!o||o==D)var H=xO(i,o,u);else o==he||o==Fe?H=jO(i,o,P):(o==Te||o==(D|Te))&&!h.length?H=IO(i,o,u,l):H=ba.apply(r,N);var K=k?lm:Wm;return Um(K(H,N),i,o)}function qm(i,o,u,l){return i===r||yr(i,Ai[u])&&!ae.call(l,u)?o:i}function xm(i,o,u,l,h,g){return me(i)&&me(o)&&(g.set(o,i),va(i,o,r,xm,g),g.delete(o)),i}function DO(i){return uo(i)?r:i}function jm(i,o,u,l,h,g){var y=u&I,P=i.length,w=o.length;if(P!=w&&!(y&&w>P))return!1;var L=g.get(i),M=g.get(o);if(L&&M)return L==o&&M==i;var x=-1,k=!0,N=u&F?new Kt:r;for(g.set(i,o),g.set(o,i);++x<P;){var H=i[x],K=o[x];if(l)var z=y?l(K,H,x,o,i,g):l(H,K,x,i,o,g);if(z!==r){if(z)continue;k=!1;break}if(N){if(!ef(o,function(Z,re){if(!Yn(N,re)&&(H===Z||h(H,Z,u,l,g)))return N.push(re)})){k=!1;break}}else if(!(H===K||h(H,K,u,l,g))){k=!1;break}}return g.delete(i),g.delete(o),k}function kO(i,o,u,l,h,g,y){switch(u){case Oi:if(i.byteLength!=o.byteLength||i.byteOffset!=o.byteOffset)return!1;i=i.buffer,o=o.buffer;case $n:return!(i.byteLength!=o.byteLength||!g(new ia(i),new ia(o)));case Wn:case Un:case Gn:return yr(+i,+o);case Go:return i.name==o.name&&i.message==o.message;case Bn:case Hn:return i==o+"";case dr:var P=sf;case vr:var w=l&I;if(P||(P=Ko),i.size!=o.size&&!w)return!1;var L=y.get(i);if(L)return L==o;l|=F,y.set(i,o);var M=jm(P(i),P(o),l,h,g,y);return y.delete(i),M;case Ho:if(Zn)return Zn.call(i)==Zn.call(o)}return!1}function RO(i,o,u,l,h,g){var y=u&I,P=xf(i),w=P.length,L=xf(o),M=L.length;if(w!=M&&!y)return!1;for(var x=w;x--;){var k=P[x];if(!(y?k in o:ae.call(o,k)))return!1}var N=g.get(i),H=g.get(o);if(N&&H)return N==o&&H==i;var K=!0;g.set(i,o),g.set(o,i);for(var z=y;++x<w;){k=P[x];var Z=i[k],re=o[k];if(l)var er=y?l(re,Z,k,o,i,g):l(Z,re,k,i,o,g);if(!(er===r?Z===re||h(Z,re,u,l,g):er)){K=!1;break}z||(z=k=="constructor")}if(K&&!z){var Re=i.constructor,rr=o.constructor;Re!=rr&&"constructor"in i&&"constructor"in o&&!(typeof Re=="function"&&Re instanceof Re&&typeof rr=="function"&&rr instanceof rr)&&(K=!1)}return g.delete(i),g.delete(o),K}function $r(i){return Nf(Vm(i,r,Ym),i+"")}function xf(i){return Zv(i,Se,Df)}function jf(i){return Zv(i,Be,Im)}var If=ca?function(i){return ca.get(i)}:Zf;function Ta(i){for(var o=i.name+"",u=Li[o],l=ae.call(Li,o)?u.length:0;l--;){var h=u[l],g=h.func;if(g==null||g==i)return h.name}return o}function ji(i){var o=ae.call(v,"placeholder")?v:i;return o.placeholder}function B(){var i=v.iteratee||Kf;return i=i===Kf?tm:i,arguments.length?i(arguments[0],arguments[1]):i}function wa(i,o){var u=i.__data__;return zO(o)?u[typeof o=="string"?"string":"hash"]:u.map}function Ff(i){for(var o=Se(i),u=o.length;u--;){var l=o[u],h=i[l];o[u]=[l,h,km(h)]}return o}function ei(i,o){var u=Q0(i,o);return rm(u)?u:r}function VO(i){var o=ae.call(i,Qt),u=i[Qt];try{i[Qt]=r;var l=!0}catch{}var h=ra.call(i);return l&&(o?i[Qt]=u:delete i[Qt]),h}var Df=cf?function(i){return i==null?[]:(i=le(i),ut(cf(i),function(o){return Nv.call(i,o)}))}:eh,Im=cf?function(i){for(var o=[];i;)ct(o,Df(i)),i=na(i);return o}:eh,je=De;(lf&&je(new lf(new ArrayBuffer(1)))!=Oi||Xn&&je(new Xn)!=dr||ff&&je(ff.resolve())!=Xd||Ei&&je(new Ei)!=vr||Kn&&je(new Kn)!=zn)&&(je=function(i){var o=De(i),u=o==Ur?i.constructor:r,l=u?ri(u):"";if(l)switch(l){case P1:return Oi;case O1:return dr;case T1:return Xd;case w1:return vr;case S1:return zn}return o});function NO(i,o,u){for(var l=-1,h=u.length;++l<h;){var g=u[l],y=g.size;switch(g.type){case"drop":i+=y;break;case"dropRight":o-=y;break;case"take":o=xe(o,i+y);break;case"takeRight":i=Oe(i,o-y);break}}return{start:i,end:o}}function WO(i){var o=i.match($P);return o?o[1].split(YP):[]}function Fm(i,o,u){o=vt(o,i);for(var l=-1,h=o.length,g=!1;++l<h;){var y=Lr(o[l]);if(!(g=i!=null&&u(i,y)))break;i=i[y]}return g||++l!=h?g:(h=i==null?0:i.length,!!h&&qa(h)&&Yr(y,h)&&(Y(i)||ti(i)))}function UO(i){var o=i.length,u=new i.constructor(o);return o&&typeof i[0]=="string"&&ae.call(i,"index")&&(u.index=i.index,u.input=i.input),u}function Dm(i){return typeof i.constructor=="function"&&!ao(i)?Mi(na(i)):{}}function GO(i,o,u){var l=i.constructor;switch(o){case $n:return Lf(i);case Wn:case Un:return new l(+i);case Oi:return CO(i,u);case Il:case Fl:case Dl:case kl:case Rl:case Vl:case Nl:case Wl:case Ul:return ym(i,u);case dr:return new l;case Gn:case Hn:return new l(i);case Bn:return AO(i);case vr:return new l;case Ho:return EO(i)}}function BO(i,o){var u=o.length;if(!u)return i;var l=u-1;return o[l]=(u>1?"& ":"")+o[l],o=o.join(u>2?", ":" "),i.replace(zP,`{
/* [wrapped with `+o+`] */
`)}function HO(i){return Y(i)||ti(i)||!!(Wv&&i&&i[Wv])}function Yr(i,o){var u=typeof i;return o=o??st,!!o&&(u=="number"||u!="symbol"&&i0.test(i))&&i>-1&&i%1==0&&i<o}function ke(i,o,u){if(!me(u))return!1;var l=typeof o;return(l=="number"?Ge(u)&&Yr(o,u.length):l=="string"&&o in u)?yr(u[o],i):!1}function kf(i,o){if(Y(i))return!1;var u=typeof i;return u=="number"||u=="symbol"||u=="boolean"||i==null||Ze(i)?!0:UP.test(i)||!WP.test(i)||o!=null&&i in le(o)}function zO(i){var o=typeof i;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?i!=="__proto__":i===null}function Rf(i){var o=Ta(i),u=v[o];if(typeof u!="function"||!(o in ee.prototype))return!1;if(i===u)return!0;var l=If(u);return!!l&&i===l[0]}function $O(i){return!!kv&&kv in i}var YO=Zo?Qr:rh;function ao(i){var o=i&&i.constructor,u=typeof o=="function"&&o.prototype||Ai;return i===u}function km(i){return i===i&&!me(i)}function Rm(i,o){return function(u){return u==null?!1:u[i]===o&&(o!==r||i in le(u))}}function QO(i){var o=La(i,function(l){return u.size===m&&u.clear(),l}),u=o.cache;return o}function XO(i,o){var u=i[1],l=o[1],h=u|l,g=h<(D|U|pr),y=l==pr&&u==he||l==pr&&u==Nn&&i[7].length<=o[8]||l==(pr|Nn)&&o[7].length<=o[8]&&u==he;if(!(g||y))return i;l&D&&(i[2]=o[2],h|=u&D?0:oe);var P=o[3];if(P){var w=i[3];i[3]=w?_m(w,P,o[4]):P,i[4]=w?lt(i[3],O):o[4]}return P=o[5],P&&(w=i[5],i[5]=w?Pm(w,P,o[6]):P,i[6]=w?lt(i[5],O):o[6]),P=o[7],P&&(i[7]=P),l&pr&&(i[8]=i[8]==null?o[8]:xe(i[8],o[8])),i[9]==null&&(i[9]=o[9]),i[0]=o[0],i[1]=h,i}function KO(i){var o=[];if(i!=null)for(var u in le(i))o.push(u);return o}function JO(i){return ra.call(i)}function Vm(i,o,u){return o=Oe(o===r?i.length-1:o,0),function(){for(var l=arguments,h=-1,g=Oe(l.length-o,0),y=C(g);++h<g;)y[h]=l[o+h];h=-1;for(var P=C(o+1);++h<o;)P[h]=l[h];return P[o]=u(y),Xe(i,this,P)}}function Nm(i,o){return o.length<2?i:Zt(i,cr(o,0,-1))}function ZO(i,o){for(var u=i.length,l=xe(o.length,u),h=Ue(i);l--;){var g=o[l];i[l]=Yr(g,u)?h[g]:r}return i}function Vf(i,o){if(!(o==="constructor"&&typeof i[o]=="function")&&o!="__proto__")return i[o]}var Wm=Gm(lm),so=d1||function(i,o){return we.setTimeout(i,o)},Nf=Gm(OO);function Um(i,o,u){var l=o+"";return Nf(i,BO(l,eT(WO(l),u)))}function Gm(i){var o=0,u=0;return function(){var l=y1(),h=PP-(l-u);if(u=l,h>0){if(++o>=_P)return arguments[0]}else o=0;return i.apply(r,arguments)}}function Sa(i,o){var u=-1,l=i.length,h=l-1;for(o=o===r?l:o;++u<o;){var g=Of(u,h),y=i[g];i[g]=i[u],i[u]=y}return i.length=o,i}var Bm=QO(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(GP,function(u,l,h,g){o.push(h?g.replace(KP,"$1"):l||u)}),o});function Lr(i){if(typeof i=="string"||Ze(i))return i;var o=i+"";return o=="0"&&1/i==-$t?"-0":o}function ri(i){if(i!=null){try{return ea.call(i)}catch{}try{return i+""}catch{}}return""}function eT(i,o){return or(AP,function(u){var l="_."+u[0];o&u[1]&&!Qo(i,l)&&i.push(l)}),i.sort()}function Hm(i){if(i instanceof ee)return i.clone();var o=new sr(i.__wrapped__,i.__chain__);return o.__actions__=Ue(i.__actions__),o.__index__=i.__index__,o.__values__=i.__values__,o}function rT(i,o,u){(u?ke(i,o,u):o===r)?o=1:o=Oe(X(o),0);var l=i==null?0:i.length;if(!l||o<1)return[];for(var h=0,g=0,y=C(sa(l/o));h<l;)y[g++]=cr(i,h,h+=o);return y}function tT(i){for(var o=-1,u=i==null?0:i.length,l=0,h=[];++o<u;){var g=i[o];g&&(h[l++]=g)}return h}function iT(){var i=arguments.length;if(!i)return[];for(var o=C(i-1),u=arguments[0],l=i;l--;)o[l-1]=arguments[l];return ct(Y(u)?Ue(u):[u],Ee(o,1))}var nT=J(function(i,o){return ye(i)?ro(i,Ee(o,1,ye,!0)):[]}),oT=J(function(i,o){var u=lr(o);return ye(u)&&(u=r),ye(i)?ro(i,Ee(o,1,ye,!0),B(u,2)):[]}),aT=J(function(i,o){var u=lr(o);return ye(u)&&(u=r),ye(i)?ro(i,Ee(o,1,ye,!0),r,u):[]});function sT(i,o,u){var l=i==null?0:i.length;return l?(o=u||o===r?1:X(o),cr(i,o<0?0:o,l)):[]}function uT(i,o,u){var l=i==null?0:i.length;return l?(o=u||o===r?1:X(o),o=l-o,cr(i,0,o<0?0:o)):[]}function cT(i,o){return i&&i.length?ga(i,B(o,3),!0,!0):[]}function lT(i,o){return i&&i.length?ga(i,B(o,3),!0):[]}function fT(i,o,u,l){var h=i==null?0:i.length;return h?(u&&typeof u!="number"&&ke(i,o,u)&&(u=0,l=h),iO(i,o,u,l)):[]}function zm(i,o,u){var l=i==null?0:i.length;if(!l)return-1;var h=u==null?0:X(u);return h<0&&(h=Oe(l+h,0)),Xo(i,B(o,3),h)}function $m(i,o,u){var l=i==null?0:i.length;if(!l)return-1;var h=l-1;return u!==r&&(h=X(u),h=u<0?Oe(l+h,0):xe(h,l-1)),Xo(i,B(o,3),h,!0)}function Ym(i){var o=i==null?0:i.length;return o?Ee(i,1):[]}function hT(i){var o=i==null?0:i.length;return o?Ee(i,$t):[]}function pT(i,o){var u=i==null?0:i.length;return u?(o=o===r?1:X(o),Ee(i,o)):[]}function dT(i){for(var o=-1,u=i==null?0:i.length,l={};++o<u;){var h=i[o];l[h[0]]=h[1]}return l}function Qm(i){return i&&i.length?i[0]:r}function vT(i,o,u){var l=i==null?0:i.length;if(!l)return-1;var h=u==null?0:X(u);return h<0&&(h=Oe(l+h,0)),wi(i,o,h)}function mT(i){var o=i==null?0:i.length;return o?cr(i,0,-1):[]}var gT=J(function(i){var o=de(i,Af);return o.length&&o[0]===i[0]?gf(o):[]}),yT=J(function(i){var o=lr(i),u=de(i,Af);return o===lr(u)?o=r:u.pop(),u.length&&u[0]===i[0]?gf(u,B(o,2)):[]}),bT=J(function(i){var o=lr(i),u=de(i,Af);return o=typeof o=="function"?o:r,o&&u.pop(),u.length&&u[0]===i[0]?gf(u,r,o):[]});function _T(i,o){return i==null?"":m1.call(i,o)}function lr(i){var o=i==null?0:i.length;return o?i[o-1]:r}function PT(i,o,u){var l=i==null?0:i.length;if(!l)return-1;var h=l;return u!==r&&(h=X(u),h=h<0?Oe(l+h,0):xe(h,l-1)),o===o?e1(i,o,h):Xo(i,Lv,h,!0)}function OT(i,o){return i&&i.length?am(i,X(o)):r}var TT=J(Xm);function Xm(i,o){return i&&i.length&&o&&o.length?Pf(i,o):i}function wT(i,o,u){return i&&i.length&&o&&o.length?Pf(i,o,B(u,2)):i}function ST(i,o,u){return i&&i.length&&o&&o.length?Pf(i,o,r,u):i}var CT=$r(function(i,o){var u=i==null?0:i.length,l=pf(i,o);return cm(i,de(o,function(h){return Yr(h,u)?+h:h}).sort(bm)),l});function AT(i,o){var u=[];if(!(i&&i.length))return u;var l=-1,h=[],g=i.length;for(o=B(o,3);++l<g;){var y=i[l];o(y,l,i)&&(u.push(y),h.push(l))}return cm(i,h),u}function Wf(i){return i==null?i:_1.call(i)}function ET(i,o,u){var l=i==null?0:i.length;return l?(u&&typeof u!="number"&&ke(i,o,u)?(o=0,u=l):(o=o==null?0:X(o),u=u===r?l:X(u)),cr(i,o,u)):[]}function LT(i,o){return ma(i,o)}function MT(i,o,u){return wf(i,o,B(u,2))}function qT(i,o){var u=i==null?0:i.length;if(u){var l=ma(i,o);if(l<u&&yr(i[l],o))return l}return-1}function xT(i,o){return ma(i,o,!0)}function jT(i,o,u){return wf(i,o,B(u,2),!0)}function IT(i,o){var u=i==null?0:i.length;if(u){var l=ma(i,o,!0)-1;if(yr(i[l],o))return l}return-1}function FT(i){return i&&i.length?fm(i):[]}function DT(i,o){return i&&i.length?fm(i,B(o,2)):[]}function kT(i){var o=i==null?0:i.length;return o?cr(i,1,o):[]}function RT(i,o,u){return i&&i.length?(o=u||o===r?1:X(o),cr(i,0,o<0?0:o)):[]}function VT(i,o,u){var l=i==null?0:i.length;return l?(o=u||o===r?1:X(o),o=l-o,cr(i,o<0?0:o,l)):[]}function NT(i,o){return i&&i.length?ga(i,B(o,3),!1,!0):[]}function WT(i,o){return i&&i.length?ga(i,B(o,3)):[]}var UT=J(function(i){return dt(Ee(i,1,ye,!0))}),GT=J(function(i){var o=lr(i);return ye(o)&&(o=r),dt(Ee(i,1,ye,!0),B(o,2))}),BT=J(function(i){var o=lr(i);return o=typeof o=="function"?o:r,dt(Ee(i,1,ye,!0),r,o)});function HT(i){return i&&i.length?dt(i):[]}function zT(i,o){return i&&i.length?dt(i,B(o,2)):[]}function $T(i,o){return o=typeof o=="function"?o:r,i&&i.length?dt(i,r,o):[]}function Uf(i){if(!(i&&i.length))return[];var o=0;return i=ut(i,function(u){if(ye(u))return o=Oe(u.length,o),!0}),of(o,function(u){return de(i,rf(u))})}function Km(i,o){if(!(i&&i.length))return[];var u=Uf(i);return o==null?u:de(u,function(l){return Xe(o,r,l)})}var YT=J(function(i,o){return ye(i)?ro(i,o):[]}),QT=J(function(i){return Cf(ut(i,ye))}),XT=J(function(i){var o=lr(i);return ye(o)&&(o=r),Cf(ut(i,ye),B(o,2))}),KT=J(function(i){var o=lr(i);return o=typeof o=="function"?o:r,Cf(ut(i,ye),r,o)}),JT=J(Uf);function ZT(i,o){return vm(i||[],o||[],eo)}function ew(i,o){return vm(i||[],o||[],no)}var rw=J(function(i){var o=i.length,u=o>1?i[o-1]:r;return u=typeof u=="function"?(i.pop(),u):r,Km(i,u)});function Jm(i){var o=v(i);return o.__chain__=!0,o}function tw(i,o){return o(i),i}function Ca(i,o){return o(i)}var iw=$r(function(i){var o=i.length,u=o?i[0]:0,l=this.__wrapped__,h=function(g){return pf(g,i)};return o>1||this.__actions__.length||!(l instanceof ee)||!Yr(u)?this.thru(h):(l=l.slice(u,+u+(o?1:0)),l.__actions__.push({func:Ca,args:[h],thisArg:r}),new sr(l,this.__chain__).thru(function(g){return o&&!g.length&&g.push(r),g}))});function nw(){return Jm(this)}function ow(){return new sr(this.value(),this.__chain__)}function aw(){this.__values__===r&&(this.__values__=hg(this.value()));var i=this.__index__>=this.__values__.length,o=i?r:this.__values__[this.__index__++];return{done:i,value:o}}function sw(){return this}function uw(i){for(var o,u=this;u instanceof fa;){var l=Hm(u);l.__index__=0,l.__values__=r,o?h.__wrapped__=l:o=l;var h=l;u=u.__wrapped__}return h.__wrapped__=i,o}function cw(){var i=this.__wrapped__;if(i instanceof ee){var o=i;return this.__actions__.length&&(o=new ee(this)),o=o.reverse(),o.__actions__.push({func:Ca,args:[Wf],thisArg:r}),new sr(o,this.__chain__)}return this.thru(Wf)}function lw(){return dm(this.__wrapped__,this.__actions__)}var fw=ya(function(i,o,u){ae.call(i,u)?++i[u]:Hr(i,u,1)});function hw(i,o,u){var l=Y(i)?Av:tO;return u&&ke(i,o,u)&&(o=r),l(i,B(o,3))}function pw(i,o){var u=Y(i)?ut:Kv;return u(i,B(o,3))}var dw=Sm(zm),vw=Sm($m);function mw(i,o){return Ee(Aa(i,o),1)}function gw(i,o){return Ee(Aa(i,o),$t)}function yw(i,o,u){return u=u===r?1:X(u),Ee(Aa(i,o),u)}function Zm(i,o){var u=Y(i)?or:pt;return u(i,B(o,3))}function eg(i,o){var u=Y(i)?k0:Xv;return u(i,B(o,3))}var bw=ya(function(i,o,u){ae.call(i,u)?i[u].push(o):Hr(i,u,[o])});function _w(i,o,u,l){i=Ge(i)?i:Fi(i),u=u&&!l?X(u):0;var h=i.length;return u<0&&(u=Oe(h+u,0)),xa(i)?u<=h&&i.indexOf(o,u)>-1:!!h&&wi(i,o,u)>-1}var Pw=J(function(i,o,u){var l=-1,h=typeof o=="function",g=Ge(i)?C(i.length):[];return pt(i,function(y){g[++l]=h?Xe(o,y,u):to(y,o,u)}),g}),Ow=ya(function(i,o,u){Hr(i,u,o)});function Aa(i,o){var u=Y(i)?de:im;return u(i,B(o,3))}function Tw(i,o,u,l){return i==null?[]:(Y(o)||(o=o==null?[]:[o]),u=l?r:u,Y(u)||(u=u==null?[]:[u]),sm(i,o,u))}var ww=ya(function(i,o,u){i[u?0:1].push(o)},function(){return[[],[]]});function Sw(i,o,u){var l=Y(i)?Zl:qv,h=arguments.length<3;return l(i,B(o,4),u,h,pt)}function Cw(i,o,u){var l=Y(i)?R0:qv,h=arguments.length<3;return l(i,B(o,4),u,h,Xv)}function Aw(i,o){var u=Y(i)?ut:Kv;return u(i,Ma(B(o,3)))}function Ew(i){var o=Y(i)?zv:_O;return o(i)}function Lw(i,o,u){(u?ke(i,o,u):o===r)?o=1:o=X(o);var l=Y(i)?K1:PO;return l(i,o)}function Mw(i){var o=Y(i)?J1:TO;return o(i)}function qw(i){if(i==null)return 0;if(Ge(i))return xa(i)?Ci(i):i.length;var o=je(i);return o==dr||o==vr?i.size:bf(i).length}function xw(i,o,u){var l=Y(i)?ef:wO;return u&&ke(i,o,u)&&(o=r),l(i,B(o,3))}var jw=J(function(i,o){if(i==null)return[];var u=o.length;return u>1&&ke(i,o[0],o[1])?o=[]:u>2&&ke(o[0],o[1],o[2])&&(o=[o[0]]),sm(i,Ee(o,1),[])}),Ea=p1||function(){return we.Date.now()};function Iw(i,o){if(typeof o!="function")throw new ar(c);return i=X(i),function(){if(--i<1)return o.apply(this,arguments)}}function rg(i,o,u){return o=u?r:o,o=i&&o==null?i.length:o,zr(i,pr,r,r,r,r,o)}function tg(i,o){var u;if(typeof o!="function")throw new ar(c);return i=X(i),function(){return--i>0&&(u=o.apply(this,arguments)),i<=1&&(o=r),u}}var Gf=J(function(i,o,u){var l=D;if(u.length){var h=lt(u,ji(Gf));l|=Te}return zr(i,l,o,u,h)}),ig=J(function(i,o,u){var l=D|U;if(u.length){var h=lt(u,ji(ig));l|=Te}return zr(o,l,i,u,h)});function ng(i,o,u){o=u?r:o;var l=zr(i,he,r,r,r,r,r,o);return l.placeholder=ng.placeholder,l}function og(i,o,u){o=u?r:o;var l=zr(i,Fe,r,r,r,r,r,o);return l.placeholder=og.placeholder,l}function ag(i,o,u){var l,h,g,y,P,w,L=0,M=!1,x=!1,k=!0;if(typeof i!="function")throw new ar(c);o=fr(o)||0,me(u)&&(M=!!u.leading,x="maxWait"in u,g=x?Oe(fr(u.maxWait)||0,o):g,k="trailing"in u?!!u.trailing:k);function N(be){var br=l,Kr=h;return l=h=r,L=be,y=i.apply(Kr,br),y}function H(be){return L=be,P=so(Z,o),M?N(be):y}function K(be){var br=be-w,Kr=be-L,Sg=o-br;return x?xe(Sg,g-Kr):Sg}function z(be){var br=be-w,Kr=be-L;return w===r||br>=o||br<0||x&&Kr>=g}function Z(){var be=Ea();if(z(be))return re(be);P=so(Z,K(be))}function re(be){return P=r,k&&l?N(be):(l=h=r,y)}function er(){P!==r&&mm(P),L=0,l=w=h=P=r}function Re(){return P===r?y:re(Ea())}function rr(){var be=Ea(),br=z(be);if(l=arguments,h=this,w=be,br){if(P===r)return H(w);if(x)return mm(P),P=so(Z,o),N(w)}return P===r&&(P=so(Z,o)),y}return rr.cancel=er,rr.flush=Re,rr}var Fw=J(function(i,o){return Qv(i,1,o)}),Dw=J(function(i,o,u){return Qv(i,fr(o)||0,u)});function kw(i){return zr(i,jl)}function La(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new ar(c);var u=function(){var l=arguments,h=o?o.apply(this,l):l[0],g=u.cache;if(g.has(h))return g.get(h);var y=i.apply(this,l);return u.cache=g.set(h,y)||g,y};return u.cache=new(La.Cache||Br),u}La.Cache=Br;function Ma(i){if(typeof i!="function")throw new ar(c);return function(){var o=arguments;switch(o.length){case 0:return!i.call(this);case 1:return!i.call(this,o[0]);case 2:return!i.call(this,o[0],o[1]);case 3:return!i.call(this,o[0],o[1],o[2])}return!i.apply(this,o)}}function Rw(i){return tg(2,i)}var Vw=SO(function(i,o){o=o.length==1&&Y(o[0])?de(o[0],Ke(B())):de(Ee(o,1),Ke(B()));var u=o.length;return J(function(l){for(var h=-1,g=xe(l.length,u);++h<g;)l[h]=o[h].call(this,l[h]);return Xe(i,this,l)})}),Bf=J(function(i,o){var u=lt(o,ji(Bf));return zr(i,Te,r,o,u)}),sg=J(function(i,o){var u=lt(o,ji(sg));return zr(i,We,r,o,u)}),Nw=$r(function(i,o){return zr(i,Nn,r,r,r,o)});function Ww(i,o){if(typeof i!="function")throw new ar(c);return o=o===r?o:X(o),J(i,o)}function Uw(i,o){if(typeof i!="function")throw new ar(c);return o=o==null?0:Oe(X(o),0),J(function(u){var l=u[o],h=mt(u,0,o);return l&&ct(h,l),Xe(i,this,h)})}function Gw(i,o,u){var l=!0,h=!0;if(typeof i!="function")throw new ar(c);return me(u)&&(l="leading"in u?!!u.leading:l,h="trailing"in u?!!u.trailing:h),ag(i,o,{leading:l,maxWait:o,trailing:h})}function Bw(i){return rg(i,1)}function Hw(i,o){return Bf(Ef(o),i)}function zw(){if(!arguments.length)return[];var i=arguments[0];return Y(i)?i:[i]}function $w(i){return ur(i,j)}function Yw(i,o){return o=typeof o=="function"?o:r,ur(i,j,o)}function Qw(i){return ur(i,A|j)}function Xw(i,o){return o=typeof o=="function"?o:r,ur(i,A|j,o)}function Kw(i,o){return o==null||Yv(i,o,Se(o))}function yr(i,o){return i===o||i!==i&&o!==o}var Jw=Oa(mf),Zw=Oa(function(i,o){return i>=o}),ti=em((function(){return arguments})())?em:function(i){return ge(i)&&ae.call(i,"callee")&&!Nv.call(i,"callee")},Y=C.isArray,eS=Pv?Ke(Pv):uO;function Ge(i){return i!=null&&qa(i.length)&&!Qr(i)}function ye(i){return ge(i)&&Ge(i)}function rS(i){return i===!0||i===!1||ge(i)&&De(i)==Wn}var gt=v1||rh,tS=Ov?Ke(Ov):cO;function iS(i){return ge(i)&&i.nodeType===1&&!uo(i)}function nS(i){if(i==null)return!0;if(Ge(i)&&(Y(i)||typeof i=="string"||typeof i.splice=="function"||gt(i)||Ii(i)||ti(i)))return!i.length;var o=je(i);if(o==dr||o==vr)return!i.size;if(ao(i))return!bf(i).length;for(var u in i)if(ae.call(i,u))return!1;return!0}function oS(i,o){return io(i,o)}function aS(i,o,u){u=typeof u=="function"?u:r;var l=u?u(i,o):r;return l===r?io(i,o,r,u):!!l}function Hf(i){if(!ge(i))return!1;var o=De(i);return o==Go||o==LP||typeof i.message=="string"&&typeof i.name=="string"&&!uo(i)}function sS(i){return typeof i=="number"&&Uv(i)}function Qr(i){if(!me(i))return!1;var o=De(i);return o==Bo||o==Qd||o==EP||o==qP}function ug(i){return typeof i=="number"&&i==X(i)}function qa(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=st}function me(i){var o=typeof i;return i!=null&&(o=="object"||o=="function")}function ge(i){return i!=null&&typeof i=="object"}var cg=Tv?Ke(Tv):fO;function uS(i,o){return i===o||yf(i,o,Ff(o))}function cS(i,o,u){return u=typeof u=="function"?u:r,yf(i,o,Ff(o),u)}function lS(i){return lg(i)&&i!=+i}function fS(i){if(YO(i))throw new $(s);return rm(i)}function hS(i){return i===null}function pS(i){return i==null}function lg(i){return typeof i=="number"||ge(i)&&De(i)==Gn}function uo(i){if(!ge(i)||De(i)!=Ur)return!1;var o=na(i);if(o===null)return!0;var u=ae.call(o,"constructor")&&o.constructor;return typeof u=="function"&&u instanceof u&&ea.call(u)==c1}var zf=wv?Ke(wv):hO;function dS(i){return ug(i)&&i>=-st&&i<=st}var fg=Sv?Ke(Sv):pO;function xa(i){return typeof i=="string"||!Y(i)&&ge(i)&&De(i)==Hn}function Ze(i){return typeof i=="symbol"||ge(i)&&De(i)==Ho}var Ii=Cv?Ke(Cv):dO;function vS(i){return i===r}function mS(i){return ge(i)&&je(i)==zn}function gS(i){return ge(i)&&De(i)==jP}var yS=Oa(_f),bS=Oa(function(i,o){return i<=o});function hg(i){if(!i)return[];if(Ge(i))return xa(i)?mr(i):Ue(i);if(Qn&&i[Qn])return K0(i[Qn]());var o=je(i),u=o==dr?sf:o==vr?Ko:Fi;return u(i)}function Xr(i){if(!i)return i===0?i:0;if(i=fr(i),i===$t||i===-$t){var o=i<0?-1:1;return o*wP}return i===i?i:0}function X(i){var o=Xr(i),u=o%1;return o===o?u?o-u:o:0}function pg(i){return i?Jt(X(i),0,Cr):0}function fr(i){if(typeof i=="number")return i;if(Ze(i))return Wo;if(me(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=me(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=xv(i);var u=e0.test(i);return u||t0.test(i)?I0(i.slice(2),u?2:8):ZP.test(i)?Wo:+i}function dg(i){return Er(i,Be(i))}function _S(i){return i?Jt(X(i),-st,st):i===0?i:0}function ne(i){return i==null?"":Je(i)}var PS=qi(function(i,o){if(ao(o)||Ge(o)){Er(o,Se(o),i);return}for(var u in o)ae.call(o,u)&&eo(i,u,o[u])}),vg=qi(function(i,o){Er(o,Be(o),i)}),ja=qi(function(i,o,u,l){Er(o,Be(o),i,l)}),OS=qi(function(i,o,u,l){Er(o,Se(o),i,l)}),TS=$r(pf);function wS(i,o){var u=Mi(i);return o==null?u:$v(u,o)}var SS=J(function(i,o){i=le(i);var u=-1,l=o.length,h=l>2?o[2]:r;for(h&&ke(o[0],o[1],h)&&(l=1);++u<l;)for(var g=o[u],y=Be(g),P=-1,w=y.length;++P<w;){var L=y[P],M=i[L];(M===r||yr(M,Ai[L])&&!ae.call(i,L))&&(i[L]=g[L])}return i}),CS=J(function(i){return i.push(r,xm),Xe(mg,r,i)});function AS(i,o){return Ev(i,B(o,3),Ar)}function ES(i,o){return Ev(i,B(o,3),vf)}function LS(i,o){return i==null?i:df(i,B(o,3),Be)}function MS(i,o){return i==null?i:Jv(i,B(o,3),Be)}function qS(i,o){return i&&Ar(i,B(o,3))}function xS(i,o){return i&&vf(i,B(o,3))}function jS(i){return i==null?[]:da(i,Se(i))}function IS(i){return i==null?[]:da(i,Be(i))}function $f(i,o,u){var l=i==null?r:Zt(i,o);return l===r?u:l}function FS(i,o){return i!=null&&Fm(i,o,nO)}function Yf(i,o){return i!=null&&Fm(i,o,oO)}var DS=Am(function(i,o,u){o!=null&&typeof o.toString!="function"&&(o=ra.call(o)),i[o]=u},Xf(He)),kS=Am(function(i,o,u){o!=null&&typeof o.toString!="function"&&(o=ra.call(o)),ae.call(i,o)?i[o].push(u):i[o]=[u]},B),RS=J(to);function Se(i){return Ge(i)?Hv(i):bf(i)}function Be(i){return Ge(i)?Hv(i,!0):vO(i)}function VS(i,o){var u={};return o=B(o,3),Ar(i,function(l,h,g){Hr(u,o(l,h,g),l)}),u}function NS(i,o){var u={};return o=B(o,3),Ar(i,function(l,h,g){Hr(u,h,o(l,h,g))}),u}var WS=qi(function(i,o,u){va(i,o,u)}),mg=qi(function(i,o,u,l){va(i,o,u,l)}),US=$r(function(i,o){var u={};if(i==null)return u;var l=!1;o=de(o,function(g){return g=vt(g,i),l||(l=g.length>1),g}),Er(i,jf(i),u),l&&(u=ur(u,A|q|j,DO));for(var h=o.length;h--;)Sf(u,o[h]);return u});function GS(i,o){return gg(i,Ma(B(o)))}var BS=$r(function(i,o){return i==null?{}:gO(i,o)});function gg(i,o){if(i==null)return{};var u=de(jf(i),function(l){return[l]});return o=B(o),um(i,u,function(l,h){return o(l,h[0])})}function HS(i,o,u){o=vt(o,i);var l=-1,h=o.length;for(h||(h=1,i=r);++l<h;){var g=i==null?r:i[Lr(o[l])];g===r&&(l=h,g=u),i=Qr(g)?g.call(i):g}return i}function zS(i,o,u){return i==null?i:no(i,o,u)}function $S(i,o,u,l){return l=typeof l=="function"?l:r,i==null?i:no(i,o,u,l)}var yg=Mm(Se),bg=Mm(Be);function YS(i,o,u){var l=Y(i),h=l||gt(i)||Ii(i);if(o=B(o,4),u==null){var g=i&&i.constructor;h?u=l?new g:[]:me(i)?u=Qr(g)?Mi(na(i)):{}:u={}}return(h?or:Ar)(i,function(y,P,w){return o(u,y,P,w)}),u}function QS(i,o){return i==null?!0:Sf(i,o)}function XS(i,o,u){return i==null?i:pm(i,o,Ef(u))}function KS(i,o,u,l){return l=typeof l=="function"?l:r,i==null?i:pm(i,o,Ef(u),l)}function Fi(i){return i==null?[]:af(i,Se(i))}function JS(i){return i==null?[]:af(i,Be(i))}function ZS(i,o,u){return u===r&&(u=o,o=r),u!==r&&(u=fr(u),u=u===u?u:0),o!==r&&(o=fr(o),o=o===o?o:0),Jt(fr(i),o,u)}function eC(i,o,u){return o=Xr(o),u===r?(u=o,o=0):u=Xr(u),i=fr(i),aO(i,o,u)}function rC(i,o,u){if(u&&typeof u!="boolean"&&ke(i,o,u)&&(o=u=r),u===r&&(typeof o=="boolean"?(u=o,o=r):typeof i=="boolean"&&(u=i,i=r)),i===r&&o===r?(i=0,o=1):(i=Xr(i),o===r?(o=i,i=0):o=Xr(o)),i>o){var l=i;i=o,o=l}if(u||i%1||o%1){var h=Gv();return xe(i+h*(o-i+j0("1e-"+((h+"").length-1))),o)}return Of(i,o)}var tC=xi(function(i,o,u){return o=o.toLowerCase(),i+(u?_g(o):o)});function _g(i){return Qf(ne(i).toLowerCase())}function Pg(i){return i=ne(i),i&&i.replace(n0,z0).replace(T0,"")}function iC(i,o,u){i=ne(i),o=Je(o);var l=i.length;u=u===r?l:Jt(X(u),0,l);var h=u;return u-=o.length,u>=0&&i.slice(u,h)==o}function nC(i){return i=ne(i),i&&RP.test(i)?i.replace(Jd,$0):i}function oC(i){return i=ne(i),i&&BP.test(i)?i.replace(Gl,"\\$&"):i}var aC=xi(function(i,o,u){return i+(u?"-":"")+o.toLowerCase()}),sC=xi(function(i,o,u){return i+(u?" ":"")+o.toLowerCase()}),uC=wm("toLowerCase");function cC(i,o,u){i=ne(i),o=X(o);var l=o?Ci(i):0;if(!o||l>=o)return i;var h=(o-l)/2;return Pa(ua(h),u)+i+Pa(sa(h),u)}function lC(i,o,u){i=ne(i),o=X(o);var l=o?Ci(i):0;return o&&l<o?i+Pa(o-l,u):i}function fC(i,o,u){i=ne(i),o=X(o);var l=o?Ci(i):0;return o&&l<o?Pa(o-l,u)+i:i}function hC(i,o,u){return u||o==null?o=0:o&&(o=+o),b1(ne(i).replace(Bl,""),o||0)}function pC(i,o,u){return(u?ke(i,o,u):o===r)?o=1:o=X(o),Tf(ne(i),o)}function dC(){var i=arguments,o=ne(i[0]);return i.length<3?o:o.replace(i[1],i[2])}var vC=xi(function(i,o,u){return i+(u?"_":"")+o.toLowerCase()});function mC(i,o,u){return u&&typeof u!="number"&&ke(i,o,u)&&(o=u=r),u=u===r?Cr:u>>>0,u?(i=ne(i),i&&(typeof o=="string"||o!=null&&!zf(o))&&(o=Je(o),!o&&Si(i))?mt(mr(i),0,u):i.split(o,u)):[]}var gC=xi(function(i,o,u){return i+(u?" ":"")+Qf(o)});function yC(i,o,u){return i=ne(i),u=u==null?0:Jt(X(u),0,i.length),o=Je(o),i.slice(u,u+o.length)==o}function bC(i,o,u){var l=v.templateSettings;u&&ke(i,o,u)&&(o=r),i=ne(i),o=ja({},o,l,qm);var h=ja({},o.imports,l.imports,qm),g=Se(h),y=af(h,g),P,w,L=0,M=o.interpolate||zo,x="__p += '",k=uf((o.escape||zo).source+"|"+M.source+"|"+(M===Zd?JP:zo).source+"|"+(o.evaluate||zo).source+"|$","g"),N="//# sourceURL="+(ae.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++E0+"]")+`
`;i.replace(k,function(z,Z,re,er,Re,rr){return re||(re=er),x+=i.slice(L,rr).replace(o0,Y0),Z&&(P=!0,x+=`' +
__e(`+Z+`) +
'`),Re&&(w=!0,x+=`';
`+Re+`;
__p += '`),re&&(x+=`' +
((__t = (`+re+`)) == null ? '' : __t) +
'`),L=rr+z.length,z}),x+=`';
`;var H=ae.call(o,"variable")&&o.variable;if(!H)x=`with (obj) {
`+x+`
}
`;else if(XP.test(H))throw new $(f);x=(w?x.replace(IP,""):x).replace(FP,"$1").replace(DP,"$1;"),x="function("+(H||"obj")+`) {
`+(H?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(w?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var K=Tg(function(){return ie(g,N+"return "+x).apply(r,y)});if(K.source=x,Hf(K))throw K;return K}function _C(i){return ne(i).toLowerCase()}function PC(i){return ne(i).toUpperCase()}function OC(i,o,u){if(i=ne(i),i&&(u||o===r))return xv(i);if(!i||!(o=Je(o)))return i;var l=mr(i),h=mr(o),g=jv(l,h),y=Iv(l,h)+1;return mt(l,g,y).join("")}function TC(i,o,u){if(i=ne(i),i&&(u||o===r))return i.slice(0,Dv(i)+1);if(!i||!(o=Je(o)))return i;var l=mr(i),h=Iv(l,mr(o))+1;return mt(l,0,h).join("")}function wC(i,o,u){if(i=ne(i),i&&(u||o===r))return i.replace(Bl,"");if(!i||!(o=Je(o)))return i;var l=mr(i),h=jv(l,mr(o));return mt(l,h).join("")}function SC(i,o){var u=yP,l=bP;if(me(o)){var h="separator"in o?o.separator:h;u="length"in o?X(o.length):u,l="omission"in o?Je(o.omission):l}i=ne(i);var g=i.length;if(Si(i)){var y=mr(i);g=y.length}if(u>=g)return i;var P=u-Ci(l);if(P<1)return l;var w=y?mt(y,0,P).join(""):i.slice(0,P);if(h===r)return w+l;if(y&&(P+=w.length-P),zf(h)){if(i.slice(P).search(h)){var L,M=w;for(h.global||(h=uf(h.source,ne(ev.exec(h))+"g")),h.lastIndex=0;L=h.exec(M);)var x=L.index;w=w.slice(0,x===r?P:x)}}else if(i.indexOf(Je(h),P)!=P){var k=w.lastIndexOf(h);k>-1&&(w=w.slice(0,k))}return w+l}function CC(i){return i=ne(i),i&&kP.test(i)?i.replace(Kd,r1):i}var AC=xi(function(i,o,u){return i+(u?" ":"")+o.toUpperCase()}),Qf=wm("toUpperCase");function Og(i,o,u){return i=ne(i),o=u?r:o,o===r?X0(i)?n1(i):W0(i):i.match(o)||[]}var Tg=J(function(i,o){try{return Xe(i,r,o)}catch(u){return Hf(u)?u:new $(u)}}),EC=$r(function(i,o){return or(o,function(u){u=Lr(u),Hr(i,u,Gf(i[u],i))}),i});function LC(i){var o=i==null?0:i.length,u=B();return i=o?de(i,function(l){if(typeof l[1]!="function")throw new ar(c);return[u(l[0]),l[1]]}):[],J(function(l){for(var h=-1;++h<o;){var g=i[h];if(Xe(g[0],this,l))return Xe(g[1],this,l)}})}function MC(i){return rO(ur(i,A))}function Xf(i){return function(){return i}}function qC(i,o){return i==null||i!==i?o:i}var xC=Cm(),jC=Cm(!0);function He(i){return i}function Kf(i){return tm(typeof i=="function"?i:ur(i,A))}function IC(i){return nm(ur(i,A))}function FC(i,o){return om(i,ur(o,A))}var DC=J(function(i,o){return function(u){return to(u,i,o)}}),kC=J(function(i,o){return function(u){return to(i,u,o)}});function Jf(i,o,u){var l=Se(o),h=da(o,l);u==null&&!(me(o)&&(h.length||!l.length))&&(u=o,o=i,i=this,h=da(o,Se(o)));var g=!(me(u)&&"chain"in u)||!!u.chain,y=Qr(i);return or(h,function(P){var w=o[P];i[P]=w,y&&(i.prototype[P]=function(){var L=this.__chain__;if(g||L){var M=i(this.__wrapped__),x=M.__actions__=Ue(this.__actions__);return x.push({func:w,args:arguments,thisArg:i}),M.__chain__=L,M}return w.apply(i,ct([this.value()],arguments))})}),i}function RC(){return we._===this&&(we._=l1),this}function Zf(){}function VC(i){return i=X(i),J(function(o){return am(o,i)})}var NC=Mf(de),WC=Mf(Av),UC=Mf(ef);function wg(i){return kf(i)?rf(Lr(i)):yO(i)}function GC(i){return function(o){return i==null?r:Zt(i,o)}}var BC=Em(),HC=Em(!0);function eh(){return[]}function rh(){return!1}function zC(){return{}}function $C(){return""}function YC(){return!0}function QC(i,o){if(i=X(i),i<1||i>st)return[];var u=Cr,l=xe(i,Cr);o=B(o),i-=Cr;for(var h=of(l,o);++u<i;)o(u);return h}function XC(i){return Y(i)?de(i,Lr):Ze(i)?[i]:Ue(Bm(ne(i)))}function KC(i){var o=++u1;return ne(i)+o}var JC=_a(function(i,o){return i+o},0),ZC=qf("ceil"),eA=_a(function(i,o){return i/o},1),rA=qf("floor");function tA(i){return i&&i.length?pa(i,He,mf):r}function iA(i,o){return i&&i.length?pa(i,B(o,2),mf):r}function nA(i){return Mv(i,He)}function oA(i,o){return Mv(i,B(o,2))}function aA(i){return i&&i.length?pa(i,He,_f):r}function sA(i,o){return i&&i.length?pa(i,B(o,2),_f):r}var uA=_a(function(i,o){return i*o},1),cA=qf("round"),lA=_a(function(i,o){return i-o},0);function fA(i){return i&&i.length?nf(i,He):0}function hA(i,o){return i&&i.length?nf(i,B(o,2)):0}return v.after=Iw,v.ary=rg,v.assign=PS,v.assignIn=vg,v.assignInWith=ja,v.assignWith=OS,v.at=TS,v.before=tg,v.bind=Gf,v.bindAll=EC,v.bindKey=ig,v.castArray=zw,v.chain=Jm,v.chunk=rT,v.compact=tT,v.concat=iT,v.cond=LC,v.conforms=MC,v.constant=Xf,v.countBy=fw,v.create=wS,v.curry=ng,v.curryRight=og,v.debounce=ag,v.defaults=SS,v.defaultsDeep=CS,v.defer=Fw,v.delay=Dw,v.difference=nT,v.differenceBy=oT,v.differenceWith=aT,v.drop=sT,v.dropRight=uT,v.dropRightWhile=cT,v.dropWhile=lT,v.fill=fT,v.filter=pw,v.flatMap=mw,v.flatMapDeep=gw,v.flatMapDepth=yw,v.flatten=Ym,v.flattenDeep=hT,v.flattenDepth=pT,v.flip=kw,v.flow=xC,v.flowRight=jC,v.fromPairs=dT,v.functions=jS,v.functionsIn=IS,v.groupBy=bw,v.initial=mT,v.intersection=gT,v.intersectionBy=yT,v.intersectionWith=bT,v.invert=DS,v.invertBy=kS,v.invokeMap=Pw,v.iteratee=Kf,v.keyBy=Ow,v.keys=Se,v.keysIn=Be,v.map=Aa,v.mapKeys=VS,v.mapValues=NS,v.matches=IC,v.matchesProperty=FC,v.memoize=La,v.merge=WS,v.mergeWith=mg,v.method=DC,v.methodOf=kC,v.mixin=Jf,v.negate=Ma,v.nthArg=VC,v.omit=US,v.omitBy=GS,v.once=Rw,v.orderBy=Tw,v.over=NC,v.overArgs=Vw,v.overEvery=WC,v.overSome=UC,v.partial=Bf,v.partialRight=sg,v.partition=ww,v.pick=BS,v.pickBy=gg,v.property=wg,v.propertyOf=GC,v.pull=TT,v.pullAll=Xm,v.pullAllBy=wT,v.pullAllWith=ST,v.pullAt=CT,v.range=BC,v.rangeRight=HC,v.rearg=Nw,v.reject=Aw,v.remove=AT,v.rest=Ww,v.reverse=Wf,v.sampleSize=Lw,v.set=zS,v.setWith=$S,v.shuffle=Mw,v.slice=ET,v.sortBy=jw,v.sortedUniq=FT,v.sortedUniqBy=DT,v.split=mC,v.spread=Uw,v.tail=kT,v.take=RT,v.takeRight=VT,v.takeRightWhile=NT,v.takeWhile=WT,v.tap=tw,v.throttle=Gw,v.thru=Ca,v.toArray=hg,v.toPairs=yg,v.toPairsIn=bg,v.toPath=XC,v.toPlainObject=dg,v.transform=YS,v.unary=Bw,v.union=UT,v.unionBy=GT,v.unionWith=BT,v.uniq=HT,v.uniqBy=zT,v.uniqWith=$T,v.unset=QS,v.unzip=Uf,v.unzipWith=Km,v.update=XS,v.updateWith=KS,v.values=Fi,v.valuesIn=JS,v.without=YT,v.words=Og,v.wrap=Hw,v.xor=QT,v.xorBy=XT,v.xorWith=KT,v.zip=JT,v.zipObject=ZT,v.zipObjectDeep=ew,v.zipWith=rw,v.entries=yg,v.entriesIn=bg,v.extend=vg,v.extendWith=ja,Jf(v,v),v.add=JC,v.attempt=Tg,v.camelCase=tC,v.capitalize=_g,v.ceil=ZC,v.clamp=ZS,v.clone=$w,v.cloneDeep=Qw,v.cloneDeepWith=Xw,v.cloneWith=Yw,v.conformsTo=Kw,v.deburr=Pg,v.defaultTo=qC,v.divide=eA,v.endsWith=iC,v.eq=yr,v.escape=nC,v.escapeRegExp=oC,v.every=hw,v.find=dw,v.findIndex=zm,v.findKey=AS,v.findLast=vw,v.findLastIndex=$m,v.findLastKey=ES,v.floor=rA,v.forEach=Zm,v.forEachRight=eg,v.forIn=LS,v.forInRight=MS,v.forOwn=qS,v.forOwnRight=xS,v.get=$f,v.gt=Jw,v.gte=Zw,v.has=FS,v.hasIn=Yf,v.head=Qm,v.identity=He,v.includes=_w,v.indexOf=vT,v.inRange=eC,v.invoke=RS,v.isArguments=ti,v.isArray=Y,v.isArrayBuffer=eS,v.isArrayLike=Ge,v.isArrayLikeObject=ye,v.isBoolean=rS,v.isBuffer=gt,v.isDate=tS,v.isElement=iS,v.isEmpty=nS,v.isEqual=oS,v.isEqualWith=aS,v.isError=Hf,v.isFinite=sS,v.isFunction=Qr,v.isInteger=ug,v.isLength=qa,v.isMap=cg,v.isMatch=uS,v.isMatchWith=cS,v.isNaN=lS,v.isNative=fS,v.isNil=pS,v.isNull=hS,v.isNumber=lg,v.isObject=me,v.isObjectLike=ge,v.isPlainObject=uo,v.isRegExp=zf,v.isSafeInteger=dS,v.isSet=fg,v.isString=xa,v.isSymbol=Ze,v.isTypedArray=Ii,v.isUndefined=vS,v.isWeakMap=mS,v.isWeakSet=gS,v.join=_T,v.kebabCase=aC,v.last=lr,v.lastIndexOf=PT,v.lowerCase=sC,v.lowerFirst=uC,v.lt=yS,v.lte=bS,v.max=tA,v.maxBy=iA,v.mean=nA,v.meanBy=oA,v.min=aA,v.minBy=sA,v.stubArray=eh,v.stubFalse=rh,v.stubObject=zC,v.stubString=$C,v.stubTrue=YC,v.multiply=uA,v.nth=OT,v.noConflict=RC,v.noop=Zf,v.now=Ea,v.pad=cC,v.padEnd=lC,v.padStart=fC,v.parseInt=hC,v.random=rC,v.reduce=Sw,v.reduceRight=Cw,v.repeat=pC,v.replace=dC,v.result=HS,v.round=cA,v.runInContext=T,v.sample=Ew,v.size=qw,v.snakeCase=vC,v.some=xw,v.sortedIndex=LT,v.sortedIndexBy=MT,v.sortedIndexOf=qT,v.sortedLastIndex=xT,v.sortedLastIndexBy=jT,v.sortedLastIndexOf=IT,v.startCase=gC,v.startsWith=yC,v.subtract=lA,v.sum=fA,v.sumBy=hA,v.template=bC,v.times=QC,v.toFinite=Xr,v.toInteger=X,v.toLength=pg,v.toLower=_C,v.toNumber=fr,v.toSafeInteger=_S,v.toString=ne,v.toUpper=PC,v.trim=OC,v.trimEnd=TC,v.trimStart=wC,v.truncate=SC,v.unescape=CC,v.uniqueId=KC,v.upperCase=AC,v.upperFirst=Qf,v.each=Zm,v.eachRight=eg,v.first=Qm,Jf(v,(function(){var i={};return Ar(v,function(o,u){ae.call(v.prototype,u)||(i[u]=o)}),i})(),{chain:!1}),v.VERSION=t,or(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){v[i].placeholder=v}),or(["drop","take"],function(i,o){ee.prototype[i]=function(u){u=u===r?1:Oe(X(u),0);var l=this.__filtered__&&!o?new ee(this):this.clone();return l.__filtered__?l.__takeCount__=xe(u,l.__takeCount__):l.__views__.push({size:xe(u,Cr),type:i+(l.__dir__<0?"Right":"")}),l},ee.prototype[i+"Right"]=function(u){return this.reverse()[i](u).reverse()}}),or(["filter","map","takeWhile"],function(i,o){var u=o+1,l=u==Yd||u==TP;ee.prototype[i]=function(h){var g=this.clone();return g.__iteratees__.push({iteratee:B(h,3),type:u}),g.__filtered__=g.__filtered__||l,g}}),or(["head","last"],function(i,o){var u="take"+(o?"Right":"");ee.prototype[i]=function(){return this[u](1).value()[0]}}),or(["initial","tail"],function(i,o){var u="drop"+(o?"":"Right");ee.prototype[i]=function(){return this.__filtered__?new ee(this):this[u](1)}}),ee.prototype.compact=function(){return this.filter(He)},ee.prototype.find=function(i){return this.filter(i).head()},ee.prototype.findLast=function(i){return this.reverse().find(i)},ee.prototype.invokeMap=J(function(i,o){return typeof i=="function"?new ee(this):this.map(function(u){return to(u,i,o)})}),ee.prototype.reject=function(i){return this.filter(Ma(B(i)))},ee.prototype.slice=function(i,o){i=X(i);var u=this;return u.__filtered__&&(i>0||o<0)?new ee(u):(i<0?u=u.takeRight(-i):i&&(u=u.drop(i)),o!==r&&(o=X(o),u=o<0?u.dropRight(-o):u.take(o-i)),u)},ee.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},ee.prototype.toArray=function(){return this.take(Cr)},Ar(ee.prototype,function(i,o){var u=/^(?:filter|find|map|reject)|While$/.test(o),l=/^(?:head|last)$/.test(o),h=v[l?"take"+(o=="last"?"Right":""):o],g=l||/^find/.test(o);h&&(v.prototype[o]=function(){var y=this.__wrapped__,P=l?[1]:arguments,w=y instanceof ee,L=P[0],M=w||Y(y),x=function(Z){var re=h.apply(v,ct([Z],P));return l&&k?re[0]:re};M&&u&&typeof L=="function"&&L.length!=1&&(w=M=!1);var k=this.__chain__,N=!!this.__actions__.length,H=g&&!k,K=w&&!N;if(!g&&M){y=K?y:new ee(this);var z=i.apply(y,P);return z.__actions__.push({func:Ca,args:[x],thisArg:r}),new sr(z,k)}return H&&K?i.apply(this,P):(z=this.thru(x),H?l?z.value()[0]:z.value():z)})}),or(["pop","push","shift","sort","splice","unshift"],function(i){var o=Jo[i],u=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",l=/^(?:pop|shift)$/.test(i);v.prototype[i]=function(){var h=arguments;if(l&&!this.__chain__){var g=this.value();return o.apply(Y(g)?g:[],h)}return this[u](function(y){return o.apply(Y(y)?y:[],h)})}}),Ar(ee.prototype,function(i,o){var u=v[o];if(u){var l=u.name+"";ae.call(Li,l)||(Li[l]=[]),Li[l].push({name:o,func:u})}}),Li[ba(r,U).name]=[{name:"wrapper",func:r}],ee.prototype.clone=C1,ee.prototype.reverse=A1,ee.prototype.value=E1,v.prototype.at=iw,v.prototype.chain=nw,v.prototype.commit=ow,v.prototype.next=aw,v.prototype.plant=uw,v.prototype.reverse=cw,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=lw,v.prototype.first=v.prototype.head,Qn&&(v.prototype[Qn]=sw),v},ft=o1();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(we._=ft,define(function(){return ft})):Yt?((Yt.exports=ft)._=ft,Xl._=ft):we._=ft}).call(n)}),vP=class extends Set{constructor(n,e=!1){super(n),this.valuesAsFlags=e}};function Ro(n){if(n instanceof Map)return Object.fromEntries([...n.entries()].map(([e,r])=>[e,Ro(r)]));if(n instanceof Set)return Array.from(n.values()).map(Ro);if(n instanceof vP)return{values:[...n.values()],valuesAsFlags:n.valuesAsFlags};if(typeof n=="object"){let e={};return Object.entries(n).forEach(([r,t])=>{e[r]=Ro(t)}),e}else return n}var zX=Bd(Hd(),1);var Mz=Bd(Hd(),1);function _i(n,e){if(typeof n!="object")throw new Error(`Cannot merge into non-object objectToMergeWith. Received: ${JSON.stringify(n)}`);if(typeof e!="object")throw new Error(`Cannot merge using non-object objectToMergeWith. Received: ${JSON.stringify(e)}`);let r=(0,Mz.cloneDeep)(n);for(let[t,a]of Object.entries(e))typeof a!="object"||a instanceof Set||r[t]===void 0?r[t]=a:r[t]=_i(r[t],a);return r}function mP(n,e){if(!(n===void 0||typeof n!="object"))for(let r of Object.keys(n)){if(r===e)return n[r];let t=n[r];if(typeof t=="object"){let a=mP(t,e);if(a!==void 0)return a}}}var Gd="@composite:",qz="@inherit:",xz=class{constructor(n,e,r){this.tiledClassToMembersMap=n,this.enumNameToValuesMap=e,this.parserOptions=r,this.memoiser=new Map}flattenMembers(n,e){return this.memoiser.has(n)?{[n]:this.memoiser.get(n)}:(this.memoiser.set(n,e.reduce((r,t)=>({...r,...this.flattenMemberProperty(t)}),{})),{[n]:this.memoiser.get(n)})}flattenMemberProperty(n){let e=n.propertyType??n.propertytype;if(n.type==="class"){if(!this.memoiser.has(e)){let a=this.tiledClassToMembersMap.get(e).reduce((s,c)=>_i(this.flattenMemberProperty(c),s),{});this.memoiser.set(e,a)}let r=this.memoiser.get(e),t=_i(r,this.flattenValue(n.value,r));return this.checkIfShouldFlatten(n.name)?t:{[n.name.replace(Gd,"")]:t}}else return this.enumNameToValuesMap.has(e)?this.enumNameToValuesMap.get(e).valuesAsFlags?{[n.name]:new Set(n.value.split(",").filter(r=>r!==""))}:{[n.name]:n.value}:{[n.name]:n.value}}get memoisedFlattenedProperties(){return this.memoiser}flattenValue(n,e){return Object.entries(n).reduce((r,[t,a])=>{if(typeof a!="object")return mP(e,t)instanceof Set?_i({[t]:new Set(a.split(",").filter(s=>s!==""))},r):_i({[t]:a},r);if(this.checkIfShouldFlatten(t))return _i(this.flattenValue(a,e),r);{let s=t.replace(Gd,"");return _i({[s]:this.flattenValue(a,e)},r)}},{})}checkIfShouldFlatten(n){return this.parserOptions?.defaultComposite===!0?n.startsWith(qz):!n.startsWith(Gd)}},pP=Bd(Hd(),1),jz=class{constructor(n){this.flattener=n}flattenPropertiesOnObject(n){return{...this.flattener.memoisedFlattenedProperties.get(n.class??n.type),...n.properties?.reduce((e,r)=>({...e,...this.flattener.flattenMemberProperty(r)}),{}),name:n.name,id:n.id,class:n.class??n.type??null,x:n.x,y:n.y}}flattenPropertiesOnTile(n){return{...this.flattener.memoisedFlattenedProperties.get(n.class??n.type),...n.properties?.reduce((e,r)=>({...e,...this.flattener.flattenMemberProperty(r)}),{}),id:n.id,class:n.class??n.type??null}}getCustomTypesMap(){return new Map([...this.flattener.memoisedFlattenedProperties.entries()].map(([n,e])=>[n,(0,pP.cloneDeep)(e)]))}getEnumsMap(){return new Map([...this.flattener.enumNameToValuesMap.entries()].map(([n,e])=>[n,(0,pP.cloneDeep)(e)]))}toJSON(){return JSON.stringify({customTypes:Ro(this.getCustomTypesMap()),enums:Ro(this.getEnumsMap())},null,4)}};function Iz(n,e){let r=new Map(n.propertyTypes.filter(s=>s.type==="enum").map(s=>[s.name,new vP(s.values,s.valuesAsFlags)])),t=new Map(n.propertyTypes.filter(s=>s.type==="class").map(s=>[s.name,s.members])),a=new xz(t,r,e);return t.forEach((s,c)=>{a.flattenMembers(c,s)}),new jz(a)}var gP={parse:Iz};var zt=class{constructor(e,r){this.phaserTile=e;this.tiledProject=r}getProperty(e){let r={};if(this.tiledProject){let a=gP.parse(this.tiledProject),s=this.getType();if(s){let c=a.getCustomTypesMap()?.get(s);if(c)for(let[f,p]of Object.entries(c))r[f]=p}}return this.phaserTile.properties[e]??r[e]}hasProperty(e){return this.getProperty(e)!=null}getType(){return this.phaserTile.tileset?.tileData[this.phaserTile.index-1]?.type}};var kn=class{constructor(e,r){this.phaserTilemapLayer=e;this.tiledProject=r}getName(){return this.phaserTilemapLayer.layer.name}getProperty(e){return this.phaserTilemapLayer.layer.properties?.find(a=>a.name==e)?.value}hasProperty(e){return this.getProperty(e)!=null}isCharLayer(){return this.hasProperty(In)}getData(){return this.phaserTilemapLayer.layer.data.map(e=>e.map(r=>new zt(r,this.tiledProject)))}};var Vo=class{constructor(e,r){this.phaserTilemap=e;this.tiledProject=r;for(let t of this.phaserTilemap.layers)if(t.tilemapLayer==null)throw new Error(`Error initializing tilemap. Layer '${t.name}' has no 'tilemapLayer'. This can happen if you call 'createLayer' with the wrong layer ID.`)}getTileWidth(){return this.phaserTilemap.tileWidth}getTileHeight(){return this.phaserTilemap.tileHeight}getWidth(){return this.phaserTilemap.width}getHeight(){return this.phaserTilemap.height}getOrientation(){return this.phaserTilemap.orientation==Phaser.Tilemaps.Orientation.ISOMETRIC.toString()?"isometric":"orthogonal"}getLayers(){return this.phaserTilemap.layers.map(e=>new kn(e.tilemapLayer,this.tiledProject))}hasTileAt(e,r,t){return!!this.phaserTilemap.hasTileAt(e,r,t)}getTileAt(e,r,t){let a=this.phaserTilemap.getTileAt(e,r,!1,t);if(a)return new zt(a,this.tiledProject)}};var ql=class{constructor(e,r="orthogonal",t="ge_collide"){this.map=e;this.orientation=r;this.layerMap=new Map;this.layers=[];let a=-1,s=-1;Object.entries(e).map(([c,f])=>{let p=f.data[0]?.length,m=f.data.length;if(a!==-1&&a!==p||s!==-1&&s!==m)throw new Error("All tilemap layers must have the same dimensions.");a=p,s=m;let O=[];for(let q=0;q<f.data.length;q++){let j=[];for(let I=0;I<f.data[q].length;I++){let F=new $d(f.data[q][I]===1,t);j.push(F)}O.push(j)}let A=new zd(c,O,f.isCharLayer);this.layers.push(A),this.layerMap.set(c,A)})}getWidth(){return Object.values(this.map)[0]?.data[0]?.length||0}getHeight(){return Object.values(this.map)[0]?.data.length||0}getOrientation(){return this.orientation}getLayers(){return this.layers}hasTileAt(e,r,t){return!t||!this.layerMap.get(t)?!1:e>=0&&e<this.getWidth()&&r>=0&&r<this.getHeight()}getTileAt(e,r,t){if(!t)return;let a=this.layerMap.get(t);if(a)return a.getData()[r][e]}},zd=class{constructor(e,r,t=!1){this.name=e;this.tiles=r;this.isCharLayerInternal=t}getName(){return this.name}getProperty(e){if(e==="ge_charLayer"&&this.isCharLayerInternal)return this.name}hasProperty(e){return e==="ge_charLayer"&&this.isCharLayerInternal}getData(){return this.tiles}isCharLayer(){return this.isCharLayerInternal}},$d=class{constructor(e,r){this.isBlocking=e;this.collisionPropertyName=r}getProperty(e){return e===this.collisionPropertyName?this.isBlocking:!1}hasProperty(e){return e===this.collisionPropertyName}};var Rn=class{constructor(e,r){this.props={};let t=e.find(s=>{if(!s.tiles)return!1;let c=s.firstgid??0;return!!s.tiles.find(p=>p.id+c===r)});if(!t)return;let a=t.tiles?.find(s=>s.id+(t.firstgid??0)===r);if(a?.properties)for(let s of a.properties)s.name&&(this.props[s.name]=s.value)}getProperty(e){return this.props[e]}hasProperty(e){return this.props[e]!==void 0}};var Vn=class{constructor(e,r){this.layer=r;this.data=[];if(this.data=[],this.layer.data)for(let t=0;t<(this.layer.height||0);t++){let a=[];for(let s=0;s<(this.layer.width||0);s++){let c=this.layer.data[t*(this.layer.width||0)+s];c!==void 0?a.push(new Rn(e,c)):a.push(void 0)}this.data.push(a)}}getName(){return this.layer.name}getProperty(e){return this.layer.properties?.find(r=>r.name===e)?.value}hasProperty(e){return this.getProperty(e)!==void 0}getData(){return this.data}isCharLayer(){return this.hasProperty("ge_charLayer")}};var xl=class{constructor(e){this.rawTilemap=e;this.layers=[];this.layers=this.rawTilemap.layers?.map(r=>new Vn(this.rawTilemap.tilesets,r))}hasTileAt(e,r,t){if(e<0||e>=this.rawTilemap.width||r<0||r>=this.rawTilemap.height||!this.rawTilemap.layers)return!1;let a=this.rawTilemap.layers.find(c=>c.name===t);if(!a)return!1;let s=r*this.rawTilemap.width+e;return a.data[s]>0}getTileAt(e,r,t){if(e<0||e>=this.rawTilemap.width||r<0||r>=this.rawTilemap.height||!this.rawTilemap.layers)return;let a=this.layers.find(s=>s.getName()===t);if(a)return a.getData()[r][e]}getOrientation(){return this.rawTilemap.orientation}getLayers(){return this.layers}getWidth(){return this.rawTilemap.width}getHeight(){return this.rawTilemap.height}};var No=class n{constructor(e){this.scene=e;this.geHeadless=new ko(!1);this.isCreatedInternal=!1;n.welcomeMessagePrinted||(console.log(`Using GridEngine Phaser Plugin v${_l}`),n.welcomeMessagePrinted=!0),this.scene.sys.events.once("boot",this.boot,this)}static{this.welcomeMessagePrinted=!1}boot(){this.scene.sys.events.on("update",this.update,this)}getCharLayer(e){return this.geHeadless.getCharLayer(e)}getTransition(e,r){return this.geHeadless.getTransition(e,r)}setTransition(e,r,t){this.geHeadless.setTransition(e,r,t)}create(e,r){this.geHeadless.create(new Vo(e,r.tiledProject),r),this.isCreatedInternal=!0,this.gridCharacters=new Map;let t=this.setConfigDefaults(r);this.config=t,this.gridTilemap=new gi(e),this.addCharacters()}getPosition(e){return this.geHeadless.getPosition(e)}move(e,r){this.geHeadless.move(e,r)}moveRandomly(e,r=0,t=-1){this.geHeadless.moveRandomly(e,r,t)}getMovement(e){return this.geHeadless.getMovement(e)}moveTo(e,r,t){return this.geHeadless.moveTo(e,r,t)}stopMovement(e){this.geHeadless.stopMovement(e)}setSpeed(e,r){this.geHeadless.setSpeed(e,r)}getSpeed(e){return this.geHeadless.getSpeed(e)}setContainer(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.setContainer(r)}getContainer(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getContainer()}getOffsetX(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getOffsetX()}setOffsetX(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.setOffsetX(r)}getOffsetY(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getOffsetY()}setOffsetY(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.setOffsetY(r)}getDepthOffset(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getDepthOffset()}collidesWithTiles(e){return this.geHeadless.collidesWithTiles(e)}getWalkingAnimationMapping(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getAnimation()?.getWalkingAnimationMapping()}hasLayerOverlay(){return this.initGuard(),!!this.config?.layerOverlay}setWalkingAnimationMapping(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.getAnimation()?.setWalkingAnimationMapping(r)}update(e,r){if(this.isCreatedInternal&&this.gridCharacters)for(let[t,a]of this.gridCharacters)a.update(r);this.geHeadless.update(e,r)}addCharacter(e){this.geHeadless.addCharacter(e),this.addCharacterInternal(e)}hasCharacter(e){return this.geHeadless.hasCharacter(e)}removeCharacter(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);r.destroy(),this.gridCharacters?.delete(e),this.geHeadless.removeCharacter(e)}removeAllCharacters(){if(this.initGuard(),!!this.gridCharacters){for(let e of this.gridCharacters.keys())this.removeCharacter(e);this.geHeadless.removeAllCharacters()}}getAllCharacters(e){return this.geHeadless.getAllCharacters(e)}getLabels(e){return this.geHeadless.getLabels(e)}addLabels(e,r){this.geHeadless.addLabels(e,r)}removeLabels(e,r){this.geHeadless.removeLabels(e,r)}clearLabels(e){this.geHeadless.clearLabels(e)}follow(e,r,t,a){let s;t===void 0?s={distance:0,closestPointIfBlocked:!1}:typeof t=="number"?(s={distance:t,closestPointIfBlocked:!1},a&&(s.closestPointIfBlocked=!0)):s=t,this.geHeadless.follow(e,r,s)}isMoving(e){return this.geHeadless.isMoving(e)}getFacingDirection(e){return this.geHeadless.getFacingDirection(e)}getFacingPosition(e){return this.geHeadless.getFacingPosition(e)}turnTowards(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.turnTowards(r),this.geHeadless.turnTowards(e,r)}getCharactersAt(e,r){return this.geHeadless.getCharactersAt(e,r)}setPosition(e,r,t){this.geHeadless.setPosition(e,r,t)}getSprite(e){this.initGuard();let r=this.gridCharacters?.get(e);if(!r)throw this.createCharUnknownErr(e);return r.getSprite()}setSprite(e,r){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);r.setOrigin(0,0),t.setSprite(r)}isBlocked(e,r,t=["geDefault"]){return this.geHeadless.isBlocked(e,r,t)}isTileBlocked(e,r){return this.geHeadless.isTileBlocked(e,r)}getCollisionGroups(e){return this.geHeadless.getCollisionGroups(e)}setCollisionGroups(e,r){this.geHeadless.setCollisionGroups(e,r)}getIgnoreCollisionGroups(e){return this.geHeadless.getIgnoreCollisionGroups(e)}setIgnoreCollisionGroups(e,r){this.geHeadless.setIgnoreCollisionGroups(e,r)}getTilePosInDirection(e,r,t){return this.geHeadless.getTilePosInDirection(e,r,t)}findShortestPath(e,r,t={}){return this.geHeadless.findShortestPath(e,r,t)}steppedOn(e,r,t){return this.geHeadless.steppedOn(e,r,t)}characterShifted(){return this.geHeadless.characterShifted()}movementStarted(){return this.geHeadless.movementStarted()}movementStopped(){return this.geHeadless.movementStopped()}directionChanged(){return this.geHeadless.directionChanged()}positionChangeStarted(){return this.geHeadless.positionChangeStarted()}positionChangeFinished(){return this.geHeadless.positionChangeFinished()}getMovementProgress(e){return this.geHeadless.getMovementProgress(e)}rebuildTileCollisionCache(e,r,t,a){this.geHeadless.rebuildTileCollisionCache(e,r,t,a)}addQueueMovements(e,r,t){this.geHeadless.addQueueMovements(e,r,t)}getEnqueuedMovements(e){return this.geHeadless.getEnqueuedMovements(e)}queueMovementFinished(){return this.geHeadless.queueMovementFinished()}clearEnqueuedMovements(e){return this.geHeadless.clearEnqueuedMovements(e)}getState(){return{characters:this.geHeadless.getState().characters.map(e=>({...e,offsetX:this.getOffsetX(e.id),offsetY:this.getOffsetY(e.id)}))}}setState(e){if(this.geHeadless.setState(e),this.gridCharacters)for(let r of e.characters){let t=this.gridCharacters.get(r.id);t&&(t.setOffsetX(r.offsetX),t.setOffsetY(r.offsetY))}}getTileCost(e,r,t){return this.initGuard(),this.geHeadless.getTileCost(e,r,t)}revertCurrentMovement(e){this.geHeadless.revertCurrentMovement(e)}isCurrentMovementReverted(e){return this.geHeadless.isCurrentMovementReverted(e)}setConfigDefaults(e){return{collisionTilePropertyName:"ge_collide",numberOfDirections:4,characterCollisionStrategy:"BLOCK_TWO_TILES",layerOverlay:!1,cacheTileCollisions:!1,...e}}initGuard(){if(!this.isCreatedInternal)throw this.createUninitializedErr()}createUninitializedErr(){throw new Error("GridEngine not initialized. You need to call create() first.")}addCharacters(){this.config?.characters.forEach(e=>this.addCharacterInternal(e))}createCharUnknownErr(e){return new Error(`Character unknown: ${e}`)}addCharacterInternal(e){if(this.initGuard(),!this.gridTilemap)throw this.createUninitializedErr();if(!this.config)throw this.createUninitializedErr();let r=new al(e,this.scene,this.gridTilemap,this.config.layerOverlay,this.geHeadless);this.gridCharacters?.set(e.id,r)}};var Fz=No;0&&(module.exports={ArrayTilemap,CharacterShiftAction,CollisionStrategy,Direction,GridEngine,GridEngineHeadless,MoveToResult,NoPathFoundStrategy,NumberOfDirections,PathBlockedStrategy,PhaserTile,PhaserTileLayer,PhaserTilemap,QueuedPathBlockedStrategy,TiledLayer,TiledTile,TiledTilemap,directionFromPos});
/*! Bundled license information:

tiled-property-flattener/dist/tiled_property_flattener.min.js:
  (*! Bundled license information:
  
  lodash/lodash.js:
    (**
     * @license
     * Lodash <https://lodash.com/>
     * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
     * Released under MIT license <https://lodash.com/license>
     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
     * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     *)
  *)
*/
