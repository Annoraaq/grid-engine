var Vx=Object.create;var ka=Object.defineProperty;var Nx=Object.getOwnPropertyDescriptor;var Wx=Object.getOwnPropertyNames;var Ux=Object.getPrototypeOf,Gx=Object.prototype.hasOwnProperty;var _=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Bx=(r,e)=>{for(var t in e)ka(r,t,{get:e[t],enumerable:!0})},ib=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Wx(e))!Gx.call(r,n)&&n!==t&&ka(r,n,{get:()=>e[n],enumerable:!(i=Nx(e,n))||i.enumerable});return r};var gt=(r,e,t)=>(t=r!=null?Vx(Ux(r)):{},ib(e||!r||!r.__esModule?ka(t,"default",{value:r,enumerable:!0}):t,r)),Hx=r=>ib(ka({},"__esModule",{value:!0}),r);var le=_(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.isFunction=void 0;function Kx(r){return typeof r=="function"}Da.isFunction=Kx});var ai=_(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.createErrorClass=void 0;function Xx(r){var e=function(i){Error.call(i),i.stack=new Error().stack},t=r(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Ra.createErrorClass=Xx});var hp=_(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.UnsubscriptionError=void 0;var Jx=ai();za.UnsubscriptionError=Jx.createErrorClass(function(r){return function(t){r(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(i,n){return n+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}})});var zr=_(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.arrRemove=void 0;function Zx(r,e){if(r){var t=r.indexOf(e);0<=t&&r.splice(t,1)}}Va.arrRemove=Zx});var Mt=_(bt=>{"use strict";var sb=bt&&bt.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ab=bt&&bt.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},ub=bt&&bt.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(bt,"__esModule",{value:!0});bt.isSubscription=bt.EMPTY_SUBSCRIPTION=bt.Subscription=void 0;var ds=le(),fp=hp(),cb=zr(),pp=function(){function r(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var e,t,i,n,s;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var l=sb(u),f=l.next();!f.done;f=l.next()){var p=f.value;p.remove(this)}}catch(M){e={error:M}}finally{try{f&&!f.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else u.remove(this);var v=this.initialTeardown;if(ds.isFunction(v))try{v()}catch(M){s=M instanceof fp.UnsubscriptionError?M.errors:[M]}var b=this._finalizers;if(b){this._finalizers=null;try{for(var T=sb(b),S=T.next();!S.done;S=T.next()){var q=S.value;try{lb(q)}catch(M){s=s??[],M instanceof fp.UnsubscriptionError?s=ub(ub([],ab(s)),ab(M.errors)):s.push(M)}}}catch(M){i={error:M}}finally{try{S&&!S.done&&(n=T.return)&&n.call(T)}finally{if(i)throw i.error}}}if(s)throw new fp.UnsubscriptionError(s)}},r.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)lb(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},r.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},r.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},r.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&cb.arrRemove(t,e)},r.prototype.remove=function(e){var t=this._finalizers;t&&cb.arrRemove(t,e),e instanceof r&&e._removeParent(this)},r.EMPTY=function(){var e=new r;return e.closed=!0,e}(),r}();bt.Subscription=pp;bt.EMPTY_SUBSCRIPTION=pp.EMPTY;function eM(r){return r instanceof pp||r&&"closed"in r&&ds.isFunction(r.remove)&&ds.isFunction(r.add)&&ds.isFunction(r.unsubscribe)}bt.isSubscription=eM;function lb(r){ds.isFunction(r)?r():r.unsubscribe()}});var xn=_(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.config=void 0;Na.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}});var dp=_(lr=>{"use strict";var hb=lr&&lr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},fb=lr&&lr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(lr,"__esModule",{value:!0});lr.timeoutProvider=void 0;lr.timeoutProvider={setTimeout:function(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];var n=lr.timeoutProvider.delegate;return n?.setTimeout?n.setTimeout.apply(n,fb([r,e],hb(t))):setTimeout.apply(void 0,fb([r,e],hb(t)))},clearTimeout:function(r){var e=lr.timeoutProvider.delegate;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0}});var vp=_(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.reportUnhandledError=void 0;var tM=xn(),rM=dp();function iM(r){rM.timeoutProvider.setTimeout(function(){var e=tM.config.onUnhandledError;if(e)e(r);else throw r})}Wa.reportUnhandledError=iM});var Ke=_(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.noop=void 0;function nM(){}Ua.noop=nM});var pb=_(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.createNotification=hr.nextNotification=hr.errorNotification=hr.COMPLETE_NOTIFICATION=void 0;hr.COMPLETE_NOTIFICATION=function(){return Ga("C",void 0,void 0)}();function oM(r){return Ga("E",void 0,r)}hr.errorNotification=oM;function sM(r){return Ga("N",r,void 0)}hr.nextNotification=sM;function Ga(r,e,t){return{kind:r,value:e,error:t}}hr.createNotification=Ga});var Ba=_(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.captureError=Mn.errorContext=void 0;var db=xn(),Ki=null;function aM(r){if(db.config.useDeprecatedSynchronousErrorHandling){var e=!Ki;if(e&&(Ki={errorThrown:!1,error:null}),r(),e){var t=Ki,i=t.errorThrown,n=t.error;if(Ki=null,i)throw n}}else r()}Mn.errorContext=aM;function uM(r){db.config.useDeprecatedSynchronousErrorHandling&&Ki&&(Ki.errorThrown=!0,Ki.error=r)}Mn.captureError=uM});var Ln=_(Xt=>{"use strict";var yb=Xt&&Xt.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Xt,"__esModule",{value:!0});Xt.EMPTY_OBSERVER=Xt.SafeSubscriber=Xt.Subscriber=void 0;var cM=le(),vb=Mt(),bp=xn(),lM=vp(),mb=Ke(),mp=pb(),hM=dp(),fM=Ba(),gb=function(r){yb(e,r);function e(t){var i=r.call(this)||this;return i.isStopped=!1,t?(i.destination=t,vb.isSubscription(t)&&t.add(i)):i.destination=Xt.EMPTY_OBSERVER,i}return e.create=function(t,i,n){return new bb(t,i,n)},e.prototype.next=function(t){this.isStopped?gp(mp.nextNotification(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?gp(mp.errorNotification(t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?gp(mp.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(vb.Subscription);Xt.Subscriber=gb;var pM=Function.prototype.bind;function yp(r,e){return pM.call(r,e)}var dM=function(){function r(e){this.partialObserver=e}return r.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(i){Ha(i)}},r.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(i){Ha(i)}else Ha(e)},r.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){Ha(t)}},r}(),bb=function(r){yb(e,r);function e(t,i,n){var s=r.call(this)||this,u;if(cM.isFunction(t)||!t)u={next:t??void 0,error:i??void 0,complete:n??void 0};else{var l;s&&bp.config.useDeprecatedNextContext?(l=Object.create(t),l.unsubscribe=function(){return s.unsubscribe()},u={next:t.next&&yp(t.next,l),error:t.error&&yp(t.error,l),complete:t.complete&&yp(t.complete,l)}):u=t}return s.destination=new dM(u),s}return e}(gb);Xt.SafeSubscriber=bb;function Ha(r){bp.config.useDeprecatedSynchronousErrorHandling?fM.captureError(r):lM.reportUnhandledError(r)}function vM(r){throw r}function gp(r,e){var t=bp.config.onStoppedNotification;t&&hM.timeoutProvider.setTimeout(function(){return t(r,e)})}Xt.EMPTY_OBSERVER={closed:!0,next:mb.noop,error:vM,complete:mb.noop}});var vs=_($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.observable=void 0;$a.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var Xe=_(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.identity=void 0;function mM(r){return r}Ya.identity=mM});var ms=_(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});jn.pipeFromArray=jn.pipe=void 0;var yM=Xe();function gM(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return _b(r)}jn.pipe=gM;function _b(r){return r.length===0?yM.identity:r.length===1?r[0]:function(t){return r.reduce(function(i,n){return n(i)},t)}}jn.pipeFromArray=_b});var fe=_(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.Observable=void 0;var Pp=Ln(),bM=Mt(),_M=vs(),PM=ms(),wM=xn(),_p=le(),OM=Ba(),TM=function(){function r(e){e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,i){var n=this,s=CM(e)?e:new Pp.SafeSubscriber(e,t,i);return OM.errorContext(function(){var u=n,l=u.operator,f=u.source;s.add(l?l.call(s,f):f?n._subscribe(s):n._trySubscribe(s))}),s},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},r.prototype.forEach=function(e,t){var i=this;return t=Pb(t),new t(function(n,s){var u=new Pp.SafeSubscriber({next:function(l){try{e(l)}catch(f){s(f),u.unsubscribe()}},error:s,complete:n});i.subscribe(u)})},r.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},r.prototype[_M.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return PM.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=Pb(e),new e(function(i,n){var s;t.subscribe(function(u){return s=u},function(u){return n(u)},function(){return i(s)})})},r.create=function(e){return new r(e)},r}();Qa.Observable=TM;function Pb(r){var e;return(e=r??wM.config.Promise)!==null&&e!==void 0?e:Promise}function SM(r){return r&&_p.isFunction(r.next)&&_p.isFunction(r.error)&&_p.isFunction(r.complete)}function CM(r){return r&&r instanceof Pp.Subscriber||SM(r)&&bM.isSubscription(r)}});var z=_(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.operate=In.hasLift=void 0;var AM=le();function wb(r){return AM.isFunction(r?.lift)}In.hasLift=wb;function EM(r){return function(e){if(wb(e))return e.lift(function(t){try{return r(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}In.operate=EM});var U=_(ui=>{"use strict";var qM=ui&&ui.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(ui,"__esModule",{value:!0});ui.OperatorSubscriber=ui.createOperatorSubscriber=void 0;var xM=Ln();function MM(r,e,t,i,n){return new Ob(r,e,t,i,n)}ui.createOperatorSubscriber=MM;var Ob=function(r){qM(e,r);function e(t,i,n,s,u,l){var f=r.call(this,t)||this;return f.onFinalize=u,f.shouldUnsubscribe=l,f._next=i?function(p){try{i(p)}catch(v){t.error(v)}}:r.prototype._next,f._error=s?function(p){try{s(p)}catch(v){t.error(v)}finally{this.unsubscribe()}}:r.prototype._error,f._complete=n?function(){try{n()}catch(p){t.error(p)}finally{this.unsubscribe()}}:r.prototype._complete,f}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;r.prototype.unsubscribe.call(this),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}(xM.Subscriber);ui.OperatorSubscriber=Ob});var Xa=_(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.refCount=void 0;var LM=z(),jM=U();function IM(){return LM.operate(function(r,e){var t=null;r._refCount++;var i=jM.createOperatorSubscriber(e,void 0,void 0,void 0,function(){if(!r||r._refCount<=0||0<--r._refCount){t=null;return}var n=r._connection,s=t;t=null,n&&(!s||n===s)&&n.unsubscribe(),e.unsubscribe()});r.subscribe(i),i.closed||(t=r.connect())})}Ka.refCount=IM});var ys=_(kn=>{"use strict";var kM=kn&&kn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(kn,"__esModule",{value:!0});kn.ConnectableObservable=void 0;var FM=fe(),Tb=Mt(),DM=Xa(),RM=U(),zM=z(),VM=function(r){kM(e,r);function e(t,i){var n=r.call(this)||this;return n.source=t,n.subjectFactory=i,n._subject=null,n._refCount=0,n._connection=null,zM.hasLift(t)&&(n.lift=t.lift),n}return e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t?.unsubscribe()},e.prototype.connect=function(){var t=this,i=this._connection;if(!i){i=this._connection=new Tb.Subscription;var n=this.getSubject();i.add(this.source.subscribe(RM.createOperatorSubscriber(n,void 0,function(){t._teardown(),n.complete()},function(s){t._teardown(),n.error(s)},function(){return t._teardown()}))),i.closed&&(this._connection=null,i=Tb.Subscription.EMPTY)}return i},e.prototype.refCount=function(){return DM.refCount()(this)},e}(FM.Observable);kn.ConnectableObservable=VM});var Sb=_(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.performanceTimestampProvider=void 0;gs.performanceTimestampProvider={now:function(){return(gs.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}});var wp=_(Jt=>{"use strict";var Cb=Jt&&Jt.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},Ab=Jt&&Jt.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.animationFrameProvider=void 0;var NM=Mt();Jt.animationFrameProvider={schedule:function(r){var e=requestAnimationFrame,t=cancelAnimationFrame,i=Jt.animationFrameProvider.delegate;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);var n=e(function(s){t=void 0,r(s)});return new NM.Subscription(function(){return t?.(n)})},requestAnimationFrame:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Jt.animationFrameProvider.delegate;return(t?.requestAnimationFrame||requestAnimationFrame).apply(void 0,Ab([],Cb(r)))},cancelAnimationFrame:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Jt.animationFrameProvider.delegate;return(t?.cancelAnimationFrame||cancelAnimationFrame).apply(void 0,Ab([],Cb(r)))},delegate:void 0}});var xb=_(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.animationFrames=void 0;var WM=fe(),UM=Sb(),Eb=wp();function GM(r){return r?qb(r):BM}Ja.animationFrames=GM;function qb(r){return new WM.Observable(function(e){var t=r||UM.performanceTimestampProvider,i=t.now(),n=0,s=function(){e.closed||(n=Eb.animationFrameProvider.requestAnimationFrame(function(u){n=0;var l=t.now();e.next({timestamp:r?l:u,elapsed:l-i}),s()}))};return s(),function(){n&&Eb.animationFrameProvider.cancelAnimationFrame(n)}})}var BM=qb()});var Op=_(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.ObjectUnsubscribedError=void 0;var HM=ai();Za.ObjectUnsubscribedError=HM.createErrorClass(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})});var Je=_(fr=>{"use strict";var Lb=fr&&fr.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),$M=fr&&fr.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(fr,"__esModule",{value:!0});fr.AnonymousSubject=fr.Subject=void 0;var Mb=fe(),Sp=Mt(),YM=Op(),QM=zr(),Tp=Ba(),jb=function(r){Lb(e,r);function e(){var t=r.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype.lift=function(t){var i=new Cp(this,this);return i.operator=t,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new YM.ObjectUnsubscribedError},e.prototype.next=function(t){var i=this;Tp.errorContext(function(){var n,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var u=$M(i.currentObservers),l=u.next();!l.done;l=u.next()){var f=l.value;f.next(t)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}}})},e.prototype.error=function(t){var i=this;Tp.errorContext(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=t;for(var n=i.observers;n.length;)n.shift().error(t)}})},e.prototype.complete=function(){var t=this;Tp.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var i=t.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(t){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var i=this,n=this,s=n.hasError,u=n.isStopped,l=n.observers;return s||u?Sp.EMPTY_SUBSCRIPTION:(this.currentObservers=null,l.push(t),new Sp.Subscription(function(){i.currentObservers=null,QM.arrRemove(l,t)}))},e.prototype._checkFinalizedStatuses=function(t){var i=this,n=i.hasError,s=i.thrownError,u=i.isStopped;n?t.error(s):u&&t.complete()},e.prototype.asObservable=function(){var t=new Mb.Observable;return t.source=this,t},e.create=function(t,i){return new Cp(t,i)},e}(Mb.Observable);fr.Subject=jb;var Cp=function(r){Lb(e,r);function e(t,i){var n=r.call(this)||this;return n.destination=t,n.source=i,n}return e.prototype.next=function(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.next)===null||n===void 0||n.call(i,t)},e.prototype.error=function(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.error)===null||n===void 0||n.call(i,t)},e.prototype.complete=function(){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||i===void 0||i.call(t)},e.prototype._subscribe=function(t){var i,n;return(n=(i=this.source)===null||i===void 0?void 0:i.subscribe(t))!==null&&n!==void 0?n:Sp.EMPTY_SUBSCRIPTION},e}(jb);fr.AnonymousSubject=Cp});var Ap=_(Fn=>{"use strict";var KM=Fn&&Fn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Fn,"__esModule",{value:!0});Fn.BehaviorSubject=void 0;var XM=Je(),JM=function(r){KM(e,r);function e(t){var i=r.call(this)||this;return i._value=t,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(t){var i=r.prototype._subscribe.call(this,t);return!i.closed&&t.next(this._value),i},e.prototype.getValue=function(){var t=this,i=t.hasError,n=t.thrownError,s=t._value;if(i)throw n;return this._throwIfClosed(),s},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(XM.Subject);Fn.BehaviorSubject=JM});var eu=_(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.dateTimestampProvider=void 0;bs.dateTimestampProvider={now:function(){return(bs.dateTimestampProvider.delegate||Date).now()},delegate:void 0}});var tu=_(Dn=>{"use strict";var ZM=Dn&&Dn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.ReplaySubject=void 0;var eL=Je(),tL=eu(),rL=function(r){ZM(e,r);function e(t,i,n){t===void 0&&(t=1/0),i===void 0&&(i=1/0),n===void 0&&(n=tL.dateTimestampProvider);var s=r.call(this)||this;return s._bufferSize=t,s._windowTime=i,s._timestampProvider=n,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=i===1/0,s._bufferSize=Math.max(1,t),s._windowTime=Math.max(1,i),s}return e.prototype.next=function(t){var i=this,n=i.isStopped,s=i._buffer,u=i._infiniteTimeWindow,l=i._timestampProvider,f=i._windowTime;n||(s.push(t),!u&&s.push(l.now()+f)),this._trimBuffer(),r.prototype.next.call(this,t)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var i=this._innerSubscribe(t),n=this,s=n._infiniteTimeWindow,u=n._buffer,l=u.slice(),f=0;f<l.length&&!t.closed;f+=s?1:2)t.next(l[f]);return this._checkFinalizedStatuses(t),i},e.prototype._trimBuffer=function(){var t=this,i=t._bufferSize,n=t._timestampProvider,s=t._buffer,u=t._infiniteTimeWindow,l=(u?1:2)*i;if(i<1/0&&l<s.length&&s.splice(0,s.length-l),!u){for(var f=n.now(),p=0,v=1;v<s.length&&s[v]<=f;v+=2)p=v;p&&s.splice(0,p+1)}},e}(eL.Subject);Dn.ReplaySubject=rL});var ru=_(Rn=>{"use strict";var iL=Rn&&Rn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Rn,"__esModule",{value:!0});Rn.AsyncSubject=void 0;var nL=Je(),oL=function(r){iL(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return e.prototype._checkFinalizedStatuses=function(t){var i=this,n=i.hasError,s=i._hasValue,u=i._value,l=i.thrownError,f=i.isStopped,p=i._isComplete;n?t.error(l):(f||p)&&(s&&t.next(u),t.complete())},e.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},e.prototype.complete=function(){var t=this,i=t._hasValue,n=t._value,s=t._isComplete;s||(this._isComplete=!0,i&&r.prototype.next.call(this,n),r.prototype.complete.call(this))},e}(nL.Subject);Rn.AsyncSubject=oL});var Ib=_(zn=>{"use strict";var sL=zn&&zn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(zn,"__esModule",{value:!0});zn.Action=void 0;var aL=Mt(),uL=function(r){sL(e,r);function e(t,i){return r.call(this)||this}return e.prototype.schedule=function(t,i){return i===void 0&&(i=0),this},e}(aL.Subscription);zn.Action=uL});var Db=_(pr=>{"use strict";var kb=pr&&pr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},Fb=pr&&pr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(pr,"__esModule",{value:!0});pr.intervalProvider=void 0;pr.intervalProvider={setInterval:function(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];var n=pr.intervalProvider.delegate;return n?.setInterval?n.setInterval.apply(n,Fb([r,e],kb(t))):setInterval.apply(void 0,Fb([r,e],kb(t)))},clearInterval:function(r){var e=pr.intervalProvider.delegate;return(e?.clearInterval||clearInterval)(r)},delegate:void 0}});var Nn=_(Vn=>{"use strict";var cL=Vn&&Vn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Vn,"__esModule",{value:!0});Vn.AsyncAction=void 0;var lL=Ib(),Rb=Db(),hL=zr(),fL=function(r){cL(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n.pending=!1,n}return e.prototype.schedule=function(t,i){var n;if(i===void 0&&(i=0),this.closed)return this;this.state=t;var s=this.id,u=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(u,s,i)),this.pending=!0,this.delay=i,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(u,this.id,i),this},e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),Rb.intervalProvider.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,i,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return i;i!=null&&Rb.intervalProvider.clearInterval(i)},e.prototype.execute=function(t,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,i);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,i){var n=!1,s;try{this.work(t)}catch(u){n=!0,s=u||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),s},e.prototype.unsubscribe=function(){if(!this.closed){var t=this,i=t.id,n=t.scheduler,s=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,hL.arrRemove(s,this),i!=null&&(this.id=this.recycleAsyncId(n,i,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},e}(lL.Action);Vn.AsyncAction=fL});var Vb=_(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.TestTools=Wn.Immediate=void 0;var pL=1,Ep,iu={};function zb(r){return r in iu?(delete iu[r],!0):!1}Wn.Immediate={setImmediate:function(r){var e=pL++;return iu[e]=!0,Ep||(Ep=Promise.resolve()),Ep.then(function(){return zb(e)&&r()}),e},clearImmediate:function(r){zb(r)}};Wn.TestTools={pending:function(){return Object.keys(iu).length}}});var Wb=_(dr=>{"use strict";var dL=dr&&dr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},vL=dr&&dr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(dr,"__esModule",{value:!0});dr.immediateProvider=void 0;var Nb=Vb(),mL=Nb.Immediate.setImmediate,yL=Nb.Immediate.clearImmediate;dr.immediateProvider={setImmediate:function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=dr.immediateProvider.delegate;return(t?.setImmediate||mL).apply(void 0,vL([],dL(r)))},clearImmediate:function(r){var e=dr.immediateProvider.delegate;return(e?.clearImmediate||yL)(r)},delegate:void 0}});var Gb=_(Un=>{"use strict";var gL=Un&&Un.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Un,"__esModule",{value:!0});Un.AsapAction=void 0;var bL=Nn(),Ub=Wb(),_L=function(r){gL(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,t,i,n):(t.actions.push(this),t._scheduled||(t._scheduled=Ub.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},e.prototype.recycleAsyncId=function(t,i,n){var s;if(n===void 0&&(n=0),n!=null?n>0:this.delay>0)return r.prototype.recycleAsyncId.call(this,t,i,n);var u=t.actions;i!=null&&((s=u[u.length-1])===null||s===void 0?void 0:s.id)!==i&&(Ub.immediateProvider.clearImmediate(i),t._scheduled===i&&(t._scheduled=void 0))},e}(bL.AsyncAction);Un.AsapAction=_L});var qp=_(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.Scheduler=void 0;var PL=eu(),wL=function(){function r(e,t){t===void 0&&(t=r.now),this.schedulerActionCtor=e,this.now=t}return r.prototype.schedule=function(e,t,i){return t===void 0&&(t=0),new this.schedulerActionCtor(this,e).schedule(i,t)},r.now=PL.dateTimestampProvider.now,r}();nu.Scheduler=wL});var Bn=_(Gn=>{"use strict";var OL=Gn&&Gn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Gn,"__esModule",{value:!0});Gn.AsyncScheduler=void 0;var Bb=qp(),TL=function(r){OL(e,r);function e(t,i){i===void 0&&(i=Bb.Scheduler.now);var n=r.call(this,t,i)||this;return n.actions=[],n._active=!1,n}return e.prototype.flush=function(t){var i=this.actions;if(this._active){i.push(t);return}var n;this._active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=i.shift());if(this._active=!1,n){for(;t=i.shift();)t.unsubscribe();throw n}},e}(Bb.Scheduler);Gn.AsyncScheduler=TL});var Hb=_(Hn=>{"use strict";var SL=Hn&&Hn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.AsapScheduler=void 0;var CL=Bn(),AL=function(r){SL(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(t){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var n=this.actions,s;t=t||n.shift();do if(s=t.execute(t.state,t.delay))break;while((t=n[0])&&t.id===i&&n.shift());if(this._active=!1,s){for(;(t=n[0])&&t.id===i&&n.shift();)t.unsubscribe();throw s}},e}(CL.AsyncScheduler);Hn.AsapScheduler=AL});var $b=_(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.asap=Xi.asapScheduler=void 0;var EL=Gb(),qL=Hb();Xi.asapScheduler=new qL.AsapScheduler(EL.AsapAction);Xi.asap=Xi.asapScheduler});var _t=_(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.async=Ji.asyncScheduler=void 0;var xL=Nn(),ML=Bn();Ji.asyncScheduler=new ML.AsyncScheduler(xL.AsyncAction);Ji.async=Ji.asyncScheduler});var Yb=_($n=>{"use strict";var LL=$n&&$n.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty($n,"__esModule",{value:!0});$n.QueueAction=void 0;var jL=Nn(),IL=function(r){LL(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return e.prototype.schedule=function(t,i){return i===void 0&&(i=0),i>0?r.prototype.schedule.call(this,t,i):(this.delay=i,this.state=t,this.scheduler.flush(this),this)},e.prototype.execute=function(t,i){return i>0||this.closed?r.prototype.execute.call(this,t,i):this._execute(t,i)},e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),n!=null&&n>0||n==null&&this.delay>0?r.prototype.requestAsyncId.call(this,t,i,n):(t.flush(this),0)},e}(jL.AsyncAction);$n.QueueAction=IL});var Qb=_(Yn=>{"use strict";var kL=Yn&&Yn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.QueueScheduler=void 0;var FL=Bn(),DL=function(r){kL(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(FL.AsyncScheduler);Yn.QueueScheduler=DL});var Kb=_(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.queue=Zi.queueScheduler=void 0;var RL=Yb(),zL=Qb();Zi.queueScheduler=new zL.QueueScheduler(RL.QueueAction);Zi.queue=Zi.queueScheduler});var Jb=_(Qn=>{"use strict";var VL=Qn&&Qn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.AnimationFrameAction=void 0;var NL=Nn(),Xb=wp(),WL=function(r){VL(e,r);function e(t,i){var n=r.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return e.prototype.requestAsyncId=function(t,i,n){return n===void 0&&(n=0),n!==null&&n>0?r.prototype.requestAsyncId.call(this,t,i,n):(t.actions.push(this),t._scheduled||(t._scheduled=Xb.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},e.prototype.recycleAsyncId=function(t,i,n){var s;if(n===void 0&&(n=0),n!=null?n>0:this.delay>0)return r.prototype.recycleAsyncId.call(this,t,i,n);var u=t.actions;i!=null&&((s=u[u.length-1])===null||s===void 0?void 0:s.id)!==i&&(Xb.animationFrameProvider.cancelAnimationFrame(i),t._scheduled=void 0)},e}(NL.AsyncAction);Qn.AnimationFrameAction=WL});var Zb=_(Kn=>{"use strict";var UL=Kn&&Kn.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(Kn,"__esModule",{value:!0});Kn.AnimationFrameScheduler=void 0;var GL=Bn(),BL=function(r){UL(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(t){this._active=!0;var i=this._scheduled;this._scheduled=void 0;var n=this.actions,s;t=t||n.shift();do if(s=t.execute(t.state,t.delay))break;while((t=n[0])&&t.id===i&&n.shift());if(this._active=!1,s){for(;(t=n[0])&&t.id===i&&n.shift();)t.unsubscribe();throw s}},e}(GL.AsyncScheduler);Kn.AnimationFrameScheduler=BL});var e_=_(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.animationFrame=en.animationFrameScheduler=void 0;var HL=Jb(),$L=Zb();en.animationFrameScheduler=new $L.AnimationFrameScheduler(HL.AnimationFrameAction);en.animationFrame=en.animationFrameScheduler});var i_=_(ci=>{"use strict";var t_=ci&&ci.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}();Object.defineProperty(ci,"__esModule",{value:!0});ci.VirtualAction=ci.VirtualTimeScheduler=void 0;var YL=Nn(),QL=Mt(),KL=Bn(),XL=function(r){t_(e,r);function e(t,i){t===void 0&&(t=r_),i===void 0&&(i=1/0);var n=r.call(this,t,function(){return n.frame})||this;return n.maxFrames=i,n.frame=0,n.index=-1,n}return e.prototype.flush=function(){for(var t=this,i=t.actions,n=t.maxFrames,s,u;(u=i[0])&&u.delay<=n&&(i.shift(),this.frame=u.delay,!(s=u.execute(u.state,u.delay))););if(s){for(;u=i.shift();)u.unsubscribe();throw s}},e.frameTimeFactor=10,e}(KL.AsyncScheduler);ci.VirtualTimeScheduler=XL;var r_=function(r){t_(e,r);function e(t,i,n){n===void 0&&(n=t.index+=1);var s=r.call(this,t,i)||this;return s.scheduler=t,s.work=i,s.index=n,s.active=!0,s.index=t.index=n,s}return e.prototype.schedule=function(t,i){if(i===void 0&&(i=0),Number.isFinite(i)){if(!this.id)return r.prototype.schedule.call(this,t,i);this.active=!1;var n=new e(this.scheduler,this.work);return this.add(n),n.schedule(t,i)}else return QL.Subscription.EMPTY},e.prototype.requestAsyncId=function(t,i,n){n===void 0&&(n=0),this.delay=t.frame+n;var s=t.actions;return s.push(this),s.sort(e.sortActions),1},e.prototype.recycleAsyncId=function(t,i,n){n===void 0&&(n=0)},e.prototype._execute=function(t,i){if(this.active===!0)return r.prototype._execute.call(this,t,i)},e.sortActions=function(t,i){return t.delay===i.delay?t.index===i.index?0:t.index>i.index?1:-1:t.delay>i.delay?1:-1},e}(YL.AsyncAction);ci.VirtualAction=r_});var Zt=_(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.empty=tn.EMPTY=void 0;var n_=fe();tn.EMPTY=new n_.Observable(function(r){return r.complete()});function JL(r){return r?ZL(r):tn.EMPTY}tn.empty=JL;function ZL(r){return new n_.Observable(function(e){return r.schedule(function(){return e.complete()})})}});var _s=_(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.isScheduler=void 0;var ej=le();function tj(r){return r&&ej.isFunction(r.schedule)}ou.isScheduler=tj});var Pt=_(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.popNumber=li.popScheduler=li.popResultSelector=void 0;var rj=le(),ij=_s();function xp(r){return r[r.length-1]}function nj(r){return rj.isFunction(xp(r))?r.pop():void 0}li.popResultSelector=nj;function oj(r){return ij.isScheduler(xp(r))?r.pop():void 0}li.popScheduler=oj;function sj(r,e){return typeof xp(r)=="number"?r.pop():e}li.popNumber=sj});var au=_(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.isArrayLike=void 0;su.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var Mp=_(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.isPromise=void 0;var aj=le();function uj(r){return aj.isFunction(r?.then)}uu.isPromise=uj});var Lp=_(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.isInteropObservable=void 0;var cj=vs(),lj=le();function hj(r){return lj.isFunction(r[cj.observable])}cu.isInteropObservable=hj});var jp=_(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.isAsyncIterable=void 0;var fj=le();function pj(r){return Symbol.asyncIterator&&fj.isFunction(r?.[Symbol.asyncIterator])}lu.isAsyncIterable=pj});var Ip=_(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.createInvalidObservableTypeError=void 0;function dj(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}hu.createInvalidObservableTypeError=dj});var kp=_(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.iterator=Xn.getSymbolIterator=void 0;function o_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Xn.getSymbolIterator=o_;Xn.iterator=o_()});var Fp=_(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.isIterable=void 0;var vj=kp(),mj=le();function yj(r){return mj.isFunction(r?.[vj.iterator])}fu.isIterable=yj});var pu=_(Ut=>{"use strict";var gj=Ut&&Ut.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(p){return function(v){return f([p,v])}}function f(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(v){p=[6,v],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Jn=Ut&&Ut.__await||function(r){return this instanceof Jn?(this.v=r,this):new Jn(r)},bj=Ut&&Ut.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,s=[];return n={},u("next"),u("throw"),u("return"),n[Symbol.asyncIterator]=function(){return this},n;function u(T){i[T]&&(n[T]=function(S){return new Promise(function(q,M){s.push([T,S,q,M])>1||l(T,S)})})}function l(T,S){try{f(i[T](S))}catch(q){b(s[0][3],q)}}function f(T){T.value instanceof Jn?Promise.resolve(T.value.v).then(p,v):b(s[0][2],T)}function p(T){l("next",T)}function v(T){l("throw",T)}function b(T,S){T(S),s.shift(),s.length&&l(s[0][0],s[0][1])}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.isReadableStreamLike=Ut.readableStreamLikeToAsyncGenerator=void 0;var _j=le();function Pj(r){return bj(this,arguments,function(){var t,i,n,s;return gj(this,function(u){switch(u.label){case 0:t=r.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,Jn(t.read())];case 3:return i=u.sent(),n=i.value,s=i.done,s?[4,Jn(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,Jn(n)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Ut.readableStreamLikeToAsyncGenerator=Pj;function wj(r){return _j.isFunction(r?.getReader)}Ut.isReadableStreamLike=wj});var X=_(be=>{"use strict";var Oj=be&&be.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(u){u(s)})}return new(t||(t=Promise))(function(s,u){function l(v){try{p(i.next(v))}catch(b){u(b)}}function f(v){try{p(i.throw(v))}catch(b){u(b)}}function p(v){v.done?s(v.value):n(v.value).then(l,f)}p((i=i.apply(r,e||[])).next())})},Tj=be&&be.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(p){return function(v){return f([p,v])}}function f(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(v){p=[6,v],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Sj=be&&be.__asyncValues||function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Dp=="function"?Dp(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=r[s]&&function(u){return new Promise(function(l,f){u=r[s](u),n(l,f,u.done,u.value)})}}function n(s,u,l,f){Promise.resolve(f).then(function(p){s({value:p,done:l})},u)}},Dp=be&&be.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(be,"__esModule",{value:!0});be.fromReadableStreamLike=be.fromAsyncIterable=be.fromIterable=be.fromPromise=be.fromArrayLike=be.fromInteropObservable=be.innerFrom=void 0;var Cj=au(),Aj=Mp(),Zn=fe(),Ej=Lp(),qj=jp(),xj=Ip(),Mj=Fp(),s_=pu(),Lj=le(),jj=vp(),Ij=vs();function kj(r){if(r instanceof Zn.Observable)return r;if(r!=null){if(Ej.isInteropObservable(r))return a_(r);if(Cj.isArrayLike(r))return u_(r);if(Aj.isPromise(r))return c_(r);if(qj.isAsyncIterable(r))return Rp(r);if(Mj.isIterable(r))return l_(r);if(s_.isReadableStreamLike(r))return h_(r)}throw xj.createInvalidObservableTypeError(r)}be.innerFrom=kj;function a_(r){return new Zn.Observable(function(e){var t=r[Ij.observable]();if(Lj.isFunction(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}be.fromInteropObservable=a_;function u_(r){return new Zn.Observable(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}be.fromArrayLike=u_;function c_(r){return new Zn.Observable(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,jj.reportUnhandledError)})}be.fromPromise=c_;function l_(r){return new Zn.Observable(function(e){var t,i;try{for(var n=Dp(r),s=n.next();!s.done;s=n.next()){var u=s.value;if(e.next(u),e.closed)return}}catch(l){t={error:l}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}e.complete()})}be.fromIterable=l_;function Rp(r){return new Zn.Observable(function(e){Fj(r,e).catch(function(t){return e.error(t)})})}be.fromAsyncIterable=Rp;function h_(r){return Rp(s_.readableStreamLikeToAsyncGenerator(r))}be.fromReadableStreamLike=h_;function Fj(r,e){var t,i,n,s;return Oj(this,void 0,void 0,function(){var u,l;return Tj(this,function(f){switch(f.label){case 0:f.trys.push([0,5,6,11]),t=Sj(r),f.label=1;case 1:return[4,t.next()];case 2:if(i=f.sent(),!!i.done)return[3,4];if(u=i.value,e.next(u),e.closed)return[2];f.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=f.sent(),n={error:l},[3,11];case 6:return f.trys.push([6,,9,10]),i&&!i.done&&(s=t.return)?[4,s.call(t)]:[3,8];case 7:f.sent(),f.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}});var Vr=_(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.executeSchedule=void 0;function Dj(r,e,t,i,n){i===void 0&&(i=0),n===void 0&&(n=!1);var s=e.schedule(function(){t(),n?r.add(this.schedule(null,i)):this.unsubscribe()},i);if(r.add(s),!n)return s}du.executeSchedule=Dj});var eo=_(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.observeOn=void 0;var zp=Vr(),Rj=z(),zj=U();function Vj(r,e){return e===void 0&&(e=0),Rj.operate(function(t,i){t.subscribe(zj.createOperatorSubscriber(i,function(n){return zp.executeSchedule(i,r,function(){return i.next(n)},e)},function(){return zp.executeSchedule(i,r,function(){return i.complete()},e)},function(n){return zp.executeSchedule(i,r,function(){return i.error(n)},e)}))})}vu.observeOn=Vj});var to=_(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.subscribeOn=void 0;var Nj=z();function Wj(r,e){return e===void 0&&(e=0),Nj.operate(function(t,i){i.add(r.schedule(function(){return t.subscribe(i)},e))})}mu.subscribeOn=Wj});var f_=_(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.scheduleObservable=void 0;var Uj=X(),Gj=eo(),Bj=to();function Hj(r,e){return Uj.innerFrom(r).pipe(Bj.subscribeOn(e),Gj.observeOn(e))}yu.scheduleObservable=Hj});var p_=_(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.schedulePromise=void 0;var $j=X(),Yj=eo(),Qj=to();function Kj(r,e){return $j.innerFrom(r).pipe(Qj.subscribeOn(e),Yj.observeOn(e))}gu.schedulePromise=Kj});var d_=_(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.scheduleArray=void 0;var Xj=fe();function Jj(r,e){return new Xj.Observable(function(t){var i=0;return e.schedule(function(){i===r.length?t.complete():(t.next(r[i++]),t.closed||this.schedule())})})}bu.scheduleArray=Jj});var Vp=_(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.scheduleIterable=void 0;var Zj=fe(),eI=kp(),tI=le(),v_=Vr();function rI(r,e){return new Zj.Observable(function(t){var i;return v_.executeSchedule(t,e,function(){i=r[eI.iterator](),v_.executeSchedule(t,e,function(){var n,s,u;try{n=i.next(),s=n.value,u=n.done}catch(l){t.error(l);return}u?t.complete():t.next(s)},0,!0)}),function(){return tI.isFunction(i?.return)&&i.return()}})}_u.scheduleIterable=rI});var Np=_(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.scheduleAsyncIterable=void 0;var iI=fe(),m_=Vr();function nI(r,e){if(!r)throw new Error("Iterable cannot be null");return new iI.Observable(function(t){m_.executeSchedule(t,e,function(){var i=r[Symbol.asyncIterator]();m_.executeSchedule(t,e,function(){i.next().then(function(n){n.done?t.complete():t.next(n.value)})},0,!0)})})}Pu.scheduleAsyncIterable=nI});var y_=_(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.scheduleReadableStreamLike=void 0;var oI=Np(),sI=pu();function aI(r,e){return oI.scheduleAsyncIterable(sI.readableStreamLikeToAsyncGenerator(r),e)}wu.scheduleReadableStreamLike=aI});var Wp=_(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.scheduled=void 0;var uI=f_(),cI=p_(),lI=d_(),hI=Vp(),fI=Np(),pI=Lp(),dI=Mp(),vI=au(),mI=Fp(),yI=jp(),gI=Ip(),bI=pu(),_I=y_();function PI(r,e){if(r!=null){if(pI.isInteropObservable(r))return uI.scheduleObservable(r,e);if(vI.isArrayLike(r))return lI.scheduleArray(r,e);if(dI.isPromise(r))return cI.schedulePromise(r,e);if(yI.isAsyncIterable(r))return fI.scheduleAsyncIterable(r,e);if(mI.isIterable(r))return hI.scheduleIterable(r,e);if(bI.isReadableStreamLike(r))return _I.scheduleReadableStreamLike(r,e)}throw gI.createInvalidObservableTypeError(r)}Ou.scheduled=PI});var Nr=_(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.from=void 0;var wI=Wp(),OI=X();function TI(r,e){return e?wI.scheduled(r,e):OI.innerFrom(r)}Tu.from=TI});var Cu=_(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.of=void 0;var SI=Pt(),CI=Nr();function AI(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=SI.popScheduler(r);return CI.from(r,t)}Su.of=AI});var Up=_(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.throwError=void 0;var EI=fe(),qI=le();function xI(r,e){var t=qI.isFunction(r)?r:function(){return r},i=function(n){return n.error(t())};return new EI.Observable(e?function(n){return e.schedule(i,0,n)}:i)}Au.throwError=xI});var Eu=_(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.observeNotification=Wr.Notification=Wr.NotificationKind=void 0;var MI=Zt(),LI=Cu(),jI=Up(),II=le(),kI;(function(r){r.NEXT="N",r.ERROR="E",r.COMPLETE="C"})(kI=Wr.NotificationKind||(Wr.NotificationKind={}));var FI=function(){function r(e,t,i){this.kind=e,this.value=t,this.error=i,this.hasValue=e==="N"}return r.prototype.observe=function(e){return g_(this,e)},r.prototype.do=function(e,t,i){var n=this,s=n.kind,u=n.value,l=n.error;return s==="N"?e?.(u):s==="E"?t?.(l):i?.()},r.prototype.accept=function(e,t,i){var n;return II.isFunction((n=e)===null||n===void 0?void 0:n.next)?this.observe(e):this.do(e,t,i)},r.prototype.toObservable=function(){var e=this,t=e.kind,i=e.value,n=e.error,s=t==="N"?LI.of(i):t==="E"?jI.throwError(function(){return n}):t==="C"?MI.EMPTY:0;if(!s)throw new TypeError("Unexpected notification kind "+t);return s},r.createNext=function(e){return new r("N",e)},r.createError=function(e){return new r("E",void 0,e)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r}();Wr.Notification=FI;function g_(r,e){var t,i,n,s=r,u=s.kind,l=s.value,f=s.error;if(typeof u!="string")throw new TypeError('Invalid notification, missing "kind"');u==="N"?(t=e.next)===null||t===void 0||t.call(e,l):u==="E"?(i=e.error)===null||i===void 0||i.call(e,f):(n=e.complete)===null||n===void 0||n.call(e)}Wr.observeNotification=g_});var __=_(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.isObservable=void 0;var DI=fe(),b_=le();function RI(r){return!!r&&(r instanceof DI.Observable||b_.isFunction(r.lift)&&b_.isFunction(r.subscribe))}qu.isObservable=RI});var hi=_(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.EmptyError=void 0;var zI=ai();xu.EmptyError=zI.createErrorClass(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}})});var P_=_(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.lastValueFrom=void 0;var VI=hi();function NI(r,e){var t=typeof e=="object";return new Promise(function(i,n){var s=!1,u;r.subscribe({next:function(l){u=l,s=!0},error:n,complete:function(){s?i(u):t?i(e.defaultValue):n(new VI.EmptyError)}})})}Mu.lastValueFrom=NI});var w_=_(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.firstValueFrom=void 0;var WI=hi(),UI=Ln();function GI(r,e){var t=typeof e=="object";return new Promise(function(i,n){var s=new UI.SafeSubscriber({next:function(u){i(u),s.unsubscribe()},error:n,complete:function(){t?i(e.defaultValue):n(new WI.EmptyError)}});r.subscribe(s)})}Lu.firstValueFrom=GI});var Gp=_(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.ArgumentOutOfRangeError=void 0;var BI=ai();ju.ArgumentOutOfRangeError=BI.createErrorClass(function(r){return function(){r(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})});var Bp=_(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.NotFoundError=void 0;var HI=ai();Iu.NotFoundError=HI.createErrorClass(function(r){return function(t){r(this),this.name="NotFoundError",this.message=t}})});var Hp=_(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.SequenceError=void 0;var $I=ai();ku.SequenceError=$I.createErrorClass(function(r){return function(t){r(this),this.name="SequenceError",this.message=t}})});var Du=_(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.isValidDate=void 0;function YI(r){return r instanceof Date&&!isNaN(r)}Fu.isValidDate=YI});var Ps=_(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.timeout=rn.TimeoutError=void 0;var QI=_t(),KI=Du(),XI=z(),JI=X(),ZI=ai(),ek=U(),tk=Vr();rn.TimeoutError=ZI.createErrorClass(function(r){return function(t){t===void 0&&(t=null),r(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function rk(r,e){var t=KI.isValidDate(r)?{first:r}:typeof r=="number"?{each:r}:r,i=t.first,n=t.each,s=t.with,u=s===void 0?ik:s,l=t.scheduler,f=l===void 0?e??QI.asyncScheduler:l,p=t.meta,v=p===void 0?null:p;if(i==null&&n==null)throw new TypeError("No timeout provided.");return XI.operate(function(b,T){var S,q,M=null,j=0,D=function(V){q=tk.executeSchedule(T,f,function(){try{S.unsubscribe(),JI.innerFrom(u({meta:v,lastValue:M,seen:j})).subscribe(T)}catch(Y){T.error(Y)}},V)};S=b.subscribe(ek.createOperatorSubscriber(T,function(V){q?.unsubscribe(),j++,T.next(M=V),n>0&&D(n)},void 0,void 0,function(){q?.closed||q?.unsubscribe(),M=null})),!j&&D(i!=null?typeof i=="number"?i:+i-f.now():n)})}rn.timeout=rk;function ik(r){throw new rn.TimeoutError(r)}});var Ur=_(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.map=void 0;var nk=z(),ok=U();function sk(r,e){return nk.operate(function(t,i){var n=0;t.subscribe(ok.createOperatorSubscriber(i,function(s){i.next(r.call(e,s,n++))}))})}Ru.map=sk});var pi=_(fi=>{"use strict";var ak=fi&&fi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},uk=fi&&fi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(fi,"__esModule",{value:!0});fi.mapOneOrManyArgs=void 0;var ck=Ur(),lk=Array.isArray;function hk(r,e){return lk(e)?r.apply(void 0,uk([],ak(e))):r(e)}function fk(r){return ck.map(function(e){return hk(r,e)})}fi.mapOneOrManyArgs=fk});var Yp=_(di=>{"use strict";var pk=di&&di.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},O_=di&&di.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(di,"__esModule",{value:!0});di.bindCallbackInternals=void 0;var dk=_s(),vk=fe(),mk=to(),yk=pi(),gk=eo(),bk=ru();function $p(r,e,t,i){if(t)if(dk.isScheduler(t))i=t;else return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return $p(r,e,i).apply(this,n).pipe(yk.mapOneOrManyArgs(t))};return i?function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return $p(r,e).apply(this,n).pipe(mk.subscribeOn(i),gk.observeOn(i))}:function(){for(var n=this,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=new bk.AsyncSubject,f=!0;return new vk.Observable(function(p){var v=l.subscribe(p);if(f){f=!1;var b=!1,T=!1;e.apply(n,O_(O_([],pk(s)),[function(){for(var S=[],q=0;q<arguments.length;q++)S[q]=arguments[q];if(r){var M=S.shift();if(M!=null){l.error(M);return}}l.next(1<S.length?S:S[0]),T=!0,b&&l.complete()}])),T&&l.complete(),b=!0}return v})}}di.bindCallbackInternals=$p});var T_=_(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.bindCallback=void 0;var _k=Yp();function Pk(r,e,t){return _k.bindCallbackInternals(!1,r,e,t)}zu.bindCallback=Pk});var S_=_(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.bindNodeCallback=void 0;var wk=Yp();function Ok(r,e,t){return wk.bindCallbackInternals(!0,r,e,t)}Vu.bindNodeCallback=Ok});var Qp=_(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.argsArgArrayOrObject=void 0;var Tk=Array.isArray,Sk=Object.getPrototypeOf,Ck=Object.prototype,Ak=Object.keys;function Ek(r){if(r.length===1){var e=r[0];if(Tk(e))return{args:e,keys:null};if(qk(e)){var t=Ak(e);return{args:t.map(function(i){return e[i]}),keys:t}}}return{args:r,keys:null}}Nu.argsArgArrayOrObject=Ek;function qk(r){return r&&typeof r=="object"&&Sk(r)===Ck}});var Kp=_(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.createObject=void 0;function xk(r,e){return r.reduce(function(t,i,n){return t[i]=e[n],t},{})}Wu.createObject=xk});var Uu=_(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.combineLatestInit=ro.combineLatest=void 0;var Mk=fe(),Lk=Qp(),E_=Nr(),q_=Xe(),jk=pi(),C_=Pt(),Ik=Kp(),kk=U(),Fk=Vr();function Dk(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=C_.popScheduler(r),i=C_.popResultSelector(r),n=Lk.argsArgArrayOrObject(r),s=n.args,u=n.keys;if(s.length===0)return E_.from([],t);var l=new Mk.Observable(x_(s,t,u?function(f){return Ik.createObject(u,f)}:q_.identity));return i?l.pipe(jk.mapOneOrManyArgs(i)):l}ro.combineLatest=Dk;function x_(r,e,t){return t===void 0&&(t=q_.identity),function(i){A_(e,function(){for(var n=r.length,s=new Array(n),u=n,l=n,f=function(v){A_(e,function(){var b=E_.from(r[v],e),T=!1;b.subscribe(kk.createOperatorSubscriber(i,function(S){s[v]=S,T||(T=!0,l--),l||i.next(t(s.slice()))},function(){--u||i.complete()}))},i)},p=0;p<n;p++)f(p)},i)}}ro.combineLatestInit=x_;function A_(r,e,t){r?Fk.executeSchedule(t,r,e):e()}});var Bu=_(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.mergeInternals=void 0;var Rk=X(),zk=Vr(),M_=U();function Vk(r,e,t,i,n,s,u,l){var f=[],p=0,v=0,b=!1,T=function(){b&&!f.length&&!p&&e.complete()},S=function(M){return p<i?q(M):f.push(M)},q=function(M){s&&e.next(M),p++;var j=!1;Rk.innerFrom(t(M,v++)).subscribe(M_.createOperatorSubscriber(e,function(D){n?.(D),s?S(D):e.next(D)},function(){j=!0},void 0,function(){if(j)try{p--;for(var D=function(){var V=f.shift();u?zk.executeSchedule(e,u,function(){return q(V)}):q(V)};f.length&&p<i;)D();T()}catch(V){e.error(V)}}))};return r.subscribe(M_.createOperatorSubscriber(e,S,function(){b=!0,T()})),function(){l?.()}}Gu.mergeInternals=Vk});var vr=_(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.mergeMap=void 0;var Nk=Ur(),Wk=X(),Uk=z(),Gk=Bu(),Bk=le();function L_(r,e,t){return t===void 0&&(t=1/0),Bk.isFunction(e)?L_(function(i,n){return Nk.map(function(s,u){return e(i,s,n,u)})(Wk.innerFrom(r(i,n)))},t):(typeof e=="number"&&(t=e),Uk.operate(function(i,n){return Gk.mergeInternals(i,n,r,t)}))}Hu.mergeMap=L_});var io=_($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.mergeAll=void 0;var Hk=vr(),$k=Xe();function Yk(r){return r===void 0&&(r=1/0),Hk.mergeMap($k.identity,r)}$u.mergeAll=Yk});var ws=_(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.concatAll=void 0;var Qk=io();function Kk(){return Qk.mergeAll(1)}Yu.concatAll=Kk});var Os=_(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.concat=void 0;var Xk=ws(),Jk=Pt(),Zk=Nr();function eF(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Xk.concatAll()(Zk.from(r,Jk.popScheduler(r)))}Qu.concat=eF});var Ts=_(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.defer=void 0;var tF=fe(),rF=X();function iF(r){return new tF.Observable(function(e){rF.innerFrom(r()).subscribe(e)})}Ku.defer=iF});var j_=_(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.connectable=void 0;var nF=Je(),oF=fe(),sF=Ts(),aF={connector:function(){return new nF.Subject},resetOnDisconnect:!0};function uF(r,e){e===void 0&&(e=aF);var t=null,i=e.connector,n=e.resetOnDisconnect,s=n===void 0?!0:n,u=i(),l=new oF.Observable(function(f){return u.subscribe(f)});return l.connect=function(){return(!t||t.closed)&&(t=sF.defer(function(){return r}).subscribe(u),s&&t.add(function(){return u=i()})),t},l}Xu.connectable=uF});var I_=_(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.forkJoin=void 0;var cF=fe(),lF=Qp(),hF=X(),fF=Pt(),pF=U(),dF=pi(),vF=Kp();function mF(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=fF.popResultSelector(r),i=lF.argsArgArrayOrObject(r),n=i.args,s=i.keys,u=new cF.Observable(function(l){var f=n.length;if(!f){l.complete();return}for(var p=new Array(f),v=f,b=f,T=function(q){var M=!1;hF.innerFrom(n[q]).subscribe(pF.createOperatorSubscriber(l,function(j){M||(M=!0,b--),p[q]=j},function(){return v--},void 0,function(){(!v||!M)&&(b||l.next(s?vF.createObject(s,p):p),l.complete())}))},S=0;S<f;S++)T(S)});return t?u.pipe(dF.mapOneOrManyArgs(t)):u}Ju.forkJoin=mF});var F_=_(no=>{"use strict";var yF=no&&no.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s};Object.defineProperty(no,"__esModule",{value:!0});no.fromEvent=void 0;var gF=X(),bF=fe(),_F=vr(),PF=au(),nn=le(),wF=pi(),OF=["addListener","removeListener"],TF=["addEventListener","removeEventListener"],SF=["on","off"];function Xp(r,e,t,i){if(nn.isFunction(t)&&(i=t,t=void 0),i)return Xp(r,e,t).pipe(wF.mapOneOrManyArgs(i));var n=yF(EF(r)?TF.map(function(l){return function(f){return r[l](e,f,t)}}):CF(r)?OF.map(k_(r,e)):AF(r)?SF.map(k_(r,e)):[],2),s=n[0],u=n[1];if(!s&&PF.isArrayLike(r))return _F.mergeMap(function(l){return Xp(l,e,t)})(gF.innerFrom(r));if(!s)throw new TypeError("Invalid event target");return new bF.Observable(function(l){var f=function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return l.next(1<p.length?p:p[0])};return s(f),function(){return u(f)}})}no.fromEvent=Xp;function k_(r,e){return function(t){return function(i){return r[t](e,i)}}}function CF(r){return nn.isFunction(r.addListener)&&nn.isFunction(r.removeListener)}function AF(r){return nn.isFunction(r.on)&&nn.isFunction(r.off)}function EF(r){return nn.isFunction(r.addEventListener)&&nn.isFunction(r.removeEventListener)}});var R_=_(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.fromEventPattern=void 0;var qF=fe(),xF=le(),MF=pi();function D_(r,e,t){return t?D_(r,e).pipe(MF.mapOneOrManyArgs(t)):new qF.Observable(function(i){var n=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return i.next(u.length===1?u[0]:u)},s=r(n);return xF.isFunction(e)?function(){return e(n,s)}:void 0})}Zu.fromEventPattern=D_});var V_=_(oo=>{"use strict";var LF=oo&&oo.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(p){return function(v){return f([p,v])}}function f(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=p[0]&2?n.return:p[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,p[1])).done)return s;switch(n=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,n=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(v){p=[6,v],n=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}};Object.defineProperty(oo,"__esModule",{value:!0});oo.generate=void 0;var z_=Xe(),jF=_s(),IF=Ts(),kF=Vp();function FF(r,e,t,i,n){var s,u,l,f;arguments.length===1?(s=r,f=s.initialState,e=s.condition,t=s.iterate,u=s.resultSelector,l=u===void 0?z_.identity:u,n=s.scheduler):(f=r,!i||jF.isScheduler(i)?(l=z_.identity,n=i):l=i);function p(){var v;return LF(this,function(b){switch(b.label){case 0:v=f,b.label=1;case 1:return!e||e(v)?[4,l(v)]:[3,4];case 2:b.sent(),b.label=3;case 3:return v=t(v),[3,1];case 4:return[2]}})}return IF.defer(n?function(){return kF.scheduleIterable(p(),n)}:p)}oo.generate=FF});var N_=_(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.iif=void 0;var DF=Ts();function RF(r,e,t){return DF.defer(function(){return r()?e:t})}ec.iif=RF});var vi=_(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.timer=void 0;var zF=fe(),VF=_t(),NF=_s(),WF=Du();function UF(r,e,t){r===void 0&&(r=0),t===void 0&&(t=VF.async);var i=-1;return e!=null&&(NF.isScheduler(e)?t=e:i=e),new zF.Observable(function(n){var s=WF.isValidDate(r)?+r-t.now():r;s<0&&(s=0);var u=0;return t.schedule(function(){n.closed||(n.next(u++),0<=i?this.schedule(void 0,i):n.complete())},s)})}tc.timer=UF});var Jp=_(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.interval=void 0;var GF=_t(),BF=vi();function HF(r,e){return r===void 0&&(r=0),e===void 0&&(e=GF.asyncScheduler),r<0&&(r=0),BF.timer(r,r,e)}rc.interval=HF});var U_=_(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.merge=void 0;var $F=io(),YF=X(),QF=Zt(),W_=Pt(),KF=Nr();function XF(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=W_.popScheduler(r),i=W_.popNumber(r,1/0),n=r;return n.length?n.length===1?YF.innerFrom(n[0]):$F.mergeAll(i)(KF.from(n,t)):QF.EMPTY}ic.merge=XF});var Zp=_(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.never=on.NEVER=void 0;var JF=fe(),ZF=Ke();on.NEVER=new JF.Observable(ZF.noop);function eD(){return on.NEVER}on.never=eD});var mi=_(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.argsOrArgArray=void 0;var tD=Array.isArray;function rD(r){return r.length===1&&tD(r[0])?r[0]:r}nc.argsOrArgArray=rD});var ed=_(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.onErrorResumeNext=void 0;var iD=fe(),nD=mi(),oD=U(),G_=Ke(),sD=X();function aD(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=nD.argsOrArgArray(r);return new iD.Observable(function(i){var n=0,s=function(){if(n<t.length){var u=void 0;try{u=sD.innerFrom(t[n++])}catch{s();return}var l=new oD.OperatorSubscriber(i,void 0,G_.noop,G_.noop);u.subscribe(l),l.add(s)}else i.complete()};s()})}oc.onErrorResumeNext=aD});var B_=_(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});sc.pairs=void 0;var uD=Nr();function cD(r,e){return uD.from(Object.entries(r),e)}sc.pairs=cD});var td=_(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.not=void 0;function lD(r,e){return function(t,i){return!r.call(e,t,i)}}ac.not=lD});var Gr=_(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.filter=void 0;var hD=z(),fD=U();function pD(r,e){return hD.operate(function(t,i){var n=0;t.subscribe(fD.createOperatorSubscriber(i,function(s){return r.call(e,s,n++)&&i.next(s)}))})}uc.filter=pD});var Y_=_(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.partition=void 0;var dD=td(),H_=Gr(),$_=X();function vD(r,e,t){return[H_.filter(e,t)($_.innerFrom(r)),H_.filter(dD.not(e,t))($_.innerFrom(r))]}cc.partition=vD});var rd=_(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.raceInit=so.race=void 0;var mD=fe(),Q_=X(),yD=mi(),gD=U();function bD(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r=yD.argsOrArgArray(r),r.length===1?Q_.innerFrom(r[0]):new mD.Observable(K_(r))}so.race=bD;function K_(r){return function(e){for(var t=[],i=function(s){t.push(Q_.innerFrom(r[s]).subscribe(gD.createOperatorSubscriber(e,function(u){if(t){for(var l=0;l<t.length;l++)l!==s&&t[l].unsubscribe();t=null}e.next(u)})))},n=0;t&&!e.closed&&n<r.length;n++)i(n)}}so.raceInit=K_});var X_=_(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.range=void 0;var _D=fe(),PD=Zt();function wD(r,e,t){if(e==null&&(e=r,r=0),e<=0)return PD.EMPTY;var i=e+r;return new _D.Observable(t?function(n){var s=r;return t.schedule(function(){s<i?(n.next(s++),this.schedule()):n.complete()})}:function(n){for(var s=r;s<i&&!n.closed;)n.next(s++);n.complete()})}lc.range=wD});var J_=_(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.using=void 0;var OD=fe(),TD=X(),SD=Zt();function CD(r,e){return new OD.Observable(function(t){var i=r(),n=e(i),s=n?TD.innerFrom(n):SD.EMPTY;return s.subscribe(t),function(){i&&i.unsubscribe()}})}hc.using=CD});var fc=_(yi=>{"use strict";var AD=yi&&yi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},ED=yi&&yi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(yi,"__esModule",{value:!0});yi.zip=void 0;var qD=fe(),xD=X(),MD=mi(),LD=Zt(),jD=U(),ID=Pt();function kD(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=ID.popResultSelector(r),i=MD.argsOrArgArray(r);return i.length?new qD.Observable(function(n){var s=i.map(function(){return[]}),u=i.map(function(){return!1});n.add(function(){s=u=null});for(var l=function(p){xD.innerFrom(i[p]).subscribe(jD.createOperatorSubscriber(n,function(v){if(s[p].push(v),s.every(function(T){return T.length})){var b=s.map(function(T){return T.shift()});n.next(t?t.apply(void 0,ED([],AD(b))):b),s.some(function(T,S){return!T.length&&u[S]})&&n.complete()}},function(){u[p]=!0,!s[p].length&&n.complete()}))},f=0;!n.closed&&f<i.length;f++)l(f);return function(){s=u=null}}):LD.EMPTY}yi.zip=kD});var e0=_(Z_=>{"use strict";Object.defineProperty(Z_,"__esModule",{value:!0})});var dc=_(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.audit=void 0;var FD=z(),DD=X(),t0=U();function RD(r){return FD.operate(function(e,t){var i=!1,n=null,s=null,u=!1,l=function(){if(s?.unsubscribe(),s=null,i){i=!1;var p=n;n=null,t.next(p)}u&&t.complete()},f=function(){s=null,u&&t.complete()};e.subscribe(t0.createOperatorSubscriber(t,function(p){i=!0,n=p,s||DD.innerFrom(r(p)).subscribe(s=t0.createOperatorSubscriber(t,l,f))},function(){u=!0,(!i||!s||s.closed)&&t.complete()}))})}pc.audit=RD});var id=_(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.auditTime=void 0;var zD=_t(),VD=dc(),ND=vi();function WD(r,e){return e===void 0&&(e=zD.asyncScheduler),VD.audit(function(){return ND.timer(r,e)})}vc.auditTime=WD});var nd=_(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.buffer=void 0;var UD=z(),GD=Ke(),r0=U(),BD=X();function HD(r){return UD.operate(function(e,t){var i=[];return e.subscribe(r0.createOperatorSubscriber(t,function(n){return i.push(n)},function(){t.next(i),t.complete()})),BD.innerFrom(r).subscribe(r0.createOperatorSubscriber(t,function(){var n=i;i=[],t.next(n)},GD.noop)),function(){i=null}})}mc.buffer=HD});var sd=_(ao=>{"use strict";var od=ao&&ao.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ao,"__esModule",{value:!0});ao.bufferCount=void 0;var $D=z(),YD=U(),QD=zr();function KD(r,e){return e===void 0&&(e=null),e=e??r,$D.operate(function(t,i){var n=[],s=0;t.subscribe(YD.createOperatorSubscriber(i,function(u){var l,f,p,v,b=null;s++%e===0&&n.push([]);try{for(var T=od(n),S=T.next();!S.done;S=T.next()){var q=S.value;q.push(u),r<=q.length&&(b=b??[],b.push(q))}}catch(D){l={error:D}}finally{try{S&&!S.done&&(f=T.return)&&f.call(T)}finally{if(l)throw l.error}}if(b)try{for(var M=od(b),j=M.next();!j.done;j=M.next()){var q=j.value;QD.arrRemove(n,q),i.next(q)}}catch(D){p={error:D}}finally{try{j&&!j.done&&(v=M.return)&&v.call(M)}finally{if(p)throw p.error}}},function(){var u,l;try{for(var f=od(n),p=f.next();!p.done;p=f.next()){var v=p.value;i.next(v)}}catch(b){u={error:b}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(u)throw u.error}}i.complete()},void 0,function(){n=null}))})}ao.bufferCount=KD});var ad=_(uo=>{"use strict";var XD=uo&&uo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(uo,"__esModule",{value:!0});uo.bufferTime=void 0;var JD=Mt(),ZD=z(),eR=U(),tR=zr(),rR=_t(),iR=Pt(),i0=Vr();function nR(r){for(var e,t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=(e=iR.popScheduler(i))!==null&&e!==void 0?e:rR.asyncScheduler,u=(t=i[0])!==null&&t!==void 0?t:null,l=i[1]||1/0;return ZD.operate(function(f,p){var v=[],b=!1,T=function(M){var j=M.buffer,D=M.subs;D.unsubscribe(),tR.arrRemove(v,M),p.next(j),b&&S()},S=function(){if(v){var M=new JD.Subscription;p.add(M);var j=[],D={buffer:j,subs:M};v.push(D),i0.executeSchedule(M,s,function(){return T(D)},r)}};u!==null&&u>=0?i0.executeSchedule(p,s,S,u,!0):b=!0,S();var q=eR.createOperatorSubscriber(p,function(M){var j,D,V=v.slice();try{for(var Y=XD(V),ie=Y.next();!ie.done;ie=Y.next()){var pe=ie.value,ke=pe.buffer;ke.push(M),l<=ke.length&&T(pe)}}catch(pt){j={error:pt}}finally{try{ie&&!ie.done&&(D=Y.return)&&D.call(Y)}finally{if(j)throw j.error}}},function(){for(;v?.length;)p.next(v.shift().buffer);q?.unsubscribe(),p.complete(),p.unsubscribe()},void 0,function(){return v=null});f.subscribe(q)})}uo.bufferTime=nR});var cd=_(co=>{"use strict";var oR=co&&co.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(co,"__esModule",{value:!0});co.bufferToggle=void 0;var sR=Mt(),aR=z(),n0=X(),ud=U(),o0=Ke(),uR=zr();function cR(r,e){return aR.operate(function(t,i){var n=[];n0.innerFrom(r).subscribe(ud.createOperatorSubscriber(i,function(s){var u=[];n.push(u);var l=new sR.Subscription,f=function(){uR.arrRemove(n,u),i.next(u),l.unsubscribe()};l.add(n0.innerFrom(e(s)).subscribe(ud.createOperatorSubscriber(i,f,o0.noop)))},o0.noop)),t.subscribe(ud.createOperatorSubscriber(i,function(s){var u,l;try{for(var f=oR(n),p=f.next();!p.done;p=f.next()){var v=p.value;v.push(s)}}catch(b){u={error:b}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(u)throw u.error}}},function(){for(;n.length>0;)i.next(n.shift());i.complete()}))})}co.bufferToggle=cR});var ld=_(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.bufferWhen=void 0;var lR=z(),hR=Ke(),s0=U(),fR=X();function pR(r){return lR.operate(function(e,t){var i=null,n=null,s=function(){n?.unsubscribe();var u=i;i=[],u&&t.next(u),fR.innerFrom(r()).subscribe(n=s0.createOperatorSubscriber(t,s,hR.noop))};s(),e.subscribe(s0.createOperatorSubscriber(t,function(u){return i?.push(u)},function(){i&&t.next(i),t.complete()},void 0,function(){return i=n=null}))})}yc.bufferWhen=pR});var hd=_(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.catchError=void 0;var dR=X(),vR=U(),mR=z();function a0(r){return mR.operate(function(e,t){var i=null,n=!1,s;i=e.subscribe(vR.createOperatorSubscriber(t,void 0,void 0,function(u){s=dR.innerFrom(r(u,a0(r)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):n=!0})),n&&(i.unsubscribe(),i=null,s.subscribe(t))})}gc.catchError=a0});var fd=_(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.scanInternals=void 0;var yR=U();function gR(r,e,t,i,n){return function(s,u){var l=t,f=e,p=0;s.subscribe(yR.createOperatorSubscriber(u,function(v){var b=p++;f=l?r(f,v,b):(l=!0,v),i&&u.next(f)},n&&function(){l&&u.next(f),u.complete()}))}}bc.scanInternals=gR});var sn=_(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.reduce=void 0;var bR=fd(),_R=z();function PR(r,e){return _R.operate(bR.scanInternals(r,e,arguments.length>=2,!1,!0))}_c.reduce=PR});var wc=_(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.toArray=void 0;var wR=sn(),OR=z(),TR=function(r,e){return r.push(e),r};function SR(){return OR.operate(function(r,e){wR.reduce(TR,[])(r).subscribe(e)})}Pc.toArray=SR});var pd=_(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.joinAllInternals=void 0;var CR=Xe(),AR=pi(),ER=ms(),qR=vr(),xR=wc();function MR(r,e){return ER.pipe(xR.toArray(),qR.mergeMap(function(t){return r(t)}),e?AR.mapOneOrManyArgs(e):CR.identity)}Oc.joinAllInternals=MR});var Sc=_(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.combineLatestAll=void 0;var LR=Uu(),jR=pd();function IR(r){return jR.joinAllInternals(LR.combineLatest,r)}Tc.combineLatestAll=IR});var dd=_(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.combineAll=void 0;var kR=Sc();Cc.combineAll=kR.combineLatestAll});var vd=_(gi=>{"use strict";var u0=gi&&gi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},c0=gi&&gi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(gi,"__esModule",{value:!0});gi.combineLatest=void 0;var FR=Uu(),DR=z(),RR=mi(),zR=pi(),VR=ms(),NR=Pt();function l0(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=NR.popResultSelector(r);return t?VR.pipe(l0.apply(void 0,c0([],u0(r))),zR.mapOneOrManyArgs(t)):DR.operate(function(i,n){FR.combineLatestInit(c0([i],u0(RR.argsOrArgArray(r))))(n)})}gi.combineLatest=l0});var md=_(bi=>{"use strict";var WR=bi&&bi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},UR=bi&&bi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(bi,"__esModule",{value:!0});bi.combineLatestWith=void 0;var GR=vd();function BR(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return GR.combineLatest.apply(void 0,UR([],WR(r)))}bi.combineLatestWith=BR});var Ec=_(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.concatMap=void 0;var h0=vr(),HR=le();function $R(r,e){return HR.isFunction(e)?h0.mergeMap(r,e,1):h0.mergeMap(r,1)}Ac.concatMap=$R});var yd=_(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.concatMapTo=void 0;var f0=Ec(),YR=le();function QR(r,e){return YR.isFunction(e)?f0.concatMap(function(){return r},e):f0.concatMap(function(){return r})}qc.concatMapTo=QR});var gd=_(_i=>{"use strict";var KR=_i&&_i.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},XR=_i&&_i.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(_i,"__esModule",{value:!0});_i.concat=void 0;var JR=z(),ZR=ws(),ez=Pt(),tz=Nr();function rz(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=ez.popScheduler(r);return JR.operate(function(i,n){ZR.concatAll()(tz.from(XR([i],KR(r)),t)).subscribe(n)})}_i.concat=rz});var bd=_(Pi=>{"use strict";var iz=Pi&&Pi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},nz=Pi&&Pi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.concatWith=void 0;var oz=gd();function sz(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return oz.concat.apply(void 0,nz([],iz(r)))}Pi.concatWith=sz});var p0=_(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.fromSubscribable=void 0;var az=fe();function uz(r){return new az.Observable(function(e){return r.subscribe(e)})}xc.fromSubscribable=uz});var Ss=_(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.connect=void 0;var cz=Je(),lz=X(),hz=z(),fz=p0(),pz={connector:function(){return new cz.Subject}};function dz(r,e){e===void 0&&(e=pz);var t=e.connector;return hz.operate(function(i,n){var s=t();lz.innerFrom(r(fz.fromSubscribable(s))).subscribe(n),n.add(i.subscribe(s))})}Mc.connect=dz});var _d=_(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.count=void 0;var vz=sn();function mz(r){return vz.reduce(function(e,t,i){return!r||r(t,i)?e+1:e},0)}Lc.count=mz});var Pd=_(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.debounce=void 0;var yz=z(),gz=Ke(),d0=U(),bz=X();function _z(r){return yz.operate(function(e,t){var i=!1,n=null,s=null,u=function(){if(s?.unsubscribe(),s=null,i){i=!1;var l=n;n=null,t.next(l)}};e.subscribe(d0.createOperatorSubscriber(t,function(l){s?.unsubscribe(),i=!0,n=l,s=d0.createOperatorSubscriber(t,u,gz.noop),bz.innerFrom(r(l)).subscribe(s)},function(){u(),t.complete()},void 0,function(){n=s=null}))})}jc.debounce=_z});var wd=_(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.debounceTime=void 0;var Pz=_t(),wz=z(),Oz=U();function Tz(r,e){return e===void 0&&(e=Pz.asyncScheduler),wz.operate(function(t,i){var n=null,s=null,u=null,l=function(){if(n){n.unsubscribe(),n=null;var p=s;s=null,i.next(p)}};function f(){var p=u+r,v=e.now();if(v<p){n=this.schedule(void 0,p-v),i.add(n);return}l()}t.subscribe(Oz.createOperatorSubscriber(i,function(p){s=p,u=e.now(),n||(n=e.schedule(f,r),i.add(n))},function(){l(),i.complete()},void 0,function(){s=n=null}))})}Ic.debounceTime=Tz});var lo=_(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.defaultIfEmpty=void 0;var Sz=z(),Cz=U();function Az(r){return Sz.operate(function(e,t){var i=!1;e.subscribe(Cz.createOperatorSubscriber(t,function(n){i=!0,t.next(n)},function(){i||t.next(r),t.complete()}))})}kc.defaultIfEmpty=Az});var ho=_(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.take=void 0;var Ez=Zt(),qz=z(),xz=U();function Mz(r){return r<=0?function(){return Ez.EMPTY}:qz.operate(function(e,t){var i=0;e.subscribe(xz.createOperatorSubscriber(t,function(n){++i<=r&&(t.next(n),r<=i&&t.complete())}))})}Fc.take=Mz});var Rc=_(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.ignoreElements=void 0;var Lz=z(),jz=U(),Iz=Ke();function kz(){return Lz.operate(function(r,e){r.subscribe(jz.createOperatorSubscriber(e,Iz.noop))})}Dc.ignoreElements=kz});var Vc=_(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.mapTo=void 0;var Fz=Ur();function Dz(r){return Fz.map(function(){return r})}zc.mapTo=Dz});var Wc=_(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.delayWhen=void 0;var Rz=Os(),v0=ho(),zz=Rc(),Vz=Vc(),Nz=vr(),Wz=X();function m0(r,e){return e?function(t){return Rz.concat(e.pipe(v0.take(1),zz.ignoreElements()),t.pipe(m0(r)))}:Nz.mergeMap(function(t,i){return Wz.innerFrom(r(t,i)).pipe(v0.take(1),Vz.mapTo(t))})}Nc.delayWhen=m0});var Od=_(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.delay=void 0;var Uz=_t(),Gz=Wc(),Bz=vi();function Hz(r,e){e===void 0&&(e=Uz.asyncScheduler);var t=Bz.timer(r,e);return Gz.delayWhen(function(){return t})}Uc.delay=Hz});var Td=_(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.dematerialize=void 0;var $z=Eu(),Yz=z(),Qz=U();function Kz(){return Yz.operate(function(r,e){r.subscribe(Qz.createOperatorSubscriber(e,function(t){return $z.observeNotification(t,e)}))})}Gc.dematerialize=Kz});var Sd=_(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.distinct=void 0;var Xz=z(),y0=U(),Jz=Ke(),Zz=X();function eV(r,e){return Xz.operate(function(t,i){var n=new Set;t.subscribe(y0.createOperatorSubscriber(i,function(s){var u=r?r(s):s;n.has(u)||(n.add(u),i.next(s))})),e&&Zz.innerFrom(e).subscribe(y0.createOperatorSubscriber(i,function(){return n.clear()},Jz.noop))})}Bc.distinct=eV});var $c=_(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.distinctUntilChanged=void 0;var tV=Xe(),rV=z(),iV=U();function nV(r,e){return e===void 0&&(e=tV.identity),r=r??oV,rV.operate(function(t,i){var n,s=!0;t.subscribe(iV.createOperatorSubscriber(i,function(u){var l=e(u);(s||!r(n,l))&&(s=!1,n=l,i.next(u))}))})}Hc.distinctUntilChanged=nV;function oV(r,e){return r===e}});var Cd=_(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.distinctUntilKeyChanged=void 0;var sV=$c();function aV(r,e){return sV.distinctUntilChanged(function(t,i){return e?e(t[r],i[r]):t[r]===i[r]})}Yc.distinctUntilKeyChanged=aV});var fo=_(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.throwIfEmpty=void 0;var uV=hi(),cV=z(),lV=U();function hV(r){return r===void 0&&(r=fV),cV.operate(function(e,t){var i=!1;e.subscribe(lV.createOperatorSubscriber(t,function(n){i=!0,t.next(n)},function(){return i?t.complete():t.error(r())}))})}Qc.throwIfEmpty=hV;function fV(){return new uV.EmptyError}});var Ad=_(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.elementAt=void 0;var g0=Gp(),pV=Gr(),dV=fo(),vV=lo(),mV=ho();function yV(r,e){if(r<0)throw new g0.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(i){return i.pipe(pV.filter(function(n,s){return s===r}),mV.take(1),t?vV.defaultIfEmpty(e):dV.throwIfEmpty(function(){return new g0.ArgumentOutOfRangeError}))}}Kc.elementAt=yV});var Ed=_(wi=>{"use strict";var gV=wi&&wi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},bV=wi&&wi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(wi,"__esModule",{value:!0});wi.endWith=void 0;var _V=Os(),PV=Cu();function wV(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return _V.concat(t,PV.of.apply(void 0,bV([],gV(r))))}}wi.endWith=wV});var qd=_(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.every=void 0;var OV=z(),TV=U();function SV(r,e){return OV.operate(function(t,i){var n=0;t.subscribe(TV.createOperatorSubscriber(i,function(s){r.call(e,s,n++,t)||(i.next(!1),i.complete())},function(){i.next(!0),i.complete()}))})}Xc.every=SV});var Zc=_(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.exhaustMap=void 0;var CV=Ur(),b0=X(),AV=z(),_0=U();function P0(r,e){return e?function(t){return t.pipe(P0(function(i,n){return b0.innerFrom(r(i,n)).pipe(CV.map(function(s,u){return e(i,s,n,u)}))}))}:AV.operate(function(t,i){var n=0,s=null,u=!1;t.subscribe(_0.createOperatorSubscriber(i,function(l){s||(s=_0.createOperatorSubscriber(i,void 0,function(){s=null,u&&i.complete()}),b0.innerFrom(r(l,n++)).subscribe(s))},function(){u=!0,!s&&i.complete()}))})}Jc.exhaustMap=P0});var tl=_(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.exhaustAll=void 0;var EV=Zc(),qV=Xe();function xV(){return EV.exhaustMap(qV.identity)}el.exhaustAll=xV});var xd=_(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.exhaust=void 0;var MV=tl();rl.exhaust=MV.exhaustAll});var Md=_(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.expand=void 0;var LV=z(),jV=Bu();function IV(r,e,t){return e===void 0&&(e=1/0),e=(e||0)<1?1/0:e,LV.operate(function(i,n){return jV.mergeInternals(i,n,r,e,void 0,!0,t)})}il.expand=IV});var Ld=_(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.finalize=void 0;var kV=z();function FV(r){return kV.operate(function(e,t){try{e.subscribe(t)}finally{t.add(r)}})}nl.finalize=FV});var ol=_(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.createFind=po.find=void 0;var DV=z(),RV=U();function zV(r,e){return DV.operate(w0(r,e,"value"))}po.find=zV;function w0(r,e,t){var i=t==="index";return function(n,s){var u=0;n.subscribe(RV.createOperatorSubscriber(s,function(l){var f=u++;r.call(e,l,f,n)&&(s.next(i?f:l),s.complete())},function(){s.next(i?-1:void 0),s.complete()}))}}po.createFind=w0});var jd=_(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.findIndex=void 0;var VV=z(),NV=ol();function WV(r,e){return VV.operate(NV.createFind(r,e,"index"))}sl.findIndex=WV});var Id=_(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.first=void 0;var UV=hi(),GV=Gr(),BV=ho(),HV=lo(),$V=fo(),YV=Xe();function QV(r,e){var t=arguments.length>=2;return function(i){return i.pipe(r?GV.filter(function(n,s){return r(n,s,i)}):YV.identity,BV.take(1),t?HV.defaultIfEmpty(e):$V.throwIfEmpty(function(){return new UV.EmptyError}))}}al.first=QV});var kd=_(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.groupBy=void 0;var KV=fe(),XV=X(),JV=Je(),ZV=z(),O0=U();function eN(r,e,t,i){return ZV.operate(function(n,s){var u;!e||typeof e=="function"?u=e:(t=e.duration,u=e.element,i=e.connector);var l=new Map,f=function(q){l.forEach(q),q(s)},p=function(q){return f(function(M){return M.error(q)})},v=0,b=!1,T=new O0.OperatorSubscriber(s,function(q){try{var M=r(q),j=l.get(M);if(!j){l.set(M,j=i?i():new JV.Subject);var D=S(M,j);if(s.next(D),t){var V=O0.createOperatorSubscriber(j,function(){j.complete(),V?.unsubscribe()},void 0,void 0,function(){return l.delete(M)});T.add(XV.innerFrom(t(D)).subscribe(V))}}j.next(u?u(q):q)}catch(Y){p(Y)}},function(){return f(function(q){return q.complete()})},p,function(){return l.clear()},function(){return b=!0,v===0});n.subscribe(T);function S(q,M){var j=new KV.Observable(function(D){v++;var V=M.subscribe(D);return function(){V.unsubscribe(),--v===0&&b&&T.unsubscribe()}});return j.key=q,j}})}ul.groupBy=eN});var Fd=_(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.isEmpty=void 0;var tN=z(),rN=U();function iN(){return tN.operate(function(r,e){r.subscribe(rN.createOperatorSubscriber(e,function(){e.next(!1),e.complete()},function(){e.next(!0),e.complete()}))})}cl.isEmpty=iN});var ll=_(vo=>{"use strict";var nN=vo&&vo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(vo,"__esModule",{value:!0});vo.takeLast=void 0;var oN=Zt(),sN=z(),aN=U();function uN(r){return r<=0?function(){return oN.EMPTY}:sN.operate(function(e,t){var i=[];e.subscribe(aN.createOperatorSubscriber(t,function(n){i.push(n),r<i.length&&i.shift()},function(){var n,s;try{for(var u=nN(i),l=u.next();!l.done;l=u.next()){var f=l.value;t.next(f)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}t.complete()},void 0,function(){i=null}))})}vo.takeLast=uN});var Dd=_(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.last=void 0;var cN=hi(),lN=Gr(),hN=ll(),fN=fo(),pN=lo(),dN=Xe();function vN(r,e){var t=arguments.length>=2;return function(i){return i.pipe(r?lN.filter(function(n,s){return r(n,s,i)}):dN.identity,hN.takeLast(1),t?pN.defaultIfEmpty(e):fN.throwIfEmpty(function(){return new cN.EmptyError}))}}hl.last=vN});var zd=_(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.materialize=void 0;var Rd=Eu(),mN=z(),yN=U();function gN(){return mN.operate(function(r,e){r.subscribe(yN.createOperatorSubscriber(e,function(t){e.next(Rd.Notification.createNext(t))},function(){e.next(Rd.Notification.createComplete()),e.complete()},function(t){e.next(Rd.Notification.createError(t)),e.complete()}))})}fl.materialize=gN});var Vd=_(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.max=void 0;var bN=sn(),_N=le();function PN(r){return bN.reduce(_N.isFunction(r)?function(e,t){return r(e,t)>0?e:t}:function(e,t){return e>t?e:t})}pl.max=PN});var Nd=_(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.flatMap=void 0;var wN=vr();dl.flatMap=wN.mergeMap});var Wd=_(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.mergeMapTo=void 0;var T0=vr(),ON=le();function TN(r,e,t){return t===void 0&&(t=1/0),ON.isFunction(e)?T0.mergeMap(function(){return r},e,t):(typeof e=="number"&&(t=e),T0.mergeMap(function(){return r},t))}vl.mergeMapTo=TN});var Ud=_(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.mergeScan=void 0;var SN=z(),CN=Bu();function AN(r,e,t){return t===void 0&&(t=1/0),SN.operate(function(i,n){var s=e;return CN.mergeInternals(i,n,function(u,l){return r(s,u,l)},t,function(u){s=u},!1,void 0,function(){return s=null})})}ml.mergeScan=AN});var Gd=_(Oi=>{"use strict";var EN=Oi&&Oi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},qN=Oi&&Oi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.merge=void 0;var xN=z(),MN=mi(),LN=io(),S0=Pt(),jN=Nr();function IN(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=S0.popScheduler(r),i=S0.popNumber(r,1/0);return r=MN.argsOrArgArray(r),xN.operate(function(n,s){LN.mergeAll(i)(jN.from(qN([n],EN(r)),t)).subscribe(s)})}Oi.merge=IN});var Bd=_(Ti=>{"use strict";var kN=Ti&&Ti.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},FN=Ti&&Ti.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.mergeWith=void 0;var DN=Gd();function RN(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return DN.merge.apply(void 0,FN([],kN(r)))}Ti.mergeWith=RN});var Hd=_(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.min=void 0;var zN=sn(),VN=le();function NN(r){return zN.reduce(VN.isFunction(r)?function(e,t){return r(e,t)<0?e:t}:function(e,t){return e<t?e:t})}yl.min=NN});var Cs=_(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.multicast=void 0;var WN=ys(),C0=le(),UN=Ss();function GN(r,e){var t=C0.isFunction(r)?r:function(){return r};return C0.isFunction(e)?UN.connect(e,{connector:t}):function(i){return new WN.ConnectableObservable(i,t)}}gl.multicast=GN});var $d=_(mr=>{"use strict";var BN=mr&&mr.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},HN=mr&&mr.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(mr,"__esModule",{value:!0});mr.onErrorResumeNext=mr.onErrorResumeNextWith=void 0;var $N=mi(),YN=ed();function A0(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=$N.argsOrArgArray(r);return function(i){return YN.onErrorResumeNext.apply(void 0,HN([i],BN(t)))}}mr.onErrorResumeNextWith=A0;mr.onErrorResumeNext=A0});var Yd=_(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.pairwise=void 0;var QN=z(),KN=U();function XN(){return QN.operate(function(r,e){var t,i=!1;r.subscribe(KN.createOperatorSubscriber(e,function(n){var s=t;t=n,i&&e.next([s,n]),i=!0}))})}bl.pairwise=XN});var Qd=_(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.pluck=void 0;var JN=Ur();function ZN(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.length;if(t===0)throw new Error("list of properties cannot be empty.");return JN.map(function(i){for(var n=i,s=0;s<t;s++){var u=n?.[r[s]];if(typeof u<"u")n=u;else return}return n})}_l.pluck=ZN});var Kd=_(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.publish=void 0;var e2=Je(),t2=Cs(),r2=Ss();function i2(r){return r?function(e){return r2.connect(r)(e)}:function(e){return t2.multicast(new e2.Subject)(e)}}Pl.publish=i2});var Xd=_(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.publishBehavior=void 0;var n2=Ap(),o2=ys();function s2(r){return function(e){var t=new n2.BehaviorSubject(r);return new o2.ConnectableObservable(e,function(){return t})}}wl.publishBehavior=s2});var Jd=_(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.publishLast=void 0;var a2=ru(),u2=ys();function c2(){return function(r){var e=new a2.AsyncSubject;return new u2.ConnectableObservable(r,function(){return e})}}Ol.publishLast=c2});var Zd=_(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.publishReplay=void 0;var l2=tu(),h2=Cs(),E0=le();function f2(r,e,t,i){t&&!E0.isFunction(t)&&(i=t);var n=E0.isFunction(t)?t:void 0;return function(s){return h2.multicast(new l2.ReplaySubject(r,e,i),n)(s)}}Tl.publishReplay=f2});var Sl=_(Si=>{"use strict";var p2=Si&&Si.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},d2=Si&&Si.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Si,"__esModule",{value:!0});Si.raceWith=void 0;var v2=rd(),m2=z(),y2=Xe();function g2(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length?m2.operate(function(t,i){v2.raceInit(d2([t],p2(r)))(i)}):y2.identity}Si.raceWith=g2});var ev=_(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.repeat=void 0;var b2=Zt(),_2=z(),q0=U(),P2=X(),w2=vi();function O2(r){var e,t=1/0,i;return r!=null&&(typeof r=="object"?(e=r.count,t=e===void 0?1/0:e,i=r.delay):t=r),t<=0?function(){return b2.EMPTY}:_2.operate(function(n,s){var u=0,l,f=function(){if(l?.unsubscribe(),l=null,i!=null){var v=typeof i=="number"?w2.timer(i):P2.innerFrom(i(u)),b=q0.createOperatorSubscriber(s,function(){b.unsubscribe(),p()});v.subscribe(b)}else p()},p=function(){var v=!1;l=n.subscribe(q0.createOperatorSubscriber(s,void 0,function(){++u<t?l?f():v=!0:s.complete()})),v&&f()};p()})}Cl.repeat=O2});var tv=_(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.repeatWhen=void 0;var T2=X(),S2=Je(),C2=z(),x0=U();function A2(r){return C2.operate(function(e,t){var i,n=!1,s,u=!1,l=!1,f=function(){return l&&u&&(t.complete(),!0)},p=function(){return s||(s=new S2.Subject,T2.innerFrom(r(s)).subscribe(x0.createOperatorSubscriber(t,function(){i?v():n=!0},function(){u=!0,f()}))),s},v=function(){l=!1,i=e.subscribe(x0.createOperatorSubscriber(t,void 0,function(){l=!0,!f()&&p().next()})),n&&(i.unsubscribe(),i=null,n=!1,v())};v()})}Al.repeatWhen=A2});var rv=_(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.retry=void 0;var E2=z(),M0=U(),q2=Xe(),x2=vi(),M2=X();function L2(r){r===void 0&&(r=1/0);var e;r&&typeof r=="object"?e=r:e={count:r};var t=e.count,i=t===void 0?1/0:t,n=e.delay,s=e.resetOnSuccess,u=s===void 0?!1:s;return i<=0?q2.identity:E2.operate(function(l,f){var p=0,v,b=function(){var T=!1;v=l.subscribe(M0.createOperatorSubscriber(f,function(S){u&&(p=0),f.next(S)},void 0,function(S){if(p++<i){var q=function(){v?(v.unsubscribe(),v=null,b()):T=!0};if(n!=null){var M=typeof n=="number"?x2.timer(n):M2.innerFrom(n(S,p)),j=M0.createOperatorSubscriber(f,function(){j.unsubscribe(),q()},function(){f.complete()});M.subscribe(j)}else q()}else f.error(S)})),T&&(v.unsubscribe(),v=null,b())};b()})}El.retry=L2});var iv=_(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.retryWhen=void 0;var j2=X(),I2=Je(),k2=z(),L0=U();function F2(r){return k2.operate(function(e,t){var i,n=!1,s,u=function(){i=e.subscribe(L0.createOperatorSubscriber(t,void 0,void 0,function(l){s||(s=new I2.Subject,j2.innerFrom(r(s)).subscribe(L0.createOperatorSubscriber(t,function(){return i?u():n=!0}))),s&&s.next(l)})),n&&(i.unsubscribe(),i=null,n=!1,u())};u()})}ql.retryWhen=F2});var Ml=_(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.sample=void 0;var D2=X(),R2=z(),z2=Ke(),j0=U();function V2(r){return R2.operate(function(e,t){var i=!1,n=null;e.subscribe(j0.createOperatorSubscriber(t,function(s){i=!0,n=s})),D2.innerFrom(r).subscribe(j0.createOperatorSubscriber(t,function(){if(i){i=!1;var s=n;n=null,t.next(s)}},z2.noop))})}xl.sample=V2});var nv=_(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.sampleTime=void 0;var N2=_t(),W2=Ml(),U2=Jp();function G2(r,e){return e===void 0&&(e=N2.asyncScheduler),W2.sample(U2.interval(r,e))}Ll.sampleTime=G2});var ov=_(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.scan=void 0;var B2=z(),H2=fd();function $2(r,e){return B2.operate(H2.scanInternals(r,e,arguments.length>=2,!0))}jl.scan=$2});var sv=_(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.sequenceEqual=void 0;var Y2=z(),Q2=U(),K2=X();function X2(r,e){return e===void 0&&(e=function(t,i){return t===i}),Y2.operate(function(t,i){var n=I0(),s=I0(),u=function(f){i.next(f),i.complete()},l=function(f,p){var v=Q2.createOperatorSubscriber(i,function(b){var T=p.buffer,S=p.complete;T.length===0?S?u(!1):f.buffer.push(b):!e(b,T.shift())&&u(!1)},function(){f.complete=!0;var b=p.complete,T=p.buffer;b&&u(T.length===0),v?.unsubscribe()});return v};t.subscribe(l(n,s)),K2.innerFrom(r).subscribe(l(s,n))})}Il.sequenceEqual=X2;function I0(){return{buffer:[],complete:!1}}});var kl=_(Ci=>{"use strict";var J2=Ci&&Ci.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},Z2=Ci&&Ci.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.share=void 0;var k0=X(),eW=Je(),F0=Ln(),tW=z();function rW(r){r===void 0&&(r={});var e=r.connector,t=e===void 0?function(){return new eW.Subject}:e,i=r.resetOnError,n=i===void 0?!0:i,s=r.resetOnComplete,u=s===void 0?!0:s,l=r.resetOnRefCountZero,f=l===void 0?!0:l;return function(p){var v,b,T,S=0,q=!1,M=!1,j=function(){b?.unsubscribe(),b=void 0},D=function(){j(),v=T=void 0,q=M=!1},V=function(){var Y=v;D(),Y?.unsubscribe()};return tW.operate(function(Y,ie){S++,!M&&!q&&j();var pe=T=T??t();ie.add(function(){S--,S===0&&!M&&!q&&(b=av(V,f))}),pe.subscribe(ie),!v&&S>0&&(v=new F0.SafeSubscriber({next:function(ke){return pe.next(ke)},error:function(ke){M=!0,j(),b=av(D,n,ke),pe.error(ke)},complete:function(){q=!0,j(),b=av(D,u),pe.complete()}}),k0.innerFrom(Y).subscribe(v))})(p)}}Ci.share=rW;function av(r,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];if(e===!0){r();return}if(e!==!1){var n=new F0.SafeSubscriber({next:function(){n.unsubscribe(),r()}});return k0.innerFrom(e.apply(void 0,Z2([],J2(t)))).subscribe(n)}}});var uv=_(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.shareReplay=void 0;var iW=tu(),nW=kl();function oW(r,e,t){var i,n,s,u,l=!1;return r&&typeof r=="object"?(i=r.bufferSize,u=i===void 0?1/0:i,n=r.windowTime,e=n===void 0?1/0:n,s=r.refCount,l=s===void 0?!1:s,t=r.scheduler):u=r??1/0,nW.share({connector:function(){return new iW.ReplaySubject(u,e,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}Fl.shareReplay=oW});var cv=_(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.single=void 0;var sW=hi(),aW=Hp(),uW=Bp(),cW=z(),lW=U();function hW(r){return cW.operate(function(e,t){var i=!1,n,s=!1,u=0;e.subscribe(lW.createOperatorSubscriber(t,function(l){s=!0,(!r||r(l,u++,e))&&(i&&t.error(new aW.SequenceError("Too many matching values")),i=!0,n=l)},function(){i?(t.next(n),t.complete()):t.error(s?new uW.NotFoundError("No matching values"):new sW.EmptyError)}))})}Dl.single=hW});var lv=_(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.skip=void 0;var fW=Gr();function pW(r){return fW.filter(function(e,t){return r<=t})}Rl.skip=pW});var hv=_(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.skipLast=void 0;var dW=Xe(),vW=z(),mW=U();function yW(r){return r<=0?dW.identity:vW.operate(function(e,t){var i=new Array(r),n=0;return e.subscribe(mW.createOperatorSubscriber(t,function(s){var u=n++;if(u<r)i[u]=s;else{var l=u%r,f=i[l];i[l]=s,t.next(f)}})),function(){i=null}})}zl.skipLast=yW});var fv=_(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.skipUntil=void 0;var gW=z(),D0=U(),bW=X(),_W=Ke();function PW(r){return gW.operate(function(e,t){var i=!1,n=D0.createOperatorSubscriber(t,function(){n?.unsubscribe(),i=!0},_W.noop);bW.innerFrom(r).subscribe(n),e.subscribe(D0.createOperatorSubscriber(t,function(s){return i&&t.next(s)}))})}Vl.skipUntil=PW});var pv=_(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.skipWhile=void 0;var wW=z(),OW=U();function TW(r){return wW.operate(function(e,t){var i=!1,n=0;e.subscribe(OW.createOperatorSubscriber(t,function(s){return(i||(i=!r(s,n++)))&&t.next(s)}))})}Nl.skipWhile=TW});var dv=_(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.startWith=void 0;var R0=Os(),SW=Pt(),CW=z();function AW(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=SW.popScheduler(r);return CW.operate(function(i,n){(t?R0.concat(r,i,t):R0.concat(r,i)).subscribe(n)})}Wl.startWith=AW});var mo=_(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.switchMap=void 0;var EW=X(),qW=z(),z0=U();function xW(r,e){return qW.operate(function(t,i){var n=null,s=0,u=!1,l=function(){return u&&!n&&i.complete()};t.subscribe(z0.createOperatorSubscriber(i,function(f){n?.unsubscribe();var p=0,v=s++;EW.innerFrom(r(f,v)).subscribe(n=z0.createOperatorSubscriber(i,function(b){return i.next(e?e(f,b,v,p++):b)},function(){n=null,l()}))},function(){u=!0,l()}))})}Ul.switchMap=xW});var vv=_(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.switchAll=void 0;var MW=mo(),LW=Xe();function jW(){return MW.switchMap(LW.identity)}Gl.switchAll=jW});var mv=_(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.switchMapTo=void 0;var V0=mo(),IW=le();function kW(r,e){return IW.isFunction(e)?V0.switchMap(function(){return r},e):V0.switchMap(function(){return r})}Bl.switchMapTo=kW});var yv=_(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.switchScan=void 0;var FW=mo(),DW=z();function RW(r,e){return DW.operate(function(t,i){var n=e;return FW.switchMap(function(s,u){return r(n,s,u)},function(s,u){return n=u,u})(t).subscribe(i),function(){n=null}})}Hl.switchScan=RW});var gv=_($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.takeUntil=void 0;var zW=z(),VW=U(),NW=X(),WW=Ke();function UW(r){return zW.operate(function(e,t){NW.innerFrom(r).subscribe(VW.createOperatorSubscriber(t,function(){return t.complete()},WW.noop)),!t.closed&&e.subscribe(t)})}$l.takeUntil=UW});var bv=_(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.takeWhile=void 0;var GW=z(),BW=U();function HW(r,e){return e===void 0&&(e=!1),GW.operate(function(t,i){var n=0;t.subscribe(BW.createOperatorSubscriber(i,function(s){var u=r(s,n++);(u||e)&&i.next(s),!u&&i.complete()}))})}Yl.takeWhile=HW});var _v=_(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.tap=void 0;var $W=le(),YW=z(),QW=U(),KW=Xe();function XW(r,e,t){var i=$W.isFunction(r)||e||t?{next:r,error:e,complete:t}:r;return i?YW.operate(function(n,s){var u;(u=i.subscribe)===null||u===void 0||u.call(i);var l=!0;n.subscribe(QW.createOperatorSubscriber(s,function(f){var p;(p=i.next)===null||p===void 0||p.call(i,f),s.next(f)},function(){var f;l=!1,(f=i.complete)===null||f===void 0||f.call(i),s.complete()},function(f){var p;l=!1,(p=i.error)===null||p===void 0||p.call(i,f),s.error(f)},function(){var f,p;l&&((f=i.unsubscribe)===null||f===void 0||f.call(i)),(p=i.finalize)===null||p===void 0||p.call(i)}))}):KW.identity}Ql.tap=XW});var Xl=_(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.throttle=void 0;var JW=z(),N0=U(),ZW=X();function eU(r,e){return JW.operate(function(t,i){var n=e??{},s=n.leading,u=s===void 0?!0:s,l=n.trailing,f=l===void 0?!1:l,p=!1,v=null,b=null,T=!1,S=function(){b?.unsubscribe(),b=null,f&&(j(),T&&i.complete())},q=function(){b=null,T&&i.complete()},M=function(D){return b=ZW.innerFrom(r(D)).subscribe(N0.createOperatorSubscriber(i,S,q))},j=function(){if(p){p=!1;var D=v;v=null,i.next(D),!T&&M(D)}};t.subscribe(N0.createOperatorSubscriber(i,function(D){p=!0,v=D,!(b&&!b.closed)&&(u?j():M(D))},function(){T=!0,!(f&&p&&b&&!b.closed)&&i.complete()}))})}Kl.throttle=eU});var Pv=_(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.throttleTime=void 0;var tU=_t(),rU=Xl(),iU=vi();function nU(r,e,t){e===void 0&&(e=tU.asyncScheduler);var i=iU.timer(r,e);return rU.throttle(function(){return i},t)}Jl.throttleTime=nU});var wv=_(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.TimeInterval=yo.timeInterval=void 0;var oU=_t(),sU=z(),aU=U();function uU(r){return r===void 0&&(r=oU.asyncScheduler),sU.operate(function(e,t){var i=r.now();e.subscribe(aU.createOperatorSubscriber(t,function(n){var s=r.now(),u=s-i;i=s,t.next(new W0(n,u))}))})}yo.timeInterval=uU;var W0=function(){function r(e,t){this.value=e,this.interval=t}return r}();yo.TimeInterval=W0});var Ov=_(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.timeoutWith=void 0;var cU=_t(),lU=Du(),hU=Ps();function fU(r,e,t){var i,n,s;if(t=t??cU.async,lU.isValidDate(r)?i=r:typeof r=="number"&&(n=r),e)s=function(){return e};else throw new TypeError("No observable provided to switch to");if(i==null&&n==null)throw new TypeError("No timeout provided.");return hU.timeout({first:i,each:n,scheduler:t,with:s})}Zl.timeoutWith=fU});var Tv=_(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.timestamp=void 0;var pU=eu(),dU=Ur();function vU(r){return r===void 0&&(r=pU.dateTimestampProvider),dU.map(function(e){return{value:e,timestamp:r.now()}})}eh.timestamp=vU});var Sv=_(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.window=void 0;var U0=Je(),mU=z(),G0=U(),yU=Ke(),gU=X();function bU(r){return mU.operate(function(e,t){var i=new U0.Subject;t.next(i.asObservable());var n=function(s){i.error(s),t.error(s)};return e.subscribe(G0.createOperatorSubscriber(t,function(s){return i?.next(s)},function(){i.complete(),t.complete()},n)),gU.innerFrom(r).subscribe(G0.createOperatorSubscriber(t,function(){i.complete(),t.next(i=new U0.Subject)},yU.noop,n)),function(){i?.unsubscribe(),i=null}})}th.window=bU});var Cv=_(go=>{"use strict";var _U=go&&go.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(go,"__esModule",{value:!0});go.windowCount=void 0;var B0=Je(),PU=z(),wU=U();function OU(r,e){e===void 0&&(e=0);var t=e>0?e:r;return PU.operate(function(i,n){var s=[new B0.Subject],u=[],l=0;n.next(s[0].asObservable()),i.subscribe(wU.createOperatorSubscriber(n,function(f){var p,v;try{for(var b=_U(s),T=b.next();!T.done;T=b.next()){var S=T.value;S.next(f)}}catch(j){p={error:j}}finally{try{T&&!T.done&&(v=b.return)&&v.call(b)}finally{if(p)throw p.error}}var q=l-r+1;if(q>=0&&q%t===0&&s.shift().complete(),++l%t===0){var M=new B0.Subject;s.push(M),n.next(M.asObservable())}},function(){for(;s.length>0;)s.shift().complete();n.complete()},function(f){for(;s.length>0;)s.shift().error(f);n.error(f)},function(){u=null,s=null}))})}go.windowCount=OU});var Av=_(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.windowTime=void 0;var TU=Je(),SU=_t(),CU=Mt(),AU=z(),EU=U(),qU=zr(),xU=Pt(),H0=Vr();function MU(r){for(var e,t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var s=(e=xU.popScheduler(i))!==null&&e!==void 0?e:SU.asyncScheduler,u=(t=i[0])!==null&&t!==void 0?t:null,l=i[1]||1/0;return AU.operate(function(f,p){var v=[],b=!1,T=function(j){var D=j.window,V=j.subs;D.complete(),V.unsubscribe(),qU.arrRemove(v,j),b&&S()},S=function(){if(v){var j=new CU.Subscription;p.add(j);var D=new TU.Subject,V={window:D,subs:j,seen:0};v.push(V),p.next(D.asObservable()),H0.executeSchedule(j,s,function(){return T(V)},r)}};u!==null&&u>=0?H0.executeSchedule(p,s,S,u,!0):b=!0,S();var q=function(j){return v.slice().forEach(j)},M=function(j){q(function(D){var V=D.window;return j(V)}),j(p),p.unsubscribe()};return f.subscribe(EU.createOperatorSubscriber(p,function(j){q(function(D){D.window.next(j),l<=++D.seen&&T(D)})},function(){return M(function(j){return j.complete()})},function(j){return M(function(D){return D.error(j)})})),function(){v=null}})}rh.windowTime=MU});var qv=_(bo=>{"use strict";var LU=bo&&bo.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bo,"__esModule",{value:!0});bo.windowToggle=void 0;var jU=Je(),IU=Mt(),kU=z(),$0=X(),Ev=U(),Y0=Ke(),FU=zr();function DU(r,e){return kU.operate(function(t,i){var n=[],s=function(u){for(;0<n.length;)n.shift().error(u);i.error(u)};$0.innerFrom(r).subscribe(Ev.createOperatorSubscriber(i,function(u){var l=new jU.Subject;n.push(l);var f=new IU.Subscription,p=function(){FU.arrRemove(n,l),l.complete(),f.unsubscribe()},v;try{v=$0.innerFrom(e(u))}catch(b){s(b);return}i.next(l.asObservable()),f.add(v.subscribe(Ev.createOperatorSubscriber(i,p,Y0.noop,s)))},Y0.noop)),t.subscribe(Ev.createOperatorSubscriber(i,function(u){var l,f,p=n.slice();try{for(var v=LU(p),b=v.next();!b.done;b=v.next()){var T=b.value;T.next(u)}}catch(S){l={error:S}}finally{try{b&&!b.done&&(f=v.return)&&f.call(v)}finally{if(l)throw l.error}}},function(){for(;0<n.length;)n.shift().complete();i.complete()},s,function(){for(;0<n.length;)n.shift().unsubscribe()}))})}bo.windowToggle=DU});var xv=_(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});ih.windowWhen=void 0;var RU=Je(),zU=z(),Q0=U(),VU=X();function NU(r){return zU.operate(function(e,t){var i,n,s=function(l){i.error(l),t.error(l)},u=function(){n?.unsubscribe(),i?.complete(),i=new RU.Subject,t.next(i.asObservable());var l;try{l=VU.innerFrom(r())}catch(f){s(f);return}l.subscribe(n=Q0.createOperatorSubscriber(t,u,u,s))};u(),e.subscribe(Q0.createOperatorSubscriber(t,function(l){return i.next(l)},function(){i.complete(),t.complete()},s,function(){n?.unsubscribe(),i=null}))})}ih.windowWhen=NU});var Mv=_(Ai=>{"use strict";var K0=Ai&&Ai.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},X0=Ai&&Ai.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.withLatestFrom=void 0;var WU=z(),J0=U(),UU=X(),GU=Xe(),BU=Ke(),HU=Pt();function $U(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=HU.popResultSelector(r);return WU.operate(function(i,n){for(var s=r.length,u=new Array(s),l=r.map(function(){return!1}),f=!1,p=function(b){UU.innerFrom(r[b]).subscribe(J0.createOperatorSubscriber(n,function(T){u[b]=T,!f&&!l[b]&&(l[b]=!0,(f=l.every(GU.identity))&&(l=null))},BU.noop))},v=0;v<s;v++)p(v);i.subscribe(J0.createOperatorSubscriber(n,function(b){if(f){var T=X0([b],K0(u));n.next(t?t.apply(void 0,X0([],K0(T))):T)}}))})}Ai.withLatestFrom=$U});var Lv=_(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});nh.zipAll=void 0;var YU=fc(),QU=pd();function KU(r){return QU.joinAllInternals(YU.zip,r)}nh.zipAll=KU});var jv=_(Ei=>{"use strict";var XU=Ei&&Ei.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},JU=Ei&&Ei.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.zip=void 0;var ZU=fc(),eG=z();function tG(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return eG.operate(function(t,i){ZU.zip.apply(void 0,JU([t],XU(r))).subscribe(i)})}Ei.zip=tG});var Iv=_(qi=>{"use strict";var rG=qi&&qi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},iG=qi&&qi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(qi,"__esModule",{value:!0});qi.zipWith=void 0;var nG=jv();function oG(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return nG.zip.apply(void 0,iG([],rG(r)))}qi.zipWith=oG});var xi=_(m=>{"use strict";var sG=m&&m.__createBinding||(Object.create?function(r,e,t,i){i===void 0&&(i=t),Object.defineProperty(r,i,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}),aG=m&&m.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sG(e,r,t)};Object.defineProperty(m,"__esModule",{value:!0});m.interval=m.iif=m.generate=m.fromEventPattern=m.fromEvent=m.from=m.forkJoin=m.empty=m.defer=m.connectable=m.concat=m.combineLatest=m.bindNodeCallback=m.bindCallback=m.UnsubscriptionError=m.TimeoutError=m.SequenceError=m.ObjectUnsubscribedError=m.NotFoundError=m.EmptyError=m.ArgumentOutOfRangeError=m.firstValueFrom=m.lastValueFrom=m.isObservable=m.identity=m.noop=m.pipe=m.NotificationKind=m.Notification=m.Subscriber=m.Subscription=m.Scheduler=m.VirtualAction=m.VirtualTimeScheduler=m.animationFrameScheduler=m.animationFrame=m.queueScheduler=m.queue=m.asyncScheduler=m.async=m.asapScheduler=m.asap=m.AsyncSubject=m.ReplaySubject=m.BehaviorSubject=m.Subject=m.animationFrames=m.observable=m.ConnectableObservable=m.Observable=void 0;m.filter=m.expand=m.exhaustMap=m.exhaustAll=m.exhaust=m.every=m.endWith=m.elementAt=m.distinctUntilKeyChanged=m.distinctUntilChanged=m.distinct=m.dematerialize=m.delayWhen=m.delay=m.defaultIfEmpty=m.debounceTime=m.debounce=m.count=m.connect=m.concatWith=m.concatMapTo=m.concatMap=m.concatAll=m.combineLatestWith=m.combineLatestAll=m.combineAll=m.catchError=m.bufferWhen=m.bufferToggle=m.bufferTime=m.bufferCount=m.buffer=m.auditTime=m.audit=m.config=m.NEVER=m.EMPTY=m.scheduled=m.zip=m.using=m.timer=m.throwError=m.range=m.race=m.partition=m.pairs=m.onErrorResumeNext=m.of=m.never=m.merge=void 0;m.switchMap=m.switchAll=m.subscribeOn=m.startWith=m.skipWhile=m.skipUntil=m.skipLast=m.skip=m.single=m.shareReplay=m.share=m.sequenceEqual=m.scan=m.sampleTime=m.sample=m.refCount=m.retryWhen=m.retry=m.repeatWhen=m.repeat=m.reduce=m.raceWith=m.publishReplay=m.publishLast=m.publishBehavior=m.publish=m.pluck=m.pairwise=m.onErrorResumeNextWith=m.observeOn=m.multicast=m.min=m.mergeWith=m.mergeScan=m.mergeMapTo=m.mergeMap=m.flatMap=m.mergeAll=m.max=m.materialize=m.mapTo=m.map=m.last=m.isEmpty=m.ignoreElements=m.groupBy=m.first=m.findIndex=m.find=m.finalize=void 0;m.zipWith=m.zipAll=m.withLatestFrom=m.windowWhen=m.windowToggle=m.windowTime=m.windowCount=m.window=m.toArray=m.timestamp=m.timeoutWith=m.timeout=m.timeInterval=m.throwIfEmpty=m.throttleTime=m.throttle=m.tap=m.takeWhile=m.takeUntil=m.takeLast=m.take=m.switchScan=m.switchMapTo=void 0;var uG=fe();Object.defineProperty(m,"Observable",{enumerable:!0,get:function(){return uG.Observable}});var cG=ys();Object.defineProperty(m,"ConnectableObservable",{enumerable:!0,get:function(){return cG.ConnectableObservable}});var lG=vs();Object.defineProperty(m,"observable",{enumerable:!0,get:function(){return lG.observable}});var hG=xb();Object.defineProperty(m,"animationFrames",{enumerable:!0,get:function(){return hG.animationFrames}});var fG=Je();Object.defineProperty(m,"Subject",{enumerable:!0,get:function(){return fG.Subject}});var pG=Ap();Object.defineProperty(m,"BehaviorSubject",{enumerable:!0,get:function(){return pG.BehaviorSubject}});var dG=tu();Object.defineProperty(m,"ReplaySubject",{enumerable:!0,get:function(){return dG.ReplaySubject}});var vG=ru();Object.defineProperty(m,"AsyncSubject",{enumerable:!0,get:function(){return vG.AsyncSubject}});var Z0=$b();Object.defineProperty(m,"asap",{enumerable:!0,get:function(){return Z0.asap}});Object.defineProperty(m,"asapScheduler",{enumerable:!0,get:function(){return Z0.asapScheduler}});var eP=_t();Object.defineProperty(m,"async",{enumerable:!0,get:function(){return eP.async}});Object.defineProperty(m,"asyncScheduler",{enumerable:!0,get:function(){return eP.asyncScheduler}});var tP=Kb();Object.defineProperty(m,"queue",{enumerable:!0,get:function(){return tP.queue}});Object.defineProperty(m,"queueScheduler",{enumerable:!0,get:function(){return tP.queueScheduler}});var rP=e_();Object.defineProperty(m,"animationFrame",{enumerable:!0,get:function(){return rP.animationFrame}});Object.defineProperty(m,"animationFrameScheduler",{enumerable:!0,get:function(){return rP.animationFrameScheduler}});var iP=i_();Object.defineProperty(m,"VirtualTimeScheduler",{enumerable:!0,get:function(){return iP.VirtualTimeScheduler}});Object.defineProperty(m,"VirtualAction",{enumerable:!0,get:function(){return iP.VirtualAction}});var mG=qp();Object.defineProperty(m,"Scheduler",{enumerable:!0,get:function(){return mG.Scheduler}});var yG=Mt();Object.defineProperty(m,"Subscription",{enumerable:!0,get:function(){return yG.Subscription}});var gG=Ln();Object.defineProperty(m,"Subscriber",{enumerable:!0,get:function(){return gG.Subscriber}});var nP=Eu();Object.defineProperty(m,"Notification",{enumerable:!0,get:function(){return nP.Notification}});Object.defineProperty(m,"NotificationKind",{enumerable:!0,get:function(){return nP.NotificationKind}});var bG=ms();Object.defineProperty(m,"pipe",{enumerable:!0,get:function(){return bG.pipe}});var _G=Ke();Object.defineProperty(m,"noop",{enumerable:!0,get:function(){return _G.noop}});var PG=Xe();Object.defineProperty(m,"identity",{enumerable:!0,get:function(){return PG.identity}});var wG=__();Object.defineProperty(m,"isObservable",{enumerable:!0,get:function(){return wG.isObservable}});var OG=P_();Object.defineProperty(m,"lastValueFrom",{enumerable:!0,get:function(){return OG.lastValueFrom}});var TG=w_();Object.defineProperty(m,"firstValueFrom",{enumerable:!0,get:function(){return TG.firstValueFrom}});var SG=Gp();Object.defineProperty(m,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return SG.ArgumentOutOfRangeError}});var CG=hi();Object.defineProperty(m,"EmptyError",{enumerable:!0,get:function(){return CG.EmptyError}});var AG=Bp();Object.defineProperty(m,"NotFoundError",{enumerable:!0,get:function(){return AG.NotFoundError}});var EG=Op();Object.defineProperty(m,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return EG.ObjectUnsubscribedError}});var qG=Hp();Object.defineProperty(m,"SequenceError",{enumerable:!0,get:function(){return qG.SequenceError}});var xG=Ps();Object.defineProperty(m,"TimeoutError",{enumerable:!0,get:function(){return xG.TimeoutError}});var MG=hp();Object.defineProperty(m,"UnsubscriptionError",{enumerable:!0,get:function(){return MG.UnsubscriptionError}});var LG=T_();Object.defineProperty(m,"bindCallback",{enumerable:!0,get:function(){return LG.bindCallback}});var jG=S_();Object.defineProperty(m,"bindNodeCallback",{enumerable:!0,get:function(){return jG.bindNodeCallback}});var IG=Uu();Object.defineProperty(m,"combineLatest",{enumerable:!0,get:function(){return IG.combineLatest}});var kG=Os();Object.defineProperty(m,"concat",{enumerable:!0,get:function(){return kG.concat}});var FG=j_();Object.defineProperty(m,"connectable",{enumerable:!0,get:function(){return FG.connectable}});var DG=Ts();Object.defineProperty(m,"defer",{enumerable:!0,get:function(){return DG.defer}});var RG=Zt();Object.defineProperty(m,"empty",{enumerable:!0,get:function(){return RG.empty}});var zG=I_();Object.defineProperty(m,"forkJoin",{enumerable:!0,get:function(){return zG.forkJoin}});var VG=Nr();Object.defineProperty(m,"from",{enumerable:!0,get:function(){return VG.from}});var NG=F_();Object.defineProperty(m,"fromEvent",{enumerable:!0,get:function(){return NG.fromEvent}});var WG=R_();Object.defineProperty(m,"fromEventPattern",{enumerable:!0,get:function(){return WG.fromEventPattern}});var UG=V_();Object.defineProperty(m,"generate",{enumerable:!0,get:function(){return UG.generate}});var GG=N_();Object.defineProperty(m,"iif",{enumerable:!0,get:function(){return GG.iif}});var BG=Jp();Object.defineProperty(m,"interval",{enumerable:!0,get:function(){return BG.interval}});var HG=U_();Object.defineProperty(m,"merge",{enumerable:!0,get:function(){return HG.merge}});var $G=Zp();Object.defineProperty(m,"never",{enumerable:!0,get:function(){return $G.never}});var YG=Cu();Object.defineProperty(m,"of",{enumerable:!0,get:function(){return YG.of}});var QG=ed();Object.defineProperty(m,"onErrorResumeNext",{enumerable:!0,get:function(){return QG.onErrorResumeNext}});var KG=B_();Object.defineProperty(m,"pairs",{enumerable:!0,get:function(){return KG.pairs}});var XG=Y_();Object.defineProperty(m,"partition",{enumerable:!0,get:function(){return XG.partition}});var JG=rd();Object.defineProperty(m,"race",{enumerable:!0,get:function(){return JG.race}});var ZG=X_();Object.defineProperty(m,"range",{enumerable:!0,get:function(){return ZG.range}});var eB=Up();Object.defineProperty(m,"throwError",{enumerable:!0,get:function(){return eB.throwError}});var tB=vi();Object.defineProperty(m,"timer",{enumerable:!0,get:function(){return tB.timer}});var rB=J_();Object.defineProperty(m,"using",{enumerable:!0,get:function(){return rB.using}});var iB=fc();Object.defineProperty(m,"zip",{enumerable:!0,get:function(){return iB.zip}});var nB=Wp();Object.defineProperty(m,"scheduled",{enumerable:!0,get:function(){return nB.scheduled}});var oB=Zt();Object.defineProperty(m,"EMPTY",{enumerable:!0,get:function(){return oB.EMPTY}});var sB=Zp();Object.defineProperty(m,"NEVER",{enumerable:!0,get:function(){return sB.NEVER}});aG(e0(),m);var aB=xn();Object.defineProperty(m,"config",{enumerable:!0,get:function(){return aB.config}});var uB=dc();Object.defineProperty(m,"audit",{enumerable:!0,get:function(){return uB.audit}});var cB=id();Object.defineProperty(m,"auditTime",{enumerable:!0,get:function(){return cB.auditTime}});var lB=nd();Object.defineProperty(m,"buffer",{enumerable:!0,get:function(){return lB.buffer}});var hB=sd();Object.defineProperty(m,"bufferCount",{enumerable:!0,get:function(){return hB.bufferCount}});var fB=ad();Object.defineProperty(m,"bufferTime",{enumerable:!0,get:function(){return fB.bufferTime}});var pB=cd();Object.defineProperty(m,"bufferToggle",{enumerable:!0,get:function(){return pB.bufferToggle}});var dB=ld();Object.defineProperty(m,"bufferWhen",{enumerable:!0,get:function(){return dB.bufferWhen}});var vB=hd();Object.defineProperty(m,"catchError",{enumerable:!0,get:function(){return vB.catchError}});var mB=dd();Object.defineProperty(m,"combineAll",{enumerable:!0,get:function(){return mB.combineAll}});var yB=Sc();Object.defineProperty(m,"combineLatestAll",{enumerable:!0,get:function(){return yB.combineLatestAll}});var gB=md();Object.defineProperty(m,"combineLatestWith",{enumerable:!0,get:function(){return gB.combineLatestWith}});var bB=ws();Object.defineProperty(m,"concatAll",{enumerable:!0,get:function(){return bB.concatAll}});var _B=Ec();Object.defineProperty(m,"concatMap",{enumerable:!0,get:function(){return _B.concatMap}});var PB=yd();Object.defineProperty(m,"concatMapTo",{enumerable:!0,get:function(){return PB.concatMapTo}});var wB=bd();Object.defineProperty(m,"concatWith",{enumerable:!0,get:function(){return wB.concatWith}});var OB=Ss();Object.defineProperty(m,"connect",{enumerable:!0,get:function(){return OB.connect}});var TB=_d();Object.defineProperty(m,"count",{enumerable:!0,get:function(){return TB.count}});var SB=Pd();Object.defineProperty(m,"debounce",{enumerable:!0,get:function(){return SB.debounce}});var CB=wd();Object.defineProperty(m,"debounceTime",{enumerable:!0,get:function(){return CB.debounceTime}});var AB=lo();Object.defineProperty(m,"defaultIfEmpty",{enumerable:!0,get:function(){return AB.defaultIfEmpty}});var EB=Od();Object.defineProperty(m,"delay",{enumerable:!0,get:function(){return EB.delay}});var qB=Wc();Object.defineProperty(m,"delayWhen",{enumerable:!0,get:function(){return qB.delayWhen}});var xB=Td();Object.defineProperty(m,"dematerialize",{enumerable:!0,get:function(){return xB.dematerialize}});var MB=Sd();Object.defineProperty(m,"distinct",{enumerable:!0,get:function(){return MB.distinct}});var LB=$c();Object.defineProperty(m,"distinctUntilChanged",{enumerable:!0,get:function(){return LB.distinctUntilChanged}});var jB=Cd();Object.defineProperty(m,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return jB.distinctUntilKeyChanged}});var IB=Ad();Object.defineProperty(m,"elementAt",{enumerable:!0,get:function(){return IB.elementAt}});var kB=Ed();Object.defineProperty(m,"endWith",{enumerable:!0,get:function(){return kB.endWith}});var FB=qd();Object.defineProperty(m,"every",{enumerable:!0,get:function(){return FB.every}});var DB=xd();Object.defineProperty(m,"exhaust",{enumerable:!0,get:function(){return DB.exhaust}});var RB=tl();Object.defineProperty(m,"exhaustAll",{enumerable:!0,get:function(){return RB.exhaustAll}});var zB=Zc();Object.defineProperty(m,"exhaustMap",{enumerable:!0,get:function(){return zB.exhaustMap}});var VB=Md();Object.defineProperty(m,"expand",{enumerable:!0,get:function(){return VB.expand}});var NB=Gr();Object.defineProperty(m,"filter",{enumerable:!0,get:function(){return NB.filter}});var WB=Ld();Object.defineProperty(m,"finalize",{enumerable:!0,get:function(){return WB.finalize}});var UB=ol();Object.defineProperty(m,"find",{enumerable:!0,get:function(){return UB.find}});var GB=jd();Object.defineProperty(m,"findIndex",{enumerable:!0,get:function(){return GB.findIndex}});var BB=Id();Object.defineProperty(m,"first",{enumerable:!0,get:function(){return BB.first}});var HB=kd();Object.defineProperty(m,"groupBy",{enumerable:!0,get:function(){return HB.groupBy}});var $B=Rc();Object.defineProperty(m,"ignoreElements",{enumerable:!0,get:function(){return $B.ignoreElements}});var YB=Fd();Object.defineProperty(m,"isEmpty",{enumerable:!0,get:function(){return YB.isEmpty}});var QB=Dd();Object.defineProperty(m,"last",{enumerable:!0,get:function(){return QB.last}});var KB=Ur();Object.defineProperty(m,"map",{enumerable:!0,get:function(){return KB.map}});var XB=Vc();Object.defineProperty(m,"mapTo",{enumerable:!0,get:function(){return XB.mapTo}});var JB=zd();Object.defineProperty(m,"materialize",{enumerable:!0,get:function(){return JB.materialize}});var ZB=Vd();Object.defineProperty(m,"max",{enumerable:!0,get:function(){return ZB.max}});var eH=io();Object.defineProperty(m,"mergeAll",{enumerable:!0,get:function(){return eH.mergeAll}});var tH=Nd();Object.defineProperty(m,"flatMap",{enumerable:!0,get:function(){return tH.flatMap}});var rH=vr();Object.defineProperty(m,"mergeMap",{enumerable:!0,get:function(){return rH.mergeMap}});var iH=Wd();Object.defineProperty(m,"mergeMapTo",{enumerable:!0,get:function(){return iH.mergeMapTo}});var nH=Ud();Object.defineProperty(m,"mergeScan",{enumerable:!0,get:function(){return nH.mergeScan}});var oH=Bd();Object.defineProperty(m,"mergeWith",{enumerable:!0,get:function(){return oH.mergeWith}});var sH=Hd();Object.defineProperty(m,"min",{enumerable:!0,get:function(){return sH.min}});var aH=Cs();Object.defineProperty(m,"multicast",{enumerable:!0,get:function(){return aH.multicast}});var uH=eo();Object.defineProperty(m,"observeOn",{enumerable:!0,get:function(){return uH.observeOn}});var cH=$d();Object.defineProperty(m,"onErrorResumeNextWith",{enumerable:!0,get:function(){return cH.onErrorResumeNextWith}});var lH=Yd();Object.defineProperty(m,"pairwise",{enumerable:!0,get:function(){return lH.pairwise}});var hH=Qd();Object.defineProperty(m,"pluck",{enumerable:!0,get:function(){return hH.pluck}});var fH=Kd();Object.defineProperty(m,"publish",{enumerable:!0,get:function(){return fH.publish}});var pH=Xd();Object.defineProperty(m,"publishBehavior",{enumerable:!0,get:function(){return pH.publishBehavior}});var dH=Jd();Object.defineProperty(m,"publishLast",{enumerable:!0,get:function(){return dH.publishLast}});var vH=Zd();Object.defineProperty(m,"publishReplay",{enumerable:!0,get:function(){return vH.publishReplay}});var mH=Sl();Object.defineProperty(m,"raceWith",{enumerable:!0,get:function(){return mH.raceWith}});var yH=sn();Object.defineProperty(m,"reduce",{enumerable:!0,get:function(){return yH.reduce}});var gH=ev();Object.defineProperty(m,"repeat",{enumerable:!0,get:function(){return gH.repeat}});var bH=tv();Object.defineProperty(m,"repeatWhen",{enumerable:!0,get:function(){return bH.repeatWhen}});var _H=rv();Object.defineProperty(m,"retry",{enumerable:!0,get:function(){return _H.retry}});var PH=iv();Object.defineProperty(m,"retryWhen",{enumerable:!0,get:function(){return PH.retryWhen}});var wH=Xa();Object.defineProperty(m,"refCount",{enumerable:!0,get:function(){return wH.refCount}});var OH=Ml();Object.defineProperty(m,"sample",{enumerable:!0,get:function(){return OH.sample}});var TH=nv();Object.defineProperty(m,"sampleTime",{enumerable:!0,get:function(){return TH.sampleTime}});var SH=ov();Object.defineProperty(m,"scan",{enumerable:!0,get:function(){return SH.scan}});var CH=sv();Object.defineProperty(m,"sequenceEqual",{enumerable:!0,get:function(){return CH.sequenceEqual}});var AH=kl();Object.defineProperty(m,"share",{enumerable:!0,get:function(){return AH.share}});var EH=uv();Object.defineProperty(m,"shareReplay",{enumerable:!0,get:function(){return EH.shareReplay}});var qH=cv();Object.defineProperty(m,"single",{enumerable:!0,get:function(){return qH.single}});var xH=lv();Object.defineProperty(m,"skip",{enumerable:!0,get:function(){return xH.skip}});var MH=hv();Object.defineProperty(m,"skipLast",{enumerable:!0,get:function(){return MH.skipLast}});var LH=fv();Object.defineProperty(m,"skipUntil",{enumerable:!0,get:function(){return LH.skipUntil}});var jH=pv();Object.defineProperty(m,"skipWhile",{enumerable:!0,get:function(){return jH.skipWhile}});var IH=dv();Object.defineProperty(m,"startWith",{enumerable:!0,get:function(){return IH.startWith}});var kH=to();Object.defineProperty(m,"subscribeOn",{enumerable:!0,get:function(){return kH.subscribeOn}});var FH=vv();Object.defineProperty(m,"switchAll",{enumerable:!0,get:function(){return FH.switchAll}});var DH=mo();Object.defineProperty(m,"switchMap",{enumerable:!0,get:function(){return DH.switchMap}});var RH=mv();Object.defineProperty(m,"switchMapTo",{enumerable:!0,get:function(){return RH.switchMapTo}});var zH=yv();Object.defineProperty(m,"switchScan",{enumerable:!0,get:function(){return zH.switchScan}});var VH=ho();Object.defineProperty(m,"take",{enumerable:!0,get:function(){return VH.take}});var NH=ll();Object.defineProperty(m,"takeLast",{enumerable:!0,get:function(){return NH.takeLast}});var WH=gv();Object.defineProperty(m,"takeUntil",{enumerable:!0,get:function(){return WH.takeUntil}});var UH=bv();Object.defineProperty(m,"takeWhile",{enumerable:!0,get:function(){return UH.takeWhile}});var GH=_v();Object.defineProperty(m,"tap",{enumerable:!0,get:function(){return GH.tap}});var BH=Xl();Object.defineProperty(m,"throttle",{enumerable:!0,get:function(){return BH.throttle}});var HH=Pv();Object.defineProperty(m,"throttleTime",{enumerable:!0,get:function(){return HH.throttleTime}});var $H=fo();Object.defineProperty(m,"throwIfEmpty",{enumerable:!0,get:function(){return $H.throwIfEmpty}});var YH=wv();Object.defineProperty(m,"timeInterval",{enumerable:!0,get:function(){return YH.timeInterval}});var QH=Ps();Object.defineProperty(m,"timeout",{enumerable:!0,get:function(){return QH.timeout}});var KH=Ov();Object.defineProperty(m,"timeoutWith",{enumerable:!0,get:function(){return KH.timeoutWith}});var XH=Tv();Object.defineProperty(m,"timestamp",{enumerable:!0,get:function(){return XH.timestamp}});var JH=wc();Object.defineProperty(m,"toArray",{enumerable:!0,get:function(){return JH.toArray}});var ZH=Sv();Object.defineProperty(m,"window",{enumerable:!0,get:function(){return ZH.window}});var e3=Cv();Object.defineProperty(m,"windowCount",{enumerable:!0,get:function(){return e3.windowCount}});var t3=Av();Object.defineProperty(m,"windowTime",{enumerable:!0,get:function(){return t3.windowTime}});var r3=qv();Object.defineProperty(m,"windowToggle",{enumerable:!0,get:function(){return r3.windowToggle}});var i3=xv();Object.defineProperty(m,"windowWhen",{enumerable:!0,get:function(){return i3.windowWhen}});var n3=Mv();Object.defineProperty(m,"withLatestFrom",{enumerable:!0,get:function(){return n3.withLatestFrom}});var o3=Lv();Object.defineProperty(m,"zipAll",{enumerable:!0,get:function(){return o3.zipAll}});var s3=Iv();Object.defineProperty(m,"zipWith",{enumerable:!0,get:function(){return s3.zipWith}})});var aP=_(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});sh.partition=void 0;var a3=td(),sP=Gr();function u3(r,e){return function(t){return[sP.filter(r,e)(t),sP.filter(a3.not(r,e))(t)]}}sh.partition=u3});var uP=_(Mi=>{"use strict";var c3=Mi&&Mi.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],u;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(l){u={error:l}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(u)throw u.error}}return s},l3=Mi&&Mi.__spreadArray||function(r,e){for(var t=0,i=e.length,n=r.length;t<i;t++,n++)r[n]=e[t];return r};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.race=void 0;var h3=mi(),f3=Sl();function p3(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return f3.raceWith.apply(void 0,l3([],c3(h3.argsOrArgArray(r))))}Mi.race=p3});var _o=_(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.mergeAll=w.merge=w.max=w.materialize=w.mapTo=w.map=w.last=w.isEmpty=w.ignoreElements=w.groupBy=w.first=w.findIndex=w.find=w.finalize=w.filter=w.expand=w.exhaustMap=w.exhaustAll=w.exhaust=w.every=w.endWith=w.elementAt=w.distinctUntilKeyChanged=w.distinctUntilChanged=w.distinct=w.dematerialize=w.delayWhen=w.delay=w.defaultIfEmpty=w.debounceTime=w.debounce=w.count=w.connect=w.concatWith=w.concatMapTo=w.concatMap=w.concatAll=w.concat=w.combineLatestWith=w.combineLatest=w.combineLatestAll=w.combineAll=w.catchError=w.bufferWhen=w.bufferToggle=w.bufferTime=w.bufferCount=w.buffer=w.auditTime=w.audit=void 0;w.timeInterval=w.throwIfEmpty=w.throttleTime=w.throttle=w.tap=w.takeWhile=w.takeUntil=w.takeLast=w.take=w.switchScan=w.switchMapTo=w.switchMap=w.switchAll=w.subscribeOn=w.startWith=w.skipWhile=w.skipUntil=w.skipLast=w.skip=w.single=w.shareReplay=w.share=w.sequenceEqual=w.scan=w.sampleTime=w.sample=w.refCount=w.retryWhen=w.retry=w.repeatWhen=w.repeat=w.reduce=w.raceWith=w.race=w.publishReplay=w.publishLast=w.publishBehavior=w.publish=w.pluck=w.partition=w.pairwise=w.onErrorResumeNext=w.observeOn=w.multicast=w.min=w.mergeWith=w.mergeScan=w.mergeMapTo=w.mergeMap=w.flatMap=void 0;w.zipWith=w.zipAll=w.zip=w.withLatestFrom=w.windowWhen=w.windowToggle=w.windowTime=w.windowCount=w.window=w.toArray=w.timestamp=w.timeoutWith=w.timeout=void 0;var d3=dc();Object.defineProperty(w,"audit",{enumerable:!0,get:function(){return d3.audit}});var v3=id();Object.defineProperty(w,"auditTime",{enumerable:!0,get:function(){return v3.auditTime}});var m3=nd();Object.defineProperty(w,"buffer",{enumerable:!0,get:function(){return m3.buffer}});var y3=sd();Object.defineProperty(w,"bufferCount",{enumerable:!0,get:function(){return y3.bufferCount}});var g3=ad();Object.defineProperty(w,"bufferTime",{enumerable:!0,get:function(){return g3.bufferTime}});var b3=cd();Object.defineProperty(w,"bufferToggle",{enumerable:!0,get:function(){return b3.bufferToggle}});var _3=ld();Object.defineProperty(w,"bufferWhen",{enumerable:!0,get:function(){return _3.bufferWhen}});var P3=hd();Object.defineProperty(w,"catchError",{enumerable:!0,get:function(){return P3.catchError}});var w3=dd();Object.defineProperty(w,"combineAll",{enumerable:!0,get:function(){return w3.combineAll}});var O3=Sc();Object.defineProperty(w,"combineLatestAll",{enumerable:!0,get:function(){return O3.combineLatestAll}});var T3=vd();Object.defineProperty(w,"combineLatest",{enumerable:!0,get:function(){return T3.combineLatest}});var S3=md();Object.defineProperty(w,"combineLatestWith",{enumerable:!0,get:function(){return S3.combineLatestWith}});var C3=gd();Object.defineProperty(w,"concat",{enumerable:!0,get:function(){return C3.concat}});var A3=ws();Object.defineProperty(w,"concatAll",{enumerable:!0,get:function(){return A3.concatAll}});var E3=Ec();Object.defineProperty(w,"concatMap",{enumerable:!0,get:function(){return E3.concatMap}});var q3=yd();Object.defineProperty(w,"concatMapTo",{enumerable:!0,get:function(){return q3.concatMapTo}});var x3=bd();Object.defineProperty(w,"concatWith",{enumerable:!0,get:function(){return x3.concatWith}});var M3=Ss();Object.defineProperty(w,"connect",{enumerable:!0,get:function(){return M3.connect}});var L3=_d();Object.defineProperty(w,"count",{enumerable:!0,get:function(){return L3.count}});var j3=Pd();Object.defineProperty(w,"debounce",{enumerable:!0,get:function(){return j3.debounce}});var I3=wd();Object.defineProperty(w,"debounceTime",{enumerable:!0,get:function(){return I3.debounceTime}});var k3=lo();Object.defineProperty(w,"defaultIfEmpty",{enumerable:!0,get:function(){return k3.defaultIfEmpty}});var F3=Od();Object.defineProperty(w,"delay",{enumerable:!0,get:function(){return F3.delay}});var D3=Wc();Object.defineProperty(w,"delayWhen",{enumerable:!0,get:function(){return D3.delayWhen}});var R3=Td();Object.defineProperty(w,"dematerialize",{enumerable:!0,get:function(){return R3.dematerialize}});var z3=Sd();Object.defineProperty(w,"distinct",{enumerable:!0,get:function(){return z3.distinct}});var V3=$c();Object.defineProperty(w,"distinctUntilChanged",{enumerable:!0,get:function(){return V3.distinctUntilChanged}});var N3=Cd();Object.defineProperty(w,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return N3.distinctUntilKeyChanged}});var W3=Ad();Object.defineProperty(w,"elementAt",{enumerable:!0,get:function(){return W3.elementAt}});var U3=Ed();Object.defineProperty(w,"endWith",{enumerable:!0,get:function(){return U3.endWith}});var G3=qd();Object.defineProperty(w,"every",{enumerable:!0,get:function(){return G3.every}});var B3=xd();Object.defineProperty(w,"exhaust",{enumerable:!0,get:function(){return B3.exhaust}});var H3=tl();Object.defineProperty(w,"exhaustAll",{enumerable:!0,get:function(){return H3.exhaustAll}});var $3=Zc();Object.defineProperty(w,"exhaustMap",{enumerable:!0,get:function(){return $3.exhaustMap}});var Y3=Md();Object.defineProperty(w,"expand",{enumerable:!0,get:function(){return Y3.expand}});var Q3=Gr();Object.defineProperty(w,"filter",{enumerable:!0,get:function(){return Q3.filter}});var K3=Ld();Object.defineProperty(w,"finalize",{enumerable:!0,get:function(){return K3.finalize}});var X3=ol();Object.defineProperty(w,"find",{enumerable:!0,get:function(){return X3.find}});var J3=jd();Object.defineProperty(w,"findIndex",{enumerable:!0,get:function(){return J3.findIndex}});var Z3=Id();Object.defineProperty(w,"first",{enumerable:!0,get:function(){return Z3.first}});var e$=kd();Object.defineProperty(w,"groupBy",{enumerable:!0,get:function(){return e$.groupBy}});var t$=Rc();Object.defineProperty(w,"ignoreElements",{enumerable:!0,get:function(){return t$.ignoreElements}});var r$=Fd();Object.defineProperty(w,"isEmpty",{enumerable:!0,get:function(){return r$.isEmpty}});var i$=Dd();Object.defineProperty(w,"last",{enumerable:!0,get:function(){return i$.last}});var n$=Ur();Object.defineProperty(w,"map",{enumerable:!0,get:function(){return n$.map}});var o$=Vc();Object.defineProperty(w,"mapTo",{enumerable:!0,get:function(){return o$.mapTo}});var s$=zd();Object.defineProperty(w,"materialize",{enumerable:!0,get:function(){return s$.materialize}});var a$=Vd();Object.defineProperty(w,"max",{enumerable:!0,get:function(){return a$.max}});var u$=Gd();Object.defineProperty(w,"merge",{enumerable:!0,get:function(){return u$.merge}});var c$=io();Object.defineProperty(w,"mergeAll",{enumerable:!0,get:function(){return c$.mergeAll}});var l$=Nd();Object.defineProperty(w,"flatMap",{enumerable:!0,get:function(){return l$.flatMap}});var h$=vr();Object.defineProperty(w,"mergeMap",{enumerable:!0,get:function(){return h$.mergeMap}});var f$=Wd();Object.defineProperty(w,"mergeMapTo",{enumerable:!0,get:function(){return f$.mergeMapTo}});var p$=Ud();Object.defineProperty(w,"mergeScan",{enumerable:!0,get:function(){return p$.mergeScan}});var d$=Bd();Object.defineProperty(w,"mergeWith",{enumerable:!0,get:function(){return d$.mergeWith}});var v$=Hd();Object.defineProperty(w,"min",{enumerable:!0,get:function(){return v$.min}});var m$=Cs();Object.defineProperty(w,"multicast",{enumerable:!0,get:function(){return m$.multicast}});var y$=eo();Object.defineProperty(w,"observeOn",{enumerable:!0,get:function(){return y$.observeOn}});var g$=$d();Object.defineProperty(w,"onErrorResumeNext",{enumerable:!0,get:function(){return g$.onErrorResumeNext}});var b$=Yd();Object.defineProperty(w,"pairwise",{enumerable:!0,get:function(){return b$.pairwise}});var _$=aP();Object.defineProperty(w,"partition",{enumerable:!0,get:function(){return _$.partition}});var P$=Qd();Object.defineProperty(w,"pluck",{enumerable:!0,get:function(){return P$.pluck}});var w$=Kd();Object.defineProperty(w,"publish",{enumerable:!0,get:function(){return w$.publish}});var O$=Xd();Object.defineProperty(w,"publishBehavior",{enumerable:!0,get:function(){return O$.publishBehavior}});var T$=Jd();Object.defineProperty(w,"publishLast",{enumerable:!0,get:function(){return T$.publishLast}});var S$=Zd();Object.defineProperty(w,"publishReplay",{enumerable:!0,get:function(){return S$.publishReplay}});var C$=uP();Object.defineProperty(w,"race",{enumerable:!0,get:function(){return C$.race}});var A$=Sl();Object.defineProperty(w,"raceWith",{enumerable:!0,get:function(){return A$.raceWith}});var E$=sn();Object.defineProperty(w,"reduce",{enumerable:!0,get:function(){return E$.reduce}});var q$=ev();Object.defineProperty(w,"repeat",{enumerable:!0,get:function(){return q$.repeat}});var x$=tv();Object.defineProperty(w,"repeatWhen",{enumerable:!0,get:function(){return x$.repeatWhen}});var M$=rv();Object.defineProperty(w,"retry",{enumerable:!0,get:function(){return M$.retry}});var L$=iv();Object.defineProperty(w,"retryWhen",{enumerable:!0,get:function(){return L$.retryWhen}});var j$=Xa();Object.defineProperty(w,"refCount",{enumerable:!0,get:function(){return j$.refCount}});var I$=Ml();Object.defineProperty(w,"sample",{enumerable:!0,get:function(){return I$.sample}});var k$=nv();Object.defineProperty(w,"sampleTime",{enumerable:!0,get:function(){return k$.sampleTime}});var F$=ov();Object.defineProperty(w,"scan",{enumerable:!0,get:function(){return F$.scan}});var D$=sv();Object.defineProperty(w,"sequenceEqual",{enumerable:!0,get:function(){return D$.sequenceEqual}});var R$=kl();Object.defineProperty(w,"share",{enumerable:!0,get:function(){return R$.share}});var z$=uv();Object.defineProperty(w,"shareReplay",{enumerable:!0,get:function(){return z$.shareReplay}});var V$=cv();Object.defineProperty(w,"single",{enumerable:!0,get:function(){return V$.single}});var N$=lv();Object.defineProperty(w,"skip",{enumerable:!0,get:function(){return N$.skip}});var W$=hv();Object.defineProperty(w,"skipLast",{enumerable:!0,get:function(){return W$.skipLast}});var U$=fv();Object.defineProperty(w,"skipUntil",{enumerable:!0,get:function(){return U$.skipUntil}});var G$=pv();Object.defineProperty(w,"skipWhile",{enumerable:!0,get:function(){return G$.skipWhile}});var B$=dv();Object.defineProperty(w,"startWith",{enumerable:!0,get:function(){return B$.startWith}});var H$=to();Object.defineProperty(w,"subscribeOn",{enumerable:!0,get:function(){return H$.subscribeOn}});var $$=vv();Object.defineProperty(w,"switchAll",{enumerable:!0,get:function(){return $$.switchAll}});var Y$=mo();Object.defineProperty(w,"switchMap",{enumerable:!0,get:function(){return Y$.switchMap}});var Q$=mv();Object.defineProperty(w,"switchMapTo",{enumerable:!0,get:function(){return Q$.switchMapTo}});var K$=yv();Object.defineProperty(w,"switchScan",{enumerable:!0,get:function(){return K$.switchScan}});var X$=ho();Object.defineProperty(w,"take",{enumerable:!0,get:function(){return X$.take}});var J$=ll();Object.defineProperty(w,"takeLast",{enumerable:!0,get:function(){return J$.takeLast}});var Z$=gv();Object.defineProperty(w,"takeUntil",{enumerable:!0,get:function(){return Z$.takeUntil}});var e6=bv();Object.defineProperty(w,"takeWhile",{enumerable:!0,get:function(){return e6.takeWhile}});var t6=_v();Object.defineProperty(w,"tap",{enumerable:!0,get:function(){return t6.tap}});var r6=Xl();Object.defineProperty(w,"throttle",{enumerable:!0,get:function(){return r6.throttle}});var i6=Pv();Object.defineProperty(w,"throttleTime",{enumerable:!0,get:function(){return i6.throttleTime}});var n6=fo();Object.defineProperty(w,"throwIfEmpty",{enumerable:!0,get:function(){return n6.throwIfEmpty}});var o6=wv();Object.defineProperty(w,"timeInterval",{enumerable:!0,get:function(){return o6.timeInterval}});var s6=Ps();Object.defineProperty(w,"timeout",{enumerable:!0,get:function(){return s6.timeout}});var a6=Ov();Object.defineProperty(w,"timeoutWith",{enumerable:!0,get:function(){return a6.timeoutWith}});var u6=Tv();Object.defineProperty(w,"timestamp",{enumerable:!0,get:function(){return u6.timestamp}});var c6=wc();Object.defineProperty(w,"toArray",{enumerable:!0,get:function(){return c6.toArray}});var l6=Sv();Object.defineProperty(w,"window",{enumerable:!0,get:function(){return l6.window}});var h6=Cv();Object.defineProperty(w,"windowCount",{enumerable:!0,get:function(){return h6.windowCount}});var f6=Av();Object.defineProperty(w,"windowTime",{enumerable:!0,get:function(){return f6.windowTime}});var p6=qv();Object.defineProperty(w,"windowToggle",{enumerable:!0,get:function(){return p6.windowToggle}});var d6=xv();Object.defineProperty(w,"windowWhen",{enumerable:!0,get:function(){return d6.windowWhen}});var v6=Mv();Object.defineProperty(w,"withLatestFrom",{enumerable:!0,get:function(){return v6.withLatestFrom}});var m6=jv();Object.defineProperty(w,"zip",{enumerable:!0,get:function(){return m6.zip}});var y6=Lv();Object.defineProperty(w,"zipAll",{enumerable:!0,get:function(){return y6.zipAll}});var g6=Iv();Object.defineProperty(w,"zipWith",{enumerable:!0,get:function(){return g6.zipWith}})});var Ms=_(xs=>{var b6=function(r,e){return r<e?-1:r>e?1:0},_6=function(r,e){return r<e?1:r>e?-1:0};function P6(r){return function(e,t){return r(t,e)}}function w6(r){return r===2?function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:e[1]<t[1]?-1:e[1]>t[1]?1:0}:function(e,t){for(var i=0;i<r;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i++}return 0}}xs.DEFAULT_COMPARATOR=b6;xs.DEFAULT_REVERSE_COMPARATOR=_6;xs.reverseComparator=P6;xs.createTupleComparator=w6});var cP=_(Fv=>{Fv.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Fv.SYMBOL_SUPPORT=typeof Symbol<"u"});var _e=_((X7,hP)=>{var lP=cP(),O6=lP.ARRAY_BUFFER_SUPPORT,T6=lP.SYMBOL_SUPPORT;hP.exports=function(e,t){var i,n,s,u,l;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof t!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||O6&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,u=e.length;s<u;s++)t(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(t);return}if(T6&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;l=i.next(),l.done!==!0;)t(l.value,s),s++;return}for(n in e)e.hasOwnProperty(n)&&t(e[n],n)}});var fh=_((J7,gP)=>{var fP=Ms(),pP=_e(),dP=fP.DEFAULT_COMPARATOR,S6=fP.reverseComparator;function lt(r){if(this.clear(),this.comparator=r||dP,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.")}lt.prototype.clear=function(){this.root=null,this.min=null,this.size=0};function C6(r){return{item:r,degree:0}}function vP(r,e){r.root?(e.right=r.root.right,e.left=r.root,r.root.right.left=e,r.root.right=e):r.root=e}lt.prototype.push=function(r){var e=C6(r);return e.left=e,e.right=e,vP(this,e),(!this.min||this.comparator(e.item,this.min.item)<=0)&&(this.min=e),++this.size};lt.prototype.peek=function(){return this.min?this.min.item:void 0};function mP(r){for(var e=[],t=r,i=!1;!(t===r&&i);)t===r&&(i=!0),e.push(t),t=t.right;return e}function yP(r,e){r.root===e&&(r.root=e.right),e.left.right=e.right,e.right.left=e.left}function A6(r,e){r.child?(e.right=r.child.right,e.left=r.child,r.child.right.left=e,r.child.right=e):r.child=e}function E6(r,e,t){yP(r,e),e.left=e,e.right=e,A6(t,e),t.degree++,e.parent=t}function q6(r){var e=new Array(r.size),t=mP(r.root),i,n,s,u,l,f;for(i=0,n=t.length;i<n;i++){for(s=t[i],l=s.degree;e[l];)u=e[l],r.comparator(s.item,u.item)>0&&(f=s,s=u,u=f),E6(r,u,s),e[l]=null,l++;e[l]=s}for(i=0;i<r.size;i++)e[i]&&r.comparator(e[i].item,r.min.item)<=0&&(r.min=e[i])}lt.prototype.pop=function(){if(this.size){var r=this.min;if(r.child){var e=mP(r.child),t,i,n;for(i=0,n=e.length;i<n;i++)t=e[i],vP(this,t),delete t.parent}return yP(this,r),r===r.right?(this.min=null,this.root=null):(this.min=r.right,q6(this)),this.size--,r.item}};lt.prototype.inspect=function(){var r={size:this.size};return this.min&&"item"in this.min&&(r.top=this.min.item),Object.defineProperty(r,"constructor",{value:lt,enumerable:!1}),r};typeof Symbol<"u"&&(lt.prototype[Symbol.for("nodejs.util.inspect.custom")]=lt.prototype.inspect);function hh(r){if(this.clear(),this.comparator=r||dP,typeof this.comparator!="function")throw new Error("mnemonist/FibonacciHeap.constructor: given comparator should be a function.");this.comparator=S6(this.comparator)}hh.prototype=lt.prototype;lt.from=function(r,e){var t=new lt(e);return pP(r,function(i){t.push(i)}),t};hh.from=function(r,e){var t=new hh(e);return pP(r,function(i){t.push(i)}),t};lt.MinFibonacciHeap=lt;lt.MaxFibonacciHeap=hh;gP.exports=lt});var ht=_(gr=>{var x6=Math.pow(2,8)-1,M6=Math.pow(2,16)-1,L6=Math.pow(2,32)-1,j6=Math.pow(2,7)-1,I6=Math.pow(2,15)-1,k6=Math.pow(2,31)-1;gr.getPointerArray=function(r){var e=r-1;if(e<=x6)return Uint8Array;if(e<=M6)return Uint16Array;if(e<=L6)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};gr.getSignedPointerArray=function(r){var e=r-1;return e<=j6?Int8Array:e<=I6?Int16Array:e<=k6?Int32Array:Float64Array};gr.getNumberType=function(r){return r===(r|0)?Math.sign(r)===-1?r<=127&&r>=-128?Int8Array:r<=32767&&r>=-32768?Int16Array:Int32Array:r<=255?Uint8Array:r<=65535?Uint16Array:Uint32Array:Float64Array};var F6={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};gr.getMinimalRepresentation=function(r,e){var t=null,i=0,n,s,u,l,f;for(l=0,f=r.length;l<f;l++)u=e?e(r[l]):r[l],s=gr.getNumberType(u),n=F6[s.name],n>i&&(i=n,t=s);return t};gr.isTypedArray=function(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(r)};gr.concat=function(){var r=0,e,t,i;for(e=0,i=arguments.length;e<i;e++)r+=arguments[e].length;var n=new arguments[0].constructor(r);for(e=0,t=0;e<i;e++)n.set(arguments[e],t),t+=arguments[e].length;return n};gr.indices=function(r){for(var e=gr.getPointerArray(r),t=new e(r),i=0;i<r;i++)t[i]=i;return t}});var wt=_(js=>{var PP=_e(),wP=ht();function D6(r){return Array.isArray(r)||wP.isTypedArray(r)}function Dv(r){if(typeof r.length=="number")return r.length;if(typeof r.size=="number")return r.size}function R6(r){var e=Dv(r),t=typeof e=="number"?new Array(e):[],i=0;return PP(r,function(n){t[i++]=n}),t}function z6(r){var e=Dv(r),t=typeof e=="number"?wP.getPointerArray(e):Array,i=typeof e=="number"?new Array(e):[],n=typeof e=="number"?new t(e):[],s=0;return PP(r,function(u){i[s]=u,n[s]=s++}),[i,n]}js.isArrayLike=D6;js.guessLength=Dv;js.toArray=R6;js.toArrayWithIndices=z6});var _h=_((wX,CP)=>{var yh=_e(),OP=Ms(),br=wt(),bh=OP.DEFAULT_COMPARATOR,Rv=OP.reverseComparator;function zv(r,e,t,i){for(var n=e[i],s,u;i>t;){if(s=i-1>>1,u=e[s],r(n,u)<0){e[i]=u,i=s;continue}break}e[i]=n}function Is(r,e,t){for(var i=e.length,n=t,s=e[t],u=2*t+1,l;u<i;)l=u+1,l<i&&r(e[u],e[l])>=0&&(u=l),e[t]=e[u],t=u,u=2*t+1;e[t]=s,zv(r,e,n,t)}function TP(r,e,t){e.push(t),zv(r,e,0,e.length-1)}function Vv(r,e){var t=e.pop();if(e.length!==0){var i=e[0];return e[0]=t,Is(r,e,0),i}return t}function Oo(r,e,t){if(e.length===0)throw new Error("mnemonist/heap.replace: cannot pop an empty heap.");var i=e[0];return e[0]=t,Is(r,e,0),i}function SP(r,e,t){var i;return e.length!==0&&r(e[0],t)<0&&(i=e[0],e[0]=t,t=i,Is(r,e,0)),t}function ln(r,e){for(var t=e.length,i=t>>1,n=i;--n>=0;)Is(r,e,n)}function Nv(r,e){for(var t=e.length,i=0,n=new Array(t);i<t;)n[i++]=Vv(r,e);return n}function V6(r,e,t){arguments.length===2&&(t=e,e=r,r=bh);var i=Rv(r),n,s,u,l=1/0,f;if(e===1){if(br.isArrayLike(t)){for(n=0,s=t.length;n<s;n++)u=t[n],(l===1/0||r(u,l)<0)&&(l=u);return f=new t.constructor(1),f[0]=l,f}return yh(t,function(v){(l===1/0||r(v,l)<0)&&(l=v)}),[l]}if(br.isArrayLike(t)){if(e>=t.length)return t.slice().sort(r);for(f=t.slice(0,e),ln(i,f),n=e,s=t.length;n<s;n++)i(t[n],f[0])>0&&Oo(i,f,t[n]);return f.sort(r)}var p=br.guessLength(t);return p!==null&&p<e&&(e=p),f=new Array(e),n=0,yh(t,function(v){n<e?f[n]=v:(n===e&&ln(i,f),i(v,f[0])>0&&Oo(i,f,v)),n++}),f.length>n&&(f.length=n),f.sort(r)}function N6(r,e,t){arguments.length===2&&(t=e,e=r,r=bh);var i=Rv(r),n,s,u,l=-1/0,f;if(e===1){if(br.isArrayLike(t)){for(n=0,s=t.length;n<s;n++)u=t[n],(l===-1/0||r(u,l)>0)&&(l=u);return f=new t.constructor(1),f[0]=l,f}return yh(t,function(v){(l===-1/0||r(v,l)>0)&&(l=v)}),[l]}if(br.isArrayLike(t)){if(e>=t.length)return t.slice().sort(i);for(f=t.slice(0,e),ln(r,f),n=e,s=t.length;n<s;n++)r(t[n],f[0])>0&&Oo(r,f,t[n]);return f.sort(i)}var p=br.guessLength(t);return p!==null&&p<e&&(e=p),f=new Array(e),n=0,yh(t,function(v){n<e?f[n]=v:(n===e&&ln(r,f),r(v,f[0])>0&&Oo(r,f,v)),n++}),f.length>n&&(f.length=n),f.sort(i)}function he(r){if(this.clear(),this.comparator=r||bh,typeof this.comparator!="function")throw new Error("mnemonist/Heap.constructor: given comparator should be a function.")}he.prototype.clear=function(){this.items=[],this.size=0};he.prototype.push=function(r){return TP(this.comparator,this.items,r),++this.size};he.prototype.peek=function(){return this.items[0]};he.prototype.pop=function(){return this.size!==0&&this.size--,Vv(this.comparator,this.items)};he.prototype.replace=function(r){return Oo(this.comparator,this.items,r)};he.prototype.pushpop=function(r){return SP(this.comparator,this.items,r)};he.prototype.consume=function(){return this.size=0,Nv(this.comparator,this.items)};he.prototype.toArray=function(){return Nv(this.comparator,this.items.slice())};he.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:he,enumerable:!1}),r};typeof Symbol<"u"&&(he.prototype[Symbol.for("nodejs.util.inspect.custom")]=he.prototype.inspect);function gh(r){if(this.clear(),this.comparator=r||bh,typeof this.comparator!="function")throw new Error("mnemonist/MaxHeap.constructor: given comparator should be a function.");this.comparator=Rv(this.comparator)}gh.prototype=he.prototype;he.from=function(r,e){var t=new he(e),i;return br.isArrayLike(r)?i=r.slice():i=br.toArray(r),ln(t.comparator,i),t.items=i,t.size=i.length,t};gh.from=function(r,e){var t=new gh(e),i;return br.isArrayLike(r)?i=r.slice():i=br.toArray(r),ln(t.comparator,i),t.items=i,t.size=i.length,t};he.siftUp=Is;he.siftDown=zv;he.push=TP;he.pop=Vv;he.replace=Oo;he.pushpop=SP;he.heapify=ln;he.consume=Nv;he.nsmallest=V6;he.nlargest=N6;he.MinHeap=he;he.MaxHeap=gh;CP.exports=he});var MP=_((OX,xP)=>{var AP="";function EP(r,e,t){for(var i=e.length,n=[],s=i,u=-1,l,f=0,p;s--;)u=Math.max(r[e[s]+t],u);for(p=u>>24&&32||u>>16&&24||u>>8&&16||8;f<p;f+=4){for(s=16;s--;)n[s]=[];for(s=i;s--;)n[r[e[s]+t]>>f&15].push(e[s]);for(l=0;l<16;l++)for(u=n[l].length;u--;)e[++s]=n[l][u]}}function W6(r,e,t,i){return r[t]-r[i]||(t%3===2?r[t+1]-r[i+1]||e[t+2]-e[i+2]:e[t+1]-e[i+1])}function Wv(r,e){var t=[],i=[],n=2*e/3|0,s=e-n,u=n+1>>1,l=n,f=0,p,v=[],b=[];if(e===1)return[0];for(;l--;)t[l]=(l*3>>1)+1;for(l=3;l--;)EP(r,t,l);for(f=i[(t[0]/3|0)+(t[0]%3===1?0:u)]=1,l=1;l<n;l++)(r[t[l]]!==r[t[l-1]]||r[t[l]+1]!==r[t[l-1]+1]||r[t[l]+2]!==r[t[l-1]+2])&&f++,i[(t[l]/3|0)+(t[l]%3===1?0:u)]=f;if(f<n)for(i=Wv(i,n),l=n;l--;)t[l]=i[l]<u?i[l]*3+1:(i[l]-u)*3+2;for(l=n;l--;)v[t[l]]=l;for(v[e]=-1,v[e+1]=-2,i=e%3===1?[e-1]:[],l=0;l<n;l++)t[l]%3===1&&i.push(t[l]-1);for(EP(r,i,0),l=0,f=0,p=0;l<n&&f<s;)b[p++]=W6(r,v,t[l],i[f])<0?t[l++]:i[f++];for(;l<n;)b[p++]=t[l++];for(;f<s;)b[p++]=i[f++];return b}function qP(r){var e=r.length,t=e%3,i=new Array(e+t),n,s;if(typeof r!="string"){var u=Object.create(null);for(s=0;s<e;s++)u[r[s]]||(u[r[s]]=!0);var l=Object.create(null),f=Object.keys(u).sort();for(s=0,n=f.length;s<n;s++)l[f[s]]=s+1;for(s=0;s<e;s++)i[s]=l[r[s]]}else for(s=0;s<e;s++)i[s]=r.charCodeAt(s);for(s=e;s<e+t;s++)i[s]=0;return i}function Li(r){this.hasArbitrarySequence=typeof r!="string",this.string=r,this.length=r.length,this.array=Wv(qP(r),this.length)}Li.prototype.toString=function(){return this.array.join(",")};Li.prototype.toJSON=function(){return this.array};Li.prototype.inspect=function(){for(var r=new Array(this.length),e=0;e<this.length;e++)r[e]=this.string.slice(this.array[e]);return Object.defineProperty(r,"constructor",{value:Li,enumerable:!1}),r};typeof Symbol<"u"&&(Li.prototype[Symbol.for("nodejs.util.inspect.custom")]=Li.prototype.inspect);function ji(r){if(this.hasArbitrarySequence=typeof r[0]!="string",this.size=r.length,this.hasArbitrarySequence){this.text=[];for(var e=0,t=this.size;e<t;e++)this.text.push.apply(this.text,r[e]),e<t-1&&this.text.push(AP)}else this.text=r.join(AP);this.firstLength=r[0].length,this.length=this.text.length,this.array=Wv(qP(this.text),this.length)}ji.prototype.longestCommonSubsequence=function(){var r=this.hasArbitrarySequence?[]:"",e,t,i,n,s;for(t=1;t<this.length;t++)if(n=this.array[t],s=this.array[t-1],!(n<this.firstLength&&s<this.firstLength)&&!(n>this.firstLength&&s>this.firstLength)){for(e=Math.min(this.length-n,this.length-s),i=0;i<e;i++)if(this.text[n+i]!==this.text[s+i]){e=i;break}e>r.length&&(r=this.text.slice(n,n+e))}return r};ji.prototype.toString=function(){return this.array.join(",")};ji.prototype.toJSON=function(){return this.array};ji.prototype.inspect=function(){for(var r=new Array(this.length),e=0;e<this.length;e++)r[e]=this.text.slice(this.array[e]);return Object.defineProperty(r,"constructor",{value:ji,enumerable:!1}),r};typeof Symbol<"u"&&(ji.prototype[Symbol.for("nodejs.util.inspect.custom")]=ji.prototype.inspect);Li.GeneralizedSuffixArray=ji;xP.exports=Li});var FP=_((TX,kP)=>{var U6=_e();function tr(r){this.size=0,this.items=new Map,this.inverse=r}function Lt(){this.size=0,this.items=new Map,this.inverse=new tr(this)}function LP(){this.size=0,this.items.clear(),this.inverse.items.clear()}Lt.prototype.clear=LP;tr.prototype.clear=LP;function jP(r,e){if(this.items.has(r)){var t=this.items.get(r);if(t===e)return this;this.inverse.items.delete(t)}if(this.inverse.items.has(e)){var i=this.inverse.items.get(e);if(i===r)return this;this.items.delete(i)}return this.items.set(r,e),this.inverse.items.set(e,r),this.size=this.items.size,this.inverse.size=this.inverse.items.size,this}Lt.prototype.set=jP;tr.prototype.set=jP;function IP(r){if(this.items.has(r)){var e=this.items.get(r);return this.items.delete(r),this.inverse.items.delete(e),this.size=this.items.size,this.inverse.size=this.inverse.items.size,!0}return!1}Lt.prototype.delete=IP;tr.prototype.delete=IP;var G6=["has","get","forEach","keys","values","entries"];G6.forEach(function(r){Lt.prototype[r]=tr.prototype[r]=function(){return Map.prototype[r].apply(this.items,arguments)}});typeof Symbol<"u"&&(Lt.prototype[Symbol.iterator]=Lt.prototype.entries,tr.prototype[Symbol.iterator]=tr.prototype.entries);Lt.prototype.inspect=function(){var r={left:this.items,right:this.inverse.items};return Object.defineProperty(r,"constructor",{value:Lt,enumerable:!1}),r};typeof Symbol<"u"&&(Lt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Lt.prototype.inspect);tr.prototype.inspect=function(){var r={left:this.inverse.items,right:this.items};return Object.defineProperty(r,"constructor",{value:tr,enumerable:!1}),r};typeof Symbol<"u"&&(tr.prototype[Symbol.for("nodejs.util.inspect.custom")]=tr.prototype.inspect);Lt.from=function(r){var e=new Lt;return U6(r,function(t,i){e.set(i,t)}),e};kP.exports=Lt});var Ge=_((SX,DP)=>{function _r(r){if(typeof r!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=r}typeof Symbol<"u"&&(_r.prototype[Symbol.iterator]=function(){return this});_r.of=function(){var r=arguments,e=r.length,t=0;return new _r(function(){return t>=e?{done:!0}:{done:!1,value:r[t++]}})};_r.empty=function(){var r=new _r(function(){return{done:!0}});return r};_r.fromSequence=function(r){var e=0,t=r.length;return new _r(function(){return e>=t?{done:!0}:{done:!1,value:r[e++]}})};_r.is=function(r){return r instanceof _r?!0:typeof r=="object"&&r!==null&&typeof r.next=="function"};DP.exports=_r});var Gv=_(rr=>{function zP(r){return r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r&~(r>>1)}rr.msb32=zP;function Uv(r){return r|=r>>1,r|=r>>2,r|=r>>4,r&~(r>>1)}rr.msb8=Uv;rr.test=function(r,e){return r>>e&1};rr.criticalBit8=function(r,e){return Uv(r^e)};rr.criticalBit8Mask=function(r,e){return~Uv(r^e)>>>0&255};rr.testCriticalBit8=function(r,e){return 1+(r|e)>>8};rr.criticalBit32Mask=function(r,e){return~zP(r^e)>>>0&4294967295};rr.popcount=function(r){return r-=r>>1&1431655765,r=(r&858993459)+(r>>2&858993459),r=r+(r>>4)&252645135,r+=r>>8,r+=r>>16,r&127};var To=new Uint8Array(Math.pow(2,8));for(ks=0,RP=To.length;ks<RP;ks++)To[ks]=rr.popcount(ks);var ks,RP;rr.table8Popcount=function(r){return To[r&255]+To[r>>8&255]+To[r>>16&255]+To[r>>24&255]}});var UP=_((AX,WP)=>{var NP=Ge(),VP=Gv();function Re(r){this.length=r,this.clear()}Re.prototype.clear=function(){this.size=0,this.array=new Uint32Array(Math.ceil(this.length/32))};Re.prototype.set=function(r,e){var t=r>>5,i=r&31,n=this.array[t],s;return e===0||e===!1?s=this.array[t]&=~(1<<i):s=this.array[t]|=1<<i,s=s>>>0,s>n?this.size++:s<n&&this.size--,this};Re.prototype.reset=function(r){var e=r>>5,t=r&31,i=this.array[e],n;return n=this.array[e]&=~(1<<t),n<i&&this.size--,this};Re.prototype.flip=function(r){var e=r>>5,t=r&31,i=this.array[e],n=this.array[e]^=1<<t;return n=n>>>0,n>i?this.size++:n<i&&this.size--,this};Re.prototype.get=function(r){var e=r>>5,t=r&31;return this.array[e]>>t&1};Re.prototype.test=function(r){return!!this.get(r)};Re.prototype.rank=function(r){if(this.size===0)return 0;for(var e=r>>5,t=r&31,i=0,n=0;n<e;n++)i+=VP.table8Popcount(this.array[n]);var s=this.array[e]&(1<<t)-1;return i+=VP.table8Popcount(s),i};Re.prototype.select=function(r){if(this.size===0||r>=this.length)return-1;for(var e,t=32,i=0,n=0,s=0,u=this.array.length;s<u;s++)if(e=this.array[s],e!==0){s===u-1&&(t=this.length%32||32);for(var l=0;l<t;l++,i++)if(n+=e>>l&1,n===r)return i}};Re.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.length,i,n,s=32,u=0,l=this.array.length;u<l;u++){i=this.array[u],u===l-1&&(s=t%32||32);for(var f=0;f<s;f++)n=i>>f&1,r.call(e,n,u*32+f)}};Re.prototype.values=function(){var r=this.length,e=!1,t,i,n=this.array,s=n.length,u=0,l=-1,f=32;return new NP(function p(){if(!e){if(u>=s)return{done:!0};u===s-1&&(f=r%32||32),t=n[u++],e=!0,l=-1}return l++,l>=f?(e=!1,p()):(i=t>>l&1,{value:i})})};Re.prototype.entries=function(){var r=this.length,e=!1,t,i,n=this.array,s,u=n.length,l=0,f=-1,p=32;return new NP(function v(){if(!e){if(l>=u)return{done:!0};l===u-1&&(p=r%32||32),t=n[l++],e=!0,f=-1}return f++,s=~-l*32+f,f>=p?(e=!1,v()):(i=t>>f&1,{value:[s,i]})})};typeof Symbol<"u"&&(Re.prototype[Symbol.iterator]=Re.prototype.values);Re.prototype.inspect=function(){var r=new Uint8Array(this.length);return this.forEach(function(e,t){r[t]=e}),Object.defineProperty(r,"constructor",{value:Re,enumerable:!1}),r};typeof Symbol<"u"&&(Re.prototype[Symbol.for("nodejs.util.inspect.custom")]=Re.prototype.inspect);Re.prototype.toJSON=function(){return Array.from(this.array)};WP.exports=Re});var $P=_((EX,HP)=>{var BP=Ge(),GP=Gv(),B6=function(r){return Math.max(1,Math.ceil(r*1.5))};function H6(r){return new Uint32Array(Math.ceil(r/32))}function Pe(r){var e=r||0,t=B6;typeof r=="object"&&(e=r.initialLength||r.initialCapacity||0,t=r.policy||t),this.size=0,this.length=e,this.capacity=Math.ceil(this.length/32)*32,this.policy=t,this.array=H6(this.capacity)}Pe.prototype.set=function(r,e){if(this.length<r)throw new Error("BitVector.set: index out of bounds.");var t=r>>5,i=r&31,n=this.array[t],s;return e===0||e===!1?s=this.array[t]&=~(1<<i):s=this.array[t]|=1<<i,s=s>>>0,s>n?this.size++:s<n&&this.size--,this};Pe.prototype.reset=function(r){var e=r>>5,t=r&31,i=this.array[e],n;return n=this.array[e]&=~(1<<t),n<i&&this.size--,this};Pe.prototype.flip=function(r){var e=r>>5,t=r&31,i=this.array[e],n=this.array[e]^=1<<t;return n=n>>>0,n>i?this.size++:n<i&&this.size--,this};Pe.prototype.applyPolicy=function(r){var e=this.policy(r||this.capacity);if(typeof e!="number"||e<0)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(e<=this.capacity)throw new Error("mnemonist/bit-vector.applyPolicy: policy returned a less or equal capacity to allocate.");return Math.ceil(e/32)*32};Pe.prototype.reallocate=function(r){var e=r;if(r=Math.ceil(r/32)*32,e<this.length&&(this.length=e),r===this.capacity)return this;var t=this.array,i=r/32;return i===this.array.length?this:(i>this.array.length?(this.array=new Uint32Array(i),this.array.set(t,0)):this.array=t.slice(0,i),this.capacity=r,this)};Pe.prototype.grow=function(r){var e;if(typeof r=="number"){if(this.capacity>=r)return this;for(e=this.capacity;e<r;)e=this.applyPolicy(e);return this.reallocate(e),this}return e=this.applyPolicy(),this.reallocate(e),this};Pe.prototype.resize=function(r){return r===this.length?this:r<this.length?(this.length=r,this):(this.length=r,this.reallocate(r),this)};Pe.prototype.push=function(r){if(this.capacity===this.length&&this.grow(),r===0||r===!1)return++this.length;this.size++;var e=this.length++,t=e>>5,i=e&31;return this.array[t]|=1<<i,this.length};Pe.prototype.pop=function(){if(this.length!==0){var r=--this.length,e=r>>5,t=r&31;return this.array[e]>>t&1}};Pe.prototype.get=function(r){if(!(this.length<r)){var e=r>>5,t=r&31;return this.array[e]>>t&1}};Pe.prototype.test=function(r){return this.length<r?!1:!!this.get(r)};Pe.prototype.rank=function(r){if(this.size===0)return 0;for(var e=r>>5,t=r&31,i=0,n=0;n<e;n++)i+=GP.table8Popcount(this.array[n]);var s=this.array[e]&(1<<t)-1;return i+=GP.table8Popcount(s),i};Pe.prototype.select=function(r){if(this.size===0||r>=this.length)return-1;for(var e,t=32,i=0,n=0,s=0,u=this.array.length;s<u;s++)if(e=this.array[s],e!==0){s===u-1&&(t=this.length%32||32);for(var l=0;l<t;l++,i++)if(n+=e>>l&1,n===r)return i}};Pe.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.length,i,n,s=32,u=0,l=this.array.length;u<l;u++){i=this.array[u],u===l-1&&(s=t%32||32);for(var f=0;f<s;f++)n=i>>f&1,r.call(e,n,u*32+f)}};Pe.prototype.values=function(){var r=this.length,e=!1,t,i,n=this.array,s=n.length,u=0,l=-1,f=32;return new BP(function p(){if(!e){if(u>=s)return{done:!0};u===s-1&&(f=r%32||32),t=n[u++],e=!0,l=-1}return l++,l>=f?(e=!1,p()):(i=t>>l&1,{value:i})})};Pe.prototype.entries=function(){var r=this.length,e=!1,t,i,n=this.array,s,u=n.length,l=0,f=-1,p=32;return new BP(function v(){if(!e){if(l>=u)return{done:!0};l===u-1&&(p=r%32||32),t=n[l++],e=!0,f=-1}return f++,s=~-l*32+f,f>=p?(e=!1,v()):(i=t>>f&1,{value:[s,i]})})};typeof Symbol<"u"&&(Pe.prototype[Symbol.iterator]=Pe.prototype.values);Pe.prototype.inspect=function(){var r=new Uint8Array(this.length);return this.forEach(function(e,t){r[t]=e}),Object.defineProperty(r,"constructor",{value:Pe,enumerable:!1}),r};typeof Symbol<"u"&&(Pe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pe.prototype.inspect);Pe.prototype.toJSON=function(){return Array.from(this.array.slice(0,(this.length>>5)+1))};HP.exports=Pe});var QP=_((qX,YP)=>{function hn(r,e){return(r&65535)*e+(((r>>>16)*e&65535)<<16)&4294967295}function $6(r,e){return(r&65535)+(e>>>16)+(((r>>>16)+e&65535)<<16)&4294967295}function Bv(r,e){return r<<e|r>>>32-e}YP.exports=function(e,t){var i=3432918353,n=461845907,s=15,u=13,l=5,f=1801774676,p=e,v,b,T;for(b=0,T=t.length-4;b<=T;b+=4)v=t[b]|t[b+1]<<8|t[b+2]<<16|t[b+3]<<24,v=hn(v,i),v=Bv(v,s),v=hn(v,n),p^=v,p=Bv(p,u),p=hn(p,l),p=$6(p,f);switch(v=0,t.length&3){case 3:v^=t[b+2]<<16;case 2:v^=t[b+1]<<8;case 1:v^=t[b],v=hn(v,i),v=Bv(v,s),v=hn(v,n),p^=v;default:}return p^=t.length,p^=p>>>16,p=hn(p,2246822507),p^=p>>>13,p=hn(p,3266489909),p^=p>>>16,p>>>0}});var ZP=_((xX,JP)=>{var Y6=QP(),Q6=_e(),K6=Math.LN2*Math.LN2,X6={errorRate:.005};function KP(r){var e=new Uint16Array(r.length),t,i;for(t=0,i=r.length;t<i;t++)e[t]=r.charCodeAt(t);return e}function XP(r,e,t){var i=Y6(e*4221880213&4294967295,t);return i%(r*8)}function fn(r){var e={};if(!r)throw new Error("mnemonist/BloomFilter.constructor: a BloomFilter must be created with a capacity.");if(typeof r=="object"?e=r:e.capacity=r,typeof e.capacity!="number"||e.capacity<=0)throw new Error("mnemonist/BloomFilter.constructor: `capacity` option should be a positive integer.");if(this.capacity=e.capacity,this.errorRate=e.errorRate||X6.errorRate,typeof this.errorRate!="number"||e.errorRate<=0)throw new Error("mnemonist/BloomFilter.constructor: `errorRate` option should be a positive float.");this.clear()}fn.prototype.clear=function(){var r=-1/K6*this.capacity*Math.log(this.errorRate),e=r/8|0;this.hashFunctions=e*8/this.capacity*Math.LN2|0,this.data=new Uint8Array(e)};fn.prototype.add=function(r){for(var e=KP(r),t=0,i=this.hashFunctions;t<i;t++){var n=XP(this.data.length,t,e),s=1<<(7&n);this.data[n>>3]|=s}return this};fn.prototype.test=function(r){for(var e=KP(r),t=0,i=this.hashFunctions;t<i;t++){var n=XP(this.data.length,t,e);if(!(this.data[n>>3]&1<<(7&n)))return!1}return!0};fn.prototype.toJSON=function(){return this.data};fn.from=function(r,e){if(!e&&(e=r.length||r.size,typeof e!="number"))throw new Error("BloomFilter.from: could not infer the filter's capacity. Try passing it as second argument.");var t=new fn(e);return Q6(r,function(i){t.add(i)}),t};JP.exports=fn});var tw=_((MX,ew)=>{var J6=_e();function ir(r){if(typeof r!="function")throw new Error("mnemonist/BKTree.constructor: given `distance` should be a function.");this.distance=r,this.clear()}ir.prototype.add=function(r){if(!this.root)return this.root={item:r,children:{}},this.size++,this;for(var e=this.root,t;t=this.distance(r,e.item),!!e.children[t];)e=e.children[t];return e.children[t]={item:r,children:{}},this.size++,this};ir.prototype.search=function(r,e){if(!this.root)return[];for(var t=[],i=[this.root],n,s,u,l,f;i.length;)for(n=i.pop(),u=this.distance(e,n.item),u<=r&&t.push({item:n.item,distance:u}),l=u-r,f=u+r+1;l<f;l++)s=n.children[l],s&&i.push(s);return t};ir.prototype.clear=function(){this.size=0,this.root=null};ir.prototype.toJSON=function(){return this.root};ir.prototype.inspect=function(){for(var r=[],e=[this.root],t,i;e.length;)if(t=e.pop(),!!t){r.push(t.item);for(i in t.children)e.push(t.children[i])}return Object.defineProperty(r,"constructor",{value:ir,enumerable:!1}),r};typeof Symbol<"u"&&(ir.prototype[Symbol.for("nodejs.util.inspect.custom")]=ir.prototype.inspect);ir.from=function(r,e){var t=new ir(e);return J6(r,function(i){t.add(i)}),t};ew.exports=ir});var $v=_((LX,iw)=>{var Hv=wt(),rw=Ge();function xe(r,e){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=e,this.items=new r(this.capacity),this.clear()}xe.prototype.clear=function(){this.start=0,this.size=0};xe.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var e=this.start+this.size;return e>=this.capacity&&(e-=this.capacity),this.items[e]=r,++this.size};xe.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var e=this.start-1;return this.start===0&&(e=this.capacity-1),this.items[e]=r,this.start=e,++this.size};xe.prototype.pop=function(){if(this.size!==0){this.size--;var r=this.start+this.size;return r>=this.capacity&&(r-=this.capacity),this.items[r]}};xe.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}};xe.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]};xe.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>=this.capacity&&(r-=this.capacity),this.items[r]}};xe.prototype.get=function(r){if(!(this.size===0||r>=this.capacity))return r=this.start+r,r>=this.capacity&&(r-=this.capacity),this.items[r]};xe.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.capacity,i=this.size,n=this.start,s=0;s<i;)r.call(e,this.items[n],s,this),n++,s++,n===t&&(n=0)};xe.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var e=new this.ArrayClass(this.size),t=this.capacity,i=this.size,n=this.start,s=0;s<i;)e[s]=this.items[n],n++,s++,n===t&&(n=0);return e};xe.prototype.values=function(){var r=this.items,e=this.capacity,t=this.size,i=this.start,n=0;return new rw(function(){if(n>=t)return{done:!0};var s=r[i];return i++,n++,i===e&&(i=0),{value:s,done:!1}})};xe.prototype.entries=function(){var r=this.items,e=this.capacity,t=this.size,i=this.start,n=0;return new rw(function(){if(n>=t)return{done:!0};var s=r[i];return i++,i===e&&(i=0),{value:[n++,s],done:!1}})};typeof Symbol<"u"&&(xe.prototype[Symbol.iterator]=xe.prototype.values);xe.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:xe,enumerable:!1}),r};typeof Symbol<"u"&&(xe.prototype[Symbol.for("nodejs.util.inspect.custom")]=xe.prototype.inspect);xe.from=function(r,e,t){if(arguments.length<3&&(t=Hv.guessLength(r),typeof t!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new xe(e,t);if(Hv.isArrayLike(r)){var n,s;for(n=0,s=r.length;n<s;n++)i.items[n]=r[n];return i.size=s,i}return Hv.forEach(r,function(u){i.push(u)}),i};iw.exports=xe});var sw=_((jX,ow)=>{var Yv=wt(),Qv=$v();function So(r,e){if(arguments.length<2)throw new Error("mnemonist/circular-buffer: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/circular-buffer: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=e,this.items=new r(this.capacity),this.clear()}function nw(r){So.prototype[r]=Qv.prototype[r]}Object.keys(Qv.prototype).forEach(nw);typeof Symbol<"u"&&Object.getOwnPropertySymbols(Qv.prototype).forEach(nw);So.prototype.push=function(r){var e=this.start+this.size;return e>=this.capacity&&(e-=this.capacity),this.items[e]=r,this.size===this.capacity?(e++,e>=this.capacity?this.start=0:this.start=e,this.size):++this.size};So.prototype.unshift=function(r){var e=this.start-1;return this.start===0&&(e=this.capacity-1),this.items[e]=r,this.size===this.capacity?(this.start=e,this.size):(this.start=e,++this.size)};So.from=function(r,e,t){if(arguments.length<3&&(t=Yv.guessLength(r),typeof t!="number"))throw new Error("mnemonist/circular-buffer.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new So(e,t);if(Yv.isArrayLike(r)){var n,s;for(n=0,s=r.length;n<s;n++)i.items[n]=r[n];return i.size=s,i}return Yv.forEach(r,function(u){i.push(u)}),i};ow.exports=So});var uw=_((IX,aw)=>{function Ze(r){if(typeof r!="function")throw new Error("mnemonist/DefaultMap.constructor: expecting a function.");this.items=new Map,this.factory=r,this.size=0}Ze.prototype.clear=function(){this.items.clear(),this.size=0};Ze.prototype.get=function(r){var e=this.items.get(r);return typeof e>"u"&&(e=this.factory(r,this.size),this.items.set(r,e),this.size++),e};Ze.prototype.peek=function(r){return this.items.get(r)};Ze.prototype.set=function(r,e){return this.items.set(r,e),this.size=this.items.size,this};Ze.prototype.has=function(r){return this.items.has(r)};Ze.prototype.delete=function(r){var e=this.items.delete(r);return this.size=this.items.size,e};Ze.prototype.forEach=function(r,e){e=arguments.length>1?e:this,this.items.forEach(r,e)};Ze.prototype.entries=function(){return this.items.entries()};Ze.prototype.keys=function(){return this.items.keys()};Ze.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(Ze.prototype[Symbol.iterator]=Ze.prototype.entries);Ze.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Ze.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ze.prototype.inspect);Ze.autoIncrement=function(){var r=0;return function(){return r++}};aw.exports=Ze});var lw=_((kX,cw)=>{function Pr(r){if(typeof r!="function")throw new Error("mnemonist/DefaultWeakMap.constructor: expecting a function.");this.items=new WeakMap,this.factory=r}Pr.prototype.clear=function(){this.items=new WeakMap};Pr.prototype.get=function(r){var e=this.items.get(r);return typeof e>"u"&&(e=this.factory(r),this.items.set(r,e)),e};Pr.prototype.peek=function(r){return this.items.get(r)};Pr.prototype.set=function(r,e){return this.items.set(r,e),this};Pr.prototype.has=function(r){return this.items.has(r)};Pr.prototype.delete=function(r){return this.items.delete(r)};Pr.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(Pr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pr.prototype.inspect);cw.exports=Pr});var fw=_((FX,hw)=>{var Kv=ht();function wr(r){var e=Kv.getPointerArray(r),t=Kv.getPointerArray(Math.log2(r));this.size=r,this.dimension=r,this.parents=new e(r),this.ranks=new t(r);for(var i=0;i<r;i++)this.parents[i]=i}wr.prototype.find=function(r){for(var e=r,t,i;t=this.parents[e],e!==t;)e=t;for(;i=this.parents[r],i!==e;)this.parents[r]=e,r=i;return e};wr.prototype.union=function(r,e){var t=this.find(r),i=this.find(e);if(t===i)return this;this.dimension--;var n=this.ranks[r],s=this.ranks[e];return n<s?this.parents[t]=i:n>s?this.parents[i]=t:(this.parents[i]=t,this.ranks[t]++),this};wr.prototype.connected=function(r,e){var t=this.find(r);return t===this.find(e)};wr.prototype.mapping=function(){for(var r=Kv.getPointerArray(this.dimension),e={},t=new r(this.size),i=0,n,s=0,u=this.parents.length;s<u;s++)n=this.find(s),typeof e[n]>"u"?(t[s]=i,e[n]=i++):t[s]=e[n];return t};wr.prototype.compile=function(){for(var r={},e=new Array(this.dimension),t=0,i,n=0,s=this.parents.length;n<s;n++)i=this.find(n),typeof r[i]>"u"?(e[t]=[n],r[i]=t++):e[r[i]].push(n);return e};wr.prototype.inspect=function(){var r=this.compile();return Object.defineProperty(r,"constructor",{value:wr,enumerable:!1}),r};typeof Symbol<"u"&&(wr.prototype[Symbol.for("nodejs.util.inspect.custom")]=wr.prototype.inspect);hw.exports=wr});var Ph=_((DX,vw)=>{var pw=Ms(),Xv=_h(),Z6=pw.DEFAULT_COMPARATOR,e8=pw.reverseComparator;function t8(r,e,t,i){for(var n=t,s=i,u=e[i],l=2*i+1,f;l<n;)f=l+1,f<n&&r(e[l],e[f])>=0&&(l=f),e[i]=e[l],i=l,l=2*i+1;e[i]=u,Xv.siftDown(r,e,s,i)}function dw(r,e,t,i){for(var n=i,s=n,u=new r(i),l,f;s>0;)l=t[--s],s!==0&&(f=t[0],t[0]=l,t8(e,t,--i,0),l=f),u[s]=l;return u}function Or(r,e,t){if(arguments.length===2&&(t=e,e=null),this.ArrayClass=r,this.capacity=t,this.items=new r(t),this.clear(),this.comparator=e||Z6,typeof t!="number"&&t<=0)throw new Error("mnemonist/FixedReverseHeap.constructor: capacity should be a number > 0.");if(typeof this.comparator!="function")throw new Error("mnemonist/FixedReverseHeap.constructor: given comparator should be a function.");this.comparator=e8(this.comparator)}Or.prototype.clear=function(){this.size=0};Or.prototype.push=function(r){return this.size<this.capacity?(this.items[this.size]=r,Xv.siftDown(this.comparator,this.items,0,this.size),this.size++):this.comparator(r,this.items[0])>0&&Xv.replace(this.comparator,this.items,r),this.size};Or.prototype.peek=function(){return this.items[0]};Or.prototype.consume=function(){var r=dw(this.ArrayClass,this.comparator,this.items,this.size);return this.size=0,r};Or.prototype.toArray=function(){return dw(this.ArrayClass,this.comparator,this.items.slice(0,this.size),this.size)};Or.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:Or,enumerable:!1}),r};typeof Symbol<"u"&&(Or.prototype[Symbol.for("nodejs.util.inspect.custom")]=Or.prototype.inspect);vw.exports=Or});var gw=_((RX,yw)=>{var r8=_e(),mw=function(r){return r};function it(r){if(this.items=new Map,this.clear(),Array.isArray(r)?(this.writeHashFunction=r[0],this.readHashFunction=r[1]):(this.writeHashFunction=r,this.readHashFunction=r),this.writeHashFunction||(this.writeHashFunction=mw),this.readHashFunction||(this.readHashFunction=mw),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMap.constructor: invalid hash function given.")}it.prototype.clear=function(){this.items.clear(),this.size=0};it.prototype.add=function(r){var e=this.writeHashFunction(r);return this.items.set(e,r),this.size=this.items.size,this};it.prototype.set=function(r,e){return r=this.writeHashFunction(r),this.items.set(r,e),this.size=this.items.size,this};it.prototype.get=function(r){return r=this.readHashFunction(r),this.items.get(r)};it.prototype.has=function(r){return r=this.readHashFunction(r),this.items.has(r)};it.prototype.forEach=function(r,e){e=arguments.length>1?e:this,this.items.forEach(function(t){r.call(e,t,t)})};it.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(it.prototype[Symbol.iterator]=it.prototype.values);it.prototype.inspect=function(){var r=Array.from(this.items.values());return Object.defineProperty(r,"constructor",{value:it,enumerable:!1}),r};typeof Symbol<"u"&&(it.prototype[Symbol.for("nodejs.util.inspect.custom")]=it.prototype.inspect);it.from=function(r,e,t){var i=new it(e);return r8(r,function(n,s){t?i.set(s,n):i.add(n)}),i};yw.exports=it});var Jv=_((zX,bw)=>{var wh=Ge(),i8=_e();function me(r){this.Container=r||Array,this.items=new Map,this.clear(),Object.defineProperty(this.items,"constructor",{value:me,enumerable:!1})}me.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};me.prototype.set=function(r,e){var t=this.items.get(r),i;return t||(this.dimension++,t=new this.Container,this.items.set(r,t)),this.Container===Set?(i=t.size,t.add(e),i<t.size&&this.size++):(t.push(e),this.size++),this};me.prototype.delete=function(r){var e=this.items.get(r);return e?(this.size-=this.Container===Set?e.size:e.length,this.dimension--,this.items.delete(r),!0):!1};me.prototype.remove=function(r,e){var t=this.items.get(r),i,n;return t?this.Container===Set?(i=t.delete(e),i&&this.size--,t.size===0&&(this.items.delete(r),this.dimension--),i):(n=t.indexOf(e),n===-1?!1:(this.size--,t.length===1?(this.items.delete(r),this.dimension--,!0):(t.splice(n,1),!0))):!1};me.prototype.has=function(r){return this.items.has(r)};me.prototype.get=function(r){return this.items.get(r)};me.prototype.multiplicity=function(r){var e=this.items.get(r);return typeof e>"u"?0:this.Container===Set?e.size:e.length};me.prototype.count=me.prototype.multiplicity;me.prototype.forEach=function(r,e){e=arguments.length>1?e:this;var t;function i(n){r.call(e,n,t)}this.items.forEach(function(n,s){t=s,n.forEach(i)})};me.prototype.forEachAssociation=function(r,e){e=arguments.length>1?e:this,this.items.forEach(r,e)};me.prototype.keys=function(){return this.items.keys()};me.prototype.values=function(){var r=this.items.values(),e=!1,t,i,n,s;return this.Container===Set?new wh(function u(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,t=i.value.values()}return i=t.next(),i.done?(e=!1,u()):{done:!1,value:i.value}}):new wh(function u(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,t=i.value,n=0,s=t.length}return n>=s?(e=!1,u()):{done:!1,value:t[n++]}})};me.prototype.entries=function(){var r=this.items.entries(),e=!1,t,i,n,s,u;return this.Container===Set?new wh(function l(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,n=i.value[0],t=i.value[1].values()}return i=t.next(),i.done?(e=!1,l()):{done:!1,value:[n,i.value]}}):new wh(function l(){if(!e){if(i=r.next(),i.done)return{done:!0};e=!0,n=i.value[0],t=i.value[1],s=0,u=t.length}return s>=u?(e=!1,l()):{done:!1,value:[n,t[s++]]}})};me.prototype.containers=function(){return this.items.values()};me.prototype.associations=function(){return this.items.entries()};typeof Symbol<"u"&&(me.prototype[Symbol.iterator]=me.prototype.entries);me.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(me.prototype[Symbol.for("nodejs.util.inspect.custom")]=me.prototype.inspect);me.prototype.toJSON=function(){return this.items};me.from=function(r,e){var t=new me(e);return i8(r,function(i,n){t.set(n,i)}),t};bw.exports=me});var ww=_((VX,Pw)=>{var n8=Jv(),o8=_e(),_w=function(r){return r};function nt(r,e){if(this.items=new n8(e),this.clear(),Array.isArray(r)?(this.writeHashFunction=r[0],this.readHashFunction=r[1]):(this.writeHashFunction=r,this.readHashFunction=r),this.writeHashFunction||(this.writeHashFunction=_w),this.readHashFunction||(this.readHashFunction=_w),typeof this.writeHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.");if(typeof this.readHashFunction!="function")throw new Error("mnemonist/FuzzyMultiMap.constructor: invalid hash function given.")}nt.prototype.clear=function(){this.items.clear(),this.size=0,this.dimension=0};nt.prototype.add=function(r){var e=this.writeHashFunction(r);return this.items.set(e,r),this.size=this.items.size,this.dimension=this.items.dimension,this};nt.prototype.set=function(r,e){return r=this.writeHashFunction(r),this.items.set(r,e),this.size=this.items.size,this.dimension=this.items.dimension,this};nt.prototype.get=function(r){return r=this.readHashFunction(r),this.items.get(r)};nt.prototype.has=function(r){return r=this.readHashFunction(r),this.items.has(r)};nt.prototype.forEach=function(r,e){e=arguments.length>1?e:this,this.items.forEach(function(t){r.call(e,t,t)})};nt.prototype.values=function(){return this.items.values()};typeof Symbol<"u"&&(nt.prototype[Symbol.iterator]=nt.prototype.values);nt.prototype.inspect=function(){var r=Array.from(this);return Object.defineProperty(r,"constructor",{value:nt,enumerable:!1}),r};typeof Symbol<"u"&&(nt.prototype[Symbol.for("nodejs.util.inspect.custom")]=nt.prototype.inspect);nt.from=function(r,e,t,i){arguments.length===3&&typeof t=="boolean"&&(i=t,t=Array);var n=new nt(e,t);return o8(r,function(s,u){i?n.set(u,s):n.add(s)}),n};Pw.exports=nt});var Sw=_((NX,Tw)=>{var Ow=1024;function s8(r){return(r&r-1)===0}function nr(r,e){if(arguments.length<1)throw new Error("mnemonist/hashed-array-tree: expecting at least a byte array constructor.");var t=e||0,i=Ow,n=0;if(typeof e=="object"&&(t=e.initialCapacity||0,n=e.initialLength||0,i=e.blockSize||Ow),!i||!s8(i))throw new Error("mnemonist/hashed-array-tree: block size should be a power of two.");var s=Math.max(n,t),u=Math.ceil(s/i);this.ArrayClass=r,this.length=n,this.capacity=u*i,this.blockSize=i,this.offsetMask=i-1,this.blockMask=Math.log2(i),this.blocks=new Array(u);for(var l=0;l<u;l++)this.blocks[l]=new this.ArrayClass(this.blockSize)}nr.prototype.set=function(r,e){if(this.length<r)throw new Error("HashedArrayTree("+this.ArrayClass.name+").set: index out of bounds.");var t=r>>this.blockMask,i=r&this.offsetMask;return this.blocks[t][i]=e,this};nr.prototype.get=function(r){if(!(this.length<r)){var e=r>>this.blockMask,t=r&this.offsetMask;return this.blocks[e][t]}};nr.prototype.grow=function(r){if(typeof r!="number"&&(r=this.capacity+this.blockSize),this.capacity>=r)return this;for(;this.capacity<r;)this.blocks.push(new this.ArrayClass(this.blockSize)),this.capacity+=this.blockSize;return this};nr.prototype.resize=function(r){return r===this.length?this:r<this.length?(this.length=r,this):(this.length=r,this.grow(r),this)};nr.prototype.push=function(r){this.capacity===this.length&&this.grow();var e=this.length,t=e>>this.blockMask,i=e&this.offsetMask;return this.blocks[t][i]=r,++this.length};nr.prototype.pop=function(){if(this.length!==0){var r=this.blocks[this.blocks.length-1],e=--this.length&this.offsetMask;return r[e]}};nr.prototype.inspect=function(){for(var r=new this.ArrayClass(this.length),e,t=0,i=this.length;t<i;t++)e=t>>this.blockMask,r[t]=this.blocks[e][t&this.offsetMask];return r.type=this.ArrayClass.name,r.items=this.length,r.capacity=this.capacity,r.blockSize=this.blockSize,Object.defineProperty(r,"constructor",{value:nr,enumerable:!1}),r};typeof Symbol<"u"&&(nr.prototype[Symbol.for("nodejs.util.inspect.custom")]=nr.prototype.inspect);Tw.exports=nr});var em=_((WX,Aw)=>{var Cw=Ge(),Zv=wt();function ze(r,e){if(arguments.length<2)throw new Error("mnemonist/fixed-stack: expecting an Array class and a capacity.");if(typeof e!="number"||e<=0)throw new Error("mnemonist/fixed-stack: `capacity` should be a positive number.");this.capacity=e,this.ArrayClass=r,this.items=new this.ArrayClass(this.capacity),this.clear()}ze.prototype.clear=function(){this.size=0};ze.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-stack.push: stack capacity ("+this.capacity+") exceeded!");return this.items[this.size++]=r,this.size};ze.prototype.pop=function(){if(this.size!==0)return this.items[--this.size]};ze.prototype.peek=function(){return this.items[this.size-1]};ze.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.items.length;t<i;t++)r.call(e,this.items[i-t-1],t,this)};ze.prototype.toArray=function(){for(var r=new this.ArrayClass(this.size),e=this.size-1,t=this.size;t--;)r[t]=this.items[e-t];return r};ze.prototype.values=function(){var r=this.items,e=this.size,t=0;return new Cw(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return t++,{value:i,done:!1}})};ze.prototype.entries=function(){var r=this.items,e=this.size,t=0;return new Cw(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(ze.prototype[Symbol.iterator]=ze.prototype.values);ze.prototype.toString=function(){return this.toArray().join(",")};ze.prototype.toJSON=function(){return this.toArray()};ze.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:ze,enumerable:!1}),r};typeof Symbol<"u"&&(ze.prototype[Symbol.for("nodejs.util.inspect.custom")]=ze.prototype.inspect);ze.from=function(r,e,t){if(arguments.length<3&&(t=Zv.guessLength(r),typeof t!="number"))throw new Error("mnemonist/fixed-stack.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new ze(e,t);if(Zv.isArrayLike(r)){var n,s;for(n=0,s=r.length;n<s;n++)i.items[n]=r[n];return i.size=s,i}return Zv.forEach(r,function(u){i.push(u)}),i};Aw.exports=ze});var qw=_((UX,Ew)=>{var a8=wt(),u8=ht(),c8=em();function tm(r,e,t,i,n,s,u,l){var f=u+(l-u)/2|0,p=~-f,v=-~f,b=t[f];i[s]=b+1;var T=e?e(r[b]):r[b][1],S=s*2+1,q=s*2+2,M=-1/0,j=-1/0;u<=p&&(M=tm(r,e,t,i,n,S,u,p)),v<=l&&(j=tm(r,e,t,i,n,q,v,l));var D=Math.max(T,M,j),V=b;return D===M?V=n[i[S]-1]:D===j&&(V=n[i[q]-1]),n[b]=V,D}function Tr(r,e){this.size=r.length,this.intervals=r;var t=null,i=null;Array.isArray(e)&&(t=e[0],i=e[1]);var n=r.length,s=u8.getPointerArray(n+1),u=new s(n),l;for(l=1;l<n;l++)u[l]=l;u.sort(function(T,S){return T=r[T],S=r[S],t?(T=t(T),S=t(S)):(T=T[0],S=S[0]),T<S?-1:T>S?1:0});var f=Math.ceil(Math.log2(n+1)),p=Math.pow(2,f)-1,v=new s(p),b=new s(n);tm(r,i,u,v,b,0,0,n-1),u=null,this.height=f,this.tree=v,this.augmentations=b,this.startGetter=t,this.endGetter=i,this.stack=new c8(s,this.height)}Tr.prototype.intervalsContainingPoint=function(r){var e=[],t=this.stack;t.clear(),t.push(0);for(var i=this.tree.length,n,s,u,l,f,p,v,b,T;t.size;)n=t.pop(),s=this.tree[n]-1,u=this.intervals[s],l=this.intervals[this.augmentations[s]],v=this.endGetter?this.endGetter(l):l[1],!(r>v)&&(b=n*2+1,b<i&&this.tree[b]!==0&&t.push(b),f=this.startGetter?this.startGetter(u):u[0],p=this.endGetter?this.endGetter(u):u[1],r>=f&&r<=p&&e.push(u),!(r<f)&&(T=n*2+2,T<i&&this.tree[T]!==0&&t.push(T)));return e};Tr.prototype.intervalsOverlappingInterval=function(r){var e=this.startGetter?this.startGetter(r):r[0],t=this.endGetter?this.endGetter(r):r[1],i=[],n=this.stack;n.clear(),n.push(0);for(var s=this.tree.length,u,l,f,p,v,b,T,S,q;n.size;)u=n.pop(),l=this.tree[u]-1,f=this.intervals[l],p=this.intervals[this.augmentations[l]],T=this.endGetter?this.endGetter(p):p[1],!(e>T)&&(S=u*2+1,S<s&&this.tree[S]!==0&&n.push(S),v=this.startGetter?this.startGetter(f):f[0],b=this.endGetter?this.endGetter(f):f[1],t>=v&&e<=b&&i.push(f),!(t<v)&&(q=u*2+2,q<s&&this.tree[q]!==0&&n.push(q)));return i};Tr.prototype.inspect=function(){var r=this.intervals.slice();return Object.defineProperty(r,"constructor",{value:Tr,enumerable:!1}),r};typeof Symbol<"u"&&(Tr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Tr.prototype.inspect);Tr.from=function(r,e){return a8.isArrayLike(r)?new Tr(r,e):new Tr(Array.from(r),e)};Ew.exports=Tr});var rm=_(Ii=>{Ii.search=function(r,e,t,i){var n=0;t=typeof t<"u"?t:0,i=typeof i<"u"?i:r.length,i--;for(var s;t<=i;)if(n=t+i>>>1,s=r[n],s>e)i=~-n;else if(s<e)t=-~n;else return n;return-1};Ii.searchWithComparator=function(r,e,t){for(var i=0,n=0,s=~-e.length,u;n<=s;)if(i=n+s>>>1,u=r(e[i],t),u>0)s=~-i;else if(u<0)n=-~i;else return i;return-1};Ii.lowerBound=function(r,e,t,i){var n=0;for(t=typeof t<"u"?t:0,i=typeof i<"u"?i:r.length;t<i;)n=t+i>>>1,e<=r[n]?i=n:t=-~n;return t};Ii.lowerBoundWithComparator=function(r,e,t){for(var i=0,n=0,s=e.length;n<s;)i=n+s>>>1,r(t,e[i])<=0?s=i:n=-~i;return n};Ii.lowerBoundIndices=function(r,e,t,i,n){var s=0;for(i=typeof i<"u"?i:0,n=typeof n<"u"?n:r.length;i<n;)s=i+n>>>1,t<=r[e[s]]?n=s:i=-~s;return i};Ii.upperBound=function(r,e,t,i){var n=0;for(t=typeof t<"u"?t:0,i=typeof i<"u"?i:r.length;t<i;)n=t+i>>>1,e>=r[n]?t=-~n:i=n;return t};Ii.upperBoundWithComparator=function(r,e,t){for(var i=0,n=0,s=e.length;n<s;)i=n+s>>>1,r(t,e[i])>=0?n=-~i:s=i;return n}});var jw=_(ki=>{var Co=ht(),Ao=wt().isArrayLike,pn=rm(),xw=fh();function Mw(r,e){if(r.length===0)return e.slice();if(e.length===0)return r.slice();var t;r[0]>e[0]&&(t=r,r=e,e=t);var i=r[r.length-1],n=e[0];if(i<=n)return Co.isTypedArray(r)?Co.concat(r,e):r.concat(e);var s=new r.constructor(r.length+e.length),u,l,f;for(u=0,l=r.length;u<l&&(f=r[u],f<=n);u++)s[u]=f;for(var p=u,v=r.length,b=0,T=e.length,S,q;p<v&&b<T;)S=r[p],q=e[b],S<=q?(s[u++]=S,p++):(s[u++]=q,b++);for(;p<v;)s[u++]=r[p++];for(;b<T;)s[u++]=e[b++];return s}function Lw(r,e){if(r.length===0)return e.slice();if(e.length===0)return r.slice();var t;r[0]>e[0]&&(t=r,r=e,e=t);var i=r[r.length-1],n=e[0];if(i<n)return Co.isTypedArray(r)?Co.concat(r,e):r.concat(e);var s=new r.constructor,u,l,f;for(u=0,l=r.length;u<l&&(f=r[u],f<n);u++)s.push(f);for(var p=u,v=r.length,b=0,T=e.length,S,q;p<v&&b<T;)S=r[p],q=e[b],S<=q?((s.length===0||s[s.length-1]!==S)&&s.push(S),p++):((s.length===0||s[s.length-1]!==q)&&s.push(q),b++);for(;p<v;)S=r[p++],(s.length===0||s[s.length-1]!==S)&&s.push(S);for(;b<T;)q=e[b++],(s.length===0||s[s.length-1]!==q)&&s.push(q);return s}ki.intersectionUniqueArrays=function(r,e){if(r.length===0||e.length===0)return new r.constructor(0);var t;r[0]>e[0]&&(t=r,r=e,e=t);var i=r[r.length-1],n=e[0];if(i<n)return new r.constructor(0);for(var s=new r.constructor,u=pn.lowerBound(r,n),l=r.length,f=0,p=pn.upperBound(e,i),v,b;u<l&&f<p;)v=r[u],b=e[f],v<b?u=pn.lowerBound(r,b,u+1):v>b?f=pn.lowerBound(e,v,f+1):(s.push(v),u++,f++);return s};function l8(r){var e=0,t=-1/0,i,n,s,u=[];for(n=0,s=r.length;n<s;n++)i=r[n].length,i!==0&&(u.push(r[n]),e+=i,i>t&&(t=i));if(u.length===0)return new r[0].constructor(0);if(u.length===1)return u[0].slice();if(u.length===2)return Mw(u[0],u[1]);r=u;var l=new r[0].constructor(e),f=Co.getPointerArray(t),p=new f(r.length),v=new xw(function(S,q){return S=r[S][p[S]],q=r[q][p[q]],S<q?-1:S>q?1:0});for(n=0;n<s;n++)v.push(n);n=0;for(var b,T;v.size;)b=v.pop(),T=r[b][p[b]++],l[n++]=T,p[b]<r[b].length&&v.push(b);return l}function h8(r){var e=-1/0,t,i,n,s=[];for(i=0,n=r.length;i<n;i++)t=r[i].length,t!==0&&(s.push(r[i]),t>e&&(e=t));if(s.length===0)return new r[0].constructor(0);if(s.length===1)return s[0].slice();if(s.length===2)return Lw(s[0],s[1]);r=s;var u=new r[0].constructor,l=Co.getPointerArray(e),f=new l(r.length),p=new xw(function(T,S){return T=r[T][f[T]],S=r[S][f[S]],T<S?-1:T>S?1:0});for(i=0;i<n;i++)p.push(i);for(var v,b;p.size;)v=p.pop(),b=r[v][f[v]++],(u.length===0||u[u.length-1]!==b)&&u.push(b),f[v]<r[v].length&&p.push(v);return u}ki.kWayIntersectionUniqueArrays=function(r){var e=-1/0,t=-1/0,i=1/0,n,s,u,l,f;for(l=0,f=r.length;l<f;l++){if(u=r[l].length,u===0)return[];u>e&&(e=u),n=r[l][0],s=r[l][u-1],n>t&&(t=n),s<i&&(i=s)}if(t>i)return[];if(t===i)return[t];var p,v,b=r[0],T,S,q,M,j,D,V=t;for(l=1;l<f;l++){for(p=b,v=r[l],b=new Array,T=0,S=pn.lowerBound(v,V),q=p.length,M=v.length;T<q&&S<M;)j=p[T],D=v[S],j<D?T=pn.lowerBound(p,D,T+1):j>D?S=pn.lowerBound(v,j,S+1):(b.push(j),T++,S++);if(b.length===0)return b;V=b[0]}return b};ki.merge=function(){if(arguments.length===2){if(Ao(arguments[0]))return Mw(arguments[0],arguments[1])}else if(Ao(arguments[0]))return l8(arguments);return null};ki.unionUnique=function(){if(arguments.length===2){if(Ao(arguments[0]))return Lw(arguments[0],arguments[1])}else if(Ao(arguments[0]))return h8(arguments);return null};ki.intersectionUnique=function(){if(arguments.length===2){if(Ao(arguments[0]))return ki.intersectionUniqueArrays(arguments[0],arguments[1])}else if(Ao(arguments[0]))return ki.kWayIntersectionUniqueArrays(arguments);return null}});var Fw=_((HX,kw)=>{var f8=Ge(),p8=_e(),d8=jw();function Iw(r){return r}function ft(r){if(this.clear(),Array.isArray(r)?(this.documentTokenizer=r[0],this.queryTokenizer=r[1]):(this.documentTokenizer=r,this.queryTokenizer=r),this.documentTokenizer||(this.documentTokenizer=Iw),this.queryTokenizer||(this.queryTokenizer=Iw),typeof this.documentTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: document tokenizer is not a function.");if(typeof this.queryTokenizer!="function")throw new Error("mnemonist/InvertedIndex.constructor: query tokenizer is not a function.")}ft.prototype.clear=function(){this.items=[],this.mapping=new Map,this.size=0,this.dimension=0};ft.prototype.add=function(r){this.size++;var e=this.items.length;this.items.push(r);var t=this.documentTokenizer(r);if(!Array.isArray(t))throw new Error("mnemonist/InvertedIndex.add: tokenizer function should return an array of tokens.");for(var i=new Set,n,s,u=0,l=t.length;u<l;u++)n=t[u],!i.has(n)&&(i.add(n),s=this.mapping.get(n),s||(s=[],this.mapping.set(n,s)),s.push(e));return this.dimension=this.mapping.size,this};ft.prototype.get=function(r){if(!this.size)return[];var e=this.queryTokenizer(r);if(!Array.isArray(e))throw new Error("mnemonist/InvertedIndex.query: tokenizer function should return an array of tokens.");if(!e.length)return[];var t=this.mapping.get(e[0]),i,n,s;if(typeof t>"u"||t.length===0)return[];if(e.length>1)for(n=1,s=e.length;n<s;n++){if(i=this.mapping.get(e[n]),typeof i>"u"||i.length===0)return[];t=d8.intersectionUniqueArrays(t,i)}var u=new Array(t.length);for(n=0,s=u.length;n<s;n++)u[n]=this.items[t[n]];return u};ft.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.documents.length;t<i;t++)r.call(e,this.documents[t],t,this)};ft.prototype.documents=function(){var r=this.items,e=r.length,t=0;return new f8(function(){if(t>=e)return{done:!0};var i=r[t++];return{value:i,done:!1}})};ft.prototype.tokens=function(){return this.mapping.keys()};typeof Symbol<"u"&&(ft.prototype[Symbol.iterator]=ft.prototype.documents);ft.prototype.inspect=function(){var r=this.items.slice();return Object.defineProperty(r,"constructor",{value:ft,enumerable:!1}),r};typeof Symbol<"u"&&(ft.prototype[Symbol.for("nodejs.util.inspect.custom")]=ft.prototype.inspect);ft.from=function(r,e){var t=new ft(e);return p8(r,function(i){t.add(i)}),t};kw.exports=ft});var nm=_(im=>{var Be=new Float64Array(64),Ce=new Float64Array(64);function v8(r,e,t){var i,n,s,u,l;for(Be[0]=e,Ce[0]=t,n=0;n>=0;)if(s=Be[n],u=Ce[n]-1,s<u){for(i=r[s];s<u;){for(;r[u]>=i&&s<u;)u--;for(s<u&&(r[s++]=r[u]);r[s]<=i&&s<u;)s++;s<u&&(r[u--]=r[s])}r[s]=i,Be[n+1]=s+1,Ce[n+1]=Ce[n],Ce[n++]=s,Ce[n]-Be[n]>Ce[n-1]-Be[n-1]&&(l=Be[n],Be[n]=Be[n-1],Be[n-1]=l,l=Ce[n],Ce[n]=Ce[n-1],Ce[n-1]=l)}else n--;return r}im.inplaceQuickSort=v8;function m8(r,e,t,i){var n,s,u,l,f,p;for(Be[0]=t,Ce[0]=i,s=0;s>=0;)if(u=Be[s],l=Ce[s]-1,u<l){for(f=e[u],n=r[f];u<l;){for(;r[e[l]]>=n&&u<l;)l--;for(u<l&&(e[u++]=e[l]);r[e[u]]<=n&&u<l;)u++;u<l&&(e[l--]=e[u])}e[u]=f,Be[s+1]=u+1,Ce[s+1]=Ce[s],Ce[s++]=u,Ce[s]-Be[s]>Ce[s-1]-Be[s-1]&&(p=Be[s],Be[s]=Be[s-1],Be[s-1]=p,p=Ce[s],Ce[s]=Ce[s-1],Ce[s-1]=p)}else s--;return e}im.inplaceQuickSortIndices=m8});var Nw=_((YX,Vw)=>{var y8=wt(),Oh=ht(),Dw=Ms().createTupleComparator,Rw=Ph(),g8=nm().inplaceQuickSortIndices;function om(r,e,t,i){var n,s=0,u;for(n=0;n<r;n++)u=e[n][t]-i[n],s+=u*u;return s}function b8(r,e){var t=e.length,i=new Array(r),n=new Array(t),s,u=Oh.getPointerArray(t),l=new u(t),f,p,v,b=!0;for(f=0;f<r;f++){for(s=new Float64Array(t),p=0;p<t;p++)v=e[p],s[p]=v[1][f],b&&(n[p]=v[0],l[p]=p);b=!1,i[f]=s}return{axes:i,ids:l,labels:n}}function zw(r,e,t,i){for(var n=i.length,s=Oh.getPointerArray(n+1),u=new s(n),l=new s(n),f=new s(n),p=[[0,0,t.length,-1,0]],v,b,T,S,q,M,j,D,V=0;p.length!==0;)v=p.pop(),D=v[0],M=v[1],j=v[2],b=v[3],T=v[4],g8(e[D],t,M,j),n=j-M,S=M+(n>>>1),q=t[S],u[V]=q,b>-1&&(T===0?l[b]=V+1:f[b]=V+1),D=(D+1)%r,S!==M&&S!==j-1&&p.push([D,S+1,j,V,1]),S!==M&&p.push([D,M,S,V,0]),V++;return{axes:e,labels:i,pivots:u,lefts:l,rights:f}}function Gt(r,e){this.dimensions=r,this.visited=0,this.axes=e.axes,this.labels=e.labels,this.pivots=e.pivots,this.lefts=e.lefts,this.rights=e.rights,this.size=this.labels.length}Gt.prototype.nearestNeighbor=function(r){var e=1/0,t=null,i=this.dimensions,n=this.axes,s=this.pivots,u=this.lefts,l=this.rights,f=0;function p(v,b){f++;var T=u[b],S=l[b],q=s[b],M=om(i,n,q,r);if(!(M<e&&(t=q,e=M,M===0))){var j=n[v][q]-r[v];v=(v+1)%i,j>0?T!==0&&p(v,T-1):S!==0&&p(v,S-1),j*j<e&&(j>0?S!==0&&p(v,S-1):T!==0&&p(v,T-1))}}return p(0,0),this.visited=f,this.labels[t]};var _8=Dw(3),P8=Dw(2);Gt.prototype.kNearestNeighbors=function(r,e){if(r<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");if(r=Math.min(r,this.size),r===1)return[this.nearestNeighbor(e)];var t=new Rw(Array,_8,r),i=this.dimensions,n=this.axes,s=this.pivots,u=this.lefts,l=this.rights,f=0;function p(T,S){var q=u[S],M=l[S],j=s[S],D=om(i,n,j,e);t.push([D,f++,j]);var V=e[T],Y=n[T][j],ie=V-Y;T=(T+1)%i,V<Y?q!==0&&p(T,q-1):M!==0&&p(T,M-1),(ie*ie<t.peek()[0]||t.size<r)&&(V<Y?M!==0&&p(T,M-1):q!==0&&p(T,q-1))}p(0,0),this.visited=f;for(var v=t.consume(),b=0;b<v.length;b++)v[b]=this.labels[v[b][2]];return v};Gt.prototype.linearKNearestNeighbors=function(r,e){if(r<=0)throw new Error("mnemonist/kd-tree.kNearestNeighbors: k should be a positive number.");r=Math.min(r,this.size);var t=new Rw(Array,P8,r),i,n,s;for(i=0,n=this.size;i<n;i++)s=om(this.dimensions,this.axes,this.pivots[i],e),t.push([s,i]);var u=t.consume();for(i=0;i<u.length;i++)u[i]=this.labels[this.pivots[u[i][1]]];return u};Gt.prototype.inspect=function(){var r=new Map;r.dimensions=this.dimensions,Object.defineProperty(r,"constructor",{value:Gt,enumerable:!1});var e,t,i;for(e=0;e<this.size;e++){for(i=new Array(this.dimensions),t=0;t<this.dimensions;t++)i[t]=this.axes[t][e];r.set(this.labels[e],i)}return r};typeof Symbol<"u"&&(Gt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Gt.prototype.inspect);Gt.from=function(r,e){var t=y8.toArray(r),i=b8(e,t),n=zw(e,i.axes,i.ids,i.labels);return new Gt(e,n)};Gt.fromAxes=function(r,e){e||(e=Oh.indices(r[0].length));var t=r.length,i=zw(r.length,r,Oh.indices(e.length),e);return new Gt(t,i)};Vw.exports=Gt});var Gw=_((QX,Uw)=>{var Ww=Ge(),w8=_e();function Oe(){this.clear()}Oe.prototype.clear=function(){this.head=null,this.tail=null,this.size=0};Oe.prototype.first=function(){return this.head?this.head.item:void 0};Oe.prototype.peek=Oe.prototype.first;Oe.prototype.last=function(){return this.tail?this.tail.item:void 0};Oe.prototype.push=function(r){var e={item:r,next:null};return this.head?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),this.size++,this.size};Oe.prototype.unshift=function(r){var e={item:r,next:null};return this.head?(this.head.next||(this.tail=this.head),e.next=this.head,this.head=e):(this.head=e,this.tail=e),this.size++,this.size};Oe.prototype.shift=function(){if(this.size){var r=this.head;return this.head=r.next,this.size--,r.item}};Oe.prototype.forEach=function(r,e){if(this.size){e=arguments.length>1?e:this;for(var t=this.head,i=0;t;)r.call(e,t.item,i,this),t=t.next,i++}};Oe.prototype.toArray=function(){if(!this.size)return[];for(var r=new Array(this.size),e=0,t=this.size,i=this.head;e<t;e++)r[e]=i.item,i=i.next;return r};Oe.prototype.values=function(){var r=this.head;return new Ww(function(){if(!r)return{done:!0};var e=r.item;return r=r.next,{value:e,done:!1}})};Oe.prototype.entries=function(){var r=this.head,e=0;return new Ww(function(){if(!r)return{done:!0};var t=r.item;return r=r.next,e++,{value:[e-1,t],done:!1}})};typeof Symbol<"u"&&(Oe.prototype[Symbol.iterator]=Oe.prototype.values);Oe.prototype.toString=function(){return this.toArray().join(",")};Oe.prototype.toJSON=function(){return this.toArray()};Oe.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:Oe,enumerable:!1}),r};typeof Symbol<"u"&&(Oe.prototype[Symbol.for("nodejs.util.inspect.custom")]=Oe.prototype.inspect);Oe.from=function(r){var e=new Oe;return w8(r,function(t){e.push(t)}),e};Uw.exports=Oe});var Th=_((KX,Bw)=>{var sm=Ge(),O8=_e(),T8=ht(),S8=wt();function Ie(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var i=T8.getPointerArray(t);this.forward=new i(t),this.backward=new i(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items={}}Ie.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};Ie.prototype.splayOnTop=function(r){var e=this.head;if(this.head===r)return this;var t=this.backward[r],i=this.forward[r];return this.tail===r?this.tail=t:this.backward[i]=t,this.forward[t]=i,this.backward[e]=r,this.head=r,this.forward[r]=e,this};Ie.prototype.set=function(r,e){var t=this.items[r];if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],delete this.items[this.K[t]]),this.items[r]=t,this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Ie.prototype.setpop=function(r,e){var t=null,i=null,n=this.items[r];return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],delete this.items[i]),this.items[r]=n,this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Ie.prototype.has=function(r){return r in this.items};Ie.prototype.get=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};Ie.prototype.peek=function(r){var e=this.items[r];if(!(typeof e>"u"))return this.V[e]};Ie.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.size,n=this.head,s=this.K,u=this.V,l=this.forward;t<i;)r.call(e,u[n],s[n],this),n=l[n],t++};Ie.prototype.keys=function(){var r=0,e=this.size,t=this.head,i=this.K,n=this.forward;return new sm(function(){if(r>=e)return{done:!0};var s=i[t];return r++,r<e&&(t=n[t]),{done:!1,value:s}})};Ie.prototype.values=function(){var r=0,e=this.size,t=this.head,i=this.V,n=this.forward;return new sm(function(){if(r>=e)return{done:!0};var s=i[t];return r++,r<e&&(t=n[t]),{done:!1,value:s}})};Ie.prototype.entries=function(){var r=0,e=this.size,t=this.head,i=this.K,n=this.V,s=this.forward;return new sm(function(){if(r>=e)return{done:!0};var u=i[t],l=n[t];return r++,r<e&&(t=s[t]),{done:!1,value:[u,l]}})};typeof Symbol<"u"&&(Ie.prototype[Symbol.iterator]=Ie.prototype.entries);Ie.prototype.inspect=function(){for(var r=new Map,e=this.entries(),t;t=e.next(),!t.done;)r.set(t.value[0],t.value[1]);return Object.defineProperty(r,"constructor",{value:Ie,enumerable:!1}),r};typeof Symbol<"u"&&(Ie.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ie.prototype.inspect);Ie.from=function(r,e,t,i){if(arguments.length<2){if(i=S8.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Ie(e,t,i);return O8(r,function(s,u){n.set(u,s)}),n};Bw.exports=Ie});var $w=_((XX,Hw)=>{var Eo=Th(),C8=_e(),A8=ht(),E8=wt();function Sr(r,e,t){arguments.length<2?Eo.call(this,r):Eo.call(this,r,e,t);var i=A8.getPointerArray(this.capacity);this.deleted=new i(this.capacity),this.deletedSize=0}for(am in Eo.prototype)Sr.prototype[am]=Eo.prototype[am];var am;typeof Symbol<"u"&&(Sr.prototype[Symbol.iterator]=Eo.prototype[Symbol.iterator]);Sr.prototype.clear=function(){Eo.prototype.clear.call(this),this.deletedSize=0};Sr.prototype.set=function(r,e){var t=this.items[r];if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?(this.deletedSize>0?t=this.deleted[--this.deletedSize]:t=this.size,this.size++):(t=this.tail,this.tail=this.backward[t],delete this.items[this.K[t]]),this.items[r]=t,this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Sr.prototype.setpop=function(r,e){var t=null,i=null,n=this.items[r];return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?(this.deletedSize>0?n=this.deleted[--this.deletedSize]:n=this.size,this.size++):(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],delete this.items[i]),this.items[r]=n,this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Sr.prototype.delete=function(r){var e=this.items[r];if(typeof e>"u")return!1;if(delete this.items[r],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var t=this.backward[e],i=this.forward[e];return this.head===e&&(this.head=i),this.tail===e&&(this.tail=t),this.forward[t]=i,this.backward[i]=t,this.size--,this.deleted[this.deletedSize++]=e,!0};Sr.prototype.remove=function(r,e=void 0){var t=this.items[r];if(typeof t>"u")return e;var i=this.V[t];if(delete this.items[r],this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,i;var n=this.backward[t],s=this.forward[t];return this.head===t&&(this.head=s),this.tail===t&&(this.tail=n),this.forward[n]=s,this.backward[s]=n,this.size--,this.deleted[this.deletedSize++]=t,i};Sr.from=function(r,e,t,i){if(arguments.length<2){if(i=E8.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Sr(e,t,i);return C8(r,function(s,u){n.set(u,s)}),n};Hw.exports=Sr});var um=_((JX,Yw)=>{var qo=Th(),q8=_e(),x8=ht(),M8=wt();function et(r,e,t){if(arguments.length<2&&(t=r,r=null,e=null),this.capacity=t,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-map: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-map: capacity should be a finite positive integer.");var i=x8.getPointerArray(t);this.forward=new i(t),this.backward=new i(t),this.K=typeof r=="function"?new r(t):new Array(t),this.V=typeof e=="function"?new e(t):new Array(t),this.size=0,this.head=0,this.tail=0,this.items=new Map}et.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items.clear()};et.prototype.set=function(r,e){var t=this.items.get(r);if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?t=this.size++:(t=this.tail,this.tail=this.backward[t],this.items.delete(this.K[t])),this.items.set(r,t),this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};et.prototype.setpop=function(r,e){var t=null,i=null,n=this.items.get(r);return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?n=this.size++:(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],this.items.delete(i)),this.items.set(r,n),this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};et.prototype.has=function(r){return this.items.has(r)};et.prototype.get=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.splayOnTop(e),this.V[e]};et.prototype.peek=function(r){var e=this.items.get(r);if(!(typeof e>"u"))return this.V[e]};et.prototype.splayOnTop=qo.prototype.splayOnTop;et.prototype.forEach=qo.prototype.forEach;et.prototype.keys=qo.prototype.keys;et.prototype.values=qo.prototype.values;et.prototype.entries=qo.prototype.entries;typeof Symbol<"u"&&(et.prototype[Symbol.iterator]=et.prototype.entries);et.prototype.inspect=qo.prototype.inspect;et.from=function(r,e,t,i){if(arguments.length<2){if(i=M8.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-cache.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new et(e,t,i);return q8(r,function(s,u){n.set(u,s)}),n};Yw.exports=et});var Kw=_((ZX,Qw)=>{var xo=um(),L8=_e(),j8=ht(),I8=wt();function Cr(r,e,t){arguments.length<2?xo.call(this,r):xo.call(this,r,e,t);var i=j8.getPointerArray(this.capacity);this.deleted=new i(this.capacity),this.deletedSize=0}for(cm in xo.prototype)Cr.prototype[cm]=xo.prototype[cm];var cm;typeof Symbol<"u"&&(Cr.prototype[Symbol.iterator]=xo.prototype[Symbol.iterator]);Cr.prototype.clear=function(){xo.prototype.clear.call(this),this.deletedSize=0};Cr.prototype.set=function(r,e){var t=this.items.get(r);if(typeof t<"u"){this.splayOnTop(t),this.V[t]=e;return}this.size<this.capacity?(this.deletedSize>0?t=this.deleted[--this.deletedSize]:t=this.size,this.size++):(t=this.tail,this.tail=this.backward[t],this.items.delete(this.K[t])),this.items.set(r,t),this.K[t]=r,this.V[t]=e,this.forward[t]=this.head,this.backward[this.head]=t,this.head=t};Cr.prototype.setpop=function(r,e){var t=null,i=null,n=this.items.get(r);return typeof n<"u"?(this.splayOnTop(n),t=this.V[n],this.V[n]=e,{evicted:!1,key:r,value:t}):(this.size<this.capacity?(this.deletedSize>0?n=this.deleted[--this.deletedSize]:n=this.size,this.size++):(n=this.tail,this.tail=this.backward[n],t=this.V[n],i=this.K[n],this.items.delete(i)),this.items.set(r,n),this.K[n]=r,this.V[n]=e,this.forward[n]=this.head,this.backward[this.head]=n,this.head=n,i?{evicted:!0,key:i,value:t}:null)};Cr.prototype.delete=function(r){var e=this.items.get(r);if(typeof e>"u")return!1;if(this.items.delete(r),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,!0;var t=this.backward[e],i=this.forward[e];return this.head===e&&(this.head=i),this.tail===e&&(this.tail=t),this.forward[t]=i,this.backward[i]=t,this.size--,this.deleted[this.deletedSize++]=e,!0};Cr.prototype.remove=function(r,e=void 0){var t=this.items.get(r);if(typeof t>"u")return e;var i=this.V[t];if(this.items.delete(r),this.size===1)return this.size=0,this.head=0,this.tail=0,this.deletedSize=0,i;var n=this.backward[t],s=this.forward[t];return this.head===t&&(this.head=s),this.tail===t&&(this.tail=n),this.forward[n]=s,this.backward[s]=n,this.size--,this.deleted[this.deletedSize++]=t,i};Cr.from=function(r,e,t,i){if(arguments.length<2){if(i=I8.guessLength(r),typeof i!="number")throw new Error("mnemonist/lru-map.from: could not guess iterable length. Please provide desired capacity as last argument.")}else arguments.length===2&&(i=e,e=null,t=null);var n=new Cr(e,t,i);return L8(r,function(s,u){n.set(u,s)}),n};Qw.exports=Cr});var Jw=_((eJ,Xw)=>{var k8=Ge(),F8=_e(),D8=Ph(),R8=function(r,e){return r[1]>e[1]?-1:r[1]<e[1]?1:0};function se(){this.items=new Map,Object.defineProperty(this.items,"constructor",{value:se,enumerable:!1}),this.clear()}se.prototype.clear=function(){this.size=0,this.dimension=0,this.items.clear()};se.prototype.add=function(r,e){if(e===0)return this;if(e<0)return this.remove(r,-e);if(e=e||1,typeof e!="number")throw new Error("mnemonist/multi-set.add: given count should be a number.");this.size+=e;let t=this.items.get(r);return t===void 0?this.dimension++:e+=t,this.items.set(r,e),this};se.prototype.set=function(r,e){var t;if(typeof e!="number")throw new Error("mnemonist/multi-set.set: given count should be a number.");return e<=0?(t=this.items.get(r),typeof t<"u"&&(this.size-=t,this.dimension--),this.items.delete(r),this):(e=e||1,t=this.items.get(r),typeof t=="number"?this.items.set(r,t+e):(this.dimension++,this.items.set(r,e)),this.size+=e,this)};se.prototype.has=function(r){return this.items.has(r)};se.prototype.delete=function(r){var e=this.items.get(r);return e===0?!1:(this.size-=e,this.dimension--,this.items.delete(r),!0)};se.prototype.remove=function(r,e){if(e!==0){if(e<0)return this.add(r,-e);if(e=e||1,typeof e!="number")throw new Error("mnemonist/multi-set.remove: given count should be a number.");var t=this.items.get(r);if(!(typeof t>"u")){var i=Math.max(0,t-e);i===0?(this.items.delete(r),this.size-=t,this.dimension--):(this.items.set(r,i),this.size-=e)}}};se.prototype.edit=function(r,e){var t=this.multiplicity(r);if(t!==0){var i=this.multiplicity(e);return this.items.set(e,t+i),this.items.delete(r),this}};se.prototype.multiplicity=function(r){var e=this.items.get(r);return typeof e>"u"?0:e};se.prototype.get=se.prototype.multiplicity;se.prototype.count=se.prototype.multiplicity;se.prototype.frequency=function(r){if(this.size===0)return 0;var e=this.multiplicity(r);return e/this.size};se.prototype.top=function(r){if(typeof r!="number"||r<=0)throw new Error("mnemonist/multi-set.top: n must be a number > 0.");for(var e=new D8(Array,R8,r),t=this.items.entries(),i;i=t.next(),!i.done;)e.push(i.value);return e.consume()};se.prototype.forEach=function(r,e){e=arguments.length>1?e:this;var t;this.items.forEach(function(i,n){for(t=0;t<i;t++)r.call(e,n,n)})};se.prototype.forEachMultiplicity=function(r,e){e=arguments.length>1?e:this,this.items.forEach(r,e)};se.prototype.keys=function(){return this.items.keys()};se.prototype.values=function(){var r=this.items.entries(),e=!1,t,i,n,s;return new k8(function u(){if(!e){if(t=r.next(),t.done)return{done:!0};e=!0,i=t.value[0],n=t.value[1],s=0}return s>=n?(e=!1,u()):(s++,{done:!1,value:i})})};se.prototype.multiplicities=function(){return this.items.entries()};typeof Symbol<"u"&&(se.prototype[Symbol.iterator]=se.prototype.values);se.prototype.inspect=function(){return this.items};typeof Symbol<"u"&&(se.prototype[Symbol.for("nodejs.util.inspect.custom")]=se.prototype.inspect);se.prototype.toJSON=function(){return this.items};se.from=function(r){var e=new se;return F8(r,function(t){e.add(t)}),e};se.isSubset=function(r,e){var t=r.multiplicities(),i,n,s;if(r===e)return!0;if(r.dimension>e.dimension)return!1;for(;i=t.next(),!i.done;)if(n=i.value[0],s=i.value[1],e.multiplicity(n)<s)return!1;return!0};se.isSuperset=function(r,e){return se.isSubset(e,r)};Xw.exports=se});var n1=_((tJ,i1)=>{var z8=Ge(),V8=_e();function N8(r,e,t){return((Math.pow(r,2)-Math.pow(Math.abs(e-t),2))/2|0)+r+1}function W8(r,e){for(var t=0,i=0,n=e+1;i<n;i++)t+=N8(r,e,i);return t}function U8(r,e){return r.length>e.length?-1:r.length<e.length?1:r<e?-1:r>e?1:0}function Zw(r,e){var t=r+1,i=e/t|0,n=i+1,s,u,l=e-i*t,f=t-l,p=new Array(r+1);for(s=0;s<f;s++)p[s]=[s*i,i];var v=(s-1)*i+i;for(u=0;u<l;u++)p[s+u]=[v+u*n,n];return p}function e1(r,e){var t=e.length,i=r+1,n=t/i|0,s=n+1,u,l,f,p=t-n*i,v=i-p,b=new Array(r+1);for(l=0;l<v;l++)u=l*n,b[l]=e.slice(u,u+n);var T=(l-1)*n+n;for(f=0;f<p;f++)u=T+f*s,b[l+f]=e.slice(u,u+s);return b}function G8(r,e,t){if(e===0)return 0;var i=t.length,n=r+1,s=i/n|0,u=s+1,l=i-s*n,f=n-l;if(e<=f-1)return e*s;var p=e-f;return f*s+p*u}function t1(r,e,t,i,n,s){var u=n-t,l=n+t,f=r-t,p=n+e-f,v=n+e+f,b=i-s;return[Math.max(0,u,p),Math.min(l,v,b)]}function r1(r,e,t,i,n,s){var u=e.length,l=u-t,f=t1(r,l,i,u,n,s),p=f[0],v=f[1],b="",T=[],S,q,M;for(q=p,M=v+1;q<M;q++)S=e.slice(q,q+s),S!==b&&(T.push(S),b=S);return T}function Me(r,e){if(typeof r!="function")throw new Error("mnemonist/passjoin-index: `levenshtein` should be a function returning edit distance between two strings.");if(typeof e!="number"||e<1)throw new Error("mnemonist/passjoin-index: `k` should be a number > 0");this.levenshtein=r,this.k=e,this.clear()}Me.prototype.clear=function(){this.size=0,this.strings=[],this.invertedIndices={}};Me.prototype.add=function(r){var e=r.length,t=this.size;this.strings.push(r),this.size++;var i=e1(this.k,r),n=this.invertedIndices[e];typeof n>"u"&&(n={},this.invertedIndices[e]=n);var s,u,l,f,p;for(f=0,p=i.length;f<p;f++)s=i[f],l=s+f,u=n[l],typeof u>"u"?(u=[t],n[l]=u):u.push(t);return this};Me.prototype.search=function(r){var e=r.length,t=this.k,i=new Set,n,s,u,l,f,p,v,b,T,S,q,M,j,D,V;for(b=Math.max(0,e-t),T=e+t+1;b<T;b++){var Y=this.invertedIndices[b];if(!(typeof Y>"u")){for(v=Zw(t,b),S=0,q=v.length;S<q;S++)for(u=v[S][0],l=v[S][1],p=r1(t,r,b,S,u,l),p.length||(p=[""]),M=0,j=p.length;M<j;M++)if(f=p[M]+S,n=Y[f],!(typeof n>"u"))for(D=0,V=n.length;D<V;D++)s=this.strings[n[D]],(e<=t&&b<=t||!i.has(s)&&this.levenshtein(r,s)<=t)&&i.add(s)}}return i};Me.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.strings.length;t<i;t++)r.call(e,this.strings[t],t,this)};Me.prototype.values=function(){var r=this.strings,e=r.length,t=0;return new z8(function(){if(t>=e)return{done:!0};var i=r[t];return t++,{value:i,done:!1}})};typeof Symbol<"u"&&(Me.prototype[Symbol.iterator]=Me.prototype.values);Me.prototype.inspect=function(){var r=this.strings.slice();return Object.defineProperty(r,"constructor",{value:Me,enumerable:!1}),r};typeof Symbol<"u"&&(Me.prototype[Symbol.for("nodejs.util.inspect.custom")]=Me.prototype.inspect);Me.from=function(r,e,t){var i=new Me(e,t);return V8(r,function(n){i.add(n)}),i};Me.countKeys=W8;Me.comparator=U8;Me.partition=Zw;Me.segments=e1;Me.segmentPos=G8;Me.multiMatchAwareInterval=t1;Me.multiMatchAwareSubstrings=r1;i1.exports=Me});var a1=_((rJ,s1)=>{var o1=Ge(),B8=_e();function Le(){this.clear()}Le.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};Le.prototype.enqueue=function(r){return this.items.push(r),++this.size};Le.prototype.dequeue=function(){if(this.size){var r=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,r}};Le.prototype.peek=function(){if(this.size)return this.items[this.offset]};Le.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.offset,i=0,n=this.items.length;t<n;t++,i++)r.call(e,this.items[t],i,this)};Le.prototype.toArray=function(){return this.items.slice(this.offset)};Le.prototype.values=function(){var r=this.items,e=this.offset;return new o1(function(){if(e>=r.length)return{done:!0};var t=r[e];return e++,{value:t,done:!1}})};Le.prototype.entries=function(){var r=this.items,e=this.offset,t=0;return new o1(function(){if(e>=r.length)return{done:!0};var i=r[e];return e++,{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(Le.prototype[Symbol.iterator]=Le.prototype.values);Le.prototype.toString=function(){return this.toArray().join(",")};Le.prototype.toJSON=function(){return this.toArray()};Le.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:Le,enumerable:!1}),r};typeof Symbol<"u"&&(Le.prototype[Symbol.for("nodejs.util.inspect.custom")]=Le.prototype.inspect);Le.from=function(r){var e=new Le;return B8(r,function(t){e.enqueue(t)}),e};Le.of=function(){return Le.from(arguments)};s1.exports=Le});var l1=_((iJ,c1)=>{var u1=Ge(),H8=_e();function je(){this.clear()}je.prototype.clear=function(){this.items=[],this.size=0};je.prototype.push=function(r){return this.items.push(r),++this.size};je.prototype.pop=function(){if(this.size!==0)return this.size--,this.items.pop()};je.prototype.peek=function(){return this.items[this.size-1]};je.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0,i=this.items.length;t<i;t++)r.call(e,this.items[i-t-1],t,this)};je.prototype.toArray=function(){for(var r=new Array(this.size),e=this.size-1,t=this.size;t--;)r[t]=this.items[e-t];return r};je.prototype.values=function(){var r=this.items,e=r.length,t=0;return new u1(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return t++,{value:i,done:!1}})};je.prototype.entries=function(){var r=this.items,e=r.length,t=0;return new u1(function(){if(t>=e)return{done:!0};var i=r[e-t-1];return{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(je.prototype[Symbol.iterator]=je.prototype.values);je.prototype.toString=function(){return this.toArray().join(",")};je.prototype.toJSON=function(){return this.toArray()};je.prototype.inspect=function(){var r=this.toArray();return Object.defineProperty(r,"constructor",{value:je,enumerable:!1}),r};typeof Symbol<"u"&&(je.prototype[Symbol.for("nodejs.util.inspect.custom")]=je.prototype.inspect);je.from=function(r){var e=new je;return H8(r,function(t){e.push(t)}),e};je.of=function(){return je.from(arguments)};c1.exports=je});var h1=_(Ve=>{Ve.intersection=function(){if(arguments.length<2)throw new Error("mnemonist/Set.intersection: needs at least two arguments.");var r=new Set,e=1/0,t=null,i,n,s=arguments.length;for(n=0;n<s;n++){if(i=arguments[n],i.size===0)return r;i.size<e&&(e=i.size,t=i)}for(var u=t.values(),l,f,p,v;l=u.next(),!l.done;){for(f=l.value,p=!0,n=0;n<s;n++)if(v=arguments[n],v!==t&&!v.has(f)){p=!1;break}p&&r.add(f)}return r};Ve.union=function(){if(arguments.length<2)throw new Error("mnemonist/Set.union: needs at least two arguments.");var r=new Set,e,t=arguments.length,i,n;for(e=0;e<t;e++)for(i=arguments[e].values();n=i.next(),!n.done;)r.add(n.value);return r};Ve.difference=function(r,e){if(!r.size)return new Set;if(!e.size)return new Set(r);for(var t=new Set,i=r.values(),n;n=i.next(),!n.done;)e.has(n.value)||t.add(n.value);return t};Ve.symmetricDifference=function(r,e){for(var t=new Set,i=r.values(),n;n=i.next(),!n.done;)e.has(n.value)||t.add(n.value);for(i=e.values();n=i.next(),!n.done;)r.has(n.value)||t.add(n.value);return t};Ve.isSubset=function(r,e){var t=r.values(),i;if(r===e)return!0;if(r.size>e.size)return!1;for(;i=t.next(),!i.done;)if(!e.has(i.value))return!1;return!0};Ve.isSuperset=function(r,e){return Ve.isSubset(e,r)};Ve.add=function(r,e){for(var t=e.values(),i;i=t.next(),!i.done;)r.add(i.value)};Ve.subtract=function(r,e){for(var t=e.values(),i;i=t.next(),!i.done;)r.delete(i.value)};Ve.intersect=function(r,e){for(var t=r.values(),i;i=t.next(),!i.done;)e.has(i.value)||r.delete(i.value)};Ve.disjunct=function(r,e){for(var t=r.values(),i,n=[];i=t.next(),!i.done;)e.has(i.value)&&n.push(i.value);for(t=e.values();i=t.next(),!i.done;)r.has(i.value)||r.add(i.value);for(var s=0,u=n.length;s<u;s++)r.delete(n[s])};Ve.intersectionSize=function(r,e){var t;if(r.size>e.size&&(t=r,r=e,e=t),r.size===0)return 0;if(r===e)return r.size;for(var i=r.values(),n,s=0;n=i.next(),!n.done;)e.has(n.value)&&s++;return s};Ve.unionSize=function(r,e){var t=Ve.intersectionSize(r,e);return r.size+e.size-t};Ve.jaccard=function(r,e){var t=Ve.intersectionSize(r,e);if(t===0)return 0;var i=r.size+e.size-t;return t/i};Ve.overlap=function(r,e){var t=Ve.intersectionSize(r,e);return t===0?0:t/Math.min(r.size,e.size)}});var p1=_((oJ,f1)=>{var $8=Ge(),Y8=ht().getPointerArray;function jt(r){var e=Y8(r);this.start=0,this.size=0,this.capacity=r,this.dense=new e(r),this.sparse=new e(r)}jt.prototype.clear=function(){this.start=0,this.size=0};jt.prototype.has=function(r){if(this.size===0)return!1;var e=this.sparse[r],t=e<this.capacity&&e>=this.start&&e<this.start+this.size||e<(this.start+this.size)%this.capacity;return t&&this.dense[e]===r};jt.prototype.enqueue=function(r){var e=this.sparse[r];if(this.size!==0){var t=e<this.capacity&&e>=this.start&&e<this.start+this.size||e<(this.start+this.size)%this.capacity;if(t&&this.dense[e]===r)return this}return e=(this.start+this.size)%this.capacity,this.dense[e]=r,this.sparse[r]=e,this.size++,this};jt.prototype.dequeue=function(){if(this.size!==0){var r=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var e=this.dense[r];return this.sparse[e]=this.capacity,e}};jt.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=this.capacity,i=this.size,n=this.start,s=0;s<i;)r.call(e,this.dense[n],s,this),n++,s++,n===t&&(n=0)};jt.prototype.values=function(){var r=this.dense,e=this.capacity,t=this.size,i=this.start,n=0;return new $8(function(){if(n>=t)return{done:!0};var s=r[i];return i++,n++,i===e&&(i=0),{value:s,done:!1}})};typeof Symbol<"u"&&(jt.prototype[Symbol.iterator]=jt.prototype.values);jt.prototype.inspect=function(){var r=[];return this.forEach(function(e){r.push(e)}),Object.defineProperty(r,"constructor",{value:jt,enumerable:!1}),r.capacity=this.capacity,r};typeof Symbol<"u"&&(jt.prototype[Symbol.for("nodejs.util.inspect.custom")]=jt.prototype.inspect);f1.exports=jt});var v1=_((sJ,d1)=>{var lm=Ge(),Q8=ht().getPointerArray;function ot(r,e){arguments.length<2&&(e=r,r=Array);var t=Q8(e);this.size=0,this.length=e,this.dense=new t(e),this.sparse=new t(e),this.vals=new r(e)}ot.prototype.clear=function(){this.size=0};ot.prototype.has=function(r){var e=this.sparse[r];return e<this.size&&this.dense[e]===r};ot.prototype.get=function(r){var e=this.sparse[r];if(e<this.size&&this.dense[e]===r)return this.vals[e]};ot.prototype.set=function(r,e){var t=this.sparse[r];return t<this.size&&this.dense[t]===r?(this.vals[t]=e,this):(this.dense[this.size]=r,this.sparse[r]=this.size,this.vals[this.size]=e,this.size++,this)};ot.prototype.delete=function(r){var e=this.sparse[r];return e>=this.size||this.dense[e]!==r?!1:(e=this.dense[this.size-1],this.dense[this.sparse[r]]=e,this.sparse[e]=this.sparse[r],this.size--,!0)};ot.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t=0;t<this.size;t++)r.call(e,this.vals[t],this.dense[t])};ot.prototype.keys=function(){var r=this.size,e=this.dense,t=0;return new lm(function(){if(t<r){var i=e[t];return t++,{value:i}}return{done:!0}})};ot.prototype.values=function(){var r=this.size,e=this.vals,t=0;return new lm(function(){if(t<r){var i=e[t];return t++,{value:i}}return{done:!0}})};ot.prototype.entries=function(){var r=this.size,e=this.dense,t=this.vals,i=0;return new lm(function(){if(i<r){var n=[e[i],t[i]];return i++,{value:n}}return{done:!0}})};typeof Symbol<"u"&&(ot.prototype[Symbol.iterator]=ot.prototype.entries);ot.prototype.inspect=function(){for(var r=new Map,e=0;e<this.size;e++)r.set(this.dense[e],this.vals[e]);return Object.defineProperty(r,"constructor",{value:ot,enumerable:!1}),r.length=this.length,this.vals.constructor!==Array&&(r.type=this.vals.constructor.name),r};typeof Symbol<"u"&&(ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=ot.prototype.inspect);d1.exports=ot});var y1=_((aJ,m1)=>{var K8=Ge(),X8=ht().getPointerArray;function It(r){var e=X8(r);this.size=0,this.length=r,this.dense=new e(r),this.sparse=new e(r)}It.prototype.clear=function(){this.size=0};It.prototype.has=function(r){var e=this.sparse[r];return e<this.size&&this.dense[e]===r};It.prototype.add=function(r){var e=this.sparse[r];return e<this.size&&this.dense[e]===r?this:(this.dense[this.size]=r,this.sparse[r]=this.size,this.size++,this)};It.prototype.delete=function(r){var e=this.sparse[r];return e>=this.size||this.dense[e]!==r?!1:(e=this.dense[this.size-1],this.dense[this.sparse[r]]=e,this.sparse[e]=this.sparse[r],this.size--,!0)};It.prototype.forEach=function(r,e){e=arguments.length>1?e:this;for(var t,i=0;i<this.size;i++)t=this.dense[i],r.call(e,t,t)};It.prototype.values=function(){var r=this.size,e=this.dense,t=0;return new K8(function(){if(t<r){var i=e[t];return t++,{value:i}}return{done:!0}})};typeof Symbol<"u"&&(It.prototype[Symbol.iterator]=It.prototype.values);It.prototype.inspect=function(){for(var r=new Set,e=0;e<this.size;e++)r.add(this.dense[e]);return Object.defineProperty(r,"constructor",{value:It,enumerable:!1}),r.length=this.length,r};typeof Symbol<"u"&&(It.prototype[Symbol.for("nodejs.util.inspect.custom")]=It.prototype.inspect);m1.exports=It});var w1=_((uJ,P1)=>{var J8=_e(),Z8=2,e4=2,t4=new Set([0,1,2]),r4={0:"Returns only the top suggestion",1:"Returns suggestions with the smallest edit distance",2:"Returns every suggestion (no early termination)"};function Sh(r){var e=new Set;return typeof r=="number"&&e.add(r),{suggestions:e,count:0}}function g1(r,e,t){return{term:r||"",distance:e||0,count:t||0}}function _1(r,e,t,i){i=i||new Set,e++;var n,s=r.length,u;if(s>1)for(u=0;u<s;u++)n=r.substring(0,u)+r.substring(u+1),i.has(n)||(i.add(n),e<t&&_1(n,e,t,i));return i}function i4(r,e,t,i,n,s){var u=t.suggestions.values().next().value;e<2&&t.suggestions.size>0&&r[u].length-s.length>i.length-s.length&&(t.suggestions=new Set,t.count=0),(e===2||!t.suggestions.size||r[u].length-s.length>=i.length-s.length)&&t.suggestions.add(n)}function b1(r,e){var t=r.length,i=e.length,n=[[]],s=t+i,u=new Map,l,f,p;for(n[0][0]=s,l=0;l<=t;l++)n[l+1]||(n[l+1]=[]),n[l+1][1]=l,n[l+1][0]=s;for(p=0;p<=i;p++)n[1][p+1]=p,n[0][p+1]=s;var v=r+e,b;for(l=0,f=v.length;l<f;l++)b=v[l],u.has(b)||u.set(b,0);for(l=1;l<=t;l++){var T=0;for(p=1;p<=i;p++){var S=u.get(e[p-1]),q=T;r[l-1]===e[p-1]?(n[l+1][p+1]=n[l][p],T=p):n[l+1][p+1]=Math.min(n[l][p],n[l+1][p],n[l][p+1])+1,n[l+1][p+1]=Math.min(n[l+1][p+1],n[S][q]+(l-S-1)+1+(p-q-1))}u.set(r[l-1],l)}return n[t+1][i+1]}function n4(r,e,t,i,n,s){var u=s.length;if(u-i>n)return[];for(var l=[s],f=new Set,p=new Set,v=[],b,T;l.length>0&&(b=l.shift(),!(t<2&&v.length>0&&u-b.length>v[0].distance));){if(T=r[b],T!==void 0){if(typeof T=="number"&&(T=Sh(T)),T.count>0&&!p.has(b)){p.add(b);var S=g1(b,u-b.length,T.count);if(v.push(S),t<2&&u-b.length===0)break}T.suggestions.forEach(D=>{var V=e[D];if(!p.has(V)){p.add(V);var Y=0;if(s!==V)if(V.length===b.length)Y=u-b.length;else if(u===b.length)Y=V.length-b.length;else{for(var ie=0,pe=0,ke=V.length;ie<ke&&ie<u&&V[ie]===s[ie];)ie++;for(;pe<ke-ie&&pe<u&&V[ke-pe-1]===s[u-pe-1];)pe++;ie>0||pe>0?Y=b1(V.substr(ie,ke-ie-pe),s.substr(ie,u-ie-pe)):Y=b1(V,s)}if(t<2&&v.length>0&&v[0].distance>Y&&(v=[]),!(t<2&&v.length>0&&Y>v[0].distance)&&Y<=i){var pt=r[V];pt!==void 0&&v.push(g1(V,Y,pt.count))}}})}if(u-b.length<i){if(t<2&&v.length>0&&u-b.length>=v[0].distance)continue;for(var q=0,M=b.length;q<M;q++){var j=b.substring(0,q)+b.substring(q+1);f.has(j)||(f.add(j),l.push(j))}}}return t===0?v.slice(0,1):v}function Ar(r){if(r=r||{},this.clear(),this.maxDistance=typeof r.maxDistance=="number"?r.maxDistance:Z8,this.verbosity=typeof r.verbosity=="number"?r.verbosity:e4,typeof this.maxDistance!="number"||this.maxDistance<=0)throw Error("mnemonist/SymSpell.constructor: invalid `maxDistance` option. Should be a integer greater than 0.");if(!t4.has(this.verbosity))throw Error("mnemonist/SymSpell.constructor: invalid `verbosity` option. Should be either 0, 1 or 2.")}Ar.prototype.clear=function(){this.size=0,this.dictionary=Object.create(null),this.maxLength=0,this.words=[]};Ar.prototype.add=function(r){var e=this.dictionary[r];if(e!==void 0?(typeof e=="number"&&(e=Sh(e),this.dictionary[r]=e),e.count++):(e=Sh(),e.count++,this.dictionary[r]=e,r.length>this.maxLength&&(this.maxLength=r.length)),e.count===1){var t=this.words.length;this.words.push(r);var i=_1(r,0,this.maxDistance);i.forEach(n=>{var s=this.dictionary[n];s!==void 0?(typeof s=="number"&&(s=Sh(s),this.dictionary[n]=s),s.suggestions.has(t)||i4(this.words,this.verbosity,s,r,t,n)):this.dictionary[n]=t})}return this.size++,this};Ar.prototype.search=function(r){return n4(this.dictionary,this.words,this.verbosity,this.maxDistance,this.maxLength,r)};Ar.prototype.inspect=function(){var r=[];r.size=this.size,r.maxDistance=this.maxDistance,r.verbosity=this.verbosity,r.behavior=r4[this.verbosity];for(var e in this.dictionary)typeof this.dictionary[e]=="object"&&this.dictionary[e].count&&r.push([e,this.dictionary[e].count]);return Object.defineProperty(r,"constructor",{value:Ar,enumerable:!1}),r};typeof Symbol<"u"&&(Ar.prototype[Symbol.for("nodejs.util.inspect.custom")]=Ar.prototype.inspect);Ar.from=function(r,e){var t=new Ar(e);return J8(r,function(i){t.add(i)}),t};P1.exports=Ar});var hm=_((cJ,O1)=>{var o4=_e(),Mo=Ge(),He="\0";function Te(r){this.mode=r===Array?"array":"string",this.clear()}Te.prototype.clear=function(){this.root={},this.size=0};Te.prototype.set=function(r,e){for(var t=this.root,i,n=0,s=r.length;n<s;n++)i=r[n],t=t[i]||(t[i]={});return He in t||this.size++,t[He]=e,this};Te.prototype.update=function(r,e){for(var t=this.root,i,n=0,s=r.length;n<s;n++)i=r[n],t=t[i]||(t[i]={});return He in t||this.size++,t[He]=e(t[He]),this};Te.prototype.get=function(r){var e=this.root,t,i,n;for(i=0,n=r.length;i<n;i++)if(t=r[i],e=e[t],typeof e>"u")return;if(He in e)return e[He]};Te.prototype.delete=function(r){var e=this.root,t=null,i=null,n,s,u,l;for(u=0,l=r.length;u<l;u++){if(s=r[u],n=e,e=e[s],typeof e>"u")return!1;t!==null?Object.keys(e).length>1&&(t=null,i=null):Object.keys(e).length<2&&(t=n,i=s)}return He in e?(this.size--,t?delete t[i]:delete e[He],!0):!1};Te.prototype.has=function(r){for(var e=this.root,t,i=0,n=r.length;i<n;i++)if(t=r[i],e=e[t],typeof e>"u")return!1;return He in e};Te.prototype.find=function(r){var e=typeof r=="string",t=this.root,i=[],n,s,u;for(s=0,u=r.length;s<u;s++)if(n=r[s],t=t[n],typeof t>"u")return i;for(var l=[t],f=[r],p;l.length;){r=f.pop(),t=l.pop();for(p in t){if(p===He){i.push([r,t[He]]);continue}l.push(t[p]),f.push(e?r+p:r.concat(p))}}return i};Te.prototype.values=function(r){var e=this.root,t=[],i,n,s;if(r){for(n=0,s=r.length;n<s;n++)if(i=r[n],e=e[i],typeof e>"u")return Mo.empty()}return t.push(e),new Mo(function(){for(var u,l=!1,f;t.length;){u=t.pop();for(f in u){if(f===He){l=!0;continue}t.push(u[f])}if(l)return{done:!1,value:u[He]}}return{done:!0}})};Te.prototype.prefixes=function(r){var e=this.root,t=[],i=[],n,s,u,l=this.mode==="string";if(r){for(s=0,u=r.length;s<u;s++)if(n=r[s],e=e[n],typeof e>"u")return Mo.empty()}else r=l?"":[];return t.push(e),i.push(r),new Mo(function(){for(var f,p,v=!1,b;t.length;){f=t.pop(),p=i.pop();for(b in f){if(b===He){v=!0;continue}t.push(f[b]),i.push(l?p+b:p.concat(b))}if(v)return{done:!1,value:p}}return{done:!0}})};Te.prototype.keys=Te.prototype.prefixes;Te.prototype.entries=function(r){var e=this.root,t=[],i=[],n,s,u,l=this.mode==="string";if(r){for(s=0,u=r.length;s<u;s++)if(n=r[s],e=e[n],typeof e>"u")return Mo.empty()}else r=l?"":[];return t.push(e),i.push(r),new Mo(function(){for(var f,p,v=!1,b;t.length;){f=t.pop(),p=i.pop();for(b in f){if(b===He){v=!0;continue}t.push(f[b]),i.push(l?p+b:p.concat(b))}if(v)return{done:!1,value:[p,f[He]]}}return{done:!0}})};typeof Symbol<"u"&&(Te.prototype[Symbol.iterator]=Te.prototype.entries);Te.prototype.inspect=function(){for(var r=new Array(this.size),e=this.entries(),t,i=0;t=e.next(),!t.done;)r[i++]=t.value;return Object.defineProperty(r,"constructor",{value:Te,enumerable:!1}),r};typeof Symbol<"u"&&(Te.prototype[Symbol.for("nodejs.util.inspect.custom")]=Te.prototype.inspect);Te.prototype.toJSON=function(){return this.root};Te.from=function(r){var e=new Te;return o4(r,function(t,i){e.set(i,t)}),e};Te.SENTINEL=He;O1.exports=Te});var C1=_((lJ,S1)=>{var s4=_e(),T1=hm(),Ch="\0";function $e(r){this.mode=r===Array?"array":"string",this.clear()}for(fm in T1.prototype)$e.prototype[fm]=T1.prototype[fm];var fm;delete $e.prototype.set;delete $e.prototype.get;delete $e.prototype.values;delete $e.prototype.entries;$e.prototype.add=function(r){for(var e=this.root,t,i=0,n=r.length;i<n;i++)t=r[i],e=e[t]||(e[t]={});return Ch in e||this.size++,e[Ch]=!0,this};$e.prototype.find=function(r){var e=typeof r=="string",t=this.root,i=[],n,s,u;for(s=0,u=r.length;s<u;s++)if(n=r[s],t=t[n],typeof t>"u")return i;for(var l=[t],f=[r],p;l.length;){r=f.pop(),t=l.pop();for(p in t){if(p===Ch){i.push(r);continue}l.push(t[p]),f.push(e?r+p:r.concat(p))}}return i};typeof Symbol<"u"&&($e.prototype[Symbol.iterator]=$e.prototype.keys);$e.prototype.inspect=function(){for(var r=new Set,e=this.keys(),t;t=e.next(),!t.done;)r.add(t.value);return Object.defineProperty(r,"constructor",{value:$e,enumerable:!1}),r};typeof Symbol<"u"&&($e.prototype[Symbol.for("nodejs.util.inspect.custom")]=$e.prototype.inspect);$e.prototype.toJSON=function(){return this.root};$e.from=function(r){var e=new $e;return s4(r,function(t){e.add(t)}),e};$e.SENTINEL=Ch;S1.exports=$e});var x1=_((hJ,q1)=>{var A1=Ge(),a4=_e(),u4=wt(),E1=ht(),c4=function(r){return Math.max(1,Math.ceil(r*1.5))},l4=function(r){var e=E1.getPointerArray(r);return new e(r)};function oe(r,e){if(arguments.length<1)throw new Error("mnemonist/vector: expecting at least a byte array constructor.");var t=e||0,i=c4,n=0,s=!1;typeof e=="object"&&(t=e.initialCapacity||0,n=e.initialLength||0,i=e.policy||i,s=e.factory===!0),this.factory=s?r:null,this.ArrayClass=r,this.length=n,this.capacity=Math.max(n,t),this.policy=i,this.array=new r(this.capacity)}oe.prototype.set=function(r,e){if(this.length<r)throw new Error("Vector("+this.ArrayClass.name+").set: index out of bounds.");return this.array[r]=e,this};oe.prototype.get=function(r){if(!(this.length<r))return this.array[r]};oe.prototype.applyPolicy=function(r){var e=this.policy(r||this.capacity);if(typeof e!="number"||e<0)throw new Error("mnemonist/vector.applyPolicy: policy returned an invalid value (expecting a positive integer).");if(e<=this.capacity)throw new Error("mnemonist/vector.applyPolicy: policy returned a less or equal capacity to allocate.");return e};oe.prototype.reallocate=function(r){if(r===this.capacity)return this;var e=this.array;if(r<this.length&&(this.length=r),r>this.capacity)if(this.factory===null?this.array=new this.ArrayClass(r):this.array=this.factory(r),E1.isTypedArray(this.array))this.array.set(e,0);else for(var t=0,i=this.length;t<i;t++)this.array[t]=e[t];else this.array=e.slice(0,r);return this.capacity=r,this};oe.prototype.grow=function(r){var e;if(typeof r=="number"){if(this.capacity>=r)return this;for(e=this.capacity;e<r;)e=this.applyPolicy(e);return this.reallocate(e),this}return e=this.applyPolicy(),this.reallocate(e),this};oe.prototype.resize=function(r){return r===this.length?this:r<this.length?(this.length=r,this):(this.length=r,this.reallocate(r),this)};oe.prototype.push=function(r){return this.capacity===this.length&&this.grow(),this.array[this.length++]=r,this.length};oe.prototype.pop=function(){if(this.length!==0)return this.array[--this.length]};oe.prototype.values=function(){var r=this.array,e=this.length,t=0;return new A1(function(){if(t>=e)return{done:!0};var i=r[t];return t++,{value:i,done:!1}})};oe.prototype.entries=function(){var r=this.array,e=this.length,t=0;return new A1(function(){if(t>=e)return{done:!0};var i=r[t];return{value:[t++,i],done:!1}})};typeof Symbol<"u"&&(oe.prototype[Symbol.iterator]=oe.prototype.values);oe.prototype.inspect=function(){var r=this.array.slice(0,this.length);return r.type=this.array.constructor.name,r.items=this.length,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:oe,enumerable:!1}),r};typeof Symbol<"u"&&(oe.prototype[Symbol.for("nodejs.util.inspect.custom")]=oe.prototype.inspect);oe.from=function(r,e,t){if(arguments.length<3&&(t=u4.guessLength(r),typeof t!="number"))throw new Error("mnemonist/vector.from: could not guess iterable length. Please provide desired capacity as last argument.");var i=new oe(e,t);return a4(r,function(n){i.push(n)}),i};function Er(r){var e=function(i){oe.call(this,r,i)};for(var t in oe.prototype)oe.prototype.hasOwnProperty(t)&&(e.prototype[t]=oe.prototype[t]);return e.from=function(i,n){return oe.from(i,r,n)},typeof Symbol<"u"&&(e.prototype[Symbol.iterator]=e.prototype.values),e}oe.Int8Vector=Er(Int8Array);oe.Uint8Vector=Er(Uint8Array);oe.Uint8ClampedVector=Er(Uint8ClampedArray);oe.Int16Vector=Er(Int16Array);oe.Uint16Vector=Er(Uint16Array);oe.Int32Vector=Er(Int32Array);oe.Uint32Vector=Er(Uint32Array);oe.Float32Vector=Er(Float32Array);oe.Float64Vector=Er(Float64Array);oe.PointerVector=Er(l4);q1.exports=oe});var L1=_((fJ,M1)=>{var h4=wt(),f4=ht(),p4=nm().inplaceQuickSortIndices,d4=rm().lowerBoundIndices,v4=_h(),m4=f4.getPointerArray;function y4(r,e){return r.distance<e.distance?1:r.distance>e.distance?-1:0}function g4(r,e,t){for(var i=t.length,n=m4(i),s=0,u=new n(i),l=new n(i),f=new n(i),p=new Float64Array(i),v=[0,0,i],b=new Float64Array(i),T,S,q,M,j,D,V,Y,ie;v.length;)if(j=v.pop(),M=v.pop(),T=v.pop(),S=t[j-1],j--,ie=j-M,u[T]=S,ie!==0){if(ie===1){V=r(e[S],e[t[M]]),p[T]=V,s++,f[T]=s,u[s]=t[M];continue}for(Y=M;Y<j;Y++)b[t[Y]]=r(e[S],e[t[Y]]);p4(b,t,M,j),q=M+ie/2-1,q===(q|0)?V=(b[t[q]]+b[t[q+1]])/2:V=b[t[Math.ceil(q)]],p[T]=V,D=d4(b,t,V,M,j),j-D>0&&(s++,f[T]=s,v.push(s,D,j)),D-M>0&&(s++,l[T]=s,v.push(s,M,D))}return{nodes:u,lefts:l,rights:f,mus:p}}function Yr(r,e){if(typeof r!="function")throw new Error("mnemonist/VPTree.constructor: given `distance` must be a function.");if(!e)throw new Error("mnemonist/VPTree.constructor: you must provide items to the tree. A VPTree cannot be updated after its creation.");this.distance=r,this.heap=new v4(y4),this.D=0;var t=h4.toArrayWithIndices(e);this.items=t[0];var i=t[1];this.size=i.length;var n=g4(r,this.items,i);this.nodes=n.nodes,this.lefts=n.lefts,this.rights=n.rights,this.mus=n.mus}Yr.prototype.nearestNeighbors=function(r,e){var t=this.heap,i=[0],n=1/0,s,u,l,f,p,v,b;for(this.D=0;i.length;)s=i.pop(),u=this.nodes[s],l=this.items[u],b=this.distance(l,e),this.D++,b<n&&(t.push({distance:b,item:l}),t.size>r&&t.pop(),t.size>=r&&(n=t.peek().distance)),f=this.lefts[s],p=this.rights[s],!(!f&&!p)&&(v=this.mus[s],b<v?(f&&b<v+n&&i.push(f),p&&b>=v-n&&i.push(p)):(p&&b>=v-n&&i.push(p),f&&b<v+n&&i.push(f)));for(var T=new Array(t.size),S=t.size-1;S>=0;S--)T[S]=t.pop();return T};Yr.prototype.neighbors=function(r,e){var t=[],i=[0],n,s,u,l,f,p,v;for(this.D=0;i.length;)n=i.pop(),s=this.nodes[n],u=this.items[s],v=this.distance(u,e),this.D++,v<=r&&t.push({distance:v,item:u}),l=this.lefts[n],f=this.rights[n],!(!l&&!f)&&(p=this.mus[n],v<p?(l&&v<p+r&&i.push(l),f&&v>=p-r&&i.push(f)):(f&&v>=p-r&&i.push(f),l&&v<p+r&&i.push(l)));return t};Yr.prototype.inspect=function(){var r=this.items.slice();return Object.defineProperty(r,"constructor",{value:Yr,enumerable:!1}),r};typeof Symbol<"u"&&(Yr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Yr.prototype.inspect);Yr.from=function(r,e){return new Yr(e,r)};M1.exports=Yr});var k1=_((pJ,I1)=>{var pm=_h(),dm=fh(),j1=MP();I1.exports={BiMap:FP(),BitSet:UP(),BitVector:$P(),BloomFilter:ZP(),BKTree:tw(),CircularBuffer:sw(),DefaultMap:uw(),DefaultWeakMap:lw(),FixedDeque:$v(),StaticDisjointSet:fw(),FibonacciHeap:dm,MinFibonacciHeap:dm.MinFibonacciHeap,MaxFibonacciHeap:dm.MaxFibonacciHeap,FixedReverseHeap:Ph(),FuzzyMap:gw(),FuzzyMultiMap:ww(),HashedArrayTree:Sw(),Heap:pm,MinHeap:pm.MinHeap,MaxHeap:pm.MaxHeap,StaticIntervalTree:qw(),InvertedIndex:Fw(),KDTree:Nw(),LinkedList:Gw(),LRUCache:Th(),LRUCacheWithDelete:$w(),LRUMap:um(),LRUMapWithDelete:Kw(),MultiMap:Jv(),MultiSet:Jw(),PassjoinIndex:n1(),Queue:a1(),FixedStack:em(),Stack:l1(),SuffixArray:j1,GeneralizedSuffixArray:j1.GeneralizedSuffixArray,Set:h1(),SparseQueueSet:p1(),SparseMap:v1(),SparseSet:y1(),SymSpell:w1(),Trie:C1(),TrieMap:hm(),Vector:x1(),VPTree:L1()}});var F4={};Bx(F4,{ArrayTilemap:()=>Vh,CharacterShiftAction:()=>Ih,CollisionStrategy:()=>Es,Direction:()=>ct,GridEngine:()=>Ns,GridEngineHeadless:()=>Rs,MoveToResult:()=>Dh,NoPathFoundStrategy:()=>cn,NumberOfDirections:()=>Qi,PathBlockedStrategy:()=>Po,PhaserTile:()=>Di,PhaserTileLayer:()=>zo,PhaserTilemap:()=>Vs,QueuedPathBlockedStrategy:()=>bm,TiledLayer:()=>No,TiledTile:()=>Vo,TiledTilemap:()=>Nh,default:()=>k4,directionFromPos:()=>Ue});module.exports=Hx(F4);var E=class r{static get ZERO(){return new r(0,0)}static get ONE(){return new r(1,1)}static get UP(){return new r(0,-1)}static get DOWN(){return new r(0,1)}static get LEFT(){return new r(-1,0)}static get RIGHT(){return new r(1,0)}static get UP_LEFT(){return new r(-1,-1)}static get UP_RIGHT(){return new r(1,-1)}static get DOWN_RIGHT(){return new r(1,1)}static get DOWN_LEFT(){return new r(-1,1)}constructor(e,t){typeof e=="number"?(this.x=e,this.y=t||0):(this.x=e.x,this.y=e.y)}clone(){return new r(this.x,this.y)}add(e){return new r(this.x+e.x,this.y+e.y)}multiply(e){return new r(this.x*e.x,this.y*e.y)}divide(e){return new r(this.x/e.x,this.y/e.y)}subtract(e){return new r(this.x-e.x,this.y-e.y)}equals(e){return this.x===e.x&&this.y===e.y}abs(){return new r(Math.abs(this.x),Math.abs(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}modulo(e){return new r(this.x%e.x,this.y%e.y)}scalarModulo(e){return new r(this.x%e,this.y%e)}scalarMult(e){return new r(this.x*e,this.y*e)}toPosition(){return{x:this.x,y:this.y}}toString(){return`${this.x}#${this.y}`}};var G=class{static equal(e,t){return e.position.x===t.position.x&&e.position.y===t.position.y&&e.layer===t.layer}static copyOver(e,t){t.position.x=e.position.x,t.position.y=e.position.y,t.layer=e.layer}static clone(e){return{position:e.position.clone(),layer:e.layer}}static toString(e){return`${e.position.toString()}#${e.layer}`}static toInternal(e){return{position:new E(e.position.x,e.position.y),layer:e.charLayer}}static fromInternal(e){return{position:e.position.toPosition(),charLayer:e.layer}}};var ct=(p=>(p.NONE="none",p.LEFT="left",p.UP_LEFT="up-left",p.UP="up",p.UP_RIGHT="up-right",p.RIGHT="right",p.DOWN_RIGHT="down-right",p.DOWN="down",p.DOWN_LEFT="down-left",p))(ct||{}),$x={up:"down",down:"up",left:"right",right:"left",none:"none","up-left":"down-right","up-right":"down-left","down-right":"up-left","down-left":"up-right"},Yx={up:E.UP,down:E.DOWN,left:E.LEFT,right:E.RIGHT,none:E.ZERO,"up-left":E.UP_LEFT,"up-right":E.UP_RIGHT,"down-right":E.DOWN_RIGHT,"down-left":E.DOWN_LEFT},hs={up:0,"up-right":1,right:2,"down-right":3,down:4,"down-left":5,left:6,"up-left":7,none:NaN},nb=["up","up-right","right","down-right","down","down-left","left","up-left"],Qx=["down-left","down-right","up-right","up-left"];function fs(){return["up","down","left","right","none","up-left","up-right","down-right","down-left"]}function Yi(r){return Qx.includes(r)}function ob(r,e=1){return r==="none"?"none":nb[(hs[r]+8-Math.abs(e)%8)%8]}function Fa(r,e=1){return r==="none"?"none":nb[(hs[r]+e)%8]}function xt(r){return Yx[r]}function ps(r){return $x[r]}function Ue(r,e){if(r.x===e.x){if(r.y>e.y)return"up";if(r.y<e.y)return"down"}else if(r.y===e.y){if(r.x>e.x)return"left";if(r.x<e.x)return"right"}else if(r.x>e.x){if(r.y<e.y)return"down-left";if(r.y>e.y)return"up-left"}else if(r.x<e.x){if(r.y<e.y)return"down-right";if(r.y>e.y)return"up-right"}return"none"}var Qi=(t=>(t[t.FOUR=4]="FOUR",t[t.EIGHT=8]="EIGHT",t))(Qi||{});function si(r){return typeof r=="string"&&fs().includes(r)}var Br=gt(xi(),1);var Hr=1e3,oh=class{constructor(e,t){this.id=e;this.movementDirection="none";this._tilePos={position:new E(0,0),layer:void 0};this.movementStarted$=new Br.Subject;this.movementStopped$=new Br.Subject;this.directionChanged$=new Br.Subject;this.positionChangeStarted$=new Br.Subject;this.positionChangeFinished$=new Br.Subject;this.tilePositionSet$=new Br.Subject;this.autoMovementSet$=new Br.Subject;this.lastMovementImpulse="none";this.facingDirection="down";this.depthChanged$=new Br.Subject;this.movementProgress=0;this.currentMovementReverted=!1;this.tilemap=t.tilemap,this.speed=t.speed,this.collidesWithTilesInternal=t.collidesWithTiles,this._tilePos.layer=t.charLayer,this.ignoreMissingTiles=t.ignoreMissingTiles??!1,this.collisionGroups=new Set(t.collisionGroups||[]),this.ignoreCollisionGroups=new Set(t.ignoreCollisionGroups||[]),this.labels=new Set(t.labels||[]),this.numberOfDirections=t.numberOfDirections,t.facingDirection&&this.turnTowards(t.facingDirection),this.tileWidth=t.tileWidth??1,this.tileHeight=t.tileHeight??1}getId(){return this.id}getSpeed(){return this.speed}setSpeed(e){this.speed=e}setMovement(e){this.autoMovementSet$.next(e),this.movement=e}getMovement(){return this.movement}collidesWithTiles(){return this.collidesWithTilesInternal}setCollidesWithTiles(e){this.collidesWithTilesInternal=e}getIgnoreMissingTiles(){return this.ignoreMissingTiles}setIgnoreMissingTiles(e){this.ignoreMissingTiles=e}setTilePosition(e){this.currentMovementReverted=!1,this.isMoving()&&this.movementStopped$.next(this.movementDirection),this.tilePositionSet$.next({...e}),this.fire(this.positionChangeStarted$,this.tilePos,e),this.fire(this.positionChangeFinished$,this.tilePos,e),this.movementDirection="none",this.lastMovementImpulse="none",this.tilePos=e,this.movementProgress=0}getTilePos(){return this.tilePos}getNextTilePos(){if(!this.isMoving())return this.tilePos;if(this.currentMovementReverted)return this.tilePos;let e=this.tilePos.layer,t=this.tilePosInDirection(this.tilePos.position,this.movementDirection),i=this.tilemap.getTransition(t,this.tilePos.layer);return i&&(e=i),{position:this.tilePosInDirection(this.tilePos.position,this.movementDirection),layer:e}}getTileWidth(){return this.tileWidth}getTileHeight(){return this.tileHeight}move(e){this.lastMovementImpulse=e,e!="none"&&(this.isMoving()||(this.isBlockingDirection(e)?this.changeFacingDirection(e):this.startMoving(e)))}update(e){this.movement?.update(e),this.isMoving()&&this.updateCharacterPosition(e),this.lastMovementImpulse="none"}getMovementDirection(){return this.movementDirection}isBlockingDirection(e){if(e=="none")return!1;let t=this.tilePosInDirection(this.getNextTilePos().position,e),i=this.tilemap.getTransition(t,this.getNextTilePos().layer)||this.getNextTilePos().layer;return this.collidesWithTilesInternal&&this.isTileBlocking(e,i)?!0:this.isCharBlocking(e,i)}isTileBlocking(e,t){return this.someCharTile((i,n)=>{let s=this.tilePosInDirection(new E(i,n),e);return this.tilemap.hasBlockingTile(s,t,ps(e),this.ignoreMissingTiles)})}revertCurrentMovement(){this.isMoving()&&(this.currentMovementReverted=!0,this.movementDirection=ps(this.movementDirection),this.movementStopped$.next(this.facingDirection),this.facingDirection=this.movementDirection,this.movementProgress=Hr-this.movementProgress,this.movementStarted$.next(this.facingDirection))}isCurrentMovementReverted(){return this.currentMovementReverted}isCharBlocking(e,t){return this.someCharTile((i,n)=>{let s=this.tilePosInDirection(new E(i,n),e);return this.tilemap.hasBlockingChar(s,t,this.getCollisionGroups(),new Set([this.getId()]),this.ignoreCollisionGroups)})}isMoving(){return this.movementDirection!="none"}turnTowards(e){this.isMoving()||e!="none"&&this.changeFacingDirection(e)}changeFacingDirection(e){this.facingDirection!==e&&(this.facingDirection=e,this.directionChanged$.next(e))}getFacingDirection(){return this.facingDirection}getFacingPosition(){return this._tilePos.position.add(xt(this.facingDirection))}addCollisionGroup(e){this.collisionGroups.add(e)}setCollisionGroups(e){this.collisionGroups=new Set(e)}setIgnoreCollisionGroups(e){this.ignoreCollisionGroups=new Set(e)}getCollisionGroups(){return Array.from(this.collisionGroups)}getIgnoreCollisionGroups(){return Array.from(this.ignoreCollisionGroups)}hasCollisionGroup(e){return this.collisionGroups.has(e)}removeCollisionGroup(e){this.collisionGroups.delete(e)}removeAllCollisionGroups(){this.collisionGroups.clear()}addLabels(e){for(let t of e)this.labels.add(t)}getLabels(){return[...this.labels.values()]}hasLabel(e){return this.labels.has(e)}clearLabels(){this.labels.clear()}removeLabels(e){for(let t of e)this.labels.delete(t)}getNumberOfDirections(){return this.numberOfDirections}movementStarted(){return this.movementStarted$}movementStopped(){return this.movementStopped$}directionChanged(){return this.directionChanged$}tilePositionSet(){return this.tilePositionSet$}positionChangeStarted(){return this.positionChangeStarted$}positionChangeFinished(){return this.positionChangeFinished$}autoMovementSet(){return this.autoMovementSet$}depthChanged(){return this.depthChanged$}getMovementProgress(){return this.movementProgress}setMovementProgress(e){let t=Math.max(0,Math.min(Hr,e));this.movementProgress=t}hasWalkedHalfATile(){return this.movementProgress>Hr/2}willCrossTileBorderThisUpdate(e){return this.movementProgress+this.maxProgressForDelta(e)>=Hr}updateCharacterPosition(e){let t=this.willCrossTileBorderThisUpdate(e),n=1-(t?Hr-this.movementProgress:this.maxProgressForDelta(e))/this.maxProgressForDelta(e);this.movementProgress=Math.min(this.movementProgress+this.maxProgressForDelta(e),Hr),t&&(this.movementProgress=0,this.shouldContinueMoving()?(this.fire(this.positionChangeFinished$,this.tilePos,this.getNextTilePos()),this.tilePos=this.getNextTilePos(),this.startMoving(this.lastMovementImpulse),n>0&&this.updateCharacterPosition(e*n)):this.stopMoving())}maxProgressForDelta(e){let i=e/1e3;return Math.floor(i*this.speed*Hr)}get tilePos(){return G.clone(this._tilePos)}set tilePos(e){G.copyOver(e,this._tilePos)}startMoving(e){e!=="none"&&(this.currentMovementReverted=!1,e!=this.movementDirection&&this.movementStarted$.next(e),this.movementDirection=e,this.facingDirection=e,this.fire(this.positionChangeStarted$,this.tilePos,this.getNextTilePos()))}tilePosInDirection(e,t){return e.add(xt(this.tilemap.toMapDirection(t)))}shouldContinueMoving(){return this.lastMovementImpulse!=="none"&&!this.isBlockingDirection(this.lastMovementImpulse)}stopMoving(){if(this.movementDirection==="none")return;let e=this.tilePos,t=this.getNextTilePos(),i=this.movementDirection;this.tilePos=this.getNextTilePos(),this.movementDirection="none",this.movementStopped$.next(i),this.currentMovementReverted=!1,this.fire(this.positionChangeFinished$,e,t)}fire(e,{position:t,layer:i},{position:n,layer:s}){e.next({exitTile:t,enterTile:n,exitLayer:i,enterLayer:s})}someCharTile(e){let t=this.getNextTilePos().position;for(let i=t.x;i<t.x+this.getTileWidth();i++)for(let n=t.y;n<t.y+this.getTileHeight();n++)if(e(i,n))return!0;return!1}};var oP=gt(xi(),1),As=class r{constructor(e,t){this.walkingAnimationMapping=e;this.charsInRow=t;this.lastFootLeft=!1;this.directionToFrameRow={down:0,"down-left":1,"down-right":2,left:1,right:2,up:3,"up-left":1,"up-right":2};this._isEnabled=!0;this.frameChange$=new oP.Subject;this.setWalkingAnimationMapping(e)}static{this.FRAMES_CHAR_ROW=3}static{this.FRAMES_CHAR_COL=4}frameChange(){return this.frameChange$}setIsEnabled(e){this._isEnabled=e}isEnabled(){return this._isEnabled}updateCharacterFrame(e,t,i){this._isEnabled&&(t?this.setStandingFrameDuringWalk(e,i):this.setWalkingFrame(e))}setStandingFrame(e){this._isEnabled&&this._setStandingFrame(e)}setWalkingAnimationMapping(e){this.walkingAnimationMapping=e,this._isEnabled=this.walkingAnimationMapping!==void 0}getWalkingAnimationMapping(){return this.walkingAnimationMapping}getCharsInRow(){return this.charsInRow}setStandingFrameDuringWalk(e,t){this.isCurrentFrameStanding(e,t)||(this.lastFootLeft=!this.lastFootLeft),this._setStandingFrame(e)}setWalkingFrame(e){let t=this.framesOfDirection(e);t&&this.frameChange$.next(this.lastFootLeft?t.rightFoot:t.leftFoot)}_setStandingFrame(e){let t=this.framesOfDirection(e);t&&this.frameChange$.next(t.standing)}isCurrentFrameStanding(e,t){return t===this.framesOfDirection(e)?.standing}framesOfDirection(e){return typeof this.walkingAnimationMapping=="number"?this.getFramesForCharIndex(e,this.walkingAnimationMapping):this.getFramesForAnimationMapping(e)}getFramesForAnimationMapping(e){if(this.walkingAnimationMapping)return this.walkingAnimationMapping[e]||this.walkingAnimationMapping[this.fallbackDirection(e)]}fallbackDirection(e){switch(e){case"down-left":return"left";case"down-right":return"right";case"up-left":return"left";case"up-right":return"right"}return e}getFramesForCharIndex(e,t){let i=Math.floor(t/this.charsInRow),n=t%this.charsInRow,s=this.charsInRow*r.FRAMES_CHAR_ROW,u=r.FRAMES_CHAR_ROW*n,l=(this.directionToFrameRow[e]??0)+i*r.FRAMES_CHAR_COL,f=u+l*s;return{rightFoot:f,standing:f+1,leftFoot:f+2}}};var an=class{static shiftPad(e,t){let i=Math.floor(e),s=`${i}`.padStart(t,"0").length;return i/Math.pow(10,s)}};var kv=gt(xi(),1),uh=gt(_o(),1);var qe=class r{static vec2str(e){return`${e.x}#${e.y}`}static equal(e,t){return r.vec2str(e)==r.vec2str(t)}static manhattanDistance(e,t){let i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return i+n}static chebyshevDistance(e,t){let i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.max(i,n)}static scalarMult(e,t){return e.clone().multiply(new E(t,t))}};var un=class r{constructor(e){this.tilemap=e;this.charLayerDepths=new Map;this.setLayerDepths()}static{this.ALWAYS_TOP_PROP_NAME="ge_alwaysTop"}static{this.CHAR_LAYER_PROP_NAME="ge_charLayer"}static{this.HEIGHT_SHIFT_PROP_NAME="ge_heightShift"}static{this.Z_INDEX_PADDING=7}getTileWidth(){let e=this.tilemap.layers[0]?.tilemapLayer.scale??1;return this.tilemap.tileWidth*e}getTileHeight(){let e=this.tilemap.layers[0]?.tilemapLayer.scale??1;return this.tilemap.tileHeight*e}getDepthOfCharLayer(e){return this.charLayerDepths.get(e)??0}tilePosToPixelPos(e){return this.isIsometric()?qe.scalarMult(this.getTileSize(),.5).multiply(new E(e.x-e.y,e.x+e.y)):e.clone().multiply(this.getTileSize())}getTileDistance(e){if(this.isIsometric())switch(e){case"down-left":case"down-right":case"up-left":case"up-right":return qe.scalarMult(this.getTileSize(),.5);default:return this.getTileSize()}return this.getTileSize()}getTileSize(){return new E(this.getTileWidth(),this.getTileHeight())}isIsometric(){return this.tilemap.orientation==Phaser.Tilemaps.Orientation.ISOMETRIC.toString()}isLayerAlwaysOnTop(e){return this.hasLayerProp(e,r.ALWAYS_TOP_PROP_NAME)}isCharLayer(e){return this.hasLayerProp(e,r.CHAR_LAYER_PROP_NAME)}setLayerDepths(){let e=[],t=-1,i=this.tilemap.layers.filter(s=>this.isLayerAlwaysOnTop(s));this.tilemap.layers.filter(s=>!this.isLayerAlwaysOnTop(s)).forEach(s=>{this.hasLayerProp(s,r.HEIGHT_SHIFT_PROP_NAME)?(this.createHeightShiftLayers(s,t),e.push(s.tilemapLayer)):this.setDepth(s,++t)}),this.charLayerDepths.set(void 0,t),i.forEach((s,u)=>{s.tilemapLayer.setDepth(u+1+t)}),e.forEach(s=>s.destroy())}setDepth(e,t){e.tilemapLayer.setDepth(t),this.isCharLayer(e)&&this.charLayerDepths.set(this.getLayerProp(e,r.CHAR_LAYER_PROP_NAME),t)}createHeightShiftLayers(e,t){let i=this.getLayerProp(e,r.HEIGHT_SHIFT_PROP_NAME);isNaN(i)&&(i=0);let n=1;for(let s=0;s<e.height;s++){let u=this.copyLayer(e,s);if(u){u.scale=e.tilemapLayer.scale;let l=this.isIsometric()?this.getTileHeight()/2:this.getTileHeight();u.setDepth(t+an.shiftPad((s+i)*l+n,r.Z_INDEX_PADDING))}}}getLayerProp(e,t){return e.properties.find(s=>s.name==t)?.value}hasLayerProp(e,t){return this.getLayerProp(e,t)!=null}copyLayer(e,t){let i=`${e.name}#${t}`,n=this.tilemap.createBlankLayer(i,e.tilemapLayer.tileset);if(n){if(n.name=i,this.isIsometric())for(let s=t;s>=0;s--){let u=t-s;n.putTileAt(e.data[s][u],u,s)}else for(let s=0;s<e.width;s++)n.putTileAt(e.data[t][s],s,t);return n}}};var ah=class{constructor(e,t,i,n,s){this.charData=e;this.scene=t;this.tilemap=i;this.geHeadless=s;this.customOffset=new E(0,0);this.depthOffset=0;this.newSpriteSet$=new kv.Subject;this.destroy$=new kv.Subject;this.layerOverlaySprite=n&&e.sprite?this.scene.add.sprite(0,0,e.sprite.texture):void 0,this.walkingAnimationMapping=e.walkingAnimationMapping,this.customOffset=new E(e.offsetX||0,e.offsetY||0),this.depthOffset=e.depthOffset??0,this.sprite=e.sprite,this.container=e.container,this.cachedContainerBounds=e.container?.getBounds(),this.geHeadless.directionChanged().pipe((0,uh.filter)(({charId:u})=>u===this.charData.id)).subscribe(({direction:u})=>{this.animation?.setStandingFrame(u)}),this.sprite&&(this.sprite.setOrigin(0,0),this.resetAnimation(this.sprite),this.updateOverlaySprite(),this.updateGridChar())}destroy(){this.destroy$.next(),this.destroy$.complete(),this.newSpriteSet$.complete()}setSprite(e){e?(this.sprite&&(e.x=this.sprite.x,e.y=this.sprite.y),this.sprite=e,this.newSpriteSet$.next(),this.layerOverlaySprite=this.layerOverlaySprite?this.scene.add.sprite(0,0,this.sprite.texture):void 0,this.updateOverlaySprite(),this.resetAnimation(this.sprite),this.updateDepth()):(this.layerOverlaySprite=void 0,this.sprite=void 0)}getSprite(){return this.sprite}getLayerOverlaySprite(){return this.layerOverlaySprite}setContainer(e){this.container=e,this.cachedContainerBounds=e?.getBounds()}getContainer(){return this.container}getOffsetX(){return this.customOffset.x}setOffsetX(e){this.customOffset.x=e}getOffsetY(){return this.customOffset.y}setOffsetY(e){this.customOffset.y=e}getWalkingAnimationMapping(){return this.walkingAnimationMapping}turnTowards(e){this.geHeadless.isMoving(this.charData.id)||e!="none"&&(this.geHeadless.turnTowards(this.charData.id,e),this.animation?.setStandingFrame(e))}getAnimation(){return this.animation}setAnimation(e){this.animation=e}update(e){this.updateGridChar()}getDepthOffset(){return this.depthOffset}getEngineOffset(){if(!this.sprite)return E.ZERO;let e=this.tilemap.getTileWidth()/2-Math.floor((this.sprite?.displayWidth??0)/2),t=-(this.sprite?.displayHeight??0)+this.tilemap.getTileHeight();return new E(e,t)}updatePixelPos(){let e=new E(this.geHeadless.getPosition(this.charData.id));this.geHeadless.isCurrentMovementReverted(this.charData.id)&&(e=new E(this.geHeadless.getTilePosInDirection(this.geHeadless.getPosition(this.charData.id),this.geHeadless.getCharLayer(this.charData.id),ps(this.geHeadless.getFacingDirection(this.charData.id))).position));let t=this.geHeadless.getMovementProgress(this.charData.id)/1e3,n=this.tilemap.tilePosToPixelPos(e).add(this.getEngineOffset()).add(this.customOffset).add(xt(this.geHeadless.getFacingDirection(this.charData.id)).multiply(this.tilemap.getTileDistance(this.geHeadless.getFacingDirection(this.charData.id)).scalarMult(t))),s=this.getGameObj();s&&(s.x=Math.floor(n.x),s.y=Math.floor(n.y))}getGameObj(){return this.container||this.sprite}updateGridChar(){if(this.updatePixelPos(),this.sprite&&this.geHeadless.isMoving(this.charData.id)){let e=this.geHeadless.getMovementProgress(this.charData.id)>Hr/2;this.getAnimation()?.updateCharacterFrame(this.geHeadless.getFacingDirection(this.charData.id),e,Number(this.sprite.frame.name))}this.updateDepth()}resetAnimation(e){let t=new As(this.walkingAnimationMapping,e.texture.source[0].width/e.width/As.FRAMES_CHAR_ROW);this.setAnimation(t),t.frameChange().pipe((0,uh.takeUntil)(this.newSpriteSet$)).subscribe(i=>{e?.setFrame(i)}),t.setIsEnabled(this.walkingAnimationMapping!==void 0),t.setStandingFrame(this.geHeadless.getFacingDirection(this.charData.id))}updateOverlaySprite(){if(!this.layerOverlaySprite||!this.sprite)return;this.layerOverlaySprite.scale=this.sprite.scale;let e=this.tilemap.getTileHeight()/this.layerOverlaySprite.scale;this.layerOverlaySprite.setCrop(0,0,this.layerOverlaySprite.displayWidth,this.sprite.height-e),this.layerOverlaySprite.setOrigin(0,0)}updateDepth(){if(!this.getGameObj())return;let t=new E(this.geHeadless.getPosition(this.charData.id)),i=this.geHeadless.getCharLayer(this.charData.id);this.container?this.setContainerDepth(this.container,{position:t,layer:i}):this.sprite&&this.setSpriteDepth(this.sprite,{position:t,layer:i});let n=this.getLayerOverlaySprite();if(n){let s=new E({...t,y:t.y-1});this.setSpriteDepth(n,{position:s,layer:i})}}setSpriteDepth(e,t){e.setDepth(this.tilemap.getDepthOfCharLayer(this.getTransitionLayer(t))+this.getPaddedPixelDepthSprite(e))}setContainerDepth(e,t){e.setDepth(this.tilemap.getDepthOfCharLayer(this.getTransitionLayer(t))+this.getPaddedPixelDepthContainer(e))}getPaddedPixelDepthContainer(e){return an.shiftPad(e.y+(this.cachedContainerBounds?.y??0)+(this.cachedContainerBounds?.height??0)+this.depthOffset,un.Z_INDEX_PADDING)}getPaddedPixelDepthSprite(e){return an.shiftPad(e.y+e.displayHeight+this.depthOffset,un.Z_INDEX_PADDING)}getTransitionLayer(e){if(e.layer)return this.geHeadless.getTransition(e.position,e.layer)||e.layer}};var Es=(n=>(n.DONT_BLOCK="DONT_BLOCK",n.BLOCK_TWO_TILES="BLOCK_TWO_TILES",n.BLOCK_ONE_TILE_AHEAD="BLOCK_ONE_TILE_AHEAD",n.BLOCK_ONE_TILE_BEHIND="BLOCK_ONE_TILE_BEHIND",n))(Es||{});var cn=(n=>(n.STOP="STOP",n.CLOSEST_REACHABLE="CLOSEST_REACHABLE",n.RETRY="RETRY",n.ALTERNATIVE_TARGETS="ALTERNATIVE_TARGETS",n))(cn||{});var ch=class{distance(e,t){return qe.manhattanDistance(e,t)}direction(e,t){if(qe.equal(e,t))return"none";let i=e.clone().subtract(t);return Math.abs(i.x)>Math.abs(i.y)?i.x>0?"left":"right":i.y>0?"up":"down"}neighbors(e){return[new E(e.x,e.y+1),new E(e.x+1,e.y),new E(e.x-1,e.y),new E(e.x,e.y-1)]}getDirections(){return["up","right","down","left"]}};var lh=class{distance(e,t){return qe.chebyshevDistance(e,t)}neighbors(e){let t=[new E(e.x,e.y+1),new E(e.x+1,e.y),new E(e.x-1,e.y),new E(e.x,e.y-1)],i=[new E(e.x+1,e.y+1),new E(e.x+1,e.y-1),new E(e.x-1,e.y+1),new E(e.x-1,e.y-1)];return[...t,...i]}direction(e,t){return t.x>e.x?t.y>e.y?"down-right":t.y<e.y?"up-right":"right":t.x<e.x?t.y>e.y?"down-left":t.y<e.y?"up-left":"left":t.y<e.y?"up":t.y>e.y?"down":"none"}getDirections(){return["up","right","down","left","down-left","down-right","up-right","up-left"]}};var er=class{static create(e){switch(e){case 4:return new ch;case 8:return new lh}}};var qs=class{constructor(e,t,i){this.backoffMs=e;this.maxRetries=t;this.onFinished=i;this.retries=0;this.elapsed=0}retry(e,t){this.shouldRetry()?(this.elapsed+=e,this.elapsed>=this.backoffMs&&(this.elapsed=0,this.retries++,t())):this.onFinished()}reset(){this.retries=0,this.elapsed=0}getMaxRetries(){return this.maxRetries}getBackoffMs(){return this.backoffMs}shouldRetry(){return this.maxRetries===-1||this.retries<this.maxRetries}};var Po=(i=>(i.WAIT="WAIT",i.RETRY="RETRY",i.STOP="STOP",i))(Po||{});var Ro=gt(xi(),1);var yr=class{constructor(e,{shortestPathAlgorithm:t="BFS",pathWidth:i=1,pathHeight:n=1,numberOfDirections:s=4,isPositionAllowed:u=(j,D)=>!0,collisionGroups:l=[],ignoredChars:f=[],ignoreTiles:p=!1,ignoreMapBounds:v=!1,ignoreBlockedTarget:b=!1,maxPathLength:T=1/0,ignoreLayers:S=!1,considerCosts:q=!1,calculateClosestToTarget:M=!0}={}){this.gridTilemap=e;this.options={shortestPathAlgorithm:t,pathWidth:i,pathHeight:n,numberOfDirections:s,isPositionAllowed:u,collisionGroups:l,ignoredChars:f,ignoreTiles:p,ignoreMapBounds:v,ignoreBlockedTarget:b,maxPathLength:T,ignoreLayers:S,considerCosts:q,calculateClosestToTarget:M},this.ignoredCharsSet=new Set(f)}findShortestPath(e,t){this.options.ignoreLayers&&(this.gridTilemap.fixCacheLayer(e.layer),t.layer=e.layer);let i=this.findShortestPathImpl(e,t);return this.gridTilemap.unfixCacheLayers(),i}getNeighbors(e,t){return er.create(this.options.numberOfDirections??4).neighbors(e.position).map(u=>{let l=e.layer;return this.options.ignoreLayers||(l=this.gridTilemap.getTransition(u,e.layer)),{position:u,layer:l||e.layer}}).filter(u=>!this.isBlocking(e,u)||this.options.ignoreBlockedTarget&&G.equal(u,t))}getTransition(e,t){if(!this.options.ignoreLayers)return this.gridTilemap.getTransition(e,t)}getCosts(e,t){if(!this.options.considerCosts)return 1;let i=Ue(t.position,e);return this.gridTilemap.getTileCosts(t,i)}isBlocking(e,t){return!(this.options.ignoreMapBounds||this.gridTilemap.isInRange(t.position))||!this.options.isPositionAllowed(t.position,t.layer)||!this.options.ignoreTiles&&this.hasBlockingTileFrom(e,t,this.options.pathWidth,this.options.pathHeight,this.options.ignoreMapBounds,this.gridTilemap)?!0:this.hasBlockingCharFrom(e,t,this.options.pathWidth,this.options.pathHeight,this.options.collisionGroups,this.ignoredCharsSet,this.gridTilemap)}distance(e,t){return(this.options.numberOfDirections===4?qe.manhattanDistance:qe.chebyshevDistance)(e,t)}getTilePosInDir(e,t){return this.options.ignoreLayers?{position:e.position.add(xt(this.gridTilemap.toMapDirection(t))),layer:e.layer}:this.gridTilemap.getTilePosInDirection(e,t)}getReverseNeighbors(e,t){let n=er.create(this.options.numberOfDirections??4).neighbors(e.position),s;if(!this.options.ignoreLayers){let l=this.gridTilemap.getReverseTransitions(e.position,e.layer);s=l?[...l]:void 0}return n.map(l=>s?s.map(f=>({position:l,layer:f||e.layer})):[{position:l,layer:e.layer}]).flat().filter(l=>!this.isBlocking(l,e)||this.options.ignoreBlockedTarget&&G.equal(e,t))}hasBlockingCharFrom(e,t,i,n,s,u,l){if(i===1&&n===1)return l.hasBlockingChar(t.position,t.layer,s,u);let f=v=>l.hasBlockingChar(v,t.layer,s,u),p=Ue(e.position,t.position);return this.isBlockingMultiTile(e,p,i,n,f)}hasBlockingTileFrom(e,t,i,n,s,u){if(i===1&&n===1)return u.hasBlockingTile(t.position,t.layer,Ue(t.position,e.position),s);let l=Ue(e.position,t.position),f=p=>u.hasBlockingTile(p,t.layer,l,s);return this.isBlockingMultiTile(e,l,i,n,f)}isBlockingMultiTile(e,t,i,n,s){let u={src:new E(e.position.x+i,e.position.y),dest:new E(e.position.x+i,e.position.y+n-1)},l={src:new E(e.position.x-1,e.position.y),dest:new E(e.position.x-1,e.position.y+n-1)},f={src:new E(e.position.x,e.position.y-1),dest:new E(e.position.x+i-1,e.position.y-1)},p={src:new E(e.position.x,e.position.y+n),dest:new E(e.position.x+i-1,e.position.y+n)};switch(t){case"right":return this.checkLine(u,s);case"left":return this.checkLine(l,s);case"up":return this.checkLine(f,s);case"down":return this.checkLine(p,s);case"up-left":return this.checkLine({src:f.src,dest:new E(f.dest.x-1,f.dest.y)},s)||this.checkLine({src:new E(l.src.x,l.src.y-1),dest:new E(l.dest.x,l.dest.y-1)},s);case"up-right":return this.checkLine({src:new E(f.src.x+1,f.src.y),dest:f.dest},s)||this.checkLine({src:new E(u.src.x,u.src.y-1),dest:new E(u.dest.x,u.dest.y-1)},s);case"down-left":return this.checkLine({src:new E(l.src.x,l.src.y+1),dest:new E(l.dest.x,l.dest.y+1)},s)||this.checkLine({src:p.src,dest:new E(p.dest.x-1,p.dest.y)},s);case"down-right":return this.checkLine({src:new E(p.src.x+1,p.src.y),dest:p.dest},s)||this.checkLine({src:new E(u.src.x,u.src.y+1),dest:new E(u.dest.x,u.dest.y+1)},s)}return!1}checkLine(e,t){for(let i=e.src.x;i<=e.dest.x;i++)for(let n=e.src.y;n<=e.dest.y;n++)if(t(new E(i,n)))return!0;return!1}};var _P=gt(fh(),1);var ph=class extends yr{findShortestPathImpl(e,t){let i=this.shortestPathBfs(e,t);return{path:this.returnPath(i.previous,e,t),closestToTarget:i.closestToTarget,steps:i.steps,maxPathLengthReached:i.maxPathLengthReached,algorithmUsed:"A_STAR"}}shortestPathBfs(e,t){let i=new Map,n=new Map,s=new Map,u=new _P.MinFibonacciHeap((v,b)=>Ls(s,v)-Ls(s,b)),l=e,f=this.distance(e.position,t.position),p=0;for(u.push(e),n.set(G.toString(e),0),s.set(G.toString(e),this.distance(e.position,t.position));u.size>0;){let v=u.pop();if(!v)break;p++;let b=this.distance(v.position,t.position);if(b<f&&(f=b,l=v),bP(v,t))return{previous:i,closestToTarget:l,steps:p,maxPathLengthReached:!1};if(Ls(n,v)+1>this.options.maxPathLength)return{previous:new Map,closestToTarget:l,steps:p,maxPathLengthReached:!0};for(let T of this.getNeighbors(v,t)){let S=Ls(n,v)+this.getCosts(v.position,T),q=G.toString(T);(!n.has(q)||S<Ls(n,T))&&(i.set(q,v),n.set(q,S),s.set(q,S+this.distance(T.position,t.position)),u.push(T))}}return{previous:i,closestToTarget:l,steps:p,maxPathLengthReached:!1}}returnPath(e,t,i){let n=[],s=i;for(n.push(s);!bP(s,t);){if(s=e.get(G.toString(s)),!s)return[];n.push(s)}return n.reverse()}};function Ls(r,e){return r.get(G.toString(e))??Number.MAX_VALUE}function bP(r,e){return qe.equal(r.position,e.position)?r.layer===e.layer:!1}var dh=class{constructor(e){this.data=e}},$r=class{constructor(){this.sizeInternal=0}dequeue(){if(this.tail===void 0)return;this.sizeInternal--;let e=this.tail.data;return this.tail.prev===void 0?(this.tail=void 0,this.head=void 0,e):(this.tail.prev.next=void 0,this.tail=this.tail.prev,e)}enqueue(e){if(this.sizeInternal++,this.head===void 0){this.head=new dh(e),this.tail=this.head;return}let t=new dh(e);t.next=this.head,this.head.prev=t,this.head=t}peek(){return this.tail?this.tail.data:void 0}peekAll(){let e=[],t=this.tail;for(;t;)e.push(t.data),t=t.prev;return e}clear(){this.head=void 0,this.tail=void 0,this.sizeInternal=0}peekEnd(){return this.head?.data}size(){return this.sizeInternal}};var wo=class extends yr{findShortestPathImpl(e,t){let i=this.shortestPathBfs(e,t);return{path:this.returnPath(i.previous,e,t),closestToTarget:i.closestToTarget,steps:i.steps,maxPathLengthReached:i.maxPathLengthReached,algorithmUsed:"BFS"}}equal(e,t){return qe.equal(e.position,t.position)?e.layer===t.layer:!1}shortestPathBfs(e,t){let i=new Map,n=new Set,s=new $r,u=e,l=this.distance(e.position,t.position),f=0;for(s.enqueue({node:e,dist:0}),n.add(G.toString(e));s.size()>0;){let p=s.dequeue();if(f++,!p)break;let{node:v,dist:b}=p;if(b>this.options.maxPathLength)return{previous:new Map,closestToTarget:u,steps:f,maxPathLengthReached:!0};let T=this.distance(v.position,t.position);if(T<l&&(l=T,u=v),this.equal(v,t))return{previous:i,closestToTarget:u,steps:f,maxPathLengthReached:!1};for(let S of this.getNeighbors(v,t))n.has(G.toString(S))||(i.set(G.toString(S),v),s.enqueue({node:S,dist:b+1}),n.add(G.toString(S)))}return{previous:i,closestToTarget:u,steps:f,maxPathLengthReached:!1}}returnPath(e,t,i){let n=[],s=i;for(n.push(s);!this.equal(s,t);){if(s=e.get(G.toString(s)),!s)return[];n.push(s)}return n.reverse()}};var vh=class{constructor(){this.previous=new Map;this.visited=new Map;this.queue=new $r;this.minMatching=1/0;this.lastDist=0}isNewFrontier(){let e=this.queue.peek();return!!(e&&e.dist>this.lastDist)}step(e,t,i){this.lastDist=i;for(let n of e){let s=G.toString(n);if(!this.visited.has(s)){this.previous.set(s,t),this.queue.enqueue({node:n,dist:i+1}),this.visited.set(s,i+1);let u=this.otherBfs?.visited.get(s);u!==void 0&&u<this.minMatching&&(this.minMatching=u,this.minMatchingNode=n)}}}},mh=class extends yr{findShortestPathImpl(e,t){let i=this.shortestPathBfs(e,t);return{path:this.returnPath(i.previous,i.previous2,i.matchingPos,e,t),closestToTarget:i.closestToTarget,steps:i.steps,maxPathLengthReached:i.maxPathLengthReached,algorithmUsed:"BIDIRECTIONAL_SEARCH"}}equal(e,t){return qe.equal(e.position,t.position)?e.layer===t.layer:!1}shortestPathBfs(e,t){if(G.equal(e,t))return{previous:new Map,previous2:new Map,closestToTarget:e,steps:0,maxPathLengthReached:!1};let i=new vh,n=new vh,s=0;i.otherBfs=n,n.otherBfs=i;let u=e,l=this.distance(e.position,t.position);for(i.queue.enqueue({node:e,dist:0}),n.queue.enqueue({node:t,dist:0}),i.visited.set(G.toString(e),0),n.visited.set(G.toString(t),0);this.shouldStop(i.queue.size()>0,n.queue.size()>0);){let f=i.queue.dequeue();if(!f)break;let{node:p,dist:v}=f;if(v+1+(n.queue.peek()?.dist||0)>this.options.maxPathLength)return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(u),steps:s,maxPathLengthReached:!0};let b=this.distance(p.position,t.position);if(b<l&&(l=b,u=p),s++,i.step(this.getNeighbors(p,t),p,v),i.isNewFrontier()&&i.minMatchingNode)return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(t),matchingPos:i.minMatchingNode,steps:s,maxPathLengthReached:!1};let T=n.queue.dequeue();if(!T)continue;let{node:S,dist:q}=T;if(s++,n.step(this.getReverseNeighbors(S,t),S,q),n.isNewFrontier()&&n.minMatchingNode)return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(t),matchingPos:n.minMatchingNode,steps:s,maxPathLengthReached:!1}}return{previous:i.previous,previous2:n.previous,closestToTarget:this.maybeClosestToTarget(u),steps:s,maxPathLengthReached:!1}}shouldStop(e,t){return this.options.calculateClosestToTarget?e||t:e&&t}maybeClosestToTarget(e){return this.options.calculateClosestToTarget?e:void 0}returnPath(e,t,i,n,s){if(i){let u=this.getPathFromPrev(e,n,i).reverse(),l=this.getPathFromPrev(t,s,i);return u.pop(),[...u,...l]}else return this.getPathFromPrev(e,n,s).reverse()}getPathFromPrev(e,t,i){let n=[],s=i;for(n.push(s);!this.equal(s,t);){if(s=e.get(G.toString(s)),!s)return[];n.push(s)}return n}};var vm=gt(k1(),1);var Lo=class extends yr{constructor(t,i={}){super(t,i);this.openSet=new vm.MinFibonacciHeap;this.g=new Map;this.f=new Map;this.closestToTarget={position:new E(0,0),layer:void 0};this.smallestDistToTarget=0;this.steps=0;this.visits=[];this.maxFrontierSize=0;this.maxJumpSize=0}findShortestPathImpl(t,i){this.maxJumpSize=this.distance(t.position,i.position);let n=this.shortestPath(t,i);return{path:this.returnPath(n.previous,t,i),closestToTarget:n.closestToTarget,steps:n.steps,maxPathLengthReached:n.maxPathLengthReached,algorithmUsed:"JPS"}}shortestPath(t,i){this.steps=0;let n=new Map;this.g=new Map,this.f=new Map,this.closestToTarget=t,this.smallestDistToTarget=this.distance(t.position,i.position),this.openSet=new vm.MinFibonacciHeap((u,l)=>Fs(this.f,u)-Fs(this.f,l)),this.openSet.push(t);let s=G.toString(t);for(this.g.set(s,0),this.f.set(s,this.distance(t.position,i.position)),this.maxFrontierSize=Math.max(this.maxFrontierSize,this.openSet.size);this.openSet.size>0;){let u=this.openSet.pop();if(!u)break;if(this.steps++,G.equal(u,i))return{previous:n,closestToTarget:i,steps:this.steps,maxPathLengthReached:!1};if(Fs(this.g,u)+1>this.options.maxPathLength)return{previous:new Map,closestToTarget:this.closestToTarget,steps:this.steps,maxPathLengthReached:!0};this.updateClosestToTarget(u,i);for(let l of this.getNeighborsInternal(u,n.get(G.toString(u)),i)){let f=G.toString(l.p),p=Fs(this.g,u)+l.dist;(!this.g.has(f)||p<Fs(this.g,l.p))&&(n.set(f,u),this.g.set(f,p),this.f.set(f,p+this.distance(l.p.position,i.position)),this.openSet.push(l.p))}}return{previous:n,closestToTarget:this.closestToTarget,steps:this.steps,maxPathLengthReached:!1}}updateClosestToTarget(t,i){let n=this.distance(t.position,i.position);n<this.smallestDistToTarget&&(this.smallestDistToTarget=n,this.closestToTarget=t)}addIfNotBlocked(t,i,n){this.blockOrTrans(i,n)||t.push(n)}blockOrTrans(t,i){return this.isBlocking(t,i)||this.getTransition(i.position,i.layer)!==void 0}getNeighborsInternal(t,i,n){if(!i||t.layer!==i.layer)return this.getNeighbors(t,n).map(l=>({p:l,dist:1}));let s=this.prune(i,t).filter(l=>!this.isBlockingIgnoreTarget(t,l,n)).map(l=>{let f=this.getTransition(l.position,t.layer);return{position:l.position,layer:f||t.layer}}),u=[];for(let l of s)if(this.isHorizontal(t.position,l.position))u.push({p:l,dist:1});else{let f=this.jump(t,l,n,1,Ue(t.position,l.position));f&&u.push(f)}return u}isBlockingIgnoreTarget(t,i,n){return this.isBlocking(t,i)&&!(this.options.ignoreBlockedTarget&&G.equal(i,n))}jump(t,i,n,s,u){if(!this.isBlockingIgnoreTarget(t,i,n))return G.equal(i,n)?{p:i,dist:s}:s>=this.maxJumpSize?{p:i,dist:s}:this.getTransition(i.position,t.layer)!==void 0?{p:i,dist:s}:this.hasForced(t,i)?{p:i,dist:s}:(this.updateClosestToTarget(i,n),this.jump(i,this.getTilePosInDir(i,u),n,s+1,u))}isHorizontal(t,i){return t.y===i.y}getForced(t,i,n,s,u,l){let f=[],p=t;return(this.blockOrTrans(p,n)||this.blockOrTrans(n,s))&&this.addIfNotBlocked(f,i,s),(this.blockOrTrans(p,u)||this.blockOrTrans(u,l))&&this.addIfNotBlocked(f,i,l),f}hasForced(t,i){let{topLeft:n,downLeft:s,top:u,bottom:l}=this.normalizedPositions(t,i);return!!((this.blockOrTrans(t,s)||this.blockOrTrans(s,l))&&!this.blockOrTrans(i,l)||(this.blockOrTrans(t,n)||this.blockOrTrans(n,u))&&!this.blockOrTrans(i,u))}prune(t,i){let{right:n,top:s,bottom:u,downLeft:l,topLeft:f}=this.normalizedPositions(t,i);return this.isHorizontal(t.position,i.position)?[n,s,u]:[n,...this.getForced(t,i,l,u,f,s)]}normalizedPositions(t,i){return t.position.x<i.position.x?{topLeft:{position:new E(i.position.x-1,i.position.y-1),layer:i.layer},downLeft:{position:new E(i.position.x-1,i.position.y+1),layer:i.layer},top:{position:new E(i.position.x,i.position.y-1),layer:i.layer},bottom:{position:new E(i.position.x,i.position.y+1),layer:i.layer},right:{position:new E(i.position.x+1,i.position.y),layer:i.layer}}:t.position.x>i.position.x?{topLeft:{position:new E(i.position.x+1,i.position.y+1),layer:i.layer},downLeft:{position:new E(i.position.x+1,i.position.y-1),layer:i.layer},top:{position:new E(i.position.x,i.position.y+1),layer:i.layer},bottom:{position:new E(i.position.x,i.position.y-1),layer:i.layer},right:{position:new E(i.position.x-1,i.position.y),layer:i.layer}}:t.position.y<i.position.y?{topLeft:{position:new E(i.position.x+1,i.position.y-1),layer:i.layer},downLeft:{position:new E(i.position.x-1,i.position.y-1),layer:i.layer},top:{position:new E(i.position.x+1,i.position.y),layer:i.layer},bottom:{position:new E(i.position.x-1,i.position.y),layer:i.layer},right:{position:new E(i.position.x,i.position.y+1),layer:i.layer}}:{topLeft:{position:new E(i.position.x-1,i.position.y+1),layer:i.layer},downLeft:{position:new E(i.position.x+1,i.position.y+1),layer:i.layer},top:{position:new E(i.position.x-1,i.position.y),layer:i.layer},bottom:{position:new E(i.position.x+1,i.position.y),layer:i.layer},right:{position:new E(i.position.x,i.position.y-1),layer:i.layer}}}posInDir(t,i){return{position:t.position.add(xt(i)),layer:t.layer}}returnPath(t,i,n){let s=[],u=n;for(s.push(u);!G.equal(u,i);){let l=t.get(G.toString(u));if(!l)return[];this.distance(l.position,u.position)>1?this.fillPath(u,l,s):s.push(l),u=l}return s.reverse()}fillPath(t,i,n){let s=t;do{let u=Ue(s.position,i.position);s=this.getTilePosInDir(s,u),n.push(s)}while(!qe.equal(s.position,i.position))}};function Fs(r,e){return r.get(G.toString(e))??Number.MAX_VALUE}var jo=gt(_o(),1);var Ah=class{constructor(e,t,i,n={}){this.character=e;this.gridTilemap=t;this.charToFollow=i;let s={distance:0,noPathFoundStrategy:"STOP",maxPathLength:1/0,shortestPathAlgorithm:"BIDIRECTIONAL_SEARCH",ignoreLayers:!1,considerCosts:n.considerCosts||!1,facingDirection:"none",isPositionAllowedFn:()=>!0,ignoredChars:[]};this.options={...s,...n},this.options.considerCosts&&this.options.shortestPathAlgorithm!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${this.options.shortestPathAlgorithm}'. It can only be used with A* algorithm.`),this.options.shortestPathAlgorithm==="JPS"&&(this.character.getTileWidth()>1||this.character.getTileHeight()>1)&&console.warn("GridEngine: Pathfinding algorithm 'JPS' can only be used for characters with 'tileWidth' and 'tileHeight' of 1")}init(){this.updateTarget(this.charToFollow.getTilePos().position,this.charToFollow.getTilePos().layer),this.charToFollow.positionChangeStarted().pipe((0,jo.takeUntil)(this.character.autoMovementSet().pipe((0,jo.filter)(e=>e!==this),(0,jo.take)(1)))).subscribe(({enterTile:e,enterLayer:t})=>{this.updateTarget(e,t)})}update(e){this.targetMovement?.update(e)}getInfo(){return{type:"Follow",config:{charToFollow:this.charToFollow.getId(),distance:this.options.distance,noPathFoundStrategy:this.options.noPathFoundStrategy,maxPathLength:this.options.maxPathLength,ignoreLayers:this.options.ignoreLayers,facingDirection:this.options.facingDirection,shortestPathAlgorithm:this.options.shortestPathAlgorithm,considerCosts:this.options.considerCosts,isPositionAllowedFn:this.options.isPositionAllowedFn,ignoredChars:this.options.ignoredChars}}}getFacingPos(){let e=hs[this.options.facingDirection]+hs[this.charToFollow.getFacingDirection()],t=Fa("up",e),i={x:this.charToFollow.getTilePos().position.x,y:this.charToFollow.getTilePos().position.y};return t==="right"?i.x+=this.charToFollow.getTileWidth()-1:t==="down"?i.y+=this.charToFollow.getTileWidth()-1:t==="down-left"?i.y+=this.charToFollow.getTileWidth()-1:t==="down-right"?(i.y+=this.charToFollow.getTileWidth()-1,i.x+=this.charToFollow.getTileWidth()-1):t==="up-right"&&(i.x+=this.charToFollow.getTileWidth()-1),this.gridTilemap.getTilePosInDirection({position:new E(i),layer:this.charToFollow.getTilePos().layer},t).position}updateTarget(e,t){let i=this.options.facingDirection!=="none"&&this.options.distance===0;i&&(e=this.getFacingPos()),this.targetMovement=new Io(this.character,this.gridTilemap,{position:new E(e),layer:t},{distance:i?0:this.options.distance+1,config:{algorithm:this.options.shortestPathAlgorithm,noPathFoundStrategy:this.options.noPathFoundStrategy,maxPathLength:this.options.maxPathLength,ignoreLayers:this.options.ignoreLayers,considerCosts:this.options.considerCosts,ignoredChars:[this.charToFollow.getId(),...this.options.ignoredChars],isPositionAllowedFn:this.options.isPositionAllowedFn}}),this.targetMovement.init()}};var Ds=class{static getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}};var ko=gt(_o(),1);var Eh=class{constructor(e,t=0,i=-1){this.character=e;this.delay=t;this.radius=i;this.stepSize=0;this.delayLeft=this.delay,this.initialRow=e.getNextTilePos().position.y,this.initialCol=e.getNextTilePos().position.x,this.randomizeStepSize(),this.stepsWalked=0,this.currentMovementDirection="none",this.character.positionChangeStarted().pipe((0,ko.takeUntil)(this.character.autoMovementSet().pipe((0,ko.filter)(n=>n!==this),(0,ko.take)(1)))).subscribe(()=>{this.stepsWalked++}),this.distanceUtils=er.create(e.getNumberOfDirections())}init(){}update(e){if(this.shouldContinueWalkingCurrentDirection())this.character.move(this.currentMovementDirection);else if(this.delayLeft-=e,this.delayLeft<=0){this.delayLeft=this.delay;let t=this.getFreeRandomDirection();this.stepsWalked=0,this.character.move(t),this.currentMovementDirection=t,this.randomizeStepSize()}}getInfo(){return{type:"Random",config:{delay:this.delay,radius:this.radius}}}shouldContinueWalkingCurrentDirection(){return this.stepsWalked<this.stepSize&&this.currentMovementDirection!=="none"&&!this.character.isBlockingDirection(this.currentMovementDirection)&&this.isWithinRadius(this.currentMovementDirection)}getFreeDirections(){return this.distanceUtils.getDirections().filter(t=>!this.character.isBlockingDirection(t)).filter(t=>this.isWithinRadius(t))}isWithinRadius(e){return this.radius==-1?!0:this.getDist(e)<=this.radius}getDist(e){return this.distanceUtils.distance(this.character.getNextTilePos().position.add(xt(e)),new E(this.initialCol,this.initialRow))}getFreeRandomDirection(){let e=this.getFreeDirections();return e.length==0?"none":e[Ds.getRandomInt(e.length)]}randomizeStepSize(){this.stepSize=Ds.getRandomInt(this.radius)+1}};var or=gt(xi(),1),Ye=gt(_o(),1);function F1(r,e){return r.filter(t=>e.labels?.withAllLabels?e.labels?.withAllLabels.every(i=>t.hasLabel(i)):e.labels?.withOneOfLabels?e.labels?.withOneOfLabels.some(i=>t.hasLabel(i)):e.labels?.withNoneLabels?!e.labels?.withNoneLabels.some(i=>t.hasLabel(i)):!0)}var qh="2.48.0";var Ot=gt(xi(),1);var xh=class{constructor(e,t){this.collistionStrategy=e;this.collisionGroupRelation=t;this.tilePosToCharacters=new mm;this.charRemoved$=new Ot.Subject}isCharBlockingAt(e,t,i,n=new Set,s=new Set){if(i.length===0)return!1;let u=this.tilePosToCharacters.get(e,t);return!!(u&&u.size>0&&[...u].filter(l=>!n.has(l.getId())).filter(l=>!this.doIntersect(l.getCollisionGroups(),s)).some(l=>i.some(f=>l.getCollisionGroups().some(p=>this.collidesWith(f,p)))))}doIntersect(e,t){for(let i of e)if(t.has(i))return!0;return!1}collidesWith(e,t){return this.collisionGroupRelation?(this.collisionGroupRelation.get(e)||new Set).has(t):e===t}getCharactersAt(e,t){return this.tilePosToCharacters.get(e,t)||new Set}addCharacter(e){this.addTilePositions(e.getTilePos(),e),this.addTilePositions(e.getNextTilePos(),e),this.addPositionChangeSub(e),this.addPositionChangeFinishedSub(e),this.addTilePosSetSub(e)}removeCharacter(e){let t=e.getId();this.charRemoved$.next(t),this.deleteTilePositions(e.getTilePos(),e),this.deleteTilePositions(e.getNextTilePos(),e)}add(e,t,i){let n=this.tilePosToCharacters.get(e,t);n||this.tilePosToCharacters.set(e,t,new Set([i])),n?.add(i)}addTilePosSetSub(e){e.tilePositionSet().pipe((0,Ot.takeUntil)(this.charRemoved(e.getId()))).subscribe(t=>{this.deleteTilePositions(e.getNextTilePos(),e),this.addTilePositions(t,e)})}charRemoved(e){return this.charRemoved$?.pipe((0,Ot.take)(1),(0,Ot.filter)(t=>t==e))}addPositionChangeSub(e){e.positionChangeStarted().pipe((0,Ot.takeUntil)(this.charRemoved(e.getId())),this.posChangeToLayerPos()).subscribe(t=>{this.collistionStrategy==="BLOCK_ONE_TILE_AHEAD"&&this.deleteTilePositions(t.exit,e),this.addTilePositions(t.enter,e)})}addPositionChangeFinishedSub(e){e.positionChangeFinished().pipe((0,Ot.takeUntil)(this.charRemoved(e.getId())),this.posChangeToLayerPos()).subscribe(t=>{this.deleteTilePositions(t.exit,e),this.addTilePositions(t.enter,e)})}addTilePositions(e,t){this.forEachCharTile(e,t,(i,n)=>{this.add(new E(i,n),e.layer,t)})}deleteTilePositions(e,t){this.forEachCharTile(e,t,(i,n)=>{this.tilePosToCharacters.get(new E(i,n),e.layer)?.delete(t)})}forEachCharTile(e,t,i){let n=e.position;for(let s=n.x;s<n.x+t.getTileWidth();s++)for(let u=n.y;u<n.y+t.getTileHeight();u++)i(s,u)}posChangeToLayerPos(){return(0,Ot.pipe)((0,Ot.map)(e=>({enter:{position:new E(e.enterTile),layer:e.enterLayer},exit:{position:new E(e.exitTile),layer:e.exitLayer}})))}posToString(e,t){return`${e.x}#${e.y}#${t}`}},mm=class{constructor(){this.memo=new Map}set(e,t,i){let n=this.memo.get(e.x);n||(n=new Map,this.memo.set(e.x,n));let s=n.get(e.y);s||(s=new Map,n.set(e.y,s)),s.set(t,i)}get(e,t){let i=this.memo.get(e.x);if(!i)return;let n=i.get(e.y);if(n)return n.get(t)}};var Fi=class{constructor(e,t,i,n){this.x=e;this.y=t;this.width=i;this.height=n}getX(){return this.x}getY(){return this.y}getWidth(){return this.width}getHeight(){return this.height}isInRange(e){return e.x>=this.x&&e.x<this.x+this.width&&e.y>=this.y&&e.y<this.y+this.height}};var Fo="ge_charLayer";var D1=0,_4=1,ym={none:1,left:2,"up-left":3,up:4,"up-right":5,right:6,"down-right":7,down:8,"down-left":9},Lh=class{constructor(e,t){this.tilemap=e;this.gridTilemap=t;this.tileCollisionCache=new Map}fixLayer(e){this.fixedLayer=this.tileCollisionCache.get(e)}unfixLayers(){this.fixedLayer=void 0}rebuild(e){e||(e=new Fi(0,0,this.tilemap.getWidth(),this.tilemap.getHeight()));let t=this.tilemap.getLayers().filter(i=>i.isCharLayer());for(let i of[...t,void 0]){let n=this.tileCollisionCache.get(i?.getName());if(n===void 0){n=new Array(this.tilemap.getWidth());for(let s=0;s<this.tilemap.getWidth();s++)n[s]=new Array(this.tilemap.getHeight());this.tileCollisionCache.set(i?.getName(),n)}for(let s=e.getY();s<e.getY()+e.getHeight();s++)for(let u=e.getX();u<e.getX()+e.getWidth();u++){let l=0;!this.gridTilemap.hasNoTileUncached(new E(u,s),i?.getName())&&(l=gm(l,0));for(let v of fs())this.gridTilemap.hasBlockingTileUncached(new E(u,s),i?.getName(),v,!0)&&(l=gm(l,ym[v]));this.gridTilemap.hasBlockingTileUncached(new E(u,s),i?.getName(),void 0,!0)&&(l=gm(l,ym[1])),n[u][s]=l}}}hasTileAt(e,t,i){let s=(this.fixedLayer||this.tileCollisionCache.get(i))?.[e]?.[t];if(s!==void 0)return Mh(s,D1)}isBlockingFrom(e,t,i,n,s){let l=(this.fixedLayer||this.tileCollisionCache.get(i))?.[e]?.[t];if(l!==void 0)return!s&&!Mh(l,D1)?!0:n===void 0?Mh(l,_4):Mh(l,ym[n])}};function gm(r,e){return r|1<<e}function Mh(r,e){return(r>>e&1)==1}var R1="ge_cost",jh=class r{constructor(e,t,i,n=void 0,s=!1){this.tilemap=e;this.collisionTilePropertyName=t;this.useTileCollisionCache=s;this.characters=new Map;this.transitions=new Map;this.reverseTransitions=new Map;this.collidesPropNames=new Map;this.tileCostPropNames=new Map;this.collisionRelevantLayersFrameCache=new Map;this.charBlockCache=new xh(i,n);for(let u of fs())this.collidesPropNames.set(u,r.ONE_WAY_COLLIDE_PROP_PREFIX+u),this.tileCostPropNames.set(u,`${R1}_${u}`);this.useTileCollisionCache&&(this.tileCollisionCache=new Lh(e,this),this.tileCollisionCache.rebuild())}static{this.ONE_WAY_COLLIDE_PROP_PREFIX="ge_collide_"}fixCacheLayer(e){this.tileCollisionCache?.fixLayer(e)}unfixCacheLayers(){this.tileCollisionCache?.unfixLayers()}addCharacter(e){this.characters.set(e.getId(),e);let t=e.getNextTilePos().layer;t===void 0?e.setTilePosition({...e.getNextTilePos(),layer:this.getLowestCharLayer()}):this.getCharLayerNames().includes(t)||console.warn(`Char layer '${t}' of character '${e.getId()}' is unknown.`),this.charBlockCache.addCharacter(e)}removeCharacter(e){let t=this.characters.get(e);t&&(this.charBlockCache.removeCharacter(t),this.characters.delete(e))}getCharacters(){return[...this.characters.values()]}getCharactersAt(e,t){return this.charBlockCache.getCharactersAt(e,t)}rebuildTileCollisionCache(e){this.tileCollisionCache?.rebuild(e)}hasBlockingTileUncached(e,t,i,n){if(!n&&this.hasNoTileUncached(e,t))return!0;let s=this.getCollisionRelevantLayers(t);for(let u of s)if(this.isLayerBlockingAt(u.getName(),e,i))return!0;return!1}hasBlockingTile(e,t,i,n){let s=this.tileCollisionCache?.isBlockingFrom(e.x,e.y,t,i,n);return s!==void 0?s:this.hasBlockingTileUncached(e,t,i,n)}getTransition(e,t){let i=this.transitions.get(e.toString());if(i)return i.get(t)}getReverseTransitions(e,t){let i=this.reverseTransitions.get(e.toString());if(i)return i.get(t)}setTransition(e,t,i){this.transitions.has(e.toString())||this.transitions.set(e.toString(),new Map),this.reverseTransitions.has(e.toString())||this.reverseTransitions.set(e.toString(),new Map),this.transitions.get(e.toString())?.set(t,i),this.reverseTransitions.get(e.toString())?.has(i)||this.reverseTransitions.get(e.toString())?.set(i,new Set),this.reverseTransitions.get(e.toString())?.get(i)?.add(t)}getTransitions(){return new Map([...this.transitions].map(([e,t])=>[e,new Map(t)]))}getTileCosts(e,t){let i=this.getCollisionRelevantLayers(e.layer),n=1;for(let s of i)n=Math.max(n,this.getTileCostsForLayer({...e,layer:s.getName()},t));return n}getTileCostsForLayer(e,t){let i=this.tilemap.getTileAt(e.position.x,e.position.y,e.layer);return t&&i?.getProperty(this.tileCostPropNames.get(t)||"")||i?.getProperty(R1)||1}hasNoTileUncached(e,t){return!this.getCollisionRelevantLayers(t).some(n=>this.tilemap.hasTileAt(e.x,e.y,n.getName()))}hasNoTile(e,t){let i=this.tileCollisionCache?.hasTileAt(e.x,e.y,t);return i!==void 0?i:this.hasNoTileUncached(e,t)}hasBlockingChar(e,t,i,n=new Set,s=new Set){return this.charBlockCache.isCharBlockingAt(e,t,i,n,s)}isInRange(e){return new Fi(0,0,this.tilemap.getWidth(),this.tilemap.getHeight()).isInRange(e)}toMapDirection(e){return this.isIsometric()?ob(e):e}fromMapDirection(e){return this.isIsometric()?Fa(e):e}isIsometric(){return this.tilemap.getOrientation()==="isometric"}getTilePosInDirection(e,t){let i=e.position.add(xt(this.toMapDirection(t))),n=this.getTransition(i,e.layer)||e.layer;return{position:i,layer:n}}invalidateFrameCache(){this.collisionRelevantLayersFrameCache.clear()}isLayerBlockingAt(e,t,i){let n=this.tilemap.getTileAt(t.x,t.y,e);return n?!!(n.getProperty(this.collisionTilePropertyName)||i&&n.getProperty(this.collidesPropNames.get(i)||"")):!1}getCharLayerIndexes(){return this.tilemap.getLayers().map((e,t)=>({layer:e,index:t})).filter(({layer:e})=>e.isCharLayer()).map(({index:e})=>e)}findPrevAndCharLayer(e){let t=this.getCharLayerIndexes(),i=this.tilemap.getLayers(),n=t.findIndex(s=>i[s].getProperty(Fo)==e);return n==0?{prevIndex:-1,charLayerIndex:t[n]}:{prevIndex:t[n-1],charLayerIndex:t[n]}}getCollisionRelevantLayers(e){if(!e)return this.tilemap.getLayers();let t=this.collisionRelevantLayersFrameCache.get(e);if(t)return t;let{prevIndex:i,charLayerIndex:n}=this.findPrevAndCharLayer(e),s=this.tilemap.getLayers().slice(i+1,n+1);return this.collisionRelevantLayersFrameCache.set(e,s),s}getLowestCharLayer(){for(let e of this.tilemap.getLayers())if(e.isCharLayer())return e.getProperty(Fo)}getCharLayerNames(){return this.tilemap.getLayers().filter(e=>e.isCharLayer()).map(e=>e.getProperty(Fo)).filter(P4)}};function P4(r){return r!=null}var Ih=(t=>(t.REMOVED="REMOVED",t.ADDED="ADDED",t))(Ih||{});var z1=gt(xi(),1),Fh=gt(_o(),1);var bm=(i=>(i.WAIT="WAIT",i.SKIP="SKIP",i.STOP="STOP",i))(bm||{}),kh=class{constructor(e,t){this.character=e;this.tilemap=t;this.queue=new $r;this.finished$=new z1.Subject;this.pathBlockedWaitElapsed=0;this.distanceUtils=er.create(e.getNumberOfDirections())}init(){this.character.autoMovementSet().pipe((0,Fh.filter)(e=>e!==this),(0,Fh.take)(1)).subscribe(()=>{this.queue.size()>0&&this.finishMovementTerminated(),this.finished$.complete()})}update(e){(!this.character.isMoving()||this.character.willCrossTileBorderThisUpdate(e))&&this.queue.size()>0&&this.moveCharOnPath(e)}getInfo(){return{type:"Queue"}}enqueue(e,t={}){let i={pathBlockedStrategy:t.pathBlockedStrategy??"STOP",pathBlockedWaitTimeoutMs:t?.pathBlockedWaitTimeoutMs||-1,ignoreInvalidPositions:t.ignoreInvalidPositions??!1,skipInvalidPositions:t.skipInvalidPositions??!1};for(let n of e){let s={command:n,config:i};if(si(n)){this.queue.enqueue(s);continue}let l=this.queue.peekEnd()?.command;if(l||(l=this.character.getNextTilePos()),si(l)){this.queue.enqueue(s);continue}let f=this.distanceUtils.distance(l.position,n.position)===1;(!t.ignoreInvalidPositions||f)&&this.queue.enqueue(s)}}peekAll(){return this.queue.peekAll()}size(){return this.queue.size()}finished(){return this.finished$}clear(){this.queue.clear()}moveCharOnPath(e){let t=this.queue.peek();if(!t)return;let i=t.command,n=t.config;if(si(i)&&(i=this.tilemap.getTilePosInDirection(this.character.getNextTilePos(),i)),n.skipInvalidPositions){if(i=this.getNextValidPosition(),!i){this.finishInvalidNextPos(i);return}}else if(!this.isNeighborPos(i)){this.finishInvalidNextPos(i);return}if(this.character.isBlockingDirection(Ue(this.character.getNextTilePos().position,i.position))){if(n.pathBlockedStrategy==="STOP")this.finishPathBlocked(i);else if(n.pathBlockedStrategy==="SKIP"){this.queue.dequeue(),this.moveCharOnPath(e);return}else n.pathBlockedStrategy==="WAIT"&&n.pathBlockedWaitTimeoutMs>-1&&(this.pathBlockedWaitElapsed+=e,this.pathBlockedWaitElapsed>=n.pathBlockedWaitTimeoutMs&&this.finishBlockedWaitTimeout(i,n.pathBlockedWaitTimeoutMs));return}this.pathBlockedWaitElapsed=0,this.queue.dequeue(),this.character.move(this.getDir(this.character.getNextTilePos().position,i.position)),this.isLastMovement()&&this.finish("SUCCESS","",i)}getNextValidPosition(){for(;this.queue.size()>0;){let e=this.queue.peek()?.command;if(si(e)&&(e=this.tilemap.getTilePosInDirection(this.character.getNextTilePos(),e)),e&&this.isNeighborPos(e))return e;this.queue.dequeue()}}isLastMovement(){return this.queue.size()===0}isNeighborPos(e){let t=this.distanceUtils.distance(this.character.getNextTilePos().position,e.position)===1,i=this.tilemap.getTransition(e.position,this.character.getNextTilePos().layer);if(this.character.getNextTilePos().layer!==e.layer)return t&&i===e.layer;let n=i!==void 0&&i!==e.layer;return t&&!n}finishMovementTerminated(){this.finish("MOVEMENT_TERMINATED","New automatic movement has been set to character.")}finishInvalidNextPos(e){e?this.finish("INVALID_NEXT_POS",`Position ${this.posToStr(e)} is not reachable from ${this.posToStr(this.character.getNextTilePos())}.`):this.finish("INVALID_NEXT_POS",`No enqueued position is reachable from ${this.posToStr(this.character.getNextTilePos())}.`)}finishPathBlocked(e){this.finish("PATH_BLOCKED",`Position ${this.posToStr(e)} is blocked.`)}finishBlockedWaitTimeout(e,t){this.finish("PATH_BLOCKED_WAIT_TIMEOUT",`Position ${this.posToStr(e)} is blocked and the wait timeout of ${t} ms has been exceeded.`)}finish(e,t="",i=this.character.getNextTilePos()){this.queue=new $r,this.finished$.next({position:i.position,result:e,description:t,layer:i.layer})}getDir(e,t){return this.tilemap.fromMapDirection(Ue(e,t))}posToStr(e){return`(${e.position.x}, ${e.position.y}, ${e.layer})`}};var Rs=class{constructor(e=!0){this.isCreatedInternal=!1;e&&console.log(`Using GridEngine v${qh}`)}getCharLayer(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getTilePos().layer}getTransition(e,t){return this.initGuard(),this.gridTilemap?.getTransition(new E(e),t)}setTransition(e,t,i){return this.initGuard(),this.gridTilemap?.setTransition(new E(e),t,i)}create(e,t){this.isCreatedInternal=!0,this.gridCharacters=new Map;let i=this.setConfigDefaults(t);this.config=i,this.movementStopped$=new or.Subject,this.movementStarted$=new or.Subject,this.directionChanged$=new or.Subject,this.positionChangeStarted$=new or.Subject,this.positionChangeFinished$=new or.Subject,this.queueMovementFinished$=new or.Subject,this.charRemoved$=new or.Subject,this.charAdded$=new or.Subject,this.gridTilemap=new jh(e,this.config.collisionTilePropertyName,this.config.characterCollisionStrategy,this.recordToMap(this.config.collisionGroupRelation),this.config.cacheTileCollisions),this.addCharacters()}recordToMap(e){return e?new Map(Object.entries(e).map(([i,n])=>[i,new Set(n)])):void 0}getPosition(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getTilePos().position}move(e,t){this.moveChar(e,t)}moveRandomly(e,t=0,i=-1){this.initGuard();let n=this.gridCharacters?.get(e);if(!n)throw this.createCharUnknownErr(e);let s=new Eh(n,t,i);n.setMovement(s)}getMovement(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);let i=t.getMovement();return i?i.getInfo():{type:"None"}}moveTo(e,t,i){let n=this.assembleMoveToConfig(i);this.initGuard();let s=this.gridCharacters?.get(e);if(!s)throw this.createCharUnknownErr(e);if(!this.gridTilemap)throw this.createUninitializedErr();let u=new Io(s,this.gridTilemap,{position:new E(t),layer:i?.targetLayer||s.getNextTilePos().layer},{distance:0,config:n});return s.setMovement(u),u.init(),u.finishedObs().pipe((0,Ye.map)(l=>({charId:e,position:l.position,result:l.result,description:l.description,layer:l.layer})))}stopMovement(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.setMovement(void 0)}setSpeed(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setSpeed(t)}getSpeed(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getSpeed()}collidesWithTiles(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.collidesWithTiles()}update(e,t){if(this.isCreatedInternal&&this.gridCharacters)for(let[i,n]of this.gridCharacters)n.update(t);this.gridTilemap?.invalidateFrameCache()}addCharacter(e){if(!this.gridTilemap)throw this.createUninitializedErr();if(!this.config)throw this.createUninitializedErr();let t={speed:e.speed||4,tilemap:this.gridTilemap,collidesWithTiles:!0,collisionGroups:["geDefault"],ignoreCollisionGroups:[],charLayer:e.charLayer,facingDirection:e.facingDirection,labels:e.labels,numberOfDirections:e.numberOfDirections??this.config.numberOfDirections,tileWidth:e.tileWidth,tileHeight:e.tileHeight};typeof e.collides=="boolean"?e.collides===!1&&(t.collidesWithTiles=!1,t.collisionGroups=[]):e.collides!==void 0&&(e.collides.collidesWithTiles===!1&&(t.collidesWithTiles=!1),e.collides.collisionGroups&&(t.collisionGroups=e.collides.collisionGroups),e.collides.ignoreCollisionGroups&&(t.ignoreCollisionGroups=e.collides.ignoreCollisionGroups),t.ignoreMissingTiles=e.collides?.ignoreMissingTiles??!1);let i=new oh(e.id,t);e.startPosition&&i.setTilePosition({position:new E(e.startPosition),layer:i.getTilePos().layer}),this.gridCharacters?.set(e.id,i),this.gridTilemap.addCharacter(i);let n=i.getId();i.movementStopped().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.movementStopped$?.next({charId:n,direction:s})}),i.movementStarted().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.movementStarted$?.next({charId:n,direction:s})}),i.directionChanged().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.directionChanged$?.next({charId:n,direction:s})}),i.positionChangeStarted().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.positionChangeStarted$?.next({charId:n,...s})}),i.positionChangeFinished().pipe((0,Ye.takeUntil)(this.charRemoved(n))).subscribe(s=>{this.positionChangeFinished$?.next({charId:n,...s})}),this.charAdded$?.next(n)}hasCharacter(e){return this.initGuard(),!!this.gridCharacters?.has(e)}removeCharacter(e){if(this.initGuard(),!this.gridCharacters?.get(e))throw this.createCharUnknownErr(e);this.gridTilemap?.removeCharacter(e),this.gridCharacters?.delete(e),this.charRemoved$?.next(e)}removeAllCharacters(){if(this.initGuard(),!!this.gridCharacters)for(let e of this.gridCharacters.keys())this.removeCharacter(e)}getAllCharacters(e){if(this.initGuard(),!this.gridCharacters)return[];let t=[...this.gridCharacters.values()];return(e?F1(t,e):t).map(n=>n.getId())}getLabels(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getLabels()}addLabels(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.addLabels(t)}removeLabels(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.removeLabels(t)}clearLabels(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.clearLabels()}follow(e,t,i,n){let s;i===void 0?s={distance:0,closestPointIfBlocked:!1}:typeof i=="number"?(s={distance:i,closestPointIfBlocked:!1},n&&(s.closestPointIfBlocked=!0)):s=i,this.initGuard();let u=this.gridCharacters?.get(e),l=this.gridCharacters?.get(t);if(!u)throw this.createCharUnknownErr(e);if(!l)throw this.createCharUnknownErr(t);if(!this.gridTilemap)throw this.createUninitializedErr();let f=new Ah(u,this.gridTilemap,l,{distance:s.distance??0,noPathFoundStrategy:s.closestPointIfBlocked?"CLOSEST_REACHABLE":"STOP",maxPathLength:s.maxPathLength??1/0,shortestPathAlgorithm:s.algorithm??"BIDIRECTIONAL_SEARCH",ignoreLayers:!!s.ignoreLayers,facingDirection:s.facingDirection??"none",considerCosts:s.considerCosts??!1,isPositionAllowedFn:s.isPositionAllowedFn??(()=>!0),ignoredChars:s.ignoredChars??[]});u.setMovement(f),f.init()}isMoving(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.isMoving()}getFacingDirection(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getFacingDirection()}getFacingPosition(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);let i=t.getFacingPosition();return{x:i.x,y:i.y}}turnTowards(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);return i.turnTowards(t)}getCharactersAt(e,t){if(this.initGuard(),!this.gridTilemap)return[];let i=this.gridTilemap.getCharactersAt(new E(e),t);return Array.from(i).map(n=>n.getId())}setPosition(e,t,i){this.initGuard();let n=this.gridCharacters?.get(e);if(!n)throw this.createCharUnknownErr(e);i||n.setTilePosition({position:new E(t),layer:n.getTilePos().layer}),n.setTilePosition({position:new E(t),layer:i})}isBlocked(e,t,i=["geDefault"]){this.initGuard();let n=new E(e);return!!(this.gridTilemap?.hasBlockingTile(n,t)||this.gridTilemap?.hasBlockingChar(n,t,i))}isTileBlocked(e,t){return this.initGuard(),!!this.gridTilemap?.hasBlockingTile(new E(e),t)}getCollisionGroups(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getCollisionGroups()||[]}setCollisionGroups(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setCollisionGroups(t)}getIgnoreCollisionGroups(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getIgnoreCollisionGroups()||[]}setIgnoreCollisionGroups(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setIgnoreCollisionGroups(t)}getTilePosInDirection(e,t,i){if(!this.gridTilemap)throw this.createUninitializedErr();let n=this.gridTilemap.getTilePosInDirection({position:new E(e),layer:t},i);return{position:n.position.toPosition(),charLayer:n.layer}}findShortestPath(e,t,i={}){if(!this.gridTilemap)throw this.createUninitializedErr();let n=i.shortestPathAlgorithm||"BFS";i.considerCosts&&n!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${n}'. It can only be used with A* algorithm.`);let s=i.pathWidth!==void 0&&i.pathWidth!==1,u=i.pathHeight!==void 0&&i.pathHeight!==1;(s||u)&&n==="JPS"&&console.warn("GridEngine: Pathfinding options 'pathWidth' and 'pathHeight' > 1 cannot be used with algorithm 'JPS'.");let f=new Do(this.gridTilemap).findShortestPath(G.toInternal(e),G.toInternal(t),{...i,shortestPathAlgorithm:n});return{path:f.path.map(G.fromInternal),closestToTarget:f.closestToTarget?G.fromInternal(f.closestToTarget):void 0,reachedMaxPathLength:!1,steps:f.steps}}steppedOn(e,t,i){return this.positionChangeFinished().pipe((0,Ye.filter)(n=>e.includes(n.charId)&&t.some(s=>s.x===n.enterTile.x&&s.y===n.enterTile.y)&&(i===void 0||i.includes(n.enterLayer))))}characterShifted(){if(!this.charAdded$||!this.charRemoved$)throw this.createUninitializedErr();return this.charAdded$.pipe((0,Ye.map)(e=>({charId:e,action:"ADDED"})),(0,Ye.mergeWith)(this.charRemoved$.pipe((0,Ye.map)(e=>({charId:e,action:"REMOVED"})))))}movementStarted(){if(!this.movementStarted$)throw this.createUninitializedErr();return this.movementStarted$}movementStopped(){if(!this.movementStopped$)throw this.createUninitializedErr();return this.movementStopped$}directionChanged(){if(!this.directionChanged$)throw this.createUninitializedErr();return this.directionChanged$}positionChangeStarted(){if(!this.positionChangeStarted$)throw this.createUninitializedErr();return this.positionChangeStarted$}positionChangeFinished(){if(!this.positionChangeFinished$)throw this.createUninitializedErr();return this.positionChangeFinished$}getMovementProgress(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getMovementProgress()}rebuildTileCollisionCache(e,t,i,n){this.gridTilemap?.rebuildTileCollisionCache(new Fi(e,t,i,n))}addQueueMovements(e,t,i){this.initGuard();let n=this.gridCharacters?.get(e);if(!n)throw this.createCharUnknownErr(e);if(!this.gridTilemap)throw this.createUninitializedErr();let s;n?.getMovement()?.getInfo().type==="Queue"?s=n.getMovement():(s=new kh(n,this.gridTilemap),n.setMovement(s),s.init(),s.finished().pipe((0,Ye.takeUntil)((0,or.merge)(this.charRemoved(e),n.autoMovementSet()))).subscribe(u=>{this.queueMovementFinished$?.next({charId:e,...u})})),s.enqueue(t.map(u=>si(u)?u:{position:new E(u.position),layer:u.charLayer}),i)}queueMovementFinished(){if(!this.queueMovementFinished$)throw this.createUninitializedErr();return this.queueMovementFinished$}getEnqueuedMovements(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getMovement()?.getInfo().type==="Queue"?t.getMovement().peekAll().map(n=>({command:si(n.command)?n.command:G.fromInternal(n.command),config:n.config})):[]}clearEnqueuedMovements(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.getMovement()?.getInfo().type==="Queue"&&t.getMovement().clear()}getTileCost(e,t,i){return this.initGuard(),this.gridTilemap?.getTileCosts({position:new E(e),layer:t},i)??1}getState(){let e=[];if(this.gridCharacters)for(let[t,i]of this.gridCharacters.entries())e.push({id:t,position:G.fromInternal(i.getTilePos()),facingDirection:i.getFacingDirection(),speed:i.getSpeed(),labels:i.getLabels(),movementProgress:i.getMovementProgress(),collisionConfig:{collisionGroups:i.getCollisionGroups(),ignoreCollisionGroups:i.getIgnoreCollisionGroups(),collidesWithTiles:i.collidesWithTiles(),ignoreMissingTiles:i.getIgnoreMissingTiles()}});return{characters:e}}setState(e){if(this.gridCharacters)for(let t of e.characters){let i=this.gridCharacters.get(t.id);if(i){let n=i.getTilePos();G.equal(n,G.toInternal(t.position))||i.setTilePosition(G.toInternal(t.position)),i.setSpeed(t.speed),i.turnTowards(t.facingDirection),t.collisionConfig.collisionGroups&&i.setCollisionGroups(t.collisionConfig.collisionGroups),t.collisionConfig.collidesWithTiles!==void 0&&i.setCollidesWithTiles(t.collisionConfig.collidesWithTiles),t.collisionConfig.ignoreMissingTiles!==void 0&&i.setIgnoreMissingTiles(t.collisionConfig.ignoreMissingTiles),i.setMovementProgress(t.movementProgress),i.clearLabels(),i.addLabels(t.labels)}}}revertCurrentMovement(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.revertCurrentMovement()}isCurrentMovementReverted(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.isCurrentMovementReverted()}charRemoved(e){if(!this.charRemoved$)throw this.createUninitializedErr();return this.charRemoved$?.pipe((0,Ye.take)(1),(0,Ye.filter)(t=>t==e))}initGuard(){if(!this.isCreatedInternal)throw this.createUninitializedErr()}createUninitializedErr(){throw new Error("GridEngine not initialized. You need to call create() first.")}addCharacters(){this.config?.characters.forEach(e=>this.addCharacter(e))}moveChar(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);if(i.getNumberOfDirections()===4){if(!this.gridTilemap?.isIsometric()&&Yi(t)){console.warn(`GridEngine: Character '${e}' can't be moved '${t}' in 4 direction mode.`);return}else if(this.gridTilemap?.isIsometric()&&!Yi(t)){console.warn(`GridEngine: Character '${e}' can't be moved '${t}' in 4 direction isometric mode.`);return}}i.move(t)}createCharUnknownErr(e){return new Error(`Character unknown: ${e}`)}assembleMoveToConfig(e={}){let t={...e,noPathFoundStrategy:"STOP",pathBlockedStrategy:"WAIT"};return e?.noPathFoundStrategy&&(Object.values(cn).includes(e.noPathFoundStrategy)?t.noPathFoundStrategy=e.noPathFoundStrategy:console.warn(`GridEngine: Unknown NoPathFoundStrategy '${e.noPathFoundStrategy}'. Falling back to 'STOP'`)),e?.pathBlockedStrategy&&(Object.values(Po).includes(e.pathBlockedStrategy)?t.pathBlockedStrategy=e.pathBlockedStrategy:console.warn(`GridEngine: Unknown PathBlockedStrategy '${e.pathBlockedStrategy}'. Falling back to 'WAIT'`)),t}setConfigDefaults(e){return{collisionTilePropertyName:"ge_collide",numberOfDirections:4,characterCollisionStrategy:"BLOCK_TWO_TILES",cacheTileCollisions:!1,...e}}};var Rh=class extends Lo{constructor(t,i={}){super(t,i);this.jumpCache=new zh}findShortestPathImpl(t,i){return this.jumpCache=new zh,super.findShortestPathImpl(t,i)}getNeighborsInternal(t,i,n){if(!i||t.layer!==i.layer)return this.getNeighbors(t,n).map(l=>({p:l,dist:1}));let s=this.prune(i,t).map(l=>{let f=this.getTransition(l.position,t.layer);return{position:l.position,layer:f||t.layer}}),u=[];for(let l of s){let f=this.jump(t,l,n,1,Ue(t.position,l.position));f&&(f.dist=this.distance(t.position,f.p.position),u.push(f))}return u}getForced(t,i){let n=[],{topLeft:s,downLeft:u,top:l,bottom:f,topRight:p,downRight:v}=this.normalizedPositions(t,i),b=Ue(t.position,i.position);return Yi(b)?(this.blockOrTrans(t,s)&&(this.addIfNotBlocked(n,i,l),this.addIfNotBlocked(n,i,p),this.blockOrTrans(u,s)&&this.addIfNotBlocked(n,i,s)),this.blockOrTrans(t,u)&&(this.addIfNotBlocked(n,i,f),this.addIfNotBlocked(n,i,v),this.blockOrTrans(s,u)&&this.addIfNotBlocked(n,i,u)),this.blockOrTrans(s,l)&&this.addIfNotBlocked(n,i,l),this.blockOrTrans(u,f)&&this.addIfNotBlocked(n,i,f),this.blockOrTrans(s,p)&&this.addIfNotBlocked(n,i,p),this.blockOrTrans(u,v)&&this.addIfNotBlocked(n,i,v)):((this.blockOrTrans(t,l)||this.blockOrTrans(l,p))&&this.addIfNotBlocked(n,i,p),(this.blockOrTrans(t,f)||this.blockOrTrans(f,v))&&this.addIfNotBlocked(n,i,v),this.blockOrTrans(t,s)&&this.blockOrTrans(t,l)&&(this.addIfNotBlocked(n,i,l),this.addIfNotBlocked(n,i,s)),this.blockOrTrans(t,u)&&this.blockOrTrans(t,f)&&(this.addIfNotBlocked(n,i,f),this.addIfNotBlocked(n,i,u)),this.blockOrTrans(s,l)&&this.blockOrTrans(t,l)&&this.addIfNotBlocked(n,i,l),this.blockOrTrans(u,f)&&this.blockOrTrans(t,f)&&this.addIfNotBlocked(n,i,f)),n}hasForced(t,i){let{topLeft:n,downLeft:s,top:u,bottom:l,topRight:f,downRight:p}=this.normalizedPositions(t,i),v=Ue(t.position,i.position);if(Yi(v)){if(this.blockOrTrans(t,n)&&(!this.blockOrTrans(i,u)||!this.blockOrTrans(i,f)||this.blockOrTrans(s,n)&&!this.blockOrTrans(i,n))||this.blockOrTrans(t,s)&&(!this.blockOrTrans(i,l)||!this.blockOrTrans(i,p)||this.blockOrTrans(n,s)&&!this.blockOrTrans(i,s))||this.blockOrTrans(n,u)&&!this.blockOrTrans(i,u)||this.blockOrTrans(s,l)&&!this.blockOrTrans(i,l)||this.blockOrTrans(n,f)&&!this.blockOrTrans(i,f)||this.blockOrTrans(s,p)&&!this.blockOrTrans(i,p))return!0}else if((this.blockOrTrans(t,u)||this.blockOrTrans(u,f))&&!this.blockOrTrans(i,f)||(this.blockOrTrans(t,l)||this.blockOrTrans(l,p))&&!this.blockOrTrans(i,p)||this.blockOrTrans(t,n)&&this.blockOrTrans(t,u)&&(!this.blockOrTrans(i,u)||!this.blockOrTrans(i,n))||this.blockOrTrans(t,s)&&this.blockOrTrans(t,l)&&(!this.blockOrTrans(i,l)||!this.blockOrTrans(i,s))||this.blockOrTrans(n,u)&&this.blockOrTrans(t,u)&&!this.blockOrTrans(i,u)||this.blockOrTrans(s,l)&&this.blockOrTrans(t,l)&&!this.blockOrTrans(i,l))return!0;return!1}prune(t,i){let{top:n,right:s,topRight:u,downRight:l,bottom:f}=this.normalizedPositions(t,i),p=this.getForced(t,i),v=Ue(t.position,i.position);return Yi(v)?[n,s,u,l,f,...p]:[s,...p]}jump(t,i,n,s,u){let l=this.jumpCache.get(t,i);if(l!==null)return l;if(this.isBlocking(t,i)&&!(G.equal(i,n)&&this.options.ignoreBlockedTarget)){this.jumpCache.set(t,i,void 0);return}if(G.equal(i,n))return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0};if(s>=this.maxJumpSize)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0};if(this.getTransition(i.position,t.layer)!==void 0)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0};if(this.hasForced(t,i))return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0};if(this.updateClosestToTarget(i,n),u==="up-left"){if(this.jump(i,this.getTilePosInDir(i,"up"),n,s+1,"up")!==void 0)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0};if(this.jump(i,this.getTilePosInDir(i,"left"),n,s+1,"left")!==void 0)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0}}else if(u==="down-left"){if(this.jump(i,this.getTilePosInDir(i,"down"),n,s+1,"down")!==void 0)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0};if(this.jump(i,this.getTilePosInDir(i,"left"),n,s+1,"left")!==void 0)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0}}else if(u==="up-right"){if(this.jump(i,this.getTilePosInDir(i,"up"),n,s+1,"up")!==void 0)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0};if(this.jump(i,this.getTilePosInDir(i,"right"),n,s+1,"right")!==void 0)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0}}else if(u==="down-right"){if(this.jump(i,this.getTilePosInDir(i,"down"),n,s+1,"down")!==void 0)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0};if(this.jump(i,this.getTilePosInDir(i,"right"),n,s+1,"right")!==void 0)return this.jumpCache.set(t,i,{p:i,dist:0}),{p:i,dist:0}}let f=this.jump(i,this.getTilePosInDir(i,u),n,s+1,u);return this.jumpCache.set(t,i,f),f}normalizedPositions(t,i){return t.position.x<i.position.x&&t.position.y===i.position.y?{topLeft:{position:new E(i.position.x-1,i.position.y-1),layer:i.layer},downLeft:{position:new E(i.position.x-1,i.position.y+1),layer:i.layer},top:{position:new E(i.position.x,i.position.y-1),layer:i.layer},bottom:{position:new E(i.position.x,i.position.y+1),layer:i.layer},right:{position:new E(i.position.x+1,i.position.y),layer:i.layer},topRight:{position:new E(i.position.x+1,i.position.y-1),layer:i.layer},downRight:{position:new E(i.position.x+1,i.position.y+1),layer:i.layer}}:t.position.x>i.position.x&&t.position.y===i.position.y?{topLeft:{position:new E(i.position.x+1,i.position.y+1),layer:i.layer},downLeft:{position:new E(i.position.x+1,i.position.y-1),layer:i.layer},top:{position:new E(i.position.x,i.position.y+1),layer:i.layer},bottom:{position:new E(i.position.x,i.position.y-1),layer:i.layer},right:{position:new E(i.position.x-1,i.position.y),layer:i.layer},topRight:{position:new E(i.position.x-1,i.position.y+1),layer:i.layer},downRight:{position:new E(i.position.x-1,i.position.y-1),layer:i.layer}}:t.position.y<i.position.y&&t.position.x===i.position.x?{topLeft:{position:new E(i.position.x+1,i.position.y-1),layer:i.layer},downLeft:{position:new E(i.position.x-1,i.position.y-1),layer:i.layer},top:{position:new E(i.position.x+1,i.position.y),layer:i.layer},bottom:{position:new E(i.position.x-1,i.position.y),layer:i.layer},right:{position:new E(i.position.x,i.position.y+1),layer:i.layer},topRight:{position:new E(i.position.x+1,i.position.y+1),layer:i.layer},downRight:{position:new E(i.position.x-1,i.position.y+1),layer:i.layer}}:t.position.y>i.position.y&&t.position.x===i.position.x?{topLeft:{position:new E(i.position.x-1,i.position.y+1),layer:i.layer},downLeft:{position:new E(i.position.x+1,i.position.y+1),layer:i.layer},top:{position:new E(i.position.x-1,i.position.y),layer:i.layer},bottom:{position:new E(i.position.x+1,i.position.y),layer:i.layer},right:{position:new E(i.position.x,i.position.y-1),layer:i.layer},topRight:{position:new E(i.position.x-1,i.position.y-1),layer:i.layer},downRight:{position:new E(i.position.x+1,i.position.y-1),layer:i.layer}}:t.position.y<i.position.y&&t.position.x<i.position.x?{topLeft:{position:new E(i.position.x,i.position.y-1),layer:i.layer},downLeft:{position:new E(i.position.x-1,i.position.y),layer:i.layer},top:{position:new E(i.position.x+1,i.position.y-1),layer:i.layer},bottom:{position:new E(i.position.x-1,i.position.y+1),layer:i.layer},right:{position:new E(i.position.x+1,i.position.y+1),layer:i.layer},topRight:{position:new E(i.position.x+1,i.position.y),layer:i.layer},downRight:{position:new E(i.position.x,i.position.y+1),layer:i.layer}}:t.position.y<i.position.y&&t.position.x>i.position.x?{topLeft:{position:new E(i.position.x+1,i.position.y),layer:i.layer},downLeft:{position:new E(i.position.x,i.position.y-1),layer:i.layer},top:{position:new E(i.position.x+1,i.position.y+1),layer:i.layer},bottom:{position:new E(i.position.x-1,i.position.y-1),layer:i.layer},right:{position:new E(i.position.x-1,i.position.y+1),layer:i.layer},topRight:{position:new E(i.position.x,i.position.y+1),layer:i.layer},downRight:{position:new E(i.position.x-1,i.position.y),layer:i.layer}}:t.position.y>i.position.y&&t.position.x<i.position.x?{topLeft:{position:new E(i.position.x-1,i.position.y),layer:i.layer},downLeft:{position:new E(i.position.x,i.position.y+1),layer:i.layer},top:{position:new E(i.position.x-1,i.position.y-1),layer:i.layer},bottom:{position:new E(i.position.x+1,i.position.y+1),layer:i.layer},right:{position:new E(i.position.x+1,i.position.y-1),layer:i.layer},topRight:{position:new E(i.position.x,i.position.y-1),layer:i.layer},downRight:{position:new E(i.position.x+1,i.position.y),layer:i.layer}}:{topLeft:{position:new E(i.position.x,i.position.y+1),layer:i.layer},downLeft:{position:new E(i.position.x+1,i.position.y),layer:i.layer},top:{position:new E(i.position.x-1,i.position.y+1),layer:i.layer},bottom:{position:new E(i.position.x+1,i.position.y-1),layer:i.layer},right:{position:new E(i.position.x-1,i.position.y-1),layer:i.layer},topRight:{position:new E(i.position.x-1,i.position.y),layer:i.layer},downRight:{position:new E(i.position.x,i.position.y-1),layer:i.layer}}}},zh=class{constructor(){this.memo=new Map}set(e,t,i){let n=this.memo.get(e.position.x);n||(n=new Map,this.memo.set(e.position.x,n));let s=n.get(e.position.y);s||(s=new Map,n.set(e.position.y,s));let u=s.get(e.layer);u||(u=new Map,s.set(e.layer,u));let l=u.get(t.position.x);l||(l=new Map,u.set(t.position.x,l));let f=l.get(t.position.y);f||(f=new Map,l.set(t.position.y,f)),f.get(t.layer)||(i===void 0?f.set(t.layer,null):f.set(t.layer,i))}get(e,t){let i=this.memo.get(e.position.x);if(!i)return null;let n=i.get(e.position.y);if(!n)return null;let s=n.get(e.layer);if(!s)return null;let u=s.get(t.position.x);if(!u)return null;let l=u.get(t.position.y);if(!l)return null;let f=l.get(t.layer);return f===void 0?null:f===null?void 0:f}};var Do=class{constructor(e){this.gridTilemap=e}findShortestPath(e,t,i={}){return w4(i.shortestPathAlgorithm||"BIDIRECTIONAL_SEARCH",this.gridTilemap,i).findShortestPath(e,t)}};function w4(r,e,t){switch(r){case"BIDIRECTIONAL_SEARCH":return new mh(e,t);case"A_STAR":return new ph(e,t);case"JPS":return t.numberOfDirections===8?new Rh(e,t):new Lo(e,t)}return new wo(e,t)}var Dh=(f=>(f.SUCCESS="SUCCESS",f.NO_PATH_FOUND_MAX_RETRIES_EXCEEDED="NO_PATH_FOUND_MAX_RETRIES_EXCEEDED",f.PATH_BLOCKED_MAX_RETRIES_EXCEEDED="PATH_BLOCKED_MAX_RETRIES_EXCEEDED",f.PATH_BLOCKED="PATH_BLOCKED",f.NO_PATH_FOUND="NO_PATH_FOUND",f.PATH_BLOCKED_WAIT_TIMEOUT="PATH_BLOCKED_WAIT_TIMEOUT",f.MOVEMENT_TERMINATED="MOVEMENT_TERMINATED",f.MAX_PATH_LENGTH_REACHED="MAX_PATH_LENGTH_REACHED",f))(Dh||{}),Io=class{constructor(e,t,i,{config:n,ignoreBlockedTarget:s=!1,distance:u=0}={}){this.character=e;this.tilemap=t;this.targetPos=i;this.shortestPath=[];this.distOffset=0;this.posOnPath=0;this.stopped=!1;this.pathBlockedWaitElapsed=0;this.isPositionAllowed=()=>!0;this.shortestPathAlgorithm="BIDIRECTIONAL_SEARCH";this.maxPathLength=1/0;this.considerCosts=!1;this.ignoredChars=[];this.isBlocking=(e,t)=>e?new wo(this.tilemap,this.getPathfindingOptions()).isBlocking(this.character.getTilePos(),{position:e,layer:t}):!0;this.shortestPathAlgorithm=n?.algorithm??this.shortestPathAlgorithm,this.ignoreBlockedTarget=s,this.distance=u,this.noPathFoundStrategy=n?.noPathFoundStrategy||"STOP",this.pathBlockedStrategy=n?.pathBlockedStrategy||"WAIT",this.noPathFoundRetryable=new qs(n?.noPathFoundRetryBackoffMs||200,n?.noPathFoundMaxRetries||-1,()=>{this.stop("NO_PATH_FOUND_MAX_RETRIES_EXCEEDED")}),this.pathBlockedRetryable=new qs(n?.pathBlockedRetryBackoffMs||200,n?.pathBlockedMaxRetries||-1,()=>{this.stop("PATH_BLOCKED_MAX_RETRIES_EXCEEDED")}),n?.isPositionAllowedFn&&(this.isPositionAllowed=n.isPositionAllowedFn),n?.maxPathLength&&(this.maxPathLength=n.maxPathLength),this.alternativeTargets=n?.alternativeTargets,this.noPathFoundAlternativeTargetsFallbackStrategy=n?.noPathFoundAlternativeTargetsFallbackStrategy,n?.considerCosts&&this.shortestPathAlgorithm!=="A_STAR"&&console.warn(`GridEngine: Pathfinding option 'considerCosts' cannot be used with algorithm '${this.shortestPathAlgorithm}'. It can only be used with A* algorithm.`),this.shortestPathAlgorithm==="JPS"&&(this.character.getTileWidth()>1||this.character.getTileHeight()>1)&&console.warn("GridEngine: Pathfinding algorithm 'JPS' can only be used for characters with 'tileWidth' and 'tileHeight' of 1"),this.considerCosts=n?.considerCosts||!1,this.ignoreLayers=!!n?.ignoreLayers,this.distanceUtils=er.create(e.getNumberOfDirections()),this.pathBlockedWaitTimeoutMs=n?.pathBlockedWaitTimeoutMs||-1,this.ignoredChars=n?.ignoredChars??[],this.finished$=new Ro.Subject}init(){this.noPathFoundRetryable.reset(),this.pathBlockedRetryable.reset(),this.pathBlockedWaitElapsed=0,this.calcShortestPath(),this.character.autoMovementSet().pipe((0,Ro.filter)(e=>e!==this),(0,Ro.take)(1)).subscribe(()=>{this.stop("MOVEMENT_TERMINATED")})}setPathBlockedStrategy(e){this.pathBlockedStrategy=e}getPathBlockedStrategy(){return this.pathBlockedStrategy}getPathfindingOptions(){return{shortestPathAlgorithm:this.shortestPathAlgorithm,pathWidth:this.character.getTileWidth(),pathHeight:this.character.getTileHeight(),numberOfDirections:this.character.getNumberOfDirections(),isPositionAllowed:this.isPositionAllowed,collisionGroups:this.character.getCollisionGroups(),ignoredChars:[this.character.getId(),...this.ignoredChars],ignoreTiles:!this.character.collidesWithTiles(),ignoreMapBounds:this.character.getIgnoreMissingTiles(),ignoreBlockedTarget:this.ignoreBlockedTarget,maxPathLength:this.maxPathLength,ignoreLayers:this.ignoreLayers,considerCosts:this.considerCosts,calculateClosestToTarget:!0}}update(e){this.stopped||(this.noPathFound()&&(this.noPathFoundStrategy==="RETRY"?this.noPathFoundRetryable.retry(e,()=>this.calcShortestPath()):this.noPathFoundStrategy==="STOP"&&this.stop("NO_PATH_FOUND")),this.updatePosOnPath(),this.isBlocking(this.nextTileOnPath()?.position,this.character?.getNextTilePos().layer)?this.applyPathBlockedStrategy(e):this.pathBlockedWaitElapsed=0,this.updatePosOnPath(),this.hasArrived()?(this.stop("SUCCESS"),this.existsDistToTarget()&&this.turnTowardsTarget()):this.isBlocking(this.nextTileOnPath()?.position,this.character?.getNextTilePos().layer)||this.moveCharOnPath())}finishedObs(){return this.finished$}getInfo(){return{type:"Target",state:{pathAhead:this.shortestPath.slice(this.posOnPath).map(e=>G.fromInternal(e))},config:{algorithm:this.shortestPathAlgorithm,ignoreBlockedTarget:this.ignoreBlockedTarget,distance:this.distance,targetPos:G.fromInternal(this.targetPos),noPathFoundStrategy:this.noPathFoundStrategy,pathBlockedStrategy:this.pathBlockedStrategy,noPathFoundRetryBackoffMs:this.noPathFoundRetryable.getBackoffMs(),noPathFoundMaxRetries:this.noPathFoundRetryable.getMaxRetries()}}}resultToReason(e){switch(e){case"SUCCESS":return"Successfully arrived.";case"MOVEMENT_TERMINATED":return"Movement of character has been replaced before destination was reached.";case"PATH_BLOCKED":return"PathBlockedStrategy STOP: Path blocked.";case"NO_PATH_FOUND_MAX_RETRIES_EXCEEDED":return`NoPathFoundStrategy RETRY: Maximum retries of ${this.noPathFoundRetryable.getMaxRetries()} exceeded.`;case"NO_PATH_FOUND":return"NoPathFoundStrategy STOP: No path found.";case"PATH_BLOCKED_MAX_RETRIES_EXCEEDED":return`PathBlockedStrategy RETRY: Maximum retries of ${this.pathBlockedRetryable.getMaxRetries()} exceeded.`;case"PATH_BLOCKED_WAIT_TIMEOUT":return`PathBlockedStrategy WAIT: Wait timeout of ${this.pathBlockedWaitTimeoutMs}ms exceeded.`}}applyPathBlockedStrategy(e){this.pathBlockedStrategy==="RETRY"?this.pathBlockedRetryable.retry(e,()=>{let t=this.getShortestPath();t.path.length>0&&this.calcShortestPath(t)}):this.pathBlockedStrategy==="STOP"?this.stop("PATH_BLOCKED"):this.pathBlockedStrategy==="WAIT"&&this.pathBlockedWaitTimeoutMs>-1&&(this.pathBlockedWaitElapsed+=e,this.pathBlockedWaitElapsed>=this.pathBlockedWaitTimeoutMs&&this.stop("PATH_BLOCKED_WAIT_TIMEOUT"))}moveCharOnPath(){let e=this.nextTileOnPath();if(!e)return;let t=this.getDir(this.character.getNextTilePos().position,e.position);this.character.move(t)}nextTileOnPath(){return this.shortestPath[this.posOnPath+1]}stop(e){this.finished$.next({position:this.character.getTilePos().position,result:e,description:this.resultToReason(e),layer:this.character.getTilePos().layer}),this.finished$.complete(),this.stopped=!0}turnTowardsTarget(){let e=this.shortestPath[this.posOnPath+1],t=this.getDir(this.character.getNextTilePos().position,e.position);this.character.turnTowards(t)}existsDistToTarget(){return this.posOnPath<this.shortestPath.length-1}hasArrived(){return!this.noPathFound()&&this.posOnPath+Math.max(0,this.distance-this.distOffset)>=this.shortestPath.length-1}updatePosOnPath(){let e=this.shortestPath[this.posOnPath];for(;this.posOnPath<this.shortestPath.length-1&&(this.character.getNextTilePos().position.x!=e.position.x||this.character.getNextTilePos().position.y!=e.position.y);)this.posOnPath++,e=this.shortestPath[this.posOnPath]}noPathFound(){return this.shortestPath.length===0}calcShortestPath(e){e=e??this.getShortestPath(),this.posOnPath=0,this.shortestPath=e.path,this.distOffset=e.distOffset}getShortestPath(){let e=new Do(this.tilemap),{path:t,closestToTarget:i}=e.findShortestPath(this.character.getNextTilePos(),this.targetPos,this.getPathfindingOptions());if(t.length==0){if(this.noPathFoundStrategy==="CLOSEST_REACHABLE"){if(!i)throw Error("ClosestToTarget should never be undefined in TargetMovement.");return this.pathToAlternativeTarget(i,e)}else if(this.noPathFoundStrategy==="ALTERNATIVE_TARGETS"){for(let s of this.alternativeTargets??[]){let{path:u,distOffset:l}=this.pathToAlternativeTarget(G.toInternal(s),e);if(u.length>0)return{path:u,distOffset:l}}return this.noPathFoundStrategy=this.noPathFoundAlternativeTargetsFallbackStrategy||"STOP",this.getShortestPath()}}return{path:t,distOffset:0}}pathToAlternativeTarget(e,t){let i=t.findShortestPath(this.character.getNextTilePos(),e,this.getPathfindingOptions()).path,n=this.distanceUtils.distance(e.position,this.targetPos.position);return{path:i,distOffset:n}}getDir(e,t){return this.tilemap.fromMapDirection(this.distanceUtils.direction(e,t))}};var O4=Object.create,N1=Object.defineProperty,T4=Object.getOwnPropertyDescriptor,S4=Object.getOwnPropertyNames,C4=Object.getPrototypeOf,A4=Object.prototype.hasOwnProperty,E4=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),q4=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of S4(e))!A4.call(r,n)&&n!==t&&N1(r,n,{get:()=>e[n],enumerable:!(i=T4(e,n))||i.enumerable});return r},Pm=(r,e,t)=>(t=r!=null?O4(C4(r)):{},q4(e||!r||!r.__esModule?N1(t,"default",{value:r,enumerable:!0}):t,r)),wm=E4((r,e)=>{(function(){var t,i="4.17.21",n=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",p=500,v="__lodash_placeholder__",b=1,T=2,S=4,q=1,M=2,j=1,D=2,V=4,Y=8,ie=16,pe=32,ke=64,pt=128,Wo=256,Wh=512,B1=30,H1="...",$1=800,Y1=16,Sm=1,Q1=2,K1=3,Ri=1/0,Qr=9007199254740991,X1=17976931348623157e292,Ws=NaN,sr=4294967295,J1=sr-1,Z1=sr>>>1,eO=[["ary",pt],["bind",j],["bindKey",D],["curry",Y],["curryRight",ie],["flip",Wh],["partial",pe],["partialRight",ke],["rearg",Wo]],vn="[object Arguments]",Us="[object Array]",tO="[object AsyncFunction]",Uo="[object Boolean]",Go="[object Date]",rO="[object DOMException]",Gs="[object Error]",Bs="[object Function]",Cm="[object GeneratorFunction]",Bt="[object Map]",Bo="[object Number]",iO="[object Null]",qr="[object Object]",Am="[object Promise]",nO="[object Proxy]",Ho="[object RegExp]",Ht="[object Set]",$o="[object String]",Hs="[object Symbol]",oO="[object Undefined]",Yo="[object WeakMap]",sO="[object WeakSet]",Qo="[object ArrayBuffer]",mn="[object DataView]",Uh="[object Float32Array]",Gh="[object Float64Array]",Bh="[object Int8Array]",Hh="[object Int16Array]",$h="[object Int32Array]",Yh="[object Uint8Array]",Qh="[object Uint8ClampedArray]",Kh="[object Uint16Array]",Xh="[object Uint32Array]",aO=/\b__p \+= '';/g,uO=/\b(__p \+=) '' \+/g,cO=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Em=/&(?:amp|lt|gt|quot|#39);/g,qm=/[&<>"']/g,lO=RegExp(Em.source),hO=RegExp(qm.source),fO=/<%-([\s\S]+?)%>/g,pO=/<%([\s\S]+?)%>/g,xm=/<%=([\s\S]+?)%>/g,dO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vO=/^\w*$/,mO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jh=/[\\^$.*+?()[\]{}|]/g,yO=RegExp(Jh.source),Zh=/^\s+/,gO=/\s/,bO=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_O=/\{\n\/\* \[wrapped with (.+)\] \*/,PO=/,? & /,wO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,OO=/[()=,{}\[\]\/\s]/,TO=/\\(\\)?/g,SO=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Mm=/\w*$/,CO=/^[-+]0x[0-9a-f]+$/i,AO=/^0b[01]+$/i,EO=/^\[object .+?Constructor\]$/,qO=/^0o[0-7]+$/i,xO=/^(?:0|[1-9]\d*)$/,MO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$s=/($^)/,LO=/['\n\r\u2028\u2029\\]/g,Ys="\\ud800-\\udfff",jO="\\u0300-\\u036f",IO="\\ufe20-\\ufe2f",kO="\\u20d0-\\u20ff",Lm=jO+IO+kO,jm="\\u2700-\\u27bf",Im="a-z\\xdf-\\xf6\\xf8-\\xff",FO="\\xac\\xb1\\xd7\\xf7",DO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",RO="\\u2000-\\u206f",zO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",km="A-Z\\xc0-\\xd6\\xd8-\\xde",Fm="\\ufe0e\\ufe0f",Dm=FO+DO+RO+zO,ef="['\u2019]",VO="["+Ys+"]",Rm="["+Dm+"]",Qs="["+Lm+"]",zm="\\d+",NO="["+jm+"]",Vm="["+Im+"]",Nm="[^"+Ys+Dm+zm+jm+Im+km+"]",tf="\\ud83c[\\udffb-\\udfff]",WO="(?:"+Qs+"|"+tf+")",Wm="[^"+Ys+"]",rf="(?:\\ud83c[\\udde6-\\uddff]){2}",nf="[\\ud800-\\udbff][\\udc00-\\udfff]",yn="["+km+"]",Um="\\u200d",Gm="(?:"+Vm+"|"+Nm+")",UO="(?:"+yn+"|"+Nm+")",Bm="(?:"+ef+"(?:d|ll|m|re|s|t|ve))?",Hm="(?:"+ef+"(?:D|LL|M|RE|S|T|VE))?",$m=WO+"?",Ym="["+Fm+"]?",GO="(?:"+Um+"(?:"+[Wm,rf,nf].join("|")+")"+Ym+$m+")*",BO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",HO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qm=Ym+$m+GO,$O="(?:"+[NO,rf,nf].join("|")+")"+Qm,YO="(?:"+[Wm+Qs+"?",Qs,rf,nf,VO].join("|")+")",QO=RegExp(ef,"g"),KO=RegExp(Qs,"g"),of=RegExp(tf+"(?="+tf+")|"+YO+Qm,"g"),XO=RegExp([yn+"?"+Vm+"+"+Bm+"(?="+[Rm,yn,"$"].join("|")+")",UO+"+"+Hm+"(?="+[Rm,yn+Gm,"$"].join("|")+")",yn+"?"+Gm+"+"+Bm,yn+"+"+Hm,HO,BO,zm,$O].join("|"),"g"),JO=RegExp("["+Um+Ys+Lm+Fm+"]"),ZO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eT=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tT=-1,ye={};ye[Uh]=ye[Gh]=ye[Bh]=ye[Hh]=ye[$h]=ye[Yh]=ye[Qh]=ye[Kh]=ye[Xh]=!0,ye[vn]=ye[Us]=ye[Qo]=ye[Uo]=ye[mn]=ye[Go]=ye[Gs]=ye[Bs]=ye[Bt]=ye[Bo]=ye[qr]=ye[Ho]=ye[Ht]=ye[$o]=ye[Yo]=!1;var ve={};ve[vn]=ve[Us]=ve[Qo]=ve[mn]=ve[Uo]=ve[Go]=ve[Uh]=ve[Gh]=ve[Bh]=ve[Hh]=ve[$h]=ve[Bt]=ve[Bo]=ve[qr]=ve[Ho]=ve[Ht]=ve[$o]=ve[Hs]=ve[Yh]=ve[Qh]=ve[Kh]=ve[Xh]=!0,ve[Gs]=ve[Bs]=ve[Yo]=!1;var rT={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},iT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nT={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},oT={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sT=parseFloat,aT=parseInt,Km=typeof global=="object"&&global&&global.Object===Object&&global,uT=typeof self=="object"&&self&&self.Object===Object&&self,Ne=Km||uT||Function("return this")(),sf=typeof r=="object"&&r&&!r.nodeType&&r,zi=sf&&typeof e=="object"&&e&&!e.nodeType&&e,Xm=zi&&zi.exports===sf,af=Xm&&Km.process,kt=function(){try{var C=zi&&zi.require&&zi.require("util").types;return C||af&&af.binding&&af.binding("util")}catch{}}(),Jm=kt&&kt.isArrayBuffer,Zm=kt&&kt.isDate,ey=kt&&kt.isMap,ty=kt&&kt.isRegExp,ry=kt&&kt.isSet,iy=kt&&kt.isTypedArray;function Tt(C,L,x){switch(x.length){case 0:return C.call(L);case 1:return C.call(L,x[0]);case 2:return C.call(L,x[0],x[1]);case 3:return C.call(L,x[0],x[1],x[2])}return C.apply(L,x)}function cT(C,L,x,N){for(var Q=-1,ae=C==null?0:C.length;++Q<ae;){var Fe=C[Q];L(N,Fe,x(Fe),C)}return N}function Ft(C,L){for(var x=-1,N=C==null?0:C.length;++x<N&&L(C[x],x,C)!==!1;);return C}function lT(C,L){for(var x=C==null?0:C.length;x--&&L(C[x],x,C)!==!1;);return C}function ny(C,L){for(var x=-1,N=C==null?0:C.length;++x<N;)if(!L(C[x],x,C))return!1;return!0}function Kr(C,L){for(var x=-1,N=C==null?0:C.length,Q=0,ae=[];++x<N;){var Fe=C[x];L(Fe,x,C)&&(ae[Q++]=Fe)}return ae}function Ks(C,L){var x=C==null?0:C.length;return!!x&&gn(C,L,0)>-1}function uf(C,L,x){for(var N=-1,Q=C==null?0:C.length;++N<Q;)if(x(L,C[N]))return!0;return!1}function ge(C,L){for(var x=-1,N=C==null?0:C.length,Q=Array(N);++x<N;)Q[x]=L(C[x],x,C);return Q}function Xr(C,L){for(var x=-1,N=L.length,Q=C.length;++x<N;)C[Q+x]=L[x];return C}function cf(C,L,x,N){var Q=-1,ae=C==null?0:C.length;for(N&&ae&&(x=C[++Q]);++Q<ae;)x=L(x,C[Q],Q,C);return x}function hT(C,L,x,N){var Q=C==null?0:C.length;for(N&&Q&&(x=C[--Q]);Q--;)x=L(x,C[Q],Q,C);return x}function lf(C,L){for(var x=-1,N=C==null?0:C.length;++x<N;)if(L(C[x],x,C))return!0;return!1}var fT=hf("length");function pT(C){return C.split("")}function dT(C){return C.match(wO)||[]}function oy(C,L,x){var N;return x(C,function(Q,ae,Fe){if(L(Q,ae,Fe))return N=ae,!1}),N}function Xs(C,L,x,N){for(var Q=C.length,ae=x+(N?1:-1);N?ae--:++ae<Q;)if(L(C[ae],ae,C))return ae;return-1}function gn(C,L,x){return L===L?CT(C,L,x):Xs(C,sy,x)}function vT(C,L,x,N){for(var Q=x-1,ae=C.length;++Q<ae;)if(N(C[Q],L))return Q;return-1}function sy(C){return C!==C}function ay(C,L){var x=C==null?0:C.length;return x?pf(C,L)/x:Ws}function hf(C){return function(L){return L==null?t:L[C]}}function ff(C){return function(L){return C==null?t:C[L]}}function uy(C,L,x,N,Q){return Q(C,function(ae,Fe,de){x=N?(N=!1,ae):L(x,ae,Fe,de)}),x}function mT(C,L){var x=C.length;for(C.sort(L);x--;)C[x]=C[x].value;return C}function pf(C,L){for(var x,N=-1,Q=C.length;++N<Q;){var ae=L(C[N]);ae!==t&&(x=x===t?ae:x+ae)}return x}function df(C,L){for(var x=-1,N=Array(C);++x<C;)N[x]=L(x);return N}function yT(C,L){return ge(L,function(x){return[x,C[x]]})}function cy(C){return C&&C.slice(0,py(C)+1).replace(Zh,"")}function St(C){return function(L){return C(L)}}function vf(C,L){return ge(L,function(x){return C[x]})}function Ko(C,L){return C.has(L)}function ly(C,L){for(var x=-1,N=C.length;++x<N&&gn(L,C[x],0)>-1;);return x}function hy(C,L){for(var x=C.length;x--&&gn(L,C[x],0)>-1;);return x}function gT(C,L){for(var x=C.length,N=0;x--;)C[x]===L&&++N;return N}var bT=ff(rT),_T=ff(iT);function PT(C){return"\\"+oT[C]}function wT(C,L){return C==null?t:C[L]}function bn(C){return JO.test(C)}function OT(C){return ZO.test(C)}function TT(C){for(var L,x=[];!(L=C.next()).done;)x.push(L.value);return x}function mf(C){var L=-1,x=Array(C.size);return C.forEach(function(N,Q){x[++L]=[Q,N]}),x}function fy(C,L){return function(x){return C(L(x))}}function Jr(C,L){for(var x=-1,N=C.length,Q=0,ae=[];++x<N;){var Fe=C[x];(Fe===L||Fe===v)&&(C[x]=v,ae[Q++]=x)}return ae}function Js(C){var L=-1,x=Array(C.size);return C.forEach(function(N){x[++L]=N}),x}function ST(C){var L=-1,x=Array(C.size);return C.forEach(function(N){x[++L]=[N,N]}),x}function CT(C,L,x){for(var N=x-1,Q=C.length;++N<Q;)if(C[N]===L)return N;return-1}function AT(C,L,x){for(var N=x+1;N--;)if(C[N]===L)return N;return N}function _n(C){return bn(C)?qT(C):fT(C)}function $t(C){return bn(C)?xT(C):pT(C)}function py(C){for(var L=C.length;L--&&gO.test(C.charAt(L)););return L}var ET=ff(nT);function qT(C){for(var L=of.lastIndex=0;of.test(C);)++L;return L}function xT(C){return C.match(of)||[]}function MT(C){return C.match(XO)||[]}var LT=function C(L){L=L==null?Ne:Zr.defaults(Ne.Object(),L,Zr.pick(Ne,eT));var x=L.Array,N=L.Date,Q=L.Error,ae=L.Function,Fe=L.Math,de=L.Object,yf=L.RegExp,jT=L.String,Dt=L.TypeError,Zs=x.prototype,IT=ae.prototype,Pn=de.prototype,ea=L["__core-js_shared__"],ta=IT.toString,ce=Pn.hasOwnProperty,kT=0,dy=function(){var o=/[^.]+$/.exec(ea&&ea.keys&&ea.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),ra=Pn.toString,FT=ta.call(de),DT=Ne._,RT=yf("^"+ta.call(ce).replace(Jh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ia=Xm?L.Buffer:t,ei=L.Symbol,na=L.Uint8Array,vy=ia?ia.allocUnsafe:t,oa=fy(de.getPrototypeOf,de),my=de.create,yy=Pn.propertyIsEnumerable,sa=Zs.splice,gy=ei?ei.isConcatSpreadable:t,Xo=ei?ei.iterator:t,Vi=ei?ei.toStringTag:t,aa=function(){try{var o=Bi(de,"defineProperty");return o({},"",{}),o}catch{}}(),zT=L.clearTimeout!==Ne.clearTimeout&&L.clearTimeout,VT=N&&N.now!==Ne.Date.now&&N.now,NT=L.setTimeout!==Ne.setTimeout&&L.setTimeout,ua=Fe.ceil,ca=Fe.floor,gf=de.getOwnPropertySymbols,WT=ia?ia.isBuffer:t,by=L.isFinite,UT=Zs.join,GT=fy(de.keys,de),De=Fe.max,tt=Fe.min,BT=N.now,HT=L.parseInt,_y=Fe.random,$T=Zs.reverse,bf=Bi(L,"DataView"),Jo=Bi(L,"Map"),_f=Bi(L,"Promise"),wn=Bi(L,"Set"),Zo=Bi(L,"WeakMap"),es=Bi(de,"create"),la=Zo&&new Zo,On={},YT=Hi(bf),QT=Hi(Jo),KT=Hi(_f),XT=Hi(wn),JT=Hi(Zo),ha=ei?ei.prototype:t,ts=ha?ha.valueOf:t,Py=ha?ha.toString:t;function y(o){if(Se(o)&&!K(o)&&!(o instanceof re)){if(o instanceof Rt)return o;if(ce.call(o,"__wrapped__"))return wg(o)}return new Rt(o)}var Tn=function(){function o(){}return function(a){if(!we(a))return{};if(my)return my(a);o.prototype=a;var c=new o;return o.prototype=t,c}}();function fa(){}function Rt(o,a){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=t}y.templateSettings={escape:fO,evaluate:pO,interpolate:xm,variable:"",imports:{_:y}},y.prototype=fa.prototype,y.prototype.constructor=y,Rt.prototype=Tn(fa.prototype),Rt.prototype.constructor=Rt;function re(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=sr,this.__views__=[]}function ZT(){var o=new re(this.__wrapped__);return o.__actions__=dt(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=dt(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=dt(this.__views__),o}function eS(){if(this.__filtered__){var o=new re(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function tS(){var o=this.__wrapped__.value(),a=this.__dir__,c=K(o),h=a<0,d=c?o.length:0,g=pC(0,d,this.__views__),P=g.start,O=g.end,A=O-P,I=h?O:P-1,k=this.__iteratees__,F=k.length,R=0,W=tt(A,this.__takeCount__);if(!c||!h&&d==A&&W==A)return By(o,this.__actions__);var H=[];e:for(;A--&&R<W;){I+=a;for(var Z=-1,$=o[I];++Z<F;){var te=k[Z],ne=te.iteratee,Et=te.type,ut=ne($);if(Et==Q1)$=ut;else if(!ut){if(Et==Sm)continue e;break e}}H[R++]=$}return H}re.prototype=Tn(fa.prototype),re.prototype.constructor=re;function Ni(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var h=o[a];this.set(h[0],h[1])}}function rS(){this.__data__=es?es(null):{},this.size=0}function iS(o){var a=this.has(o)&&delete this.__data__[o];return this.size-=a?1:0,a}function nS(o){var a=this.__data__;if(es){var c=a[o];return c===f?t:c}return ce.call(a,o)?a[o]:t}function oS(o){var a=this.__data__;return es?a[o]!==t:ce.call(a,o)}function sS(o,a){var c=this.__data__;return this.size+=this.has(o)?0:1,c[o]=es&&a===t?f:a,this}Ni.prototype.clear=rS,Ni.prototype.delete=iS,Ni.prototype.get=nS,Ni.prototype.has=oS,Ni.prototype.set=sS;function xr(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var h=o[a];this.set(h[0],h[1])}}function aS(){this.__data__=[],this.size=0}function uS(o){var a=this.__data__,c=pa(a,o);if(c<0)return!1;var h=a.length-1;return c==h?a.pop():sa.call(a,c,1),--this.size,!0}function cS(o){var a=this.__data__,c=pa(a,o);return c<0?t:a[c][1]}function lS(o){return pa(this.__data__,o)>-1}function hS(o,a){var c=this.__data__,h=pa(c,o);return h<0?(++this.size,c.push([o,a])):c[h][1]=a,this}xr.prototype.clear=aS,xr.prototype.delete=uS,xr.prototype.get=cS,xr.prototype.has=lS,xr.prototype.set=hS;function Mr(o){var a=-1,c=o==null?0:o.length;for(this.clear();++a<c;){var h=o[a];this.set(h[0],h[1])}}function fS(){this.size=0,this.__data__={hash:new Ni,map:new(Jo||xr),string:new Ni}}function pS(o){var a=Sa(this,o).delete(o);return this.size-=a?1:0,a}function dS(o){return Sa(this,o).get(o)}function vS(o){return Sa(this,o).has(o)}function mS(o,a){var c=Sa(this,o),h=c.size;return c.set(o,a),this.size+=c.size==h?0:1,this}Mr.prototype.clear=fS,Mr.prototype.delete=pS,Mr.prototype.get=dS,Mr.prototype.has=vS,Mr.prototype.set=mS;function Wi(o){var a=-1,c=o==null?0:o.length;for(this.__data__=new Mr;++a<c;)this.add(o[a])}function yS(o){return this.__data__.set(o,f),this}function gS(o){return this.__data__.has(o)}Wi.prototype.add=Wi.prototype.push=yS,Wi.prototype.has=gS;function Yt(o){var a=this.__data__=new xr(o);this.size=a.size}function bS(){this.__data__=new xr,this.size=0}function _S(o){var a=this.__data__,c=a.delete(o);return this.size=a.size,c}function PS(o){return this.__data__.get(o)}function wS(o){return this.__data__.has(o)}function OS(o,a){var c=this.__data__;if(c instanceof xr){var h=c.__data__;if(!Jo||h.length<n-1)return h.push([o,a]),this.size=++c.size,this;c=this.__data__=new Mr(h)}return c.set(o,a),this.size=c.size,this}Yt.prototype.clear=bS,Yt.prototype.delete=_S,Yt.prototype.get=PS,Yt.prototype.has=wS,Yt.prototype.set=OS;function wy(o,a){var c=K(o),h=!c&&$i(o),d=!c&&!h&&oi(o),g=!c&&!h&&!d&&En(o),P=c||h||d||g,O=P?df(o.length,jT):[],A=O.length;for(var I in o)(a||ce.call(o,I))&&!(P&&(I=="length"||d&&(I=="offset"||I=="parent")||g&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||kr(I,A)))&&O.push(I);return O}function Oy(o){var a=o.length;return a?o[Mf(0,a-1)]:t}function TS(o,a){return Ca(dt(o),Ui(a,0,o.length))}function SS(o){return Ca(dt(o))}function Pf(o,a,c){(c!==t&&!Qt(o[a],c)||c===t&&!(a in o))&&Lr(o,a,c)}function rs(o,a,c){var h=o[a];(!(ce.call(o,a)&&Qt(h,c))||c===t&&!(a in o))&&Lr(o,a,c)}function pa(o,a){for(var c=o.length;c--;)if(Qt(o[c][0],a))return c;return-1}function CS(o,a,c,h){return ti(o,function(d,g,P){a(h,d,c(d),P)}),h}function Ty(o,a){return o&&ur(a,We(a),o)}function AS(o,a){return o&&ur(a,mt(a),o)}function Lr(o,a,c){a=="__proto__"&&aa?aa(o,a,{configurable:!0,enumerable:!0,value:c,writable:!0}):o[a]=c}function wf(o,a){for(var c=-1,h=a.length,d=x(h),g=o==null;++c<h;)d[c]=g?t:rp(o,a[c]);return d}function Ui(o,a,c){return o===o&&(c!==t&&(o=o<=c?o:c),a!==t&&(o=o>=a?o:a)),o}function zt(o,a,c,h,d,g){var P,O=a&b,A=a&T,I=a&S;if(c&&(P=d?c(o,h,d,g):c(o)),P!==t)return P;if(!we(o))return o;var k=K(o);if(k){if(P=vC(o),!O)return dt(o,P)}else{var F=rt(o),R=F==Bs||F==Cm;if(oi(o))return Yy(o,O);if(F==qr||F==vn||R&&!d){if(P=A||R?{}:pg(o),!O)return A?nC(o,AS(P,o)):iC(o,Ty(P,o))}else{if(!ve[F])return d?o:{};P=mC(o,F,O)}}g||(g=new Yt);var W=g.get(o);if(W)return W;g.set(o,P),Wg(o)?o.forEach(function($){P.add(zt($,a,c,$,o,g))}):Vg(o)&&o.forEach(function($,te){P.set(te,zt($,a,c,te,o,g))});var H=I?A?Wf:Nf:A?mt:We,Z=k?t:H(o);return Ft(Z||o,function($,te){Z&&(te=$,$=o[te]),rs(P,te,zt($,a,c,te,o,g))}),P}function ES(o){var a=We(o);return function(c){return Sy(c,o,a)}}function Sy(o,a,c){var h=c.length;if(o==null)return!h;for(o=de(o);h--;){var d=c[h],g=a[d],P=o[d];if(P===t&&!(d in o)||!g(P))return!1}return!0}function Cy(o,a,c){if(typeof o!="function")throw new Dt(u);return cs(function(){o.apply(t,c)},a)}function is(o,a,c,h){var d=-1,g=Ks,P=!0,O=o.length,A=[],I=a.length;if(!O)return A;c&&(a=ge(a,St(c))),h?(g=uf,P=!1):a.length>=n&&(g=Ko,P=!1,a=new Wi(a));e:for(;++d<O;){var k=o[d],F=c==null?k:c(k);if(k=h||k!==0?k:0,P&&F===F){for(var R=I;R--;)if(a[R]===F)continue e;A.push(k)}else g(a,F,h)||A.push(k)}return A}var ti=Zy(ar),Ay=Zy(Tf,!0);function qS(o,a){var c=!0;return ti(o,function(h,d,g){return c=!!a(h,d,g),c}),c}function da(o,a,c){for(var h=-1,d=o.length;++h<d;){var g=o[h],P=a(g);if(P!=null&&(O===t?P===P&&!At(P):c(P,O)))var O=P,A=g}return A}function xS(o,a,c,h){var d=o.length;for(c=J(c),c<0&&(c=-c>d?0:d+c),h=h===t||h>d?d:J(h),h<0&&(h+=d),h=c>h?0:Gg(h);c<h;)o[c++]=a;return o}function Ey(o,a){var c=[];return ti(o,function(h,d,g){a(h,d,g)&&c.push(h)}),c}function Qe(o,a,c,h,d){var g=-1,P=o.length;for(c||(c=gC),d||(d=[]);++g<P;){var O=o[g];a>0&&c(O)?a>1?Qe(O,a-1,c,h,d):Xr(d,O):h||(d[d.length]=O)}return d}var Of=eg(),qy=eg(!0);function ar(o,a){return o&&Of(o,a,We)}function Tf(o,a){return o&&qy(o,a,We)}function va(o,a){return Kr(a,function(c){return Fr(o[c])})}function Gi(o,a){a=ii(a,o);for(var c=0,h=a.length;o!=null&&c<h;)o=o[cr(a[c++])];return c&&c==h?o:t}function xy(o,a,c){var h=a(o);return K(o)?h:Xr(h,c(o))}function st(o){return o==null?o===t?oO:iO:Vi&&Vi in de(o)?fC(o):SC(o)}function Sf(o,a){return o>a}function MS(o,a){return o!=null&&ce.call(o,a)}function LS(o,a){return o!=null&&a in de(o)}function jS(o,a,c){return o>=tt(a,c)&&o<De(a,c)}function Cf(o,a,c){for(var h=c?uf:Ks,d=o[0].length,g=o.length,P=g,O=x(g),A=1/0,I=[];P--;){var k=o[P];P&&a&&(k=ge(k,St(a))),A=tt(k.length,A),O[P]=!c&&(a||d>=120&&k.length>=120)?new Wi(P&&k):t}k=o[0];var F=-1,R=O[0];e:for(;++F<d&&I.length<A;){var W=k[F],H=a?a(W):W;if(W=c||W!==0?W:0,!(R?Ko(R,H):h(I,H,c))){for(P=g;--P;){var Z=O[P];if(!(Z?Ko(Z,H):h(o[P],H,c)))continue e}R&&R.push(H),I.push(W)}}return I}function IS(o,a,c,h){return ar(o,function(d,g,P){a(h,c(d),g,P)}),h}function ns(o,a,c){a=ii(a,o),o=yg(o,a);var h=o==null?o:o[cr(Nt(a))];return h==null?t:Tt(h,o,c)}function My(o){return Se(o)&&st(o)==vn}function kS(o){return Se(o)&&st(o)==Qo}function FS(o){return Se(o)&&st(o)==Go}function os(o,a,c,h,d){return o===a?!0:o==null||a==null||!Se(o)&&!Se(a)?o!==o&&a!==a:DS(o,a,c,h,os,d)}function DS(o,a,c,h,d,g){var P=K(o),O=K(a),A=P?Us:rt(o),I=O?Us:rt(a);A=A==vn?qr:A,I=I==vn?qr:I;var k=A==qr,F=I==qr,R=A==I;if(R&&oi(o)){if(!oi(a))return!1;P=!0,k=!1}if(R&&!k)return g||(g=new Yt),P||En(o)?lg(o,a,c,h,d,g):lC(o,a,A,c,h,d,g);if(!(c&q)){var W=k&&ce.call(o,"__wrapped__"),H=F&&ce.call(a,"__wrapped__");if(W||H){var Z=W?o.value():o,$=H?a.value():a;return g||(g=new Yt),d(Z,$,c,h,g)}}return R?(g||(g=new Yt),hC(o,a,c,h,d,g)):!1}function RS(o){return Se(o)&&rt(o)==Bt}function Af(o,a,c,h){var d=c.length,g=d,P=!h;if(o==null)return!g;for(o=de(o);d--;){var O=c[d];if(P&&O[2]?O[1]!==o[O[0]]:!(O[0]in o))return!1}for(;++d<g;){O=c[d];var A=O[0],I=o[A],k=O[1];if(P&&O[2]){if(I===t&&!(A in o))return!1}else{var F=new Yt;if(h)var R=h(I,k,A,o,a,F);if(!(R===t?os(k,I,q|M,h,F):R))return!1}}return!0}function Ly(o){if(!we(o)||_C(o))return!1;var a=Fr(o)?RT:EO;return a.test(Hi(o))}function zS(o){return Se(o)&&st(o)==Ho}function VS(o){return Se(o)&&rt(o)==Ht}function NS(o){return Se(o)&&La(o.length)&&!!ye[st(o)]}function jy(o){return typeof o=="function"?o:o==null?yt:typeof o=="object"?K(o)?Fy(o[0],o[1]):ky(o):tb(o)}function Ef(o){if(!us(o))return GT(o);var a=[];for(var c in de(o))ce.call(o,c)&&c!="constructor"&&a.push(c);return a}function WS(o){if(!we(o))return TC(o);var a=us(o),c=[];for(var h in o)h=="constructor"&&(a||!ce.call(o,h))||c.push(h);return c}function qf(o,a){return o<a}function Iy(o,a){var c=-1,h=vt(o)?x(o.length):[];return ti(o,function(d,g,P){h[++c]=a(d,g,P)}),h}function ky(o){var a=Gf(o);return a.length==1&&a[0][2]?vg(a[0][0],a[0][1]):function(c){return c===o||Af(c,o,a)}}function Fy(o,a){return Hf(o)&&dg(a)?vg(cr(o),a):function(c){var h=rp(c,o);return h===t&&h===a?ip(c,o):os(a,h,q|M)}}function ma(o,a,c,h,d){o!==a&&Of(a,function(g,P){if(d||(d=new Yt),we(g))US(o,a,P,c,ma,h,d);else{var O=h?h(Yf(o,P),g,P+"",o,a,d):t;O===t&&(O=g),Pf(o,P,O)}},mt)}function US(o,a,c,h,d,g,P){var O=Yf(o,c),A=Yf(a,c),I=P.get(A);if(I){Pf(o,c,I);return}var k=g?g(O,A,c+"",o,a,P):t,F=k===t;if(F){var R=K(A),W=!R&&oi(A),H=!R&&!W&&En(A);k=A,R||W||H?K(O)?k=O:Ae(O)?k=dt(O):W?(F=!1,k=Yy(A,!0)):H?(F=!1,k=Qy(A,!0)):k=[]:ls(A)||$i(A)?(k=O,$i(O)?k=Bg(O):(!we(O)||Fr(O))&&(k=pg(A))):F=!1}F&&(P.set(A,k),d(k,A,h,g,P),P.delete(A)),Pf(o,c,k)}function Dy(o,a){var c=o.length;if(c)return a+=a<0?c:0,kr(a,c)?o[a]:t}function Ry(o,a,c){a.length?a=ge(a,function(g){return K(g)?function(P){return Gi(P,g.length===1?g[0]:g)}:g}):a=[yt];var h=-1;a=ge(a,St(B()));var d=Iy(o,function(g,P,O){var A=ge(a,function(I){return I(g)});return{criteria:A,index:++h,value:g}});return mT(d,function(g,P){return rC(g,P,c)})}function GS(o,a){return zy(o,a,function(c,h){return ip(o,h)})}function zy(o,a,c){for(var h=-1,d=a.length,g={};++h<d;){var P=a[h],O=Gi(o,P);c(O,P)&&ss(g,ii(P,o),O)}return g}function BS(o){return function(a){return Gi(a,o)}}function xf(o,a,c,h){var d=h?vT:gn,g=-1,P=a.length,O=o;for(o===a&&(a=dt(a)),c&&(O=ge(o,St(c)));++g<P;)for(var A=0,I=a[g],k=c?c(I):I;(A=d(O,k,A,h))>-1;)O!==o&&sa.call(O,A,1),sa.call(o,A,1);return o}function Vy(o,a){for(var c=o?a.length:0,h=c-1;c--;){var d=a[c];if(c==h||d!==g){var g=d;kr(d)?sa.call(o,d,1):If(o,d)}}return o}function Mf(o,a){return o+ca(_y()*(a-o+1))}function HS(o,a,c,h){for(var d=-1,g=De(ua((a-o)/(c||1)),0),P=x(g);g--;)P[h?g:++d]=o,o+=c;return P}function Lf(o,a){var c="";if(!o||a<1||a>Qr)return c;do a%2&&(c+=o),a=ca(a/2),a&&(o+=o);while(a);return c}function ee(o,a){return Qf(mg(o,a,yt),o+"")}function $S(o){return Oy(qn(o))}function YS(o,a){var c=qn(o);return Ca(c,Ui(a,0,c.length))}function ss(o,a,c,h){if(!we(o))return o;a=ii(a,o);for(var d=-1,g=a.length,P=g-1,O=o;O!=null&&++d<g;){var A=cr(a[d]),I=c;if(A==="__proto__"||A==="constructor"||A==="prototype")return o;if(d!=P){var k=O[A];I=h?h(k,A,O):t,I===t&&(I=we(k)?k:kr(a[d+1])?[]:{})}rs(O,A,I),O=O[A]}return o}var Ny=la?function(o,a){return la.set(o,a),o}:yt,QS=aa?function(o,a){return aa(o,"toString",{configurable:!0,enumerable:!1,value:op(a),writable:!0})}:yt;function KS(o){return Ca(qn(o))}function Vt(o,a,c){var h=-1,d=o.length;a<0&&(a=-a>d?0:d+a),c=c>d?d:c,c<0&&(c+=d),d=a>c?0:c-a>>>0,a>>>=0;for(var g=x(d);++h<d;)g[h]=o[h+a];return g}function XS(o,a){var c;return ti(o,function(h,d,g){return c=a(h,d,g),!c}),!!c}function ya(o,a,c){var h=0,d=o==null?h:o.length;if(typeof a=="number"&&a===a&&d<=Z1){for(;h<d;){var g=h+d>>>1,P=o[g];P!==null&&!At(P)&&(c?P<=a:P<a)?h=g+1:d=g}return d}return jf(o,a,yt,c)}function jf(o,a,c,h){var d=0,g=o==null?0:o.length;if(g===0)return 0;a=c(a);for(var P=a!==a,O=a===null,A=At(a),I=a===t;d<g;){var k=ca((d+g)/2),F=c(o[k]),R=F!==t,W=F===null,H=F===F,Z=At(F);if(P)var $=h||H;else I?$=H&&(h||R):O?$=H&&R&&(h||!W):A?$=H&&R&&!W&&(h||!Z):W||Z?$=!1:$=h?F<=a:F<a;$?d=k+1:g=k}return tt(g,J1)}function Wy(o,a){for(var c=-1,h=o.length,d=0,g=[];++c<h;){var P=o[c],O=a?a(P):P;if(!c||!Qt(O,A)){var A=O;g[d++]=P===0?0:P}}return g}function Uy(o){return typeof o=="number"?o:At(o)?Ws:+o}function Ct(o){if(typeof o=="string")return o;if(K(o))return ge(o,Ct)+"";if(At(o))return Py?Py.call(o):"";var a=o+"";return a=="0"&&1/o==-Ri?"-0":a}function ri(o,a,c){var h=-1,d=Ks,g=o.length,P=!0,O=[],A=O;if(c)P=!1,d=uf;else if(g>=n){var I=a?null:uC(o);if(I)return Js(I);P=!1,d=Ko,A=new Wi}else A=a?[]:O;e:for(;++h<g;){var k=o[h],F=a?a(k):k;if(k=c||k!==0?k:0,P&&F===F){for(var R=A.length;R--;)if(A[R]===F)continue e;a&&A.push(F),O.push(k)}else d(A,F,c)||(A!==O&&A.push(F),O.push(k))}return O}function If(o,a){return a=ii(a,o),o=yg(o,a),o==null||delete o[cr(Nt(a))]}function Gy(o,a,c,h){return ss(o,a,c(Gi(o,a)),h)}function ga(o,a,c,h){for(var d=o.length,g=h?d:-1;(h?g--:++g<d)&&a(o[g],g,o););return c?Vt(o,h?0:g,h?g+1:d):Vt(o,h?g+1:0,h?d:g)}function By(o,a){var c=o;return c instanceof re&&(c=c.value()),cf(a,function(h,d){return d.func.apply(d.thisArg,Xr([h],d.args))},c)}function kf(o,a,c){var h=o.length;if(h<2)return h?ri(o[0]):[];for(var d=-1,g=x(h);++d<h;)for(var P=o[d],O=-1;++O<h;)O!=d&&(g[d]=is(g[d]||P,o[O],a,c));return ri(Qe(g,1),a,c)}function Hy(o,a,c){for(var h=-1,d=o.length,g=a.length,P={};++h<d;){var O=h<g?a[h]:t;c(P,o[h],O)}return P}function Ff(o){return Ae(o)?o:[]}function Df(o){return typeof o=="function"?o:yt}function ii(o,a){return K(o)?o:Hf(o,a)?[o]:Pg(ue(o))}var JS=ee;function ni(o,a,c){var h=o.length;return c=c===t?h:c,!a&&c>=h?o:Vt(o,a,c)}var $y=zT||function(o){return Ne.clearTimeout(o)};function Yy(o,a){if(a)return o.slice();var c=o.length,h=vy?vy(c):new o.constructor(c);return o.copy(h),h}function Rf(o){var a=new o.constructor(o.byteLength);return new na(a).set(new na(o)),a}function ZS(o,a){var c=a?Rf(o.buffer):o.buffer;return new o.constructor(c,o.byteOffset,o.byteLength)}function eC(o){var a=new o.constructor(o.source,Mm.exec(o));return a.lastIndex=o.lastIndex,a}function tC(o){return ts?de(ts.call(o)):{}}function Qy(o,a){var c=a?Rf(o.buffer):o.buffer;return new o.constructor(c,o.byteOffset,o.length)}function Ky(o,a){if(o!==a){var c=o!==t,h=o===null,d=o===o,g=At(o),P=a!==t,O=a===null,A=a===a,I=At(a);if(!O&&!I&&!g&&o>a||g&&P&&A&&!O&&!I||h&&P&&A||!c&&A||!d)return 1;if(!h&&!g&&!I&&o<a||I&&c&&d&&!h&&!g||O&&c&&d||!P&&d||!A)return-1}return 0}function rC(o,a,c){for(var h=-1,d=o.criteria,g=a.criteria,P=d.length,O=c.length;++h<P;){var A=Ky(d[h],g[h]);if(A){if(h>=O)return A;var I=c[h];return A*(I=="desc"?-1:1)}}return o.index-a.index}function Xy(o,a,c,h){for(var d=-1,g=o.length,P=c.length,O=-1,A=a.length,I=De(g-P,0),k=x(A+I),F=!h;++O<A;)k[O]=a[O];for(;++d<P;)(F||d<g)&&(k[c[d]]=o[d]);for(;I--;)k[O++]=o[d++];return k}function Jy(o,a,c,h){for(var d=-1,g=o.length,P=-1,O=c.length,A=-1,I=a.length,k=De(g-O,0),F=x(k+I),R=!h;++d<k;)F[d]=o[d];for(var W=d;++A<I;)F[W+A]=a[A];for(;++P<O;)(R||d<g)&&(F[W+c[P]]=o[d++]);return F}function dt(o,a){var c=-1,h=o.length;for(a||(a=x(h));++c<h;)a[c]=o[c];return a}function ur(o,a,c,h){var d=!c;c||(c={});for(var g=-1,P=a.length;++g<P;){var O=a[g],A=h?h(c[O],o[O],O,c,o):t;A===t&&(A=o[O]),d?Lr(c,O,A):rs(c,O,A)}return c}function iC(o,a){return ur(o,Bf(o),a)}function nC(o,a){return ur(o,hg(o),a)}function ba(o,a){return function(c,h){var d=K(c)?cT:CS,g=a?a():{};return d(c,o,B(h,2),g)}}function Sn(o){return ee(function(a,c){var h=-1,d=c.length,g=d>1?c[d-1]:t,P=d>2?c[2]:t;for(g=o.length>3&&typeof g=="function"?(d--,g):t,P&&at(c[0],c[1],P)&&(g=d<3?t:g,d=1),a=de(a);++h<d;){var O=c[h];O&&o(a,O,h,g)}return a})}function Zy(o,a){return function(c,h){if(c==null)return c;if(!vt(c))return o(c,h);for(var d=c.length,g=a?d:-1,P=de(c);(a?g--:++g<d)&&h(P[g],g,P)!==!1;);return c}}function eg(o){return function(a,c,h){for(var d=-1,g=de(a),P=h(a),O=P.length;O--;){var A=P[o?O:++d];if(c(g[A],A,g)===!1)break}return a}}function oC(o,a,c){var h=a&j,d=as(o);function g(){var P=this&&this!==Ne&&this instanceof g?d:o;return P.apply(h?c:this,arguments)}return g}function tg(o){return function(a){a=ue(a);var c=bn(a)?$t(a):t,h=c?c[0]:a.charAt(0),d=c?ni(c,1).join(""):a.slice(1);return h[o]()+d}}function Cn(o){return function(a){return cf(Zg(Jg(a).replace(QO,"")),o,"")}}function as(o){return function(){var a=arguments;switch(a.length){case 0:return new o;case 1:return new o(a[0]);case 2:return new o(a[0],a[1]);case 3:return new o(a[0],a[1],a[2]);case 4:return new o(a[0],a[1],a[2],a[3]);case 5:return new o(a[0],a[1],a[2],a[3],a[4]);case 6:return new o(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new o(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var c=Tn(o.prototype),h=o.apply(c,a);return we(h)?h:c}}function sC(o,a,c){var h=as(o);function d(){for(var g=arguments.length,P=x(g),O=g,A=An(d);O--;)P[O]=arguments[O];var I=g<3&&P[0]!==A&&P[g-1]!==A?[]:Jr(P,A);if(g-=I.length,g<c)return sg(o,a,_a,d.placeholder,t,P,I,t,t,c-g);var k=this&&this!==Ne&&this instanceof d?h:o;return Tt(k,this,P)}return d}function rg(o){return function(a,c,h){var d=de(a);if(!vt(a)){var g=B(c,3);a=We(a),c=function(O){return g(d[O],O,d)}}var P=o(a,c,h);return P>-1?d[g?a[P]:P]:t}}function ig(o){return Ir(function(a){var c=a.length,h=c,d=Rt.prototype.thru;for(o&&a.reverse();h--;){var g=a[h];if(typeof g!="function")throw new Dt(u);if(d&&!P&&Ta(g)=="wrapper")var P=new Rt([],!0)}for(h=P?h:c;++h<c;){g=a[h];var O=Ta(g),A=O=="wrapper"?Uf(g):t;A&&$f(A[0])&&A[1]==(pt|Y|pe|Wo)&&!A[4].length&&A[9]==1?P=P[Ta(A[0])].apply(P,A[3]):P=g.length==1&&$f(g)?P[O]():P.thru(g)}return function(){var I=arguments,k=I[0];if(P&&I.length==1&&K(k))return P.plant(k).value();for(var F=0,R=c?a[F].apply(this,I):k;++F<c;)R=a[F].call(this,R);return R}})}function _a(o,a,c,h,d,g,P,O,A,I){var k=a&pt,F=a&j,R=a&D,W=a&(Y|ie),H=a&Wh,Z=R?t:as(o);function $(){for(var te=arguments.length,ne=x(te),Et=te;Et--;)ne[Et]=arguments[Et];if(W)var ut=An($),qt=gT(ne,ut);if(h&&(ne=Xy(ne,h,d,W)),g&&(ne=Jy(ne,g,P,W)),te-=qt,W&&te<I){var Ee=Jr(ne,ut);return sg(o,a,_a,$.placeholder,c,ne,Ee,O,A,I-te)}var Kt=F?c:this,Rr=R?Kt[o]:o;return te=ne.length,O?ne=CC(ne,O):H&&te>1&&ne.reverse(),k&&A<te&&(ne.length=A),this&&this!==Ne&&this instanceof $&&(Rr=Z||as(Rr)),Rr.apply(Kt,ne)}return $}function ng(o,a){return function(c,h){return IS(c,o,a(h),{})}}function Pa(o,a){return function(c,h){var d;if(c===t&&h===t)return a;if(c!==t&&(d=c),h!==t){if(d===t)return h;typeof c=="string"||typeof h=="string"?(c=Ct(c),h=Ct(h)):(c=Uy(c),h=Uy(h)),d=o(c,h)}return d}}function zf(o){return Ir(function(a){return a=ge(a,St(B())),ee(function(c){var h=this;return o(a,function(d){return Tt(d,h,c)})})})}function wa(o,a){a=a===t?" ":Ct(a);var c=a.length;if(c<2)return c?Lf(a,o):a;var h=Lf(a,ua(o/_n(a)));return bn(a)?ni($t(h),0,o).join(""):h.slice(0,o)}function aC(o,a,c,h){var d=a&j,g=as(o);function P(){for(var O=-1,A=arguments.length,I=-1,k=h.length,F=x(k+A),R=this&&this!==Ne&&this instanceof P?g:o;++I<k;)F[I]=h[I];for(;A--;)F[I++]=arguments[++O];return Tt(R,d?c:this,F)}return P}function og(o){return function(a,c,h){return h&&typeof h!="number"&&at(a,c,h)&&(c=h=t),a=Dr(a),c===t?(c=a,a=0):c=Dr(c),h=h===t?a<c?1:-1:Dr(h),HS(a,c,h,o)}}function Oa(o){return function(a,c){return typeof a=="string"&&typeof c=="string"||(a=Wt(a),c=Wt(c)),o(a,c)}}function sg(o,a,c,h,d,g,P,O,A,I){var k=a&Y,F=k?P:t,R=k?t:P,W=k?g:t,H=k?t:g;a|=k?pe:ke,a&=~(k?ke:pe),a&V||(a&=~(j|D));var Z=[o,a,d,W,F,H,R,O,A,I],$=c.apply(t,Z);return $f(o)&&gg($,Z),$.placeholder=h,bg($,o,a)}function Vf(o){var a=Fe[o];return function(c,h){if(c=Wt(c),h=h==null?0:tt(J(h),292),h&&by(c)){var d=(ue(c)+"e").split("e"),g=a(d[0]+"e"+(+d[1]+h));return d=(ue(g)+"e").split("e"),+(d[0]+"e"+(+d[1]-h))}return a(c)}}var uC=wn&&1/Js(new wn([,-0]))[1]==Ri?function(o){return new wn(o)}:up;function ag(o){return function(a){var c=rt(a);return c==Bt?mf(a):c==Ht?ST(a):yT(a,o(a))}}function jr(o,a,c,h,d,g,P,O){var A=a&D;if(!A&&typeof o!="function")throw new Dt(u);var I=h?h.length:0;if(I||(a&=~(pe|ke),h=d=t),P=P===t?P:De(J(P),0),O=O===t?O:J(O),I-=d?d.length:0,a&ke){var k=h,F=d;h=d=t}var R=A?t:Uf(o),W=[o,a,c,h,d,k,F,g,P,O];if(R&&OC(W,R),o=W[0],a=W[1],c=W[2],h=W[3],d=W[4],O=W[9]=W[9]===t?A?0:o.length:De(W[9]-I,0),!O&&a&(Y|ie)&&(a&=~(Y|ie)),!a||a==j)var H=oC(o,a,c);else a==Y||a==ie?H=sC(o,a,O):(a==pe||a==(j|pe))&&!d.length?H=aC(o,a,c,h):H=_a.apply(t,W);var Z=R?Ny:gg;return bg(Z(H,W),o,a)}function ug(o,a,c,h){return o===t||Qt(o,Pn[c])&&!ce.call(h,c)?a:o}function cg(o,a,c,h,d,g){return we(o)&&we(a)&&(g.set(a,o),ma(o,a,t,cg,g),g.delete(a)),o}function cC(o){return ls(o)?t:o}function lg(o,a,c,h,d,g){var P=c&q,O=o.length,A=a.length;if(O!=A&&!(P&&A>O))return!1;var I=g.get(o),k=g.get(a);if(I&&k)return I==a&&k==o;var F=-1,R=!0,W=c&M?new Wi:t;for(g.set(o,a),g.set(a,o);++F<O;){var H=o[F],Z=a[F];if(h)var $=P?h(Z,H,F,a,o,g):h(H,Z,F,o,a,g);if($!==t){if($)continue;R=!1;break}if(W){if(!lf(a,function(te,ne){if(!Ko(W,ne)&&(H===te||d(H,te,c,h,g)))return W.push(ne)})){R=!1;break}}else if(!(H===Z||d(H,Z,c,h,g))){R=!1;break}}return g.delete(o),g.delete(a),R}function lC(o,a,c,h,d,g,P){switch(c){case mn:if(o.byteLength!=a.byteLength||o.byteOffset!=a.byteOffset)return!1;o=o.buffer,a=a.buffer;case Qo:return!(o.byteLength!=a.byteLength||!g(new na(o),new na(a)));case Uo:case Go:case Bo:return Qt(+o,+a);case Gs:return o.name==a.name&&o.message==a.message;case Ho:case $o:return o==a+"";case Bt:var O=mf;case Ht:var A=h&q;if(O||(O=Js),o.size!=a.size&&!A)return!1;var I=P.get(o);if(I)return I==a;h|=M,P.set(o,a);var k=lg(O(o),O(a),h,d,g,P);return P.delete(o),k;case Hs:if(ts)return ts.call(o)==ts.call(a)}return!1}function hC(o,a,c,h,d,g){var P=c&q,O=Nf(o),A=O.length,I=Nf(a),k=I.length;if(A!=k&&!P)return!1;for(var F=A;F--;){var R=O[F];if(!(P?R in a:ce.call(a,R)))return!1}var W=g.get(o),H=g.get(a);if(W&&H)return W==a&&H==o;var Z=!0;g.set(o,a),g.set(a,o);for(var $=P;++F<A;){R=O[F];var te=o[R],ne=a[R];if(h)var Et=P?h(ne,te,R,a,o,g):h(te,ne,R,o,a,g);if(!(Et===t?te===ne||d(te,ne,c,h,g):Et)){Z=!1;break}$||($=R=="constructor")}if(Z&&!$){var ut=o.constructor,qt=a.constructor;ut!=qt&&"constructor"in o&&"constructor"in a&&!(typeof ut=="function"&&ut instanceof ut&&typeof qt=="function"&&qt instanceof qt)&&(Z=!1)}return g.delete(o),g.delete(a),Z}function Ir(o){return Qf(mg(o,t,Sg),o+"")}function Nf(o){return xy(o,We,Bf)}function Wf(o){return xy(o,mt,hg)}var Uf=la?function(o){return la.get(o)}:up;function Ta(o){for(var a=o.name+"",c=On[a],h=ce.call(On,a)?c.length:0;h--;){var d=c[h],g=d.func;if(g==null||g==o)return d.name}return a}function An(o){var a=ce.call(y,"placeholder")?y:o;return a.placeholder}function B(){var o=y.iteratee||sp;return o=o===sp?jy:o,arguments.length?o(arguments[0],arguments[1]):o}function Sa(o,a){var c=o.__data__;return bC(a)?c[typeof a=="string"?"string":"hash"]:c.map}function Gf(o){for(var a=We(o),c=a.length;c--;){var h=a[c],d=o[h];a[c]=[h,d,dg(d)]}return a}function Bi(o,a){var c=wT(o,a);return Ly(c)?c:t}function fC(o){var a=ce.call(o,Vi),c=o[Vi];try{o[Vi]=t;var h=!0}catch{}var d=ra.call(o);return h&&(a?o[Vi]=c:delete o[Vi]),d}var Bf=gf?function(o){return o==null?[]:(o=de(o),Kr(gf(o),function(a){return yy.call(o,a)}))}:cp,hg=gf?function(o){for(var a=[];o;)Xr(a,Bf(o)),o=oa(o);return a}:cp,rt=st;(bf&&rt(new bf(new ArrayBuffer(1)))!=mn||Jo&&rt(new Jo)!=Bt||_f&&rt(_f.resolve())!=Am||wn&&rt(new wn)!=Ht||Zo&&rt(new Zo)!=Yo)&&(rt=function(o){var a=st(o),c=a==qr?o.constructor:t,h=c?Hi(c):"";if(h)switch(h){case YT:return mn;case QT:return Bt;case KT:return Am;case XT:return Ht;case JT:return Yo}return a});function pC(o,a,c){for(var h=-1,d=c.length;++h<d;){var g=c[h],P=g.size;switch(g.type){case"drop":o+=P;break;case"dropRight":a-=P;break;case"take":a=tt(a,o+P);break;case"takeRight":o=De(o,a-P);break}}return{start:o,end:a}}function dC(o){var a=o.match(_O);return a?a[1].split(PO):[]}function fg(o,a,c){a=ii(a,o);for(var h=-1,d=a.length,g=!1;++h<d;){var P=cr(a[h]);if(!(g=o!=null&&c(o,P)))break;o=o[P]}return g||++h!=d?g:(d=o==null?0:o.length,!!d&&La(d)&&kr(P,d)&&(K(o)||$i(o)))}function vC(o){var a=o.length,c=new o.constructor(a);return a&&typeof o[0]=="string"&&ce.call(o,"index")&&(c.index=o.index,c.input=o.input),c}function pg(o){return typeof o.constructor=="function"&&!us(o)?Tn(oa(o)):{}}function mC(o,a,c){var h=o.constructor;switch(a){case Qo:return Rf(o);case Uo:case Go:return new h(+o);case mn:return ZS(o,c);case Uh:case Gh:case Bh:case Hh:case $h:case Yh:case Qh:case Kh:case Xh:return Qy(o,c);case Bt:return new h;case Bo:case $o:return new h(o);case Ho:return eC(o);case Ht:return new h;case Hs:return tC(o)}}function yC(o,a){var c=a.length;if(!c)return o;var h=c-1;return a[h]=(c>1?"& ":"")+a[h],a=a.join(c>2?", ":" "),o.replace(bO,`{
/* [wrapped with `+a+`] */
`)}function gC(o){return K(o)||$i(o)||!!(gy&&o&&o[gy])}function kr(o,a){var c=typeof o;return a=a??Qr,!!a&&(c=="number"||c!="symbol"&&xO.test(o))&&o>-1&&o%1==0&&o<a}function at(o,a,c){if(!we(c))return!1;var h=typeof a;return(h=="number"?vt(c)&&kr(a,c.length):h=="string"&&a in c)?Qt(c[a],o):!1}function Hf(o,a){if(K(o))return!1;var c=typeof o;return c=="number"||c=="symbol"||c=="boolean"||o==null||At(o)?!0:vO.test(o)||!dO.test(o)||a!=null&&o in de(a)}function bC(o){var a=typeof o;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?o!=="__proto__":o===null}function $f(o){var a=Ta(o),c=y[a];if(typeof c!="function"||!(a in re.prototype))return!1;if(o===c)return!0;var h=Uf(c);return!!h&&o===h[0]}function _C(o){return!!dy&&dy in o}var PC=ea?Fr:lp;function us(o){var a=o&&o.constructor,c=typeof a=="function"&&a.prototype||Pn;return o===c}function dg(o){return o===o&&!we(o)}function vg(o,a){return function(c){return c==null?!1:c[o]===a&&(a!==t||o in de(c))}}function wC(o){var a=xa(o,function(h){return c.size===p&&c.clear(),h}),c=a.cache;return a}function OC(o,a){var c=o[1],h=a[1],d=c|h,g=d<(j|D|pt),P=h==pt&&c==Y||h==pt&&c==Wo&&o[7].length<=a[8]||h==(pt|Wo)&&a[7].length<=a[8]&&c==Y;if(!(g||P))return o;h&j&&(o[2]=a[2],d|=c&j?0:V);var O=a[3];if(O){var A=o[3];o[3]=A?Xy(A,O,a[4]):O,o[4]=A?Jr(o[3],v):a[4]}return O=a[5],O&&(A=o[5],o[5]=A?Jy(A,O,a[6]):O,o[6]=A?Jr(o[5],v):a[6]),O=a[7],O&&(o[7]=O),h&pt&&(o[8]=o[8]==null?a[8]:tt(o[8],a[8])),o[9]==null&&(o[9]=a[9]),o[0]=a[0],o[1]=d,o}function TC(o){var a=[];if(o!=null)for(var c in de(o))a.push(c);return a}function SC(o){return ra.call(o)}function mg(o,a,c){return a=De(a===t?o.length-1:a,0),function(){for(var h=arguments,d=-1,g=De(h.length-a,0),P=x(g);++d<g;)P[d]=h[a+d];d=-1;for(var O=x(a+1);++d<a;)O[d]=h[d];return O[a]=c(P),Tt(o,this,O)}}function yg(o,a){return a.length<2?o:Gi(o,Vt(a,0,-1))}function CC(o,a){for(var c=o.length,h=tt(a.length,c),d=dt(o);h--;){var g=a[h];o[h]=kr(g,c)?d[g]:t}return o}function Yf(o,a){if(!(a==="constructor"&&typeof o[a]=="function")&&a!="__proto__")return o[a]}var gg=_g(Ny),cs=NT||function(o,a){return Ne.setTimeout(o,a)},Qf=_g(QS);function bg(o,a,c){var h=a+"";return Qf(o,yC(h,AC(dC(h),c)))}function _g(o){var a=0,c=0;return function(){var h=BT(),d=Y1-(h-c);if(c=h,d>0){if(++a>=$1)return arguments[0]}else a=0;return o.apply(t,arguments)}}function Ca(o,a){var c=-1,h=o.length,d=h-1;for(a=a===t?h:a;++c<a;){var g=Mf(c,d),P=o[g];o[g]=o[c],o[c]=P}return o.length=a,o}var Pg=wC(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(mO,function(c,h,d,g){a.push(d?g.replace(TO,"$1"):h||c)}),a});function cr(o){if(typeof o=="string"||At(o))return o;var a=o+"";return a=="0"&&1/o==-Ri?"-0":a}function Hi(o){if(o!=null){try{return ta.call(o)}catch{}try{return o+""}catch{}}return""}function AC(o,a){return Ft(eO,function(c){var h="_."+c[0];a&c[1]&&!Ks(o,h)&&o.push(h)}),o.sort()}function wg(o){if(o instanceof re)return o.clone();var a=new Rt(o.__wrapped__,o.__chain__);return a.__actions__=dt(o.__actions__),a.__index__=o.__index__,a.__values__=o.__values__,a}function EC(o,a,c){(c?at(o,a,c):a===t)?a=1:a=De(J(a),0);var h=o==null?0:o.length;if(!h||a<1)return[];for(var d=0,g=0,P=x(ua(h/a));d<h;)P[g++]=Vt(o,d,d+=a);return P}function qC(o){for(var a=-1,c=o==null?0:o.length,h=0,d=[];++a<c;){var g=o[a];g&&(d[h++]=g)}return d}function xC(){var o=arguments.length;if(!o)return[];for(var a=x(o-1),c=arguments[0],h=o;h--;)a[h-1]=arguments[h];return Xr(K(c)?dt(c):[c],Qe(a,1))}var MC=ee(function(o,a){return Ae(o)?is(o,Qe(a,1,Ae,!0)):[]}),LC=ee(function(o,a){var c=Nt(a);return Ae(c)&&(c=t),Ae(o)?is(o,Qe(a,1,Ae,!0),B(c,2)):[]}),jC=ee(function(o,a){var c=Nt(a);return Ae(c)&&(c=t),Ae(o)?is(o,Qe(a,1,Ae,!0),t,c):[]});function IC(o,a,c){var h=o==null?0:o.length;return h?(a=c||a===t?1:J(a),Vt(o,a<0?0:a,h)):[]}function kC(o,a,c){var h=o==null?0:o.length;return h?(a=c||a===t?1:J(a),a=h-a,Vt(o,0,a<0?0:a)):[]}function FC(o,a){return o&&o.length?ga(o,B(a,3),!0,!0):[]}function DC(o,a){return o&&o.length?ga(o,B(a,3),!0):[]}function RC(o,a,c,h){var d=o==null?0:o.length;return d?(c&&typeof c!="number"&&at(o,a,c)&&(c=0,h=d),xS(o,a,c,h)):[]}function Og(o,a,c){var h=o==null?0:o.length;if(!h)return-1;var d=c==null?0:J(c);return d<0&&(d=De(h+d,0)),Xs(o,B(a,3),d)}function Tg(o,a,c){var h=o==null?0:o.length;if(!h)return-1;var d=h-1;return c!==t&&(d=J(c),d=c<0?De(h+d,0):tt(d,h-1)),Xs(o,B(a,3),d,!0)}function Sg(o){var a=o==null?0:o.length;return a?Qe(o,1):[]}function zC(o){var a=o==null?0:o.length;return a?Qe(o,Ri):[]}function VC(o,a){var c=o==null?0:o.length;return c?(a=a===t?1:J(a),Qe(o,a)):[]}function NC(o){for(var a=-1,c=o==null?0:o.length,h={};++a<c;){var d=o[a];h[d[0]]=d[1]}return h}function Cg(o){return o&&o.length?o[0]:t}function WC(o,a,c){var h=o==null?0:o.length;if(!h)return-1;var d=c==null?0:J(c);return d<0&&(d=De(h+d,0)),gn(o,a,d)}function UC(o){var a=o==null?0:o.length;return a?Vt(o,0,-1):[]}var GC=ee(function(o){var a=ge(o,Ff);return a.length&&a[0]===o[0]?Cf(a):[]}),BC=ee(function(o){var a=Nt(o),c=ge(o,Ff);return a===Nt(c)?a=t:c.pop(),c.length&&c[0]===o[0]?Cf(c,B(a,2)):[]}),HC=ee(function(o){var a=Nt(o),c=ge(o,Ff);return a=typeof a=="function"?a:t,a&&c.pop(),c.length&&c[0]===o[0]?Cf(c,t,a):[]});function $C(o,a){return o==null?"":UT.call(o,a)}function Nt(o){var a=o==null?0:o.length;return a?o[a-1]:t}function YC(o,a,c){var h=o==null?0:o.length;if(!h)return-1;var d=h;return c!==t&&(d=J(c),d=d<0?De(h+d,0):tt(d,h-1)),a===a?AT(o,a,d):Xs(o,sy,d,!0)}function QC(o,a){return o&&o.length?Dy(o,J(a)):t}var KC=ee(Ag);function Ag(o,a){return o&&o.length&&a&&a.length?xf(o,a):o}function XC(o,a,c){return o&&o.length&&a&&a.length?xf(o,a,B(c,2)):o}function JC(o,a,c){return o&&o.length&&a&&a.length?xf(o,a,t,c):o}var ZC=Ir(function(o,a){var c=o==null?0:o.length,h=wf(o,a);return Vy(o,ge(a,function(d){return kr(d,c)?+d:d}).sort(Ky)),h});function eA(o,a){var c=[];if(!(o&&o.length))return c;var h=-1,d=[],g=o.length;for(a=B(a,3);++h<g;){var P=o[h];a(P,h,o)&&(c.push(P),d.push(h))}return Vy(o,d),c}function Kf(o){return o==null?o:$T.call(o)}function tA(o,a,c){var h=o==null?0:o.length;return h?(c&&typeof c!="number"&&at(o,a,c)?(a=0,c=h):(a=a==null?0:J(a),c=c===t?h:J(c)),Vt(o,a,c)):[]}function rA(o,a){return ya(o,a)}function iA(o,a,c){return jf(o,a,B(c,2))}function nA(o,a){var c=o==null?0:o.length;if(c){var h=ya(o,a);if(h<c&&Qt(o[h],a))return h}return-1}function oA(o,a){return ya(o,a,!0)}function sA(o,a,c){return jf(o,a,B(c,2),!0)}function aA(o,a){var c=o==null?0:o.length;if(c){var h=ya(o,a,!0)-1;if(Qt(o[h],a))return h}return-1}function uA(o){return o&&o.length?Wy(o):[]}function cA(o,a){return o&&o.length?Wy(o,B(a,2)):[]}function lA(o){var a=o==null?0:o.length;return a?Vt(o,1,a):[]}function hA(o,a,c){return o&&o.length?(a=c||a===t?1:J(a),Vt(o,0,a<0?0:a)):[]}function fA(o,a,c){var h=o==null?0:o.length;return h?(a=c||a===t?1:J(a),a=h-a,Vt(o,a<0?0:a,h)):[]}function pA(o,a){return o&&o.length?ga(o,B(a,3),!1,!0):[]}function dA(o,a){return o&&o.length?ga(o,B(a,3)):[]}var vA=ee(function(o){return ri(Qe(o,1,Ae,!0))}),mA=ee(function(o){var a=Nt(o);return Ae(a)&&(a=t),ri(Qe(o,1,Ae,!0),B(a,2))}),yA=ee(function(o){var a=Nt(o);return a=typeof a=="function"?a:t,ri(Qe(o,1,Ae,!0),t,a)});function gA(o){return o&&o.length?ri(o):[]}function bA(o,a){return o&&o.length?ri(o,B(a,2)):[]}function _A(o,a){return a=typeof a=="function"?a:t,o&&o.length?ri(o,t,a):[]}function Xf(o){if(!(o&&o.length))return[];var a=0;return o=Kr(o,function(c){if(Ae(c))return a=De(c.length,a),!0}),df(a,function(c){return ge(o,hf(c))})}function Eg(o,a){if(!(o&&o.length))return[];var c=Xf(o);return a==null?c:ge(c,function(h){return Tt(a,t,h)})}var PA=ee(function(o,a){return Ae(o)?is(o,a):[]}),wA=ee(function(o){return kf(Kr(o,Ae))}),OA=ee(function(o){var a=Nt(o);return Ae(a)&&(a=t),kf(Kr(o,Ae),B(a,2))}),TA=ee(function(o){var a=Nt(o);return a=typeof a=="function"?a:t,kf(Kr(o,Ae),t,a)}),SA=ee(Xf);function CA(o,a){return Hy(o||[],a||[],rs)}function AA(o,a){return Hy(o||[],a||[],ss)}var EA=ee(function(o){var a=o.length,c=a>1?o[a-1]:t;return c=typeof c=="function"?(o.pop(),c):t,Eg(o,c)});function qg(o){var a=y(o);return a.__chain__=!0,a}function qA(o,a){return a(o),o}function Aa(o,a){return a(o)}var xA=Ir(function(o){var a=o.length,c=a?o[0]:0,h=this.__wrapped__,d=function(g){return wf(g,o)};return a>1||this.__actions__.length||!(h instanceof re)||!kr(c)?this.thru(d):(h=h.slice(c,+c+(a?1:0)),h.__actions__.push({func:Aa,args:[d],thisArg:t}),new Rt(h,this.__chain__).thru(function(g){return a&&!g.length&&g.push(t),g}))});function MA(){return qg(this)}function LA(){return new Rt(this.value(),this.__chain__)}function jA(){this.__values__===t&&(this.__values__=Ug(this.value()));var o=this.__index__>=this.__values__.length,a=o?t:this.__values__[this.__index__++];return{done:o,value:a}}function IA(){return this}function kA(o){for(var a,c=this;c instanceof fa;){var h=wg(c);h.__index__=0,h.__values__=t,a?d.__wrapped__=h:a=h;var d=h;c=c.__wrapped__}return d.__wrapped__=o,a}function FA(){var o=this.__wrapped__;if(o instanceof re){var a=o;return this.__actions__.length&&(a=new re(this)),a=a.reverse(),a.__actions__.push({func:Aa,args:[Kf],thisArg:t}),new Rt(a,this.__chain__)}return this.thru(Kf)}function DA(){return By(this.__wrapped__,this.__actions__)}var RA=ba(function(o,a,c){ce.call(o,c)?++o[c]:Lr(o,c,1)});function zA(o,a,c){var h=K(o)?ny:qS;return c&&at(o,a,c)&&(a=t),h(o,B(a,3))}function VA(o,a){var c=K(o)?Kr:Ey;return c(o,B(a,3))}var NA=rg(Og),WA=rg(Tg);function UA(o,a){return Qe(Ea(o,a),1)}function GA(o,a){return Qe(Ea(o,a),Ri)}function BA(o,a,c){return c=c===t?1:J(c),Qe(Ea(o,a),c)}function xg(o,a){var c=K(o)?Ft:ti;return c(o,B(a,3))}function Mg(o,a){var c=K(o)?lT:Ay;return c(o,B(a,3))}var HA=ba(function(o,a,c){ce.call(o,c)?o[c].push(a):Lr(o,c,[a])});function $A(o,a,c,h){o=vt(o)?o:qn(o),c=c&&!h?J(c):0;var d=o.length;return c<0&&(c=De(d+c,0)),ja(o)?c<=d&&o.indexOf(a,c)>-1:!!d&&gn(o,a,c)>-1}var YA=ee(function(o,a,c){var h=-1,d=typeof a=="function",g=vt(o)?x(o.length):[];return ti(o,function(P){g[++h]=d?Tt(a,P,c):ns(P,a,c)}),g}),QA=ba(function(o,a,c){Lr(o,c,a)});function Ea(o,a){var c=K(o)?ge:Iy;return c(o,B(a,3))}function KA(o,a,c,h){return o==null?[]:(K(a)||(a=a==null?[]:[a]),c=h?t:c,K(c)||(c=c==null?[]:[c]),Ry(o,a,c))}var XA=ba(function(o,a,c){o[c?0:1].push(a)},function(){return[[],[]]});function JA(o,a,c){var h=K(o)?cf:uy,d=arguments.length<3;return h(o,B(a,4),c,d,ti)}function ZA(o,a,c){var h=K(o)?hT:uy,d=arguments.length<3;return h(o,B(a,4),c,d,Ay)}function eE(o,a){var c=K(o)?Kr:Ey;return c(o,Ma(B(a,3)))}function tE(o){var a=K(o)?Oy:$S;return a(o)}function rE(o,a,c){(c?at(o,a,c):a===t)?a=1:a=J(a);var h=K(o)?TS:YS;return h(o,a)}function iE(o){var a=K(o)?SS:KS;return a(o)}function nE(o){if(o==null)return 0;if(vt(o))return ja(o)?_n(o):o.length;var a=rt(o);return a==Bt||a==Ht?o.size:Ef(o).length}function oE(o,a,c){var h=K(o)?lf:XS;return c&&at(o,a,c)&&(a=t),h(o,B(a,3))}var sE=ee(function(o,a){if(o==null)return[];var c=a.length;return c>1&&at(o,a[0],a[1])?a=[]:c>2&&at(a[0],a[1],a[2])&&(a=[a[0]]),Ry(o,Qe(a,1),[])}),qa=VT||function(){return Ne.Date.now()};function aE(o,a){if(typeof a!="function")throw new Dt(u);return o=J(o),function(){if(--o<1)return a.apply(this,arguments)}}function Lg(o,a,c){return a=c?t:a,a=o&&a==null?o.length:a,jr(o,pt,t,t,t,t,a)}function jg(o,a){var c;if(typeof a!="function")throw new Dt(u);return o=J(o),function(){return--o>0&&(c=a.apply(this,arguments)),o<=1&&(a=t),c}}var Jf=ee(function(o,a,c){var h=j;if(c.length){var d=Jr(c,An(Jf));h|=pe}return jr(o,h,a,c,d)}),Ig=ee(function(o,a,c){var h=j|D;if(c.length){var d=Jr(c,An(Ig));h|=pe}return jr(a,h,o,c,d)});function kg(o,a,c){a=c?t:a;var h=jr(o,Y,t,t,t,t,t,a);return h.placeholder=kg.placeholder,h}function Fg(o,a,c){a=c?t:a;var h=jr(o,ie,t,t,t,t,t,a);return h.placeholder=Fg.placeholder,h}function Dg(o,a,c){var h,d,g,P,O,A,I=0,k=!1,F=!1,R=!0;if(typeof o!="function")throw new Dt(u);a=Wt(a)||0,we(c)&&(k=!!c.leading,F="maxWait"in c,g=F?De(Wt(c.maxWait)||0,a):g,R="trailing"in c?!!c.trailing:R);function W(Ee){var Kt=h,Rr=d;return h=d=t,I=Ee,P=o.apply(Rr,Kt),P}function H(Ee){return I=Ee,O=cs(te,a),k?W(Ee):P}function Z(Ee){var Kt=Ee-A,Rr=Ee-I,rb=a-Kt;return F?tt(rb,g-Rr):rb}function $(Ee){var Kt=Ee-A,Rr=Ee-I;return A===t||Kt>=a||Kt<0||F&&Rr>=g}function te(){var Ee=qa();if($(Ee))return ne(Ee);O=cs(te,Z(Ee))}function ne(Ee){return O=t,R&&h?W(Ee):(h=d=t,P)}function Et(){O!==t&&$y(O),I=0,h=A=d=O=t}function ut(){return O===t?P:ne(qa())}function qt(){var Ee=qa(),Kt=$(Ee);if(h=arguments,d=this,A=Ee,Kt){if(O===t)return H(A);if(F)return $y(O),O=cs(te,a),W(A)}return O===t&&(O=cs(te,a)),P}return qt.cancel=Et,qt.flush=ut,qt}var uE=ee(function(o,a){return Cy(o,1,a)}),cE=ee(function(o,a,c){return Cy(o,Wt(a)||0,c)});function lE(o){return jr(o,Wh)}function xa(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new Dt(u);var c=function(){var h=arguments,d=a?a.apply(this,h):h[0],g=c.cache;if(g.has(d))return g.get(d);var P=o.apply(this,h);return c.cache=g.set(d,P)||g,P};return c.cache=new(xa.Cache||Mr),c}xa.Cache=Mr;function Ma(o){if(typeof o!="function")throw new Dt(u);return function(){var a=arguments;switch(a.length){case 0:return!o.call(this);case 1:return!o.call(this,a[0]);case 2:return!o.call(this,a[0],a[1]);case 3:return!o.call(this,a[0],a[1],a[2])}return!o.apply(this,a)}}function hE(o){return jg(2,o)}var fE=JS(function(o,a){a=a.length==1&&K(a[0])?ge(a[0],St(B())):ge(Qe(a,1),St(B()));var c=a.length;return ee(function(h){for(var d=-1,g=tt(h.length,c);++d<g;)h[d]=a[d].call(this,h[d]);return Tt(o,this,h)})}),Zf=ee(function(o,a){var c=Jr(a,An(Zf));return jr(o,pe,t,a,c)}),Rg=ee(function(o,a){var c=Jr(a,An(Rg));return jr(o,ke,t,a,c)}),pE=Ir(function(o,a){return jr(o,Wo,t,t,t,a)});function dE(o,a){if(typeof o!="function")throw new Dt(u);return a=a===t?a:J(a),ee(o,a)}function vE(o,a){if(typeof o!="function")throw new Dt(u);return a=a==null?0:De(J(a),0),ee(function(c){var h=c[a],d=ni(c,0,a);return h&&Xr(d,h),Tt(o,this,d)})}function mE(o,a,c){var h=!0,d=!0;if(typeof o!="function")throw new Dt(u);return we(c)&&(h="leading"in c?!!c.leading:h,d="trailing"in c?!!c.trailing:d),Dg(o,a,{leading:h,maxWait:a,trailing:d})}function yE(o){return Lg(o,1)}function gE(o,a){return Zf(Df(a),o)}function bE(){if(!arguments.length)return[];var o=arguments[0];return K(o)?o:[o]}function _E(o){return zt(o,S)}function PE(o,a){return a=typeof a=="function"?a:t,zt(o,S,a)}function wE(o){return zt(o,b|S)}function OE(o,a){return a=typeof a=="function"?a:t,zt(o,b|S,a)}function TE(o,a){return a==null||Sy(o,a,We(a))}function Qt(o,a){return o===a||o!==o&&a!==a}var SE=Oa(Sf),CE=Oa(function(o,a){return o>=a}),$i=My(function(){return arguments}())?My:function(o){return Se(o)&&ce.call(o,"callee")&&!yy.call(o,"callee")},K=x.isArray,AE=Jm?St(Jm):kS;function vt(o){return o!=null&&La(o.length)&&!Fr(o)}function Ae(o){return Se(o)&&vt(o)}function EE(o){return o===!0||o===!1||Se(o)&&st(o)==Uo}var oi=WT||lp,qE=Zm?St(Zm):FS;function xE(o){return Se(o)&&o.nodeType===1&&!ls(o)}function ME(o){if(o==null)return!0;if(vt(o)&&(K(o)||typeof o=="string"||typeof o.splice=="function"||oi(o)||En(o)||$i(o)))return!o.length;var a=rt(o);if(a==Bt||a==Ht)return!o.size;if(us(o))return!Ef(o).length;for(var c in o)if(ce.call(o,c))return!1;return!0}function LE(o,a){return os(o,a)}function jE(o,a,c){c=typeof c=="function"?c:t;var h=c?c(o,a):t;return h===t?os(o,a,t,c):!!h}function ep(o){if(!Se(o))return!1;var a=st(o);return a==Gs||a==rO||typeof o.message=="string"&&typeof o.name=="string"&&!ls(o)}function IE(o){return typeof o=="number"&&by(o)}function Fr(o){if(!we(o))return!1;var a=st(o);return a==Bs||a==Cm||a==tO||a==nO}function zg(o){return typeof o=="number"&&o==J(o)}function La(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Qr}function we(o){var a=typeof o;return o!=null&&(a=="object"||a=="function")}function Se(o){return o!=null&&typeof o=="object"}var Vg=ey?St(ey):RS;function kE(o,a){return o===a||Af(o,a,Gf(a))}function FE(o,a,c){return c=typeof c=="function"?c:t,Af(o,a,Gf(a),c)}function DE(o){return Ng(o)&&o!=+o}function RE(o){if(PC(o))throw new Q(s);return Ly(o)}function zE(o){return o===null}function VE(o){return o==null}function Ng(o){return typeof o=="number"||Se(o)&&st(o)==Bo}function ls(o){if(!Se(o)||st(o)!=qr)return!1;var a=oa(o);if(a===null)return!0;var c=ce.call(a,"constructor")&&a.constructor;return typeof c=="function"&&c instanceof c&&ta.call(c)==FT}var tp=ty?St(ty):zS;function NE(o){return zg(o)&&o>=-Qr&&o<=Qr}var Wg=ry?St(ry):VS;function ja(o){return typeof o=="string"||!K(o)&&Se(o)&&st(o)==$o}function At(o){return typeof o=="symbol"||Se(o)&&st(o)==Hs}var En=iy?St(iy):NS;function WE(o){return o===t}function UE(o){return Se(o)&&rt(o)==Yo}function GE(o){return Se(o)&&st(o)==sO}var BE=Oa(qf),HE=Oa(function(o,a){return o<=a});function Ug(o){if(!o)return[];if(vt(o))return ja(o)?$t(o):dt(o);if(Xo&&o[Xo])return TT(o[Xo]());var a=rt(o),c=a==Bt?mf:a==Ht?Js:qn;return c(o)}function Dr(o){if(!o)return o===0?o:0;if(o=Wt(o),o===Ri||o===-Ri){var a=o<0?-1:1;return a*X1}return o===o?o:0}function J(o){var a=Dr(o),c=a%1;return a===a?c?a-c:a:0}function Gg(o){return o?Ui(J(o),0,sr):0}function Wt(o){if(typeof o=="number")return o;if(At(o))return Ws;if(we(o)){var a=typeof o.valueOf=="function"?o.valueOf():o;o=we(a)?a+"":a}if(typeof o!="string")return o===0?o:+o;o=cy(o);var c=AO.test(o);return c||qO.test(o)?aT(o.slice(2),c?2:8):CO.test(o)?Ws:+o}function Bg(o){return ur(o,mt(o))}function $E(o){return o?Ui(J(o),-Qr,Qr):o===0?o:0}function ue(o){return o==null?"":Ct(o)}var YE=Sn(function(o,a){if(us(a)||vt(a)){ur(a,We(a),o);return}for(var c in a)ce.call(a,c)&&rs(o,c,a[c])}),Hg=Sn(function(o,a){ur(a,mt(a),o)}),Ia=Sn(function(o,a,c,h){ur(a,mt(a),o,h)}),QE=Sn(function(o,a,c,h){ur(a,We(a),o,h)}),KE=Ir(wf);function XE(o,a){var c=Tn(o);return a==null?c:Ty(c,a)}var JE=ee(function(o,a){o=de(o);var c=-1,h=a.length,d=h>2?a[2]:t;for(d&&at(a[0],a[1],d)&&(h=1);++c<h;)for(var g=a[c],P=mt(g),O=-1,A=P.length;++O<A;){var I=P[O],k=o[I];(k===t||Qt(k,Pn[I])&&!ce.call(o,I))&&(o[I]=g[I])}return o}),ZE=ee(function(o){return o.push(t,cg),Tt($g,t,o)});function eq(o,a){return oy(o,B(a,3),ar)}function tq(o,a){return oy(o,B(a,3),Tf)}function rq(o,a){return o==null?o:Of(o,B(a,3),mt)}function iq(o,a){return o==null?o:qy(o,B(a,3),mt)}function nq(o,a){return o&&ar(o,B(a,3))}function oq(o,a){return o&&Tf(o,B(a,3))}function sq(o){return o==null?[]:va(o,We(o))}function aq(o){return o==null?[]:va(o,mt(o))}function rp(o,a,c){var h=o==null?t:Gi(o,a);return h===t?c:h}function uq(o,a){return o!=null&&fg(o,a,MS)}function ip(o,a){return o!=null&&fg(o,a,LS)}var cq=ng(function(o,a,c){a!=null&&typeof a.toString!="function"&&(a=ra.call(a)),o[a]=c},op(yt)),lq=ng(function(o,a,c){a!=null&&typeof a.toString!="function"&&(a=ra.call(a)),ce.call(o,a)?o[a].push(c):o[a]=[c]},B),hq=ee(ns);function We(o){return vt(o)?wy(o):Ef(o)}function mt(o){return vt(o)?wy(o,!0):WS(o)}function fq(o,a){var c={};return a=B(a,3),ar(o,function(h,d,g){Lr(c,a(h,d,g),h)}),c}function pq(o,a){var c={};return a=B(a,3),ar(o,function(h,d,g){Lr(c,d,a(h,d,g))}),c}var dq=Sn(function(o,a,c){ma(o,a,c)}),$g=Sn(function(o,a,c,h){ma(o,a,c,h)}),vq=Ir(function(o,a){var c={};if(o==null)return c;var h=!1;a=ge(a,function(g){return g=ii(g,o),h||(h=g.length>1),g}),ur(o,Wf(o),c),h&&(c=zt(c,b|T|S,cC));for(var d=a.length;d--;)If(c,a[d]);return c});function mq(o,a){return Yg(o,Ma(B(a)))}var yq=Ir(function(o,a){return o==null?{}:GS(o,a)});function Yg(o,a){if(o==null)return{};var c=ge(Wf(o),function(h){return[h]});return a=B(a),zy(o,c,function(h,d){return a(h,d[0])})}function gq(o,a,c){a=ii(a,o);var h=-1,d=a.length;for(d||(d=1,o=t);++h<d;){var g=o==null?t:o[cr(a[h])];g===t&&(h=d,g=c),o=Fr(g)?g.call(o):g}return o}function bq(o,a,c){return o==null?o:ss(o,a,c)}function _q(o,a,c,h){return h=typeof h=="function"?h:t,o==null?o:ss(o,a,c,h)}var Qg=ag(We),Kg=ag(mt);function Pq(o,a,c){var h=K(o),d=h||oi(o)||En(o);if(a=B(a,4),c==null){var g=o&&o.constructor;d?c=h?new g:[]:we(o)?c=Fr(g)?Tn(oa(o)):{}:c={}}return(d?Ft:ar)(o,function(P,O,A){return a(c,P,O,A)}),c}function wq(o,a){return o==null?!0:If(o,a)}function Oq(o,a,c){return o==null?o:Gy(o,a,Df(c))}function Tq(o,a,c,h){return h=typeof h=="function"?h:t,o==null?o:Gy(o,a,Df(c),h)}function qn(o){return o==null?[]:vf(o,We(o))}function Sq(o){return o==null?[]:vf(o,mt(o))}function Cq(o,a,c){return c===t&&(c=a,a=t),c!==t&&(c=Wt(c),c=c===c?c:0),a!==t&&(a=Wt(a),a=a===a?a:0),Ui(Wt(o),a,c)}function Aq(o,a,c){return a=Dr(a),c===t?(c=a,a=0):c=Dr(c),o=Wt(o),jS(o,a,c)}function Eq(o,a,c){if(c&&typeof c!="boolean"&&at(o,a,c)&&(a=c=t),c===t&&(typeof a=="boolean"?(c=a,a=t):typeof o=="boolean"&&(c=o,o=t)),o===t&&a===t?(o=0,a=1):(o=Dr(o),a===t?(a=o,o=0):a=Dr(a)),o>a){var h=o;o=a,a=h}if(c||o%1||a%1){var d=_y();return tt(o+d*(a-o+sT("1e-"+((d+"").length-1))),a)}return Mf(o,a)}var qq=Cn(function(o,a,c){return a=a.toLowerCase(),o+(c?Xg(a):a)});function Xg(o){return np(ue(o).toLowerCase())}function Jg(o){return o=ue(o),o&&o.replace(MO,bT).replace(KO,"")}function xq(o,a,c){o=ue(o),a=Ct(a);var h=o.length;c=c===t?h:Ui(J(c),0,h);var d=c;return c-=a.length,c>=0&&o.slice(c,d)==a}function Mq(o){return o=ue(o),o&&hO.test(o)?o.replace(qm,_T):o}function Lq(o){return o=ue(o),o&&yO.test(o)?o.replace(Jh,"\\$&"):o}var jq=Cn(function(o,a,c){return o+(c?"-":"")+a.toLowerCase()}),Iq=Cn(function(o,a,c){return o+(c?" ":"")+a.toLowerCase()}),kq=tg("toLowerCase");function Fq(o,a,c){o=ue(o),a=J(a);var h=a?_n(o):0;if(!a||h>=a)return o;var d=(a-h)/2;return wa(ca(d),c)+o+wa(ua(d),c)}function Dq(o,a,c){o=ue(o),a=J(a);var h=a?_n(o):0;return a&&h<a?o+wa(a-h,c):o}function Rq(o,a,c){o=ue(o),a=J(a);var h=a?_n(o):0;return a&&h<a?wa(a-h,c)+o:o}function zq(o,a,c){return c||a==null?a=0:a&&(a=+a),HT(ue(o).replace(Zh,""),a||0)}function Vq(o,a,c){return(c?at(o,a,c):a===t)?a=1:a=J(a),Lf(ue(o),a)}function Nq(){var o=arguments,a=ue(o[0]);return o.length<3?a:a.replace(o[1],o[2])}var Wq=Cn(function(o,a,c){return o+(c?"_":"")+a.toLowerCase()});function Uq(o,a,c){return c&&typeof c!="number"&&at(o,a,c)&&(a=c=t),c=c===t?sr:c>>>0,c?(o=ue(o),o&&(typeof a=="string"||a!=null&&!tp(a))&&(a=Ct(a),!a&&bn(o))?ni($t(o),0,c):o.split(a,c)):[]}var Gq=Cn(function(o,a,c){return o+(c?" ":"")+np(a)});function Bq(o,a,c){return o=ue(o),c=c==null?0:Ui(J(c),0,o.length),a=Ct(a),o.slice(c,c+a.length)==a}function Hq(o,a,c){var h=y.templateSettings;c&&at(o,a,c)&&(a=t),o=ue(o),a=Ia({},a,h,ug);var d=Ia({},a.imports,h.imports,ug),g=We(d),P=vf(d,g),O,A,I=0,k=a.interpolate||$s,F="__p += '",R=yf((a.escape||$s).source+"|"+k.source+"|"+(k===xm?SO:$s).source+"|"+(a.evaluate||$s).source+"|$","g"),W="//# sourceURL="+(ce.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tT+"]")+`
`;o.replace(R,function($,te,ne,Et,ut,qt){return ne||(ne=Et),F+=o.slice(I,qt).replace(LO,PT),te&&(O=!0,F+=`' +
__e(`+te+`) +
'`),ut&&(A=!0,F+=`';
`+ut+`;
__p += '`),ne&&(F+=`' +
((__t = (`+ne+`)) == null ? '' : __t) +
'`),I=qt+$.length,$}),F+=`';
`;var H=ce.call(a,"variable")&&a.variable;if(!H)F=`with (obj) {
`+F+`
}
`;else if(OO.test(H))throw new Q(l);F=(A?F.replace(aO,""):F).replace(uO,"$1").replace(cO,"$1;"),F="function("+(H||"obj")+`) {
`+(H?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(O?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var Z=eb(function(){return ae(g,W+"return "+F).apply(t,P)});if(Z.source=F,ep(Z))throw Z;return Z}function $q(o){return ue(o).toLowerCase()}function Yq(o){return ue(o).toUpperCase()}function Qq(o,a,c){if(o=ue(o),o&&(c||a===t))return cy(o);if(!o||!(a=Ct(a)))return o;var h=$t(o),d=$t(a),g=ly(h,d),P=hy(h,d)+1;return ni(h,g,P).join("")}function Kq(o,a,c){if(o=ue(o),o&&(c||a===t))return o.slice(0,py(o)+1);if(!o||!(a=Ct(a)))return o;var h=$t(o),d=hy(h,$t(a))+1;return ni(h,0,d).join("")}function Xq(o,a,c){if(o=ue(o),o&&(c||a===t))return o.replace(Zh,"");if(!o||!(a=Ct(a)))return o;var h=$t(o),d=ly(h,$t(a));return ni(h,d).join("")}function Jq(o,a){var c=B1,h=H1;if(we(a)){var d="separator"in a?a.separator:d;c="length"in a?J(a.length):c,h="omission"in a?Ct(a.omission):h}o=ue(o);var g=o.length;if(bn(o)){var P=$t(o);g=P.length}if(c>=g)return o;var O=c-_n(h);if(O<1)return h;var A=P?ni(P,0,O).join(""):o.slice(0,O);if(d===t)return A+h;if(P&&(O+=A.length-O),tp(d)){if(o.slice(O).search(d)){var I,k=A;for(d.global||(d=yf(d.source,ue(Mm.exec(d))+"g")),d.lastIndex=0;I=d.exec(k);)var F=I.index;A=A.slice(0,F===t?O:F)}}else if(o.indexOf(Ct(d),O)!=O){var R=A.lastIndexOf(d);R>-1&&(A=A.slice(0,R))}return A+h}function Zq(o){return o=ue(o),o&&lO.test(o)?o.replace(Em,ET):o}var ex=Cn(function(o,a,c){return o+(c?" ":"")+a.toUpperCase()}),np=tg("toUpperCase");function Zg(o,a,c){return o=ue(o),a=c?t:a,a===t?OT(o)?MT(o):dT(o):o.match(a)||[]}var eb=ee(function(o,a){try{return Tt(o,t,a)}catch(c){return ep(c)?c:new Q(c)}}),tx=Ir(function(o,a){return Ft(a,function(c){c=cr(c),Lr(o,c,Jf(o[c],o))}),o});function rx(o){var a=o==null?0:o.length,c=B();return o=a?ge(o,function(h){if(typeof h[1]!="function")throw new Dt(u);return[c(h[0]),h[1]]}):[],ee(function(h){for(var d=-1;++d<a;){var g=o[d];if(Tt(g[0],this,h))return Tt(g[1],this,h)}})}function ix(o){return ES(zt(o,b))}function op(o){return function(){return o}}function nx(o,a){return o==null||o!==o?a:o}var ox=ig(),sx=ig(!0);function yt(o){return o}function sp(o){return jy(typeof o=="function"?o:zt(o,b))}function ax(o){return ky(zt(o,b))}function ux(o,a){return Fy(o,zt(a,b))}var cx=ee(function(o,a){return function(c){return ns(c,o,a)}}),lx=ee(function(o,a){return function(c){return ns(o,c,a)}});function ap(o,a,c){var h=We(a),d=va(a,h);c==null&&!(we(a)&&(d.length||!h.length))&&(c=a,a=o,o=this,d=va(a,We(a)));var g=!(we(c)&&"chain"in c)||!!c.chain,P=Fr(o);return Ft(d,function(O){var A=a[O];o[O]=A,P&&(o.prototype[O]=function(){var I=this.__chain__;if(g||I){var k=o(this.__wrapped__),F=k.__actions__=dt(this.__actions__);return F.push({func:A,args:arguments,thisArg:o}),k.__chain__=I,k}return A.apply(o,Xr([this.value()],arguments))})}),o}function hx(){return Ne._===this&&(Ne._=DT),this}function up(){}function fx(o){return o=J(o),ee(function(a){return Dy(a,o)})}var px=zf(ge),dx=zf(ny),vx=zf(lf);function tb(o){return Hf(o)?hf(cr(o)):BS(o)}function mx(o){return function(a){return o==null?t:Gi(o,a)}}var yx=og(),gx=og(!0);function cp(){return[]}function lp(){return!1}function bx(){return{}}function _x(){return""}function Px(){return!0}function wx(o,a){if(o=J(o),o<1||o>Qr)return[];var c=sr,h=tt(o,sr);a=B(a),o-=sr;for(var d=df(h,a);++c<o;)a(c);return d}function Ox(o){return K(o)?ge(o,cr):At(o)?[o]:dt(Pg(ue(o)))}function Tx(o){var a=++kT;return ue(o)+a}var Sx=Pa(function(o,a){return o+a},0),Cx=Vf("ceil"),Ax=Pa(function(o,a){return o/a},1),Ex=Vf("floor");function qx(o){return o&&o.length?da(o,yt,Sf):t}function xx(o,a){return o&&o.length?da(o,B(a,2),Sf):t}function Mx(o){return ay(o,yt)}function Lx(o,a){return ay(o,B(a,2))}function jx(o){return o&&o.length?da(o,yt,qf):t}function Ix(o,a){return o&&o.length?da(o,B(a,2),qf):t}var kx=Pa(function(o,a){return o*a},1),Fx=Vf("round"),Dx=Pa(function(o,a){return o-a},0);function Rx(o){return o&&o.length?pf(o,yt):0}function zx(o,a){return o&&o.length?pf(o,B(a,2)):0}return y.after=aE,y.ary=Lg,y.assign=YE,y.assignIn=Hg,y.assignInWith=Ia,y.assignWith=QE,y.at=KE,y.before=jg,y.bind=Jf,y.bindAll=tx,y.bindKey=Ig,y.castArray=bE,y.chain=qg,y.chunk=EC,y.compact=qC,y.concat=xC,y.cond=rx,y.conforms=ix,y.constant=op,y.countBy=RA,y.create=XE,y.curry=kg,y.curryRight=Fg,y.debounce=Dg,y.defaults=JE,y.defaultsDeep=ZE,y.defer=uE,y.delay=cE,y.difference=MC,y.differenceBy=LC,y.differenceWith=jC,y.drop=IC,y.dropRight=kC,y.dropRightWhile=FC,y.dropWhile=DC,y.fill=RC,y.filter=VA,y.flatMap=UA,y.flatMapDeep=GA,y.flatMapDepth=BA,y.flatten=Sg,y.flattenDeep=zC,y.flattenDepth=VC,y.flip=lE,y.flow=ox,y.flowRight=sx,y.fromPairs=NC,y.functions=sq,y.functionsIn=aq,y.groupBy=HA,y.initial=UC,y.intersection=GC,y.intersectionBy=BC,y.intersectionWith=HC,y.invert=cq,y.invertBy=lq,y.invokeMap=YA,y.iteratee=sp,y.keyBy=QA,y.keys=We,y.keysIn=mt,y.map=Ea,y.mapKeys=fq,y.mapValues=pq,y.matches=ax,y.matchesProperty=ux,y.memoize=xa,y.merge=dq,y.mergeWith=$g,y.method=cx,y.methodOf=lx,y.mixin=ap,y.negate=Ma,y.nthArg=fx,y.omit=vq,y.omitBy=mq,y.once=hE,y.orderBy=KA,y.over=px,y.overArgs=fE,y.overEvery=dx,y.overSome=vx,y.partial=Zf,y.partialRight=Rg,y.partition=XA,y.pick=yq,y.pickBy=Yg,y.property=tb,y.propertyOf=mx,y.pull=KC,y.pullAll=Ag,y.pullAllBy=XC,y.pullAllWith=JC,y.pullAt=ZC,y.range=yx,y.rangeRight=gx,y.rearg=pE,y.reject=eE,y.remove=eA,y.rest=dE,y.reverse=Kf,y.sampleSize=rE,y.set=bq,y.setWith=_q,y.shuffle=iE,y.slice=tA,y.sortBy=sE,y.sortedUniq=uA,y.sortedUniqBy=cA,y.split=Uq,y.spread=vE,y.tail=lA,y.take=hA,y.takeRight=fA,y.takeRightWhile=pA,y.takeWhile=dA,y.tap=qA,y.throttle=mE,y.thru=Aa,y.toArray=Ug,y.toPairs=Qg,y.toPairsIn=Kg,y.toPath=Ox,y.toPlainObject=Bg,y.transform=Pq,y.unary=yE,y.union=vA,y.unionBy=mA,y.unionWith=yA,y.uniq=gA,y.uniqBy=bA,y.uniqWith=_A,y.unset=wq,y.unzip=Xf,y.unzipWith=Eg,y.update=Oq,y.updateWith=Tq,y.values=qn,y.valuesIn=Sq,y.without=PA,y.words=Zg,y.wrap=gE,y.xor=wA,y.xorBy=OA,y.xorWith=TA,y.zip=SA,y.zipObject=CA,y.zipObjectDeep=AA,y.zipWith=EA,y.entries=Qg,y.entriesIn=Kg,y.extend=Hg,y.extendWith=Ia,ap(y,y),y.add=Sx,y.attempt=eb,y.camelCase=qq,y.capitalize=Xg,y.ceil=Cx,y.clamp=Cq,y.clone=_E,y.cloneDeep=wE,y.cloneDeepWith=OE,y.cloneWith=PE,y.conformsTo=TE,y.deburr=Jg,y.defaultTo=nx,y.divide=Ax,y.endsWith=xq,y.eq=Qt,y.escape=Mq,y.escapeRegExp=Lq,y.every=zA,y.find=NA,y.findIndex=Og,y.findKey=eq,y.findLast=WA,y.findLastIndex=Tg,y.findLastKey=tq,y.floor=Ex,y.forEach=xg,y.forEachRight=Mg,y.forIn=rq,y.forInRight=iq,y.forOwn=nq,y.forOwnRight=oq,y.get=rp,y.gt=SE,y.gte=CE,y.has=uq,y.hasIn=ip,y.head=Cg,y.identity=yt,y.includes=$A,y.indexOf=WC,y.inRange=Aq,y.invoke=hq,y.isArguments=$i,y.isArray=K,y.isArrayBuffer=AE,y.isArrayLike=vt,y.isArrayLikeObject=Ae,y.isBoolean=EE,y.isBuffer=oi,y.isDate=qE,y.isElement=xE,y.isEmpty=ME,y.isEqual=LE,y.isEqualWith=jE,y.isError=ep,y.isFinite=IE,y.isFunction=Fr,y.isInteger=zg,y.isLength=La,y.isMap=Vg,y.isMatch=kE,y.isMatchWith=FE,y.isNaN=DE,y.isNative=RE,y.isNil=VE,y.isNull=zE,y.isNumber=Ng,y.isObject=we,y.isObjectLike=Se,y.isPlainObject=ls,y.isRegExp=tp,y.isSafeInteger=NE,y.isSet=Wg,y.isString=ja,y.isSymbol=At,y.isTypedArray=En,y.isUndefined=WE,y.isWeakMap=UE,y.isWeakSet=GE,y.join=$C,y.kebabCase=jq,y.last=Nt,y.lastIndexOf=YC,y.lowerCase=Iq,y.lowerFirst=kq,y.lt=BE,y.lte=HE,y.max=qx,y.maxBy=xx,y.mean=Mx,y.meanBy=Lx,y.min=jx,y.minBy=Ix,y.stubArray=cp,y.stubFalse=lp,y.stubObject=bx,y.stubString=_x,y.stubTrue=Px,y.multiply=kx,y.nth=QC,y.noConflict=hx,y.noop=up,y.now=qa,y.pad=Fq,y.padEnd=Dq,y.padStart=Rq,y.parseInt=zq,y.random=Eq,y.reduce=JA,y.reduceRight=ZA,y.repeat=Vq,y.replace=Nq,y.result=gq,y.round=Fx,y.runInContext=C,y.sample=tE,y.size=nE,y.snakeCase=Wq,y.some=oE,y.sortedIndex=rA,y.sortedIndexBy=iA,y.sortedIndexOf=nA,y.sortedLastIndex=oA,y.sortedLastIndexBy=sA,y.sortedLastIndexOf=aA,y.startCase=Gq,y.startsWith=Bq,y.subtract=Dx,y.sum=Rx,y.sumBy=zx,y.template=Hq,y.times=wx,y.toFinite=Dr,y.toInteger=J,y.toLength=Gg,y.toLower=$q,y.toNumber=Wt,y.toSafeInteger=$E,y.toString=ue,y.toUpper=Yq,y.trim=Qq,y.trimEnd=Kq,y.trimStart=Xq,y.truncate=Jq,y.unescape=Zq,y.uniqueId=Tx,y.upperCase=ex,y.upperFirst=np,y.each=xg,y.eachRight=Mg,y.first=Cg,ap(y,function(){var o={};return ar(y,function(a,c){ce.call(y.prototype,c)||(o[c]=a)}),o}(),{chain:!1}),y.VERSION=i,Ft(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){y[o].placeholder=y}),Ft(["drop","take"],function(o,a){re.prototype[o]=function(c){c=c===t?1:De(J(c),0);var h=this.__filtered__&&!a?new re(this):this.clone();return h.__filtered__?h.__takeCount__=tt(c,h.__takeCount__):h.__views__.push({size:tt(c,sr),type:o+(h.__dir__<0?"Right":"")}),h},re.prototype[o+"Right"]=function(c){return this.reverse()[o](c).reverse()}}),Ft(["filter","map","takeWhile"],function(o,a){var c=a+1,h=c==Sm||c==K1;re.prototype[o]=function(d){var g=this.clone();return g.__iteratees__.push({iteratee:B(d,3),type:c}),g.__filtered__=g.__filtered__||h,g}}),Ft(["head","last"],function(o,a){var c="take"+(a?"Right":"");re.prototype[o]=function(){return this[c](1).value()[0]}}),Ft(["initial","tail"],function(o,a){var c="drop"+(a?"":"Right");re.prototype[o]=function(){return this.__filtered__?new re(this):this[c](1)}}),re.prototype.compact=function(){return this.filter(yt)},re.prototype.find=function(o){return this.filter(o).head()},re.prototype.findLast=function(o){return this.reverse().find(o)},re.prototype.invokeMap=ee(function(o,a){return typeof o=="function"?new re(this):this.map(function(c){return ns(c,o,a)})}),re.prototype.reject=function(o){return this.filter(Ma(B(o)))},re.prototype.slice=function(o,a){o=J(o);var c=this;return c.__filtered__&&(o>0||a<0)?new re(c):(o<0?c=c.takeRight(-o):o&&(c=c.drop(o)),a!==t&&(a=J(a),c=a<0?c.dropRight(-a):c.take(a-o)),c)},re.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},re.prototype.toArray=function(){return this.take(sr)},ar(re.prototype,function(o,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),h=/^(?:head|last)$/.test(a),d=y[h?"take"+(a=="last"?"Right":""):a],g=h||/^find/.test(a);d&&(y.prototype[a]=function(){var P=this.__wrapped__,O=h?[1]:arguments,A=P instanceof re,I=O[0],k=A||K(P),F=function(te){var ne=d.apply(y,Xr([te],O));return h&&R?ne[0]:ne};k&&c&&typeof I=="function"&&I.length!=1&&(A=k=!1);var R=this.__chain__,W=!!this.__actions__.length,H=g&&!R,Z=A&&!W;if(!g&&k){P=Z?P:new re(this);var $=o.apply(P,O);return $.__actions__.push({func:Aa,args:[F],thisArg:t}),new Rt($,R)}return H&&Z?o.apply(this,O):($=this.thru(F),H?h?$.value()[0]:$.value():$)})}),Ft(["pop","push","shift","sort","splice","unshift"],function(o){var a=Zs[o],c=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",h=/^(?:pop|shift)$/.test(o);y.prototype[o]=function(){var d=arguments;if(h&&!this.__chain__){var g=this.value();return a.apply(K(g)?g:[],d)}return this[c](function(P){return a.apply(K(P)?P:[],d)})}}),ar(re.prototype,function(o,a){var c=y[a];if(c){var h=c.name+"";ce.call(On,h)||(On[h]=[]),On[h].push({name:a,func:c})}}),On[_a(t,D).name]=[{name:"wrapper",func:t}],re.prototype.clone=ZT,re.prototype.reverse=eS,re.prototype.value=tS,y.prototype.at=xA,y.prototype.chain=MA,y.prototype.commit=LA,y.prototype.next=jA,y.prototype.plant=kA,y.prototype.reverse=FA,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=DA,y.prototype.first=y.prototype.head,Xo&&(y.prototype[Xo]=IA),y},Zr=LT();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ne._=Zr,define(function(){return Zr})):zi?((zi.exports=Zr)._=Zr,sf._=Zr):Ne._=Zr}).call(r)}),W1=class extends Set{constructor(r,e=!1){super(r),this.valuesAsFlags=e}};function zs(r){if(r instanceof Map)return Object.fromEntries([...r.entries()].map(([e,t])=>[e,zs(t)]));if(r instanceof Set)return Array.from(r.values()).map(zs);if(r instanceof W1)return{values:[...r.values()],valuesAsFlags:r.valuesAsFlags};if(typeof r=="object"){let e={};return Object.entries(r).forEach(([t,i])=>{e[t]=zs(i)}),e}else return r}var yZ=Pm(wm(),1);var x4=Pm(wm(),1);function dn(r,e){if(typeof r!="object")throw new Error(`Cannot merge into non-object objectToMergeWith. Received: ${JSON.stringify(r)}`);if(typeof e!="object")throw new Error(`Cannot merge using non-object objectToMergeWith. Received: ${JSON.stringify(e)}`);let t=(0,x4.cloneDeep)(r);for(let[i,n]of Object.entries(e))typeof n!="object"||n instanceof Set||t[i]===void 0?t[i]=n:t[i]=dn(t[i],n);return t}function U1(r,e){if(!(r===void 0||typeof r!="object"))for(let t of Object.keys(r)){if(t===e)return r[t];let i=r[t];if(typeof i=="object"){let n=U1(i,e);if(n!==void 0)return n}}}var _m="@composite:",M4="@inherit:",L4=class{constructor(r,e,t){this.tiledClassToMembersMap=r,this.enumNameToValuesMap=e,this.parserOptions=t,this.memoiser=new Map}flattenMembers(r,e){return this.memoiser.has(r)?{[r]:this.memoiser.get(r)}:(this.memoiser.set(r,e.reduce((t,i)=>({...t,...this.flattenMemberProperty(i)}),{})),{[r]:this.memoiser.get(r)})}flattenMemberProperty(r){let e=r.propertyType??r.propertytype;if(r.type==="class"){if(!this.memoiser.has(e)){let n=this.tiledClassToMembersMap.get(e).reduce((s,u)=>dn(this.flattenMemberProperty(u),s),{});this.memoiser.set(e,n)}let t=this.memoiser.get(e),i=dn(t,this.flattenValue(r.value,t));return this.checkIfShouldFlatten(r.name)?i:{[r.name.replace(_m,"")]:i}}else return this.enumNameToValuesMap.has(e)?this.enumNameToValuesMap.get(e).valuesAsFlags?{[r.name]:new Set(r.value.split(",").filter(t=>t!==""))}:{[r.name]:r.value}:{[r.name]:r.value}}get memoisedFlattenedProperties(){return this.memoiser}flattenValue(r,e){return Object.entries(r).reduce((t,[i,n])=>{if(typeof n!="object")return U1(e,i)instanceof Set?dn({[i]:new Set(n.split(",").filter(s=>s!==""))},t):dn({[i]:n},t);if(this.checkIfShouldFlatten(i))return dn(this.flattenValue(n,e),t);{let s=i.replace(_m,"");return dn({[s]:this.flattenValue(n,e)},t)}},{})}checkIfShouldFlatten(r){return this.parserOptions?.defaultComposite===!0?r.startsWith(M4):!r.startsWith(_m)}},V1=Pm(wm(),1),j4=class{constructor(r){this.flattener=r}flattenPropertiesOnObject(r){return{...this.flattener.memoisedFlattenedProperties.get(r.class??r.type),...r.properties?.reduce((e,t)=>({...e,...this.flattener.flattenMemberProperty(t)}),{}),name:r.name,id:r.id,class:r.class??r.type??null,x:r.x,y:r.y}}flattenPropertiesOnTile(r){return{...this.flattener.memoisedFlattenedProperties.get(r.class??r.type),...r.properties?.reduce((e,t)=>({...e,...this.flattener.flattenMemberProperty(t)}),{}),id:r.id,class:r.class??r.type??null}}getCustomTypesMap(){return new Map([...this.flattener.memoisedFlattenedProperties.entries()].map(([r,e])=>[r,(0,V1.cloneDeep)(e)]))}getEnumsMap(){return new Map([...this.flattener.enumNameToValuesMap.entries()].map(([r,e])=>[r,(0,V1.cloneDeep)(e)]))}toJSON(){return JSON.stringify({customTypes:zs(this.getCustomTypesMap()),enums:zs(this.getEnumsMap())},null,4)}};function I4(r,e){let t=new Map(r.propertyTypes.filter(s=>s.type==="enum").map(s=>[s.name,new W1(s.values,s.valuesAsFlags)])),i=new Map(r.propertyTypes.filter(s=>s.type==="class").map(s=>[s.name,s.members])),n=new L4(i,t,e);return i.forEach((s,u)=>{n.flattenMembers(u,s)}),new j4(n)}var G1={parse:I4};var Di=class{constructor(e,t){this.phaserTile=e;this.tiledProject=t}getProperty(e){let t={};if(this.tiledProject){let n=G1.parse(this.tiledProject),s=this.getType();if(s){let u=n.getCustomTypesMap()?.get(s);if(u)for(let[l,f]of Object.entries(u))t[l]=f}}return this.phaserTile.properties[e]??t[e]}hasProperty(e){return this.getProperty(e)!=null}getType(){return this.phaserTile.tileset?.tileData[this.phaserTile.index-1]?.type}};var zo=class{constructor(e,t){this.phaserTilemapLayer=e;this.tiledProject=t}getName(){return this.phaserTilemapLayer.layer.name}getProperty(e){return this.phaserTilemapLayer.layer.properties?.find(n=>n.name==e)?.value}hasProperty(e){return this.getProperty(e)!=null}isCharLayer(){return this.hasProperty(Fo)}getData(){return this.phaserTilemapLayer.layer.data.map(e=>e.map(t=>new Di(t,this.tiledProject)))}};var Vs=class{constructor(e,t){this.phaserTilemap=e;this.tiledProject=t;for(let i of this.phaserTilemap.layers)if(i.tilemapLayer==null)throw new Error(`Error initializing tilemap. Layer '${i.name}' has no 'tilemapLayer'. This can happen if you call 'createLayer' with the wrong layer ID.`)}getTileWidth(){return this.phaserTilemap.tileWidth}getTileHeight(){return this.phaserTilemap.tileHeight}getWidth(){return this.phaserTilemap.width}getHeight(){return this.phaserTilemap.height}getOrientation(){return this.phaserTilemap.orientation==Phaser.Tilemaps.Orientation.ISOMETRIC.toString()?"isometric":"orthogonal"}getLayers(){return this.phaserTilemap.layers.map(e=>new zo(e.tilemapLayer,this.tiledProject))}hasTileAt(e,t,i){return!!this.phaserTilemap.hasTileAt(e,t,i)}getTileAt(e,t,i){let n=this.phaserTilemap.getTileAt(e,t,!1,i);if(n)return new Di(n,this.tiledProject)}};var Vh=class{constructor(e,t="orthogonal",i="ge_collide"){this.map=e;this.orientation=t;this.layerMap=new Map;this.layers=[];let n=-1,s=-1;Object.entries(e).map(([u,l])=>{let f=l.data[0]?.length,p=l.data.length;if(n!==-1&&n!==f||s!==-1&&s!==p)throw new Error("All tilemap layers must have the same dimensions.");n=f,s=p;let v=[];for(let T=0;T<l.data.length;T++){let S=[];for(let q=0;q<l.data[T].length;q++){let M=new Tm(l.data[T][q]===1,i);S.push(M)}v.push(S)}let b=new Om(u,v,l.isCharLayer);this.layers.push(b),this.layerMap.set(u,b)})}getWidth(){return Object.values(this.map)[0]?.data[0]?.length||0}getHeight(){return Object.values(this.map)[0]?.data.length||0}getOrientation(){return this.orientation}getLayers(){return this.layers}hasTileAt(e,t,i){return!i||!this.layerMap.get(i)?!1:e>=0&&e<this.getWidth()&&t>=0&&t<this.getHeight()}getTileAt(e,t,i){if(!i)return;let n=this.layerMap.get(i);if(n)return n.getData()[t][e]}},Om=class{constructor(e,t,i=!1){this.name=e;this.tiles=t;this.isCharLayerInternal=i}getName(){return this.name}getProperty(e){if(e==="ge_charLayer"&&this.isCharLayerInternal)return this.name}hasProperty(e){return e==="ge_charLayer"&&this.isCharLayerInternal}getData(){return this.tiles}isCharLayer(){return this.isCharLayerInternal}},Tm=class{constructor(e,t){this.isBlocking=e;this.collisionPropertyName=t}getProperty(e){return e===this.collisionPropertyName?this.isBlocking:!1}hasProperty(e){return e===this.collisionPropertyName}};var Vo=class{constructor(e,t){this.props={};let i=e.find(s=>{if(!s.tiles)return!1;let u=s.firstgid??0;return!!s.tiles.find(f=>f.id+u===t)});if(!i)return;let n=i.tiles?.find(s=>s.id+(i.firstgid??0)===t);if(n?.properties)for(let s of n.properties)s.name&&(this.props[s.name]=s.value)}getProperty(e){return this.props[e]}hasProperty(e){return this.props[e]!==void 0}};var No=class{constructor(e,t){this.layer=t;this.data=[];if(this.data=[],this.layer.data)for(let i=0;i<(this.layer.height||0);i++){let n=[];for(let s=0;s<(this.layer.width||0);s++){let u=this.layer.data[i*(this.layer.width||0)+s];u!==void 0?n.push(new Vo(e,u)):n.push(void 0)}this.data.push(n)}}getName(){return this.layer.name}getProperty(e){return this.layer.properties?.find(t=>t.name===e)?.value}hasProperty(e){return this.getProperty(e)!==void 0}getData(){return this.data}isCharLayer(){return this.hasProperty("ge_charLayer")}};var Nh=class{constructor(e){this.rawTilemap=e;this.layers=[];this.layers=this.rawTilemap.layers?.map(t=>new No(this.rawTilemap.tilesets,t))}hasTileAt(e,t,i){if(e<0||e>=this.rawTilemap.width||t<0||t>=this.rawTilemap.height||!this.rawTilemap.layers)return!1;let n=this.rawTilemap.layers.find(u=>u.name===i);if(!n)return!1;let s=t*this.rawTilemap.width+e;return n.data[s]>0}getTileAt(e,t,i){if(e<0||e>=this.rawTilemap.width||t<0||t>=this.rawTilemap.height||!this.rawTilemap.layers)return;let n=this.layers.find(s=>s.getName()===i);if(n)return n.getData()[t][e]}getOrientation(){return this.rawTilemap.orientation}getLayers(){return this.layers}getWidth(){return this.rawTilemap.width}getHeight(){return this.rawTilemap.height}};var Ns=class r{constructor(e){this.scene=e;this.geHeadless=new Rs(!1);this.isCreatedInternal=!1;r.welcomeMessagePrinted||(console.log(`Using GridEngine Phaser Plugin v${qh}`),r.welcomeMessagePrinted=!0),this.scene.sys.events.once("boot",this.boot,this)}static{this.welcomeMessagePrinted=!1}boot(){this.scene.sys.events.on("update",this.update,this)}getCharLayer(e){return this.geHeadless.getCharLayer(e)}getTransition(e,t){return this.geHeadless.getTransition(e,t)}setTransition(e,t,i){this.geHeadless.setTransition(e,t,i)}create(e,t){this.geHeadless.create(new Vs(e,t.tiledProject),t),this.isCreatedInternal=!0,this.gridCharacters=new Map;let i=this.setConfigDefaults(t);this.config=i,this.gridTilemap=new un(e),this.addCharacters()}getPosition(e){return this.geHeadless.getPosition(e)}move(e,t){this.geHeadless.move(e,t)}moveRandomly(e,t=0,i=-1){this.geHeadless.moveRandomly(e,t,i)}getMovement(e){return this.geHeadless.getMovement(e)}moveTo(e,t,i){return this.geHeadless.moveTo(e,t,i)}stopMovement(e){this.geHeadless.stopMovement(e)}setSpeed(e,t){this.geHeadless.setSpeed(e,t)}getSpeed(e){return this.geHeadless.getSpeed(e)}setContainer(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setContainer(t)}getContainer(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getContainer()}getOffsetX(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getOffsetX()}setOffsetX(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setOffsetX(t)}getOffsetY(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getOffsetY()}setOffsetY(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.setOffsetY(t)}getDepthOffset(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getDepthOffset()}collidesWithTiles(e){return this.geHeadless.collidesWithTiles(e)}getWalkingAnimationMapping(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getAnimation()?.getWalkingAnimationMapping()}hasLayerOverlay(){return this.initGuard(),!!this.config?.layerOverlay}setWalkingAnimationMapping(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.getAnimation()?.setWalkingAnimationMapping(t)}update(e,t){if(this.isCreatedInternal&&this.gridCharacters)for(let[i,n]of this.gridCharacters)n.update(t);this.geHeadless.update(e,t)}addCharacter(e){this.geHeadless.addCharacter(e),this.addCharacterInternal(e)}hasCharacter(e){return this.geHeadless.hasCharacter(e)}removeCharacter(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);t.destroy(),this.gridCharacters?.delete(e),this.geHeadless.removeCharacter(e)}removeAllCharacters(){if(this.initGuard(),!!this.gridCharacters){for(let e of this.gridCharacters.keys())this.removeCharacter(e);this.geHeadless.removeAllCharacters()}}getAllCharacters(e){return this.geHeadless.getAllCharacters(e)}getLabels(e){return this.geHeadless.getLabels(e)}addLabels(e,t){this.geHeadless.addLabels(e,t)}removeLabels(e,t){this.geHeadless.removeLabels(e,t)}clearLabels(e){this.geHeadless.clearLabels(e)}follow(e,t,i,n){let s;i===void 0?s={distance:0,closestPointIfBlocked:!1}:typeof i=="number"?(s={distance:i,closestPointIfBlocked:!1},n&&(s.closestPointIfBlocked=!0)):s=i,this.geHeadless.follow(e,t,s)}isMoving(e){return this.geHeadless.isMoving(e)}getFacingDirection(e){return this.geHeadless.getFacingDirection(e)}getFacingPosition(e){return this.geHeadless.getFacingPosition(e)}turnTowards(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);i.turnTowards(t),this.geHeadless.turnTowards(e,t)}getCharactersAt(e,t){return this.geHeadless.getCharactersAt(e,t)}setPosition(e,t,i){this.geHeadless.setPosition(e,t,i)}getSprite(e){this.initGuard();let t=this.gridCharacters?.get(e);if(!t)throw this.createCharUnknownErr(e);return t.getSprite()}setSprite(e,t){this.initGuard();let i=this.gridCharacters?.get(e);if(!i)throw this.createCharUnknownErr(e);t.setOrigin(0,0),i.setSprite(t)}isBlocked(e,t,i=["geDefault"]){return this.geHeadless.isBlocked(e,t,i)}isTileBlocked(e,t){return this.geHeadless.isTileBlocked(e,t)}getCollisionGroups(e){return this.geHeadless.getCollisionGroups(e)}setCollisionGroups(e,t){this.geHeadless.setCollisionGroups(e,t)}getIgnoreCollisionGroups(e){return this.geHeadless.getIgnoreCollisionGroups(e)}setIgnoreCollisionGroups(e,t){this.geHeadless.setIgnoreCollisionGroups(e,t)}getTilePosInDirection(e,t,i){return this.geHeadless.getTilePosInDirection(e,t,i)}findShortestPath(e,t,i={}){return this.geHeadless.findShortestPath(e,t,i)}steppedOn(e,t,i){return this.geHeadless.steppedOn(e,t,i)}characterShifted(){return this.geHeadless.characterShifted()}movementStarted(){return this.geHeadless.movementStarted()}movementStopped(){return this.geHeadless.movementStopped()}directionChanged(){return this.geHeadless.directionChanged()}positionChangeStarted(){return this.geHeadless.positionChangeStarted()}positionChangeFinished(){return this.geHeadless.positionChangeFinished()}getMovementProgress(e){return this.geHeadless.getMovementProgress(e)}rebuildTileCollisionCache(e,t,i,n){this.geHeadless.rebuildTileCollisionCache(e,t,i,n)}addQueueMovements(e,t,i){this.geHeadless.addQueueMovements(e,t,i)}getEnqueuedMovements(e){return this.geHeadless.getEnqueuedMovements(e)}queueMovementFinished(){return this.geHeadless.queueMovementFinished()}clearEnqueuedMovements(e){return this.geHeadless.clearEnqueuedMovements(e)}getState(){return{characters:this.geHeadless.getState().characters.map(e=>({...e,offsetX:this.getOffsetX(e.id),offsetY:this.getOffsetY(e.id)}))}}setState(e){if(this.geHeadless.setState(e),this.gridCharacters)for(let t of e.characters){let i=this.gridCharacters.get(t.id);i&&(i.setOffsetX(t.offsetX),i.setOffsetY(t.offsetY))}}getTileCost(e,t,i){return this.initGuard(),this.geHeadless.getTileCost(e,t,i)}revertCurrentMovement(e){this.geHeadless.revertCurrentMovement(e)}isCurrentMovementReverted(e){return this.geHeadless.isCurrentMovementReverted(e)}setConfigDefaults(e){return{collisionTilePropertyName:"ge_collide",numberOfDirections:4,characterCollisionStrategy:"BLOCK_TWO_TILES",layerOverlay:!1,cacheTileCollisions:!1,...e}}initGuard(){if(!this.isCreatedInternal)throw this.createUninitializedErr()}createUninitializedErr(){throw new Error("GridEngine not initialized. You need to call create() first.")}addCharacters(){this.config?.characters.forEach(e=>this.addCharacterInternal(e))}createCharUnknownErr(e){return new Error(`Character unknown: ${e}`)}addCharacterInternal(e){if(this.initGuard(),!this.gridTilemap)throw this.createUninitializedErr();if(!this.config)throw this.createUninitializedErr();let t=new ah(e,this.scene,this.gridTilemap,this.config.layerOverlay,this.geHeadless);this.gridCharacters?.set(e.id,t)}};var k4=Ns;0&&(module.exports={ArrayTilemap,CharacterShiftAction,CollisionStrategy,Direction,GridEngine,GridEngineHeadless,MoveToResult,NoPathFoundStrategy,NumberOfDirections,PathBlockedStrategy,PhaserTile,PhaserTileLayer,PhaserTilemap,QueuedPathBlockedStrategy,TiledLayer,TiledTile,TiledTilemap,directionFromPos});
/*! Bundled license information:

tiled-property-flattener/dist/tiled_property_flattener.min.js:
  (*! Bundled license information:
  
  lodash/lodash.js:
    (**
     * @license
     * Lodash <https://lodash.com/>
     * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
     * Released under MIT license <https://lodash.com/license>
     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
     * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     *)
  *)
*/
